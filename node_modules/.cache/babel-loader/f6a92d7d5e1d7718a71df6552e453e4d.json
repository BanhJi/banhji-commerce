{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js??ref--13-0!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/scripts/cashMovementHandler.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/scripts/cashMovementHandler.js","mtime":1638499442972},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9hc3luY1RvR2VuZXJhdG9yID0gcmVxdWlyZSgiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktY29tbWVyY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciIpLmRlZmF1bHQ7CgpyZXF1aXJlKCJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwoKdmFyIGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTsKCnZhciBhcGlVcmwgPSByZXF1aXJlKCcuLi9hcGlVcmwuanMnKTsgLy8gR0VUCgoKbW9kdWxlLmV4cG9ydHMuZ2V0Q2FzaE1vdmVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbXMpIHsKICAgIHZhciByZXNwb25zZSwgZGF0YSwgcmVzdWx0OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoYXBpVXJsLmdlbmVyYWxfbGVkZ2VyX2dldCwgcGFyYW1zKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgZGF0YSA9IFtdOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIGRhdGFbJ251bWJlck9mQWNjb3VudCddID0gMDsKICAgICAgICAgICAgICBkYXRhWydudW1iZXJPZkFjY291bnRXaXRoTmVnYXRpdmVCYWxhbmNlJ10gPSAwOwogICAgICAgICAgICAgIGRhdGFbJ2xpbmVzJ10gPSBbXTsKICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5udW1iZXIgPT0gMSB8fCB2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5udW1iZXIgPT0gNSkgewogICAgICAgICAgICAgICAgICAvLyBmaWx0ZXIgQmFuayBBY2NvdW50IFsxLDVdCiAgICAgICAgICAgICAgICAgIHZhciBiYWwgPSB2YWx1ZS5vcGVuaW5nQmFsYW5jZTsKCiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5uYXR1cmUgPT0gJ0NyJykgewogICAgICAgICAgICAgICAgICAgIGJhbCA9IGJhbCAqIC0xOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YWx1ZS5saW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUubmF0dXJlID09ICdDcicpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuYW1vdW50ID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBiYWwgPSBiYWwgLSByb3cuYW1vdW50OwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsID0gYmFsICsgcm93LmFtb3VudCAqIC0xOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBiYWwgPSBiYWwgKyByb3cuYW1vdW50OwogICAgICAgICAgICAgICAgICAgIH0gLy8gU2V0IGRyL2NyIGZyb20gYW1vdW50CgoKICAgICAgICAgICAgICAgICAgICB2YXIgZHIgPSAnJywKICAgICAgICAgICAgICAgICAgICAgICAgY3IgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5hbW91bnQgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBjciA9IHJvdy5hbW91bnQgKiAtMTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgZHIgPSByb3cuYW1vdW50OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZGF0YS5saW5lcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiByb3cuam91cm5hbC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgam91cm5hbF90eXBlOiByb3cuam91cm5hbC5qb3VybmFsX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsX2RhdGU6IG5ldyBEYXRlKHJvdy5qb3VybmFsLmpvdXJuYWxfZGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsX251bWJlcjogcm93LmpvdXJuYWwubnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJvdy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9pZDogdmFsdWUuYWNjb3VudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogdmFsdWUuYWNjb3VudC5udW1iZXIgKyAnICcgKyB2YWx1ZS5hY2NvdW50Lm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X3R5cGU6IHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLAogICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9ncm91cDogW10sCiAgICAgICAgICAgICAgICAgICAgICBkcjogZHIsCiAgICAgICAgICAgICAgICAgICAgICBjcjogY3IsCiAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiBiYWwsCiAgICAgICAgICAgICAgICAgICAgICBvcGVuQmFsOiB2YWx1ZS5vcGVuaW5nQmFsYW5jZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDApOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA5XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7"},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/scripts/cashMovementHandler.js"],"names":["axios","require","apiUrl","module","exports","getCashMovement","params","get","general_ledger_get","response","data","result","forEach","value","account","account_type","number","bal","openingBalance","nature","lines","row","amount","dr","cr","push","id","journal","uuid","journal_type","journal_date","Date","journal_number","description","name","account_id","account_group","balance","openBal","window","console","error"],"mappings":"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","sourcesContent":["const axios \t= require('axios')\nconst apiUrl \t= require('../apiUrl.js') \n\n// GET\nmodule.exports.getCashMovement = async function (params) {\n    try {\n        const response = await axios.get(apiUrl.general_ledger_get, params);\n        \n        let data = []\n        if(response.data){\n            let result = response.data\n            data['numberOfAccount'] = 0\n            data['numberOfAccountWithNegativeBalance'] = 0\n            data['lines'] = []\n\n            result.forEach(value => {\n                if(value.account.account_type.number == 1 || value.account.account_type.number == 5){ // filter Bank Account [1,5]\n                    let bal = value.openingBalance\n                    if (value.account.account_type.nature == 'Cr') {\n                        bal = bal * -1\n                    }\n                    value.lines.forEach(row => {\n                        if (value.account.account_type.nature == 'Cr') {\n                            if (row.amount > 0) {\n                                bal = bal - row.amount\n                            } else {\n                                bal = bal + (row.amount * -1) \n                            }\n                        } else {\n                            bal = bal + row.amount\n                        }\n                        // Set dr/cr from amount\n                        var dr = '', cr = '';\n                        if(row.amount < 0){\n                            cr = row.amount * -1\n                        }else{\n                            dr = row.amount\n                        }\n\n                        data.lines.push({\n                            id              : row.journal.uuid,\n                            journal_type    : row.journal.journal_type,\n                            journal_date    : new Date(row.journal.journal_date),\n                            journal_number  : row.journal.number,\n                            description     : row.description,\n                            name            : '',\n                            account_id      : value.account.uuid,\n                            account         : value.account.number +' '+ value.account.name,\n                            account_type    : value.account.account_type,\n                            account_group   : [],\n                            dr              : dr,\n                            cr              : cr,\n                            balance         : bal,\n                            openBal         : value.openingBalance,\n                        })\n                    })\n                }\n            })\n        }\n\n        return data;\n    } catch (error) {\n        window.console.error(error);\n    }\n}"]}]}
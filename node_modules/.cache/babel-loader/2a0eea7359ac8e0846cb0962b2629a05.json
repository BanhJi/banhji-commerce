{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js??ref--13-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/cashMovementHandler.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/cashMovementHandler.js","mtime":1638499442972},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9hc3luY1RvR2VuZXJhdG9yID0gcmVxdWlyZSgiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktYWNjb3VudGluZy13ZWItbW9kdWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IiKS5kZWZhdWx0OwoKcmVxdWlyZSgicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKCnZhciBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7Cgp2YXIgYXBpVXJsID0gcmVxdWlyZSgnLi4vYXBpVXJsLmpzJyk7IC8vIEdFVAoKCm1vZHVsZS5leHBvcnRzLmdldENhc2hNb3ZlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocGFyYW1zKSB7CiAgICB2YXIgcmVzcG9uc2UsIGRhdGEsIHJlc3VsdDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KGFwaVVybC5nZW5lcmFsX2xlZGdlcl9nZXQsIHBhcmFtcyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGRhdGEgPSBbXTsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICBkYXRhWydudW1iZXJPZkFjY291bnQnXSA9IDA7CiAgICAgICAgICAgICAgZGF0YVsnbnVtYmVyT2ZBY2NvdW50V2l0aE5lZ2F0aXZlQmFsYW5jZSddID0gMDsKICAgICAgICAgICAgICBkYXRhWydsaW5lcyddID0gW107CiAgICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAodmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUubnVtYmVyID09IDEgfHwgdmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUubnVtYmVyID09IDUpIHsKICAgICAgICAgICAgICAgICAgLy8gZmlsdGVyIEJhbmsgQWNjb3VudCBbMSw1XQogICAgICAgICAgICAgICAgICB2YXIgYmFsID0gdmFsdWUub3BlbmluZ0JhbGFuY2U7CgogICAgICAgICAgICAgICAgICBpZiAodmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUubmF0dXJlID09ICdDcicpIHsKICAgICAgICAgICAgICAgICAgICBiYWwgPSBiYWwgKiAtMTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFsdWUubGluZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLm5hdHVyZSA9PSAnQ3InKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocm93LmFtb3VudCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsID0gYmFsIC0gcm93LmFtb3VudDsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhbCA9IGJhbCArIHJvdy5hbW91bnQgKiAtMTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgYmFsID0gYmFsICsgcm93LmFtb3VudDsKICAgICAgICAgICAgICAgICAgICB9IC8vIFNldCBkci9jciBmcm9tIGFtb3VudAoKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRyID0gJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNyID0gJyc7CgogICAgICAgICAgICAgICAgICAgIGlmIChyb3cuYW1vdW50IDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgY3IgPSByb3cuYW1vdW50ICogLTE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGRyID0gcm93LmFtb3VudDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGRhdGEubGluZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBpZDogcm93LmpvdXJuYWwudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGpvdXJuYWxfdHlwZTogcm93LmpvdXJuYWwuam91cm5hbF90eXBlLAogICAgICAgICAgICAgICAgICAgICAgam91cm5hbF9kYXRlOiBuZXcgRGF0ZShyb3cuam91cm5hbC5qb3VybmFsX2RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgam91cm5hbF9udW1iZXI6IHJvdy5qb3VybmFsLm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByb3cuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfaWQ6IHZhbHVlLmFjY291bnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IHZhbHVlLmFjY291bnQubnVtYmVyICsgJyAnICsgdmFsdWUuYWNjb3VudC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF90eXBlOiB2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfZ3JvdXA6IFtdLAogICAgICAgICAgICAgICAgICAgICAgZHI6IGRyLAogICAgICAgICAgICAgICAgICAgICAgY3I6IGNyLAogICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogYmFsLAogICAgICAgICAgICAgICAgICAgICAgb3BlbkJhbDogdmFsdWUub3BlbmluZ0JhbGFuY2UKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGRhdGEpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOV1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOw=="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/cashMovementHandler.js"],"names":["axios","require","apiUrl","module","exports","getCashMovement","params","get","general_ledger_get","response","data","result","forEach","value","account","account_type","number","bal","openingBalance","nature","lines","row","amount","dr","cr","push","id","journal","uuid","journal_type","journal_date","Date","journal_number","description","name","account_id","account_group","balance","openBal","window","console","error"],"mappings":"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","sourcesContent":["const axios \t= require('axios')\nconst apiUrl \t= require('../apiUrl.js') \n\n// GET\nmodule.exports.getCashMovement = async function (params) {\n    try {\n        const response = await axios.get(apiUrl.general_ledger_get, params);\n        \n        let data = []\n        if(response.data){\n            let result = response.data\n            data['numberOfAccount'] = 0\n            data['numberOfAccountWithNegativeBalance'] = 0\n            data['lines'] = []\n\n            result.forEach(value => {\n                if(value.account.account_type.number == 1 || value.account.account_type.number == 5){ // filter Bank Account [1,5]\n                    let bal = value.openingBalance\n                    if (value.account.account_type.nature == 'Cr') {\n                        bal = bal * -1\n                    }\n                    value.lines.forEach(row => {\n                        if (value.account.account_type.nature == 'Cr') {\n                            if (row.amount > 0) {\n                                bal = bal - row.amount\n                            } else {\n                                bal = bal + (row.amount * -1) \n                            }\n                        } else {\n                            bal = bal + row.amount\n                        }\n                        // Set dr/cr from amount\n                        var dr = '', cr = '';\n                        if(row.amount < 0){\n                            cr = row.amount * -1\n                        }else{\n                            dr = row.amount\n                        }\n\n                        data.lines.push({\n                            id              : row.journal.uuid,\n                            journal_type    : row.journal.journal_type,\n                            journal_date    : new Date(row.journal.journal_date),\n                            journal_number  : row.journal.number,\n                            description     : row.description,\n                            name            : '',\n                            account_id      : value.account.uuid,\n                            account         : value.account.number +' '+ value.account.name,\n                            account_type    : value.account.account_type,\n                            account_group   : [],\n                            dr              : dr,\n                            cr              : cr,\n                            balance         : bal,\n                            openBal         : value.openingBalance,\n                        })\n                    })\n                }\n            })\n        }\n\n        return data;\n    } catch (error) {\n        window.console.error(error);\n    }\n}"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/insightnpo/FundReceiptGraph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/insightnpo/FundReceiptGraph.vue","mtime":1638760538975},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQga2VuZG8gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXVpJzsKaW1wb3J0IHsgaTE4biB9IGZyb20gIkAvaTE4biI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiOwppbXBvcnQgeyBDaGFydCB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1jaGFydHMtdnVlLXdyYXBwZXInOwoKdmFyIEpvdXJuYWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2pvdXJuYWxIYW5kbGVyIik7Cgp2YXIgRW50aXR5VHlwZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0VudGl0eVR5cGUiKTsKCnZhciBBY2NvdW50VHlwZUNvZGUgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9BY2NvdW50VHlwZUNvZGUiKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRnVuZFJlY2VpcHRHcmFwaCcsCiAgY29tcG9uZW50czogewogICAgJ2NoYXJ0JzogQ2hhcnQsCiAgICBMb2FkaW5nTWU6IGZ1bmN0aW9uIExvYWRpbmdNZSgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiQC9jb21wb25lbnRzL0xvYWRpbmciKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmFuc2FjdGlvbnM6IFtdLAogICAgICB0cmFuc2FjdGlvbkxpc3Q6IFtdLAogICAgICBzZXJpZXM6IFt7CiAgICAgICAgZmllbGQ6ICdhbW91bnQnLAogICAgICAgIGNhdGVnb3J5RmllbGQ6ICJtb250aF9vZiIKICAgICAgfV0sCiAgICAgIGNhdGVnb3J5VGVtcGxhdGU6ICIjOiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh2YWx1ZSksICdNTU0nKSAjIiwKICAgICAgdG9vbHRpcHRlbXBsYXRlOiAiIz0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUoZGF0YUl0ZW0ubW9udGhfb2YpLCAnTU1NTScpICM6ICM9IGtlbmRvLnRvU3RyaW5nKHZhbHVlLCAnbicpICMiLAogICAgICBzaG93TG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgIEpvdXJuYWxIYW5kbGVyLmdldEpvdXJuYWxCeVRyYW5zYWN0aW9uVHlwZShFbnRpdHlUeXBlLkZVTkRfUkVDRUlQVCwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgYXNfb2ZfZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkgKyAiVDIzOjU5OjU5Ljk5OVoiCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICBfdGhpcy50cmFuc2FjdGlvbnMgPSByZXMuZGF0YTsKCiAgICAgICAgICBfdGhpcy5iaW5kRGF0YSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kc25vdGlmeS5lcnJvcihpMThuLnQoImVycm9yX3NvbWV0aGluZ193cm9uZyIpKTsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGJpbmREYXRhOiBmdW5jdGlvbiBiaW5kRGF0YSgpIHsKICAgICAgdmFyIGcgPSB7fSwKICAgICAgICAgIGZpc2NhbERhdGUgPSBIZWxwZXIuZ2V0RmlzY2FsRGF0ZUJ5RGF0ZShuZXcgRGF0ZSgpKSwKICAgICAgICAgIHNkYXRlID0gbmV3IERhdGUoZmlzY2FsRGF0ZS5zdGFydF9kYXRlKSwKICAgICAgICAgIGVkYXRlID0gbmV3IERhdGUoZmlzY2FsRGF0ZS5lbmRfZGF0ZSk7CiAgICAgIC8qIFNldCBkZWZhdWx0IDEyIG1vbnRocyAqLwoKICAgICAgd2hpbGUgKHNkYXRlIDw9IGVkYXRlKSB7CiAgICAgICAgdmFyIGQgPSBrZW5kby50b1N0cmluZyhzZGF0ZSwgInl5eXktTU0iKTsKICAgICAgICBnW2RdID0gewogICAgICAgICAgbW9udGhfb2Y6IGQsCiAgICAgICAgICBhbW91bnQ6IDAKICAgICAgICB9OyAvLyBOZXh0IE1vbnRoCgogICAgICAgIHNkYXRlLnNldE1vbnRoKHNkYXRlLmdldE1vbnRoKCkgKyAxKTsKICAgICAgfQoKICAgICAgdGhpcy50cmFuc2FjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAvKiBGaWx0ZXIgUmV2ZW51ZSBBY2NvdW50cyAqLwogICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LnR5cGVfY29kZSA9PT0gQWNjb3VudFR5cGVDb2RlLlJFVkVOVUUpIHsKICAgICAgICAgIGdbdmFsdWUuam91cm5hbC5tb250aF9vZl0uYW1vdW50ICs9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgICAgLyogUmV2ZXJzZSBuZWdhdGl2ZSBhbW91bnQgb2YgQ3IgKi8KICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKiBCaW5kIGRhdGEgKi8KCiAgICAgIHRoaXMudHJhbnNhY3Rpb25MaXN0ID0gT2JqZWN0LnZhbHVlcyhnKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRpYWxpemUoKTsKICB9Cn07"},{"version":3,"sources":["FundReceiptGraph.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <v-card\n        outlined\n        dense\n        color=\"white\"\n        class=\"pa-4 pb-0 no_border\"\n        min-height=\"360px\"\n    >\n        <v-row>\n            <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                <h3\n                    class=\"font_20\"\n                    :class=\"{ line_28: this.$i18n.locale == 'kh' }\"\n                >\n                    {{ $t(\"fund_receipt\") }}\n                </h3>\n                <p class=\"mb-2\">\n                    {{ $t(\"for_current_year\") }}\n                </p>\n            </v-col>\n        </v-row>\n\n        <LoadingMe\n            :isLoading=\"showLoading\"\n            :fullPage=\"false\"\n            :myLoading=\"true\"\n            :type=\"'loading'\"\n        />\n\n        <chart ref=\"chart\"\n            :data-source=\"transactionList\"\n            :legend-visible=\"false\"\n            :chart-area-background=\"''\"\n            :series-defaults-type=\"'line'\"\n            :series-defaults-style=\"'smooth'\"\n            :value-axis-line-visible=\"false\"\n            :category-axis-major-grid-lines-visible=\"false\"\n            :category-axis-labels-rotation=\"'auto'\"\n            :category-axis-labels-template=\"categoryTemplate\"\n            :tooltip-visible=\"true\"\n            :tooltip-template=\"tooltiptemplate\"\n            :series=\"series\"\n            :theme=\"'sass'\" />\n    </v-card>\n</template>\n\n<script>\nimport kendo from '@progress/kendo-ui';\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\nimport { Chart } from '@progress/kendo-charts-vue-wrapper';\n\nconst JournalHandler = require(\"@/scripts/journalHandler\");\nconst EntityType = require(\"@/scripts/default_setup/EntityType\");\nconst AccountTypeCode = require(\"@/scripts/default_setup/AccountTypeCode\");\n\nexport default {\n    name: 'FundReceiptGraph',\n    components: {\n        'chart': Chart,\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    data: function() {\n        return {\n            transactions : [],\n            transactionList : [],\n            series: [{\n                field: 'amount',\n                categoryField: \"month_of\",\n            }],\n            categoryTemplate: \"#: kendo.toString(new Date(value), 'MMM') #\",\n            tooltiptemplate: \"#= kendo.toString(new Date(dataItem.month_of), 'MMMM') #: #= kendo.toString(value, 'n') #\",\n            showLoading : false,\n        }\n    },\n    methods: {\n        initialize(){\n            this.showLoading = true;\n            JournalHandler.getJournalByTransactionType(EntityType.FUND_RECEIPT, {\n                params: {\n                    as_of_date: new Date().toISOString().substr(0, 10) + \"T23:59:59.999Z\",\n                },\n            })\n            .then((res)=>{\n                if(res){\n                    this.transactions = res.data;\n                    this.bindData();\n                }else{\n                    this.$snotify.error(i18n.t(\"error_something_wrong\"));\n                }\n            })\n            .finally(()=>{\n                this.showLoading = false;\n            });\n        },\n        bindData(){\n            let g = {},\n                fiscalDate = Helper.getFiscalDateByDate(new Date()),\n                sdate = new Date(fiscalDate.start_date),\n                edate = new Date(fiscalDate.end_date);\n\n            /* Set default 12 months */\n            while (sdate <= edate) {\n                let d = kendo.toString(sdate, \"yyyy-MM\");\n                g[d] = {\n                    month_of : d,\n                    amount : 0,\n                }\n\n                // Next Month\n                sdate.setMonth(sdate.getMonth() + 1);\n            }\n\n            this.transactions.forEach(value => {\n                /* Filter Revenue Accounts */\n                if(value.account.type_code === AccountTypeCode.REVENUE){\n                    g[value.journal.month_of].amount += value.amount * -1; /* Reverse negative amount of Cr */\n                }\n            });\n\n            /* Bind data */\n            this.transactionList = Object.values(g);\n        }\n    },\n    mounted(){\n        this.initialize();\n    }\n}\n</script>"],"sourceRoot":"src/views/customers/insightnpo"}]}
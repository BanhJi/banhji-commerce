{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js??ref--14-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/kendo_editor/PurchaseDiscountItem.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/kendo_editor/PurchaseDiscountItem.js","mtime":1638499442996},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQga2VuZG8gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwoKdmFyIGFwaVVybCA9IHJlcXVpcmUoJ0AvYXBpVXJsLmpzJyk7CgpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKGNvbnRhaW5lciwgb3B0aW9ucykgewogIC8vIERlZmluZCBvcmRlcmluZyBieSBuYW1lCiAgdmFyIGNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHsKICAgIGlmIChhLml0ZW1zWzBdLm5hbWUgPT09IGIuaXRlbXNbMF0ubmFtZSkgewogICAgICByZXR1cm4gMDsKICAgIH0gZWxzZSBpZiAoYS5pdGVtc1swXS5uYW1lID4gYi5pdGVtc1swXS5uYW1lKSB7CiAgICAgIHJldHVybiAxOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIC0xOwogICAgfQogIH07IC8vIERlZmluZCBkZWZhdWx0IGdyb3VwCgoKICB2YXIgZ3JvdXAgPSB7CiAgICBmaWVsZDogIm5hdHVyZSIsCiAgICBjb21wYXJlOiBjb21wYXJlCiAgfTsgLy8gVXNlIGxvY2FsIGRhdGEKCiAgdmFyIGRzID0gbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICBkYXRhOiBzdG9yZS5zdGF0ZS5kaXNjb3VudEl0ZW1zLmxpc3QuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICByZXR1cm4gdmFsdWUudHlwZS50b0xvd2VyQ2FzZSgpID09PSAicHVyY2hhc2UiOwogICAgfSksCiAgICBncm91cDogZ3JvdXAKICB9KTsgLy8gRGVmaW5lIGRyb3Bkb3dubGlzdAoKICB2YXIgZGRsID0ga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICBhdXRvV2lkdGg6IHRydWUsCiAgICBoZWlnaHQ6IDQwMCwKICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgZGF0YVRleHRGaWVsZDogIm5hbWUiLAogICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgIGRhdGFTb3VyY2U6IGRzCiAgfSkuZGF0YSgia2VuZG9Ecm9wRG93bkxpc3QiKTsgLy8gVXNlIHJlbW90ZSBkYXRhCgogIGlmICghc3RvcmUuc3RhdGUuZGlzY291bnRJdGVtcy5pc0xvYWRlZCkgewogICAgdmFyIHJlbW90ZURTID0gbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgIHRyYW5zcG9ydDogewogICAgICAgIHJlYWQ6IHsKICAgICAgICAgIHVybDogYXBpVXJsLml0ZW0uZGlzY291bnRfaXRlbV9nZXQKICAgICAgICB9LAogICAgICAgIGRhdGFUeXBlOiAianNvbiIKICAgICAgfSwKICAgICAgc2NoZW1hOiB7CiAgICAgICAgbW9kZWw6IHsKICAgICAgICAgIGlkOiAiaWQiCiAgICAgICAgfSwKICAgICAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKHJlc3BvbnNlKSB7CiAgICAgICAgICAvKiBBZGQgdG8gc3RvcmUgKi8KICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdkaXNjb3VudEl0ZW1zL2FkZExpc3QnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gInB1cmNoYXNlIjsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ3JvdXA6IGdyb3VwCiAgICB9KTsKICAgIGRkbC5zZXREYXRhU291cmNlKHJlbW90ZURTKTsKICB9CgogIHJldHVybiBkZGw7Cn0pOw=="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/kendo_editor/PurchaseDiscountItem.js"],"names":["kendo","store","apiUrl","require","container","options","compare","a","b","items","name","group","field","ds","data","DataSource","state","discountItems","list","filter","value","type","toLowerCase","ddl","jQuery","appendTo","kendoDropDownList","autoWidth","height","dataTextField","dataValueField","optionLabel","dataSource","isLoaded","remoteDS","transport","read","url","item","discount_item_get","dataType","schema","model","id","response","dispatch","setDataSource"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,IAAMC,MAAM,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AAEA,gBAAe,UAACC,SAAD,EAAYC,OAAZ,EAAwB;AACnC;AACA,MAAIC,OAAO,GAAG,SAAVA,OAAU,CAASC,CAAT,EAAYC,CAAZ,EAAe;AACzB,QAAID,CAAC,CAACE,KAAF,CAAQ,CAAR,EAAWC,IAAX,KAAoBF,CAAC,CAACC,KAAF,CAAQ,CAAR,EAAWC,IAAnC,EAAyC;AACrC,aAAO,CAAP;AACH,KAFD,MAEO,IAAIH,CAAC,CAACE,KAAF,CAAQ,CAAR,EAAWC,IAAX,GAAkBF,CAAC,CAACC,KAAF,CAAQ,CAAR,EAAWC,IAAjC,EAAuC;AAC1C,aAAO,CAAP;AACH,KAFM,MAEA;AACH,aAAO,CAAC,CAAR;AACH;AACJ,GARD,CAFmC,CAYnC;;;AACA,MAAIC,KAAK,GAAG;AACRC,IAAAA,KAAK,EAAE,QADC;AAERN,IAAAA,OAAO,EAAEA;AAFD,GAAZ,CAbmC,CAkBnC;;AACA,MAAIO,EAAE,GAAG,IAAIb,KAAK,CAACc,IAAN,CAAWC,UAAf,CAA0B;AAC/BD,IAAAA,IAAI,EAAEb,KAAK,CAACe,KAAN,CAAYC,aAAZ,CAA0BC,IAA1B,CAA+BC,MAA/B,CAAsC,UAAAC,KAAK;AAAA,aAAIA,KAAK,CAACC,IAAN,CAAWC,WAAX,OAA6B,UAAjC;AAAA,KAA3C,CADyB;AAE/BX,IAAAA,KAAK,EAAEA;AAFwB,GAA1B,CAAT,CAnBmC,CAwBnC;;AACA,MAAIY,GAAG,GAAGvB,KAAK,CAACwB,MAAN,CAAa,kBAAkBnB,OAAO,CAACO,KAA1B,GAAkC,KAA/C,EACLa,QADK,CACIrB,SADJ,EAELsB,iBAFK,CAEa;AACfC,IAAAA,SAAS,EAAE,IADI;AAEfC,IAAAA,MAAM,EAAE,GAFO;AAGfT,IAAAA,MAAM,EAAE,YAHO;AAIfU,IAAAA,aAAa,EAAE,MAJA;AAKfC,IAAAA,cAAc,EAAE,IALD;AAMfC,IAAAA,WAAW,EAAE,gBANE;AAOfC,IAAAA,UAAU,EAAEnB;AAPG,GAFb,EAUHC,IAVG,CAUE,mBAVF,CAAV,CAzBmC,CAqCnC;;AACA,MAAG,CAACb,KAAK,CAACe,KAAN,CAAYC,aAAZ,CAA0BgB,QAA9B,EAAuC;AACnC,QAAIC,QAAQ,GAAG,IAAIlC,KAAK,CAACc,IAAN,CAAWC,UAAf,CAA0B;AACrCoB,MAAAA,SAAS,EAAE;AACPC,QAAAA,IAAI,EAAE;AACFC,UAAAA,GAAG,EAAEnC,MAAM,CAACoC,IAAP,CAAYC;AADf,SADC;AAIPC,QAAAA,QAAQ,EAAE;AAJH,OAD0B;AAOrCC,MAAAA,MAAM,EAAE;AACJC,QAAAA,KAAK,EAAE;AACHC,UAAAA,EAAE,EAAE;AADD,SADH;AAIJ7B,QAAAA,IAAI,EAAE,cAAC8B,QAAD,EAAc;AAChB;AACA3C,UAAAA,KAAK,CAAC4C,QAAN,CAAe,uBAAf,EAAwCD,QAAQ,CAAC9B,IAAjD;AAEA,iBAAO8B,QAAQ,CAAC9B,IAAT,CAAcK,MAAd,CAAqB,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACC,IAAN,CAAWC,WAAX,OAA6B,UAAjC;AAAA,WAA1B,CAAP;AACH;AATG,OAP6B;AAkBrCX,MAAAA,KAAK,EAAEA;AAlB8B,KAA1B,CAAf;AAqBAY,IAAAA,GAAG,CAACuB,aAAJ,CAAkBZ,QAAlB;AACH;;AAED,SAAOX,GAAP;AACH,CAhED","sourcesContent":["import kendo from '@progress/kendo-ui';\nimport store from '@/store';\n\nconst apiUrl = require('@/apiUrl.js');\n\nexport default (container, options) => {\n    // Defind ordering by name\n    let compare = function(a, b) {\n        if (a.items[0].name === b.items[0].name) {\n            return 0;\n        } else if (a.items[0].name > b.items[0].name) {\n            return 1;\n        } else {\n            return -1;\n        }\n    };\n\n    // Defind default group\n    let group = { \n        field: \"nature\",\n        compare: compare\n    };\n\n    // Use local data\n    let ds = new kendo.data.DataSource({\n        data: store.state.discountItems.list.filter(value => value.type.toLowerCase() === \"purchase\"),\n        group: group,\n    })\n\n    // Define dropdownlist\n    let ddl = kendo.jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n            autoWidth: true,\n            height: 400,\n            filter: \"startswith\",\n            dataTextField: \"name\",\n            dataValueField: \"id\",\n            optionLabel: \"--- Select ---\",\n            dataSource: ds\n        }).data(\"kendoDropDownList\");\n\n    // Use remote data\n    if(!store.state.discountItems.isLoaded){\n        let remoteDS = new kendo.data.DataSource({\n            transport: {\n                read: {\n                    url: apiUrl.item.discount_item_get,\n                },\n                dataType: \"json\",\n            },\n            schema: {\n                model: {\n                    id: \"id\"\n                },\n                data: (response) => {\n                    /* Add to store */\n                    store.dispatch('discountItems/addList', response.data);\n                    \n                    return response.data.filter(value => value.type.toLowerCase() === \"purchase\");\n                },\n            },\n            group: group\n        })\n\n        ddl.setDataSource(remoteDS);\n    }\n            \n    return ddl;\n}"]}]}
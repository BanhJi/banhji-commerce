{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js??ref--13-0!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/helper.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/helper.js","mtime":1641438291814},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWNvbW1lcmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnBhZC1zdGFydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBlYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgeyBpMThuIH0gZnJvbSAnQC9pMThuJzsKaW1wb3J0IGtlbmRvIGZyb20gJ0Bwcm9ncmVzcy9rZW5kby11aSc7CmltcG9ydCBYTFNYIGZyb20gInhsc3giOwppbXBvcnQgTGlua1RlbXBsYXRlIGZyb20gIkAvY29tcG9uZW50cy9rZW5kb190ZW1wbGF0ZXMvTGlua1RlbXBsYXRlIjsKaW1wb3J0IHsgQ2xvc2luZ0RhdGVNb2RlbCwgRXhjaGFuZ2VSYXRlTW9kZWwsIEJhbmtBY2NvdW50VHlwZU1vZGVsLCBVc2VyTW9kZWwsIENsYXNzTW9kZWwgfSBmcm9tICdAL3NjcmlwdHMvbW9kZWwvQXBwTW9kZWxzJzsKLyogU3RvcmUgKi8KCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKdmFyIGluc3RpdHV0ZSA9IHN0b3JlLnN0YXRlLmluc3RpdHV0ZS5pbnN0aXR1dGU7Ci8qIENvb2tpZSAqLwoKdmFyIGNvb2tpZUpTID0gcmVxdWlyZSgiQC9jb29raWUuanMiKTsKCnZhciBjb29raWUgPSBjb29raWVKUy5nZXRDb29raWUoKTsKCnZhciBTd2FsID0gcmVxdWlyZSgnc3dlZXRhbGVydDInKTsKCnZhciBDcnlwdG9KUyA9IHJlcXVpcmUoImNyeXB0by1qcyIpOwoKdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgiQC9zY3JpcHRzL0FwcEhhbmRsZXJzIiksCiAgICBjbG9zaW5nRGF0ZUhhbmRsZXIgPSBfcmVxdWlyZS5jbG9zaW5nRGF0ZUhhbmRsZXIsCiAgICBwcmVmaXhIYW5kbGVyID0gX3JlcXVpcmUucHJlZml4SGFuZGxlciwKICAgIGN1cnJlbmN5SGFuZGxlciA9IF9yZXF1aXJlLmN1cnJlbmN5SGFuZGxlcjsKCnZhciBfcmVxdWlyZTIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9Db2xsZWN0aW9ucyIpLAogICAgQWNjb3VudFR5cGVDb2RlID0gX3JlcXVpcmUyLkFjY291bnRUeXBlQ29kZTsKCnZhciBleHBvcnRzID0ge307Ci8qIEdldCBVc2VyICovCgpleHBvcnRzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIG5ldyBVc2VyTW9kZWwoY29va2llLnVzZXIpOwp9OyAvLyBSZW1vdmUgQ3VycmVuY3kgRm9ybWF0IEZyb20gQSBOdW1iZXIKCgpleHBvcnRzLnJlbW92ZUN1cnJlbmN5Rm9ybWF0ID0gZnVuY3Rpb24gKG51bSkgewogIHJldHVybiBudW0ucmVwbGFjZSgvW15cZC4tXSsvZywgIiIpOwp9OyAvLyBMaW5rIFRlbXBsYXRlCgoKZXhwb3J0cy5saW5rVGVtcGxhdGUgPSBmdW5jdGlvbiAoZGlzcGxheVRleHQsIHVybFBhdGgpIHsKICByZXR1cm4gewogICAgdGVtcGxhdGU6IExpbmtUZW1wbGF0ZSwKICAgIHRlbXBsYXRlQXJnczogewogICAgICB0ZXh0OiBkaXNwbGF5VGV4dCwKICAgICAgdXJsOiB1cmxQYXRoCiAgICB9CiAgfTsKfTsgLy8gR2V0IEdlbmVyYXRlIEFjY291bnRpbmcgTnVtYmVyCgoKZXhwb3J0cy5nZW5lcmF0ZUFjY291bnRpbmdOdW1iZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHByZWZpeFR5cGUsIHRyYW5zYWN0aW9uRGF0ZSkgewogICAgdmFyIHByZWZpeGVzLCBwZiwgc3RydWN0dXJlLCB0eG5EYXRlLCBzaG9ydFByZWZpeCwgZnVsbFByZWZpeCwgbGFzdE51bWJlclJlc3BvbnNlLCBsYXN0TnVtYmVycywgbGFzdE51bWJlciwgbnVtYmVyOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdwcmVmaXhlcy9nZXRMaXN0Jyk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBwcmVmaXhlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHBmID0gcHJlZml4ZXMuZmluZChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUudHlwZS50b0xvd2VyQ2FzZSgpID09PSBwcmVmaXhUeXBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIH0pOyAvLyBTdHJ1Y3R1cmUKCiAgICAgICAgICAgIHN0cnVjdHVyZSA9ICcnLCB0eG5EYXRlID0gbmV3IERhdGUodHJhbnNhY3Rpb25EYXRlKTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBwZi5zdHJ1Y3R1cmUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IF9jb250ZXh0LnQwID09PSAneXl5eScgPyA4IDogX2NvbnRleHQudDAgPT09ICd5eScgPyAxMCA6IF9jb250ZXh0LnQwID09PSAneXl5eW1tJyA/IDEyIDogX2NvbnRleHQudDAgPT09ICd5eW1tJyA/IDE0IDogMTY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgc3RydWN0dXJlID0gdHhuRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMTcpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHN0cnVjdHVyZSA9IHR4bkRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLnN1YnN0cigyKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxNyk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgc3RydWN0dXJlID0gdHhuRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAodHhuRGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDE3KTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBzdHJ1Y3R1cmUgPSB0eG5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zdWJzdHIoMikgKyAodHhuRGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDE3KTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDE3KTsKCiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAvLyBQcmVmaXggRm9ybWF0ICJKRS15eW1tLTAwMDAwIgogICAgICAgICAgICBzaG9ydFByZWZpeCA9IHBmLmFiYnIgKyBwZi5wcmVmaXhTZXBhcmF0b3IgKyBzdHJ1Y3R1cmUgKyBwZi5udW1iZXJTZXBhcmF0b3IsIGZ1bGxQcmVmaXggPSBwZi5hYmJyICsgcGYucHJlZml4U2VwYXJhdG9yICsgcGYuc3RydWN0dXJlICsgcGYubnVtYmVyU2VwYXJhdG9yICsgJzAnLnJlcGVhdChwZi5mb3JtYXQpICsgIkAiLmNvbmNhdChwZi5zZXF1Y2VuY2luZyk7IC8vIENhbGwgTGFzdCBOdW1iZXIKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgcmV0dXJuIHByZWZpeEhhbmRsZXIubGFzdE51bWJlcih7CiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBwcmVmaXg6IGZ1bGxQcmVmaXgsCiAgICAgICAgICAgICAgICBzaG9ydGVuX3ByZWZpeDogc2hvcnRQcmVmaXgsCiAgICAgICAgICAgICAgICBqb3VybmFsX2RhdGU6IHRyYW5zYWN0aW9uRGF0ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgbGFzdE51bWJlclJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgbGFzdE51bWJlcnMgPSBsYXN0TnVtYmVyUmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgLyogU3RhcnRpbmcgTnVtYmVyICovCgogICAgICAgICAgICBsYXN0TnVtYmVyID0gcGYubnVtYmVyOwogICAgICAgICAgICAvKiBTZXF1Y2VuY2luZyAqLwoKICAgICAgICAgICAgX2NvbnRleHQudDEgPSBwZi5zZXF1Y2VuY2luZy50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gX2NvbnRleHQudDEgPT09ICdtb250aCcgPyAyNiA6IF9jb250ZXh0LnQxID09PSAneWVhcicgPyAyOCA6IDMwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAvLyBNb250aAogICAgICAgICAgICBpZiAoa2VuZG8ucGFyc2VJbnQobGFzdE51bWJlcnMubW9udGhseV9sYXN0X251bWJlcikgIT09IDApIHsKICAgICAgICAgICAgICBsYXN0TnVtYmVyID0ga2VuZG8ucGFyc2VJbnQobGFzdE51bWJlcnMubW9udGhseV9sYXN0X251bWJlcikgKyAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDMyKTsKCiAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAvLyBZZWFyCiAgICAgICAgICAgIGlmIChrZW5kby5wYXJzZUludChsYXN0TnVtYmVycy55ZWFybHlfbGFzdF9udW1iZXIpICE9PSAwKSB7CiAgICAgICAgICAgICAgbGFzdE51bWJlciA9IGtlbmRvLnBhcnNlSW50KGxhc3ROdW1iZXJzLnllYXJseV9sYXN0X251bWJlcikgKyAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDMyKTsKCiAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAvLyBQcmVmaXgKICAgICAgICAgICAgaWYgKGtlbmRvLnBhcnNlSW50KGxhc3ROdW1iZXJzLmxhc3RfbnVtYmVyKSAhPT0gMCkgewogICAgICAgICAgICAgIGxhc3ROdW1iZXIgPSBrZW5kby5wYXJzZUludChsYXN0TnVtYmVycy5sYXN0X251bWJlcikgKyAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDMyKTsKCiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAvKiBGdWxsIE51bWJlciAqLwogICAgICAgICAgICBudW1iZXIgPSBwZi5hYmJyICsgcGYucHJlZml4U2VwYXJhdG9yICsgc3RydWN0dXJlICsgcGYubnVtYmVyU2VwYXJhdG9yICsgbGFzdE51bWJlci50b1N0cmluZygpLnBhZFN0YXJ0KHBmLmZvcm1hdCwgJzAnKTsKICAgICAgICAgICAgLyogUmVzdWx0ICovCgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgbnVtYmVyOiBudW1iZXIsCiAgICAgICAgICAgICAgbGFzdF9udW1iZXI6IGxhc3ROdW1iZXIsCiAgICAgICAgICAgICAgcHJlZml4X2Zvcm1hdDogZnVsbFByZWZpeCwKICAgICAgICAgICAgICBwcmVmaXg6IHBmCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBHZXQgTGFzdCBFeGNoYW5nZSBSYXRlIEJ5IERhdGUKCgpleHBvcnRzLmdldExhc3RFeGNoYW5nZVJhdGVCeURhdGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZGF0ZSwgY29kZSkgewogICAgdmFyIHhyYXRlLCByZXNwb25zZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHhyYXRlID0gbmV3IEV4Y2hhbmdlUmF0ZU1vZGVsKGluc3RpdHV0ZS5iYXNlQ3VycmVuY3kpOwoKICAgICAgICAgICAgaWYgKCEoY29kZSAhPT0gaW5zdGl0dXRlLmJhc2VDdXJyZW5jeS5jb2RlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gY3VycmVuY3lIYW5kbGVyLmdldExhc3RFeGNoYW5nZVJhdGVCeURhdGUoZGF0ZSwgY29kZSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YSkgewogICAgICAgICAgICAgIHhyYXRlID0gbmV3IEV4Y2hhbmdlUmF0ZU1vZGVsKHJlc3BvbnNlLmRhdGEuZGF0YVswXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB4cmF0ZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94MywgX3g0KSB7CiAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIENvbnZlcnQgRGF0ZSB0byBJU08KCgpleHBvcnRzLnRvSVNPRGF0ZSA9IGZ1bmN0aW9uIChhRGF0ZSkgewogIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgdmFyIHRoZURhdGUgPSBuZXcgRGF0ZShhRGF0ZSk7CiAgdGhlRGF0ZS5zZXRIb3Vycyh0b2RheS5nZXRIb3VycygpLCB0b2RheS5nZXRNaW51dGVzKCksIHRvZGF5LmdldFNlY29uZHMoKSwgdG9kYXkuZ2V0TWlsbGlzZWNvbmRzKCkpOwogIHJldHVybiBuZXcgRGF0ZSh0aGVEYXRlLmdldFRpbWUoKSkudG9JU09TdHJpbmcoKTsKfTsgLy8gRGF0ZSBGb3JtYXQKCgpleHBvcnRzLmRhdGVGb3JtYXQgPSBmdW5jdGlvbiAodGhlRGF0ZSkgewogIHZhciBmb3JtYXRlZERhdGUgPSB0aGVEYXRlOwoKICBpZiAoZm9ybWF0ZWREYXRlICE9PSAnJykgewogICAgZm9ybWF0ZWREYXRlID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhlRGF0ZSksIGluc3RpdHV0ZS5kYXRlRm9ybWF0KTsKICB9CgogIHJldHVybiBmb3JtYXRlZERhdGU7Cn07IC8vIERhdGUgRm9ybWF0IGZvcm0KCgpleHBvcnRzLmluc3RpdHV0ZURhdGVGb3JtYXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGluc3RpdHV0ZS5kYXRlRm9ybWF0Owp9OyAvLyBBbGVydCBFcnJvciBNZXNzYWdlCgoKZXhwb3J0cy5hbGVydEVycm9yTXNnID0gZnVuY3Rpb24gKCkgewogIHZhciBtc2cgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogIFN3YWwuZmlyZSh7CiAgICBwb3NpdGlvbjogImNlbnRlciIsCiAgICBpY29uOiAid2FybmluZyIsCiAgICB0aXRsZTogIk9vcHMuLi4hIiwKICAgIHRleHQ6IG1zZywKICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlCiAgfSk7Cn07IC8vIFByZS1Db25maXJtIENsb3NpbmcgRGF0ZQoKCmZ1bmN0aW9uIHByZUNvbmZpcm1DbG9zaW5nRGF0ZShfeDUpIHsKICByZXR1cm4gX3ByZUNvbmZpcm1DbG9zaW5nRGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8vIFNob3cgQWxlcnQKCgpmdW5jdGlvbiBfcHJlQ29uZmlybUNsb3NpbmdEYXRlKCkgewogIF9wcmVDb25maXJtQ2xvc2luZ0RhdGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHR4bkRhdGUpIHsKICAgIHZhciByZXN1bHQsIGNkYXRlLCBjZCwgY29uZmlybVBzdzsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjbG9zaW5nRGF0ZUhhbmRsZXIubGFzdCgpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2RhdGUgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgIGlmICghKHR5cGVvZiBjZGF0ZS5kYXRhLmRhdGEgIT0gInVuZGVmaW5lZCIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2QgPSBuZXcgQ2xvc2luZ0RhdGVNb2RlbChjZGF0ZS5kYXRhLmRhdGEpOwoKICAgICAgICAgICAgaWYgKCEodHhuRGF0ZSA8PSBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShjZC5jbG9zaW5nRGF0ZSksICJ5eXl5LU1NLWRkIikpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA5OwogICAgICAgICAgICByZXR1cm4gU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlBsZWFzZSBFbnRlciBQYXNzd29yZCEiLAogICAgICAgICAgICAgIHRleHQ6ICJZb3UgYXJlIHJlY29yZGluZyB3aXRoaW4gY2xvc2luZyBkYXRlLCBwbGVhc2UgY29uZmlybSBwYXNzd29yZC4iLAogICAgICAgICAgICAgIGljb246ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICBpbnB1dDogInBhc3N3b3JkIiwKICAgICAgICAgICAgICBpbnB1dFBsYWNlaG9sZGVyOiAiUGFzc3dvcmQuLi4iLAogICAgICAgICAgICAgIGlucHV0QXR0cmlidXRlczogewogICAgICAgICAgICAgICAgYXV0b2NhcGl0YWxpemU6ICJvZmYiLAogICAgICAgICAgICAgICAgYXV0b2NvcnJlY3Q6ICJvZmYiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiU3VibWl0IiwKICAgICAgICAgICAgICBzaG93TG9hZGVyT25Db25maXJtOiB0cnVlLAogICAgICAgICAgICAgIHByZUNvbmZpcm06IGZ1bmN0aW9uIHByZUNvbmZpcm0ocGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgIC8vIERlY3J5cHQgKFBhc3N3b3JkLCBLZXkpCiAgICAgICAgICAgICAgICB2YXIgcHN3SW5CeXRlcyA9IENyeXB0b0pTLkFFUy5kZWNyeXB0KGNkLnBhc3N3b3JkLCBjb29raWUuaW5zdGl0dXRlSWQpOwogICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsUHN3ID0gcHN3SW5CeXRlcy50b1N0cmluZyhDcnlwdG9KUy5lbmMuVXRmOCk7IC8vIENvbXBhcmUgUGFzc3dvcmQKCiAgICAgICAgICAgICAgICAvLyBDb21wYXJlIFBhc3N3b3JkCiAgICAgICAgICAgICAgICBpZiAocGFzc3dvcmQgPT09IG9yaWdpbmFsUHN3KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgU3dhbC5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoIlBhc3N3b3JkIERvZXMgTm90IE1hY3RoISIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjb25maXJtUHN3ID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgIHJlc3VsdCA9IEJvb2xlYW4oY29uZmlybVBzdy52YWx1ZSk7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7IC8vIEdyZWF0ZXIgdGhhbiBjbG9zaW5nIGRhdGUKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByZXN1bHQgPSB0cnVlOyAvLyBOb3QgdXNlIGNsb3NpbmcgZGF0ZQoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU2KTsKICB9KSk7CiAgcmV0dXJuIF9wcmVDb25maXJtQ2xvc2luZ0RhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gc2hvd0FsZXJ0KG1zZykgewogIFN3YWwuZmlyZSh7CiAgICBwb3NpdGlvbjogImNlbnRlciIsCiAgICBpY29uOiAid2FybmluZyIsCiAgICB0aXRsZTogIk9vcHMuLi4hIiwKICAgIHRleHQ6IG1zZywKICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlCiAgfSk7Cn0gLy8gR2V0IEZpc2NhbCBEYXRlIEJ5IERhdGUgKE9iamVjdCkKCgpleHBvcnRzLmdldEZpc2NhbERhdGVCeURhdGUgPSBmdW5jdGlvbiAodGhlRGF0ZSkgewogIHZhciBpc1ByZXZpb3VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICB2YXIgYURhdGUgPSBuZXcgRGF0ZSh0aGVEYXRlKTsKICB2YXIgZmlzY2FsWWVhciA9IGluc3RpdHV0ZS5maXNjYWxEYXRlLmZpbmQoZnVuY3Rpb24gKGkpIHsKICAgIHJldHVybiBhRGF0ZSA+PSBuZXcgRGF0ZShpLnN0YXJ0X2RhdGUpICYmIGFEYXRlIDw9IG5ldyBEYXRlKGkuZW5kX2RhdGUpOwogIH0pOwoKICBpZiAoaXNQcmV2aW91cykgewogICAgdmFyIGN1cnJlbnRJbmRleCA9IGluc3RpdHV0ZS5maXNjYWxEYXRlLmluZGV4T2YoZmlzY2FsWWVhcik7CiAgICBmaXNjYWxZZWFyID0gaW5zdGl0dXRlLmZpc2NhbERhdGVbY3VycmVudEluZGV4IC0gMV07CiAgfQoKICByZXR1cm4gZmlzY2FsWWVhcjsKfTsgLy8gR2VuZXJhdGUgRmlzY2FsIE1vbnRocwoKCmV4cG9ydHMuZ2VuZXJhdGVGaXNjYWxNb250aHMgPSBmdW5jdGlvbiAoc3RhcnREYXRlLCBlbmREYXRlLCBjb2x1bW5CeSkgewogIHZhciBkYXRlRm9ybWF0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAiTU1NIHl5eXkiOwogIHZhciBmaXNjYWxNb250aHMgPSBbXSwKICAgICAgaW50ZXJ2YWwgPSAxLAogICAgICBzZGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSksCiAgICAgIGVkYXRlID0gbmV3IERhdGUoZW5kRGF0ZSksCiAgICAgIHBhaXJNb250aCA9IGVkYXRlOwoKICB3aGlsZSAoc2RhdGUgPD0gZWRhdGUpIHsKICAgIGlmIChjb2x1bW5CeSA9PT0gIjQiKSB7CiAgICAgIC8vIFF1YXJ0ZXIKICAgICAgaW50ZXJ2YWwgPSAzOwogICAgICBwYWlyTW9udGggPSBuZXcgRGF0ZShzZGF0ZSk7CiAgICAgIHBhaXJNb250aC5zZXRNb250aChzZGF0ZS5nZXRNb250aCgpICsgKGludGVydmFsIC0gMSkpOwogICAgICBmaXNjYWxNb250aHMucHVzaChrZW5kby50b1N0cmluZyhzZGF0ZSwgZGF0ZUZvcm1hdCkgKyAiIC0gIiArIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHBhaXJNb250aCksIGRhdGVGb3JtYXQpKTsKICAgIH0gZWxzZSBpZiAoY29sdW1uQnkgPT09ICIyIikgewogICAgICAvLyBTZW1pLUFubnVhbAogICAgICBpbnRlcnZhbCA9IDY7CiAgICAgIHBhaXJNb250aCA9IG5ldyBEYXRlKHNkYXRlKTsKICAgICAgcGFpck1vbnRoLnNldE1vbnRoKHNkYXRlLmdldE1vbnRoKCkgKyAoaW50ZXJ2YWwgLSAxKSk7CiAgICAgIGZpc2NhbE1vbnRocy5wdXNoKGtlbmRvLnRvU3RyaW5nKHNkYXRlLCBkYXRlRm9ybWF0KSArICIgLSAiICsga2VuZG8udG9TdHJpbmcobmV3IERhdGUocGFpck1vbnRoKSwgZGF0ZUZvcm1hdCkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gTW9udGgKICAgICAgaW50ZXJ2YWwgPSAxOwogICAgICBmaXNjYWxNb250aHMucHVzaChrZW5kby50b1N0cmluZyhzZGF0ZSwgZGF0ZUZvcm1hdCkpOwogICAgfSAvLyBOZXh0IE1vbnRoCgoKICAgIHNkYXRlLnNldE1vbnRoKHNkYXRlLmdldE1vbnRoKCkgKyBpbnRlcnZhbCk7CiAgfQoKICByZXR1cm4gZmlzY2FsTW9udGhzOwp9OyAvLyBGb3JtYXQgRmlzY2FsRGF0ZQoKCmV4cG9ydHMuZm9ybWF0RmlzY2FsRGF0ZSA9IGZ1bmN0aW9uIChhRGF0ZSkgewogIHJldHVybiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShhRGF0ZSksICJNTU0geXl5eSIpOwp9LCAvLyBWYWxpZGF0ZSBDbG9zaW5nIERhdGUgKEIgS2V0aHlhIGZvcmNlZCBtZSB0byBkbyBsaWtlIHRoaXMsIGluIGNhc2UgaGUgc2F5cyBObykgYWxzbyBSb3Robnkgam9sIGRhaSBqb2wgamVybmcKZXhwb3J0cy52YWxpZGF0ZUNsb3NpbmdEYXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHR4bkRhdGUpIHsKICAgIHZhciByZXN1bHQsIHRvZGF5LCBjdXJyZW50RmlzY2FsRGF0ZSwgYXBwcm92ZWRSZXBvcnRpbmdEYXRlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2UsIHRvZGF5ID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUoKSwgInl5eXktTU0tZGQiKTsKICAgICAgICAgICAgLyogUGFyc2UgVHJhbnNhY3Rpb24gRGF0ZSAqLwoKICAgICAgICAgICAgdHhuRGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHR4bkRhdGUpLCAieXl5eS1NTS1kZCIpOyAvLyBDaGVjayBpZiBiYWNrIGRhdGUgdHJhbnNhY3Rpb24KCiAgICAgICAgICAgIGlmICghKHR4bkRhdGUgPCB0b2RheSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjdXJyZW50RmlzY2FsRGF0ZSA9IGluc3RpdHV0ZS5maXNjYWxEYXRlLmZpbmQoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5zdGFydF9kYXRlIDw9IHRvZGF5ICYmIGkuZW5kX2RhdGUgPj0gdG9kYXk7CiAgICAgICAgICAgIH0pLCBhcHByb3ZlZFJlcG9ydGluZ0RhdGUgPSBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShpbnN0aXR1dGUuYXBwcm92ZWRSZXBvcnRpbmdEYXRlKSwgInl5eXktTU0tZGQiKTsgLy8gQXBwcm92ZWQgUmVwb3J0aW5nIERhdGUKCiAgICAgICAgICAgIGlmICghKHR4bkRhdGUgPCBjdXJyZW50RmlzY2FsRGF0ZS5zdGFydF9kYXRlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHR4bkRhdGUgPj0gYXBwcm92ZWRSZXBvcnRpbmdEYXRlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIHByZUNvbmZpcm1DbG9zaW5nRGF0ZSh0eG5EYXRlKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAvLyBXaXRoaW4gcHJldmlvdXMgZmlzY2FsIGRhdGUgd2l0aCBleHBpcmVkIGFwcHJvdmVkIHJlcG9ydGluZyBkYXRlCiAgICAgICAgICAgIHNob3dBbGVydChpMThuLnQoIm1zZ19hbGVydF9hcHByb3ZlZF9yZXBvcnRpbmdfZGF0ZSIpKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgICByZXR1cm4gcHJlQ29uZmlybUNsb3NpbmdEYXRlKHR4bkRhdGUpOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7IC8vIE5vbmUgYmFjayBkYXRlIHRyYW5zYWN0aW9uCgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gR2V0IE1heCBOdW1iZXIgT2YgQWNjb3VudAoKZXhwb3J0cy5nZXRNYXhOdW1iZXJPZkFjY291bnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoYWNjb3VudFR5cGVDb2RlKSB7CiAgICB2YXIgcGFMaXN0LCBudW1iZXIsIHBhcmVudE51bXMsIGJpZ051bTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhY2NvdW50aW5nL2dldEFjY291bnRzJyk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBwYUxpc3QgPSBzdG9yZS5zdGF0ZS5hY2NvdW50aW5nLmFjY291bnRzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuYWNjb3VudF90eXBlLmNvZGUgPT09IGFjY291bnRUeXBlQ29kZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG51bWJlciA9ICIiOwoKICAgICAgICAgICAgaWYgKHBhTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgcGFyZW50TnVtcyA9IFtdOwogICAgICAgICAgICAgIHBhTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgcGFyZW50TnVtcy5wdXNoKGtlbmRvLnBhcnNlSW50KHZhbHVlLm51bWJlcikpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJpZ051bSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHBhcmVudE51bXMpOwogICAgICAgICAgICAgIG51bWJlciA9IGJpZ051bSArIDEwOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbnVtYmVyKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3g3KSB7CiAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIEdldCBCYW5rIEFjY291bnQgVHlwZSBieSB1dWlkCgoKZXhwb3J0cy5nZXRCYW5rQWNjb3VudFR5cGVCeVV1aWQgPSBmdW5jdGlvbiAodXVpZCkgewogIHZhciBiYW5rQWNjb3VudFR5cGUgPSBuZXcgQmFua0FjY291bnRUeXBlTW9kZWwoKTsKCiAgaWYgKHN0b3JlLnN0YXRlLmJhbmtpbmcuYmFua0FjY291bnRUeXBlcy5sZW5ndGggPiAwKSB7CiAgICB2YXIgYmEgPSBzdG9yZS5zdGF0ZS5iYW5raW5nLmJhbmtBY2NvdW50VHlwZXMuZmluZChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlLnV1aWQgPT09IHV1aWQ7CiAgICB9KTsKICAgIGJhbmtBY2NvdW50VHlwZSA9IG5ldyBCYW5rQWNjb3VudFR5cGVNb2RlbChiYSk7CiAgfQoKICByZXR1cm4gYmFua0FjY291bnRUeXBlOwp9OyAvLyBHcm91cCBFeHBlbnNlcyBieSBDYXNoIEFkdmFuY2UgKEFkdmFuY2UgU2V0dGxlbWVudCBQYWdlKQoKCmV4cG9ydHMuZ3JvdXBFeHBlbnNlQnlDYXNoQWR2YW5jZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdmFyIGcgPSB7fTsKICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgaWQgPSB2YWx1ZS5qb3VybmFsLnV1aWQ7CgogICAgaWYgKHZhbHVlLmFjY291bnQubnVtYmVyID09PSBBY2NvdW50VHlwZUNvZGUuQURWQU5DRV9TRVRUTEVNRU5UX0NMRUFSSU5HX0NPREUpIHsKICAgICAgaWYgKGdbaWRdKSB7CiAgICAgICAgZ1tpZF1bJ2Ftb3VudCddICs9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgIGdbaWRdWydleGNoYW5nZWRfYW1vdW50J10gKz0gdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xOwogICAgICB9IGVsc2UgewogICAgICAgIGdbaWRdID0gewogICAgICAgICAgdXVpZDogaWQsCiAgICAgICAgICBuYW1lOiB2YWx1ZS5wcmltYXJ5X2NvbnRhY3QubmFtZSwKICAgICAgICAgIG51bWJlcjogdmFsdWUuam91cm5hbC5udW1iZXIsCiAgICAgICAgICBhbW91bnQ6IHZhbHVlLmFtb3VudCAqIC0xLAogICAgICAgICAgZGVzY3JpcHRpb246IHZhbHVlLmRlc2NyaXB0aW9uLAogICAgICAgICAgZXhjaGFuZ2VkX2Ftb3VudDogdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xLAogICAgICAgICAgY3VycmVuY3k6IHZhbHVlLmN1cnJlbmN5LAogICAgICAgICAgc2VnbWVudF91dWlkOiB2YWx1ZS5zZWdtZW50X3V1aWQKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZyk7Cn07IC8vIEdyb3VwIEV4cGVuc2UgQnkgRW1wbG95ZWUgKFJlaW1idXJzdG1lbnQgUGFnZSkKCgpleHBvcnRzLmdyb3VwRXhwZW5zZUJ5RW1wbG95ZWUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHZhciBnID0gW107CiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgdmFyIGFtdCA9IDAsCiAgICAgICAgeGFtdCA9IDA7CiAgICB2YWx1ZS5leHBlbnNlX2VudHJpZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7CiAgICAgIGlmIChlbGUuYWNjb3VudC5udW1iZXIgPT09IEFjY291bnRUeXBlQ29kZS5BRFZBTkNFX1NFVFRMRU1FTlRfQ0xFQVJJTkdfQ09ERSkgewogICAgICAgIGFtdCArPSBlbGUuYW1vdW50ICogLTE7CiAgICAgICAgeGFtdCArPSBlbGUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xOwogICAgICB9CiAgICB9KTsKICAgIGcucHVzaCh7CiAgICAgIHV1aWQ6IHZhbHVlLnV1aWQsCiAgICAgIG5hbWU6IHZhbHVlLnN1cHBsaWVyLm5hbWUsCiAgICAgIG51bWJlcjogdmFsdWUubnVtYmVyLAogICAgICBhbW91bnQ6IGFtdCwKICAgICAgZXhjaGFuZ2VkX2Ftb3VudDogeGFtdCwKICAgICAgY3VycmVuY3k6IHZhbHVlLmJpbGxfY3VycmVuY3kKICAgIH0pOwogIH0pOwogIHJldHVybiBnOwp9OyAvLyBBY2NvdW50IEVkaXRvcgoKCmV4cG9ydHMuYWNjb3VudEVkaXRvciA9IGZ1bmN0aW9uIChjb250YWluZXIsIG9wdGlvbnMsIGRhdGEpIHsKICB2YXIgYWNjX2xhbmd1YWdlID0gc3RvcmUuc3RhdGUuYWNjb3VudGluZy5hY2NvdW50TGFuZ3VhZ2UgPT09ICdFbmdsaXNoJyA/ICJhY2NvdW50X3R5cGUubmFtZSIgOiAiYWNjb3VudF90eXBlLmxvY2FsX25hbWUiOwogIHZhciBhY2NfdGVtcGxhdGUgPSBzdG9yZS5zdGF0ZS5hY2NvdW50aW5nLmFjY291bnRMYW5ndWFnZSA9PT0gJ0VuZ2xpc2gnID8gIjxzcGFuPiM9bnVtYmVyIyAjPW5hbWUjPC9zcGFuPiIgOiAiPHNwYW4+Iz1udW1iZXIjICM9bG9jYWxfbmFtZSM8L3NwYW4+IjsKICByZXR1cm4ga2VuZG8ualF1ZXJ5KCc8aW5wdXQgcmVxdWlyZWQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICBhdXRvQmluZDogZmFsc2UsCiAgICBhdXRvV2lkdGg6IHRydWUsCiAgICBoZWlnaHQ6IDQwMCwKICAgIGZpbHRlcjogImNvbnRhaW5zIiwKICAgIGZpbHRlcmluZzogZnVuY3Rpb24gZmlsdGVyaW5nKGUpIHsKICAgICAgdmFyIGZpbHRlciA9IGUuZmlsdGVyOwogICAgICB2YXIgbmV3RmlsdGVyID0gewogICAgICAgIGxvZ2ljOiAib3IiLAogICAgICAgIGZpbHRlcnM6IFt7CiAgICAgICAgICBmaWVsZDogIm51bWJlciIsCiAgICAgICAgICBvcGVyYXRvcjogImNvbnRhaW5zIiwKICAgICAgICAgIHZhbHVlOiBmaWx0ZXIudmFsdWUKICAgICAgICB9LCB7CiAgICAgICAgICBmaWVsZDogIm5hbWUiLAogICAgICAgICAgb3BlcmF0b3I6ICJjb250YWlucyIsCiAgICAgICAgICB2YWx1ZTogZmlsdGVyLnZhbHVlCiAgICAgICAgfV0KICAgICAgfTsKICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlcihuZXdGaWx0ZXIpOyAvLyBJbXBvcnRhbnQ6IHN0b3AgZGVmYXVsdCBmaWx0ZXIKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBkYXRhVGV4dEZpZWxkOiAibnVtYmVyIiwKICAgIGRhdGFWYWx1ZUZpZWxkOiAidXVpZCIsCiAgICB0ZW1wbGF0ZTogYWNjX3RlbXBsYXRlLAogICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgZGF0YTogZGF0YSwKICAgICAgZ3JvdXA6IHsKICAgICAgICBmaWVsZDogYWNjX2xhbmd1YWdlLAogICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikgewogICAgICAgICAgLy8gT3JkZXIgYnkgbnVtYmVyCiAgICAgICAgICBpZiAoYS5pdGVtc1swXS5udW1iZXIgPT09IGIuaXRlbXNbMF0ubnVtYmVyKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfSBlbHNlIGlmIChhLml0ZW1zWzBdLm51bWJlciA+IGIuaXRlbXNbMF0ubnVtYmVyKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSkKICB9KTsKfTsgLy8gUmVhZCBFeGNlbCBGaWxlCgoKZXhwb3J0cy5nZXRFeGNlbERhdGEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmF3RmlsZSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgLyogSW5pdGlhbCBGaWxlIFJlYWRlciAqLwogICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIC8qIFBhcnNlIGRhdGEgKi8KICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgdmFyIHdvcmtib29rID0gWExTWC5yZWFkKGRhdGEsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2FycmF5JwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvKiBHZXQgZmlyc3Qgd29ya3NoZWV0ICovCgogICAgICAgICAgICAgICAgLyogR2V0IGZpcnN0IHdvcmtzaGVldCAqLwogICAgICAgICAgICAgICAgdmFyIGZpcnN0U2hlZXROYW1lID0gd29ya2Jvb2suU2hlZXROYW1lc1swXTsKICAgICAgICAgICAgICAgIHZhciB3b3Jrc2hlZXQgPSB3b3JrYm9vay5TaGVldHNbZmlyc3RTaGVldE5hbWVdOwogICAgICAgICAgICAgICAgLyogQ29udmVydCBhcnJheSBvZiBhcnJheXMgKi8KCiAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IGFycmF5IG9mIGFycmF5cyAqLwogICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya3NoZWV0LCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcjogMQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdHMpOwogICAgICAgICAgICAgIH07IC8vIFJlYWQgRmlsZQoKCiAgICAgICAgICAgICAgLy8gUmVhZCBGaWxlCiAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHJhd0ZpbGUpOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94OCkgewogICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBUcmFuc2FsYXRlIHRvIGxvY2FsIGxhbmd1YWdlCgoKZXhwb3J0cy5sb2NhbFRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChsYW5nKSB7CiAgdmFyIHdvcmQgPSBsYW5nOwoKICBpZiAobGFuZy50b0xvd2VyQ2FzZSgpID09PSAiYXNzZXQiKSB7CiAgICB3b3JkID0gIuGekeGfkuGemuGeluGfkuGemeGen+GegOGemOGfkuGemCI7CiAgfSBlbHNlIGlmIChsYW5nLnRvTG93ZXJDYXNlKCkgPT09ICJjdXJyZW50IGFzc2V0IikgewogICAgd29yZCA9ICLhnpHhn5Lhnprhnpbhn5Lhnpnhnp/hnoDhnpjhn5Lhnpjhnprhnpnhn4jhnpbhn4HhnpvhnoHhn5LhnpvhnrgiOwogIH0gZWxzZSBpZiAobGFuZy50b0xvd2VyQ2FzZSgpID09PSAibm9uLWN1cnJlbnQgYXNzZXQiKSB7CiAgICB3b3JkID0gIuGekeGfkuGemuGeluGfkuGemeGen+GegOGemOGfkuGemOGemuGemeGfiOGeluGfgeGem+GenOGfguGehCI7CiAgfSBlbHNlIGlmIChsYW5nLnRvTG93ZXJDYXNlKCkgPT09ICJsaWFiaWxpdGllcyIpIHsKICAgIHdvcmQgPSAi4Z6U4Z+G4Z6O4Z674Z6bIjsKICB9IGVsc2UgaWYgKGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gImN1cnJlbnQgbGlhYmlsaXRpZXMiKSB7CiAgICB3b3JkID0gIuGelOGfhuGejuGeu+Gem+GemuGemeGfiOGeluGfgeGem+GegeGfkuGem+GeuCI7CiAgfSBlbHNlIGlmIChsYW5nLnRvTG93ZXJDYXNlKCkgPT09ICJub24tY3VycmVudCBsaWFiaWxpdGllcyIpIHsKICAgIHdvcmQgPSAi4Z6U4Z+G4Z6O4Z674Z6b4Z6a4Z6Z4Z+I4Z6W4Z+B4Z6b4Z6c4Z+C4Z6EIjsKICB9IGVsc2UgaWYgKGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gImVxdWl0eSIpIHsKICAgIHdvcmQgPSAi4Z6K4Z6+4Z6Y4Z6R4Z674Z6TIjsKICB9IGVsc2UgaWYgKGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gInJldGFpbmVkIGVhcm5pbmciKSB7CiAgICB3b3JkID0gIuGelOGfkuGemuGetuGegOGfi+GeheGfhuGejuGfgeGeieGemuGegOGfkuGen+GetuGekeGeu+GegCI7CiAgfQoKICByZXR1cm4gd29yZDsKfTsKLyogUmVmb3JtIGRhdGEgdG8gSGllcmFyY2hpY2FsRGF0YVNvdXJjZSAqLwoKCmV4cG9ydHMucmVmb3JtRGF0YVRvSGllcmFyY2hpY2FsRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChkYXRhSXRlbXMpIHsKICB2YXIgZyA9IHt9OwogIC8qIFBhcmVudCBMZXZlbHMgKi8KCiAgZGF0YUl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgY2xhenogPSBuZXcgQ2xhc3NNb2RlbCh2YWx1ZSk7CiAgICAvKiBOYXR1cmUgKi8KCiAgICBpZiAoY2xhenouY2xhenouaWQgIT09ICIiKSB7CiAgICAgIGdbY2xhenouY2xhenouaWRdID0gewogICAgICAgIGlkOiBjbGF6ei5jbGF6ei5pZCwKICAgICAgICBwYXJlbnRJZDogbnVsbCwKICAgICAgICBjb2RlOiBjbGF6ei5jbGF6ei5jb2RlLAogICAgICAgIG5hbWU6IGNsYXp6LmNsYXp6Lm5hbWUsCiAgICAgICAgaXRlbXM6IFtdLAogICAgICAgIGhhc0NoaWxkcmVuOiB0cnVlCiAgICAgIH07CiAgICB9CiAgICAvKiBUeXBlICovCgoKICAgIGlmIChjbGF6ei5jbGFzc1R5cGUuaWQgIT09ICIiKSB7CiAgICAgIGdbY2xhenouY2xhc3NUeXBlLmlkXSA9IHsKICAgICAgICBpZDogY2xhenouY2xhc3NUeXBlLmlkLAogICAgICAgIHBhcmVudElkOiBjbGF6ei5jbGF6ei5pZCwKICAgICAgICBjb2RlOiBjbGF6ei5jbGFzc1R5cGUuY29kZSwKICAgICAgICBuYW1lOiBjbGF6ei5jbGFzc1R5cGUubmFtZSwKICAgICAgICBpdGVtczogW10sCiAgICAgICAgaGFzQ2hpbGRyZW46IHRydWUKICAgICAgfTsKICAgIH0KICAgIC8qIEdyb3VwICovCgoKICAgIGlmIChjbGF6ei5jbGFzc0dyb3VwLmlkICE9PSAiIikgewogICAgICBnW2NsYXp6LmNsYXNzR3JvdXAuaWRdID0gewogICAgICAgIGlkOiBjbGF6ei5jbGFzc0dyb3VwLmlkLAogICAgICAgIHBhcmVudElkOiBjbGF6ei5jbGFzc1R5cGUuaWQsCiAgICAgICAgY29kZTogY2xhenouY2xhc3NHcm91cC5jb2RlLAogICAgICAgIG5hbWU6IGNsYXp6LmNsYXNzR3JvdXAubmFtZSwKICAgICAgICBpdGVtczogW10sCiAgICAgICAgaGFzQ2hpbGRyZW46IHRydWUKICAgICAgfTsKICAgIH0KICAgIC8qIFN1YiBHcm91cCAqLwoKCiAgICBpZiAoY2xhenouY2xhc3NTdWJHcm91cC5pZCAhPT0gIiIpIHsKICAgICAgZ1tjbGF6ei5jbGFzc1N1Ykdyb3VwLmlkXSA9IHsKICAgICAgICBpZDogY2xhenouY2xhc3NTdWJHcm91cC5pZCwKICAgICAgICBwYXJlbnRJZDogY2xhenouY2xhc3NHcm91cC5pZCwKICAgICAgICBjb2RlOiBjbGF6ei5jbGFzc1N1Ykdyb3VwLmNvZGUsCiAgICAgICAgbmFtZTogY2xhenouY2xhc3NTdWJHcm91cC5uYW1lLAogICAgICAgIGhhc0NoaWxkcmVuOiBmYWxzZQogICAgICB9OwogICAgfQogIH0pOwogIC8qIEFkZCBQYXJlbnRzICovCgogIHZhciBsaXN0ID0gW107CgogIGZvciAodmFyIGtleSBpbiBnKSB7CiAgICBsaXN0LnB1c2goZ1trZXldKTsKICB9CgogIHZhciBtYXAgPSB7fSwKICAgICAgbm9kZSwKICAgICAgcm9vdHMgPSBbXSwKICAgICAgaTsKCiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHsKICAgIG1hcFtsaXN0W2ldLmlkXSA9IGk7IC8vIGluaXRpYWxpemUgdGhlIG1hcAoKICAgIGxpc3RbaV0uaXRlbXMgPSBbXTsgLy8gaW5pdGlhbGl6ZSB0aGUgY2hpbGRyZW4KICB9CgogIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICBub2RlID0gbGlzdFtpXTsKCiAgICBpZiAobm9kZS5wYXJlbnRJZCAhPT0gbnVsbCkgewogICAgICAvLyBpZiB5b3UgaGF2ZSBkYW5nbGluZyBicmFuY2hlcyBjaGVjayB0aGF0IG1hcFtub2RlLnBhcmVudElkXSBleGlzdHMKICAgICAgbGlzdFttYXBbbm9kZS5wYXJlbnRJZF1dLml0ZW1zLnB1c2gobm9kZSk7CiAgICB9IGVsc2UgewogICAgICByb290cy5wdXNoKG5vZGUpOwogICAgfQogIH0KCiAgcmV0dXJuIHJvb3RzOwp9OwoKZXhwb3J0IGRlZmF1bHQgZXhwb3J0czs="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/helper.js"],"names":["i18n","kendo","XLSX","LinkTemplate","ClosingDateModel","ExchangeRateModel","BankAccountTypeModel","UserModel","ClassModel","store","institute","state","cookieJS","require","cookie","getCookie","Swal","CryptoJS","closingDateHandler","prefixHandler","currencyHandler","AccountTypeCode","exports","getUser","user","removeCurrencyFormat","num","replace","linkTemplate","displayText","urlPath","template","templateArgs","text","url","generateAccountingNumber","prefixType","transactionDate","dispatch","prefixes","pf","find","value","type","toLowerCase","structure","txnDate","Date","getFullYear","toString","substr","getMonth","padStart","shortPrefix","abbr","prefixSeparator","numberSeparator","fullPrefix","repeat","format","sequcencing","lastNumber","params","prefix","shorten_prefix","journal_date","lastNumberResponse","lastNumbers","data","number","parseInt","monthly_last_number","yearly_last_number","last_number","prefix_format","getLastExchangeRateByDate","date","code","xrate","baseCurrency","response","toISODate","aDate","today","theDate","setHours","getHours","getMinutes","getSeconds","getMilliseconds","getTime","toISOString","dateFormat","formatedDate","instituteDateFormat","alertErrorMsg","msg","fire","position","icon","title","showConfirmButton","preConfirmClosingDate","result","last","cdate","cd","closingDate","input","inputPlaceholder","inputAttributes","autocapitalize","autocorrect","showCancelButton","confirmButtonText","showLoaderOnConfirm","preConfirm","password","pswInBytes","AES","decrypt","instituteId","originalPsw","enc","Utf8","showValidationMessage","confirmPsw","Boolean","showAlert","getFiscalDateByDate","isPrevious","fiscalYear","fiscalDate","i","start_date","end_date","currentIndex","indexOf","generateFiscalMonths","startDate","endDate","columnBy","fiscalMonths","interval","sdate","edate","pairMonth","setMonth","push","formatFiscalDate","validateClosingDate","currentFiscalDate","approvedReportingDate","t","getMaxNumberOfAccount","accountTypeCode","paList","accounting","accounts","filter","account_type","length","parentNums","forEach","bigNum","Math","max","getBankAccountTypeByUuid","uuid","bankAccountType","banking","bankAccountTypes","ba","groupExpenseByCashAdvance","g","id","journal","account","ADVANCE_SETTLEMENT_CLEARING_CODE","amount","exchanged_amount","name","primary_contact","description","currency","segment_uuid","Object","values","groupExpenseByEmployee","amt","xamt","expense_entries","ele","supplier","bill_currency","accountEditor","container","options","acc_language","accountLanguage","acc_template","jQuery","field","appendTo","kendoDropDownList","autoBind","autoWidth","height","filtering","e","newFilter","logic","filters","operator","dataSource","preventDefault","dataTextField","dataValueField","optionLabel","DataSource","group","compare","a","b","items","getExcelData","rawFile","Promise","resolve","reader","FileReader","onload","target","workbook","read","firstSheetName","SheetNames","worksheet","Sheets","results","utils","sheet_to_json","header","readAsArrayBuffer","localTranslate","lang","word","reformDataToHierarchicalDataSource","dataItems","clazz","parentId","hasChildren","classType","classGroup","classSubGroup","list","key","map","node","roots"],"mappings":"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","sourcesContent":["'use strict'\n\nimport {i18n} from '@/i18n';\nimport kendo from '@progress/kendo-ui';\nimport XLSX from \"xlsx\";\nimport LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\nimport {\n    ClosingDateModel,\n    ExchangeRateModel,\n    BankAccountTypeModel,\n    UserModel,\n    ClassModel,\n} from '@/scripts/model/AppModels';\n\n/* Store */\nimport store from '@/store';\nconst institute = store.state.institute.institute;\n\n/* Cookie */\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\n\nconst Swal = require('sweetalert2');\nconst CryptoJS = require(\"crypto-js\");\nconst {\n    closingDateHandler,\n    prefixHandler,\n    currencyHandler,\n} = require(\"@/scripts/AppHandlers\");\nconst {AccountTypeCode} = require(\"@/scripts/default_setup/Collections\");\n\nlet exports = {};\n\n/* Get User */\nexports.getUser = () => {\n    return new UserModel(cookie.user);\n}\n\n// Remove Currency Format From A Number\nexports.removeCurrencyFormat = (num) => {\n    return num.replace(/[^\\d.-]+/g, \"\");\n}\n\n// Link Template\nexports.linkTemplate = (displayText, urlPath) => {\n    return {\n        template: LinkTemplate,\n        templateArgs: {\n            text: displayText,\n            url: urlPath\n        }\n    };\n}\n\n// Get Generate Accounting Number\nexports.generateAccountingNumber = async (prefixType, transactionDate) => {\n    // Call All Prefixes\n    let prefixes = await store.dispatch('prefixes/getList');\n\n    let pf = prefixes.find(value => value.type.toLowerCase() === prefixType.toLowerCase());\n    \n    // Structure\n    let structure = '', txnDate = new Date(transactionDate);\n    switch (pf.structure.toLowerCase()) {\n        case 'yyyy':\n            structure = txnDate.getFullYear().toString();\n            break;\n        case 'yy':\n            structure = txnDate.getFullYear().toString().substr(2);\n            break;\n        case 'yyyymm':\n            structure = txnDate.getFullYear().toString() + (txnDate.getMonth() + 1).toString().padStart(2, '0');\n            break;\n        case 'yymm':\n            structure = txnDate.getFullYear().toString().substr(2) + (txnDate.getMonth() + 1).toString().padStart(2, '0');\n            break;\n\n        default:// None structure\n            break;\n    }\n\n    // Prefix Format \"JE-yymm-00000\"\n    let shortPrefix = pf.abbr + pf.prefixSeparator + structure + pf.numberSeparator,\n        fullPrefix = pf.abbr + pf.prefixSeparator + pf.structure + pf.numberSeparator + '0'.repeat(pf.format) + `@${pf.sequcencing}`;\n\n    // Call Last Number\n    const lastNumberResponse = await prefixHandler.lastNumber({\n        params : {\n            prefix          : fullPrefix,\n            shorten_prefix  : shortPrefix,\n            journal_date    : transactionDate,\n        }\n    });\n    const lastNumbers = lastNumberResponse.data;\n\n    /* Starting Number */\n    let lastNumber = pf.number;\n\n    /* Sequcencing */\n    switch (pf.sequcencing.toLowerCase()) {\n        case 'month':// Month\n            if(kendo.parseInt(lastNumbers.monthly_last_number) !== 0){\n                lastNumber = kendo.parseInt(lastNumbers.monthly_last_number) + 1;\n            }\n\n            break;\n        case 'year':// Year\n            if(kendo.parseInt(lastNumbers.yearly_last_number) !== 0){\n                lastNumber = kendo.parseInt(lastNumbers.yearly_last_number) + 1;\n            }\n\n            break;\n        default:// Prefix\n            if(kendo.parseInt(lastNumbers.last_number) !== 0){\n                lastNumber = kendo.parseInt(lastNumbers.last_number) + 1;\n            }\n            \n            break;\n    }\n\n    /* Full Number */\n    let number = pf.abbr + pf.prefixSeparator + structure + pf.numberSeparator + lastNumber.toString().padStart(pf.format, '0');\n\n    /* Result */\n    return {\n        number: number,\n        last_number: lastNumber,\n        prefix_format: fullPrefix,\n        prefix: pf,\n    }\n}\n\n// Get Last Exchange Rate By Date\nexports.getLastExchangeRateByDate = async (date, code) => {\n    let xrate = new ExchangeRateModel(institute.baseCurrency);\n\n    if (code !== institute.baseCurrency.code) {\n        const response = await currencyHandler.getLastExchangeRateByDate(date, code);\n        if (response.data.data) {\n            xrate = new ExchangeRateModel(response.data.data[0]);\n        }\n    }\n\n    return xrate;\n}\n\n// Convert Date to ISO\nexports.toISODate = (aDate) => {\n    let today = new Date();\n    let theDate = new Date(aDate);\n    theDate.setHours(today.getHours(), today.getMinutes(), today.getSeconds(), today.getMilliseconds());\n\n    return new Date(theDate.getTime()).toISOString();\n}\n\n// Date Format\nexports.dateFormat = (theDate) => {\n    let formatedDate = theDate;\n    if (formatedDate !== '') {\n        formatedDate = kendo.toString(new Date(theDate), institute.dateFormat);\n    }\n\n    return formatedDate;\n}\n// Date Format form\nexports.instituteDateFormat = () => {\n    return institute.dateFormat;\n}\n// Alert Error Message\nexports.alertErrorMsg = (msg = '') => {\n    Swal.fire({\n        position: \"center\",\n        icon: \"warning\",\n        title: \"Oops...!\",\n        text: msg,\n        showConfirmButton: true,\n    });\n}\n\n// Pre-Confirm Closing Date\nasync function preConfirmClosingDate(txnDate) {\n    let result = false,\n        cdate = await closingDateHandler.last();\n\n    if (typeof cdate.data.data != \"undefined\") {\n        let cd = new ClosingDateModel(cdate.data.data);\n\n        if (txnDate <= kendo.toString(new Date(cd.closingDate), \"yyyy-MM-dd\")) {\n            let confirmPsw = await Swal.fire({\n                title: \"Please Enter Password!\",\n                text: \"You are recording within closing date, please confirm password.\",\n                icon: \"warning\",\n                input: \"password\",\n                inputPlaceholder: \"Password...\",\n                inputAttributes: {\n                    autocapitalize: \"off\",\n                    autocorrect: \"off\",\n                },\n                showCancelButton: true,\n                confirmButtonText: \"Submit\",\n                showLoaderOnConfirm: true,\n                preConfirm: (password) => {\n                    // Decrypt (Password, Key)\n                    let pswInBytes = CryptoJS.AES.decrypt(\n                        cd.password,\n                        cookie.instituteId\n                    );\n                    let originalPsw = pswInBytes.toString(\n                        CryptoJS.enc.Utf8\n                    );\n\n                    // Compare Password\n                    if (password === originalPsw) {\n                        return true;\n                    } else {\n                        Swal.showValidationMessage(\n                            \"Password Does Not Macth!\"\n                        );\n                    }\n                },\n            });\n            result = Boolean(confirmPsw.value);\n        } else {\n            result = true; // Greater than closing date\n        }\n    } else {\n        result = true; // Not use closing date\n    }\n\n    return result;\n}\n\n// Show Alert\nfunction showAlert(msg) {\n    Swal.fire({\n        position: \"center\",\n        icon: \"warning\",\n        title: \"Oops...!\",\n        text: msg,\n        showConfirmButton: true,\n    });\n}\n\n// Get Fiscal Date By Date (Object)\nexports.getFiscalDateByDate = (theDate, isPrevious=false) => {\n    let aDate = new Date(theDate);\n\n    let fiscalYear = institute.fiscalDate.find((i) => aDate >= new Date(i.start_date) && aDate <= new Date(i.end_date));\n    if(isPrevious){\n        let currentIndex = institute.fiscalDate.indexOf(fiscalYear);\n\n        fiscalYear = institute.fiscalDate[currentIndex -1];\n    }\n\n    return fiscalYear;\n}\n\n// Generate Fiscal Months\nexports.generateFiscalMonths = (startDate, endDate, columnBy, dateFormat=\"MMM yyyy\") => {\n    let fiscalMonths = [],\n        interval = 1,\n        sdate = new Date(startDate),\n        edate = new Date(endDate),\n        pairMonth = edate;\n\n    while (sdate <= edate) {\n        if (columnBy === \"4\") { // Quarter\n            interval = 3;\n            pairMonth = new Date(sdate);\n            pairMonth.setMonth(sdate.getMonth() + (interval -1));\n            fiscalMonths.push(kendo.toString(sdate, dateFormat) +\" - \"+ kendo.toString(new Date(pairMonth), dateFormat));\n        } else if (columnBy === \"2\") { // Semi-Annual\n            interval = 6;\n            pairMonth = new Date(sdate);\n            pairMonth.setMonth(sdate.getMonth() + (interval -1));\n            fiscalMonths.push(kendo.toString(sdate, dateFormat) +\" - \"+ kendo.toString(new Date(pairMonth), dateFormat));\n        } else { // Month\n            interval = 1;\n            fiscalMonths.push(kendo.toString(sdate, dateFormat));\n        }\n\n        // Next Month\n        sdate.setMonth(sdate.getMonth() + interval);\n    }\n    \n    return fiscalMonths;\n}\n\n// Format FiscalDate\nexports.formatFiscalDate = (aDate) => {\n    return kendo.toString(new Date(aDate), \"MMM yyyy\");\n},\n\n// Validate Closing Date (B Kethya forced me to do like this, in case he says No) also Rothny jol dai jol jerng\nexports.validateClosingDate = async (txnDate) => {\n    let result = false,\n        today = kendo.toString(new Date(), \"yyyy-MM-dd\");\n\n    /* Parse Transaction Date */\n    txnDate = kendo.toString(new Date(txnDate), \"yyyy-MM-dd\");\n\n    // Check if back date transaction\n    if (txnDate < today) {\n        let currentFiscalDate = institute.fiscalDate.find((i) => i.start_date <= today && i.end_date >= today),\n            approvedReportingDate = kendo.toString(new Date(institute.approvedReportingDate), \"yyyy-MM-dd\");\n\n        // Approved Reporting Date\n        if (txnDate < currentFiscalDate.start_date) {// Within previous fiscal date\n            if (txnDate >= approvedReportingDate) {\n                result = await preConfirmClosingDate(txnDate);\n            } else {// Within previous fiscal date with expired approved reporting date\n                showAlert(i18n.t(\"msg_alert_approved_reporting_date\"));\n            }\n        } else {// Within Closing Date\n            result = await preConfirmClosingDate(txnDate);\n        }\n    } else {\n        result = true;// None back date transaction\n    }\n\n    return result;\n}\n\n// Get Max Number Of Account\nexports.getMaxNumberOfAccount = async (accountTypeCode) => {\n    await store.dispatch('accounting/getAccounts');\n\n    let paList = store.state.accounting.accounts.filter(value => value.account_type.code === accountTypeCode);\n\n    let number = \"\";\n    if(paList.length > 0){\n        let parentNums = [];\n        paList.forEach(value => {\n            parentNums.push(kendo.parseInt(value.number));\n        });\n        let bigNum = Math.max(...parentNums);\n        number = bigNum + 10;\n    }\n\n    return number;\n}\n\n// Get Bank Account Type by uuid\nexports.getBankAccountTypeByUuid = (uuid) => {\n    let bankAccountType = new BankAccountTypeModel();\n    if(store.state.banking.bankAccountTypes.length > 0){\n        let ba = store.state.banking.bankAccountTypes.find(value => value.uuid === uuid);\n        bankAccountType = new BankAccountTypeModel(ba);\n    }\n\n    return bankAccountType;\n}\n\n// Group Expenses by Cash Advance (Advance Settlement Page)\nexports.groupExpenseByCashAdvance = (data) => {\n    let g = {};\n\n    data.forEach(value => {\n        let id = value.journal.uuid;\n        if (value.account.number === AccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE) {\n            if (g[id]) {\n                g[id]['amount'] += value.amount * -1;\n                g[id]['exchanged_amount'] += value.exchanged_amount * -1;\n            } else {\n                g[id] = {\n                    uuid: id,\n                    name: value.primary_contact.name,\n                    number: value.journal.number,\n                    amount: value.amount * -1,\n                    description: value.description,\n                    exchanged_amount: value.exchanged_amount * -1,\n                    currency: value.currency,\n                    segment_uuid: value.segment_uuid\n                }\n            }\n        }\n    })\n\n    return Object.values(g);\n}\n\n// Group Expense By Employee (Reimburstment Page)\nexports.groupExpenseByEmployee = (data) => {\n    let g = [];\n\n    data.forEach(value => {\n        let amt = 0, xamt = 0;\n        value.expense_entries.forEach(ele => {\n            if (ele.account.number === AccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE) {\n                amt += ele.amount * -1;\n                xamt += ele.exchanged_amount * -1;\n            }\n        });\n\n        g.push({\n            uuid: value.uuid,\n            name: value.supplier.name,\n            number: value.number,\n            amount: amt,\n            exchanged_amount: xamt,\n            currency: value.bill_currency,\n        });\n    })\n\n    return g;\n}\n\n// Account Editor\nexports.accountEditor = (container, options, data) => {\n    let acc_language = store.state.accounting.accountLanguage === 'English' ? \"account_type.name\" :  \"account_type.local_name\";\n    let acc_template = store.state.accounting.accountLanguage === 'English' ?\"<span>#=number# #=name#</span>\" :  \"<span>#=number# #=local_name#</span>\";\n    return kendo.jQuery('<input required name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n            autoBind: false,\n            autoWidth: true,\n            height: 400,\n            filter: \"contains\",\n            filtering: function(e) {\n                var filter = e.filter;\n                \n                var newFilter = {\n                    logic: \"or\",\n                    filters: [\n                        { field: \"number\", operator: \"contains\", value: filter.value },\n                        { field: \"name\", operator: \"contains\", value: filter.value },\n                    ]\n                };\n                this.dataSource.filter(newFilter);\n\n                // Important: stop default filter\n                e.preventDefault();\n            },\n            dataTextField: \"number\",\n            dataValueField: \"uuid\",\n            template: acc_template ,\n            optionLabel: \"--- Select ---\",\n            dataSource: new kendo.data.DataSource({\n                data: data,\n                group: {\n                    field: acc_language ,\n                    compare: function (a, b) {// Order by number\n                        if (a.items[0].number === b.items[0].number) {\n                            return 0\n                        } else if (a.items[0].number > b.items[0].number) {\n                            return 1\n                        } else {\n                            return -1\n                        }\n                    }\n                },\n            })\n        })\n}\n\n// Read Excel File\nexports.getExcelData = async (rawFile) => {\n    return new Promise((resolve) => {\n        /* Initial File Reader */\n        const reader = new FileReader();\n\n        reader.onload = (e) => {\n            /* Parse data */\n            const data = e.target.result;\n            const workbook = XLSX.read(data, {type: 'array'});\n\n            /* Get first worksheet */\n            const firstSheetName = workbook.SheetNames[0];\n            const worksheet = workbook.Sheets[firstSheetName];\n\n            /* Convert array of arrays */\n            let results = XLSX.utils.sheet_to_json(worksheet, {header: 1});\n            resolve(results);\n        }\n\n        // Read File\n        reader.readAsArrayBuffer(rawFile);\n    })\n}\n\n// Transalate to local language\nexports.localTranslate = (lang) => {\n    let word = lang;\n\n    if (lang.toLowerCase() === \"asset\") {\n        word = \"ទ្រព្យសកម្ម\";\n    } else if (lang.toLowerCase() === \"current asset\") {\n        word = \"ទ្រព្យសកម្មរយៈពេលខ្លី\";\n    } else if (lang.toLowerCase() === \"non-current asset\") {\n        word = \"ទ្រព្យសកម្មរយៈពេលវែង\";\n    } else if (lang.toLowerCase() === \"liabilities\") {\n        word = \"បំណុល\";\n    } else if (lang.toLowerCase() === \"current liabilities\") {\n        word = \"បំណុលរយៈពេលខ្លី\";\n    } else if (lang.toLowerCase() === \"non-current liabilities\") {\n        word = \"បំណុលរយៈពេលវែង\";\n    } else if (lang.toLowerCase() === \"equity\") {\n        word = \"ដើមទុន\";\n    } else if (lang.toLowerCase() === \"retained earning\") {\n        word = \"ប្រាក់ចំណេញរក្សាទុក\";\n    }\n\n    return word;\n}\n\n/* Reform data to HierarchicalDataSource */\nexports.reformDataToHierarchicalDataSource = (dataItems) => {\n    let g = {};\n\n    /* Parent Levels */\n    dataItems.forEach(value => {\n        let clazz = new ClassModel(value);\n        \n        /* Nature */\n        if(clazz.clazz.id !== \"\"){\n            g[clazz.clazz.id] = {\n                id : clazz.clazz.id,\n                parentId : null,\n                code : clazz.clazz.code,\n                name : clazz.clazz.name,\n                items : [],\n                hasChildren : true,\n            };\n        }\n        /* Type */\n        if(clazz.classType.id !== \"\"){\n            g[clazz.classType.id] = {\n                id : clazz.classType.id,\n                parentId : clazz.clazz.id,\n                code : clazz.classType.code,\n                name : clazz.classType.name,\n                items : [],\n                hasChildren : true,\n            };\n        }\n        /* Group */\n        if(clazz.classGroup.id !== \"\"){\n            g[clazz.classGroup.id] = {\n                id : clazz.classGroup.id,\n                parentId : clazz.classType.id,\n                code : clazz.classGroup.code,\n                name : clazz.classGroup.name,\n                items : [],\n                hasChildren : true,\n            };\n        }\n        /* Sub Group */\n        if(clazz.classSubGroup.id !== \"\"){\n            g[clazz.classSubGroup.id] = {\n                id : clazz.classSubGroup.id,\n                parentId : clazz.classGroup.id,\n                code : clazz.classSubGroup.code,\n                name : clazz.classSubGroup.name,\n                hasChildren : false,\n            };\n        }\n    });\n\n    /* Add Parents */\n    let list = [];\n    for (let key in g)\n    list.push(g[key]);\n    \n    var map = {}, node, roots = [], i;\n\n    for (i = 0; i < list.length; i += 1) {\n        map[list[i].id] = i; // initialize the map\n        list[i].items = []; // initialize the children\n    }\n    \n    for (i = 0; i < list.length; i += 1) {\n        node = list[i];\n        if (node.parentId !== null) {\n            // if you have dangling branches check that map[node.parentId] exists\n            list[map[node.parentId]].items.push(node);\n        } else {\n            roots.push(node);\n        }\n    }\n    \n    return roots;\n}\n\nexport default exports;"]}]}
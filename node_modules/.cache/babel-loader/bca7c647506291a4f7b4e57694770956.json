{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/micro_edition/revenues/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/micro_edition/revenues/Order.vue","mtime":1639364469147},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbWFjb3MvRGVza3RvcC9iYW5oamktMC4yL2JhbmhqaS1hY2NvdW50aW5nLXdlYi1tb2R1bGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwoKdmFyIF9kZWZhdWx0SXRlbSwgX2RlZmF1bHRTdXBJdGVtLCBfZGVmYXVsdEVtcEl0ZW07CgppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5wYWQtc3RhcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaTE4biB9IGZyb20gIkAvaTE4biI7CmltcG9ydCBEYXRlUGlja2VyQ29tcG9uZW50IGZyb20gIkAvY29tcG9uZW50cy9jdXN0b21fdGVtcGxhdGVzL0RhdGVQaWNrZXJDb21wb25lbnQiOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IHsgRHJvcERvd25MaXN0IH0gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXZ1ZS1kcm9wZG93bnMiOwppbXBvcnQgU2FsZUZvcm1Db250ZW50TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1NhbGVGb3JtQ29udGVudCI7CmltcG9ydCBJdGVtTGluZU1vZGVsIGZyb20gIkAvc2NyaXB0cy9pbnZvaWNlL21vZGVsL0l0ZW1MaW5lIjsKaW1wb3J0IHsgdXVpZCB9IGZyb20gInZ1ZS11dWlkIjsKaW1wb3J0IFNhbGVPcmRlck1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9UcmFuc2FjdGlvbiI7Ci8qIFN0b3JlICovCgppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CnZhciBpbnN0aXR1dGUgPSBzdG9yZS5zdGF0ZS5pbnN0aXR1dGUuaW5zdGl0dXRlOwppbXBvcnQgeyBTaG93UmVzb3VyY2UgfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOwppbXBvcnQgcGF5bWVudFRlcm1IYW5kbGVyXyBmcm9tICJAL3NjcmlwdHMvcGF5bWVudHRlcm0vaGFuZGxlci9wYXltZW50VGVybUhhbmRsZXIiOwppbXBvcnQgY3JlZGl0TGltaXRIYW5kbGVyIGZyb20gIkAvc2NyaXB0cy9jcmVkaXRMaW1pdC9oYW5kbGVyL2NyZWRpdExpbWl0SGFuZGxlciI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIiOwppbXBvcnQgdHJhbnNhY3Rpb25IYW5kbGVyIGZyb20gIkAvc2NyaXB0cy90cmFuc2FjdGlvbkhhbmRsZXIiOwppbXBvcnQgeyBkYXRhU3RvcmUgfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOyAvLy8vaGFuZGxlcgoKdmFyIHNhbGVPcmRlckhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvdHJhbnNhY3Rpb25IYW5kbGVyIik7Cgp2YXIgYmlsbGluZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaW52b2ljZS9oYW5kbGVyL2JpbGxpbmdIYW5kbGVyIik7Cgp2YXIgY3VzdG9tZXJIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2N1c3RvbWVySGFuZGxlciIpOwoKdmFyIHByb2plY3RIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2plY3RIYW5kbGVyIik7Cgp2YXIgcHJlZml4SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcmVmaXhIYW5kbGVyIik7Cgp2YXIgcGF5bWVudFRlcm1IYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3BheW1lbnRUZXJtSGFuZGxlciIpOwoKdmFyIHByaWNlTGV2ZWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3ByaWNlTGV2ZWxIYW5kbGVyIik7Cgp2YXIgc2FsZUZvcm1Db250ZW50SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zYWxlRm9ybUNvbnRlbnRIYW5kbGVyIik7Cgp2YXIgZW1wbG95ZWVIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2VtcGxveWVlSGFuZGxlciIpOwoKdmFyIGl0ZW1Nb2RpZmllckhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaXRlbU1vZGlmaWVySGFuZGxlciIpOwoKdmFyIGRpc2NvdW50SXRlbUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGlzY291bnRJdGVtSGFuZGxlciIpOwoKdmFyIHVvbVByaWNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy91b21QcmljZUhhbmRsZXIiKTsKCnZhciBwcm9kdWN0VmFyaWFudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcHJvZHVjdFZhcmlhbnRIYW5kbGVyIik7Cgp2YXIgb3RoZXJDaGFyZ2VIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL290aGVyQ2hhcmdlSGFuZGxlciIpOwoKdmFyIGxvY2F0aW9uSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9sb2NhdGlvbkhhbmRsZXIiKTsKCnZhciBzZXR0aW5nc0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2V0dGluZ3NIYW5kbGVyIik7Cgp2YXIgc2FsZUNoYW5uZWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NhbGVDaGFubmVsSGFuZGxlciIpOwoKdmFyIHNhbGVVbml0SXRlbUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2FsZVVuaXRJdGVtSGFuZGxlciIpOwoKdmFyIHNldHRpbmdIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NldHRpbmdIYW5kbGVyIik7Cgp2YXIgY2F0YWxvZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY2F0YWxvZ0hhbmRsZXIiKTsKCnZhciBwcm9kdWN0SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcm9kdWN0SGFuZGxlciIpOwoKdmFyIGN1cnJlbmN5SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jdXJyZW5jeS9oYW5kbGVyL2N1cnJlbmN5SGFuZGxlciIpOwoKdmFyIHN1cHBsaWVySGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zdXBwbGllckhhbmRsZXIiKTsKCnZhciBzYWxlRm9ybUNvbnRlbnRNb2RlbCA9IG5ldyBTYWxlRm9ybUNvbnRlbnRNb2RlbCh7fSk7CnZhciBpdGVtTGluZU1vZGVsID0gbmV3IEl0ZW1MaW5lTW9kZWwoe30pOyAvL290aGVyCgp2YXIgJCA9IGtlbmRvLmpRdWVyeTsKdmFyIHRleHRGaWVsZCA9ICJudW1iZXJOYW1lIjsKdmFyIGtleUZpZWxkID0gImlkIjsKdmFyIGRlZmF1bHRJdGVtID0gKF9kZWZhdWx0SXRlbSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmF1bHRJdGVtLCB0ZXh0RmllbGQsICJTZWxlY3QgQ3VzdG9tZXIuLi4iKSwgX2RlZmluZVByb3BlcnR5KF9kZWZhdWx0SXRlbSwga2V5RmllbGQsIG51bGwpLCBfZGVmYXVsdEl0ZW0pOwp2YXIgZGVmYXVsdFN1cEl0ZW0gPSAoX2RlZmF1bHRTdXBJdGVtID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfZGVmYXVsdFN1cEl0ZW0sIHRleHRGaWVsZCwgIlNlbGVjdCBTdXBwbGllci4uLiIpLCBfZGVmaW5lUHJvcGVydHkoX2RlZmF1bHRTdXBJdGVtLCBrZXlGaWVsZCwgbnVsbCksIF9kZWZhdWx0U3VwSXRlbSk7CnZhciBkZWZhdWx0RW1wSXRlbSA9IChfZGVmYXVsdEVtcEl0ZW0gPSB7fSwgX2RlZmluZVByb3BlcnR5KF9kZWZhdWx0RW1wSXRlbSwgdGV4dEZpZWxkLCAiU2VsZWN0IEVtcGxveWVlLi4uIiksIF9kZWZpbmVQcm9wZXJ0eShfZGVmYXVsdEVtcEl0ZW0sIGtleUZpZWxkLCBudWxsKSwgX2RlZmF1bHRFbXBJdGVtKTsKCnZhciBlbXB0eUl0ZW0gPSBfZGVmaW5lUHJvcGVydHkoe30sIHRleHRGaWVsZCwgImxvYWRpbmcgLi4uIik7Cgp2YXIgaW52b2ljZVByZWZpeCA9ICJsaW4tIjsKdmFyIERJU0NPVU5UX1RZUEUgPSAiP3R5cGU9U2FsZSI7Cgp2YXIgY29va2llSlMgPSByZXF1aXJlKCJAL2Nvb2tpZS5qcyIpOwoKdmFyIGNvb2tpZSA9IGNvb2tpZUpTLmdldENvb2tpZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNhbGVPcmRlciIsCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGluaXRTYWxlT3JkZXI6IHsKICAgICAgdHlwZTogU2FsZU9yZGVyTW9kZWwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmdNZTogZnVuY3Rpb24gTG9hZGluZ01lKCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMvTG9hZGluZyIpOwogICAgfSwKICAgICJhcHAtZGF0ZXBpY2tlciI6IERhdGVQaWNrZXJDb21wb25lbnQsCiAgICBkcm9wZG93bmxpc3Q6IERyb3BEb3duTGlzdCAvLyAiYXBwLW1vbnRob2YtcGlja2VyIjogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL01vbnRoT2ZQaWNrZXIiKSwKCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2FsZU9yZGVyOiBuZXcgU2FsZU9yZGVyTW9kZWwoKSwKICAgICAgaXNFZGl0OiBmYWxzZSwKICAgICAgbnVtU2VsZWN0OiBbMV0sCiAgICAgIGRpYWxvZ1RheDogZmFsc2UsCiAgICAgIHRoZURhdGU6ICIiLAogICAgICAvL0NhdGFsb2cKICAgICAgZGlhbG9nQ2F0YWxvZzogZmFsc2UsCiAgICAgIGdyaWRTY2hlbWE6IHsKICAgICAgICBtb2RlbDogewogICAgICAgICAgaWQ6ICJpZCIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltZ1VSTDogImh0dHBzOi8vczMtYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbS9pbWFnZXMuYmFuaGppLyIsCiAgICAgIC8vIExvYWRpbmdNZQogICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmdBbGVydDogZmFsc2UsCiAgICAgIGxvYWRpbmdDb2xvckFsZXJ0OiAiIiwKICAgICAgbG9hZGluZ1RleHRBbGVydDogIiIsCiAgICAgIGJpbGxfZGF0ZTogIiIsCiAgICAgIGFsZXJ0OiBmYWxzZSwKICAgICAgZmlsZXM6IFtdLAogICAgICBlcnJvcnM6IFtdLAogICAgICAvLyBGb3JtIHZhbGlkYXRpb24KICAgICAgdmFsaWQ6IHRydWUsCiAgICAgIHRlbXBsYXRlczogW3sKICAgICAgICB0aXRsZTogIkRyYWZ0IgogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICJPcGVuIgogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICJQYXJ0aWFsbHkgQ2xvc2VkIgogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICJDbG9zZWQiCiAgICAgIH1dLAogICAgICBzYWxlT3JkZXJUeXBlOiAxLAogICAgICBzYWxlT3JkZXJUeXBlczogW3sKICAgICAgICBuYW1lOiAiU3RhbmRhcmQgT3JkZXIiLAogICAgICAgIGlkOiAxCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiT3BlbiBPcmRlciIsCiAgICAgICAgaWQ6IDIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJDb250cmFjdCIsCiAgICAgICAgaWQ6IDMKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJDb25zaWdubWVudCBPcmRlciIsCiAgICAgICAgaWQ6IDQKICAgICAgfSAvLyB7bmFtZTogJ09yZGVyIHJlcXVpcmVkIFB1cmNoYXNlJywgaWQ6IDV9LAogICAgICBdLAogICAgICBpc1JlcXVyZWRQdXJjaGFzZTogZmFsc2UsCiAgICAgIGNvbF9leHBhbmQ6IDksCiAgICAgIGNvbF9oaWRlOiAzLAogICAgICBpc0hpZGVCYXI6IGZhbHNlLAogICAgICBmaWx0ZXI6ICIiLAogICAgICB0ZXh0RmllbGQ6ICJudW1iZXJOYW1lIiwKICAgICAgZGF0YUl0ZW1LZXk6ICJpZCIsCiAgICAgIGRlZmF1bHRJdGVtOiBkZWZhdWx0SXRlbSwKICAgICAgZGVmYXVsdFN1cEl0ZW06IGRlZmF1bHRTdXBJdGVtLAogICAgICBkZWZhdWx0RW1wSXRlbTogZGVmYXVsdEVtcEl0ZW0sCiAgICAgIG1PdGhlckNoYXJnZTogW10sCiAgICAgIC8vaXRlbQogICAgICBpdGVtTGluZXM6IFtdLAogICAgICBpdGVtTGluZTogaXRlbUxpbmVNb2RlbCwKICAgICAgZGF0ZUZvcm1hdDogaXRlbUxpbmVNb2RlbC5kYXRlRm9ybWF0LAogICAgICAvL2N1c3RvbWVyCiAgICAgIGN1c0Jhc2VVcmw6IGN1c3RvbWVySGFuZGxlci5zZWFyY2goKSwKICAgICAgY3VzdG9tZXI6IHt9LAogICAgICBjdXN0b21lckxpc3Q6IFtdLAogICAgICBzdXBwbGllckxpc3Q6IFtdLAogICAgICBzdXBwbGllcjoge30sCiAgICAgIHN1cEJhc2VVcmw6IHN1cHBsaWVySGFuZGxlci5zZWFyY2goKSwKICAgICAgYmlsbGluZ0FkZHJlc3M6IFtdLAogICAgICBkZWxpdmVyeUFkZHJlc3M6IFtdLAogICAgICBwcmljZUxldmVsOiBbXSwKICAgICAgLy9kYXRlCiAgICAgIHBheW1lbnRUZXJtczogW10sCiAgICAgIHRyYW5zYWN0aW9uczogW10sCiAgICAgIGVtcGxveWVlTGlzdDogW10sCiAgICAgIGVtcGxveWVlOiB7fSwKICAgICAgZW1wQmFzZVVybDogZW1wbG95ZWVIYW5kbGVyLnNlYXJjaFVSTCgpLAogICAgICBzYWxlQ2hhbm5lbExpc3Q6IFtdLAogICAgICBsb2NhdGlvbnM6IFtdLAogICAgICBjdXN0b21lclByb2plY3RzOiBbXSwKICAgICAgc2VnbWVudHM6IFtdLAogICAgICB0cmFuc2FjdGlvblR5cGU6IHt9LAogICAgICB0YXhMaXN0VG90YWw6IHt9LAogICAgICBjdXN0b21lckRpc2NvdW50SXRlbTogW10sCiAgICAgIGN1c3RvbWVyU2FsZVVuaXQ6IFtdLAogICAgICBzYWxlRm9ybUNvbnRlbnQ6IHNhbGVGb3JtQ29udGVudE1vZGVsLAogICAgICB0cmFuc2FjdGlvbkRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApLAogICAgICBtb250aE9mOiBmYWxzZSwKICAgICAgZGVsaXZlcnlEYXRlVGltZTogbmV3IERhdGUoKSwKICAgICAgdmFsaWRpdHlEYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSwKICAgICAgc3BlY2lmaWNEaXNjb3VudEl0ZW06IFtdLAogICAgICBvdGhlckNoYXJnZUxpc3Q6IFtdLAogICAgICBzYWxlVW5pdEl0ZW1MaXN0OiBbXSwKICAgICAgb3RoZXJUYXg6IFtdLAogICAgICBzcGVjaWZpY1RheDogW10sCiAgICAgIHB1YmxpY0xpZ2h0aW5nVGF4OiBbXSwKICAgICAgdmF0VGF4OiBbXSwKICAgICAgdGF4OiBbXSwKICAgICAgbG9nZ2VkVXNlcjogewogICAgICAgIGlkOiBjb29raWUuY3JlYXRvciwKICAgICAgICBuYW1lOiBjb29raWUuZW1haWwKICAgICAgfSwKICAgICAgbGVhZHM6IFtdLAogICAgICBjYXRhbG9nczogW10sCiAgICAgIHR4bkxpc3Q6IFtdLAogICAgICBxdW90ZXM6IFtdLAogICAgICB0eG5MaXN0czogW10sCiAgICAgIGlzU2F2ZU5ldzogZmFsc2UsCiAgICAgIGlzU2F2ZUNsb3NlOiBmYWxzZSwKICAgICAgaXNTYXZlUHJpbnQ6IGZhbHNlLAogICAgICBpc1NhdmVEcmFmdDogZmFsc2UsCiAgICAgIGV4Y2hhbmdlUmF0ZToge30sCiAgICAgIGJhc2VDdXJyZW5jeUNvZGU6ICIiLAogICAgICBjdXJyZW5jeUNvZGU6ICIiLAogICAgICB0cmFuc2FjdGlvblJhdGU6IDEsCiAgICAgIHNhdmVPcHRpb246ICIiLAogICAgICBmb3JtQVI6IFt7CiAgICAgICAgaWQ6IDEsCiAgICAgICAgbmFtZTogIkRlZmF1bHQgRm9ybSIKICAgICAgfSwgewogICAgICAgIGlkOiAyLAogICAgICAgIG5hbWU6ICJGb3JtIDgwbW0iCiAgICAgIH1dLAogICAgICBpc1ByaWNlTGV2ZWxDaGFuZ2VkOiBmYWxzZSwKICAgICAgcmVmRnJvbTogW10sCiAgICAgIC8vIGNhbiBTTyBjYW4gYmUgZnJvbSBTYWxlIFF1b3RlcwogICAgICBidG5EaXNhYmxlZDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtYXREYXRlVGltZTogZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUodmFsdWUpIHsKICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHZhbHVlKSwgdGhpcy5kYXRlRm9ybWF0ICsgIiBoaDptbSB0dCIpOwogICAgfSwKICAgIGFtb3VudEZvcm1hdDogZnVuY3Rpb24gYW1vdW50Rm9ybWF0KHZhbHVlKSB7CiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyh2YWx1ZS5hbW91bnQsICJuIi5jb25jYXQodGhpcy5zYWxlRm9ybUNvbnRlbnQuZGVjaW1hbCkpOwogICAgfSwKICAgIHByaWNlRm9ybWF0OiBmdW5jdGlvbiBwcmljZUZvcm1hdCh2YWx1ZSkgewogICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcodmFsdWUucHJpY2UsICJuIi5jb25jYXQodGhpcy5zYWxlRm9ybUNvbnRlbnQuZGVjaW1hbCkpOwogICAgfSwKICAgIEhlbHA6IGZ1bmN0aW9uIEhlbHAoa2V5X3NlYXJjaCkgewogICAgICBTaG93UmVzb3VyY2Uoa2V5X3NlYXJjaCk7CiAgICB9LAogICAgaW5pdGlhbERhdGE6IGZ1bmN0aW9uIGluaXRpYWxEYXRhKCkgewogICAgICBpZiAodGhpcy5pbml0U2FsZU9yZGVyKSB7CiAgICAgICAgLy8gRWRpdCBNb2RlCiAgICAgICAgdGhpcy5zYWxlT3JkZXIgPSB0aGlzLmluaXRTYWxlT3JkZXI7CiAgICAgICAgdGhpcy5zYWxlT3JkZXIuY3JlZGl0TGltaXQgPSAwOwogICAgICAgIHRoaXMuc2FsZU9yZGVyLmN1cnJlbnRCYWxhbmNlID0gMDsgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMuaW5pdFNhbGVPcmRlciwgJ3Byb3BEYXRhJykKCiAgICAgICAgdGhpcy5iaW5kRGF0YSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyYW5kIE5ldyBNb2RlCiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLnNldERlZmF1bHREYXRhKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2V0RGVmYXVsdERhdGE6IGZ1bmN0aW9uIHNldERlZmF1bHREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gQnJhbmQgTmV3IE1vZGUKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCdkZWZhdWx0IG9yIGNsZWFyJykKICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zYWxlT3JkZXIgPSBuZXcgU2FsZU9yZGVyTW9kZWwoe30pOyAvL3NhbGUgb3JkZXIgdHlwZQoKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5zYWxlT3JkZXIuc2FsZU9yZGVyVHlwZSA9IDE7CiAgICAgICAgdGhpcy5zYWxlT3JkZXJUeXBlID0gMTsKCiAgICAgICAgaWYgKHRoaXMuYXBwVHlwZSA9PT0gIm5wbyIgfHwgdGhpcy5hcHBUeXBlID09PSAiUHVibGljIFNlY3RvcnMiKSB7CiAgICAgICAgICB0aGlzLnNhbGVPcmRlci5zYWxlT3JkZXJUeXBlID0gMzsKICAgICAgICAgIHRoaXMuc2FsZU9yZGVyVHlwZSA9IDM7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnNhbGVPcmRlci5kZWxpdmVyeURhdGVUaW1lID0gbmV3IERhdGUoKTsKICAgICAgdGhpcy5zYWxlT3JkZXIuZm9ybVRlbXBsYXRlID0gMTsKICAgICAgdGhpcy5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7IC8vIEdlbmVyYXRlIE51bWJlcgoKICAgICAgdGhpcy5pdGVtTGluZXMgPSBbXTsgLy8gbGV0IGRzID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCk7CiAgICAgIC8vIGRzLmRhdGEoW10pOwogICAgICAvLyBBZGQgMiBkZWZhdWx0IGxpbmVzCgogICAgICB0aGlzLnJlbW92ZUVtcHR5TGluZSgpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5hZGRSb3coKTsgLy8gdGhpcy5hZGRSb3coKQoKICAgICAgfSwgNTAwKTsgLy8gQWRkIDIgZGVmYXVsdCBsaW5lcwoKICAgICAgdGhpcy5vdGhlckNoYXJnZUxpc3QgPSBbXTsKICAgICAgdGhpcy5tT3RoZXJDaGFyZ2UgPSBbXTsKICAgICAgdGhpcy5lbXBsb3llZSA9IHt9OwogICAgICB0aGlzLnRheExpc3RUb3RhbCA9IHt9OwogICAgICB0aGlzLnF1b3RlcyA9IFtdOwogICAgICB0aGlzLmlzU2F2ZU5ldyA9IGZhbHNlOwogICAgICB0aGlzLmlzU2F2ZUNsb3NlID0gZmFsc2U7CiAgICAgIHRoaXMuaXNTYXZlUHJpbnQgPSBmYWxzZTsKICAgICAgdGhpcy5pc1NhdmVEcmFmdCA9IGZhbHNlOwogICAgICB0aGlzLmNyZWRpdExpbWl0VXNhZ2UoMCwgMSk7CiAgICAgIHRoaXMuaXNSZXF1cmVkUHVyY2hhc2UgPSBmYWxzZTsKICAgICAgdGhpcy5jdXN0b21lciA9IHt9OwogICAgfSwKICAgIGJpbmREYXRhOiBmdW5jdGlvbiBiaW5kRGF0YSgpIHsKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMuc2FsZU9yZGVyLCAnYmluZERhdGEnKQogICAgICAvLyBFZGl0IE1vZGUKICAgICAgaWYgKHRoaXMuc2FsZU9yZGVyKSB7CiAgICAgICAgaWYgKHRoaXMuc2FsZU9yZGVyLmhhc093blByb3BlcnR5KCJjdXN0b21lciIpKSB7CiAgICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmN1c3RvbWVyID0gdGhpcy5zYWxlT3JkZXIuY3VzdG9tZXI7IC8vIGxldCBlID0ge3ZhbHVlOiB0aGlzLnNhbGVPcmRlci5jdXN0b21lcn0KICAgICAgICAgIC8vIHRoaXMub25DaGFuZ2UoZSkKCiAgICAgICAgICB0aGlzLmJpbGxpbmdBZGRyZXNzID0gdGhpcy5zYWxlT3JkZXIuY3VzdG9tZXIuYmlsbGluZ0FkZHJlc3M7CiAgICAgICAgICB0aGlzLmRlbGl2ZXJ5QWRkcmVzcyA9IHRoaXMuc2FsZU9yZGVyLmN1c3RvbWVyLmRlbGl2ZXJ5QWRkcmVzczsgLy8gdGhpcy5jdXN0b21lclByb2plY3RzID0gdGhpcy5zYWxlT3JkZXIuY3VzdG9tZXIuCgogICAgICAgICAgdGhpcy50YXhMaXN0VG90YWwgPSB0aGlzLnNhbGVPcmRlci50YXhMaXN0VG90YWw7CiAgICAgICAgICB0aGlzLml0ZW1MaW5lcyA9IHRoaXMuc2FsZU9yZGVyLml0ZW1MaW5lczsKICAgICAgICAgIHRoaXMubU90aGVyQ2hhcmdlID0gdGhpcy5zYWxlT3JkZXIub3RoZXJDaGFyZ2U7CiAgICAgICAgICB0aGlzLmxvYWRQcm9qZWN0QnlDdXN0b21lcigpOwoKICAgICAgICAgIGlmICh0aGlzLmN1c3RvbWVyLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgIHRoaXMubG9hZEN1c3RvbWVyQmFsYW5jZSh0aGlzLmN1c3RvbWVyLmlkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRTZWxlY3Q6IGZ1bmN0aW9uIGFkZFNlbGVjdCgpIHsKICAgICAgdmFyIGFtb3VudF9udW0gPSB0aGlzLm51bVNlbGVjdC5sZW5ndGg7CiAgICAgIHZhciBudW0gPSB0aGlzLm51bVNlbGVjdFthbW91bnRfbnVtIC0gMV07CiAgICAgIHZhciBuZXdfbnVtID0gbnVtICsgMTsKICAgICAgdmFyIGxlbmdodEl0ZW0gPSB0aGlzLnNwZWNpZmljRGlzY291bnRJdGVtLmxlbmd0aDsKCiAgICAgIGlmIChuZXdfbnVtIDw9IGxlbmdodEl0ZW0pIHsKICAgICAgICB0aGlzLm51bVNlbGVjdC5wdXNoKG5ld19udW0pOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlU2VsZWN0OiBmdW5jdGlvbiByZW1vdmVTZWxlY3QoaW5kZXgpIHsKICAgICAgdGhpcy5udW1TZWxlY3Quc3BsaWNlKGluZGV4LCAxKTsgLy8gd2luZG93LmNvbnNvbGUubG9nKGluZGV4LCB0aGlzLm51bVNlbGVjdCkKICAgICAgLy8gdGhpcy5zZWxlY3REaXNjb3VudC5zcGxpY2UoaW5kZXgsMSkKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCJyZW1vdmUiLHRoaXMuc2VsZWN0RGlzY291bnQpCiAgICAgIC8vIHRoaXMuc2VsZWN0RGlzY291bnQgPSB0aGlzLnNlbGVjdERpc2NvdW50LmZpbHRlcihpdGVtID0+ICBpdGVtLmlkICE9IHZhbC5pZCk7CiAgICB9LAogICAgZXJyb3JNZXNzYWdlOiBmdW5jdGlvbiBlcnJvck1lc3NhZ2UoKSB7fSwKICAgIGFjY291bnREcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gYWNjb3VudERyb3BEb3duRWRpdG9yKCkge30sCiAgICBoaWRlX3NtYWxsc2l0ZWJhcjogZnVuY3Rpb24gaGlkZV9zbWFsbHNpdGViYXIoKSB7CiAgICAgIGlmICghdGhpcy5pc0hpZGVCYXIpIHsKICAgICAgICAvLyB0aGlzLmNvbF9leHBhbmQgPSAxMgogICAgICAgIC8vIHRoaXMuY29sX2hpZGUgPSAwCiAgICAgICAgdGhpcy5pc0hpZGVCYXIgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRoaXMuY29sX2V4cGFuZCA9IDkKICAgICAgICAvLyB0aGlzLmNvbF9oaWRlID0gMwogICAgICAgIHRoaXMuaXNIaWRlQmFyID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvL251bWJlcgogICAgZ2VuZXJhdGVOdW1iZXI6IGZ1bmN0aW9uIGdlbmVyYXRlTnVtYmVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmlzRWRpdCA9PSBmYWxzZSkgewogICAgICAgIHZhciBkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7CgogICAgICAgIGlmICh0aGlzLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUpIHsKICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnRyYW5zYWN0aW9uRGF0ZSkKICAgICAgICAgIGQgPSB0aGlzLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGU7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIGFiYnI6IHRoaXMuc2FsZU9yZGVyLnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgICAgc3RydWN0dXJlOiB0aGlzLnNhbGVPcmRlci50cmFuc2FjdGlvblR5cGUuc3RydWN0dXJlLAogICAgICAgICAgdHJhbnNhY3Rpb25EYXRlOiBkLAogICAgICAgICAgdHlwZTogIlNhbGUgT3JkZXIiCiAgICAgICAgfTsKICAgICAgICBiaWxsaW5nSGFuZGxlci5sYXN0TnVtYmVyKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKCiAgICAgICAgICAgIHZhciBsYXN0TnVtYmVyID0gX3RoaXMyLnplcm9QYWQocGFyc2VJbnQocmVzLmxhc3ROdW1iZXIpLCBfdGhpczIuc2FsZU9yZGVyLnRyYW5zYWN0aW9uVHlwZS5mb3JtYXQpOwoKICAgICAgICAgICAgdmFyIG51bWJlciA9IHJlcy5zdWZmaXggKyBfdGhpczIuc2FsZU9yZGVyLnRyYW5zYWN0aW9uVHlwZS5udW1iZXJTZXBhcmF0b3IgKyBsYXN0TnVtYmVyOwogICAgICAgICAgICBfdGhpczIuc2FsZU9yZGVyLm51bWJlciA9IG51bWJlcjsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKGUpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgemVyb1BhZDogZnVuY3Rpb24gemVyb1BhZChudW0sIHBsYWNlcykgewogICAgICByZXR1cm4gU3RyaW5nKG51bSkucGFkU3RhcnQocGxhY2VzLCAiMCIpOwogICAgfSwKICAgIC8vY3VzdG9tZXIKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICB3aW5kb3cuY29uc29sZS5sb2coZXZlbnQpOwogICAgICB2YXIgdmFsdWUgPSBldmVudC52YWx1ZTsKCiAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVt0ZXh0RmllbGRdID09PSBlbXB0eUl0ZW1bdGV4dEZpZWxkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jdXN0b21lciA9IHZhbHVlOwogICAgICB0aGlzLnNhbGVPcmRlci5jdXN0b21lciA9IHZhbHVlOyAvLyB0aGlzLmludm9pY2UgPSB2YWx1ZQogICAgICAvLyB0aGlzLnNhbGVPcmRlci5wYXltZW50VGVybSA9IHZhbHVlLmhhc093blByb3BlcnR5KCJwYXltZW50VGVybSIpCiAgICAgIC8vICAgPyB2YWx1ZS5wYXltZW50VGVybQogICAgICAvLyAgIDoge307CgogICAgICB0aGlzLnNhbGVPcmRlci5wcmljZUxldmVsID0gdmFsdWUuaGFzT3duUHJvcGVydHkoInByaWNlTGV2ZWwiKSA/IHZhbHVlLnByaWNlTGV2ZWwgOiB7fTsKICAgICAgdmFyIGJhc2VDdXJyZW5jeSA9IHZhbHVlLmhhc093blByb3BlcnR5KCJiYXNlQ3VycmVuY3kiKSA/IHZhbHVlLmJhc2VDdXJyZW5jeSA6IHt9OwoKICAgICAgaWYgKGJhc2VDdXJyZW5jeS5oYXNPd25Qcm9wZXJ0eSgiY29kZSIpKSB7CiAgICAgICAgdGhpcy5iYXNlQ3VycmVuY3lDb2RlID0gYmFzZUN1cnJlbmN5LmNvZGU7CiAgICAgIH0KCiAgICAgIHZhciBwcmljZUxldmVsID0gdmFsdWUuaGFzT3duUHJvcGVydHkoInByaWNlTGV2ZWwiKSA/IHZhbHVlLnByaWNlTGV2ZWwgOiB7fTsKCiAgICAgIGlmIChwcmljZUxldmVsLmhhc093blByb3BlcnR5KCJjdXJyZW5jeSIpKSB7CiAgICAgICAgaWYgKHByaWNlTGV2ZWwuY3VycmVuY3kuaGFzT3duUHJvcGVydHkoImlkIikpIHsKICAgICAgICAgIHRoaXMubG9hZFRyYW5zYWN0aW9uUmF0ZSgpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5iaWxsaW5nQWRkcmVzcyA9IHZhbHVlLmhhc093blByb3BlcnR5KCJiaWxsaW5nQWRkcmVzcyIpID8gdmFsdWUuYmlsbGluZ0FkZHJlc3MgOiBbXTsKICAgICAgdGhpcy5kZWxpdmVyeUFkZHJlc3MgPSB2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgiZGVsaXZlcnlBZGRyZXNzIikgPyB2YWx1ZS5kZWxpdmVyeUFkZHJlc3MgOiBbXTsKCiAgICAgIGlmICh0aGlzLmJpbGxpbmdBZGRyZXNzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnNhbGVPcmRlci5iaWxsaW5nQWRkcmVzcyA9IHRoaXMuYmlsbGluZ0FkZHJlc3NbMF07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRlbGl2ZXJ5QWRkcmVzcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5zYWxlT3JkZXIuZGVsaXZlcnlBZGRyZXNzID0gdGhpcy5kZWxpdmVyeUFkZHJlc3NbMF07CiAgICAgIH0KCiAgICAgIHRoaXMub25TYWxlT3JkZXJEYXRlQ2hhbmdlZCgpOwogICAgICB0aGlzLmxvYWRQcm9qZWN0QnlDdXN0b21lcigpOyAvLyBjb25zdCBjcmVkaXRMaW1pdCA9IHZhbHVlLmhhc093blByb3BlcnR5KCJjcmVkaXRMaW1pdCIpCiAgICAgIC8vICAgPyB2YWx1ZS5jcmVkaXRMaW1pdAogICAgICAvLyAgIDogMDsKICAgICAgLy8gdGhpcy5zYWxlT3JkZXIuY3JlZGl0TGltaXQgPSBrZW5kby5wYXJzZUZsb2F0KGNyZWRpdExpbWl0KTsKCiAgICAgIHRoaXMubG9hZENyZWRpdExpbWl0KCk7CiAgICAgIHRoaXMubG9hZEN1c3RvbWVyQmFsYW5jZSh0aGlzLmN1c3RvbWVyLmlkKTsgLy8gbG9hZCBxdW90ZQoKICAgICAgdGhpcy5sb2FkUXVvdGUoKTsKICAgICAgdGhpcy5sb2FkUGF5bWVudFRlcm1MaXN0KCk7CiAgICB9LAogICAgb25GaWx0ZXJDaGFuZ2U6IGZ1bmN0aW9uIG9uRmlsdGVyQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciBmaWx0ZXIgPSBldmVudC5maWx0ZXIudmFsdWU7CiAgICAgIHRoaXMucmVxdWVzdERhdGEoMCwgZmlsdGVyLCB0aGlzLmN1c0Jhc2VVcmwpOwogICAgICB0aGlzLmZpbHRlciA9IGZpbHRlcjsKICAgIH0sCiAgICByZXF1ZXN0RGF0YTogZnVuY3Rpb24gcmVxdWVzdERhdGEoc2tpcCwgZmlsdGVyLCBiYXNlVXJsKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdXJsOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVybCA9IGJhc2VVcmwgKyAiP2ZpbHRlcj0iLmNvbmNhdChmaWx0ZXIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMuYXBwVHlwZSA9PT0gIm5wbyIpIHsKICAgICAgICAgICAgICAgICAgdXJsID0gYmFzZVVybCArICI/ZmlsdGVyPSIuY29uY2F0KGZpbHRlciwgIiZpc19kb25vcj10cnVlIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMzLnJlcXVlc3RTdGFydGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgIH0pLnRoZW4oX3RoaXMzLmFmdGVyRmV0Y2gpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWZ0ZXJGZXRjaDogZnVuY3Rpb24gYWZ0ZXJGZXRjaChqc29uKSB7CiAgICAgIHRoaXMuY3VzdG9tZXJMaXN0ID0ganNvbi5kYXRhOwogICAgfSwKICAgIC8vc3VwcGxpZXIKICAgIG9uU3VwcGxpZXJDaGFuZ2U6IGZ1bmN0aW9uIG9uU3VwcGxpZXJDaGFuZ2UoZXZlbnQpIHsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgdmFyIHZhbHVlID0gZXZlbnQudmFsdWU7CgogICAgICBpZiAodmFsdWUgJiYgdmFsdWVbdGV4dEZpZWxkXSA9PT0gZW1wdHlJdGVtW3RleHRGaWVsZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc3VwcGxpZXIgPSB2YWx1ZTsKICAgICAgdGhpcy5zYWxlT3JkZXIuc3VwcGxpZXIgPSB2YWx1ZTsKICAgIH0sCiAgICBvblN1cHBsaWVyRmlsdGVyQ2hhbmdlOiBmdW5jdGlvbiBvblN1cHBsaWVyRmlsdGVyQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciBzdXBmaWx0ZXIgPSBldmVudC5maWx0ZXIudmFsdWU7CiAgICAgIHRoaXMuc3VwcGxpZXJSZXF1ZXN0RGF0YSgwLCBzdXBmaWx0ZXIsIHRoaXMuc3VwQmFzZVVybCk7CiAgICB9LAogICAgc3VwcGxpZXJSZXF1ZXN0RGF0YTogZnVuY3Rpb24gc3VwcGxpZXJSZXF1ZXN0RGF0YShza2lwLCBmaWx0ZXIsIGJhc2VVcmwpIHsKICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyAiP2ZpbHRlcj0iLmNvbmNhdChmaWx0ZXIpOwogICAgICB0aGlzLnJlcXVlc3RTdGFydGVkID0gdHJ1ZTsKICAgICAgZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0pLnRoZW4odGhpcy5zdXBBZnRlckZldGNoKTsKICAgIH0sCiAgICBzdXBBZnRlckZldGNoOiBmdW5jdGlvbiBzdXBBZnRlckZldGNoKGpzb24pIHsKICAgICAgdGhpcy5zdXBwbGllckxpc3QgPSBqc29uLmRhdGE7CiAgICB9LAogICAgLy9lbXBsb3llZQogICAgb25FbXBsb3llZUNoYW5nZTogZnVuY3Rpb24gb25FbXBsb3llZUNoYW5nZShldmVudCkgewogICAgICB2YXIgdmFsdWUgPSBldmVudC52YWx1ZTsKCiAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVt0ZXh0RmllbGRdID09PSBlbXB0eUl0ZW1bdGV4dEZpZWxkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5lbXBsb3llZSA9IHZhbHVlOwogICAgICB0aGlzLnNhbGVPcmRlci5lbXBsb3llZSA9IHZhbHVlOwogICAgfSwKICAgIG9uRW1wbG95ZWVGaWx0ZXJDaGFuZ2VkOiBmdW5jdGlvbiBvbkVtcGxveWVlRmlsdGVyQ2hhbmdlZChldmVudCkgewogICAgICB2YXIgZW1wZmlsdGVyID0gZXZlbnQuZmlsdGVyLnZhbHVlOwogICAgICB0aGlzLmVtcGxveWVlUmVxdWVzdERhdGEoMCwgZW1wZmlsdGVyLCB0aGlzLmVtcEJhc2VVcmwpOwogICAgfSwKICAgIGVtcGxveWVlUmVxdWVzdERhdGE6IGZ1bmN0aW9uIGVtcGxveWVlUmVxdWVzdERhdGEoc2tpcCwgZmlsdGVyLCBiYXNlVXJsKSB7CiAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgIj9maWx0ZXI9Ii5jb25jYXQoZmlsdGVyKTsKICAgICAgdGhpcy5yZXF1ZXN0U3RhcnRlZCA9IHRydWU7CiAgICAgIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKHRoaXMuZW1wQWZ0ZXJGZXRjaCk7CiAgICB9LAogICAgZW1wQWZ0ZXJGZXRjaDogZnVuY3Rpb24gZW1wQWZ0ZXJGZXRjaChqc29uKSB7CiAgICAgIHRoaXMuZW1wbG95ZWVMaXN0ID0ganNvbi5kYXRhOwogICAgfSwKICAgIHJlbW92ZVJvdzogZnVuY3Rpb24gcmVtb3ZlUm93KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRJdGVtTGluZVNhbGVPcmRlciIpLmRhdGEoImtlbmRvR3JpZCIpLAogICAgICAgICAgZGF0YVNvdXJjZSA9IGdyaWQuZGF0YVNvdXJjZSwKICAgICAgICAgIGRhdGFJdGVtID0gZ3JpZC5kYXRhSXRlbSgkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgidHIiKSk7CgogICAgICBpZiAoZGF0YVNvdXJjZS50b3RhbCgpID4gMSkgewogICAgICAgIGRhdGFTb3VyY2UucmVtb3ZlKGRhdGFJdGVtKTsKICAgICAgfQoKICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CiAgICB9LAogICAgLy9kYXRlCiAgICBvblNhbGVPcmRlckRhdGVDaGFuZ2VkOiBmdW5jdGlvbiBvblNhbGVPcmRlckRhdGVDaGFuZ2VkKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBwYXltZW50VGVybSwgbmV0RHVlLCBzb21lRGF0ZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5zYWxlT3JkZXIubW9udGhPZiA9IG5ldyBEYXRlKF90aGlzNC5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCA3KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmxvYWRDcmVkaXRMaW1pdCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmxvYWRDdXN0b21lckJhbGFuY2UoX3RoaXM0LmN1c3RvbWVyLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5vblByaWNlTGV2ZWxDaGFuZ2UoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5sb2FkUGF5bWVudFRlcm1MaXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGlmIChfdGhpczQuY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgcGF5bWVudFRlcm0gPSBfdGhpczQuc2FsZU9yZGVyLnBheW1lbnRUZXJtIHx8IHt9OwogICAgICAgICAgICAgICAgICBuZXREdWUgPSBwYXltZW50VGVybS5uZXREdWUgfHwgMDsKICAgICAgICAgICAgICAgICAgc29tZURhdGUgPSBuZXcgRGF0ZShfdGhpczQuc2FsZU9yZGVyLnRyYW5zYWN0aW9uRGF0ZSk7CiAgICAgICAgICAgICAgICAgIHNvbWVEYXRlLnNldERhdGUoc29tZURhdGUuZ2V0RGF0ZSgpICsgcGFyc2VJbnQobmV0RHVlKSk7IC8vbnVtYmVyICBvZiBkYXlzIHRvIGFkZCwgZS54LiAxNSBkYXlzCgogICAgICAgICAgICAgICAgICBfdGhpczQuc2FsZU9yZGVyLnZhbGlkaXR5RGF0ZSA9IHNvbWVEYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKTsKICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJkdWVEYXRlIiwgX3RoaXM0LnNhbGVPcmRlci52YWxpZGl0eURhdGUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5nZW5lcmF0ZU51bWJlcigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25QYXltZW50VGVybUNoYW5nZWQ6IGZ1bmN0aW9uIG9uUGF5bWVudFRlcm1DaGFuZ2VkKCkgewogICAgICAvLyB0aGlzLm9uU2FsZU9yZGVyRGF0ZUNoYW5nZWQoKTsKICAgICAgaWYgKHRoaXMuY3VzdG9tZXIpIHsKICAgICAgICB2YXIgcGF5bWVudFRlcm0gPSB0aGlzLnNhbGVPcmRlci5wYXltZW50VGVybSB8fCB7fTsKICAgICAgICB2YXIgbmV0RHVlID0gcGF5bWVudFRlcm0ubmV0RHVlIHx8IDA7CiAgICAgICAgdmFyIHNvbWVEYXRlID0gbmV3IERhdGUodGhpcy5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKTsKICAgICAgICBzb21lRGF0ZS5zZXREYXRlKHNvbWVEYXRlLmdldERhdGUoKSArIHBhcnNlSW50KG5ldER1ZSkpOyAvL251bWJlciAgb2YgZGF5cyB0byBhZGQsIGUueC4gMTUgZGF5cwoKICAgICAgICB0aGlzLnNhbGVPcmRlci52YWxpZGl0eURhdGUgPSBzb21lRGF0ZS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7CiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJkdWVEYXRlIiwgdGhpcy5zYWxlT3JkZXIudmFsaWRpdHlEYXRlKTsKICAgICAgfQogICAgfSwKICAgIC8vbnVtYmVyCiAgICBudW1iZXJGb3JtYXQ6IGZ1bmN0aW9uIG51bWJlckZvcm1hdCh2YWx1ZSkgewogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy5zYWxlRm9ybUNvbnRlbnQuZGVjaW1hbCwnbmltb2wnKQogICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcodmFsdWUsICJuIi5jb25jYXQodGhpcy5zYWxlRm9ybUNvbnRlbnQuZGVjaW1hbCkpOyAvLyByZXR1cm4gdmFsdWUKICAgIH0sCiAgICAvLwogICAgbG9hZExlYWQ6IGZ1bmN0aW9uIGxvYWRMZWFkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHZhciBzdHJGaWx0ZXIgPSAiP3R5cGU9U2FsZSBMZWFkIjsKICAgICAgICAgICAgICAgICAgICBfdGhpczUubGVhZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBiaWxsaW5nSGFuZGxlci5saXN0KHN0ckZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmxlYWRzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRQYXltZW50VGVybTogZnVuY3Rpb24gbG9hZFBheW1lbnRUZXJtKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHBheW1lbnRUZXJtSGFuZGxlci5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnBheW1lbnRUZXJtcyA9IHJlcy5kYXRhLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNi5wYXltZW50VGVybXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LiRyb3V0ZS5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCB8fCBfdGhpczYuJHJvdXRlLnBhcmFtcy5pZCAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczYuc2FsZU9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuc2FsZU9yZGVyLnBheW1lbnRUZXJtID0gX3RoaXM2LnBheW1lbnRUZXJtc1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRQcmljZUxldmVsOiBmdW5jdGlvbiBsb2FkUHJpY2VMZXZlbCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RyRmlsdGVyID0gIj9uYXR1cmU9c2FsZSI7CiAgICAgICAgICAgICAgICAgICAgcHJpY2VMZXZlbEhhbmRsZXIuZ2V0KHN0ckZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcucHJpY2VMZXZlbCA9IHJlczsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3LnByaWNlTGV2ZWwubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3LiRyb3V0ZS5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCB8fCBfdGhpczcuJHJvdXRlLnBhcmFtcy5pZCAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczcuc2FsZU9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuc2FsZU9yZGVyLnByaWNlTGV2ZWwgPSBfdGhpczcucHJpY2VMZXZlbFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkVHJhbnNhY3Rpb25SYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlbW92ZUR1cGxpY2F0ZTogZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlKGFycmF5KSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoKTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihhcnJheSksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0uaWQpKSB7CiAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5pZCwgdHJ1ZSk7IC8vIHNldCBhbnkgdmFsdWUgdG8gTWFwCgogICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBhdXRvQ2FsY3VsYXRlRGlzY291bnQ6IGZ1bmN0aW9uIGF1dG9DYWxjdWxhdGVEaXNjb3VudChkaXNjb3VudEl0ZW0sIHN1YlRvdGFsKSB7CiAgICAgIGlmIChkaXNjb3VudEl0ZW0pIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coImRpc2NvdW50SXRlbSIsIGRpc2NvdW50SXRlbSwgc3ViVG90YWwpOwogICAgICAgIHZhciBuYXR1cmUgPSBkaXNjb3VudEl0ZW0ubmF0dXJlIHx8ICIiOwogICAgICAgIHZhciBhbW91bnQgPSBkaXNjb3VudEl0ZW0uYW1vdW50IHx8IDA7CgogICAgICAgIGlmIChuYXR1cmUgPT09ICJBbW91bnQiKSB7CiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChhbW91bnQpOwogICAgICAgIH0gZWxzZSBpZiAobmF0dXJlID09PSAiUGVyY2VudGFnZSIpIHsKICAgICAgICAgIHJldHVybiBzdWJUb3RhbCAqIChwYXJzZUZsb2F0KGFtb3VudCkgLyAxMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgIH0sCiAgICBhdXRvQ2FsY3VsYXRlVGF4OiBmdW5jdGlvbiBhdXRvQ2FsY3VsYXRlVGF4KHRheCwgYW1vdW50KSB7CiAgICAgIGlmICh0YXgpIHsKICAgICAgICB2YXIgZm9ybXVsYSA9IHRheC5mb3JtdWxhOwogICAgICAgIHZhciBpbkFtdCA9IGtlbmRvLnBhcnNlRmxvYXQoYW1vdW50KTsKICAgICAgICB2YXIgbkFtdCA9IGtlbmRvLnBhcnNlRmxvYXQoYW1vdW50KTsKICAgICAgICB2YXIgdGF4QmFzZSA9IGtlbmRvLnBhcnNlRmxvYXQodGF4LnRheEJhc2UpIC8gMTAwOwogICAgICAgIHZhciByYXRlID0ga2VuZG8ucGFyc2VGbG9hdCh0YXgucmF0ZSkgLyAxMDA7CiAgICAgICAgdmFyIHRvdGFsID0gZXZhbChmb3JtdWxhKTsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coaW5BbXQsIG5BbXQsIHRheEJhc2UsIHJhdGUsIGZvcm11bGEsIHRvdGFsKTsgLy8gd2luZG93LmNvbnNvbGUubG9nKGFtb3VudCkKCiAgICAgICAgcmV0dXJuIHRvdGFsOwogICAgICB9IC8vIHJldHVybiAwCgogICAgfSwKICAgIGF1dG9DYWxjdWxhdGVUYXhCeVR5cGU6IGZ1bmN0aW9uIGF1dG9DYWxjdWxhdGVUYXhCeVR5cGUodGF4KSB7CiAgICAgIC8vIHJldHVybiBieSBhIGtleQogICAgICB2YXIgZ3JvdXBBbGwgPSBmdW5jdGlvbiBncm91cEFsbChsaXN0KSB7CiAgICAgICAgcmV0dXJuIGxpc3QucmVkdWNlKGZ1bmN0aW9uICh0YXgsIGl0ZW0pIHsKICAgICAgICAgIHZhciB0YXhBbW91bnQgPSB0YXhbaXRlbS5uYW1lXSB8fCAwOwogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRheCwgX2RlZmluZVByb3BlcnR5KHt9LCBpdGVtLm5hbWUsIHRheEFtb3VudCArIHBhcnNlRmxvYXQoaXRlbS5hbW91bnQpKSk7CiAgICAgICAgfSwge30pOwogICAgICB9OwoKICAgICAgdGhpcy50YXhMaXN0VG90YWwgPSBncm91cEFsbCh0YXgpOyAvLyB3aW5kb3cuY29uc29sZS5sb2coJ25pbW9sJywgZ3JvdXBBbGwodGF4KSkKICAgICAgLy8gdGhpcy4KICAgIH0sCiAgICBkYXRhU291cmNlQ2hhbmdlZDogZnVuY3Rpb24gZGF0YVNvdXJjZUNoYW5nZWQoZSkgewogICAgICBpZiAoZS5maWVsZCkgewogICAgICAgIHZhciBkYXRhUm93ID0gZS5pdGVtc1swXSwKICAgICAgICAgICAgYnVvbSA9IHt9LAogICAgICAgICAgICBjb252ZXJzaW9uUmF0ZSA9IDEsCiAgICAgICAgICAgIHdhYyA9IDAsCiAgICAgICAgICAgIHFvaCA9IDAsCiAgICAgICAgICAgIGFtb3VudCA9IDAsCiAgICAgICAgICAgIHhBbW91bnQgPSAwOwoKICAgICAgICBzd2l0Y2ggKGUuZmllbGQpIHsKICAgICAgICAgIGNhc2UgIml0ZW0iOgogICAgICAgICAgICAvLyB0aGlzLmF0dHJpYnV0ZV8gPSB0aGlzLmF0dHJpYnV0ZXMuZmlsdGVyKG0gPT4gbS50eXBlLmlkID09PSBkYXRhUm93LnZhcmlhbnQuaWQpCiAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJkZXNjcmlwdGlvbiIsIGRhdGFSb3cuaXRlbS5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgIGJ1b20gPSBkYXRhUm93Lml0ZW0udW9tIHx8IHt9OwogICAgICAgICAgICBkYXRhUm93LnNldCgiYnVvbSIsIGJ1b20pOyAvLyB0aGlzLml0ZW1DaGFuZ2UoZGF0YVJvdykKCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgInVvbSI6CiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpY2VMZXZlbENoYW5nZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGJ1b20gPSBkYXRhUm93LnVvbS5idW9tIHx8IHt9OwogICAgICAgICAgICAgICAgICBxb2ggPSBkYXRhUm93LnVvbS5xb2ggfHwgMDsKICAgICAgICAgICAgICAgICAgY29udmVyc2lvblJhdGUgPSBkYXRhUm93LnVvbS5jb252ZXJzaW9uUmF0ZSB8fCAxOwogICAgICAgICAgICAgICAgICB3YWMgPSBkYXRhUm93LnVvbS53YWMgfHwgMDsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImJ1b20iLCBidW9tKTsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoIndhYyIsIHdhYyk7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJxb2giLCBxb2gpOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiY29udmVyc2lvblJhdGUiLCBwYXJzZUZsb2F0KGNvbnZlcnNpb25SYXRlKSk7CgogICAgICAgICAgICAgICAgICBpZiAoZGF0YVJvdy51b20pIHsKICAgICAgICAgICAgICAgICAgICBhbW91bnQgPSBwYXJzZUZsb2F0KGRhdGFSb3cudW9tLnByaWNlKSAqIHBhcnNlRmxvYXQoZGF0YVJvdy5xdHkpOwogICAgICAgICAgICAgICAgICAgIHhBbW91bnQgPSBhbW91bnQgKiBwYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJwcmljZSIsIHBhcnNlRmxvYXQoZGF0YVJvdy51b20ucHJpY2UpKTsKICAgICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZXhjaGFuZ2VBbW91bnQiLCB4QW1vdW50KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhbW91bnQgPSBwYXJzZUZsb2F0KGRhdGFSb3cucHJpY2UpICogcGFyc2VGbG9hdChkYXRhUm93LnF0eSk7CiAgICAgICAgICAgICAgICAgICAgeEFtb3VudCA9IGFtb3VudCAqIHBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoInByaWNlIiwgcGFyc2VGbG9hdChkYXRhUm93LnByaWNlKSk7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImFtb3VudCIsIGFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImV4Y2hhbmdlQW1vdW50IiwgeEFtb3VudCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYnVvbSIsIHt9KTsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImNvbnZlcnNpb25SYXRlIiwgMSk7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJwcmljZSIsIDApOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgicW9oIiwgMCk7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJ3YWMiLCAwKTsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImFtb3VudCIsIDApOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZXhjaGFuZ2VBbW91bnQiLCAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChfdW51c2VkKSB7CiAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgicHJpY2UiLCAwKTsKICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJhbW91bnQiLCAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgInByaWNlIjoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBhbW91bnQgPSBwYXJzZUZsb2F0KGRhdGFSb3cucHJpY2UpICogcGFyc2VGbG9hdChkYXRhUm93LnF0eSk7CiAgICAgICAgICAgICAgeEFtb3VudCA9IGFtb3VudCAqIHBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoInByaWNlIiwgcGFyc2VGbG9hdChkYXRhUm93LnByaWNlKSk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImFtb3VudCIsIGFtb3VudCk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImV4Y2hhbmdlQW1vdW50IiwgeEFtb3VudCk7IC8vIHdpbmRvdy5jb25zb2xlLmxvZygncHJpY2UnLGRhdGFSb3cucHJpY2UpCiAgICAgICAgICAgIH0gY2F0Y2ggKF91bnVzZWQyKSB7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoInByaWNlIiwgMCk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImFtb3VudCIsIDApOwogICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJleGNoYW5nZUFtb3VudCIsIDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJxdHkiOgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGFtb3VudCA9IHBhcnNlRmxvYXQoZGF0YVJvdy5wcmljZSkgKiBwYXJzZUZsb2F0KGRhdGFSb3cucXR5KTsKICAgICAgICAgICAgICB4QW1vdW50ID0gYW1vdW50ICogcGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgicHJpY2UiLCBwYXJzZUZsb2F0KGRhdGFSb3cucHJpY2UpKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgYW1vdW50KTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZXhjaGFuZ2VBbW91bnQiLCB4QW1vdW50KTsKICAgICAgICAgICAgfSBjYXRjaCAoX3VudXNlZDMpIHsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgicHJpY2UiLCAwKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgMCk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImV4Y2hhbmdlQW1vdW50IiwgMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgIm90aGVyVGF4IjoKICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCItLSIsIGRhdGFSb3cpCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKGUuZmllbGQpIHsKICAgICAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGF1dG9DYWxjdWxhdGU6IGZ1bmN0aW9uIGF1dG9DYWxjdWxhdGUoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIGRzID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICBzdWJUb3RhbCA9IDAsCiAgICAgICAgICB0b3RhbFRheCA9IDAsCiAgICAgICAgICBkaXNjb3VudFRvdGFsID0gMCwKICAgICAgICAgIHNwVGF4ID0gMCwKICAgICAgICAgIHBsdGF4ID0gMCwKICAgICAgICAgIG90aGVyVGF4ID0gMCwKICAgICAgICAgIHZhdFRheCA9IDAsCiAgICAgICAgICBkaXNjb3VudEludm9pY2UgPSAwLAogICAgICAgICAgdGF4TGlzdCA9IFtdLAogICAgICAgICAgZGlzY291bnRJdGVtID0gW10sCiAgICAgICAgICBzYWxlVW5pdCA9IFtdLAogICAgICAgICAgaW5jbHVzaXZlVGF4ID0gMCwKICAgICAgICAgIGl0ZW1TdWJ0b3RhbCA9IDAsCiAgICAgICAgICB0eG5JdG1TdWJ0b3RhbCA9IDAsCiAgICAgICAgICBzZXJ2aWNlU3VidG90YWwgPSAwLAogICAgICAgICAgaXRlbURpc2NvdW50ID0gMCwKICAgICAgICAgIHNlcnZpY2VEaXNjb3VudCA9IDAsCiAgICAgICAgICB0eG5EaXNjb3VudCA9IDA7CiAgICAgIHZhciByb3dzID0gZHMuZGF0YSgpLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG0uYW1vdW50KSA+IDA7CiAgICAgIH0pOwogICAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIG1vZGlmaWVyUHJpY2UgPSAwOwoKICAgICAgICBpZiAodmFsdWUubW9kaWZpZXIpIHsKICAgICAgICAgIG1vZGlmaWVyUHJpY2UgPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLm1vZGlmaWVyLnByaWNlKTsKICAgICAgICB9IC8vIHN1YlRvdGFsICs9IChrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmFtb3VudCkgKyBtb2RpZmllclByaWNlKQoKCiAgICAgICAgdmFyIGRpc2NvdW50ID0gMDsKCiAgICAgICAgaWYgKHZhbHVlLmRpc2NvdW50SXRlbSkgewogICAgICAgICAgdmFyIHN1YlRvID0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5wcmljZSkgKiBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnF0eSk7CiAgICAgICAgICBkaXNjb3VudCA9IF90aGlzOC5hdXRvQ2FsY3VsYXRlRGlzY291bnQodmFsdWUuZGlzY291bnRJdGVtLCBzdWJUbyk7CiAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coImRpc2NvdW50IGl0ZW0iLCBkaXNjb3VudCwgIi0tIiwgdmFsdWUuZGlzY291bnRJdGVtKTsKICAgICAgICAgIHZhbHVlWyJkaXNjb3VudEFtb3VudCJdID0gZGlzY291bnQ7CiAgICAgICAgICB2YWx1ZVsiZGlzY291bnRFeGNoYW5nZUFtb3VudCJdID0gZGlzY291bnQgKiBrZW5kby5wYXJzZUZsb2F0KF90aGlzOC5zYWxlT3JkZXIudHhuUmF0ZSk7CgogICAgICAgICAgaWYgKHZhbHVlLmRpc2NvdW50SXRlbS5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICBkaXNjb3VudEl0ZW0ucHVzaCh2YWx1ZS5kaXNjb3VudEl0ZW0pOwogICAgICAgICAgfQoKICAgICAgICAgIGRpc2NvdW50VG90YWwgKz0gZGlzY291bnQ7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsdWUuc2FsZVVuaXQpIHsKICAgICAgICAgIGlmICh2YWx1ZS5zYWxlVW5pdC5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICBzYWxlVW5pdC5wdXNoKHZhbHVlLnNhbGVVbml0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh2YWx1ZS5zcGVjaWZpY1RheCkgewogICAgICAgICAgc3BUYXggPSBfdGhpczguYXV0b0NhbGN1bGF0ZVRheCh2YWx1ZS5zcGVjaWZpY1RheCwga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpIC0ga2VuZG8ucGFyc2VGbG9hdChkaXNjb3VudCkpOyAvLyB3aW5kb3cuY29uc29sZS5sb2coJ3NwICcsIGRpc2NvdW50KQoKICAgICAgICAgIHNwVGF4ID0ga2VuZG8ucGFyc2VGbG9hdChzcFRheCkgPyBrZW5kby5wYXJzZUZsb2F0KHNwVGF4KSA6IDA7CiAgICAgICAgICB2YWx1ZVsic3BlY2lmaWNUYXhBbW91bnQiXSA9IHNwVGF4OwogICAgICAgICAgdmFsdWVbInNwZWNpZmljVGF4RXhjaGFuZ2VBbW91bnQiXSA9IHNwVGF4ICoga2VuZG8ucGFyc2VGbG9hdChfdGhpczguc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICAgICAgdmFyIHRheCA9IHZhbHVlLnNwZWNpZmljVGF4OwogICAgICAgICAgdmFyIGJhc2VBbW91bnQgPSB0YXguYmFzZUFtb3VudDsKCiAgICAgICAgICBpZiAoYmFzZUFtb3VudCkgewogICAgICAgICAgICBpZiAoYmFzZUFtb3VudC50b0xvd2VyQ2FzZSgpID09PSAiaW5jbHVzaXZlIikgewogICAgICAgICAgICAgIGluY2x1c2l2ZVRheCArPSBzcFRheDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5zcGVjaWZpY1RheC5oYXNPd25Qcm9wZXJ0eSgidGF4VHlwZSIpKSB7CiAgICAgICAgICAgIHRheExpc3QucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogdmFsdWUuc3BlY2lmaWNUYXgudGF4VHlwZS5uYW1lLAogICAgICAgICAgICAgIGFtb3VudDogc3BUYXgsCiAgICAgICAgICAgICAgaWQ6IHZhbHVlLnNwZWNpZmljVGF4LnRheFR5cGUuaWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsdWUucHVibGljTGlnaHRpbmdUYXgpIHsKICAgICAgICAgIHBsdGF4ID0gX3RoaXM4LmF1dG9DYWxjdWxhdGVUYXgodmFsdWUucHVibGljTGlnaHRpbmdUYXgsIGtlbmRvLnBhcnNlRmxvYXQodmFsdWUuYW1vdW50KSAtIGtlbmRvLnBhcnNlRmxvYXQoZGlzY291bnQpKTsKICAgICAgICAgIHBsdGF4ID0ga2VuZG8ucGFyc2VGbG9hdChwbHRheCkgPyBrZW5kby5wYXJzZUZsb2F0KHBsdGF4KSA6IDA7CiAgICAgICAgICB2YWx1ZVsicHVibGljTGlnaHRpbmdUYXhBbW91bnQiXSA9IHBsdGF4OwogICAgICAgICAgdmFsdWVbInB1YmxpY0xpZ2h0aW5nVGF4RXhjaGFuZ2VBbW91bnQiXSA9IHBsdGF4ICoga2VuZG8ucGFyc2VGbG9hdChfdGhpczguc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICAgICAgdmFyIF90YXggPSB2YWx1ZS5wdWJsaWNMaWdodGluZ1RheDsKICAgICAgICAgIHZhciBfYmFzZUFtb3VudCA9IF90YXguYmFzZUFtb3VudDsKCiAgICAgICAgICBpZiAoX2Jhc2VBbW91bnQpIHsKICAgICAgICAgICAgaWYgKF9iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09ICJpbmNsdXNpdmUiKSB7CiAgICAgICAgICAgICAgaW5jbHVzaXZlVGF4ICs9IHBsdGF4OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZhbHVlLnB1YmxpY0xpZ2h0aW5nVGF4Lmhhc093blByb3BlcnR5KCJ0YXhUeXBlIikpIHsKICAgICAgICAgICAgdGF4TGlzdC5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5wdWJsaWNMaWdodGluZ1RheC50YXhUeXBlLm5hbWUsCiAgICAgICAgICAgICAgYW1vdW50OiBwbHRheCwKICAgICAgICAgICAgICBpZDogdmFsdWUucHVibGljTGlnaHRpbmdUYXgudGF4VHlwZS5pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh2YWx1ZS5vdGhlclRheCkgewogICAgICAgICAgb3RoZXJUYXggPSBfdGhpczguYXV0b0NhbGN1bGF0ZVRheCh2YWx1ZS5vdGhlclRheCwga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpIC0ga2VuZG8ucGFyc2VGbG9hdChkaXNjb3VudCkpOwogICAgICAgICAgb3RoZXJUYXggPSBrZW5kby5wYXJzZUZsb2F0KG90aGVyVGF4KSA/IGtlbmRvLnBhcnNlRmxvYXQob3RoZXJUYXgpIDogMDsKICAgICAgICAgIHZhbHVlWyJvdGhlclRheEFtb3VudCJdID0gb3RoZXJUYXg7CiAgICAgICAgICB2YWx1ZVsib3RoZXJUYXhFeGNoYW5nZUFtb3VudCJdID0gb3RoZXJUYXggKiBrZW5kby5wYXJzZUZsb2F0KF90aGlzOC5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgICAgICB2YXIgX3RheDIgPSB2YWx1ZS5vdGhlclRheDsKICAgICAgICAgIHZhciBfYmFzZUFtb3VudDIgPSBfdGF4Mi5iYXNlQW1vdW50OwoKICAgICAgICAgIGlmIChfYmFzZUFtb3VudDIpIHsKICAgICAgICAgICAgaWYgKF9iYXNlQW1vdW50Mi50b0xvd2VyQ2FzZSgpID09PSAiaW5jbHVzaXZlIikgewogICAgICAgICAgICAgIGluY2x1c2l2ZVRheCArPSBvdGhlclRheDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5vdGhlclRheC5oYXNPd25Qcm9wZXJ0eSgidGF4VHlwZSIpKSB7CiAgICAgICAgICAgIHRheExpc3QucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogdmFsdWUub3RoZXJUYXgudGF4VHlwZS5uYW1lLAogICAgICAgICAgICAgIGFtb3VudDogb3RoZXJUYXgsCiAgICAgICAgICAgICAgaWQ6IHZhbHVlLm90aGVyVGF4LnRheFR5cGUuaWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsdWUudmF0VGF4KSB7CiAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ1ZhdCBUYXgnLCB2YWx1ZS52YXRUYXgpCiAgICAgICAgICB2YXIgYW10ID0ga2VuZG8ucGFyc2VGbG9hdChzcFRheCA/IHNwVGF4IDogMCkgKyBrZW5kby5wYXJzZUZsb2F0KHBsdGF4ID8gcGx0YXggOiAwKSArIGtlbmRvLnBhcnNlRmxvYXQob3RoZXJUYXggPyBvdGhlclRheCA6IDApICsgKGtlbmRvLnBhcnNlRmxvYXQodmFsdWUuYW1vdW50ID8gdmFsdWUuYW1vdW50IDogMCkgLSAoZGlzY291bnQgPyBkaXNjb3VudCA6IDApKTsKICAgICAgICAgIHZhdFRheCA9IF90aGlzOC5hdXRvQ2FsY3VsYXRlVGF4KHZhbHVlLnZhdFRheCwgYW10KTsKICAgICAgICAgIHZhdFRheCA9IGtlbmRvLnBhcnNlRmxvYXQodmF0VGF4KSA/IGtlbmRvLnBhcnNlRmxvYXQodmF0VGF4KSA6IDA7CiAgICAgICAgICB2YWx1ZVsidmF0VGF4QW1vdW50Il0gPSB2YXRUYXg7CiAgICAgICAgICB2YWx1ZVsidmF0VGF4RXhjaGFuZ2VBbW91bnQiXSA9IHZhdFRheCAqIGtlbmRvLnBhcnNlRmxvYXQoX3RoaXM4LnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgICAgIHZhciBfdGF4MyA9IHZhbHVlLnZhdFRheDsKICAgICAgICAgIHZhciBfYmFzZUFtb3VudDMgPSBfdGF4My5iYXNlQW1vdW50OwoKICAgICAgICAgIGlmIChfYmFzZUFtb3VudDMpIHsKICAgICAgICAgICAgaWYgKF9iYXNlQW1vdW50My50b0xvd2VyQ2FzZSgpID09PSAiaW5jbHVzaXZlIikgewogICAgICAgICAgICAgIGluY2x1c2l2ZVRheCArPSB2YXRUYXg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUudmF0VGF4Lmhhc093blByb3BlcnR5KCJ0YXhUeXBlIikpIHsKICAgICAgICAgICAgdGF4TGlzdC5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS52YXRUYXgudGF4VHlwZS5uYW1lLAogICAgICAgICAgICAgIGFtb3VudDogdmF0VGF4LAogICAgICAgICAgICAgIGlkOiB2YWx1ZS52YXRUYXgudGF4VHlwZS5pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRvdGFsVGF4ICs9IGtlbmRvLnBhcnNlRmxvYXQoc3BUYXggPyBzcFRheCA6IDApICsga2VuZG8ucGFyc2VGbG9hdChwbHRheCA/IHBsdGF4IDogMCkgKyBrZW5kby5wYXJzZUZsb2F0KG90aGVyVGF4ID8gb3RoZXJUYXggOiAwKSArIGtlbmRvLnBhcnNlRmxvYXQodmF0VGF4ID8gdmF0VGF4IDogMCk7CiAgICAgICAgc3ViVG90YWwgKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpICsgbW9kaWZpZXJQcmljZSAtIGluY2x1c2l2ZVRheDsKICAgICAgICB2YXIgaXRlbSA9IHZhbHVlLml0ZW07CiAgICAgICAgdmFyIGl0bVR5cGUgPSBpdGVtLnR5cGUgfHwgIiI7CgogICAgICAgIGlmIChpdG1UeXBlID09PSAiVmFyaWFudCIpIHsKICAgICAgICAgIGl0ZW1TdWJ0b3RhbCArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnByaWNlKSAqIGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucXR5KTsKICAgICAgICAgIGl0ZW1EaXNjb3VudCArPSBrZW5kby5wYXJzZUZsb2F0KGRpc2NvdW50KTsKICAgICAgICB9IGVsc2UgaWYgKGl0bVR5cGUgPT09ICJTZXJ2aWNlIikgewogICAgICAgICAgc2VydmljZVN1YnRvdGFsICs9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucHJpY2UpICoga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5xdHkpOwogICAgICAgICAgc2VydmljZURpc2NvdW50ICs9IGtlbmRvLnBhcnNlRmxvYXQoZGlzY291bnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0eG5JdG1TdWJ0b3RhbCArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnByaWNlKSAqIGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucXR5KTsKICAgICAgICAgIHR4bkRpc2NvdW50ICs9IGtlbmRvLnBhcnNlRmxvYXQoZGlzY291bnQpOwogICAgICAgIH0gLy9pbmNsdWRlIFRheCBBbW91bnQKCgogICAgICAgIHZhciBhbW91bnROb2Rpc2NvdW50ID0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5wcmljZSkgKiBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnF0eSkgLSBkaXNjb3VudDsKICAgICAgICB2YXIgaW5jbHVkZVRheEFtb3VudCA9IGFtb3VudE5vZGlzY291bnQgKyB2YXRUYXggKyBwbHRheCArIHNwVGF4ICsgb3RoZXJUYXg7CiAgICAgICAgdmFsdWVbImluY2x1ZGVUYXhBbW91bnQiXSA9IGluY2x1ZGVUYXhBbW91bnQ7CiAgICAgICAgdmFsdWVbImluY2x1ZGVUYXhFeGNoYW5nZUFtb3VudCJdID0gaW5jbHVkZVRheEFtb3VudCAqIGtlbmRvLnBhcnNlRmxvYXQoX3RoaXM4LnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLml0ZW1TdWJ0b3RhbCA9IGl0ZW1TdWJ0b3RhbDsKICAgICAgdGhpcy5zYWxlT3JkZXIuZXhjaGFuZ2VJdGVtU3VidG90YWwgPSBpdGVtU3VidG90YWwgKiBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICB0aGlzLnNhbGVPcmRlci5zZXJ2aWNlU3VidG90YWwgPSBzZXJ2aWNlU3VidG90YWw7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmV4Y2hhbmdlU2VydmljZVN1YnRvdGFsID0gc2VydmljZVN1YnRvdGFsICoga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgdGhpcy5zYWxlT3JkZXIudHhuSXRtU3VidG90YWwgPSB0eG5JdG1TdWJ0b3RhbDsKICAgICAgdGhpcy5zYWxlT3JkZXIuZXhjaGFuZ2VUeG5JdG1TdWJ0b3RhbCA9IHR4bkl0bVN1YnRvdGFsICoga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgdGhpcy5zYWxlT3JkZXIuaXRlbURpc2NvdW50ID0gaXRlbURpc2NvdW50OwogICAgICB0aGlzLnNhbGVPcmRlci5leGNoYW5nZUl0ZW1EaXNjb3VudCA9IGl0ZW1EaXNjb3VudCAqIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLnNlcnZpY2VEaXNjb3VudCA9IHNlcnZpY2VEaXNjb3VudDsKICAgICAgdGhpcy5zYWxlT3JkZXIuZXhjaGFuZ2VTZXJ2aWNlRGlzY291bnQgPSBzZXJ2aWNlRGlzY291bnQgKiBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICB0aGlzLnNhbGVPcmRlci50eG5JdG1EaXNjb3VudCA9IHR4bkRpc2NvdW50OwogICAgICB0aGlzLnNhbGVPcmRlci5leGNoYW5nZVR4bkl0bURpc2NvdW50ID0gdHhuRGlzY291bnQgKiBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICBkaXNjb3VudFRvdGFsID0gZGlzY291bnRUb3RhbCA/IGRpc2NvdW50VG90YWwgOiAwOyAvLyB3aW5kb3cuY29uc29sZS5sb2coc3BUYXgsIHBsdGF4LCBvdGhlclRheCwgdmF0VGF4KQoKICAgICAgdmFyIHRvdGFsID0ga2VuZG8ucGFyc2VGbG9hdChzdWJUb3RhbCkgLSBrZW5kby5wYXJzZUZsb2F0KGRpc2NvdW50VG90YWwpICsga2VuZG8ucGFyc2VGbG9hdCh0b3RhbFRheCk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLnN1YlRvdGFsID0gc3ViVG90YWw7CiAgICAgIHRoaXMuc2FsZU9yZGVyLnRvdGFsVGF4QW1vdW50ID0ga2VuZG8ucGFyc2VGbG9hdCh0b3RhbFRheCk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmRpc2NvdW50VG90YWwgPSBrZW5kby5wYXJzZUZsb2F0KGRpc2NvdW50VG90YWwpOwoKICAgICAgaWYgKHRoaXMuc2FsZU9yZGVyLnNwZWNpZmljRGlzY291bnRJdGVtKSB7CiAgICAgICAgZGlzY291bnRJbnZvaWNlID0gdGhpcy5hdXRvQ2FsY3VsYXRlRGlzY291bnQodGhpcy5zYWxlT3JkZXIuc3BlY2lmaWNEaXNjb3VudEl0ZW0sIGtlbmRvLnBhcnNlRmxvYXQoc3ViVG90YWwpKTsKICAgICAgICBkaXNjb3VudEludm9pY2UgPSBkaXNjb3VudEludm9pY2UgPyBkaXNjb3VudEludm9pY2UgOiAwOwogICAgICB9IC8vIHRoaXMub25PdGhlckNoYXJnZUNoYW5nZSgpCgoKICAgICAgdGhpcy5zYWxlT3JkZXIudG90YWwgPSBrZW5kby5wYXJzZUZsb2F0KHRvdGFsKSAtIGRpc2NvdW50SW52b2ljZSArIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIub3RoZXJDaGFyZ2VBbW91bnQpOwogICAgICB0aGlzLnNhbGVPcmRlci5leGNoYW5nZUFtb3VudCA9IGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudG90YWwpICoga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlVGF4QnlUeXBlKHRheExpc3QpOwogICAgICB0aGlzLmN1c3RvbWVyRGlzY291bnRJdGVtID0gdGhpcy5yZW1vdmVEdXBsaWNhdGUoZGlzY291bnRJdGVtKTsKICAgICAgdGhpcy5jdXN0b21lclNhbGVVbml0ID0gdGhpcy5yZW1vdmVEdXBsaWNhdGUoc2FsZVVuaXQpOyAvLyB3aW5kb3cuY29uc29sZS5sb2coJ2Rpc2NvdW50ICcsIHRoaXMuY3VzdG9tZXJEaXNjb3VudEl0ZW0pCiAgICB9LAogICAgcm93TnVtYmVyVG1wbDogZnVuY3Rpb24gcm93TnVtYmVyVG1wbChkYXRhSXRlbSkgewogICAgICB2YXIgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgIGluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CiAgICAgIHJldHVybiBpbmRleCArIDE7CiAgICB9LAogICAgbG9hZFNhbGVGb3JtQ29udGVudDogZnVuY3Rpb24gbG9hZFNhbGVGb3JtQ29udGVudCgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBzYWxlRm9ybUNvbnRlbnRIYW5kbGVyLmxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5zYWxlRm9ybUNvbnRlbnQgPSBkYXRhWzBdOyAvLyB3aW5kb3cuY29uc29sZS5sb2coZGF0YVswXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdmF0VGVtcGxhdGU6IGZ1bmN0aW9uIHZhdFRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIHZhciB2YXQgPSBkYXRhSXRlbS52YXRUYXg7CgogICAgICBpZiAodmF0KSB7CiAgICAgICAgcmV0dXJuICI8c3Bhbj4iLmNvbmNhdCh2YXQuZGVmYXVsdFRheCA/IHZhdC5kZWZhdWx0VGF4IDogIiIsICI8L3NwYW4+Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgaXRlbVRlbXBsYXRlOiBmdW5jdGlvbiBpdGVtVGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgdmFyIGl0ZW0gPSBkYXRhSXRlbS5pdGVtOwoKICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICByZXR1cm4gIjxzcGFuPiIuY29uY2F0KGl0ZW0ubmFtZSA/IGl0ZW0ubmFtZSA6ICIiLCAiPC9zcGFuPiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIFVPTVRlbXBsYXRlOiBmdW5jdGlvbiBVT01UZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICB2YXIgdW9tID0gZGF0YUl0ZW0udW9tOwoKICAgICAgaWYgKHVvbSkgewogICAgICAgIHJldHVybiAiPHNwYW4+Ii5jb25jYXQodW9tLnVvbSA/IHVvbS51b20ubmFtZSA6ICIiLCAiPC9zcGFuPiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIHNhbGVVbml0VGVtcGxhdGU6IGZ1bmN0aW9uIHNhbGVVbml0VGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgdmFyIHNhbGVVbml0ID0gZGF0YUl0ZW0uc2FsZVVuaXQ7CgogICAgICBpZiAoc2FsZVVuaXQpIHsKICAgICAgICByZXR1cm4gIjxzcGFuPiIuY29uY2F0KHNhbGVVbml0Lm5hbWUgPyBzYWxlVW5pdC5uYW1lIDogIiIsICI8L3NwYW4+Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgZGlzY291bnRJdGVtVGVtcGxhdGU6IGZ1bmN0aW9uIGRpc2NvdW50SXRlbVRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIHZhciBkaXNjb3VudEl0ZW0gPSBkYXRhSXRlbS5kaXNjb3VudEl0ZW07CgogICAgICBpZiAoZGlzY291bnRJdGVtKSB7CiAgICAgICAgcmV0dXJuICI8c3Bhbj4iLmNvbmNhdChkaXNjb3VudEl0ZW0uY29kZSA/IGRpc2NvdW50SXRlbS5jb2RlIDogIiIsICIgLSAiKS5jb25jYXQoZGlzY291bnRJdGVtLm5hbWUgPyBkaXNjb3VudEl0ZW0ubmFtZSA6ICIiLCAiPC9zcGFuPiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIFNlcnZpY2VEYXRlRWRpdG9yOiBmdW5jdGlvbiBTZXJ2aWNlRGF0ZUVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgcmVxdWlyZWQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0RhdGVQaWNrZXIoKTsgLy8gbGV0IGRzID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCkKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKGRzLmRhdGEoKSkKICAgICAgLy8gLy8gY29uc3QgZGF0ZVN0cmluZyA9IGtlbmRvLnRvU3RyaW5nKChuZXcgRGF0ZShvcHRpb25zLm1vZGVsLml0ZW1zLnNlcnZpY2VEYXRlKSksIHRoaXMuaXRlbUxpbmUuZGF0ZUZvcm1hdCkKICAgICAgLy8gLy8gY29uc3QgZGF0ZVN0cmluZyA9IGtlbmRvLnRvU3RyaW5nKG9wdGlvbnMubW9kZWwuaXRlbXMuc2VydmljZURhdGUpCiAgICAgIC8vIGNvbnN0ICRpbnB1dCA9ICQoIjxpbnB1dCB2YWx1ZT0iICsgb3B0aW9ucy5tb2RlbC5zZXJ2aWNlRGF0ZSArICIgLz4iKS5hcHBlbmRUbyhjb250YWluZXIpCiAgICAgIC8vICRpbnB1dC5rZW5kb0RhdGVQaWNrZXIoKQogICAgICAvLyAvLyAkaW5wdXQuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAvLyAvLyBvcHRpb25zLm1vZGVsLml0ZW1zLnNlcnZpY2VEYXRlID0gZGF0ZVN0cmluZwogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJGlucHV0KQogICAgfSwKICAgIFNlcnZpY2VEYXRlVG9FZGl0b3I6IGZ1bmN0aW9uIFNlcnZpY2VEYXRlVG9FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IHJlcXVpcmVkIG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9EYXRlUGlja2VyKCk7CiAgICB9LAogICAgSXRlbURyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBJdGVtRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgIGF1dG9CaW5kOiB0cnVlLAogICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICBmaWx0ZXI6ICJjb250YWlucyIsCiAgICAgICAgZGF0YVRleHRGaWVsZDogIm5hbWUiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgIGhlYWRlclRlbXBsYXRlOiAnPGRpdiBjbGFzcz0iZHJvcGRvd24taGVhZGVyIGstd2lkZ2V0IGstaGVhZGVyIj4nICsgIjxzcGFuPkl0ZW1zIDwvc3Bhbj4iICsgIjxzcGFuPjwvc3Bhbj4iICsgIjwvZGl2PiIsCiAgICAgICAgdGVtcGxhdGU6ICI8c3Bhbj4jPW5hbWUjPC9zcGFuPiIsCiAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICBzZXJ2ZXJGaWx0ZXJpbmc6IHRydWUsCiAgICAgICAgICB0cmFuc3BvcnQ6IHsKICAgICAgICAgICAgcmVhZDogewogICAgICAgICAgICAgIHVybDogcHJvZHVjdFZhcmlhbnRIYW5kbGVyLml0ZW1TZWFyY2hVUkwoIj9wbElkPSIgKyB0aGlzLnNhbGVPcmRlci5wcmljZUxldmVsLmlkKQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iCiAgICAgICAgICB9LAogICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICBpZDogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBza3U6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG90YWw6IGZ1bmN0aW9uIHRvdGFsKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gZGF0YTogdGhpcy52YXJpYW50cwoKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBVT01Ecm9wRG93bkVkaXRvcjogZnVuY3Rpb24gVU9NRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgIGF1dG9CaW5kOiB0cnVlLAogICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICBmaWx0ZXI6ICJzdGFydHN3aXRoIiwKICAgICAgICBkYXRhVGV4dEZpZWxkOiAidW9tLm5hbWUiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAidW9tLmlkIiwKICAgICAgICBjYXNjYWRlRnJvbTogIml0ZW0iLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz11b20ubmFtZSB8fCBgTm8gUHJpY2UgTGV2ZWxgIzwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgc2VydmVyRmlsdGVyaW5nOiB0cnVlLAogICAgICAgICAgdHJhbnNwb3J0OiB7CiAgICAgICAgICAgIHJlYWQ6IHsKICAgICAgICAgICAgICAvLyB1cmw6IHVvbVByaWNlSGFuZGxlci5nZXRVUkwob3B0aW9ucy5tb2RlbC5pdGVtLmlkLCB0aGlzLnNhbGVPcmRlci5wcmljZUxldmVsLmlkKSwKICAgICAgICAgICAgICB1cmw6IHVvbVByaWNlSGFuZGxlci51b21QcmljZUJ5UHJpY2VMZXZlbFVSTCgiaWQ9IiArIG9wdGlvbnMubW9kZWwuaXRlbS5pZCArICImcGxJZD0iICsgdGhpcy5zYWxlT3JkZXIucHJpY2VMZXZlbC5pZCArICImZGF0ZT0iICsgdGhpcy5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iCiAgICAgICAgICB9LAogICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICBpZDogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSAvLyBuYW1lOiB7dHlwZTogInN0cmluZyJ9LAogICAgICAgICAgICAgICAgLy8gc2t1OiB7dHlwZTogInN0cmluZyJ9LAoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG90YWw6IGZ1bmN0aW9uIHRvdGFsKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gZGF0YTogdGhpcy52YXJpYW50cwoKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBEaXNjb3VudEl0ZW1Ecm9wRG93bkVkaXRvcjogZnVuY3Rpb24gRGlzY291bnRJdGVtRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgIGF1dG9CaW5kOiB0cnVlLAogICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICBmaWx0ZXI6ICJzdGFydHN3aXRoIiwKICAgICAgICBkYXRhVGV4dEZpZWxkOiAibmFtZSIsCiAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICAgICAgY2FzY2FkZUZyb206ICJpdGVtIiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9Y29kZSMgLSAjPW5hbWUjPC9zcGFuPiIsCiAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICBzZXJ2ZXJGaWx0ZXJpbmc6IHRydWUsCiAgICAgICAgICB0cmFuc3BvcnQ6IHsKICAgICAgICAgICAgcmVhZDogewogICAgICAgICAgICAgIHVybDogZGlzY291bnRJdGVtSGFuZGxlci5nZXRVUkwoRElTQ09VTlRfVFlQRSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIgogICAgICAgICAgfSwKICAgICAgICAgIHNjaGVtYTogewogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgIGlkOiAiaWQiLAogICAgICAgICAgICAgIGZpZWxkczogewogICAgICAgICAgICAgICAgaWQ6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0gLy8gbmFtZToge3R5cGU6ICJzdHJpbmcifSwKICAgICAgICAgICAgICAgIC8vIHNrdToge3R5cGU6ICJzdHJpbmcifSwKCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvdGFsOiBmdW5jdGlvbiB0b3RhbChyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgU3BlY2lmaWNUYXhEcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gU3BlY2lmaWNUYXhEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJkZWZhdWx0VGF4IiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9ZGVmYXVsdFRheCM8L3NwYW4+IiwKICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIGRhdGE6IHRoaXMuc3BlY2lmaWNUYXguZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLm1vZGVsLmhhc093blByb3BlcnR5KCJ2YXRUYXgiKSkgewogICAgICAgICAgICAgIHZhciB2YXQgPSBvcHRpb25zLm1vZGVsLnZhdFRheDsKCiAgICAgICAgICAgICAgaWYgKHZhdCkgewogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwudmF0VGF4ICE9PSBudWxsIHx8IG9wdGlvbnMubW9kZWwudmF0VGF4ICE9PSAibnVsbCIpIHsKICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwudmF0VGF4LmJhc2VBbW91bnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09IG9wdGlvbnMubW9kZWwudmF0VGF4LmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgUHVibGljTGlnaHRpbmdUYXhEcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gUHVibGljTGlnaHRpbmdUYXhEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJkZWZhdWx0VGF4IiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9ZGVmYXVsdFRheCM8L3NwYW4+IiwKICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIGRhdGE6IHRoaXMucHVibGljTGlnaHRpbmdUYXguZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLm1vZGVsLmhhc093blByb3BlcnR5KCJ2YXRUYXgiKSkgewogICAgICAgICAgICAgIHZhciB2YXQgPSBvcHRpb25zLm1vZGVsLnZhdFRheDsKCiAgICAgICAgICAgICAgaWYgKHZhdCkgewogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwudmF0VGF4ICE9PSBudWxsICYmIG9wdGlvbnMubW9kZWwudmF0VGF4ICE9PSAibnVsbCIpIHsKICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwudmF0VGF4LmJhc2VBbW91bnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09IG9wdGlvbnMubW9kZWwudmF0VGF4LmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgT3RoZXJUYXhEcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gT3RoZXJUYXhEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJkZWZhdWx0VGF4IiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9ZGVmYXVsdFRheCM8L3NwYW4+IiwKICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIGRhdGE6IHRoaXMub3RoZXJUYXguZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLm1vZGVsLmhhc093blByb3BlcnR5KCJ2YXRUYXgiKSkgewogICAgICAgICAgICAgIHZhciB2YXQgPSBvcHRpb25zLm1vZGVsLnZhdFRheDsKCiAgICAgICAgICAgICAgaWYgKHZhdCkgewogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwudmF0VGF4ICE9PSBudWxsICYmIG9wdGlvbnMubW9kZWwudmF0VGF4ICE9PSAibnVsbCIpIHsKICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwudmF0VGF4LmJhc2VBbW91bnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09IG9wdGlvbnMubW9kZWwudmF0VGF4LmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgVmF0VGF4RHJvcERvd25FZGl0b3I6IGZ1bmN0aW9uIFZhdFRheERyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKS5hcHBlbmRUbyhjb250YWluZXIpLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgZGF0YVRleHRGaWVsZDogImRlZmF1bHRUYXgiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS1TZWxlY3QtLSIsCiAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICBkYXRhOiB0aGlzLnZhdFRheAogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSwKICAgIFNhbGVVbml0RHJvcERvd25FZGl0b3I6IGZ1bmN0aW9uIFNhbGVVbml0RHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgIGF1dG9CaW5kOiB0cnVlLAogICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICBmaWx0ZXI6ICJzdGFydHN3aXRoIiwKICAgICAgICBkYXRhVGV4dEZpZWxkOiAibmFtZSIsCiAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICAgICAgdGVtcGxhdGU6ICI8c3Bhbj4jPWNvZGUjIC0gIz1uYW1lIzwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgZGF0YTogdGhpcy5zYWxlVW5pdEl0ZW1MaXN0CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgTW9kaWZpZXJEcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gTW9kaWZpZXJEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAgdmFyIGl0ZW0gPSBvcHRpb25zLm1vZGVsLml0ZW0gfHwge307CiAgICAgIHZhciB1b20gPSBpdGVtLnVvbSB8fCB7fTsKICAgICAgdmFyIGl0ZW1JZCA9IGl0ZW0uaWQgfHwgIiI7CiAgICAgIHZhciB1b21JZCA9IHVvbS5pZCB8fCAiIjsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogImNvbnRhaW5zIiwKICAgICAgICBkYXRhVGV4dEZpZWxkOiAibmFtZSIsCiAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICAgICAgaGVhZGVyVGVtcGxhdGU6ICc8ZGl2IGNsYXNzPSJkcm9wZG93bi1oZWFkZXIgay13aWRnZXQgay1oZWFkZXIiPicgKyAiPHNwYW4+TW9kaWZpZXIgPC9zcGFuPiIgKyAiPHNwYW4+PC9zcGFuPiIgKyAiPC9kaXY+IiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9bmFtZSM8L3NwYW4+IiwKICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIHNlcnZlckZpbHRlcmluZzogdHJ1ZSwKICAgICAgICAgIHRyYW5zcG9ydDogewogICAgICAgICAgICByZWFkOiB7CiAgICAgICAgICAgICAgdXJsOiBpdGVtTW9kaWZpZXJIYW5kbGVyLnNlYXJjaFVSTCgiP3BsSWQ9IiArIHRoaXMuc2FsZU9yZGVyLnByaWNlTGV2ZWwuaWQgKyAiJmlkPSIgKyBpdGVtSWQgKyAiJnVvbUlkPSIgKyB1b21JZCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIgogICAgICAgICAgfSwKICAgICAgICAgIHNjaGVtYTogewogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgIGlkOiAiaWQiLAogICAgICAgICAgICAgIGZpZWxkczogewogICAgICAgICAgICAgICAgaWQ6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdHJpbmciCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJpY2U6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogIm51bWJlciIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB1b206IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG90YWw6IGZ1bmN0aW9uIHRvdGFsKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBFbXBsb3llZURyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBFbXBsb3llZURyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBkYXRhLWJpbmQ9InZhbHVlOicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9NdWx0aVNlbGVjdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIHN1Z2dlc3Q6IHRydWUsCiAgICAgICAgZmlsdGVyOiAiY29udGFpbnMiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICBoZWFkZXJUZW1wbGF0ZTogJzxkaXYgY2xhc3M9ImRyb3Bkb3duLWhlYWRlciBrLXdpZGdldCBrLWhlYWRlciI+JyArICI8c3Bhbj5FbXBsb3llZSA8L3NwYW4+IiArICI8c3Bhbj48L3NwYW4+IiArICI8L2Rpdj4iLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1uYW1lIzwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgc2VydmVyRmlsdGVyaW5nOiB0cnVlLAogICAgICAgICAgdHJhbnNwb3J0OiB7CiAgICAgICAgICAgIHJlYWQ6IHsKICAgICAgICAgICAgICB1cmw6IGVtcGxveWVlSGFuZGxlci5zZWFyY2hVUkwoKQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iCiAgICAgICAgICB9LAogICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICBpZDogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsYXN0TmFtZTogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gZGF0YShyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b3RhbDogZnVuY3Rpb24gdG90YWwocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSwKICAgIGVtcEltcGw6IGZ1bmN0aW9uIGVtcEltcGwoZGF0YUl0ZW0pIHsKICAgICAgdmFyIGVtcElkcyA9IFtdOwogICAgICBkYXRhSXRlbS5lbXBsb3llZS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgZW1wSWRzLnB1c2gobS5maXJzdE5hbWUgKyAiIC0gIiArIG0ubGFzdE5hbWUpOwogICAgICB9KTsgLy8gd2luZG93LmNvbnNvbGUubG9nKGVtcElkcy5qb2luKCcsICcpKQoKICAgICAgcmV0dXJuICI8c3Bhbj4iLmNvbmNhdChlbXBJZHMuam9pbigiLCAiKSwgIjwvc3Bhbj4iKTsKICAgIH0sCiAgICBhZGRSb3c6IGZ1bmN0aW9uIGFkZFJvdygpIHsKICAgICAgdmFyIGRzID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICB0b3RhbCA9IGRzLnRvdGFsKCk7CiAgICAgIHRoaXMuaXRlbUxpbmUuaWQgPSBpbnZvaWNlUHJlZml4ICsgdXVpZC52MSgpOwogICAgICBkcy5pbnNlcnQodG90YWwsIHRoaXMuaXRlbUxpbmUpOwogICAgfSwKICAgIG9uU3BlY2lmaWNEaXNjb3VudENoYW5nZWQ6IGZ1bmN0aW9uIG9uU3BlY2lmaWNEaXNjb3VudENoYW5nZWQoKSB7CiAgICAgIGlmICh0aGlzLnNhbGVPcmRlci5zcGVjaWZpY0Rpc2NvdW50SXRlbSkgewogICAgICAgIHZhciBkaXNjb3VudE9yZGVyID0gdGhpcy5hdXRvQ2FsY3VsYXRlRGlzY291bnQodGhpcy5zYWxlT3JkZXIuc3BlY2lmaWNEaXNjb3VudEl0ZW0sIHRoaXMuc2FsZU9yZGVyLnN1YlRvdGFsKTsKICAgICAgICB0aGlzLnNhbGVPcmRlci5zcGVjaWZpY0Rpc2NvdW50VG90YWwgPSBrZW5kby50b1N0cmluZyhkaXNjb3VudE9yZGVyID8gZGlzY291bnRPcmRlciA6IDAsICJuIik7CiAgICAgICAgdmFyIHRvdGFsID0ga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci5zdWJUb3RhbCkgLSAoa2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci5kaXNjb3VudFRvdGFsKSArIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudG90YWxUYXhBbW91bnQpKSAtIGRpc2NvdW50T3JkZXI7CiAgICAgICAgdGhpcy5zYWxlT3JkZXIudG90YWwgPSBrZW5kby50b1N0cmluZyh0b3RhbCwgIm4iKTsKICAgICAgfQogICAgfSwKICAgIG9uT3RoZXJDaGFyZ2VDaGFuZ2U6IGZ1bmN0aW9uIG9uT3RoZXJDaGFyZ2VDaGFuZ2UoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciBvdGhlckNoYXJnZSA9IDA7CiAgICAgIHRoaXMubU90aGVyQ2hhcmdlLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKICAgICAgICBvdGhlckNoYXJnZSArPSBfdGhpczEwLmF1dG9DYWxjdWxhdGVEaXNjb3VudChtLCBfdGhpczEwLnNhbGVPcmRlci5zdWJUb3RhbCk7CiAgICAgIH0pOwogICAgICB0aGlzLnNhbGVPcmRlci5vdGhlckNoYXJnZUFtb3VudCA9IG90aGVyQ2hhcmdlOwogICAgICB0aGlzLmF1dG9DYWxjdWxhdGUoKTsKICAgIH0sCiAgICBsb2FkT3RoZXJDaGFyZ2U6IGZ1bmN0aW9uIGxvYWRPdGhlckNoYXJnZSgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgb3RoZXJDaGFyZ2VIYW5kbGVyLmxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5vdGhlckNoYXJnZUxpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25PdGhlckFtb3VudDogZnVuY3Rpb24gb25PdGhlckFtb3VudCh2YWx1ZSkgewogICAgICByZXR1cm4gdGhpcy5hdXRvQ2FsY3VsYXRlRGlzY291bnQodmFsdWUsIHRoaXMuc2FsZU9yZGVyLnN1YlRvdGFsKTsKICAgIH0sCiAgICBsb2FkRGlzY291bnRJdGVtOiBmdW5jdGlvbiBsb2FkRGlzY291bnRJdGVtKCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBkaXNjb3VudEl0ZW1IYW5kbGVyLmxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5zcGVjaWZpY0Rpc2NvdW50SXRlbSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkU2VnbWVudDogZnVuY3Rpb24gbG9hZFNlZ21lbnQoKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHZhciByb2xlVHlwZSwgcm9sZURhdGEsIHNlZ21lbnQsIHNlZ21lbnREZWZhdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczEzLnNlZ21lbnRzID0gW107CiAgICAgICAgICAgICAgICByb2xlVHlwZSA9IGRhdGFTdG9yZS5yb2xlVHlwZSB8fCAwOwoKICAgICAgICAgICAgICAgIGlmIChyb2xlVHlwZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBpZiAoZGF0YVN0b3JlLnJvbGVEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgcm9sZURhdGEgPSBkYXRhU3RvcmUucm9sZURhdGEgfHwgW107CiAgICAgICAgICAgICAgICAgICAgc2VnbWVudCA9IHJvbGVEYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRtKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRtLnR5cGUgPT09ICJzZWdtZW50IjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzZWdtZW50RGVmYXVsdCA9IHNlZ21lbnQuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5pc0RlZmF1bHQgPT09IDE7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5zZWdtZW50cyA9IHNlZ21lbnQ7CgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLiRyb3V0ZS5wYXJhbXMuaWQgPT09IHVuZGVmaW5lZCB8fCBfdGhpczEzLiRyb3V0ZS5wYXJhbXMuaWQgPT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnbWVudERlZmF1bHQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNhbGVPcmRlci5zZWdtZW50ID0gc2VnbWVudERlZmF1bHRbMF07CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGVUeXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5zZWdtZW50cyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NIYW5kbGVyLmdldFNlZygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNob3dMb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5zZWdtZW50cyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkTG9jYXRpb246IGZ1bmN0aW9uIGxvYWRMb2NhdGlvbigpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciByb2xlVHlwZSwgcm9sZURhdGEsIGxvY2F0aW9uLCBsb2NhdGlvbkRlZmF1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczE0LmxvY2F0aW9ucyA9IFtdOwogICAgICAgICAgICAgICAgcm9sZVR5cGUgPSBkYXRhU3RvcmUucm9sZVR5cGUgfHwgMDsKCiAgICAgICAgICAgICAgICBpZiAocm9sZVR5cGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgaWYgKGRhdGFTdG9yZS5yb2xlRGF0YSkgewogICAgICAgICAgICAgICAgICAgIHJvbGVEYXRhID0gZGF0YVN0b3JlLnJvbGVEYXRhIHx8IFtdOwogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gcm9sZURhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdG0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdG0udHlwZSA9PT0gImxvY2F0aW9uIjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkRlZmF1bHQgPSBsb2NhdGlvbi5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmlzRGVmYXVsdCA9PT0gMTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBfdGhpczE0LmxvY2F0aW9ucyA9IGxvY2F0aW9uOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNC4kcm91dGUucGFyYW1zLmlkID09PSB1bmRlZmluZWQgfHwgX3RoaXMxNC4kcm91dGUucGFyYW1zLmlkID09PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uRGVmYXVsdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQuc2FsZU9yZGVyLmxvY2F0aW9uID0gbG9jYXRpb25EZWZhdWx0WzBdOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlVHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQubG9jYXRpb25zID0gW107CiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkhhbmRsZXIubGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LnNob3dMb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5sb2NhdGlvbnMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkUHJvamVjdEJ5Q3VzdG9tZXI6IGZ1bmN0aW9uIGxvYWRQcm9qZWN0QnlDdXN0b21lcigpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciByb2xlVHlwZSwgcm9sZURhdGEsIHByb2plY3QsIHByb2plY3REZWZhdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMxNS5jdXN0b21lclByb2plY3RzID0gW107CiAgICAgICAgICAgICAgICByb2xlVHlwZSA9IGRhdGFTdG9yZS5yb2xlVHlwZSB8fCAwOwoKICAgICAgICAgICAgICAgIGlmIChyb2xlVHlwZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBpZiAoZGF0YVN0b3JlLnJvbGVEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgcm9sZURhdGEgPSBkYXRhU3RvcmUucm9sZURhdGEgfHwgW107CiAgICAgICAgICAgICAgICAgICAgcHJvamVjdCA9IHJvbGVEYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRtKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRtLnR5cGUgPT09ICJwcm9qZWN0IjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBwcm9qZWN0LmZvckVhY2goZnVuY3Rpb24gKGspIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21lcnMgPSBrLmN1c3RvbWVycyB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9DdXN0b21lciA9IGN1c3RvbWVycy5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uY3VzdG9tZXIuaWQgPT09IF90aGlzMTUuY3VzdG9tZXIuaWQ7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvQ3VzdG9tZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE1LmN1c3RvbWVyUHJvamVjdHMucHVzaChrKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTUuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkIHx8IF90aGlzMTUuJHJvdXRlLnBhcmFtcy5pZCA9PT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgIHByb2plY3REZWZhdWx0ID0gX3RoaXMxNS5jdXN0b21lclByb2plY3RzLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5pc0RlZmF1bHQgPT09IDE7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvamVjdERlZmF1bHQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE1LnNhbGVPcmRlci5wcm9qZWN0ID0gcHJvamVjdERlZmF1bHRbMF07CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGVUeXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgICAgcHJvamVjdEhhbmRsZXIuZ2V0QnlDdXN0b21lcihfdGhpczE1LmN1c3RvbWVyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS5zaG93TG9hZGluZyA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTUuY3VzdG9tZXJQcm9qZWN0cyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRTYWxlQ2hhbm5lbDogZnVuY3Rpb24gbG9hZFNhbGVDaGFubmVsKCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIF90aGlzMTYuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHNhbGVDaGFubmVsSGFuZGxlci5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2LnNhbGVDaGFubmVsTGlzdCA9IHJlcy5kYXRhLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNi5zYWxlQ2hhbm5lbExpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LiRyb3V0ZS5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCB8fCBfdGhpczE2LiRyb3V0ZS5wYXJhbXMuaWQgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTYuc2FsZU9yZGVyLnNhbGVDaGFubmVsID0gX3RoaXMxNi5zYWxlQ2hhbm5lbExpc3RbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRUYXg6IGZ1bmN0aW9uIGxvYWRUYXgoKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ0hhbmRsZXIuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE3LnRheCA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcub3RoZXJUYXggPSBfdGhpczE3LnRheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtLnRheFR5cGUudHlwZUlkID09PSA3IHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDEwKSAmJiBtLnRyYW5zYWN0aW9uVHlwZSA9PT0gIlNhbGUiOwogICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIHZhbHVhYmxlIHRheAoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcuc3BlY2lmaWNUYXggPSBfdGhpczE3LnRheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtLnRheFR5cGUudHlwZUlkID09PSA4IHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDEwKSAmJiBtLnRyYW5zYWN0aW9uVHlwZSA9PT0gIlNhbGUiOwogICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIHZhbHVhYmxlIHRheAoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcucHVibGljTGlnaHRpbmdUYXggPSBfdGhpczE3LnRheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtLnRheFR5cGUudHlwZUlkID09PSA5IHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDEwKSAmJiBtLnRyYW5zYWN0aW9uVHlwZSA9PT0gIlNhbGUiOwogICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIHZhbHVhYmxlIHRheAoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcudmF0VGF4ID0gX3RoaXMxNy50YXguZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobS50YXhUeXBlLnR5cGVJZCA9PT0gMSB8fCBtLnRheFR5cGUudHlwZUlkID09PSA4IHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDEwKSAmJiBtLnRyYW5zYWN0aW9uVHlwZSA9PT0gIlNhbGUiOwogICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIHZhbHVhYmxlIHRheAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkU2FsZVVuaXRJdGVtczogZnVuY3Rpb24gbG9hZFNhbGVVbml0SXRlbXMoKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgc2FsZVVuaXRJdGVtSGFuZGxlci5saXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSBfdGhpczE4LnNhbGVVbml0SXRlbUxpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkQ3VzdG9tZXJCYWxhbmNlOiBmdW5jdGlvbiBsb2FkQ3VzdG9tZXJCYWxhbmNlKGlkKSB7CiAgICAgIHZhciBfdGhpczE5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ckZpbHRlciA9IGlkICsgIj90eXBlPWJhbCI7CiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0hhbmRsZXIuYmFsYW5jZShzdHJGaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOS5zYWxlT3JkZXIuY3VycmVudEJhbGFuY2UgPSBkYXRhWzBdLmJhbGFuY2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpOwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTkuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWRpdExpbWl0VXNhZ2U6IGZ1bmN0aW9uIGNyZWRpdExpbWl0VXNhZ2UoYmFsYW5jZSwgY3JlZGl0TGltaXQpIHsKICAgICAgdmFyIG51bSA9IDA7CiAgICAgIHZhciBwZXIgPSBiYWxhbmNlIC8gY3JlZGl0TGltaXQgKiAxMDA7CgogICAgICBpZiAoaXNOYU4ocGVyKSkgewogICAgICAgIC8vIEl0IGlzbid0IGEgbnVtYmVyCiAgICAgICAgbnVtID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJdCBpcyBhIG51bWJlcgogICAgICAgIG51bSA9IHBlcjsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bSArICIgJSI7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKGRhdGEpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogIkN1c3RvbWVycyIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5oaXN0b3J5LmdvKC0xKTsKICAgICAgfQoKICAgICAgd2luZG93LmNvbnNvbGUubG9nKGRhdGEsICJjbG9zZSIpOyAvLyBsb2NhbFN0b3JhZ2UuZGF0YS5pZCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpCiAgICB9LAogICAgLy9jYXRhbG9nCiAgICBsb2FkSW1hZ2U6IGZ1bmN0aW9uIGxvYWRJbWFnZShkYXRhSXRlbSkgewogICAgICBpZiAoZGF0YUl0ZW0uaGFzT3duUHJvcGVydHkoImltYWdlcyIpKSB7CiAgICAgICAgaWYgKGRhdGFJdGVtLmltYWdlcy5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdCIpKSB7CiAgICAgICAgICB2YXIgdXJsID0gdGhpcy5pbWdVUkwgKyBkYXRhSXRlbS5pbWFnZXMuZGVmYXVsdC50aHVtYjsKICAgICAgICAgIHJldHVybiAiPGltZyB3aWR0aD0nNTAnIGhlaWdodD0nNTAnIHN0eWxlPSAnbWFyZ2luOiBhdXRvO2Rpc3BsYXk6IGJsb2NrOycgc3JjPSciICsgdXJsICsgIicgLz4iOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkQ2F0YWxvZ3M6IGZ1bmN0aW9uIGxvYWRDYXRhbG9ncygpIHsKICAgICAgdmFyIF90aGlzMjAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTYkKF9jb250ZXh0MTYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczIwLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBjYXRhbG9nSGFuZGxlci5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjAuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjAuY2F0YWxvZ3MgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZENhdGFsb2c6IGZ1bmN0aW9uIGFkZENhdGFsb2coZSkgewogICAgICB2YXIgX3RoaXMyMSA9IHRoaXM7CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZENhdGFsb2ciKS5kYXRhKCJrZW5kb0dyaWQiKTsKICAgICAgdmFyIGRhdGFJdGVtID0gZ3JpZC5kYXRhSXRlbSgkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgidHIiKSk7IC8vIHdpbmRvdy5jb25zb2xlLmxvZyhkYXRhSXRlbSkKCiAgICAgIGlmIChkYXRhSXRlbS52YXJpYW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgZGF0YUl0ZW0udmFyaWFudHMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgaWYgKG0uaGFzT3duUHJvcGVydHkoInZhcmlhbnQiKSkgewogICAgICAgICAgICBpZiAobS52YXJpYW50Lmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgX3RoaXMyMS5sb2FkU2luZ2xlSXRlbShtLnZhcmlhbnQuaWQsICJpIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmRpYWxvZ0NhdGFsb2cgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKGRhdGFJdGVtLnNlcnZpY2VzLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhSXRlbS5zZXJ2aWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBpZiAobS5oYXNPd25Qcm9wZXJ0eSgic2VydmljZSIpKSB7CiAgICAgICAgICAgIGlmIChtLnNlcnZpY2UuaGFzT3duUHJvcGVydHkoImlkIikpIHsKICAgICAgICAgICAgICBfdGhpczIxLmxvYWRTaW5nbGVJdGVtKG0uc2VydmljZS5pZCwgInMiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZGlhbG9nQ2F0YWxvZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgbG9hZFNpbmdsZUl0ZW06IGZ1bmN0aW9uIGxvYWRTaW5nbGVJdGVtKGl0ZW1JZCwgdHlwZSkgewogICAgICB2YXIgX3RoaXMyMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNyQoX2NvbnRleHQxNykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIyLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SGFuZGxlci5nZXRPbmUoaXRlbUlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjIuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzOwogICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IF90aGlzMjIuJHJlZnMuaXRlbUxpbmVEUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIyLml0ZW1MaW5lLmlkID0gaW52b2ljZVByZWZpeCArIHV1aWQudjEoKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjIuaXRlbUxpbmUuaXRlbSA9IGRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gImkiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjIuaXRlbUxpbmUuZGVzY3JpcHRpb24gPSBkYXRhLnZhcmlhbnQuc2FsZURlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMi5pdGVtTGluZS5kZXNjcmlwdGlvbiA9IGRhdGEuc2FsZURlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGRzLmluc2VydCh0b3RhbCwgX3RoaXMyMi5pdGVtTGluZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkUHJlZml4OiBmdW5jdGlvbiBsb2FkUHJlZml4KCkgewogICAgICB2YXIgX3RoaXMyMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHByZWZpeEhhbmRsZXIuZ2V0KCJzYWxlIG9yZGVyIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMy50cmFuc2FjdGlvblR5cGUgPSByZXMuZGF0YS5kYXRhOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMjMudHJhbnNhY3Rpb25UeXBlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIzLnNhbGVPcmRlci50cmFuc2FjdGlvblR5cGUgPSBfdGhpczIzLnRyYW5zYWN0aW9uVHlwZVswXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczIzLmluaXRzYWxlT3JkZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjMuZ2VuZXJhdGVOdW1iZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFZpZXdzYWxlT3JkZXI6IGZ1bmN0aW9uIGxvYWRWaWV3c2FsZU9yZGVyKCkgewogICAgICB2YXIgX3RoaXMyNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOSQoX2NvbnRleHQxOSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMjQuaW5pdHNhbGVPcmRlcikgewogICAgICAgICAgICAgICAgICBfdGhpczI0LmlzRWRpdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNC5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICBzYWxlT3JkZXJIYW5kbGVyLnZpZXcoX3RoaXMyNC4kcm91dGUucGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjQuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI0LnNhbGVPcmRlciA9IHJlcy5kYXRhLmRhdGFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNC5xdW90ZXMgPSBfdGhpczI0LnNhbGVPcmRlci5yZWZGcm9tIHx8IFtdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI0LmJpbmREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCk7CiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjQuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyNC5zZXREZWZhdWx0RGF0YSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRRdW90ZTogZnVuY3Rpb24gbG9hZFF1b3RlKCkgewogICAgICB2YXIgX3RoaXMyNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMCQoX2NvbnRleHQyMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyNS5zYWxlT3JkZXIuY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyNS5yZWZGcm9tID0gW107CiAgICAgICAgICAgICAgICAgIF90aGlzMjUuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczI1LnF1b3RlcyA9IFtdOwogICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJieV9jdXN0b21lciIsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyOiBfdGhpczI1LnNhbGVPcmRlci5jdXN0b21lci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudElkOiBfdGhpczI1LnNhbGVPcmRlci5zZWdtZW50LmlkLAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBfdGhpczI1LnNhbGVPcmRlci5sb2NhdGlvbi5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VMZXZlbElkOiBfdGhpczI1LnNhbGVPcmRlci5wcmljZUxldmVsLmlkLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiU2FsZSBRdW90ZSIKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICBzYWxlT3JkZXJIYW5kbGVyLnNlYXJjaChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI1LnF1b3RlcyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyMCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZFF1b3RlOiBmdW5jdGlvbiBhZGRRdW90ZShkYXRhKSB7CiAgICAgIHZhciBfdGhpczI2ID0gdGhpczsKCiAgICAgIC8vYWRkIGl0ZW0gbGluZXMKICAgICAgdmFyIHR4bkRhdGEgPSBkYXRhLnR4bkRhdGEgfHwge307CiAgICAgIHZhciBpdGVtTGluZXMgPSBkYXRhLml0ZW1MaW5lcyB8fCBbXTsKICAgICAgdGhpcy5yZWZGcm9tLnB1c2goewogICAgICAgIGlkOiBkYXRhLmlkIHx8ICIiLAogICAgICAgIHJlZmVyZW5jZTogZGF0YS5udW1iZXIgfHwgIiIsCiAgICAgICAgY3VzdG9tZXJJZDogdHhuRGF0YS5jdXN0b21lcklkIHx8ICIiCiAgICAgIH0pOwoKICAgICAgaWYgKGl0ZW1MaW5lcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5yZW1vdmVFbXB0eUxpbmUoKTsKICAgICAgICBpdGVtTGluZXMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgbS50eG5fYWRkX2lkID0gdHhuRGF0YS5pZDsKICAgICAgICAgIG0uaWQgPSBpbnZvaWNlUHJlZml4ICsgdXVpZC52MSgpOwoKICAgICAgICAgIHZhciBkcyA9IF90aGlzMjYuJHJlZnMuaXRlbUxpbmVEUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKCiAgICAgICAgICBkcy5pbnNlcnQodG90YWwsIG0pOwogICAgICAgIH0pOyAvLyB0aGlzLmFkZFJvdygpOwogICAgICB9IC8vYWRkIG90aGVyIGNoYXJkCgoKICAgICAgaWYgKGRhdGEub3RoZXJDaGFyZ2UubGVuZ3RoID4gMCkgewogICAgICAgIGRhdGEub3RoZXJDaGFyZ2UuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgbS50eG5fYWRkX2lkID0gdHhuRGF0YS5pZDsKCiAgICAgICAgICBfdGhpczI2Lm1PdGhlckNoYXJnZS5wdXNoKG0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgICAgIHRoaXMub25PdGhlckNoYXJnZUNoYW5nZSgpOwogICAgICB9IC8vIGFkZCB0eG5saXN0CgoKICAgICAgdGhpcy50eG5MaXN0cy5wdXNoKHR4bkRhdGEpOwoKICAgICAgaWYgKHR4bkRhdGEubGVhZC5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy50eG5MaXN0cy5wdXNoKHR4bkRhdGEubGVhZCk7CiAgICAgIH0gLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMudHhuTGlzdHMpOwogICAgICAvL3JlbW92ZSB0eG4KCgogICAgICB2YXIgaW5kZXggPSB0aGlzLnF1b3Rlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gZGF0YS5pZCA9PT0gaXRlbS5pZDsKICAgICAgfSk7CiAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgICB0aGlzLnF1b3Rlcy5zcGxpY2UoaW5kZXgsIDEpOyAvLyB0aGlzLnF1b3Rlc1tpbmRleF0uaXNfYWRkZWQgPSB0cnVlCiAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnF1b3RlcykKCiAgICAgIHRoaXMuc2FsZU9yZGVyLnJlZkZyb20gPSB0aGlzLnJlbW92ZUR1cGxpY2F0ZSh0aGlzLnJlZkZyb20pOwogICAgICB3aW5kb3cuY29uc29sZS5sb2coInJlZiIsIHRoaXMuc2FsZU9yZGVyLnJlZkZyb20pOwogICAgfSwKICAgIHJlbW92ZUVtcHR5TGluZTogZnVuY3Rpb24gcmVtb3ZlRW1wdHlMaW5lKCkgewogICAgICB2YXIgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRJdGVtTGluZVNhbGVPcmRlciIpLmRhdGEoImtlbmRvR3JpZCIpLAogICAgICAgICAgZGF0YVNvdXJjZSA9IGdyaWQuZGF0YVNvdXJjZTsKICAgICAgZGF0YVNvdXJjZS5kYXRhKCkuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgIGlmIChtKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IG0uaXRlbSB8fCB7fTsKCiAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gdW5kZWZpbmVkIHx8IGl0ZW0uaWQgPT09ICIiKSB7CiAgICAgICAgICAgIGRhdGFTb3VyY2UucmVtb3ZlKG0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbG9hZFRyYW5zYWN0aW9uUmF0ZTogZnVuY3Rpb24gbG9hZFRyYW5zYWN0aW9uUmF0ZSgpIHsKICAgICAgdmFyIF90aGlzMjcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIxKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjEkKF9jb250ZXh0MjEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMS5wcmV2ID0gX2NvbnRleHQyMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKF90aGlzMjcuc2FsZU9yZGVyLnRyYW5zYWN0aW9uRGF0ZSkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApOwogICAgICAgICAgICAgICAgICAgIHZhciBwcmljZUxldmVsID0gX3RoaXMyNy5zYWxlT3JkZXIucHJpY2VMZXZlbDsKICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9ICIiOwoKICAgICAgICAgICAgICAgICAgICBpZiAocHJpY2VMZXZlbC5oYXNPd25Qcm9wZXJ0eSgiY3VycmVuY3kiKSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHByaWNlTGV2ZWwuY3VycmVuY3kuaGFzT3duUHJvcGVydHkoImNvZGUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gcHJpY2VMZXZlbC5jdXJyZW5jeS5jb2RlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IHVuZGVmaW5lZCB8fCBjb2RlICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeUhhbmRsZXIuZ2V0TGFzdEV4Y2hhbmdlUmF0ZUJ5RGF0ZShkYXRlLCBjb2RlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjcuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI3LmV4Y2hhbmdlUmF0ZSA9IHJlcy5kYXRhLmRhdGFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNy5jdXJyZW5jeUNvZGUgPSBfdGhpczI3LmV4Y2hhbmdlUmF0ZS5jb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjcudHJhbnNhY3Rpb25SYXRlID0gX3RoaXMyNy5leGNoYW5nZVJhdGUucmF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI3LnNhbGVPcmRlci50eG5SYXRlID0gX3RoaXMyNy5leGNoYW5nZVJhdGUucmF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI3LnNhbGVPcmRlci5leGNoYW5nZVJhdGUgPSBfdGhpczI3LmV4Y2hhbmdlUmF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI3LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIxKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB0aGlzLmlkID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnNhbGVPcmRlciA9IHt9OwogICAgICB0aGlzLml0ZW1MaW5lcyA9IFtdOwogICAgICB0aGlzLmN1c3RvbWVyID0gIiI7CiAgICAgIHRoaXMuZ2VuZXJhdGVOdW1iZXIoKTsKICAgIH0sCiAgICBzYXZlQ2xvc2U6IGZ1bmN0aW9uIHNhdmVDbG9zZSgpIHsKICAgICAgdmFyIF90aGlzMjggPSB0aGlzOwoKICAgICAgdmFyIGlkID0gIiI7CgogICAgICBpZiAodGhpcy5jdXN0b21lci5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgIGlkID0gdGhpcy5jdXN0b21lci5pZCB8fCAiIjsKICAgICAgfQoKICAgICAgaWYgKGlkID09PSAiIikgewogICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoImN1c3RvbWVyIGlzIHJlcXVpcmUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBkcyA9IHRoaXMuJHJlZnMuaXRlbUxpbmVEUy5rZW5kb1dpZGdldCgpOwogICAgICB2YXIgZDEgPSBkcy5kYXRhKCkuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIG0uYW1vdW50ID4gMDsKICAgICAgfSk7CiAgICAgIHZhciBkYXRhVmFsaWRhdGUgPSAwOwogICAgICBkMS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICBpZiAodmFsdWUuaXRlbS5pZCA9PSB1bmRlZmluZWQgfHwgdmFsdWUudW9tLmlkID09IHVuZGVmaW5lZCkgewogICAgICAgICAgX3RoaXMyOC4kc25vdGlmeS5lcnJvcigiUGxlYXNlIGNoZWNrIEl0ZW0gb3IgVW9tICBvbiByb3cgIiArIChpbmRleCArIDEpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YVZhbGlkYXRlICs9IDE7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmIChkMS5sZW5ndGggPT0gZGF0YVZhbGlkYXRlKSB7CiAgICAgICAgdGhpcy5pc1NhdmVDbG9zZSA9IHRydWU7CiAgICAgICAgdGhpcy5zYXZlT3B0aW9uID0gInNhdmVDbG9zZSI7CiAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlUHJpbnQ6IGZ1bmN0aW9uIHNhdmVQcmludCgpIHsKICAgICAgdGhpcy5pc1NhdmVQcmludCA9IHRydWU7CiAgICAgIHRoaXMuc2F2ZU9wdGlvbiA9ICJzYXZlUHJpbnQiOwogICAgICB0aGlzLnNhdmUoKTsKICAgIH0sCiAgICBzYXZlTmV3OiBmdW5jdGlvbiBzYXZlTmV3KCkgewogICAgICB0aGlzLnNhdmVPcHRpb24gPSAic2F2ZU5ldyI7CiAgICAgIHRoaXMuaXNTYXZlTmV3ID0gdHJ1ZTsKICAgICAgdGhpcy5zYXZlKCk7CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHZhciBfdGhpczI5ID0gdGhpczsKCiAgICAgIHRoaXMuJHN3YWwoewogICAgICAgIHRpdGxlOiBpMThuLnQoIm1zZ190aXRsZV93YXJuaW5nIiksCiAgICAgICAgdGV4dDogaTE4bi50KCJtc2dfZGlzY2FyZCIpLAogICAgICAgIGljb246ICJ3YXJuaW5nIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IGkxOG4udCgiY2FuY2VsIiksCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzRkNDg0OCIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjRUQxQTNBIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogaTE4bi50KCJkaXNjYXJkIikKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0Q2VuKSB7CiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlc3VsdENlbik7CgogICAgICAgIGlmIChyZXN1bHRDZW4udmFsdWUpIHsKICAgICAgICAgIF90aGlzMjkuJHJvdXRlci5nbygtMSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzYXZlRHJhZnQ6IGZ1bmN0aW9uIHNhdmVEcmFmdCgpIHsKICAgICAgdGhpcy5zYXZlT3B0aW9uID0gInNhdmVEcmFmdCI7CiAgICAgIHRoaXMuaXNTYXZlRHJhZnQgPSB0cnVlOwogICAgICB0aGlzLnNhdmUoKTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMzMCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIyLnByZXYgPSBfY29udGV4dDIyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMzMC4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMzMC4kcmVmcy5mb3JtLnZhbGlkYXRlKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5yZW1vdmVFbXB0eUxpbmUoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1MaW5lRFMgPSBfdGhpczMwLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgPSBpdGVtTGluZURTLnRvdGFsKCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBpdG1MaW5lcyA9IGl0ZW1MaW5lRFMuZGF0YSgpLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uYW1vdW50ID4gMDsKICAgICAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlbUxpbmVNb2RlbChtKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuJHNub3RpZnkuZXJyb3IoIkZpZWxkIFJlcXVpcmVkISIpOwoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMzMC5pc1JlcXVyZWRQdXJjaGFzZSkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5zYWxlT3JkZXIuc3VwcGxpZXIgPSB7fTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgLy9pcyBmb3IgcHVyY2hhc2UKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuc2FsZU9yZGVyVHlwZSA9IDU7CiAgICAgICAgICAgICAgICAgICAgfSAvLyB3aW5kb3cuY29uc29sZS5sb2coaXRtTGluZXMsICdpdG1MaW5lcycpCiAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGl0bUxpbmVzKSwgJ2l0bUxpbmVzJykKCgogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzMzAuc2FsZU9yZGVyLmlkID8gX3RoaXMzMC5zYWxlT3JkZXIuaWQgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJTYWxlIE9yZGVyIiwKICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogX3RoaXMzMC5zYWxlT3JkZXIudHJhbnNhY3Rpb25UeXBlLAogICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBfdGhpczMwLnNhbGVPcmRlci5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICBhYmJyOiBfdGhpczMwLnNhbGVPcmRlci50cmFuc2FjdGlvblR5cGUuYWJiciwKICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uRGF0ZTogX3RoaXMzMC5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlLAogICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25EYXRlVFo6IEhlbHBlci50b0lTT0RhdGUoX3RoaXMzMC5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKSwKICAgICAgICAgICAgICAgICAgICAgIHZhbGlkaXR5RGF0ZTogX3RoaXMzMC5zYWxlT3JkZXIudmFsaWRpdHlEYXRlLAogICAgICAgICAgICAgICAgICAgICAgbW9udGhPZjogX3RoaXMzMC5zYWxlT3JkZXIubW9udGhPZiwKICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyOiBfdGhpczMwLnNhbGVPcmRlci5jdXN0b21lciwKICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRUZXJtOiBfdGhpczMwLnNhbGVPcmRlci5wYXltZW50VGVybSwKICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdW50UHJvbW90aW9uOiB7fSwKICAgICAgICAgICAgICAgICAgICAgIHByaWNlTGV2ZWw6IF90aGlzMzAuc2FsZU9yZGVyLnByaWNlTGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgICBpdGVtTGluZXM6IGl0bUxpbmVzLAogICAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogX3RoaXMzMC5zYWxlT3JkZXIuc2VnbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdGhpczMwLnNhbGVPcmRlci5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IF90aGlzMzAuc2FsZU9yZGVyLnByb2plY3QsCiAgICAgICAgICAgICAgICAgICAgICBzYWxlQ2hhbm5lbDogX3RoaXMzMC5zYWxlT3JkZXIuc2FsZUNoYW5uZWwsCiAgICAgICAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzczogX3RoaXMzMC5zYWxlT3JkZXIuYmlsbGluZ0FkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3M6IF90aGlzMzAuc2FsZU9yZGVyLmRlbGl2ZXJ5QWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgIGRlbGl2ZXJ5RGF0ZVRpbWU6IF90aGlzMzAuc2FsZU9yZGVyLmRlbGl2ZXJ5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbk5vdGU6IF90aGlzMzAuc2FsZU9yZGVyLnRyYW5zYWN0aW9uTm90ZSwKICAgICAgICAgICAgICAgICAgICAgIHN1YlRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5zdWJUb3RhbCwKICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci50b3RhbCwKICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogX3RoaXMzMC5zYWxlT3JkZXIuYW1vdW50LAogICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRUb3RhbDogX3RoaXMzMC5zYWxlT3JkZXIuZGlzY291bnRUb3RhbCwKICAgICAgICAgICAgICAgICAgICAgIHNwZWNpZmljRGlzY291bnRUb3RhbDogX3RoaXMzMC5zYWxlT3JkZXIuc3BlY2lmaWNEaXNjb3VudFRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlGZWU6IF90aGlzMzAuc2FsZU9yZGVyLmRlbGl2ZXJ5RmVlLAogICAgICAgICAgICAgICAgICAgICAgdG90YWxUYXhBbW91bnQ6IF90aGlzMzAuc2FsZU9yZGVyLnRvdGFsVGF4QW1vdW50LAogICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhbGFuY2U6IF90aGlzMzAuc2FsZU9yZGVyLmN1cnJlbnRCYWxhbmNlLAogICAgICAgICAgICAgICAgICAgICAgY3JlZGl0TGltaXQ6IF90aGlzMzAuc2FsZU9yZGVyLmNyZWRpdExpbWl0LAogICAgICAgICAgICAgICAgICAgICAgc2F2ZU9wdGlvbjogX3RoaXMzMC5zYXZlT3B0aW9uLAogICAgICAgICAgICAgICAgICAgICAgdHhuUmF0ZTogX3RoaXMzMC5zYWxlT3JkZXIudHhuUmF0ZSwKICAgICAgICAgICAgICAgICAgICAgIHJhdGU6IDEsCiAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZVJhdGU6IF90aGlzMzAuc2FsZU9yZGVyLmV4Y2hhbmdlUmF0ZSwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlQW1vdW50OiBfdGhpczMwLnNhbGVPcmRlci5leGNoYW5nZUFtb3VudCwKICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMSwKICAgICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkQnk6IF90aGlzMzAuc2FsZU9yZGVyLmFwcHJvdmVkQnksCiAgICAgICAgICAgICAgICAgICAgICBmb3JtVGVtcGxhdGU6IHt9LAogICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNEaXNjb3VudEl0ZW06IF90aGlzMzAuc2FsZU9yZGVyLnNwZWNpZmljRGlzY291bnRJdGVtLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJDaGFyZ2U6IF90aGlzMzAubU90aGVyQ2hhcmdlLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJDaGFyZ2VBbW91bnQ6IF90aGlzMzAuc2FsZU9yZGVyLm90aGVyQ2hhcmdlQW1vdW50LAogICAgICAgICAgICAgICAgICAgICAgcHVibGljTGluazogIiIsCiAgICAgICAgICAgICAgICAgICAgICB0YXhMaXN0VG90YWw6IF90aGlzMzAudGF4TGlzdFRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJEaXNjb3VudEl0ZW06IF90aGlzMzAuY3VzdG9tZXJEaXNjb3VudEl0ZW0sCiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lclNhbGVVbml0OiBfdGhpczMwLmN1c3RvbWVyU2FsZVVuaXQsCiAgICAgICAgICAgICAgICAgICAgICBsb2dnZWRVc2VyOiBfdGhpczMwLmxvZ2dlZFVzZXIsCiAgICAgICAgICAgICAgICAgICAgICB0eG5MaXN0OiBfdGhpczMwLnR4bkxpc3RzLAogICAgICAgICAgICAgICAgICAgICAgc2FsZU9yZGVyVHlwZTogX3RoaXMzMC5zYWxlT3JkZXIuc2FsZU9yZGVyVHlwZSwKICAgICAgICAgICAgICAgICAgICAgIGVtcGxveWVlOiBfdGhpczMwLnNhbGVPcmRlci5lbXBsb3llZSwKICAgICAgICAgICAgICAgICAgICAgIHN1cHBsaWVyOiBfdGhpczMwLnNhbGVPcmRlci5zdXBwbGllciwKICAgICAgICAgICAgICAgICAgICAgIGl0ZW1TdWJ0b3RhbDogX3RoaXMzMC5zYWxlT3JkZXIuaXRlbVN1YnRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VJdGVtU3VidG90YWw6IF90aGlzMzAuc2FsZU9yZGVyLmV4Y2hhbmdlSXRlbVN1YnRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgc2VydmljZVN1YnRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5zZXJ2aWNlU3VidG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZVNlcnZpY2VTdWJ0b3RhbDogX3RoaXMzMC5zYWxlT3JkZXIuZXhjaGFuZ2VTZXJ2aWNlU3VidG90YWwsCiAgICAgICAgICAgICAgICAgICAgICB0eG5JdG1TdWJ0b3RhbDogX3RoaXMzMC5zYWxlT3JkZXIudHhuSXRtU3VidG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZVR4bkl0bVN1YnRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5leGNoYW5nZVR4bkl0bVN1YnRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgaXRlbURpc2NvdW50OiBfdGhpczMwLnNhbGVPcmRlci5pdGVtRGlzY291bnQsCiAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZUl0ZW1EaXNjb3VudDogX3RoaXMzMC5zYWxlT3JkZXIuZXhjaGFuZ2VJdGVtRGlzY291bnQsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlRGlzY291bnQ6IF90aGlzMzAuc2FsZU9yZGVyLnNlcnZpY2VEaXNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlU2VydmljZURpc2NvdW50OiBfdGhpczMwLnNhbGVPcmRlci5leGNoYW5nZVNlcnZpY2VEaXNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIHR4bkl0bURpc2NvdW50OiBfdGhpczMwLnNhbGVPcmRlci50eG5JdG1EaXNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlVHhuSXRtRGlzY291bnQ6IF90aGlzMzAuc2FsZU9yZGVyLmV4Y2hhbmdlVHhuSXRtRGlzY291bnQsCiAgICAgICAgICAgICAgICAgICAgICBsZWFkOiB7fSwKICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVmlldzogInNhbGVfb3JkZXJfdmlldyIsCiAgICAgICAgICAgICAgICAgICAgICBleHNwZWN0ZWREYXRlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIHVzZWREYXRlQXQ6ICIiLAogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZEF0OiAiIiwKICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICByZWZGcm9tOiBfdGhpczMwLnNhbGVPcmRlci5yZWZGcm9tIHx8IFtdLAogICAgICAgICAgICAgICAgICAgICAgcmVmVG86IF90aGlzMzAuc2FsZU9yZGVyLnJlZlRvIHx8IFtdLAogICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKQogICAgICAgICAgICAgICAgICAgIH07IC8vIHdpbmRvdy5jb25zb2xlLmxvZygnZGF0YScsIGRhdGEpCiAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCdkYXRhJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpCgogICAgICAgICAgICAgICAgICAgIF90aGlzMzAuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF90aGlzMzAuYnRuRGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHNhbGVPcmRlckhhbmRsZXIuY3JlYXRlKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLnNob3dMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuYnRuRGlzYWJsZWQgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMwLmlzU2F2ZU5ldyA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5zZXREZWZhdWx0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuY2xvc2UocmVzcG9uc2UuZGF0YS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKTsKCgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLiRzbm90aWZ5LnN1Y2Nlc3MoIlN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5idG5EaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuJHNub3RpZnkuZXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nIik7CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5lcnJvcnMucHVzaChlKTsKCiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRQYXltZW50VGVybUxpc3Q6IGZ1bmN0aW9uIGxvYWRQYXltZW50VGVybUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczMxID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIzJChfY29udGV4dDIzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjMucHJldiA9IF9jb250ZXh0MjMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMxLmN1c3RvbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyRmlsdGVyID0gIj9pZD0iICsgX3RoaXMzMS5jdXN0b21lci5pZCArICImdHJhbnNhY3Rpb25EYXRlPSIgKyBfdGhpczMxLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUgKyAiJnR5cGU9Q3VzdG9tZXIiOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMS5zYWxlT3JkZXIucGF5bWVudFRlcm0gPSB7fTsKICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRUZXJtSGFuZGxlcl8uZ2V0KHN0ckZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVybXMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzEuc2FsZU9yZGVyLnBheW1lbnRUZXJtID0gdGVybXMudGVybTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkQ3JlZGl0TGltaXQ6IGZ1bmN0aW9uIGxvYWRDcmVkaXRMaW1pdCgpIHsKICAgICAgdmFyIF90aGlzMzIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjQkKF9jb250ZXh0MjQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNC5wcmV2ID0gX2NvbnRleHQyNC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMzIuY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJGaWx0ZXIgPSAiP2lkPSIgKyBfdGhpczMyLmN1c3RvbWVyLmlkICsgIiZ0cmFuc2FjdGlvbkRhdGU9IiArIF90aGlzMzIuc2FsZU9yZGVyLnRyYW5zYWN0aW9uRGF0ZSArICImdHlwZT1DdXN0b21lciI7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMyLnNhbGVPcmRlci5jcmVkaXRMaW1pdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBjcmVkaXRMaW1pdEhhbmRsZXIuZ2V0KHN0ckZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNyZWRpdExpbWl0SXRlbSA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3JlZGl0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMyLnNhbGVPcmRlci5jcmVkaXRMaW1pdCA9IGtlbmRvLnBhcnNlRmxvYXQoY3JlZGl0LmFtb3VudCB8fCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbGVhclVPTUl0ZW06IGZ1bmN0aW9uIGNsZWFyVU9NSXRlbSgpIHsKICAgICAgdmFyIF90aGlzMzMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI1KCkgewogICAgICAgIHZhciBkczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI1JChfY29udGV4dDI1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjUucHJldiA9IF9jb250ZXh0MjUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRzID0gX3RoaXMzMy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgICAgICAgICBkcy5kYXRhKCkubWFwKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgIG4uc2V0KCJ1b20iLCB7fSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzMzMuaXNQcmljZUxldmVsQ2hhbmdlZCA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uUHJpY2VMZXZlbENoYW5nZTogZnVuY3Rpb24gb25QcmljZUxldmVsQ2hhbmdlKCkgewogICAgICB0aGlzLmlzUHJpY2VMZXZlbENoYW5nZWQgPSB0cnVlOwogICAgICB0aGlzLmxvYWRUcmFuc2FjdGlvblJhdGUoKTsKICAgICAgdGhpcy5jbGVhclVPTUl0ZW0oKTsKICAgICAgdGhpcy5sb2FkUXVvdGUoKTsKICAgIH0sCiAgICBsb2FkU2FsZU9yZGVyOiBmdW5jdGlvbiBsb2FkU2FsZU9yZGVyKGlkKSB7CiAgICAgIHZhciBfdGhpczM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI2JChfY29udGV4dDI2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjYucHJldiA9IF9jb250ZXh0MjYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhpZCwgImxvYWQgaWQiKTsKICAgICAgICAgICAgICAgIF90aGlzMzQuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYW5kbGVyLnZpZXcoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBfdGhpczM0LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIF90aGlzMzQuaXNFZGl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX3RoaXMzNC5pdGVtTGluZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMzNC5zYWxlT3JkZXIgPSByZXMuZGF0YS5kYXRhWzBdOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzNC5iaW5kRGF0YSgpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZEVtcGxveWVlQ2VudGVyOiBmdW5jdGlvbiBsb2FkRW1wbG95ZWVDZW50ZXIoKSB7CiAgICAgIHZhciBfdGhpczM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI3JChfY29udGV4dDI3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjcucHJldiA9IF9jb250ZXh0MjcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzNS5lbXBsb3llZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBlbXBsb3llZUhhbmRsZXIuY2VudGVyKHVuZGVmaW5lZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczM1LnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzUuc2FsZU9yZGVyLmVtcGxveWVlID0ge307CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczM1LmVtcGxveWVlcyA9IFtdOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczM1LmVtcGxveWVlcyA9IHJlcy5kYXRhLmRhdGE7IC8vIGlmICh0aGlzLmVtcGxveWVlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnRyYW5zYWN0aW9uLmVtcGxveWVlID0gdGhpcy5lbXBsb3llZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzUuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpOwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzUuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRTaW5nbGVEYXRhOiBmdW5jdGlvbiBsb2FkU2luZ2xlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMzYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI4KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjgkKF9jb250ZXh0MjgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyOC5wcmV2ID0gX2NvbnRleHQyOC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMzNi4kcm91dGUubmFtZSA9PT0gIlNhbGUgT3JkZXIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMzYuaW5pdHNhbGVPcmRlcikgewogICAgICAgICAgICAgICAgICAvLyBFZGl0IE1vZGUKICAgICAgICAgICAgICAgICAgX3RoaXMzNi5pdGVtTGluZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMzNi5zYWxlT3JkZXIgPSBfdGhpczM2LmluaXRzYWxlT3JkZXI7CgogICAgICAgICAgICAgICAgICBfdGhpczM2LmJpbmREYXRhKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBuZXcKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMzYuJHJvdXRlLnBhcmFtcy5pZCAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczM2LmxvYWRTYWxlT3JkZXIoX3RoaXMzNi4kcm91dGUucGFyYW1zLmlkKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczM2LnNldERlZmF1bHREYXRhKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwcmVmaXhIYW5kbGVyLmdldCgic2FsZSBvcmRlciIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzNi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIF90aGlzMzYudHJhbnNhY3Rpb25UeXBlID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMzYudHJhbnNhY3Rpb25UeXBlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczM2LiRyb3V0ZS5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCB8fCBfdGhpczM2LiRyb3V0ZS5wYXJhbXMuaWQgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzNi5zYWxlT3JkZXIudHJhbnNhY3Rpb25UeXBlID0gX3RoaXMzNi50cmFuc2FjdGlvblR5cGVbMF07CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMzYuaW5pdFNhbGVPcmRlciAmJiBfdGhpczM2LiRyb3V0ZS5wYXJhbXMuaWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzYuZ2VuZXJhdGVOdW1iZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzYubG9hZFBheW1lbnRUZXJtKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkU2FsZUZvcm1Db250ZW50KCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkT3RoZXJDaGFyZ2UoKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkUHJpY2VMZXZlbCgpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkRGlzY291bnRJdGVtKDApOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkU2FsZUNoYW5uZWwoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzYubG9hZENhdGFsb2dzKCk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM2LmxvYWRMZWFkKCk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfdGhpczM2LmxvYWRUYXgoKTsKCiAgICAgICAgICAgICAgICBfdGhpczM2LmxvYWRTYWxlVW5pdEl0ZW1zKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzNi5sb2FkU2VnbWVudCgpOwoKICAgICAgICAgICAgICAgIF90aGlzMzYubG9hZExvY2F0aW9uKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzNi5sb2FkRW1wbG95ZWVDZW50ZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI4KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGFjdGl2YXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgdGhpcy5sb2FkVmlld3NhbGVPcmRlcigpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGluaXRzYWxlT3JkZXI6IGZ1bmN0aW9uIGluaXRzYWxlT3JkZXIoKSB7CiAgICAgIHRoaXMuaW5pdGlhbERhdGEoKTsKICAgIH0sCiAgICAkcm91dGU6ICJsb2FkU2luZ2xlRGF0YSIKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRUYXgoKTsKICAgIHRoaXMubG9hZFNhbGVVbml0SXRlbXMoKTsgLy8gdGhpcy5sb2FkUHJlZml4KCkKCiAgICB0aGlzLmxvYWRTZWdtZW50KCk7CiAgICB0aGlzLmxvYWRMb2NhdGlvbigpOyAvLyBsb2NhbFN0b3JhZ2Uuc2FsZU9yZGVyID0gIntuYW1lOiAnYWJjc3Nzcyd9IgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGFwcFR5cGU6IGZ1bmN0aW9uIGFwcFR5cGUoKSB7CiAgICAgIHJldHVybiBkYXRhU3RvcmUucHJvZHVjdFR5cGU7CiAgICB9LAogICAgZGF0ZUZvcm1hdHRlZDogZnVuY3Rpb24gZGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKCksIGluc3RpdHV0ZS5kYXRlRm9ybWF0KTsKICAgIH0sCiAgICBkYXRlVGltZUZvcm1hdHRlZDogZnVuY3Rpb24gZGF0ZVRpbWVGb3JtYXR0ZWQoKSB7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhpbnN0aXR1dGUuZGF0ZUZvcm1hdCArICIgSEg6bW0iLCAiaW5zdCBkYXRlIik7CiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSgpLCBpbnN0aXR1dGUuZGF0ZUZvcm1hdCArICIgSEg6bW0iKTsKICAgIH0sCiAgICB2YWxpZEN1c3RvbWVyOiBmdW5jdGlvbiB2YWxpZEN1c3RvbWVyKCkgewogICAgICByZXR1cm4gdGhpcy5jdXN0b21lci5pZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY3VzdG9tZXIuaWQgIT09IG51bGw7CiAgICB9LAogICAgaGlkZGVuQnV0dG9uOiBmdW5jdGlvbiBoaWRkZW5CdXR0b24oKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBkaXNhYmxlZE1lOiBmdW5jdGlvbiBkaXNhYmxlZE1lKCkgewogICAgICByZXR1cm4gISF0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21vdW50ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyOSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOSQoX2NvbnRleHQyOSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGhpcy5sb2FkU2luZ2xlRGF0YSgpOwogICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdERhdGEoMCwgdGhpcy5maWx0ZXIsIHRoaXMuY3VzQmFzZVVybCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdXBwbGllclJlcXVlc3REYXRhKDAsIHRoaXMuZmlsdGVyLCB0aGlzLnN1cEJhc2VVcmwpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1wbG95ZWVSZXF1ZXN0RGF0YSgwLCB0aGlzLmZpbHRlciwgdGhpcy5lbXBCYXNlVXJsKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMjksIHRoaXMpOwogICAgfSkpOwoKICAgIGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAgIHJldHVybiBfbW91bnRlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBtb3VudGVkOwogIH0oKQp9Ow=="},{"version":3,"sources":["Order.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col sm=\"12\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border rounded-sm\"\n            color=\"white\"\n          >\n            <v-row>\n              <v-col\n                class=\"py-0 pr-2\"\n                sm=\"12\"\n                cols=\"12\"\n                style=\"transition: 0.3s ease-in\"\n                :class=\"{ hide_big_bar_class: isHideBar }\"\n              >\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                  <v-card\n                    outlined\n                    dense\n                    class=\"no_border d-flex justify-space-between\"\n                  >\n                    <h2 class=\"mb-0\">{{ saleFormContent.saleOrder }}</h2>\n                    <div class=\"d-flex justify-end\">\n                      <h3\n                        style=\"color: #b3b5bc; font-size: 20px\"\n                        class=\"text-uppercase all_center\"\n                      >\n                        <span class=\"pointer\" @click=\"Help('sale order')\">{{\n                          $t(\"help\")\n                        }}</span>\n                        <v-icon\n                          @click=\"cancel()\"\n                          style=\"cursor: pointer; color: #333; font-size: 40px\"\n                          class=\"float-right mt-n1\"\n                          >close\n                        </v-icon>\n                      </h3>\n                    </div>\n                  </v-card>\n                  <v-card\n                    outlined\n                    dense\n                    class=\"px-3 mb-3 rounded-4 no_border\"\n                    color=\"grayBg\"\n                  >\n                    <v-row>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n         \n                        <label class=\"label mb-0\">{{\n                          $t(\"customer\")\n                        }}</label>\n                        <div class=\"kendo_dropdown_custom pb-2 mt-1\">\n                          <dropdownlist\n                            class=\"v-input__slot\"\n                            :data-items=\"customerList\"\n                            @change=\"onChange\"\n                            :rules=\"[(v) => !!v || 'Customer is required']\"\n                            :value=\"customer\"\n                            :data-item-key=\"dataItemKey\"\n                            :text-field=\"textField\"\n                            :default-item=\"defaultItem\"\n                            :filterable=\"true\"\n                            @filterchange=\"onFilterChange\"\n                            :required=\"true\"\n                            :valid=\"validCustomer\"\n                            :disabled=\"isEdit\"\n                          >\n                          </dropdownlist>\n                        </div>\n                        <label class=\"label\" style=\"\">{{ $t(\"date\") }}</label>\n                        <app-datepicker\n                          :initialDate=\"saleOrder.transactionDate\"\n                          @onChanged=\"onSaleOrderDateChanged\"\n                          @emitDate=\"saleOrder.transactionDate = $event\"\n                        />\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\">\n                        <label class=\"label\">{{ $t(\"number\") }}</label>\n                        <div class=\"mt-1  d-flex mr-0\">\n                          <div class=\"code_text flex-1 text-bold\">\n                            {{ saleOrder.transactionType.abbr }}\n                          </div>\n                          <v-text-field\n                            class=\"flex-2 custom-border\"\n                            disabled\n                            v-model=\"saleOrder.number\"\n                            outlined\n                            :rules=\"[(v) => !!v || 'Number is required']\"\n                            required\n                          />\n                          <v-icon\n                            color=\"black\"\n                            size=\"30\"\n                            style=\"height: 40px\"\n                            class=\"border_qrcode ml-1\"\n                            :disabled=\"disabledMe\"\n                            @click=\"generateNumber\"\n                            >mdi-qrcode\n                          </v-icon>\n                        </div>\n                        <label class=\"label mb-0\">{{\n                          $t(\"price_level\")\n                        }}</label>\n                        <v-select\n                          class=\"mt-1\"\n                          v-model=\"saleOrder.priceLevel\"\n                          :items=\"priceLevel\"\n                          :rules=\"[\n                            (v) => !!v['id'] || 'Price level is required',\n                          ]\"\n                          @change=\"onPriceLevelChange\"\n                          item-value=\"id\"\n                          item-text=\"name\"\n                          return-object\n                          placeholder=\"Price Level\"\n                          outlined\n                        />\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\">\n                        <div>\n                          <label class=\" mb-0\">{{ $t(\"currency\") }}</label>\n                          <p class=\"text-bold pt-4 pb-2\">{{ currencyCode }}</p>\n                        </div>\n                        <label class=\"label mb-0\">{{\n                          $t(\"sale_channel\")\n                        }}</label>\n                        <v-select class=\"mt-1\" outlined />\n                      </v-col>\n                    </v-row>\n                  </v-card>\n                  <v-row class=\"pt-1 px-3\" style=\"background-color: #fff\">\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0 pb-1 px-0\">\n                      <kendo-datasource\n                        ref=\"itemLineDS\"\n                        :data=\"itemLines\"\n                        :change=\"dataSourceChanged\"\n                      />\n                      <kendo-grid\n                        id=\"gridItemLineSaleOrder\"\n                        class=\"grid-function\"\n                        :data-source-ref=\"'itemLineDS'\"\n                        :sortable=\"false\"\n                        :column-menu=\"true\"\n                        :editable=\"true\"\n                        :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                          :command=\"{\n                            iconClass: 'k-icon k-i-trash',\n                            text: ' ',\n                            click: removeRow,\n                            className: 'btn-plus',\n                          }\"\n                          :title=\"''\"\n                          :width=\"63\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :title=\"$t('no.')\"\n                          :width=\"53\"\n                          :column-menu=\"false\"\n                          :template=\"rowNumberTmpl\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5;',\n                            class: 'text-products',\n                          }\"\n                          :attributes=\"{ style: 'text-align: products' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'item'\"\n                          :title=\"$t('item')\"\n                          :template=\"itemTemplate\"\n                          :editor=\"ItemDropDownEditor\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'description'\"\n                          :title=\"$t('description')\"\n                          :template=\"'<span>#=description#</span>'\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'uom'\"\n                          :title=\"$t('uom')\"\n                          :width=\"100\"\n                          :template=\"UOMTemplate\"\n                          :editor=\"UOMDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'qty'\"\n                          :title=\"$t('qty')\"\n                          :format=\"'{0:n}'\"\n                          :template=\"'<span>#=qty#</span>'\"\n                          :width=\"100\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left;' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'price'\"\n                          :title=\"$t('price')\"\n                          :width=\"150\"\n                          :template=\"priceFormat\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amount'\"\n                          :title=\"$t('amount')\"\n                          :width=\"150\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"amountFormat\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'vatTax'\"\n                          :title=\"$t('vat')\"\n                          :width=\"200\"\n                          :template=\"vatTemplate\"\n                          :hidden=\"appType != 'npo' ? false : true\"\n                          :editor=\"VatTaxDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'serviceDate'\"\n                          :title=\"$t('date_from')\"\n                          :width=\"160\"\n                          :hidden=\"!saleFormContent.serviceDate\"\n                          :template=\"'<span>#= kendo.toString(new Date(serviceDate), dateFormat)#</span>'\"\n                          :editor=\"ServiceDateEditor\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'serviceDateTo'\"\n                          :title=\"$t('date_to')\"\n                          :width=\"160\"\n                          :hidden=\"!saleFormContent.serviceDateTo\"\n                          :template=\"'<span>#= kendo.toString(new Date(serviceDateTo), dateFormat)#</span>'\"\n                          :editor=\"ServiceDateToEditor\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'modifier'\"\n                          :title=\"$t('modifier')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.modifier\"\n                          :template=\"'<span>#=modifier.name?modifier.name:``#</span>'\"\n                          :editor=\"ModifierDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'discountItem'\"\n                          :title=\"$t('discount_item')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.discountItem\"\n                          :template=\"discountItemTemplate\"\n                          :editor=\"DiscountItemDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'specificTax'\"\n                          :title=\"$t('specificTax')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.specificTax\"\n                          :template=\"'<span>#=specificTax.defaultTax?specificTax.defaultTax:``#</span>'\"\n                          :editor=\"SpecificTaxDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'otherTax'\"\n                          :title=\"$t('otherTax')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.otherTax\"\n                          :template=\"'<span>#=otherTax.defaultTax?otherTax.defaultTax:``#</span>'\"\n                          :editor=\"OtherTaxDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'publicLightingTax'\"\n                          :title=\"$t('pl_tax')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.publicLightingTax\"\n                          :template=\"'<span>#=publicLightingTax.defaultTax?publicLightingTax.defaultTax:``#</span>'\"\n                          :editor=\"PublicLightingTaxDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'saleUnit'\"\n                          :title=\"$t('sale_unit')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.saleUnit\"\n                          :template=\"saleUnitTemplate\"\n                          :editor=\"SaleUnitDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'employee'\"\n                          :title=\"$t('employee')\"\n                          :width=\"200\"\n                          :hidden=\"!saleFormContent.employee\"\n                          :template=\"empImpl\"\n                          :editor=\"EmployeeDropDownEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left' }\"\n                        />\n                      </kendo-grid>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0 pl-0\">\n                      <v-btn class=\"float-left btn_plus\" @click=\"addRow\">\n                        <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                      </v-btn>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                      <v-row>\n                        <v-row>\n                          <v-col class=\"pt-0\" sm=\"5\" cols=\"6\">\n                          </v-col>\n                          <v-col class=\"pt-0\" sm=\"7\" cols=\"12\">\n                            <v-simple-table>\n                              <template v-slot:default>\n                                <tbody>\n                                  <tr v-if=\"appType != 'npo'\">\n                                    <td class=\"text-left pr-0\">\n                                      {{ $t(\"subtotal\") }}\n                                    </td>\n                                    <td class=\"text-center\">:</td>\n                                    <td class=\"text-right\">\n                                      {{ numberFormat(saleOrder.subTotal) }}\n                                    </td>\n                                  </tr>\n                                  <tr v-if=\"appType != 'npo'\">\n                                    <td class=\"text-left pr-0\">\n                                      {{ $t(\"general_discount\") }}\n                                    </td>\n                                    <td class=\"text-center\">:</td>\n                                    <td class=\"text-right\">\n                                      ({{\n                                        numberFormat(saleOrder.discountTotal)\n                                      }})\n                                    </td>\n                                  </tr>\n                                  <tr style=\"background: #f8f8f9\">\n                                    <td class=\"text-left text-uppercase pr-0\">\n                                      {{ $t(\"total\") }}\n                                    </td>\n                                    <td class=\"text-center\">:</td>\n                                    <td\n                                      class=\"text-right primary--text text-bold\"\n                                      id=\"total\"\n                                    >\n                                      {{ numberFormat(saleOrder.total) }}\n                                    </td>\n                                  </tr>\n                                </tbody>\n                              </template>\n                            </v-simple-table>\n                          </v-col>\n                        </v-row>\n                      </v-row>\n                    </v-col>\n                  </v-row>\n                  <v-divider />\n                  <v-card outlined dense class=\"no_border function_footer\">\n                    <v-alert type=\"warning\" v-model=\"alert\" dismissible>\n                      <span v-html=\"errorMessage\" />\n                    </v-alert>\n                    <v-menu>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-btn\n                          class=\"mr-2 float-left select_template\"\n                          v-on=\"on\"\n                        >\n                          {{ $t(\"select_template\") }}\n                          <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                        </v-btn>\n                      </template>\n                      <v-list>\n                        <v-list-item\n                          v-for=\"(item, index) in formAR\"\n                          :key=\"index\"\n                        >\n                          <v-list-item-title>{{ item.name }}</v-list-item-title>\n                        </v-list-item>\n                      </v-list>\n                    </v-menu>\n                    <v-btn\n                      class=\"text-capitalize black--text float-left\"\n                      color=\"primary\"\n                      outlined\n                      @click=\"cancel\"\n                      >{{ $t(\"cancel\") }}\n                    </v-btn>\n                    <!--                    <v-menu>-->\n                    <!--                      <template v-slot:activator=\"{ on }\">-->\n                    <!--                        <v-btn class=\"ml-2 float-right text-capitalize  white&#45;&#45;text\"-->\n                    <!--                               color=\"primary\" v-on=\"on\">-->\n                    <!--                          {{ $t('save_option') }}-->\n                    <!--                          <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>-->\n                    <!--                        </v-btn>-->\n                    <!--                      </template>-->\n                    <!--                      <v-list rounded>-->\n                    <!--                        <v-list-item-group>-->\n                    <!--                          <v-list-item>-->\n                    <!--                            <v-list-item-content>-->\n                    <!--                              <v-list-item-title v-if=\"!isEdit\" @click=\"saveNew\">-->\n                    <!--                                {{ $t('save_new') }}-->\n                    <!--                              </v-list-item-title>-->\n                    <!--                            </v-list-item-content>-->\n                    <!--                          </v-list-item>-->\n                    <!--                          <v-list-item>-->\n                    <!--                            <v-list-item-content>-->\n                    <!--                              <v-list-item-title @click=\"saveClose\">{{-->\n                    <!--                                  $t('save_close')-->\n                    <!--                                }}-->\n                    <!--                              </v-list-item-title>-->\n                    <!--                            </v-list-item-content>-->\n                    <!--                          </v-list-item>-->\n\n                    <!--                        </v-list-item-group>-->\n                    <!--                      </v-list>-->\n                    <!--                    </v-menu>-->\n                    <v-btn\n                      @click=\"saveClose\"\n                      class=\"float-right text-capitalize white--text\"\n                      :disabled=\"btnDisabled\"\n                      color=\"primary\"\n                    >\n                      {{ $t(\"save_close\") }}\n                    </v-btn>\n                    <v-btn\n                      color=\"secondary\"\n                      style=\"margin-right: 10px !important\"\n                      :disabled=\"btnDisabled\"\n                      class=\"white--text float-right text-capitalize\"\n                      @click=\"saveNew\"\n                      :hidden=\"hiddenButton\"\n                      >{{ $t(\"save_new\") }}\n                    </v-btn>\n                  </v-card>\n                </v-form>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n      <LoadingMe\n        :isLoading=\"showLoading\"\n        :fullPage=\"false\"\n        :myLoading=\"true\"\n        type=\"loading\"\n        :alertMessage=\"loadingAlert\"\n        :color=\"loadingColorAlert\"\n        :alertText=\"loadingTextAlert\"\n      />\n      <v-dialog v-model=\"dialogCatalog\" max-width=\"850px\">\n        <v-card>\n          <div class=\"modal_header\">\n            <v-card-title>{{ $t(\"catalog\") }}</v-card-title>\n            <v-icon class=\"btn_close\" @click=\"dialogCatalog = false\"\n              >close\n            </v-icon>\n          </div>\n          <v-card-text class=\"modal_text_conent\">\n            <v-row>\n              <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                <v-simple-table>\n                  <kendo-datasource\n                    ref=\"catalogDatasource\"\n                    :data=\"catalogs\"\n                    :schema=\"gridSchema\"\n                  />\n                  <kendo-grid\n                    id=\"gridCatalog\"\n                    class=\"grid-function\"\n                    :data-source-ref=\"'catalogDatasource'\"\n                    :style=\"{ width: '100%' }\"\n                    :noRecords=\"true\"\n                    :pageable-numeric=\"false\"\n                    :pageable-previous-next=\"false\"\n                    :pageable-messages-display=\"'Showing {2} data items'\"\n                    :scrollable-virtual=\"true\"\n                  >\n                    <kendo-grid-column\n                      :field=\"'images'\"\n                      :title=\"$t('image')\"\n                      :width=\"50\"\n                      :template=\"loadImage\"\n                      :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                    />\n                    <kendo-grid-column\n                      :field=\"'number'\"\n                      :title=\"$t('number')\"\n                      :width=\"70\"\n                      :template=\"'<span>#=number#</span>'\"\n                      :groupHeaderColumnTemplate=\"'#=value#'\"\n                      :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                    />\n                    <kendo-grid-column\n                      :field=\"'name'\"\n                      :title=\"$t('name')\"\n                      :attributes=\"{ class: 'tb_name_td' }\"\n                      :width=\"100\"\n                      :template=\"'<span>#=name#</span>'\"\n                      :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                    />\n                    <kendo-grid-column\n                      :field=\"'description'\"\n                      :title=\"$t('description')\"\n                      :width=\"100\"\n                      :template=\"'<span>#=description#</span>'\"\n                      :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                    />\n                    <kendo-grid-column\n                      :field=\"'noOfProduct'\"\n                      :title=\"$t('products')\"\n                      :template=\"'<span>#=noOfProduct#</span>'\"\n                      :width=\"50\"\n                      :headerAttributes=\"{\n                        style: 'text-align: left; background-color: #EDF1F5',\n                      }\"\n                    />\n                    <kendo-grid-column\n                      :field=\"''\"\n                      :title=\"$t('action')\"\n                      :width=\"60\"\n                      :command=\"[{ text: $t('add'), click: addCatalog }]\"\n                      :headerAttributes=\"{\n                        style: 'text-align: left; background-color: #EDF1F5',\n                      }\"\n                    />\n                  </kendo-grid>\n                </v-simple-table>\n              </v-col>\n            </v-row>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport { i18n } from \"@/i18n\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport kendo from \"@progress/kendo-ui\";\nimport { DropDownList } from \"@progress/kendo-vue-dropdowns\";\nimport SaleFormContentModel from \"@/scripts/model/SaleFormContent\";\nimport ItemLineModel from \"@/scripts/invoice/model/ItemLine\";\nimport { uuid } from \"vue-uuid\";\nimport SaleOrderModel from \"@/scripts/model/Transaction\";\n\n/* Store */\nimport store from \"@/store\";\n\nconst institute = store.state.institute.institute;\n\nimport { ShowResource } from \"@/observable/store\";\nimport paymentTermHandler_ from \"@/scripts/paymentterm/handler/paymentTermHandler\";\nimport creditLimitHandler from \"@/scripts/creditLimit/handler/creditLimitHandler\";\nimport Helper from \"@/helper\";\nimport transactionHandler from \"@/scripts/transactionHandler\";\nimport { dataStore } from \"@/observable/store\";\n\n////handler\nconst saleOrderHandler = require(\"@/scripts/transactionHandler\");\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nconst customerHandler = require(\"@/scripts/customerHandler\");\nconst projectHandler = require(\"@/scripts/projectHandler\");\nconst prefixHandler = require(\"@/scripts/prefixHandler\");\nconst paymentTermHandler = require(\"@/scripts/paymentTermHandler\");\nconst priceLevelHandler = require(\"@/scripts/priceLevelHandler\");\nconst saleFormContentHandler = require(\"@/scripts/saleFormContentHandler\");\nconst employeeHandler = require(\"@/scripts/employeeHandler\");\nconst itemModifierHandler = require(\"@/scripts/itemModifierHandler\");\nconst discountItemHandler = require(\"@/scripts/discountItemHandler\");\nconst uomPriceHandler = require(\"@/scripts/uomPriceHandler\");\nconst productVariantHandler = require(\"@/scripts/productVariantHandler\");\nconst otherChargeHandler = require(\"@/scripts/otherChargeHandler\");\nconst locationHandler = require(\"@/scripts/locationHandler\");\nconst settingsHandler = require(\"@/scripts/settingsHandler\");\nconst saleChannelHandler = require(\"@/scripts/saleChannelHandler\");\nconst saleUnitItemHandler = require(\"@/scripts/saleUnitItemHandler\");\nconst settingHandler = require(\"@/scripts/settingHandler\");\nconst catalogHandler = require(\"@/scripts/catalogHandler\");\nconst productHandler = require(\"@/scripts/productHandler\");\nconst currencyHandler = require(\"@/scripts/currency/handler/currencyHandler\");\nconst supplierHandler = require(\"@/scripts/supplierHandler\");\n\nconst saleFormContentModel = new SaleFormContentModel({});\nconst itemLineModel = new ItemLineModel({});\n//other\nconst $ = kendo.jQuery;\nconst textField = \"numberName\";\nconst keyField = \"id\";\nconst defaultItem = { [textField]: \"Select Customer...\", [keyField]: null };\nconst defaultSupItem = { [textField]: \"Select Supplier...\", [keyField]: null };\nconst defaultEmpItem = { [textField]: \"Select Employee...\", [keyField]: null };\nconst emptyItem = { [textField]: \"loading ...\" };\nconst invoicePrefix = \"lin-\";\nconst DISCOUNT_TYPE = \"?type=Sale\";\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\nexport default {\n  name: \"SaleOrder\",\n  props: {\n    id: {\n      type: String,\n    },\n    initSaleOrder: {\n      type: SaleOrderModel,\n    },\n  },\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    \"app-datepicker\": DatePickerComponent,\n    dropdownlist: DropDownList,\n    // \"app-monthof-picker\": () => import(\"@/components/kendo_templates/MonthOfPicker\"),\n  },\n  data: () => ({\n    saleOrder: new SaleOrderModel(),\n    isEdit: false,\n    numSelect: [1],\n    dialogTax: false,\n    theDate: \"\",\n    //Catalog\n    dialogCatalog: false,\n    gridSchema: {\n      model: {\n        id: \"id\",\n      },\n    },\n    imgURL: \"https://s3-ap-southeast-1.amazonaws.com/images.banhji/\",\n    // LoadingMe\n    showLoading: false,\n    loadingAlert: false,\n    loadingColorAlert: \"\",\n    loadingTextAlert: \"\",\n    bill_date: \"\",\n    alert: false,\n    files: [],\n    errors: [],\n    // Form validation\n    valid: true,\n    templates: [\n      { title: \"Draft\" },\n      { title: \"Open\" },\n      { title: \"Partially Closed\" },\n      { title: \"Closed\" },\n    ],\n    saleOrderType: 1,\n    saleOrderTypes: [\n      { name: \"Standard Order\", id: 1 },\n      { name: \"Open Order\", id: 2 },\n      { name: \"Contract\", id: 3 },\n      { name: \"Consignment Order\", id: 4 },\n      // {name: 'Order required Purchase', id: 5},\n    ],\n    isRequredPurchase: false,\n    col_expand: 9,\n    col_hide: 3,\n    isHideBar: false,\n    filter: \"\",\n    textField: \"numberName\",\n    dataItemKey: \"id\",\n    defaultItem: defaultItem,\n    defaultSupItem: defaultSupItem,\n    defaultEmpItem: defaultEmpItem,\n    mOtherCharge: [],\n    //item\n    itemLines: [],\n    itemLine: itemLineModel,\n    dateFormat: itemLineModel.dateFormat,\n    //customer\n    cusBaseUrl: customerHandler.search(),\n    customer: {},\n    customerList: [],\n    supplierList: [],\n    supplier: {},\n    supBaseUrl: supplierHandler.search(),\n    billingAddress: [],\n    deliveryAddress: [],\n    priceLevel: [],\n    //date\n    paymentTerms: [],\n    transactions: [],\n    employeeList: [],\n    employee: {},\n    empBaseUrl: employeeHandler.searchURL(),\n    saleChannelList: [],\n    locations: [],\n    customerProjects: [],\n    segments: [],\n    transactionType: {},\n    taxListTotal: {},\n    customerDiscountItem: [],\n    customerSaleUnit: [],\n    saleFormContent: saleFormContentModel,\n    transactionDate: new Date().toISOString().substr(0, 10),\n    monthOf: false,\n    deliveryDateTime: new Date(),\n    validityDate: new Date().toISOString().substr(0, 10),\n    specificDiscountItem: [],\n    otherChargeList: [],\n    saleUnitItemList: [],\n    otherTax: [],\n    specificTax: [],\n    publicLightingTax: [],\n    vatTax: [],\n    tax: [],\n    loggedUser: {\n      id: cookie.creator,\n      name: cookie.email,\n    },\n    leads: [],\n    catalogs: [],\n    txnList: [],\n    quotes: [],\n    txnLists: [],\n    isSaveNew: false,\n    isSaveClose: false,\n    isSavePrint: false,\n    isSaveDraft: false,\n    exchangeRate: {},\n    baseCurrencyCode: \"\",\n    currencyCode: \"\",\n    transactionRate: 1,\n    saveOption: \"\",\n    formAR: [\n      { id: 1, name: \"Default Form\" },\n      { id: 2, name: \"Form 80mm\" },\n    ],\n    isPriceLevelChanged: false,\n    refFrom: [], // can SO can be from Sale Quotes\n    btnDisabled: false,\n  }),\n  methods: {\n    formatDateTime(value) {\n      return kendo.toString(new Date(value), this.dateFormat + ` hh:mm tt`);\n    },\n    amountFormat(value) {\n      return kendo.toString(value.amount, `n${this.saleFormContent.decimal}`);\n    },\n    priceFormat(value) {\n      return kendo.toString(value.price, `n${this.saleFormContent.decimal}`);\n    },\n    Help(key_search) {\n      ShowResource(key_search);\n    },\n    initialData() {\n      if (this.initSaleOrder) {\n        // Edit Mode\n        this.saleOrder = this.initSaleOrder;\n        this.saleOrder.creditLimit = 0;\n        this.saleOrder.currentBalance = 0;\n        // window.console.log(this.initSaleOrder, 'propData')\n        this.bindData();\n      } else {\n        // Brand New Mode\n        if (this.$route.params.id === undefined) {\n          this.setDefaultData();\n        }\n      }\n    },\n    setDefaultData() {\n      // Brand New Mode\n      // window.console.log('default or clear')\n      this.isEdit = false;\n      this.saleOrder = new SaleOrderModel({});\n      //sale order type\n      if (this.$route.params.id !== undefined) {\n        this.saleOrder.saleOrderType = 1;\n        this.saleOrderType = 1;\n        if (this.appType === \"npo\" || this.appType === \"Public Sectors\") {\n          this.saleOrder.saleOrderType = 3;\n          this.saleOrderType = 3;\n        }\n      }\n      this.saleOrder.deliveryDateTime = new Date();\n      this.saleOrder.formTemplate = 1;\n      this.saleOrder.transactionDate = new Date().toISOString().substr(0, 10);\n      // Generate Number\n      this.itemLines = [];\n      // let ds = this.$refs.itemLineDS.kendoWidget();\n      // ds.data([]);\n      // Add 2 default lines\n      this.removeEmptyLine();\n      setTimeout(() => {\n        this.addRow();\n        // this.addRow()\n      }, 500);\n      // Add 2 default lines\n      this.otherChargeList = [];\n      this.mOtherCharge = [];\n      this.employee = {};\n      this.taxListTotal = {};\n      this.quotes = [];\n      this.isSaveNew = false;\n      this.isSaveClose = false;\n      this.isSavePrint = false;\n      this.isSaveDraft = false;\n      this.creditLimitUsage(0, 1);\n      this.isRequredPurchase = false;\n      this.customer = {};\n    },\n    bindData() {\n      // window.console.log(this.saleOrder, 'bindData')\n      // Edit Mode\n      if (this.saleOrder) {\n        if (this.saleOrder.hasOwnProperty(\"customer\")) {\n          this.isEdit = true;\n          this.customer = this.saleOrder.customer;\n          // let e = {value: this.saleOrder.customer}\n          // this.onChange(e)\n          this.billingAddress = this.saleOrder.customer.billingAddress;\n          this.deliveryAddress = this.saleOrder.customer.deliveryAddress;\n          // this.customerProjects = this.saleOrder.customer.\n          this.taxListTotal = this.saleOrder.taxListTotal;\n          this.itemLines = this.saleOrder.itemLines;\n          this.mOtherCharge = this.saleOrder.otherCharge;\n          this.loadProjectByCustomer();\n          if (this.customer.hasOwnProperty(\"id\")) {\n            this.loadCustomerBalance(this.customer.id);\n          }\n        }\n      }\n    },\n    addSelect() {\n      let amount_num = this.numSelect.length;\n      let num = this.numSelect[amount_num - 1];\n      let new_num = num + 1;\n      let lenghtItem = this.specificDiscountItem.length;\n      if (new_num <= lenghtItem) {\n        this.numSelect.push(new_num);\n      }\n    },\n    removeSelect(index) {\n      this.numSelect.splice(index, 1);\n      // window.console.log(index, this.numSelect)\n      // this.selectDiscount.splice(index,1)\n      // window.console.log(\"remove\",this.selectDiscount)\n      // this.selectDiscount = this.selectDiscount.filter(item =>  item.id != val.id);\n    },\n    errorMessage() {},\n    accountDropDownEditor() {},\n    hide_smallsitebar() {\n      if (!this.isHideBar) {\n        // this.col_expand = 12\n        // this.col_hide = 0\n        this.isHideBar = true;\n      } else {\n        // this.col_expand = 9\n        // this.col_hide = 3\n        this.isHideBar = false;\n      }\n    },\n    //number\n    generateNumber() {\n      if (this.isEdit == false) {\n        let d = new Date().toISOString().substr(0, 10);\n        if (this.saleOrder.transactionDate) {\n          // window.console.log(this.transactionDate)\n          d = this.saleOrder.transactionDate;\n        }\n        let data = {\n          abbr: this.saleOrder.transactionType.abbr,\n          structure: this.saleOrder.transactionType.structure,\n          transactionDate: d,\n          type: \"Sale Order\",\n        };\n        billingHandler\n          .lastNumber(data)\n          .then((response) => {\n            if (response.data.statusCode === 200) {\n              const res = response.data.data;\n              const lastNumber = this.zeroPad(\n                parseInt(res.lastNumber),\n                this.saleOrder.transactionType.format\n              );\n              const number =\n                res.suffix +\n                this.saleOrder.transactionType.numberSeparator +\n                lastNumber;\n              this.saleOrder.number = number;\n            }\n          })\n          .catch((e) => {\n            this.errors.push(e);\n          });\n      }\n    },\n    zeroPad(num, places) {\n      return String(num).padStart(places, \"0\");\n    },\n    //customer\n    onChange(event) {\n      window.console.log(event);\n      const value = event.value;\n      if (value && value[textField] === emptyItem[textField]) {\n        return;\n      }\n      this.customer = value;\n      this.saleOrder.customer = value;\n      // this.invoice = value\n      // this.saleOrder.paymentTerm = value.hasOwnProperty(\"paymentTerm\")\n      //   ? value.paymentTerm\n      //   : {};\n      this.saleOrder.priceLevel = value.hasOwnProperty(\"priceLevel\")\n        ? value.priceLevel\n        : {};\n      const baseCurrency = value.hasOwnProperty(\"baseCurrency\")\n        ? value.baseCurrency\n        : {};\n      if (baseCurrency.hasOwnProperty(\"code\")) {\n        this.baseCurrencyCode = baseCurrency.code;\n      }\n      const priceLevel = value.hasOwnProperty(\"priceLevel\")\n        ? value.priceLevel\n        : {};\n      if (priceLevel.hasOwnProperty(\"currency\")) {\n        if (priceLevel.currency.hasOwnProperty(\"id\")) {\n          this.loadTransactionRate();\n        }\n      }\n      this.billingAddress = value.hasOwnProperty(\"billingAddress\")\n        ? value.billingAddress\n        : [];\n      this.deliveryAddress = value.hasOwnProperty(\"deliveryAddress\")\n        ? value.deliveryAddress\n        : [];\n      if (this.billingAddress.length > 0) {\n        this.saleOrder.billingAddress = this.billingAddress[0];\n      }\n      if (this.deliveryAddress.length > 0) {\n        this.saleOrder.deliveryAddress = this.deliveryAddress[0];\n      }\n      this.onSaleOrderDateChanged();\n      this.loadProjectByCustomer();\n      // const creditLimit = value.hasOwnProperty(\"creditLimit\")\n      //   ? value.creditLimit\n      //   : 0;\n      // this.saleOrder.creditLimit = kendo.parseFloat(creditLimit);\n      this.loadCreditLimit();\n      this.loadCustomerBalance(this.customer.id);\n      // load quote\n      this.loadQuote();\n      this.loadPaymentTermList();\n    },\n    onFilterChange(event) {\n      const filter = event.filter.value;\n      this.requestData(0, filter, this.cusBaseUrl);\n      this.filter = filter;\n    },\n    async requestData(skip, filter, baseUrl) {\n      let url = baseUrl + `?filter=${filter}`;\n      if (this.appType === \"npo\") {\n        url = baseUrl + `?filter=${filter}&is_donor=true`;\n      }\n      this.requestStarted = true;\n      fetch(url)\n        .then((response) => {\n          return response.json();\n        })\n        .then(this.afterFetch);\n    },\n    afterFetch(json) {\n      this.customerList = json.data;\n    },\n    //supplier\n    onSupplierChange(event) {\n      window.console.log(event);\n      const value = event.value;\n      if (value && value[textField] === emptyItem[textField]) {\n        return;\n      }\n      this.supplier = value;\n      this.saleOrder.supplier = value;\n    },\n    onSupplierFilterChange(event) {\n      const supfilter = event.filter.value;\n      this.supplierRequestData(0, supfilter, this.supBaseUrl);\n    },\n    supplierRequestData(skip, filter, baseUrl) {\n      const url = baseUrl + `?filter=${filter}`;\n      this.requestStarted = true;\n      fetch(url)\n        .then((response) => {\n          return response.json();\n        })\n        .then(this.supAfterFetch);\n    },\n    supAfterFetch(json) {\n      this.supplierList = json.data;\n    },\n    //employee\n    onEmployeeChange(event) {\n      const value = event.value;\n      if (value && value[textField] === emptyItem[textField]) {\n        return;\n      }\n      this.employee = value;\n      this.saleOrder.employee = value;\n    },\n    onEmployeeFilterChanged(event) {\n      const empfilter = event.filter.value;\n      this.employeeRequestData(0, empfilter, this.empBaseUrl);\n    },\n    employeeRequestData(skip, filter, baseUrl) {\n      const url = baseUrl + `?filter=${filter}`;\n      this.requestStarted = true;\n      fetch(url)\n        .then((response) => {\n          return response.json();\n        })\n        .then(this.empAfterFetch);\n    },\n    empAfterFetch(json) {\n      this.employeeList = json.data;\n    },\n    removeRow(e) {\n      e.preventDefault();\n      const grid = kendo.jQuery(\"#gridItemLineSaleOrder\").data(\"kendoGrid\"),\n        dataSource = grid.dataSource,\n        dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n      if (dataSource.total() > 1) {\n        dataSource.remove(dataItem);\n      }\n      this.autoCalculate();\n    },\n    //date\n    async onSaleOrderDateChanged() {\n      if (this.saleOrder.transactionDate) {\n        this.saleOrder.monthOf = new Date(this.saleOrder.transactionDate)\n          .toISOString()\n          .substr(0, 7);\n      }\n      await this.loadCreditLimit();\n      await this.loadCustomerBalance(this.customer.id);\n      await this.onPriceLevelChange();\n      await this.loadPaymentTermList();\n      if (this.customer) {\n        const paymentTerm = this.saleOrder.paymentTerm || {};\n        const netDue = paymentTerm.netDue || 0;\n        const someDate = new Date(this.saleOrder.transactionDate);\n        someDate.setDate(someDate.getDate() + parseInt(netDue)); //number  of days to add, e.x. 15 days\n        this.saleOrder.validityDate = someDate.toISOString().substr(0, 10);\n        window.console.log(\"dueDate\", this.saleOrder.validityDate);\n      }\n      if (this.$route.params.id === undefined) {\n        this.generateNumber();\n      }\n    },\n    onPaymentTermChanged() {\n      // this.onSaleOrderDateChanged();\n      if (this.customer) {\n        const paymentTerm = this.saleOrder.paymentTerm || {};\n        const netDue = paymentTerm.netDue || 0;\n        const someDate = new Date(this.saleOrder.transactionDate);\n        someDate.setDate(someDate.getDate() + parseInt(netDue)); //number  of days to add, e.x. 15 days\n        this.saleOrder.validityDate = someDate.toISOString().substr(0, 10);\n        window.console.log(\"dueDate\", this.saleOrder.validityDate);\n      }\n    },\n    //number\n    numberFormat(value) {\n      // window.console.log(this.saleFormContent.decimal,'nimol')\n      return kendo.toString(value, `n${this.saleFormContent.decimal}`);\n      // return value\n    },\n    //\n    async loadLead() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          const strFilter = \"?type=Sale Lead\";\n          this.leads = [];\n          billingHandler.list(strFilter).then((res) => {\n            if (res) {\n              if (res.data) {\n                if (res.data.statusCode === 200) {\n                  this.showLoading = false;\n                  this.leads = res.data.data;\n                }\n              }\n            }\n            this.showLoading = false;\n          });\n        }, 10);\n      });\n    },\n    async loadPaymentTerm() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          paymentTermHandler.getAll().then((res) => {\n            this.showLoading = false;\n            this.paymentTerms = res.data.data;\n            if (this.paymentTerms.length > 0) {\n              if (\n                this.$route.params.id !== undefined ||\n                this.$route.params.id != \"\"\n              ) {\n                if (this.saleOrder) {\n                  this.saleOrder.paymentTerm = this.paymentTerms[0];\n                }\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadPriceLevel() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          const strFilter = \"?nature=sale\";\n          priceLevelHandler.get(strFilter).then((res) => {\n            this.priceLevel = res;\n            if (this.priceLevel.length > 0) {\n              if (\n                this.$route.params.id !== undefined ||\n                this.$route.params.id != \"\"\n              ) {\n                if (this.saleOrder) {\n                  this.saleOrder.priceLevel = this.priceLevel[0];\n                }\n                this.loadTransactionRate();\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    removeDuplicate(array) {\n      const result = [];\n      const map = new Map();\n      for (const item of array) {\n        if (!map.has(item.id)) {\n          map.set(item.id, true); // set any value to Map\n          result.push(item);\n        }\n      }\n      return result;\n    },\n    autoCalculateDiscount(discountItem, subTotal) {\n      if (discountItem) {\n        window.console.log(\"discountItem\", discountItem, subTotal);\n        const nature = discountItem.nature || \"\";\n        const amount = discountItem.amount || 0;\n        if (nature === \"Amount\") {\n          return parseFloat(amount);\n        } else if (nature === \"Percentage\") {\n          return subTotal * (parseFloat(amount) / 100);\n        } else {\n          return 0;\n        }\n      } else {\n        return 0;\n      }\n    },\n    autoCalculateTax(tax, amount) {\n      if (tax) {\n        var formula = tax.formula;\n        var inAmt = kendo.parseFloat(amount);\n        var nAmt = kendo.parseFloat(amount);\n        var taxBase = kendo.parseFloat(tax.taxBase) / 100;\n        var rate = kendo.parseFloat(tax.rate) / 100;\n        var total = eval(formula);\n        window.console.log(inAmt, nAmt, taxBase, rate, formula, total);\n        // window.console.log(amount)\n        return total;\n      }\n      // return 0\n    },\n    autoCalculateTaxByType(tax) {\n      // return by a key\n      const groupAll = (list) =>\n        list.reduce((tax, item) => {\n          const taxAmount = tax[item.name] || 0;\n          return Object.assign({}, tax, {\n            [item.name]: taxAmount + parseFloat(item.amount),\n          });\n        }, {});\n      this.taxListTotal = groupAll(tax);\n      // window.console.log('nimol', groupAll(tax))\n      // this.\n    },\n    dataSourceChanged(e) {\n      if (e.field) {\n        let dataRow = e.items[0],\n          buom = {},\n          conversionRate = 1,\n          wac = 0,\n          qoh = 0,\n          amount = 0,\n          xAmount = 0;\n        switch (e.field) {\n          case \"item\":\n            // this.attribute_ = this.attributes.filter(m => m.type.id === dataRow.variant.id)\n            dataRow.set(\"description\", dataRow.item.description);\n            buom = dataRow.item.uom || {};\n            dataRow.set(\"buom\", buom);\n            // this.itemChange(dataRow)\n            break;\n          case \"uom\":\n            if (this.isPriceLevelChanged === false) {\n              try {\n                try {\n                  buom = dataRow.uom.buom || {};\n                  qoh = dataRow.uom.qoh || 0;\n                  conversionRate = dataRow.uom.conversionRate || 1;\n                  wac = dataRow.uom.wac || 0;\n                  dataRow.set(\"buom\", buom);\n                  dataRow.set(\"wac\", wac);\n                  dataRow.set(\"qoh\", qoh);\n                  dataRow.set(\"conversionRate\", parseFloat(conversionRate));\n                  if (dataRow.uom) {\n                    amount =\n                      parseFloat(dataRow.uom.price) * parseFloat(dataRow.qty);\n                    xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n                    dataRow.set(\"price\", parseFloat(dataRow.uom.price));\n                    dataRow.set(\"amount\", amount);\n                    dataRow.set(\"exchangeAmount\", xAmount);\n                  } else {\n                    amount =\n                      parseFloat(dataRow.price) * parseFloat(dataRow.qty);\n                    xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n                    dataRow.set(\"price\", parseFloat(dataRow.price));\n                    dataRow.set(\"amount\", amount);\n                    dataRow.set(\"exchangeAmount\", xAmount);\n                  }\n                } catch (err) {\n                  dataRow.set(\"buom\", {});\n                  dataRow.set(\"conversionRate\", 1);\n                  dataRow.set(\"price\", 0);\n                  dataRow.set(\"qoh\", 0);\n                  dataRow.set(\"wac\", 0);\n                  dataRow.set(\"amount\", 0);\n                  dataRow.set(\"exchangeAmount\", 0);\n                }\n              } catch {\n                dataRow.set(\"price\", 0);\n                dataRow.set(\"amount\", 0);\n              }\n            }\n            break;\n          case \"price\":\n            try {\n              amount = parseFloat(dataRow.price) * parseFloat(dataRow.qty);\n              xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n              dataRow.set(\"price\", parseFloat(dataRow.price));\n              dataRow.set(\"amount\", amount);\n              dataRow.set(\"exchangeAmount\", xAmount);\n              // window.console.log('price',dataRow.price)\n            } catch {\n              dataRow.set(\"price\", 0);\n              dataRow.set(\"amount\", 0);\n              dataRow.set(\"exchangeAmount\", 0);\n            }\n            break;\n          case \"qty\":\n            try {\n              amount = parseFloat(dataRow.price) * parseFloat(dataRow.qty);\n              xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n              dataRow.set(\"price\", parseFloat(dataRow.price));\n              dataRow.set(\"amount\", amount);\n              dataRow.set(\"exchangeAmount\", xAmount);\n            } catch {\n              dataRow.set(\"price\", 0);\n              dataRow.set(\"amount\", 0);\n              dataRow.set(\"exchangeAmount\", 0);\n            }\n            break;\n          case \"otherTax\":\n            // window.console.log(\"--\", dataRow)\n            break;\n          default:\n            break;\n        }\n        if (e.field) {\n          this.autoCalculate();\n        }\n      }\n    },\n    autoCalculate() {\n      let ds = this.$refs.itemLineDS.kendoWidget(),\n        subTotal = 0,\n        totalTax = 0,\n        discountTotal = 0,\n        spTax = 0,\n        pltax = 0,\n        otherTax = 0,\n        vatTax = 0,\n        discountInvoice = 0,\n        taxList = [],\n        discountItem = [],\n        saleUnit = [],\n        inclusiveTax = 0,\n        itemSubtotal = 0,\n        txnItmSubtotal = 0,\n        serviceSubtotal = 0,\n        itemDiscount = 0,\n        serviceDiscount = 0,\n        txnDiscount = 0;\n\n      const rows = ds.data().filter((m) => parseFloat(m.amount) > 0);\n      rows.forEach((value) => {\n        let modifierPrice = 0;\n        if (value.modifier) {\n          modifierPrice = kendo.parseFloat(value.modifier.price);\n        }\n\n        // subTotal += (kendo.parseFloat(value.amount) + modifierPrice)\n        let discount = 0;\n        if (value.discountItem) {\n          let subTo =\n            kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n          discount = this.autoCalculateDiscount(value.discountItem, subTo);\n          window.console.log(\n            \"discount item\",\n            discount,\n            \"--\",\n            value.discountItem\n          );\n          value[\"discountAmount\"] = discount;\n          value[\"discountExchangeAmount\"] =\n            discount * kendo.parseFloat(this.saleOrder.txnRate);\n          if (value.discountItem.hasOwnProperty(\"id\")) {\n            discountItem.push(value.discountItem);\n          }\n          discountTotal += discount;\n        }\n        if (value.saleUnit) {\n          if (value.saleUnit.hasOwnProperty(\"id\")) {\n            saleUnit.push(value.saleUnit);\n          }\n        }\n        if (value.specificTax) {\n          spTax = this.autoCalculateTax(\n            value.specificTax,\n            kendo.parseFloat(value.amount) - kendo.parseFloat(discount)\n          );\n          // window.console.log('sp ', discount)\n          spTax = kendo.parseFloat(spTax) ? kendo.parseFloat(spTax) : 0;\n          value[\"specificTaxAmount\"] = spTax;\n          value[\"specificTaxExchangeAmount\"] =\n            spTax * kendo.parseFloat(this.saleOrder.txnRate);\n          const tax = value.specificTax;\n          const baseAmount = tax.baseAmount;\n          if (baseAmount) {\n            if (baseAmount.toLowerCase() === \"inclusive\") {\n              inclusiveTax += spTax;\n            }\n          }\n          if (value.specificTax.hasOwnProperty(\"taxType\")) {\n            taxList.push({\n              name: value.specificTax.taxType.name,\n              amount: spTax,\n              id: value.specificTax.taxType.id,\n            });\n          }\n        }\n        if (value.publicLightingTax) {\n          pltax = this.autoCalculateTax(\n            value.publicLightingTax,\n            kendo.parseFloat(value.amount) - kendo.parseFloat(discount)\n          );\n          pltax = kendo.parseFloat(pltax) ? kendo.parseFloat(pltax) : 0;\n          value[\"publicLightingTaxAmount\"] = pltax;\n          value[\"publicLightingTaxExchangeAmount\"] =\n            pltax * kendo.parseFloat(this.saleOrder.txnRate);\n          const tax = value.publicLightingTax;\n          const baseAmount = tax.baseAmount;\n          if (baseAmount) {\n            if (baseAmount.toLowerCase() === \"inclusive\") {\n              inclusiveTax += pltax;\n            }\n          }\n          if (value.publicLightingTax.hasOwnProperty(\"taxType\")) {\n            taxList.push({\n              name: value.publicLightingTax.taxType.name,\n              amount: pltax,\n              id: value.publicLightingTax.taxType.id,\n            });\n          }\n        }\n        if (value.otherTax) {\n          otherTax = this.autoCalculateTax(\n            value.otherTax,\n            kendo.parseFloat(value.amount) - kendo.parseFloat(discount)\n          );\n          otherTax = kendo.parseFloat(otherTax)\n            ? kendo.parseFloat(otherTax)\n            : 0;\n          value[\"otherTaxAmount\"] = otherTax;\n          value[\"otherTaxExchangeAmount\"] =\n            otherTax * kendo.parseFloat(this.saleOrder.txnRate);\n          const tax = value.otherTax;\n          const baseAmount = tax.baseAmount;\n          if (baseAmount) {\n            if (baseAmount.toLowerCase() === \"inclusive\") {\n              inclusiveTax += otherTax;\n            }\n          }\n          if (value.otherTax.hasOwnProperty(\"taxType\")) {\n            taxList.push({\n              name: value.otherTax.taxType.name,\n              amount: otherTax,\n              id: value.otherTax.taxType.id,\n            });\n          }\n        }\n\n        if (value.vatTax) {\n          // window.console.log('Vat Tax', value.vatTax)\n          let amt =\n            kendo.parseFloat(spTax ? spTax : 0) +\n            kendo.parseFloat(pltax ? pltax : 0) +\n            kendo.parseFloat(otherTax ? otherTax : 0) +\n            (kendo.parseFloat(value.amount ? value.amount : 0) -\n              (discount ? discount : 0));\n          vatTax = this.autoCalculateTax(value.vatTax, amt);\n          vatTax = kendo.parseFloat(vatTax) ? kendo.parseFloat(vatTax) : 0;\n          value[\"vatTaxAmount\"] = vatTax;\n          value[\"vatTaxExchangeAmount\"] =\n            vatTax * kendo.parseFloat(this.saleOrder.txnRate);\n          const tax = value.vatTax;\n          const baseAmount = tax.baseAmount;\n          if (baseAmount) {\n            if (baseAmount.toLowerCase() === \"inclusive\") {\n              inclusiveTax += vatTax;\n            }\n          }\n          if (value.vatTax.hasOwnProperty(\"taxType\")) {\n            taxList.push({\n              name: value.vatTax.taxType.name,\n              amount: vatTax,\n              id: value.vatTax.taxType.id,\n            });\n          }\n        }\n        totalTax +=\n          kendo.parseFloat(spTax ? spTax : 0) +\n          kendo.parseFloat(pltax ? pltax : 0) +\n          kendo.parseFloat(otherTax ? otherTax : 0) +\n          kendo.parseFloat(vatTax ? vatTax : 0);\n        subTotal +=\n          kendo.parseFloat(value.amount) + modifierPrice - inclusiveTax;\n\n        const item = value.item;\n        const itmType = item.type || \"\";\n        if (itmType === \"Variant\") {\n          itemSubtotal +=\n            kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n          itemDiscount += kendo.parseFloat(discount);\n        } else if (itmType === \"Service\") {\n          serviceSubtotal +=\n            kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n          serviceDiscount += kendo.parseFloat(discount);\n        } else {\n          txnItmSubtotal +=\n            kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n          txnDiscount += kendo.parseFloat(discount);\n        }\n        //include Tax Amount\n        const amountNodiscount =\n          kendo.parseFloat(value.price) * kendo.parseFloat(value.qty) -\n          discount;\n        const includeTaxAmount =\n          amountNodiscount + vatTax + pltax + spTax + otherTax;\n        value[\"includeTaxAmount\"] = includeTaxAmount;\n        value[\"includeTaxExchangeAmount\"] =\n          includeTaxAmount * kendo.parseFloat(this.saleOrder.txnRate);\n      });\n\n      this.saleOrder.itemSubtotal = itemSubtotal;\n      this.saleOrder.exchangeItemSubtotal =\n        itemSubtotal * kendo.parseFloat(this.saleOrder.txnRate);\n\n      this.saleOrder.serviceSubtotal = serviceSubtotal;\n      this.saleOrder.exchangeServiceSubtotal =\n        serviceSubtotal * kendo.parseFloat(this.saleOrder.txnRate);\n      this.saleOrder.txnItmSubtotal = txnItmSubtotal;\n      this.saleOrder.exchangeTxnItmSubtotal =\n        txnItmSubtotal * kendo.parseFloat(this.saleOrder.txnRate);\n\n      this.saleOrder.itemDiscount = itemDiscount;\n      this.saleOrder.exchangeItemDiscount =\n        itemDiscount * kendo.parseFloat(this.saleOrder.txnRate);\n      this.saleOrder.serviceDiscount = serviceDiscount;\n      this.saleOrder.exchangeServiceDiscount =\n        serviceDiscount * kendo.parseFloat(this.saleOrder.txnRate);\n      this.saleOrder.txnItmDiscount = txnDiscount;\n      this.saleOrder.exchangeTxnItmDiscount =\n        txnDiscount * kendo.parseFloat(this.saleOrder.txnRate);\n\n      discountTotal = discountTotal ? discountTotal : 0;\n\n      // window.console.log(spTax, pltax, otherTax, vatTax)\n      let total =\n        kendo.parseFloat(subTotal) -\n        kendo.parseFloat(discountTotal) +\n        kendo.parseFloat(totalTax);\n      this.saleOrder.subTotal = subTotal;\n      this.saleOrder.totalTaxAmount = kendo.parseFloat(totalTax);\n      this.saleOrder.discountTotal = kendo.parseFloat(discountTotal);\n      if (this.saleOrder.specificDiscountItem) {\n        discountInvoice = this.autoCalculateDiscount(\n          this.saleOrder.specificDiscountItem,\n          kendo.parseFloat(subTotal)\n        );\n        discountInvoice = discountInvoice ? discountInvoice : 0;\n      }\n      // this.onOtherChargeChange()\n      this.saleOrder.total =\n        kendo.parseFloat(total) -\n        discountInvoice +\n        kendo.parseFloat(this.saleOrder.otherChargeAmount);\n      this.saleOrder.exchangeAmount =\n        kendo.parseFloat(this.saleOrder.total) *\n        kendo.parseFloat(this.saleOrder.txnRate);\n      this.autoCalculateTaxByType(taxList);\n      this.customerDiscountItem = this.removeDuplicate(discountItem);\n      this.customerSaleUnit = this.removeDuplicate(saleUnit);\n      // window.console.log('discount ', this.customerDiscountItem)\n    },\n    rowNumberTmpl(dataItem) {\n      let ds = this.$refs.itemLineDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    async loadSaleFormContent() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          saleFormContentHandler.list().then((res) => {\n            if (res.data.statusCode === 200) {\n              const data = res.data.data;\n              if (data.length > 0) {\n                this.saleFormContent = data[0];\n                // window.console.log(data[0])\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    vatTemplate(dataItem) {\n      const vat = dataItem.vatTax;\n      if (vat) {\n        return `<span>${vat.defaultTax ? vat.defaultTax : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    itemTemplate(dataItem) {\n      const item = dataItem.item;\n      if (item) {\n        return `<span>${item.name ? item.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    UOMTemplate(dataItem) {\n      const uom = dataItem.uom;\n      if (uom) {\n        return `<span>${uom.uom ? uom.uom.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    saleUnitTemplate(dataItem) {\n      const saleUnit = dataItem.saleUnit;\n      if (saleUnit) {\n        return `<span>${saleUnit.name ? saleUnit.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    discountItemTemplate(dataItem) {\n      const discountItem = dataItem.discountItem;\n      if (discountItem) {\n        return `<span>${discountItem.code ? discountItem.code : ``} - ${\n          discountItem.name ? discountItem.name : ``\n        }</span>`;\n      } else {\n        return ``;\n      }\n    },\n    ServiceDateEditor(container, options) {\n      kendo\n        .jQuery('<input required name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDatePicker();\n\n      // let ds = this.$refs.itemLineDS.kendoWidget()\n      // window.console.log(ds.data())\n      // // const dateString = kendo.toString((new Date(options.model.items.serviceDate)), this.itemLine.dateFormat)\n      // // const dateString = kendo.toString(options.model.items.serviceDate)\n      // const $input = $(\"<input value=\" + options.model.serviceDate + \" />\").appendTo(container)\n      // $input.kendoDatePicker()\n      // // $input.appendTo(container)\n      // // options.model.items.serviceDate = dateString\n      // window.console.log($input)\n    },\n    ServiceDateToEditor(container, options) {\n      kendo\n        .jQuery('<input required name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDatePicker();\n    },\n    ItemDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"contains\",\n          dataTextField: \"name\",\n          dataValueField: \"id\",\n          headerTemplate:\n            '<div class=\"dropdown-header k-widget k-header\">' +\n            \"<span>Items </span>\" +\n            \"<span></span>\" +\n            \"</div>\",\n          template: \"<span>#=name#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            serverFiltering: true,\n            transport: {\n              read: {\n                url: productVariantHandler.itemSearchURL(\n                  \"?plId=\" + this.saleOrder.priceLevel.id\n                ),\n              },\n              dataType: \"json\",\n            },\n            schema: {\n              model: {\n                id: \"id\",\n                fields: {\n                  id: { type: \"string\" },\n                  name: { type: \"string\" },\n                  sku: { type: \"string\" },\n                },\n              },\n              data: function (response) {\n                return response.data;\n              },\n              total: function (response) {\n                return response.data.count;\n              },\n            },\n            // data: this.variants\n          }),\n        });\n    },\n    UOMDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"uom.name\",\n          dataValueField: \"uom.id\",\n          cascadeFrom: \"item\",\n          template: \"<span>#=uom.name || `No Price Level`#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            serverFiltering: true,\n            transport: {\n              read: {\n                // url: uomPriceHandler.getURL(options.model.item.id, this.saleOrder.priceLevel.id),\n                url: uomPriceHandler.uomPriceByPriceLevelURL(\n                  \"id=\" +\n                    options.model.item.id +\n                    \"&plId=\" +\n                    this.saleOrder.priceLevel.id +\n                    \"&date=\" +\n                    this.saleOrder.transactionDate\n                ),\n              },\n              dataType: \"json\",\n            },\n            schema: {\n              model: {\n                id: \"id\",\n                fields: {\n                  id: { type: \"string\" },\n                  // name: {type: \"string\"},\n                  // sku: {type: \"string\"},\n                },\n              },\n              data: function (response) {\n                return response.data;\n              },\n              total: function (response) {\n                return response.data.count;\n              },\n            },\n            // data: this.variants\n          }),\n        });\n    },\n    DiscountItemDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"name\",\n          dataValueField: \"id\",\n          cascadeFrom: \"item\",\n          template: \"<span>#=code# - #=name#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            serverFiltering: true,\n            transport: {\n              read: {\n                url: discountItemHandler.getURL(DISCOUNT_TYPE),\n              },\n              dataType: \"json\",\n            },\n            schema: {\n              model: {\n                id: \"id\",\n                fields: {\n                  id: { type: \"string\" },\n                  // name: {type: \"string\"},\n                  // sku: {type: \"string\"},\n                },\n              },\n              data: function (response) {\n                return response.data;\n              },\n              total: function (response) {\n                return response.data.count;\n              },\n            },\n          }),\n        });\n    },\n    SpecificTaxDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"defaultTax\",\n          dataValueField: \"id\",\n          template: \"<span>#=defaultTax#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            data: this.specificTax.filter((m) => {\n              if (options.model.hasOwnProperty(\"vatTax\")) {\n                const vat = options.model.vatTax;\n                if (vat) {\n                  if (\n                    options.model.vatTax !== null ||\n                    options.model.vatTax !== \"null\"\n                  ) {\n                    if (options.model.vatTax.baseAmount) {\n                      return (\n                        m.baseAmount.toLowerCase() ===\n                        options.model.vatTax.baseAmount.toLowerCase()\n                      );\n                    } else {\n                      return m;\n                    }\n                  }\n                } else {\n                  return m;\n                }\n              }\n            }),\n          }),\n        });\n    },\n    PublicLightingTaxDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"defaultTax\",\n          dataValueField: \"id\",\n          template: \"<span>#=defaultTax#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            data: this.publicLightingTax.filter((m) => {\n              if (options.model.hasOwnProperty(\"vatTax\")) {\n                const vat = options.model.vatTax;\n                if (vat) {\n                  if (\n                    options.model.vatTax !== null &&\n                    options.model.vatTax !== \"null\"\n                  ) {\n                    if (options.model.vatTax.baseAmount) {\n                      return (\n                        m.baseAmount.toLowerCase() ===\n                        options.model.vatTax.baseAmount.toLowerCase()\n                      );\n                    } else {\n                      return m;\n                    }\n                  }\n                } else {\n                  return m;\n                }\n              }\n            }),\n          }),\n        });\n    },\n    OtherTaxDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"defaultTax\",\n          dataValueField: \"id\",\n          template: \"<span>#=defaultTax#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            data: this.otherTax.filter((m) => {\n              if (options.model.hasOwnProperty(\"vatTax\")) {\n                const vat = options.model.vatTax;\n                if (vat) {\n                  if (\n                    options.model.vatTax !== null &&\n                    options.model.vatTax !== \"null\"\n                  ) {\n                    if (options.model.vatTax.baseAmount) {\n                      return (\n                        m.baseAmount.toLowerCase() ===\n                        options.model.vatTax.baseAmount.toLowerCase()\n                      );\n                    } else {\n                      return m;\n                    }\n                  }\n                } else {\n                  return m;\n                }\n              }\n            }),\n          }),\n        });\n    },\n    VatTaxDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"defaultTax\",\n          dataValueField: \"id\",\n          template: \"<span>#=defaultTax#</span>\",\n          optionLabel: \"--Select--\",\n          dataSource: new kendo.data.DataSource({\n            data: this.vatTax,\n          }),\n        });\n    },\n    SaleUnitDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"name\",\n          dataValueField: \"id\",\n          template: \"<span>#=code# - #=name#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            data: this.saleUnitItemList,\n          }),\n        });\n    },\n    ModifierDropDownEditor(container, options) {\n      const item = options.model.item || {};\n      const uom = item.uom || {};\n      const itemId = item.id || \"\";\n      const uomId = uom.id || \"\";\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"contains\",\n          dataTextField: \"name\",\n          dataValueField: \"id\",\n          headerTemplate:\n            '<div class=\"dropdown-header k-widget k-header\">' +\n            \"<span>Modifier </span>\" +\n            \"<span></span>\" +\n            \"</div>\",\n          template: \"<span>#=name#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            serverFiltering: true,\n            transport: {\n              read: {\n                url: itemModifierHandler.searchURL(\n                  \"?plId=\" +\n                    this.saleOrder.priceLevel.id +\n                    \"&id=\" +\n                    itemId +\n                    \"&uomId=\" +\n                    uomId\n                ),\n              },\n              dataType: \"json\",\n            },\n            schema: {\n              model: {\n                id: \"id\",\n                fields: {\n                  id: { type: \"string\" },\n                  name: { type: \"string\" },\n                  price: { type: \"number\" },\n                  uom: { type: \"string\" },\n                },\n              },\n              data: function (response) {\n                return response.data;\n              },\n              total: function (response) {\n                return response.data.count;\n              },\n            },\n          }),\n        });\n    },\n    EmployeeDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input data-bind=\"value:' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoMultiSelect({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          suggest: true,\n          filter: \"contains\",\n          dataTextField: \"name\",\n          dataValueField: \"id\",\n          headerTemplate:\n            '<div class=\"dropdown-header k-widget k-header\">' +\n            \"<span>Employee </span>\" +\n            \"<span></span>\" +\n            \"</div>\",\n          template: \"<span>#=name#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            serverFiltering: true,\n            transport: {\n              read: {\n                url: employeeHandler.searchURL(),\n              },\n              dataType: \"json\",\n            },\n            schema: {\n              model: {\n                id: \"id\",\n                fields: {\n                  id: { type: \"string\" },\n                  name: { type: \"string\" },\n                  firstName: { type: \"string\" },\n                  lastName: { type: \"string\" },\n                },\n              },\n              data: function (response) {\n                return response.data;\n              },\n              total: function (response) {\n                return response.data.count;\n              },\n            },\n          }),\n        });\n    },\n    empImpl(dataItem) {\n      let empIds = [];\n      dataItem.employee.forEach((m) => {\n        empIds.push(m.firstName + \" - \" + m.lastName);\n      });\n      // window.console.log(empIds.join(', '))\n      return `<span>${empIds.join(\", \")}</span>`;\n    },\n    addRow() {\n      let ds = this.$refs.itemLineDS.kendoWidget(),\n        total = ds.total();\n      this.itemLine.id = invoicePrefix + uuid.v1();\n      ds.insert(total, this.itemLine);\n    },\n    onSpecificDiscountChanged() {\n      if (this.saleOrder.specificDiscountItem) {\n        const discountOrder = this.autoCalculateDiscount(\n          this.saleOrder.specificDiscountItem,\n          this.saleOrder.subTotal\n        );\n        this.saleOrder.specificDiscountTotal = kendo.toString(\n          discountOrder ? discountOrder : 0,\n          \"n\"\n        );\n        let total =\n          kendo.parseFloat(this.saleOrder.subTotal) -\n          (kendo.parseFloat(this.saleOrder.discountTotal) +\n            kendo.parseFloat(this.saleOrder.totalTaxAmount)) -\n          discountOrder;\n        this.saleOrder.total = kendo.toString(total, \"n\");\n      }\n    },\n    onOtherChargeChange() {\n      let otherCharge = 0;\n      this.mOtherCharge.forEach((m) => {\n        otherCharge += this.autoCalculateDiscount(m, this.saleOrder.subTotal);\n      });\n      this.saleOrder.otherChargeAmount = otherCharge;\n      this.autoCalculate();\n    },\n    async loadOtherCharge() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          otherChargeHandler.list().then((res) => {\n            if (res.data.statusCode === 200) {\n              this.otherChargeList = res.data.data;\n            }\n          });\n        }, 10);\n      });\n    },\n    onOtherAmount(value) {\n      return this.autoCalculateDiscount(value, this.saleOrder.subTotal);\n    },\n    async loadDiscountItem() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          discountItemHandler.list().then((res) => {\n            if (res.data.statusCode === 200) {\n              this.specificDiscountItem = res.data.data;\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadSegment() {\n      this.segments = [];\n      const roleType = dataStore.roleType || 0;\n      if (roleType === 0) {\n        if (dataStore.roleData) {\n          const roleData = dataStore.roleData || [];\n          const segment = roleData.filter((itm) => itm.type === \"segment\");\n          const segmentDefault = segment.filter((m) => m.isDefault === 1);\n          this.segments = segment;\n          if (\n            this.$route.params.id === undefined ||\n            this.$route.params.id === \"\"\n          ) {\n            if (segmentDefault.length > 0) {\n              this.saleOrder.segment = segmentDefault[0];\n            }\n          }\n        }\n      } else if (roleType === 1) {\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(\"resolved\");\n            this.segments = [];\n            settingsHandler.getSeg().then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.segments = res.data.data;\n              } else {\n                this.showLoading = false;\n              }\n            });\n          }, 10);\n        });\n      }\n    },\n    async loadLocation() {\n      this.locations = [];\n      const roleType = dataStore.roleType || 0;\n      if (roleType === 0) {\n        if (dataStore.roleData) {\n          const roleData = dataStore.roleData || [];\n          const location = roleData.filter((itm) => itm.type === \"location\");\n          const locationDefault = location.filter((m) => m.isDefault === 1);\n          this.locations = location;\n          if (\n            this.$route.params.id === undefined ||\n            this.$route.params.id === \"\"\n          ) {\n            if (locationDefault.length > 0) {\n              this.saleOrder.location = locationDefault[0];\n            }\n          }\n        }\n      } else if (roleType === 1) {\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(\"resolved\");\n            this.locations = [];\n            locationHandler.list().then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.locations = res.data.data;\n              } else {\n                this.showLoading = false;\n              }\n            });\n          }, 10);\n        });\n      }\n    },\n    async loadProjectByCustomer() {\n      this.customerProjects = [];\n      const roleType = dataStore.roleType || 0;\n      if (roleType === 0) {\n        if (dataStore.roleData) {\n          const roleData = dataStore.roleData || [];\n          const project = roleData.filter((itm) => itm.type === \"project\");\n          project.forEach((k) => {\n            const customers = k.customers || [];\n            const proCustomer = customers.filter(\n              (n) => n.customer.id === this.customer.id\n            );\n            if (proCustomer.length > 0) {\n              this.customerProjects.push(k);\n            }\n          });\n          if (\n            this.$route.params.id === undefined ||\n            this.$route.params.id === \"\"\n          ) {\n            const projectDefault = this.customerProjects.filter(\n              (m) => m.isDefault === 1\n            );\n            if (projectDefault.length > 0) {\n              this.saleOrder.project = projectDefault[0];\n            }\n          }\n        }\n      } else if (roleType === 1) {\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(\"resolved\");\n            projectHandler.getByCustomer(this.customer.id).then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.customerProjects = res.data.data;\n              } else {\n                this.showLoading = false;\n              }\n            });\n          }, 10);\n        });\n      }\n    },\n    async loadSaleChannel() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          saleChannelHandler.get().then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoading = false;\n              this.saleChannelList = res.data.data;\n              if (this.saleChannelList.length > 0) {\n                if (\n                  this.$route.params.id !== undefined ||\n                  this.$route.params.id != \"\"\n                ) {\n                  this.saleOrder.saleChannel = this.saleChannelList[0];\n                }\n              }\n            } else {\n              this.showLoading = false;\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadTax() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          settingHandler.get().then((res) => {\n            this.tax = res;\n            this.otherTax = this.tax.filter(\n              (m) =>\n                (m.taxType.typeId === 7 || m.taxType.typeId === 10) &&\n                m.transactionType === \"Sale\"\n            ); // valuable tax\n            this.specificTax = this.tax.filter(\n              (m) =>\n                (m.taxType.typeId === 8 || m.taxType.typeId === 10) &&\n                m.transactionType === \"Sale\"\n            ); // valuable tax\n            this.publicLightingTax = this.tax.filter(\n              (m) =>\n                (m.taxType.typeId === 9 || m.taxType.typeId === 10) &&\n                m.transactionType === \"Sale\"\n            ); // valuable tax\n            this.vatTax = this.tax.filter(\n              (m) =>\n                (m.taxType.typeId === 1 ||\n                  m.taxType.typeId === 8 ||\n                  m.taxType.typeId === 10) &&\n                m.transactionType === \"Sale\"\n            ); // valuable tax\n          });\n        }, 10);\n      });\n    },\n    async loadSaleUnitItems() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          saleUnitItemHandler.list().then((res) => {\n            if (res.data.statusCode === 200)\n              this.saleUnitItemList = res.data.data;\n          });\n        }, 10);\n      });\n    },\n    async loadCustomerBalance(id) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          const strFilter = id + \"?type=bal\";\n          billingHandler\n            .balance(strFilter)\n            .then((res) => {\n              if (res.data.statusCode === 200) {\n                const data = res.data.data;\n                if (data.length > 0) {\n                  this.saleOrder.currentBalance = data[0].balance;\n                }\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    creditLimitUsage(balance, creditLimit) {\n      let num = 0;\n      let per = (balance / creditLimit) * 100;\n      if (isNaN(per)) {\n        // It isn't a number\n        num = 0;\n      } else {\n        // It is a number\n        num = per;\n      }\n      return num + \" %\";\n    },\n    close(data) {\n      if (this.$route.params.id === undefined) {\n        this.$router.push({\n          name: \"Customers\",\n          params: {\n            data: data,\n          },\n        });\n      } else {\n        window.history.go(-1);\n      }\n      window.console.log(data, \"close\");\n      // localStorage.data.id = JSON.stringify(data)\n    },\n    //catalog\n    loadImage(dataItem) {\n      if (dataItem.hasOwnProperty(\"images\")) {\n        if (dataItem.images.hasOwnProperty(\"default\")) {\n          const url = this.imgURL + dataItem.images.default.thumb;\n          return (\n            \"<img width='50' height='50' style= 'margin: auto;display: block;' src='\" +\n            url +\n            \"' />\"\n          );\n        }\n      } else {\n        return \"\";\n      }\n    },\n    async loadCatalogs() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          catalogHandler.get().then((res) => {\n            this.showLoading = false;\n            this.catalogs = res;\n          });\n        }, 10);\n      });\n    },\n    addCatalog(e) {\n      e.preventDefault();\n      let grid = kendo.jQuery(\"#gridCatalog\").data(\"kendoGrid\");\n      let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n      // window.console.log(dataItem)\n      if (dataItem.variants.length > 0) {\n        dataItem.variants.forEach((m) => {\n          if (m.hasOwnProperty(\"variant\")) {\n            if (m.variant.hasOwnProperty(\"id\")) {\n              this.loadSingleItem(m.variant.id, \"i\");\n            }\n          }\n        });\n        this.dialogCatalog = false;\n      }\n      if (dataItem.services.length > 0) {\n        dataItem.services.forEach((m) => {\n          if (m.hasOwnProperty(\"service\")) {\n            if (m.service.hasOwnProperty(\"id\")) {\n              this.loadSingleItem(m.service.id, \"s\");\n            }\n          }\n        });\n        this.dialogCatalog = false;\n      }\n    },\n    async loadSingleItem(itemId, type) {\n      new Promise((resolve) => {\n        resolve(\"resolved\");\n        setTimeout(() => {\n          this.showLoading = true;\n          productHandler.getOne(itemId).then((res) => {\n            this.showLoading = false;\n            let data = res;\n            window.console.log(data);\n            let ds = this.$refs.itemLineDS.kendoWidget(),\n              total = ds.total();\n            this.itemLine.id = invoicePrefix + uuid.v1();\n            this.itemLine.item = data;\n            if (type == \"i\") {\n              this.itemLine.description = data.variant.saleDescription;\n            } else {\n              this.itemLine.description = data.saleDescription;\n            }\n            ds.insert(total, this.itemLine);\n          });\n        }, 500);\n      });\n    },\n    async loadPrefix() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          prefixHandler.get(\"sale order\").then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoading = false;\n              this.transactionType = res.data.data;\n              if (this.transactionType.length > 0) {\n                this.saleOrder.transactionType = this.transactionType[0];\n                if (!this.initsaleOrder) {\n                  this.generateNumber();\n                }\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadViewsaleOrder() {\n      if (!this.initsaleOrder) {\n        this.isEdit = true;\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(\"resolved\");\n            this.showLoading = true;\n            saleOrderHandler\n              .view(this.$route.params.id)\n              .then((res) => {\n                if (res.data.statusCode === 200) {\n                  this.showLoading = false;\n                  this.saleOrder = res.data.data[0];\n                  this.quotes = this.saleOrder.refFrom || [];\n                  this.bindData();\n                }\n              })\n              .catch();\n            {\n              this.showLoading = false;\n            }\n          }, 10);\n        });\n      } else {\n        this.setDefaultData();\n      }\n    },\n    async loadQuote() {\n      if (this.saleOrder.customer) {\n        this.refFrom = [];\n        this.showLoading = true;\n        this.quotes = [];\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(\"resolved\");\n            let data = {\n              method: \"by_customer\",\n              customer: this.saleOrder.customer.id,\n              segmentId: this.saleOrder.segment.id,\n              locationId: this.saleOrder.location.id,\n              priceLevelId: this.saleOrder.priceLevel.id,\n              type: \"Sale Quote\",\n            };\n            saleOrderHandler.search(data).then((res) => {\n              this.showLoading = false;\n              this.quotes = res.data.data;\n            });\n          }, 10);\n        });\n      }\n    },\n    addQuote(data) {\n      //add item lines\n      let txnData = data.txnData || {};\n      const itemLines = data.itemLines || [];\n      this.refFrom.push({\n        id: data.id || \"\",\n        reference: data.number || \"\",\n        customerId: txnData.customerId || \"\",\n      });\n      if (itemLines.length > 0) {\n        this.removeEmptyLine();\n        itemLines.forEach((m) => {\n          m.txn_add_id = txnData.id;\n          m.id = invoicePrefix + uuid.v1();\n          let ds = this.$refs.itemLineDS.kendoWidget(),\n            total = ds.total();\n          ds.insert(total, m);\n        });\n        // this.addRow();\n      }\n      //add other chard\n      if (data.otherCharge.length > 0) {\n        data.otherCharge.forEach((m) => {\n          m.txn_add_id = txnData.id;\n          this.mOtherCharge.push(m);\n        });\n        this.autoCalculate();\n        this.onOtherChargeChange();\n      }\n      // add txnlist\n      this.txnLists.push(txnData);\n      if (txnData.lead.id !== undefined) {\n        this.txnLists.push(txnData.lead);\n      }\n      // window.console.log(this.txnLists);\n      //remove txn\n      const index = this.quotes.findIndex((item) => {\n        return data.id === item.id;\n      });\n      this.autoCalculate();\n      this.quotes.splice(index, 1);\n      // this.quotes[index].is_added = true\n      // window.console.log(this.quotes)\n      this.saleOrder.refFrom = this.removeDuplicate(this.refFrom);\n      window.console.log(\"ref\", this.saleOrder.refFrom);\n    },\n    removeEmptyLine() {\n      const grid = kendo.jQuery(\"#gridItemLineSaleOrder\").data(\"kendoGrid\"),\n        dataSource = grid.dataSource;\n      dataSource.data().forEach((m) => {\n        if (m) {\n          const item = m.item || {};\n          if (item.id === undefined || item.id === \"\") {\n            dataSource.remove(m);\n          }\n        }\n      });\n    },\n    async loadTransactionRate() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          const date = new Date(this.saleOrder.transactionDate)\n            .toISOString()\n            .substr(0, 10);\n          const priceLevel = this.saleOrder.priceLevel;\n          let code = \"\";\n          if (priceLevel.hasOwnProperty(\"currency\")) {\n            if (priceLevel.currency.hasOwnProperty(\"code\")) {\n              code = priceLevel.currency.code;\n            }\n          }\n          if (code !== undefined || code !== \"\") {\n            this.showLoading = true;\n            currencyHandler\n              .getLastExchangeRateByDate(date, code)\n              .then((res) => {\n                if (res.data.statusCode === 200) {\n                  this.showLoading = false;\n                  this.exchangeRate = res.data.data[0];\n                  this.currencyCode = this.exchangeRate.code;\n                  this.transactionRate = this.exchangeRate.rate;\n                  this.saleOrder.txnRate = this.exchangeRate.rate;\n                  this.saleOrder.exchangeRate = this.exchangeRate;\n                  this.showLoading = false;\n                }\n              });\n          }\n        }, 10);\n      });\n    },\n    clear() {\n      this.id = undefined;\n      this.saleOrder = {};\n      this.itemLines = [];\n      this.customer = \"\";\n      this.generateNumber();\n    },\n    saveClose() {\n      let id = \"\";\n      if (this.customer.hasOwnProperty(\"id\")) {\n        id = this.customer.id || \"\";\n      }\n      if (id === \"\") {\n        this.$snotify.error(\"customer is require\");\n        return;\n      }\n      let ds = this.$refs.itemLineDS.kendoWidget();\n      let d1 = ds.data().filter((m) => m.amount > 0);\n      let dataValidate = 0;\n      d1.forEach((value, index) => {\n        if (value.item.id == undefined || value.uom.id == undefined) {\n          this.$snotify.error(\n            \"Please check Item or Uom  on row \" + (index + 1)\n          );\n        } else {\n          dataValidate += 1;\n        }\n      });\n      if (d1.length == dataValidate) {\n        this.isSaveClose = true;\n        this.saveOption = \"saveClose\";\n        this.save();\n      }\n    },\n    savePrint() {\n      this.isSavePrint = true;\n      this.saveOption = \"savePrint\";\n      this.save();\n    },\n    saveNew() {\n      this.saveOption = \"saveNew\";\n      this.isSaveNew = true;\n      this.save();\n    },\n    cancel() {\n      this.$swal({\n        title: i18n.t(\"msg_title_warning\"),\n        text: i18n.t(\"msg_discard\"),\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: i18n.t(\"cancel\"),\n        confirmButtonColor: \"#4d4848\",\n        cancelButtonColor: \"#ED1A3A\",\n        confirmButtonText: i18n.t(\"discard\"),\n      }).then((resultCen) => {\n        window.console.log(resultCen);\n        if (resultCen.value) {\n          this.$router.go(-1);\n        }\n      });\n    },\n    saveDraft() {\n      this.saveOption = \"saveDraft\";\n      this.isSaveDraft = true;\n      this.save();\n    },\n    async save() {\n      if (!this.$refs.form.validate()) {\n        this.$refs.form.validate();\n        return;\n      }\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.removeEmptyLine();\n          let itemLineDS = this.$refs.itemLineDS.kendoWidget(),\n            total = itemLineDS.total();\n          let itmLines = itemLineDS\n            .data()\n            .filter((m) => m.amount > 0)\n            .map((m) => {\n              return new ItemLineModel(m);\n            });\n\n          if (total <= 0) {\n            this.$snotify.error(\"Field Required!\");\n            return;\n          }\n          if (!this.isRequredPurchase) {\n            this.saleOrder.supplier = {};\n          } else {\n            //is for purchase\n            this.saleOrderType = 5;\n          }\n          // window.console.log(itmLines, 'itmLines')\n          // window.console.log(JSON.stringify(itmLines), 'itmLines')\n          let data = {\n            id: this.saleOrder.id ? this.saleOrder.id : \"\",\n            type: \"Sale Order\",\n            transactionType: this.saleOrder.transactionType,\n            number: this.saleOrder.number,\n            abbr: this.saleOrder.transactionType.abbr,\n            transactionDate: this.saleOrder.transactionDate,\n            transactionDateTZ: Helper.toISODate(this.saleOrder.transactionDate),\n            validityDate: this.saleOrder.validityDate,\n            monthOf: this.saleOrder.monthOf,\n            customer: this.saleOrder.customer,\n            paymentTerm: this.saleOrder.paymentTerm,\n            discountPromotion: {},\n            priceLevel: this.saleOrder.priceLevel,\n            itemLines: itmLines,\n            segment: this.saleOrder.segment,\n            location: this.saleOrder.location,\n            project: this.saleOrder.project,\n            saleChannel: this.saleOrder.saleChannel,\n            billingAddress: this.saleOrder.billingAddress,\n            deliveryAddress: this.saleOrder.deliveryAddress,\n            deliveryDateTime: this.saleOrder.deliveryDateTime,\n            transactionNote: this.saleOrder.transactionNote,\n            subTotal: this.saleOrder.subTotal,\n            total: this.saleOrder.total,\n            amount: this.saleOrder.amount,\n            discountTotal: this.saleOrder.discountTotal,\n            specificDiscountTotal: this.saleOrder.specificDiscountTotal,\n            deliveryFee: this.saleOrder.deliveryFee,\n            totalTaxAmount: this.saleOrder.totalTaxAmount,\n            currentBalance: this.saleOrder.currentBalance,\n            creditLimit: this.saleOrder.creditLimit,\n            saveOption: this.saveOption,\n            txnRate: this.saleOrder.txnRate,\n            rate: 1,\n            exchangeRate: this.saleOrder.exchangeRate,\n            exchangeAmount: this.saleOrder.exchangeAmount,\n            status: 1,\n            approvedBy: this.saleOrder.approvedBy,\n            formTemplate: {},\n            specificDiscountItem: this.saleOrder.specificDiscountItem,\n            otherCharge: this.mOtherCharge,\n            otherChargeAmount: this.saleOrder.otherChargeAmount,\n            publicLink: \"\",\n            taxListTotal: this.taxListTotal,\n            customerDiscountItem: this.customerDiscountItem,\n            customerSaleUnit: this.customerSaleUnit,\n            loggedUser: this.loggedUser,\n            txnList: this.txnLists,\n            saleOrderType: this.saleOrder.saleOrderType,\n            employee: this.saleOrder.employee,\n            supplier: this.saleOrder.supplier,\n            itemSubtotal: this.saleOrder.itemSubtotal,\n            exchangeItemSubtotal: this.saleOrder.exchangeItemSubtotal,\n            serviceSubtotal: this.saleOrder.serviceSubtotal,\n            exchangeServiceSubtotal: this.saleOrder.exchangeServiceSubtotal,\n            txnItmSubtotal: this.saleOrder.txnItmSubtotal,\n            exchangeTxnItmSubtotal: this.saleOrder.exchangeTxnItmSubtotal,\n            itemDiscount: this.saleOrder.itemDiscount,\n            exchangeItemDiscount: this.saleOrder.exchangeItemDiscount,\n            serviceDiscount: this.saleOrder.serviceDiscount,\n            exchangeServiceDiscount: this.saleOrder.exchangeServiceDiscount,\n            txnItmDiscount: this.saleOrder.txnItmDiscount,\n            exchangeTxnItmDiscount: this.saleOrder.exchangeTxnItmDiscount,\n            lead: {},\n            routeView: \"sale_order_view\",\n            exspectedDate: \"\",\n            usedDateAt: \"\",\n            deletedAt: \"\",\n            deleted: 0,\n            refFrom: this.saleOrder.refFrom || [],\n            refTo: this.saleOrder.refTo || [],\n            createdAt: new Date().toISOString().substr(0, 10),\n          };\n          // window.console.log('data', data)\n          // window.console.log('data', JSON.stringify(data))\n          this.showLoading = true;\n          this.btnDisabled = true;\n          saleOrderHandler\n            .create(data)\n            .then((response) => {\n              this.showLoading = false;\n              if (response.data.statusCode === 201) {\n                this.btnDisabled = false;\n                if (this.isSaveNew == true) {\n                  this.setDefaultData();\n                } else {\n                  this.close(response.data.data);\n                }\n                // this.$refs.form.reset();\n                this.$snotify.success(\"Successfully\");\n              } else {\n                this.btnDisabled = false;\n                this.showLoading = false;\n              }\n            })\n            .catch((e) => {\n              this.$snotify.error(\"Something went wrong\");\n              this.errors.push(e);\n              window.console.log(e);\n            });\n        }, 10);\n      });\n    },\n    async loadPaymentTermList() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          if (this.customer) {\n            const strFilter =\n              \"?id=\" +\n              this.customer.id +\n              \"&transactionDate=\" +\n              this.saleOrder.transactionDate +\n              \"&type=Customer\";\n            this.saleOrder.paymentTerm = {};\n            paymentTermHandler_.get(strFilter).then((res) => {\n              if (res.data.statusCode === 200) {\n                const terms = res.data.data;\n                this.saleOrder.paymentTerm = terms.term;\n              }\n            });\n          }\n        }, 10);\n      });\n    },\n    async loadCreditLimit() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          if (this.customer) {\n            const strFilter =\n              \"?id=\" +\n              this.customer.id +\n              \"&transactionDate=\" +\n              this.saleOrder.transactionDate +\n              \"&type=Customer\";\n            this.saleOrder.creditLimit = 0;\n            creditLimitHandler.get(strFilter).then((res) => {\n              if (res.data.statusCode === 200) {\n                // this.creditLimitItem = res.data.data\n                const credit = res.data.data;\n                this.saleOrder.creditLimit = kendo.parseFloat(\n                  credit.amount || 0\n                );\n              }\n            });\n          }\n        }, 10);\n      });\n    },\n    async clearUOMItem() {\n      let ds = this.$refs.itemLineDS.kendoWidget();\n      ds.data().map((n) => {\n        n.set(\"uom\", {});\n      });\n      this.isPriceLevelChanged = false;\n    },\n    onPriceLevelChange() {\n      this.isPriceLevelChanged = true;\n      this.loadTransactionRate();\n      this.clearUOMItem();\n      this.loadQuote();\n    },\n    async loadSaleOrder(id) {\n      window.console.log(id, \"load id\");\n      this.showLoading = true;\n      transactionHandler.view(id).then((res) => {\n        this.showLoading = false;\n        this.isEdit = true;\n        this.itemLines = [];\n        this.saleOrder = res.data.data[0];\n        this.bindData();\n      });\n    },\n    async loadEmployeeCenter() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.employees = [];\n          employeeHandler\n            .center(undefined)\n            .then((res) => {\n              this.showLoading = true;\n              this.saleOrder.employee = {};\n              this.employees = [];\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.employees = res.data.data;\n                // if (this.employees.length > 0) {\n                //     this.transaction.employee = this.employees[0];\n                // }\n              } else {\n                this.showLoading = false;\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    async loadSingleData() {\n      if (this.$route.name === \"Sale Order\") {\n        if (this.initsaleOrder) {\n          // Edit Mode\n          this.itemLines = [];\n          this.saleOrder = this.initsaleOrder;\n          this.bindData();\n        } else {\n          // new\n          if (this.$route.params.id != undefined) {\n            this.loadSaleOrder(this.$route.params.id);\n          } else {\n            this.setDefaultData();\n          }\n        }\n        prefixHandler.get(\"sale order\").then((res) => {\n          if (res.data.statusCode === 200) {\n            this.showLoading = false;\n            this.transactionType = res.data.data;\n            if (this.transactionType.length > 0) {\n              if (\n                this.$route.params.id !== undefined ||\n                this.$route.params.id != \"\"\n              ) {\n                this.saleOrder.transactionType = this.transactionType[0];\n                if (\n                  !this.initSaleOrder &&\n                  this.$route.params.id === undefined\n                ) {\n                  this.generateNumber();\n                }\n              }\n            }\n          }\n        });\n        await this.loadPaymentTerm();\n        await this.loadSaleFormContent();\n        await this.loadOtherCharge();\n        await this.loadPriceLevel();\n        await this.loadDiscountItem(0);\n        await this.loadSaleChannel();\n        await this.loadCatalogs();\n        await this.loadLead();\n        this.loadTax();\n        this.loadSaleUnitItems();\n        this.loadSegment();\n        this.loadLocation();\n        this.loadEmployeeCenter();\n      }\n    },\n  },\n  activated() {\n    if (this.$route.params.id) {\n      this.loadViewsaleOrder();\n    }\n  },\n  watch: {\n    initsaleOrder() {\n      this.initialData();\n    },\n    $route: \"loadSingleData\",\n  },\n  created() {\n    this.loadTax();\n    this.loadSaleUnitItems();\n    // this.loadPrefix()\n    this.loadSegment();\n    this.loadLocation();\n    // localStorage.saleOrder = \"{name: 'abcssss'}\"\n  },\n  computed: {\n    appType() {\n      return dataStore.productType;\n    },\n    dateFormatted() {\n      return kendo.toString(new Date(), institute.dateFormat);\n    },\n    dateTimeFormatted() {\n      window.console.log(institute.dateFormat + \" HH:mm\", \"inst date\");\n      return kendo.toString(new Date(), institute.dateFormat + \" HH:mm\");\n    },\n    validCustomer() {\n      return this.customer.id !== undefined && this.customer.id !== null;\n    },\n    hiddenButton() {\n      if (this.$route.params.id) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    disabledMe() {\n      return !!this.$route.params.id;\n    },\n  },\n  mounted: async function () {\n    this.loadSingleData();\n    await this.requestData(0, this.filter, this.cusBaseUrl);\n    await this.supplierRequestData(0, this.filter, this.supBaseUrl);\n    await this.employeeRequestData(0, this.filter, this.empBaseUrl);\n  },\n};\n</script>\n\n<style scoped>\n.function_content .label {\n  margin-bottom: 10px;\n  display: inline-block;\n}\n.all_center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n@media (min-width: 1264px) {\n  .container {\n    max-width: 1080px !important;\n  }\n}\n\n@media (max-width: 576px) {\n  .pt-6.col-sm-5.col-12 {\n    padding-top: 0 !important;\n  }\n\n  .code_text {\n    width: 100%;\n  }\n\n  .phone_no_pt {\n    padding-top: 0 !important;\n  }\n\n  .select_template,\n  .save_option {\n    margin-bottom: 10px;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/micro_edition/revenues"}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js??ref--14-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/cashMovementHandler.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/cashMovementHandler.js","mtime":1638499442972},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9hc3luY1RvR2VuZXJhdG9yID0gcmVxdWlyZSgiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktYWNjb3VudGluZy13ZWItbW9kdWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKS5kZWZhdWx0OwoKcmVxdWlyZSgicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7Cgp2YXIgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwoKdmFyIGFwaVVybCA9IHJlcXVpcmUoJy4uL2FwaVVybC5qcycpOyAvLyBHRVQKCgptb2R1bGUuZXhwb3J0cy5nZXRDYXNoTW92ZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBhcmFtcykgewogICAgdmFyIHJlc3BvbnNlLCBkYXRhLCByZXN1bHQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChhcGlVcmwuZ2VuZXJhbF9sZWRnZXJfZ2V0LCBwYXJhbXMpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBkYXRhID0gW107CgogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgZGF0YVsnbnVtYmVyT2ZBY2NvdW50J10gPSAwOwogICAgICAgICAgICAgIGRhdGFbJ251bWJlck9mQWNjb3VudFdpdGhOZWdhdGl2ZUJhbGFuY2UnXSA9IDA7CiAgICAgICAgICAgICAgZGF0YVsnbGluZXMnXSA9IFtdOwogICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLm51bWJlciA9PSAxIHx8IHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLm51bWJlciA9PSA1KSB7CiAgICAgICAgICAgICAgICAgIC8vIGZpbHRlciBCYW5rIEFjY291bnQgWzEsNV0KICAgICAgICAgICAgICAgICAgdmFyIGJhbCA9IHZhbHVlLm9wZW5pbmdCYWxhbmNlOwoKICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLm5hdHVyZSA9PSAnQ3InKSB7CiAgICAgICAgICAgICAgICAgICAgYmFsID0gYmFsICogLTE7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhbHVlLmxpbmVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5uYXR1cmUgPT0gJ0NyJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5hbW91bnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhbCA9IGJhbCAtIHJvdy5hbW91bnQ7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBiYWwgPSBiYWwgKyByb3cuYW1vdW50ICogLTE7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGJhbCA9IGJhbCArIHJvdy5hbW91bnQ7CiAgICAgICAgICAgICAgICAgICAgfSAvLyBTZXQgZHIvY3IgZnJvbSBhbW91bnQKCgogICAgICAgICAgICAgICAgICAgIHZhciBkciA9ICcnLAogICAgICAgICAgICAgICAgICAgICAgICBjciA9ICcnOwoKICAgICAgICAgICAgICAgICAgICBpZiAocm93LmFtb3VudCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGNyID0gcm93LmFtb3VudCAqIC0xOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBkciA9IHJvdy5hbW91bnQ7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBkYXRhLmxpbmVzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgaWQ6IHJvdy5qb3VybmFsLnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsX3R5cGU6IHJvdy5qb3VybmFsLmpvdXJuYWxfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIGpvdXJuYWxfZGF0ZTogbmV3IERhdGUocm93LmpvdXJuYWwuam91cm5hbF9kYXRlKSwKICAgICAgICAgICAgICAgICAgICAgIGpvdXJuYWxfbnVtYmVyOiByb3cuam91cm5hbC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB2YWx1ZS5hY2NvdW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiB2YWx1ZS5hY2NvdW50Lm51bWJlciArICcgJyArIHZhbHVlLmFjY291bnQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfdHlwZTogdmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X2dyb3VwOiBbXSwKICAgICAgICAgICAgICAgICAgICAgIGRyOiBkciwKICAgICAgICAgICAgICAgICAgICAgIGNyOiBjciwKICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U6IGJhbCwKICAgICAgICAgICAgICAgICAgICAgIG9wZW5CYWw6IHZhbHVlLm9wZW5pbmdCYWxhbmNlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkYXRhKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDldXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTs="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/scripts/cashMovementHandler.js"],"names":["axios","require","apiUrl","module","exports","getCashMovement","params","get","general_ledger_get","response","data","result","forEach","value","account","account_type","number","bal","openingBalance","nature","lines","row","amount","dr","cr","push","id","journal","uuid","journal_type","journal_date","Date","journal_number","description","name","account_id","account_group","balance","openBal","window","console","error"],"mappings":"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","sourcesContent":["const axios \t= require('axios')\nconst apiUrl \t= require('../apiUrl.js') \n\n// GET\nmodule.exports.getCashMovement = async function (params) {\n    try {\n        const response = await axios.get(apiUrl.general_ledger_get, params);\n        \n        let data = []\n        if(response.data){\n            let result = response.data\n            data['numberOfAccount'] = 0\n            data['numberOfAccountWithNegativeBalance'] = 0\n            data['lines'] = []\n\n            result.forEach(value => {\n                if(value.account.account_type.number == 1 || value.account.account_type.number == 5){ // filter Bank Account [1,5]\n                    let bal = value.openingBalance\n                    if (value.account.account_type.nature == 'Cr') {\n                        bal = bal * -1\n                    }\n                    value.lines.forEach(row => {\n                        if (value.account.account_type.nature == 'Cr') {\n                            if (row.amount > 0) {\n                                bal = bal - row.amount\n                            } else {\n                                bal = bal + (row.amount * -1) \n                            }\n                        } else {\n                            bal = bal + row.amount\n                        }\n                        // Set dr/cr from amount\n                        var dr = '', cr = '';\n                        if(row.amount < 0){\n                            cr = row.amount * -1\n                        }else{\n                            dr = row.amount\n                        }\n\n                        data.lines.push({\n                            id              : row.journal.uuid,\n                            journal_type    : row.journal.journal_type,\n                            journal_date    : new Date(row.journal.journal_date),\n                            journal_number  : row.journal.number,\n                            description     : row.description,\n                            name            : '',\n                            account_id      : value.account.uuid,\n                            account         : value.account.number +' '+ value.account.name,\n                            account_type    : value.account.account_type,\n                            account_group   : [],\n                            dr              : dr,\n                            cr              : cr,\n                            balance         : bal,\n                            openBal         : value.openingBalance,\n                        })\n                    })\n                }\n            })\n        }\n\n        return data;\n    } catch (error) {\n        window.console.error(error);\n    }\n}"]}]}
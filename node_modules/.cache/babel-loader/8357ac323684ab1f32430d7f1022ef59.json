{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js??ref--13-0!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/plugins/Translation.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/plugins/Translation.js","mtime":1638499442965},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktY29tbWVyY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vaTE4bic7CnZhciBUcmFucyA9IHsKICBnZXQgZGVmYXVsdExvY2FsZSgpIHsKICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxlJykgfHwgcHJvY2Vzcy5lbnYuVlVFX0FQUF9JMThOX0xPQ0FMRTsKICB9LAoKICBnZXQgc3VwcG9ydGVkTG9jYWxlcygpIHsKICAgIHJldHVybiBwcm9jZXNzLmVudi5WVUVfQVBQX0kxOE5fU1VQUE9SVEVEX0xPQ0FMRS5zcGxpdCgnLCcpOwogIH0sCgogIGdldCBjdXJyZW50TG9jYWxlKCkgewogICAgcmV0dXJuIGkxOG4ubG9jYWxlOwogIH0sCgogIHNldCBjdXJyZW50TG9jYWxlKGxvY2FsZSkgewogICAgaTE4bi5sb2NhbGUgPSBsb2NhbGU7CiAgfSwKCiAgZ2V0VXNlclN1cHBvcnRlZExvY2FsZTogZnVuY3Rpb24gZ2V0VXNlclN1cHBvcnRlZExvY2FsZSgpIHsKICAgIHZhciB1c2VyUHJlZmVycmVkTG9jYWxlID0gVHJhbnMuZ2V0VXNlckxvY2FsZSgpOwoKICAgIGlmIChUcmFucy5pc0xvY2FsZVN1cHBvcnRlZCh1c2VyUHJlZmVycmVkTG9jYWxlLmxvY2FsZSkpIHsKICAgICAgcmV0dXJuIHVzZXJQcmVmZXJyZWRMb2NhbGUubG9jYWxlOwogICAgfQoKICAgIGlmIChUcmFucy5pc0xvY2FsZVN1cHBvcnRlZCh1c2VyUHJlZmVycmVkTG9jYWxlLmxvY2FsZU5vSVNPKSkgewogICAgICByZXR1cm4gdXNlclByZWZlcnJlZExvY2FsZS5sb2NhbGVOb0lTTzsKICAgIH0KCiAgICByZXR1cm4gVHJhbnMuZGVmYXVsdGxvY2FsZTsKICB9LAogIGdldFVzZXJMb2NhbGU6IGZ1bmN0aW9uIGdldFVzZXJMb2NhbGUoKSB7CiAgICB2YXIgbG9jYWxlID0gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZSB8fCB3aW5kb3cubmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCBUcmFucy5kZWZhdWx0TG9jYWxlOwogICAgcmV0dXJuIHsKICAgICAgbG9jYWxlOiBsb2NhbGUsCiAgICAgIGxvY2FsZU5vSVNPOiBsb2NhbGUuc3BsaXQoJy0nKVswXQogICAgfTsKICB9LAogIHNldEkxOG5Mb2NhbGVJblNlcnZpY2VzOiBmdW5jdGlvbiBzZXRJMThuTG9jYWxlSW5TZXJ2aWNlcyhsb2NhbGUpIHsKICAgIFRyYW5zLmN1cnJlbnRMb2NhbGUgPSBsb2NhbGU7CiAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQWNjZXB0LUxhbmd1YWdlJ10gPSBsb2NhbGU7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuc2V0QXR0cmlidXRlKCdsYW5nJywgbG9jYWxlKTsKICAgIHJldHVybiBsb2NhbGU7CiAgfSwKICBjaGFuZ2VMb2NhbGU6IGZ1bmN0aW9uIGNoYW5nZUxvY2FsZShsb2NhbGUpIHsKICAgIGlmICghVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQobG9jYWxlKSkgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTG9jYWxlIG5vdCBzdXBwb3J0ZWQnKSk7CiAgICBpZiAoaTE4bi5sb2NhbGUgPT09IGxvY2FsZSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShsb2NhbGUpOwogICAgcmV0dXJuIFRyYW5zLmxvYWRMb2NhbGVGaWxlKGxvY2FsZSkudGhlbihmdW5jdGlvbiAobXNncykgewogICAgICBpMThuLnNldExvY2FsZU1lc3NhZ2UobG9jYWxlLCBtc2dzLmRlZmF1bHQgfHwgbXNncyk7CiAgICAgIHJldHVybiBUcmFucy5zZXRJMThuTG9jYWxlSW5TZXJ2aWNlcyhsb2NhbGUpOwogICAgfSk7CiAgfSwKICBsb2FkTG9jYWxlRmlsZTogZnVuY3Rpb24gbG9hZExvY2FsZUZpbGUobG9jYWxlKSB7CiAgICByZXR1cm4gaW1wb3J0KCJAL2xvY2FsZXMvIi5jb25jYXQobG9jYWxlLCAiLmpzb24iKSk7CiAgfSwKICBpc0xvY2FsZVN1cHBvcnRlZDogZnVuY3Rpb24gaXNMb2NhbGVTdXBwb3J0ZWQobG9jYWxlKSB7CiAgICByZXR1cm4gVHJhbnMuc3VwcG9ydGVkTG9jYWxlcy5pbmNsdWRlcyhsb2NhbGUpOwogIH0sCiAgcm91dGVNaWRkbGV3YXJlOiBmdW5jdGlvbiByb3V0ZU1pZGRsZXdhcmUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBsb2NhbGUgPSB0by5wYXJhbXMubG9jYWxlOwogICAgaWYgKCFUcmFucy5pc0xvY2FsZVN1cHBvcnRlZChsb2NhbGUpKSByZXR1cm4gbmV4dChUcmFucy5nZXRVc2VyU3VwcG9ydGVkTG9jYWxlKCkpOwogICAgcmV0dXJuIFRyYW5zLmNoYW5nZUxvY2FsZShsb2NhbGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbmV4dCgpOwogICAgfSk7CiAgfSwKICBpMThuUm91dGU6IGZ1bmN0aW9uIGkxOG5Sb3V0ZSh0bykgewogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG8pLCB7fSwgewogICAgICBwYXJhbXM6IF9vYmplY3RTcHJlYWQoewogICAgICAgIGxvY2FsZTogdGhpcy5jdXJyZW50TG9jYWxlCiAgICAgIH0sIHRvLnBhcmFtcykKICAgIH0pOwogIH0KfTsKZXhwb3J0IHsgVHJhbnMgfTs="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/plugins/Translation.js"],"names":["axios","i18n","Trans","defaultLocale","localStorage","getItem","process","env","VUE_APP_I18N_LOCALE","supportedLocales","VUE_APP_I18N_SUPPORTED_LOCALE","split","currentLocale","locale","getUserSupportedLocale","userPreferredLocale","getUserLocale","isLocaleSupported","localeNoISO","defaultlocale","window","navigator","language","userLanguage","setI18nLocaleInServices","defaults","headers","common","document","querySelector","setAttribute","changeLocale","Promise","reject","Error","resolve","loadLocaleFile","then","msgs","setLocaleMessage","default","includes","routeMiddleware","to","from","next","params","i18nRoute"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { i18n } from '../i18n'\n\nconst Trans = {\n\tget defaultLocale() {\n\t\treturn localStorage.getItem('locale') || process.env.VUE_APP_I18N_LOCALE\n\t},\n\tget supportedLocales() {\n\t\treturn process.env.VUE_APP_I18N_SUPPORTED_LOCALE.split(',')\n\t},\n\tget currentLocale() {\n\t\treturn i18n.locale\n\t},\n\tset currentLocale(locale) {\n\t\ti18n.locale = locale\n\t},\n\tgetUserSupportedLocale() {\n\t\tconst userPreferredLocale = Trans.getUserLocale()\n\n\t\tif (Trans.isLocaleSupported(userPreferredLocale.locale)) {\n\t\t\treturn userPreferredLocale.locale\n\t\t}\n\n\t\tif (Trans.isLocaleSupported(userPreferredLocale.localeNoISO)) {\n\t\t\treturn userPreferredLocale.localeNoISO\n\t\t}\n\t\treturn Trans.defaultlocale\n\t},\n\tgetUserLocale() {\n\t\tconst locale = window.navigator.language || window.navigator.userLanguage || Trans.defaultLocale\n\t\treturn {\n\t\t\tlocale: locale,\n\t\t\tlocaleNoISO: locale.split('-')[0]\n\t\t}\n\t},\n\tsetI18nLocaleInServices(locale) {\n\t\tTrans.currentLocale = locale\n\t\taxios.defaults.headers.common['Accept-Language'] = locale\n\t\tdocument.querySelector('html').setAttribute('lang', locale)\n\t\treturn locale\n\t},\n\tchangeLocale(locale) {\n\t\tif (!Trans.isLocaleSupported(locale)) return Promise.reject(new Error('Locale not supported'))\n\t\tif (i18n.locale === locale) return Promise.resolve(locale)\n\t\treturn Trans.loadLocaleFile(locale).then(msgs => {\n\t\t\ti18n.setLocaleMessage(locale, msgs.default || msgs)\n\t\t\treturn Trans.setI18nLocaleInServices(locale)\n\t\t})\n\t},\n\tloadLocaleFile(locale) {\n\t\treturn import(`@/locales/${locale}.json`)\n\t},\n\tisLocaleSupported(locale) {\n\t\treturn Trans.supportedLocales.includes(locale)\n\t},\n\trouteMiddleware(to, from, next) {\n\t\tconst locale = to.params.locale\n\t\tif (!Trans.isLocaleSupported(locale)) return next(Trans.getUserSupportedLocale())\n\t\treturn Trans.changeLocale(locale).then(() => next())\n\t},\n\ti18nRoute(to) {\n\t\treturn {\n\t\t\t...to,\n\t\t\tparams: {\n\t\t\t\tlocale: this.currentLocale,\n\t\t\t\t...to.params\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport {\n\tTrans\n}\n"]}]}
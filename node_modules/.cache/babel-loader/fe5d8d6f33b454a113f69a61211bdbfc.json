{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js??ref--14-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/plugins/Translation.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/plugins/Translation.js","mtime":1638499442965},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktYWNjb3VudGluZy13ZWItbW9kdWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2kxOG4nOwp2YXIgVHJhbnMgPSB7CiAgZ2V0IGRlZmF1bHRMb2NhbGUoKSB7CiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsZScpIHx8IHByb2Nlc3MuZW52LlZVRV9BUFBfSTE4Tl9MT0NBTEU7CiAgfSwKCiAgZ2V0IHN1cHBvcnRlZExvY2FsZXMoKSB7CiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuVlVFX0FQUF9JMThOX1NVUFBPUlRFRF9MT0NBTEUuc3BsaXQoJywnKTsKICB9LAoKICBnZXQgY3VycmVudExvY2FsZSgpIHsKICAgIHJldHVybiBpMThuLmxvY2FsZTsKICB9LAoKICBzZXQgY3VycmVudExvY2FsZShsb2NhbGUpIHsKICAgIGkxOG4ubG9jYWxlID0gbG9jYWxlOwogIH0sCgogIGdldFVzZXJTdXBwb3J0ZWRMb2NhbGU6IGZ1bmN0aW9uIGdldFVzZXJTdXBwb3J0ZWRMb2NhbGUoKSB7CiAgICB2YXIgdXNlclByZWZlcnJlZExvY2FsZSA9IFRyYW5zLmdldFVzZXJMb2NhbGUoKTsKCiAgICBpZiAoVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQodXNlclByZWZlcnJlZExvY2FsZS5sb2NhbGUpKSB7CiAgICAgIHJldHVybiB1c2VyUHJlZmVycmVkTG9jYWxlLmxvY2FsZTsKICAgIH0KCiAgICBpZiAoVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQodXNlclByZWZlcnJlZExvY2FsZS5sb2NhbGVOb0lTTykpIHsKICAgICAgcmV0dXJuIHVzZXJQcmVmZXJyZWRMb2NhbGUubG9jYWxlTm9JU087CiAgICB9CgogICAgcmV0dXJuIFRyYW5zLmRlZmF1bHRsb2NhbGU7CiAgfSwKICBnZXRVc2VyTG9jYWxlOiBmdW5jdGlvbiBnZXRVc2VyTG9jYWxlKCkgewogICAgdmFyIGxvY2FsZSA9IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgd2luZG93Lm5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgVHJhbnMuZGVmYXVsdExvY2FsZTsKICAgIHJldHVybiB7CiAgICAgIGxvY2FsZTogbG9jYWxlLAogICAgICBsb2NhbGVOb0lTTzogbG9jYWxlLnNwbGl0KCctJylbMF0KICAgIH07CiAgfSwKICBzZXRJMThuTG9jYWxlSW5TZXJ2aWNlczogZnVuY3Rpb24gc2V0STE4bkxvY2FsZUluU2VydmljZXMobG9jYWxlKSB7CiAgICBUcmFucy5jdXJyZW50TG9jYWxlID0gbG9jYWxlOwogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0FjY2VwdC1MYW5ndWFnZSddID0gbG9jYWxlOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLnNldEF0dHJpYnV0ZSgnbGFuZycsIGxvY2FsZSk7CiAgICByZXR1cm4gbG9jYWxlOwogIH0sCiAgY2hhbmdlTG9jYWxlOiBmdW5jdGlvbiBjaGFuZ2VMb2NhbGUobG9jYWxlKSB7CiAgICBpZiAoIVRyYW5zLmlzTG9jYWxlU3VwcG9ydGVkKGxvY2FsZSkpIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0xvY2FsZSBub3Qgc3VwcG9ydGVkJykpOwogICAgaWYgKGkxOG4ubG9jYWxlID09PSBsb2NhbGUpIHJldHVybiBQcm9taXNlLnJlc29sdmUobG9jYWxlKTsKICAgIHJldHVybiBUcmFucy5sb2FkTG9jYWxlRmlsZShsb2NhbGUpLnRoZW4oZnVuY3Rpb24gKG1zZ3MpIHsKICAgICAgaTE4bi5zZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbXNncy5kZWZhdWx0IHx8IG1zZ3MpOwogICAgICByZXR1cm4gVHJhbnMuc2V0STE4bkxvY2FsZUluU2VydmljZXMobG9jYWxlKTsKICAgIH0pOwogIH0sCiAgbG9hZExvY2FsZUZpbGU6IGZ1bmN0aW9uIGxvYWRMb2NhbGVGaWxlKGxvY2FsZSkgewogICAgcmV0dXJuIGltcG9ydCgiQC9sb2NhbGVzLyIuY29uY2F0KGxvY2FsZSwgIi5qc29uIikpOwogIH0sCiAgaXNMb2NhbGVTdXBwb3J0ZWQ6IGZ1bmN0aW9uIGlzTG9jYWxlU3VwcG9ydGVkKGxvY2FsZSkgewogICAgcmV0dXJuIFRyYW5zLnN1cHBvcnRlZExvY2FsZXMuaW5jbHVkZXMobG9jYWxlKTsKICB9LAogIHJvdXRlTWlkZGxld2FyZTogZnVuY3Rpb24gcm91dGVNaWRkbGV3YXJlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgbG9jYWxlID0gdG8ucGFyYW1zLmxvY2FsZTsKICAgIGlmICghVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQobG9jYWxlKSkgcmV0dXJuIG5leHQoVHJhbnMuZ2V0VXNlclN1cHBvcnRlZExvY2FsZSgpKTsKICAgIHJldHVybiBUcmFucy5jaGFuZ2VMb2NhbGUobG9jYWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG5leHQoKTsKICAgIH0pOwogIH0sCiAgaTE4blJvdXRlOiBmdW5jdGlvbiBpMThuUm91dGUodG8pIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgcGFyYW1zOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICBsb2NhbGU6IHRoaXMuY3VycmVudExvY2FsZQogICAgICB9LCB0by5wYXJhbXMpCiAgICB9KTsKICB9Cn07CmV4cG9ydCB7IFRyYW5zIH07"},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/plugins/Translation.js"],"names":["axios","i18n","Trans","defaultLocale","localStorage","getItem","process","env","VUE_APP_I18N_LOCALE","supportedLocales","VUE_APP_I18N_SUPPORTED_LOCALE","split","currentLocale","locale","getUserSupportedLocale","userPreferredLocale","getUserLocale","isLocaleSupported","localeNoISO","defaultlocale","window","navigator","language","userLanguage","setI18nLocaleInServices","defaults","headers","common","document","querySelector","setAttribute","changeLocale","Promise","reject","Error","resolve","loadLocaleFile","then","msgs","setLocaleMessage","default","includes","routeMiddleware","to","from","next","params","i18nRoute"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { i18n } from '../i18n'\n\nconst Trans = {\n\tget defaultLocale() {\n\t\treturn localStorage.getItem('locale') || process.env.VUE_APP_I18N_LOCALE\n\t},\n\tget supportedLocales() {\n\t\treturn process.env.VUE_APP_I18N_SUPPORTED_LOCALE.split(',')\n\t},\n\tget currentLocale() {\n\t\treturn i18n.locale\n\t},\n\tset currentLocale(locale) {\n\t\ti18n.locale = locale\n\t},\n\tgetUserSupportedLocale() {\n\t\tconst userPreferredLocale = Trans.getUserLocale()\n\n\t\tif (Trans.isLocaleSupported(userPreferredLocale.locale)) {\n\t\t\treturn userPreferredLocale.locale\n\t\t}\n\n\t\tif (Trans.isLocaleSupported(userPreferredLocale.localeNoISO)) {\n\t\t\treturn userPreferredLocale.localeNoISO\n\t\t}\n\t\treturn Trans.defaultlocale\n\t},\n\tgetUserLocale() {\n\t\tconst locale = window.navigator.language || window.navigator.userLanguage || Trans.defaultLocale\n\t\treturn {\n\t\t\tlocale: locale,\n\t\t\tlocaleNoISO: locale.split('-')[0]\n\t\t}\n\t},\n\tsetI18nLocaleInServices(locale) {\n\t\tTrans.currentLocale = locale\n\t\taxios.defaults.headers.common['Accept-Language'] = locale\n\t\tdocument.querySelector('html').setAttribute('lang', locale)\n\t\treturn locale\n\t},\n\tchangeLocale(locale) {\n\t\tif (!Trans.isLocaleSupported(locale)) return Promise.reject(new Error('Locale not supported'))\n\t\tif (i18n.locale === locale) return Promise.resolve(locale)\n\t\treturn Trans.loadLocaleFile(locale).then(msgs => {\n\t\t\ti18n.setLocaleMessage(locale, msgs.default || msgs)\n\t\t\treturn Trans.setI18nLocaleInServices(locale)\n\t\t})\n\t},\n\tloadLocaleFile(locale) {\n\t\treturn import(`@/locales/${locale}.json`)\n\t},\n\tisLocaleSupported(locale) {\n\t\treturn Trans.supportedLocales.includes(locale)\n\t},\n\trouteMiddleware(to, from, next) {\n\t\tconst locale = to.params.locale\n\t\tif (!Trans.isLocaleSupported(locale)) return next(Trans.getUserSupportedLocale())\n\t\treturn Trans.changeLocale(locale).then(() => next())\n\t},\n\ti18nRoute(to) {\n\t\treturn {\n\t\t\t...to,\n\t\t\tparams: {\n\t\t\t\tlocale: this.currentLocale,\n\t\t\t\t...to.params\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport {\n\tTrans\n}\n"]}]}
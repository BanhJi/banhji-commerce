{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js??ref--13-0!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/auth.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/auth.js","mtime":1639367340168},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9hc3luY1RvR2VuZXJhdG9yID0gcmVxdWlyZSgiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktY29tbWVyY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciIpLmRlZmF1bHQ7CgpyZXF1aXJlKCJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiKTsKCnZhciBjb29raWVKUyA9IHJlcXVpcmUoIkAvY29va2llLmpzIik7Cgp2YXIgY29va2llID0gY29va2llSlMuZ2V0Q29va2llKCk7Cgp2YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL29ic2VydmFibGUvc3RvcmUnKSwKICAgIGRhdGFTdG9yZSA9IF9yZXF1aXJlLmRhdGFTdG9yZTsKCnZhciBpbnN0aXR1dGVIYW5kbGVyID0gcmVxdWlyZSgnQC9zY3JpcHRzL2luc3RpdHV0ZUhhbmRsZXInKTsKCm1vZHVsZS5leHBvcnRzLmluaXQgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogIHZhciBkYXRhOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGlmICghY29va2llKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiBpbnN0aXR1dGVIYW5kbGVyLmdldFJvbGVzKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICBkYXRhU3RvcmUucm9sZXMgPSByZXMubW9kdWxlIHx8IFtdOwogICAgICAgICAgICAgIGRhdGFTdG9yZS5yb2xlRGF0YSA9IHJlcy5kYXRhIHx8IFtdOwogICAgICAgICAgICAgIGRhdGFTdG9yZS5yb2xlVHlwZSA9IHJlcy50eXBlIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBkYXRhU3RvcmUuaXNWYWxpZFVzZXIgPSB0cnVlOwogICAgICAgICAgZGF0YSA9IGNvb2tpZTsKCiAgICAgICAgICBpZiAocGFyc2VJbnQoZGF0YS5wbGFuKSA9PT0gNCkgewogICAgICAgICAgICBkYXRhU3RvcmUucHJvZHVjdFR5cGUgPSAnQ29vcGVyYXRpdmUnOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChkYXRhLnBsYW4pID09PSAzKSB7CiAgICAgICAgICAgIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJBZHZhbmNlZCI7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGRhdGEucGxhbikgPT09IDIpIHsKICAgICAgICAgICAgZGF0YVN0b3JlLnByb2R1Y3RUeXBlID0gIlByZW1pdW0iOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChkYXRhLnBsYW4pID09PSA2KSB7CiAgICAgICAgICAgIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJucG8iOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChkYXRhLnBsYW4pID09PSA3KSB7CiAgICAgICAgICAgIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJQdWJsaWMgU2VjdG9ycyI7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGRhdGEucGxhbikgPT09IDgpIHsKICAgICAgICAgICAgZGF0YVN0b3JlLnByb2R1Y3RUeXBlID0gIk1pY3JvRWRpdGlvbiI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRhU3RvcmUucHJvZHVjdFR5cGUgPSAnU3RhbmRhcmQnOwogICAgICAgICAgfQoKICAgICAgICAgIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJQdWJsaWMgU2VjdG9ycyI7IC8vIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJucG8iOwogICAgICAgICAgLy8gZGF0YVN0b3JlLnByb2R1Y3RUeXBlID0gIk1pY3JvRWRpdGlvbiI7CgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIGRhdGFTdG9yZS5pc1ZhbGlkVXNlciA9IGZhbHNlOwoKICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5WVUVfQVBQX01PREUgIT09ICJkZXYiKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gImh0dHBzOi8vY29ubmVjdC5iYW5oamkuY29tLyI7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBfY2FsbGVlKTsKfSkpOw=="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/auth.js"],"names":["cookieJS","require","cookie","getCookie","dataStore","instituteHandler","module","exports","init","getRoles","then","res","roles","roleData","data","roleType","type","isValidUser","parseInt","plan","productType","process","env","VUE_APP_MODE","window","location","href"],"mappings":";;;;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAMC,MAAM,GAAGF,QAAQ,CAACG,SAAT,EAAf;;AACA,eAAoBF,OAAO,CAAC,oBAAD,CAA3B;AAAA,IAAOG,SAAP,YAAOA,SAAP;;AACA,IAAMC,gBAAgB,GAAGJ,OAAO,CAAC,4BAAD,CAAhC;;AACAK,MAAM,CAACC,OAAP,CAAeC,IAAf,wEAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACdN,MADc;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAERG,gBAAgB,CAACI,QAAjB,GAA4BC,IAA5B,CAAiC,UAAAC,GAAG,EAAI;AAC1C,gBAAIA,GAAJ,EAAS;AACLP,cAAAA,SAAS,CAACQ,KAAV,GAAkBD,GAAG,CAACL,MAAJ,IAAc,EAAhC;AACAF,cAAAA,SAAS,CAACS,QAAV,GAAqBF,GAAG,CAACG,IAAJ,IAAY,EAAjC;AACAV,cAAAA,SAAS,CAACW,QAAV,GAAqBJ,GAAG,CAACK,IAAJ,IAAY,CAAjC;AACH;AACJ,WANK,CAFQ;;AAAA;AASdZ,UAAAA,SAAS,CAACa,WAAV,GAAwB,IAAxB;AACIH,UAAAA,IAVU,GAUHZ,MAVG;;AAWd,cAAIgB,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAC3Bf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,aAAxB;AACH,WAFD,MAEO,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAClCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,UAAxB;AACH,WAFM,MAEA,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAClCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,SAAxB;AACH,WAFM,MAGF,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAChCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,KAAxB;AACH,WAFI,MAEC,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AACjCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,gBAAxB;AACH,WAFK,MAGD,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAChCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,cAAxB;AACH,WAFI,MAGC;AACFhB,YAAAA,SAAS,CAACgB,WAAV,GAAwB,UAAxB;AACH;;AACDhB,UAAAA,SAAS,CAACgB,WAAV,GAAwB,gBAAxB,CA7Bc,CA8Bd;AACA;;AA/Bc;AAAA;;AAAA;AAiCdhB,UAAAA,SAAS,CAACa,WAAV,GAAwB,KAAxB;;AACA,cAAII,OAAO,CAACC,GAAR,CAAYC,YAAZ,KAA6B,KAAjC,EAAwC;AACpCC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,6BAAvB;AACH;;AApCa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB","sourcesContent":["const cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\nconst {dataStore} = require('./observable/store');\nconst instituteHandler = require('@/scripts/instituteHandler')\nmodule.exports.init = async () => {\n    if (cookie) {\n        await instituteHandler.getRoles().then(res => {\n            if (res) {\n                dataStore.roles = res.module || []\n                dataStore.roleData = res.data || []\n                dataStore.roleType = res.type || 0\n            }\n        })\n        dataStore.isValidUser = true\n        let data = cookie\n        if (parseInt(data.plan) === 4) {\n            dataStore.productType = 'Cooperative'\n        } else if (parseInt(data.plan) === 3) {\n            dataStore.productType = \"Advanced\";\n        } else if (parseInt(data.plan) === 2) {\n            dataStore.productType = \"Premium\";\n        }\n        else if (parseInt(data.plan) === 6) {\n            dataStore.productType = \"npo\";\n        }else if (parseInt(data.plan) === 7) {\n            dataStore.productType = \"Public Sectors\";\n        }\n        else if (parseInt(data.plan) === 8) {\n            dataStore.productType = \"MicroEdition\";\n        }\n         else {\n            dataStore.productType = 'Standard'\n        }\n        dataStore.productType = \"Public Sectors\";\n        // dataStore.productType = \"npo\";\n        // dataStore.productType = \"MicroEdition\";\n    } else {\n        dataStore.isValidUser = false;\n        if (process.env.VUE_APP_MODE !== \"dev\") {\n            window.location.href = \"https://connect.banhji.com/\"\n        }\n    }\n}"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/components/dropdownlist/BudgetListItemGroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/components/dropdownlist/BudgetListItemGroup.vue","mtime":1640595536762},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktYWNjb3VudGluZy13ZWItbW9kdWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgU2VnbWVudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9TZWdtZW50LmpzIjsKaW1wb3J0IEJ1ZGdldE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9CdWRnZXQuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0J1ZGdldExpc3RJdGVtR3JvdXAnLAogIHByb3BzOiB7CiAgICBpbml0QnVkZ2V0czogewogICAgICB0eXBlOiBBcnJheQogICAgfSwKICAgIGluaXRGaXNjYWxZZWFyOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkQnVkZ2V0czogW10sCiAgICAgIGJ1ZGdldExpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOyAvLyBDYWxsIExpc3QKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2J1ZGdldHMvZ2V0TGlzdCcpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlZ21lbnRzL2dldExpc3QnKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaW5pdGlhbERhdGE6IGZ1bmN0aW9uIGluaXRpYWxEYXRhKCkgewogICAgICB0aGlzLnNlbGVjdGVkQnVkZ2V0cyA9IHRoaXMuaW5pdEJ1ZGdldHM7CiAgICB9LAogICAgZW1pdEJ1ZGdldHM6IGZ1bmN0aW9uIGVtaXRCdWRnZXRzKCkgewogICAgICB0aGlzLiRlbWl0KCdlbWl0QnVkZ2V0cycsIHRoaXMuc2VsZWN0ZWRCdWRnZXRzKTsKICAgIH0sCiAgICBmaWx0ZXJCeUZpc2NhbFllYXI6IGZ1bmN0aW9uIGZpbHRlckJ5RmlzY2FsWWVhcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgYnVkZ2V0TGlzdCA9IFtdOwogICAgICB0aGlzLmJ1ZGdldHMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUuZmlzY2FsX3llYXIudXVpZCA9PT0gX3RoaXMyLmluaXRGaXNjYWxZZWFyICYmIHZhbHVlLnNlZ21lbnRfdXVpZCAhPT0gIiIgJiYgdmFsdWUucHJvamVjdF91dWlkID09PSAiIikgewogICAgICAgICAgdmFyIGJ1ZGdldCA9IG5ldyBCdWRnZXRNb2RlbCh2YWx1ZSk7CiAgICAgICAgICBidWRnZXQuc2VnbWVudCA9IG5ldyBTZWdtZW50TW9kZWwoX3RoaXMyLnNlZ21lbnRzLmZpbmQoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgcmV0dXJuIGkuaWQgPT09IHZhbHVlLnNlZ21lbnRfdXVpZDsKICAgICAgICAgIH0pKTsKICAgICAgICAgIGJ1ZGdldExpc3QucHVzaChidWRnZXQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYnVkZ2V0TGlzdCA9IGJ1ZGdldExpc3Q7CiAgICB9LAogICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpczMubGlrZXNBbGxGcnVpdCkgewogICAgICAgICAgX3RoaXMzLnNlbGVjdGVkQnVkZ2V0cyA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgaWRzID0gW107CgogICAgICAgICAgX3RoaXMzLmJ1ZGdldExpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgaWRzLnB1c2godmFsdWUudXVpZCk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczMuc2VsZWN0ZWRCdWRnZXRzID0gaWRzOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMzLmVtaXRCdWRnZXRzKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGluaXRCdWRnZXRzOiAiaW5pdGlhbERhdGEiLAogICAgaW5pdEZpc2NhbFllYXI6ICJmaWx0ZXJCeUZpc2NhbFllYXIiCiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBidWRnZXRzOiBmdW5jdGlvbiBidWRnZXRzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5idWRnZXRzLmxpc3Q7CiAgICB9LAogICAgc2VnbWVudHM6IGZ1bmN0aW9uIHNlZ21lbnRzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zZWdtZW50cy5saXN0OwogICAgfQogIH0pKSwge30sIHsKICAgIGxpa2VzQWxsRnJ1aXQ6IGZ1bmN0aW9uIGxpa2VzQWxsRnJ1aXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkQnVkZ2V0cy5sZW5ndGggPT09IHRoaXMuYnVkZ2V0TGlzdC5sZW5ndGg7CiAgICB9LAogICAgbGlrZXNTb21lRnJ1aXQ6IGZ1bmN0aW9uIGxpa2VzU29tZUZydWl0KCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEJ1ZGdldHMubGVuZ3RoID4gMCAmJiAhdGhpcy5saWtlc0FsbEZydWl0OwogICAgfSwKICAgIGljb246IGZ1bmN0aW9uIGljb24oKSB7CiAgICAgIGlmICh0aGlzLmxpa2VzQWxsRnJ1aXQpIHJldHVybiAnbWRpLWNsb3NlLWJveCc7CiAgICAgIGlmICh0aGlzLmxpa2VzU29tZUZydWl0KSByZXR1cm4gJ21kaS1taW51cy1ib3gnOwogICAgICByZXR1cm4gJ21kaS1jaGVja2JveC1ibGFuay1vdXRsaW5lJzsKICAgIH0KICB9KSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0aWFsaXplKCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLyogSW5pdGlhbCBEYXRhICovCiAgICB0aGlzLmluaXRpYWxEYXRhKCk7CiAgfQp9Ow=="},{"version":3,"sources":["BudgetListItemGroup.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <v-select\n            :loading=\"loading\"\n            v-model=\"selectedBudgets\"\n            :items=\"budgetList\"\n            item-text=\"name\"\n            item-value=\"uuid\"\n            @change=\"emitBudgets\"\n            placeholder=\"Select Budgets\"\n            multiple\n            class=\"mt-1\"\n            outlined\n        >\n            <template v-slot:prepend-item>\n                <v-list-item\n                    ripple\n                    @click=\"toggle\"\n                >\n                    <v-list-item-action>\n                        <v-icon :color=\"selectedBudgets.length > 0 ? 'indigo darken-4' : ''\">\n                            {{ icon }}\n                        </v-icon>\n                    </v-list-item-action>\n                    <v-list-item-content>\n                        <v-list-item-title>\n                            Select All\n                        </v-list-item-title>\n                    </v-list-item-content>\n                </v-list-item>\n                <v-divider class=\"mt-2\"></v-divider>\n            </template>\n\n            <template v-slot:selection=\"{ item, index }\">\n                <v-chip v-if=\"index === 0\">\n                    <span>{{ item.name }}</span>\n                </v-chip>\n                <span v-if=\"index === 1\" class=\"font_14\">\n                    (+{{ selectedBudgets.length - 1 }} others)\n                </span>\n            </template>\n\n        </v-select>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nimport SegmentModel from \"@/scripts/model/Segment.js\";\nimport BudgetModel from \"@/scripts/model/Budget.js\";\n\nexport default {\n    name: 'BudgetListItemGroup',\n    props: {\n        initBudgets: {\n            type: Array,\n        },\n        initFiscalYear: {\n            type: String,\n        },\n    },\n    data() {\n        return {\n            selectedBudgets: [],\n            budgetList: [],\n            loading: false\n        }\n    },\n    methods: {\n        async initialize () {\n            this.loading = true;\n            \n            // Call List\n            await this.$store.dispatch('budgets/getList');\n            await this.$store.dispatch('segments/getList')\n\n            this.loading = false;\n        },\n        initialData(){\n            this.selectedBudgets = this.initBudgets;\n        },\n        emitBudgets() {\n            this.$emit('emitBudgets', this.selectedBudgets);\n        },\n        filterByFiscalYear(){\n            let budgetList = [];\n\n            this.budgets.forEach(value => {\n                if(value.fiscal_year.uuid === this.initFiscalYear && value.segment_uuid !== \"\" && value.project_uuid === \"\"){\n                    let budget = new BudgetModel(value);\n                    budget.segment = new SegmentModel(this.segments.find(i => i.id === value.segment_uuid));\n\n                    budgetList.push(budget);\n                }\n            });\n\n            this.budgetList = budgetList;\n        },\n        toggle() {\n            this.$nextTick(() => {\n                if (this.likesAllFruit) {\n                    this.selectedBudgets = [];\n                } else {\n                    let ids = [];\n                    this.budgetList.forEach(value => {\n                        ids.push(value.uuid);\n                    });\n                    this.selectedBudgets = ids;\n                }\n                this.emitBudgets();\n            })\n        },\n    },\n    watch: {\n        initBudgets: \"initialData\",\n        initFiscalYear: \"filterByFiscalYear\",\n    },\n    computed: {\n        ...mapState({\n            budgets: state => state.budgets.list,\n            segments: state => state.segments.list\n        }),\n        likesAllFruit() {\n            return this.selectedBudgets.length === this.budgetList.length\n        },\n        likesSomeFruit() {\n            return this.selectedBudgets.length > 0 && !this.likesAllFruit\n        },\n        icon() {\n            if (this.likesAllFruit) return 'mdi-close-box'\n            if (this.likesSomeFruit) return 'mdi-minus-box'\n            return 'mdi-checkbox-blank-outline'\n        },\n    },\n    created() {\n        this.initialize();\n    },\n    mounted() {\n        /* Initial Data */\n        this.initialData();\n    }\n}\n</script>"],"sourceRoot":"src/components/dropdownlist"}]}
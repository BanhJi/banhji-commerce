{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/SaleOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/SaleOrder.vue","mtime":1638843525749},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbWFjb3MvRGVza3RvcC9iYW5oamktMC4yL2JhbmhqaS1hY2NvdW50aW5nLXdlYi1tb2R1bGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwoKdmFyIF9kZWZhdWx0SXRlbSwgX2RlZmF1bHRTdXBJdGVtLCBfZGVmYXVsdEVtcEl0ZW07CgppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5wYWQtc3RhcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaTE4biB9IGZyb20gIkAvaTE4biI7CmltcG9ydCBEYXRlUGlja2VyQ29tcG9uZW50IGZyb20gIkAvY29tcG9uZW50cy9jdXN0b21fdGVtcGxhdGVzL0RhdGVQaWNrZXJDb21wb25lbnQiOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IHsgRHJvcERvd25MaXN0IH0gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXZ1ZS1kcm9wZG93bnMiOwppbXBvcnQgU2FsZUZvcm1Db250ZW50TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1NhbGVGb3JtQ29udGVudCI7CmltcG9ydCBJdGVtTGluZU1vZGVsIGZyb20gIkAvc2NyaXB0cy9pbnZvaWNlL21vZGVsL0l0ZW1MaW5lIjsKaW1wb3J0IHsgdXVpZCB9IGZyb20gInZ1ZS11dWlkIjsKaW1wb3J0IFNhbGVPcmRlck1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9UcmFuc2FjdGlvbiI7Ci8qIFN0b3JlICovCgppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CnZhciBpbnN0aXR1dGUgPSBzdG9yZS5zdGF0ZS5pbnN0aXR1dGUuaW5zdGl0dXRlOwppbXBvcnQgeyBTaG93UmVzb3VyY2UgfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOwppbXBvcnQgcGF5bWVudFRlcm1IYW5kbGVyXyBmcm9tICJAL3NjcmlwdHMvcGF5bWVudHRlcm0vaGFuZGxlci9wYXltZW50VGVybUhhbmRsZXIiOwppbXBvcnQgY3JlZGl0TGltaXRIYW5kbGVyIGZyb20gIkAvc2NyaXB0cy9jcmVkaXRMaW1pdC9oYW5kbGVyL2NyZWRpdExpbWl0SGFuZGxlciI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIiOwppbXBvcnQgdHJhbnNhY3Rpb25IYW5kbGVyIGZyb20gIkAvc2NyaXB0cy90cmFuc2FjdGlvbkhhbmRsZXIiOwppbXBvcnQgeyBkYXRhU3RvcmUgfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOyAvLy8vaGFuZGxlcgoKdmFyIHNhbGVPcmRlckhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvdHJhbnNhY3Rpb25IYW5kbGVyIik7Cgp2YXIgYmlsbGluZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaW52b2ljZS9oYW5kbGVyL2JpbGxpbmdIYW5kbGVyIik7Cgp2YXIgY3VzdG9tZXJIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2N1c3RvbWVySGFuZGxlciIpOwoKdmFyIHByb2plY3RIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2plY3RIYW5kbGVyIik7Cgp2YXIgcHJlZml4SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcmVmaXhIYW5kbGVyIik7Cgp2YXIgcGF5bWVudFRlcm1IYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3BheW1lbnRUZXJtSGFuZGxlciIpOwoKdmFyIHByaWNlTGV2ZWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3ByaWNlTGV2ZWxIYW5kbGVyIik7Cgp2YXIgc2FsZUZvcm1Db250ZW50SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zYWxlRm9ybUNvbnRlbnRIYW5kbGVyIik7Cgp2YXIgZW1wbG95ZWVIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2VtcGxveWVlSGFuZGxlciIpOwoKdmFyIGl0ZW1Nb2RpZmllckhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaXRlbU1vZGlmaWVySGFuZGxlciIpOwoKdmFyIGRpc2NvdW50SXRlbUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGlzY291bnRJdGVtSGFuZGxlciIpOwoKdmFyIHVvbVByaWNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy91b21QcmljZUhhbmRsZXIiKTsKCnZhciBwcm9kdWN0VmFyaWFudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcHJvZHVjdFZhcmlhbnRIYW5kbGVyIik7Cgp2YXIgb3RoZXJDaGFyZ2VIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL290aGVyQ2hhcmdlSGFuZGxlciIpOwoKdmFyIGxvY2F0aW9uSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9sb2NhdGlvbkhhbmRsZXIiKTsKCnZhciBzZXR0aW5nc0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2V0dGluZ3NIYW5kbGVyIik7Cgp2YXIgc2FsZUNoYW5uZWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NhbGVDaGFubmVsSGFuZGxlciIpOwoKdmFyIHNhbGVVbml0SXRlbUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2FsZVVuaXRJdGVtSGFuZGxlciIpOwoKdmFyIHNldHRpbmdIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NldHRpbmdIYW5kbGVyIik7Cgp2YXIgY2F0YWxvZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY2F0YWxvZ0hhbmRsZXIiKTsKCnZhciBwcm9kdWN0SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcm9kdWN0SGFuZGxlciIpOwoKdmFyIGN1cnJlbmN5SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jdXJyZW5jeS9oYW5kbGVyL2N1cnJlbmN5SGFuZGxlciIpOwoKdmFyIHN1cHBsaWVySGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zdXBwbGllckhhbmRsZXIiKTsKCnZhciBzYWxlRm9ybUNvbnRlbnRNb2RlbCA9IG5ldyBTYWxlRm9ybUNvbnRlbnRNb2RlbCh7fSk7CnZhciBpdGVtTGluZU1vZGVsID0gbmV3IEl0ZW1MaW5lTW9kZWwoe30pOyAvL290aGVyCgp2YXIgJCA9IGtlbmRvLmpRdWVyeTsKdmFyIHRleHRGaWVsZCA9ICJudW1iZXJOYW1lIjsKdmFyIGtleUZpZWxkID0gImlkIjsKdmFyIGRlZmF1bHRJdGVtID0gKF9kZWZhdWx0SXRlbSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmF1bHRJdGVtLCB0ZXh0RmllbGQsICJTZWxlY3QgQ3VzdG9tZXIuLi4iKSwgX2RlZmluZVByb3BlcnR5KF9kZWZhdWx0SXRlbSwga2V5RmllbGQsIG51bGwpLCBfZGVmYXVsdEl0ZW0pOwp2YXIgZGVmYXVsdFN1cEl0ZW0gPSAoX2RlZmF1bHRTdXBJdGVtID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfZGVmYXVsdFN1cEl0ZW0sIHRleHRGaWVsZCwgIlNlbGVjdCBTdXBwbGllci4uLiIpLCBfZGVmaW5lUHJvcGVydHkoX2RlZmF1bHRTdXBJdGVtLCBrZXlGaWVsZCwgbnVsbCksIF9kZWZhdWx0U3VwSXRlbSk7CnZhciBkZWZhdWx0RW1wSXRlbSA9IChfZGVmYXVsdEVtcEl0ZW0gPSB7fSwgX2RlZmluZVByb3BlcnR5KF9kZWZhdWx0RW1wSXRlbSwgdGV4dEZpZWxkLCAiU2VsZWN0IEVtcGxveWVlLi4uIiksIF9kZWZpbmVQcm9wZXJ0eShfZGVmYXVsdEVtcEl0ZW0sIGtleUZpZWxkLCBudWxsKSwgX2RlZmF1bHRFbXBJdGVtKTsKCnZhciBlbXB0eUl0ZW0gPSBfZGVmaW5lUHJvcGVydHkoe30sIHRleHRGaWVsZCwgImxvYWRpbmcgLi4uIik7Cgp2YXIgaW52b2ljZVByZWZpeCA9ICJsaW4tIjsKdmFyIERJU0NPVU5UX1RZUEUgPSAiP3R5cGU9U2FsZSI7Cgp2YXIgY29va2llSlMgPSByZXF1aXJlKCJAL2Nvb2tpZS5qcyIpOwoKdmFyIGNvb2tpZSA9IGNvb2tpZUpTLmdldENvb2tpZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNhbGVPcmRlciIsCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGluaXRTYWxlT3JkZXI6IHsKICAgICAgdHlwZTogU2FsZU9yZGVyTW9kZWwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmdNZTogZnVuY3Rpb24gTG9hZGluZ01lKCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMvTG9hZGluZyIpOwogICAgfSwKICAgICJhcHAtZGF0ZXBpY2tlciI6IERhdGVQaWNrZXJDb21wb25lbnQsCiAgICBkcm9wZG93bmxpc3Q6IERyb3BEb3duTGlzdCwKICAgICJhcHAtbW9udGhvZi1waWNrZXIiOiBmdW5jdGlvbiBhcHBNb250aG9mUGlja2VyKCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL01vbnRoT2ZQaWNrZXIiKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzYWxlT3JkZXI6IG5ldyBTYWxlT3JkZXJNb2RlbCgpLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICBudW1TZWxlY3Q6IFsxXSwKICAgICAgZGlhbG9nVGF4OiBmYWxzZSwKICAgICAgdGhlRGF0ZTogIiIsCiAgICAgIC8vQ2F0YWxvZwogICAgICBkaWFsb2dDYXRhbG9nOiBmYWxzZSwKICAgICAgZ3JpZFNjaGVtYTogewogICAgICAgIG1vZGVsOiB7CiAgICAgICAgICBpZDogImlkIgogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1nVVJMOiAiaHR0cHM6Ly9zMy1hcC1zb3V0aGVhc3QtMS5hbWF6b25hd3MuY29tL2ltYWdlcy5iYW5oamkvIiwKICAgICAgLy8gTG9hZGluZ01lCiAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgbG9hZGluZ0FsZXJ0OiBmYWxzZSwKICAgICAgbG9hZGluZ0NvbG9yQWxlcnQ6ICIiLAogICAgICBsb2FkaW5nVGV4dEFsZXJ0OiAiIiwKICAgICAgYmlsbF9kYXRlOiAiIiwKICAgICAgYWxlcnQ6IGZhbHNlLAogICAgICBmaWxlczogW10sCiAgICAgIGVycm9yczogW10sCiAgICAgIC8vIEZvcm0gdmFsaWRhdGlvbgogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgdGVtcGxhdGVzOiBbewogICAgICAgIHRpdGxlOiAiRHJhZnQiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIk9wZW4iCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIlBhcnRpYWxseSBDbG9zZWQiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIkNsb3NlZCIKICAgICAgfV0sCiAgICAgIHNhbGVPcmRlclR5cGU6IDEsCiAgICAgIHNhbGVPcmRlclR5cGVzOiBbewogICAgICAgIG5hbWU6ICJTdGFuZGFyZCBPcmRlciIsCiAgICAgICAgaWQ6IDEKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJPcGVuIE9yZGVyIiwKICAgICAgICBpZDogMgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkNvbnRyYWN0IiwKICAgICAgICBpZDogMwogICAgICB9LCB7CiAgICAgICAgbmFtZTogIkNvbnNpZ25tZW50IE9yZGVyIiwKICAgICAgICBpZDogNAogICAgICB9IC8vIHtuYW1lOiAnT3JkZXIgcmVxdWlyZWQgUHVyY2hhc2UnLCBpZDogNX0sCiAgICAgIF0sCiAgICAgIGlzUmVxdXJlZFB1cmNoYXNlOiBmYWxzZSwKICAgICAgY29sX2V4cGFuZDogOSwKICAgICAgY29sX2hpZGU6IDMsCiAgICAgIGlzSGlkZUJhcjogZmFsc2UsCiAgICAgIGZpbHRlcjogIiIsCiAgICAgIHRleHRGaWVsZDogIm51bWJlck5hbWUiLAogICAgICBkYXRhSXRlbUtleTogImlkIiwKICAgICAgZGVmYXVsdEl0ZW06IGRlZmF1bHRJdGVtLAogICAgICBkZWZhdWx0U3VwSXRlbTogZGVmYXVsdFN1cEl0ZW0sCiAgICAgIGRlZmF1bHRFbXBJdGVtOiBkZWZhdWx0RW1wSXRlbSwKICAgICAgbU90aGVyQ2hhcmdlOiBbXSwKICAgICAgLy9pdGVtCiAgICAgIGl0ZW1MaW5lczogW10sCiAgICAgIGl0ZW1MaW5lOiBpdGVtTGluZU1vZGVsLAogICAgICBkYXRlRm9ybWF0OiBpdGVtTGluZU1vZGVsLmRhdGVGb3JtYXQsCiAgICAgIC8vY3VzdG9tZXIKICAgICAgY3VzQmFzZVVybDogY3VzdG9tZXJIYW5kbGVyLnNlYXJjaCgpLAogICAgICBjdXN0b21lcjoge30sCiAgICAgIGN1c3RvbWVyTGlzdDogW10sCiAgICAgIHN1cHBsaWVyTGlzdDogW10sCiAgICAgIHN1cHBsaWVyOiB7fSwKICAgICAgc3VwQmFzZVVybDogc3VwcGxpZXJIYW5kbGVyLnNlYXJjaCgpLAogICAgICBiaWxsaW5nQWRkcmVzczogW10sCiAgICAgIGRlbGl2ZXJ5QWRkcmVzczogW10sCiAgICAgIHByaWNlTGV2ZWw6IFtdLAogICAgICAvL2RhdGUKICAgICAgcGF5bWVudFRlcm1zOiBbXSwKICAgICAgdHJhbnNhY3Rpb25zOiBbXSwKICAgICAgZW1wbG95ZWVMaXN0OiBbXSwKICAgICAgZW1wbG95ZWU6IHt9LAogICAgICBlbXBCYXNlVXJsOiBlbXBsb3llZUhhbmRsZXIuc2VhcmNoVVJMKCksCiAgICAgIHNhbGVDaGFubmVsTGlzdDogW10sCiAgICAgIGxvY2F0aW9uczogW10sCiAgICAgIGN1c3RvbWVyUHJvamVjdHM6IFtdLAogICAgICBzZWdtZW50czogW10sCiAgICAgIHRyYW5zYWN0aW9uVHlwZToge30sCiAgICAgIHRheExpc3RUb3RhbDoge30sCiAgICAgIGN1c3RvbWVyRGlzY291bnRJdGVtOiBbXSwKICAgICAgY3VzdG9tZXJTYWxlVW5pdDogW10sCiAgICAgIHNhbGVGb3JtQ29udGVudDogc2FsZUZvcm1Db250ZW50TW9kZWwsCiAgICAgIHRyYW5zYWN0aW9uRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCiAgICAgIG1vbnRoT2Y6IGZhbHNlLAogICAgICBkZWxpdmVyeURhdGVUaW1lOiBuZXcgRGF0ZSgpLAogICAgICB2YWxpZGl0eURhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApLAogICAgICBzcGVjaWZpY0Rpc2NvdW50SXRlbTogW10sCiAgICAgIG90aGVyQ2hhcmdlTGlzdDogW10sCiAgICAgIHNhbGVVbml0SXRlbUxpc3Q6IFtdLAogICAgICBvdGhlclRheDogW10sCiAgICAgIHNwZWNpZmljVGF4OiBbXSwKICAgICAgcHVibGljTGlnaHRpbmdUYXg6IFtdLAogICAgICB2YXRUYXg6IFtdLAogICAgICB0YXg6IFtdLAogICAgICBsb2dnZWRVc2VyOiB7CiAgICAgICAgaWQ6IGNvb2tpZS5jcmVhdG9yLAogICAgICAgIG5hbWU6IGNvb2tpZS5lbWFpbAogICAgICB9LAogICAgICBsZWFkczogW10sCiAgICAgIGNhdGFsb2dzOiBbXSwKICAgICAgdHhuTGlzdDogW10sCiAgICAgIHF1b3RlczogW10sCiAgICAgIHR4bkxpc3RzOiBbXSwKICAgICAgaXNTYXZlTmV3OiBmYWxzZSwKICAgICAgaXNTYXZlQ2xvc2U6IGZhbHNlLAogICAgICBpc1NhdmVQcmludDogZmFsc2UsCiAgICAgIGlzU2F2ZURyYWZ0OiBmYWxzZSwKICAgICAgZXhjaGFuZ2VSYXRlOiB7fSwKICAgICAgYmFzZUN1cnJlbmN5Q29kZTogIiIsCiAgICAgIGN1cnJlbmN5Q29kZTogIiIsCiAgICAgIHRyYW5zYWN0aW9uUmF0ZTogMSwKICAgICAgc2F2ZU9wdGlvbjogIiIsCiAgICAgIGZvcm1BUjogW3sKICAgICAgICBpZDogMSwKICAgICAgICBuYW1lOiAiRGVmYXVsdCBGb3JtIgogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgbmFtZTogIkZvcm0gODBtbSIKICAgICAgfV0sCiAgICAgIGlzUHJpY2VMZXZlbENoYW5nZWQ6IGZhbHNlLAogICAgICByZWZGcm9tOiBbXSwKICAgICAgLy8gY2FuIFNPIGNhbiBiZSBmcm9tIFNhbGUgUXVvdGVzCiAgICAgIGJ0bkRpc2FibGVkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdERhdGVUaW1lOiBmdW5jdGlvbiBmb3JtYXREYXRlVGltZSh2YWx1ZSkgewogICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodmFsdWUpLCB0aGlzLmRhdGVGb3JtYXQgKyAiIGhoOm1tIHR0Iik7CiAgICB9LAogICAgYW1vdW50Rm9ybWF0OiBmdW5jdGlvbiBhbW91bnRGb3JtYXQodmFsdWUpIHsKICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKHZhbHVlLmFtb3VudCwgIm4iLmNvbmNhdCh0aGlzLnNhbGVGb3JtQ29udGVudC5kZWNpbWFsKSk7CiAgICB9LAogICAgcHJpY2VGb3JtYXQ6IGZ1bmN0aW9uIHByaWNlRm9ybWF0KHZhbHVlKSB7CiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyh2YWx1ZS5wcmljZSwgIm4iLmNvbmNhdCh0aGlzLnNhbGVGb3JtQ29udGVudC5kZWNpbWFsKSk7CiAgICB9LAogICAgSGVscDogZnVuY3Rpb24gSGVscChrZXlfc2VhcmNoKSB7CiAgICAgIFNob3dSZXNvdXJjZShrZXlfc2VhcmNoKTsKICAgIH0sCiAgICBpbml0aWFsRGF0YTogZnVuY3Rpb24gaW5pdGlhbERhdGEoKSB7CiAgICAgIGlmICh0aGlzLmluaXRTYWxlT3JkZXIpIHsKICAgICAgICAvLyBFZGl0IE1vZGUKICAgICAgICB0aGlzLnNhbGVPcmRlciA9IHRoaXMuaW5pdFNhbGVPcmRlcjsKICAgICAgICB0aGlzLnNhbGVPcmRlci5jcmVkaXRMaW1pdCA9IDA7CiAgICAgICAgdGhpcy5zYWxlT3JkZXIuY3VycmVudEJhbGFuY2UgPSAwOyAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy5pbml0U2FsZU9yZGVyLCAncHJvcERhdGEnKQoKICAgICAgICB0aGlzLmJpbmREYXRhKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQnJhbmQgTmV3IE1vZGUKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdERhdGEoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZXREZWZhdWx0RGF0YTogZnVuY3Rpb24gc2V0RGVmYXVsdERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBCcmFuZCBOZXcgTW9kZQogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ2RlZmF1bHQgb3IgY2xlYXInKQogICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOwogICAgICB0aGlzLnNhbGVPcmRlciA9IG5ldyBTYWxlT3JkZXJNb2RlbCh7fSk7IC8vc2FsZSBvcmRlciB0eXBlCgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLnNhbGVPcmRlci5zYWxlT3JkZXJUeXBlID0gMTsKICAgICAgICB0aGlzLnNhbGVPcmRlclR5cGUgPSAxOwoKICAgICAgICBpZiAodGhpcy5hcHBUeXBlID09PSAnbnBvJyB8fCB0aGlzLmFwcFR5cGUgPT09ICdQdWJsaWMgU2VjdG9ycycpIHsKICAgICAgICAgIHRoaXMuc2FsZU9yZGVyLnNhbGVPcmRlclR5cGUgPSAzOwogICAgICAgICAgdGhpcy5zYWxlT3JkZXJUeXBlID0gMzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc2FsZU9yZGVyLmRlbGl2ZXJ5RGF0ZVRpbWUgPSBuZXcgRGF0ZSgpOwogICAgICB0aGlzLnNhbGVPcmRlci5mb3JtVGVtcGxhdGUgPSAxOwogICAgICB0aGlzLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKTsgLy8gR2VuZXJhdGUgTnVtYmVyCgogICAgICB0aGlzLml0ZW1MaW5lcyA9IFtdOyAvLyBsZXQgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKTsKICAgICAgLy8gZHMuZGF0YShbXSk7CiAgICAgIC8vIEFkZCAyIGRlZmF1bHQgbGluZXMKCiAgICAgIHRoaXMucmVtb3ZlRW1wdHlMaW5lKCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmFkZFJvdygpOyAvLyB0aGlzLmFkZFJvdygpCgogICAgICB9LCA1MDApOyAvLyBBZGQgMiBkZWZhdWx0IGxpbmVzCgogICAgICB0aGlzLm90aGVyQ2hhcmdlTGlzdCA9IFtdOwogICAgICB0aGlzLm1PdGhlckNoYXJnZSA9IFtdOwogICAgICB0aGlzLmVtcGxveWVlID0ge307CiAgICAgIHRoaXMudGF4TGlzdFRvdGFsID0ge307CiAgICAgIHRoaXMucXVvdGVzID0gW107CiAgICAgIHRoaXMuaXNTYXZlTmV3ID0gZmFsc2U7CiAgICAgIHRoaXMuaXNTYXZlQ2xvc2UgPSBmYWxzZTsKICAgICAgdGhpcy5pc1NhdmVQcmludCA9IGZhbHNlOwogICAgICB0aGlzLmlzU2F2ZURyYWZ0ID0gZmFsc2U7CiAgICAgIHRoaXMuY3JlZGl0TGltaXRVc2FnZSgwLCAxKTsKICAgICAgdGhpcy5pc1JlcXVyZWRQdXJjaGFzZSA9IGZhbHNlOwogICAgICB0aGlzLmN1c3RvbWVyID0ge307CiAgICB9LAogICAgYmluZERhdGE6IGZ1bmN0aW9uIGJpbmREYXRhKCkgewogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy5zYWxlT3JkZXIsICdiaW5kRGF0YScpCiAgICAgIC8vIEVkaXQgTW9kZQogICAgICBpZiAodGhpcy5zYWxlT3JkZXIpIHsKICAgICAgICBpZiAodGhpcy5zYWxlT3JkZXIuaGFzT3duUHJvcGVydHkoImN1c3RvbWVyIikpIHsKICAgICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY3VzdG9tZXIgPSB0aGlzLnNhbGVPcmRlci5jdXN0b21lcjsgLy8gbGV0IGUgPSB7dmFsdWU6IHRoaXMuc2FsZU9yZGVyLmN1c3RvbWVyfQogICAgICAgICAgLy8gdGhpcy5vbkNoYW5nZShlKQoKICAgICAgICAgIHRoaXMuYmlsbGluZ0FkZHJlc3MgPSB0aGlzLnNhbGVPcmRlci5jdXN0b21lci5iaWxsaW5nQWRkcmVzczsKICAgICAgICAgIHRoaXMuZGVsaXZlcnlBZGRyZXNzID0gdGhpcy5zYWxlT3JkZXIuY3VzdG9tZXIuZGVsaXZlcnlBZGRyZXNzOyAvLyB0aGlzLmN1c3RvbWVyUHJvamVjdHMgPSB0aGlzLnNhbGVPcmRlci5jdXN0b21lci4KCiAgICAgICAgICB0aGlzLnRheExpc3RUb3RhbCA9IHRoaXMuc2FsZU9yZGVyLnRheExpc3RUb3RhbDsKICAgICAgICAgIHRoaXMuaXRlbUxpbmVzID0gdGhpcy5zYWxlT3JkZXIuaXRlbUxpbmVzOwogICAgICAgICAgdGhpcy5tT3RoZXJDaGFyZ2UgPSB0aGlzLnNhbGVPcmRlci5vdGhlckNoYXJnZTsKICAgICAgICAgIHRoaXMubG9hZFByb2plY3RCeUN1c3RvbWVyKCk7CgogICAgICAgICAgaWYgKHRoaXMuY3VzdG9tZXIuaGFzT3duUHJvcGVydHkoImlkIikpIHsKICAgICAgICAgICAgdGhpcy5sb2FkQ3VzdG9tZXJCYWxhbmNlKHRoaXMuY3VzdG9tZXIuaWQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFkZFNlbGVjdDogZnVuY3Rpb24gYWRkU2VsZWN0KCkgewogICAgICB2YXIgYW1vdW50X251bSA9IHRoaXMubnVtU2VsZWN0Lmxlbmd0aDsKICAgICAgdmFyIG51bSA9IHRoaXMubnVtU2VsZWN0W2Ftb3VudF9udW0gLSAxXTsKICAgICAgdmFyIG5ld19udW0gPSBudW0gKyAxOwogICAgICB2YXIgbGVuZ2h0SXRlbSA9IHRoaXMuc3BlY2lmaWNEaXNjb3VudEl0ZW0ubGVuZ3RoOwoKICAgICAgaWYgKG5ld19udW0gPD0gbGVuZ2h0SXRlbSkgewogICAgICAgIHRoaXMubnVtU2VsZWN0LnB1c2gobmV3X251bSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVTZWxlY3Q6IGZ1bmN0aW9uIHJlbW92ZVNlbGVjdChpbmRleCkgewogICAgICB0aGlzLm51bVNlbGVjdC5zcGxpY2UoaW5kZXgsIDEpOyAvLyB3aW5kb3cuY29uc29sZS5sb2coaW5kZXgsIHRoaXMubnVtU2VsZWN0KQogICAgICAvLyB0aGlzLnNlbGVjdERpc2NvdW50LnNwbGljZShpbmRleCwxKQogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coInJlbW92ZSIsdGhpcy5zZWxlY3REaXNjb3VudCkKICAgICAgLy8gdGhpcy5zZWxlY3REaXNjb3VudCA9IHRoaXMuc2VsZWN0RGlzY291bnQuZmlsdGVyKGl0ZW0gPT4gIGl0ZW0uaWQgIT0gdmFsLmlkKTsKICAgIH0sCiAgICBlcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIGVycm9yTWVzc2FnZSgpIHt9LAogICAgYWNjb3VudERyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBhY2NvdW50RHJvcERvd25FZGl0b3IoKSB7fSwKICAgIGhpZGVfc21hbGxzaXRlYmFyOiBmdW5jdGlvbiBoaWRlX3NtYWxsc2l0ZWJhcigpIHsKICAgICAgaWYgKCF0aGlzLmlzSGlkZUJhcikgewogICAgICAgIC8vIHRoaXMuY29sX2V4cGFuZCA9IDEyCiAgICAgICAgLy8gdGhpcy5jb2xfaGlkZSA9IDAKICAgICAgICB0aGlzLmlzSGlkZUJhciA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhpcy5jb2xfZXhwYW5kID0gOQogICAgICAgIC8vIHRoaXMuY29sX2hpZGUgPSAzCiAgICAgICAgdGhpcy5pc0hpZGVCYXIgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vbnVtYmVyCiAgICBnZW5lcmF0ZU51bWJlcjogZnVuY3Rpb24gZ2VuZXJhdGVOdW1iZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaXNFZGl0ID09IGZhbHNlKSB7CiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKTsKCiAgICAgICAgaWYgKHRoaXMuc2FsZU9yZGVyLnRyYW5zYWN0aW9uRGF0ZSkgewogICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMudHJhbnNhY3Rpb25EYXRlKQogICAgICAgICAgZCA9IHRoaXMuc2FsZU9yZGVyLnRyYW5zYWN0aW9uRGF0ZTsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgYWJicjogdGhpcy5zYWxlT3JkZXIudHJhbnNhY3Rpb25UeXBlLmFiYnIsCiAgICAgICAgICBzdHJ1Y3R1cmU6IHRoaXMuc2FsZU9yZGVyLnRyYW5zYWN0aW9uVHlwZS5zdHJ1Y3R1cmUsCiAgICAgICAgICB0cmFuc2FjdGlvbkRhdGU6IGQsCiAgICAgICAgICB0eXBlOiAiU2FsZSBPcmRlciIKICAgICAgICB9OwogICAgICAgIGJpbGxpbmdIYW5kbGVyLmxhc3ROdW1iZXIoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwoKICAgICAgICAgICAgdmFyIGxhc3ROdW1iZXIgPSBfdGhpczIuemVyb1BhZChwYXJzZUludChyZXMubGFzdE51bWJlciksIF90aGlzMi5zYWxlT3JkZXIudHJhbnNhY3Rpb25UeXBlLmZvcm1hdCk7CgogICAgICAgICAgICB2YXIgbnVtYmVyID0gcmVzLnN1ZmZpeCArIF90aGlzMi5zYWxlT3JkZXIudHJhbnNhY3Rpb25UeXBlLm51bWJlclNlcGFyYXRvciArIGxhc3ROdW1iZXI7CiAgICAgICAgICAgIF90aGlzMi5zYWxlT3JkZXIubnVtYmVyID0gbnVtYmVyOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBfdGhpczIuZXJyb3JzLnB1c2goZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB6ZXJvUGFkOiBmdW5jdGlvbiB6ZXJvUGFkKG51bSwgcGxhY2VzKSB7CiAgICAgIHJldHVybiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICIwIik7CiAgICB9LAogICAgLy9jdXN0b21lcgogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhldmVudCk7CiAgICAgIHZhciB2YWx1ZSA9IGV2ZW50LnZhbHVlOwoKICAgICAgaWYgKHZhbHVlICYmIHZhbHVlW3RleHRGaWVsZF0gPT09IGVtcHR5SXRlbVt0ZXh0RmllbGRdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmN1c3RvbWVyID0gdmFsdWU7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmN1c3RvbWVyID0gdmFsdWU7IC8vIHRoaXMuaW52b2ljZSA9IHZhbHVlCiAgICAgIC8vIHRoaXMuc2FsZU9yZGVyLnBheW1lbnRUZXJtID0gdmFsdWUuaGFzT3duUHJvcGVydHkoInBheW1lbnRUZXJtIikKICAgICAgLy8gICA/IHZhbHVlLnBheW1lbnRUZXJtCiAgICAgIC8vICAgOiB7fTsKCiAgICAgIHRoaXMuc2FsZU9yZGVyLnByaWNlTGV2ZWwgPSB2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgicHJpY2VMZXZlbCIpID8gdmFsdWUucHJpY2VMZXZlbCA6IHt9OwogICAgICB2YXIgYmFzZUN1cnJlbmN5ID0gdmFsdWUuaGFzT3duUHJvcGVydHkoImJhc2VDdXJyZW5jeSIpID8gdmFsdWUuYmFzZUN1cnJlbmN5IDoge307CgogICAgICBpZiAoYmFzZUN1cnJlbmN5Lmhhc093blByb3BlcnR5KCJjb2RlIikpIHsKICAgICAgICB0aGlzLmJhc2VDdXJyZW5jeUNvZGUgPSBiYXNlQ3VycmVuY3kuY29kZTsKICAgICAgfQoKICAgICAgdmFyIHByaWNlTGV2ZWwgPSB2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgicHJpY2VMZXZlbCIpID8gdmFsdWUucHJpY2VMZXZlbCA6IHt9OwoKICAgICAgaWYgKHByaWNlTGV2ZWwuaGFzT3duUHJvcGVydHkoImN1cnJlbmN5IikpIHsKICAgICAgICBpZiAocHJpY2VMZXZlbC5jdXJyZW5jeS5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgdGhpcy5sb2FkVHJhbnNhY3Rpb25SYXRlKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJpbGxpbmdBZGRyZXNzID0gdmFsdWUuaGFzT3duUHJvcGVydHkoImJpbGxpbmdBZGRyZXNzIikgPyB2YWx1ZS5iaWxsaW5nQWRkcmVzcyA6IFtdOwogICAgICB0aGlzLmRlbGl2ZXJ5QWRkcmVzcyA9IHZhbHVlLmhhc093blByb3BlcnR5KCJkZWxpdmVyeUFkZHJlc3MiKSA/IHZhbHVlLmRlbGl2ZXJ5QWRkcmVzcyA6IFtdOwoKICAgICAgaWYgKHRoaXMuYmlsbGluZ0FkZHJlc3MubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuc2FsZU9yZGVyLmJpbGxpbmdBZGRyZXNzID0gdGhpcy5iaWxsaW5nQWRkcmVzc1swXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGVsaXZlcnlBZGRyZXNzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnNhbGVPcmRlci5kZWxpdmVyeUFkZHJlc3MgPSB0aGlzLmRlbGl2ZXJ5QWRkcmVzc1swXTsKICAgICAgfQoKICAgICAgdGhpcy5vblNhbGVPcmRlckRhdGVDaGFuZ2VkKCk7CiAgICAgIHRoaXMubG9hZFByb2plY3RCeUN1c3RvbWVyKCk7IC8vIGNvbnN0IGNyZWRpdExpbWl0ID0gdmFsdWUuaGFzT3duUHJvcGVydHkoImNyZWRpdExpbWl0IikKICAgICAgLy8gICA/IHZhbHVlLmNyZWRpdExpbWl0CiAgICAgIC8vICAgOiAwOwogICAgICAvLyB0aGlzLnNhbGVPcmRlci5jcmVkaXRMaW1pdCA9IGtlbmRvLnBhcnNlRmxvYXQoY3JlZGl0TGltaXQpOwoKICAgICAgdGhpcy5sb2FkQ3JlZGl0TGltaXQoKTsKICAgICAgdGhpcy5sb2FkQ3VzdG9tZXJCYWxhbmNlKHRoaXMuY3VzdG9tZXIuaWQpOyAvLyBsb2FkIHF1b3RlCgogICAgICB0aGlzLmxvYWRRdW90ZSgpOwogICAgICB0aGlzLmxvYWRQYXltZW50VGVybUxpc3QoKTsKICAgIH0sCiAgICBvbkZpbHRlckNoYW5nZTogZnVuY3Rpb24gb25GaWx0ZXJDaGFuZ2UoZXZlbnQpIHsKICAgICAgdmFyIGZpbHRlciA9IGV2ZW50LmZpbHRlci52YWx1ZTsKICAgICAgdGhpcy5yZXF1ZXN0RGF0YSgwLCBmaWx0ZXIsIHRoaXMuY3VzQmFzZVVybCk7CiAgICAgIHRoaXMuZmlsdGVyID0gZmlsdGVyOwogICAgfSwKICAgIHJlcXVlc3REYXRhOiBmdW5jdGlvbiByZXF1ZXN0RGF0YShza2lwLCBmaWx0ZXIsIGJhc2VVcmwpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1cmw7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXJsID0gYmFzZVVybCArICI/ZmlsdGVyPSIuY29uY2F0KGZpbHRlcik7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5hcHBUeXBlID09PSAnbnBvJykgewogICAgICAgICAgICAgICAgICB1cmwgPSBiYXNlVXJsICsgIj9maWx0ZXI9Ii5jb25jYXQoZmlsdGVyLCAiJmlzX2Rvbm9yPXRydWUiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMucmVxdWVzdFN0YXJ0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICAgICAgfSkudGhlbihfdGhpczMuYWZ0ZXJGZXRjaCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZnRlckZldGNoOiBmdW5jdGlvbiBhZnRlckZldGNoKGpzb24pIHsKICAgICAgdGhpcy5jdXN0b21lckxpc3QgPSBqc29uLmRhdGE7CiAgICB9LAogICAgLy9zdXBwbGllcgogICAgb25TdXBwbGllckNoYW5nZTogZnVuY3Rpb24gb25TdXBwbGllckNoYW5nZShldmVudCkgewogICAgICB3aW5kb3cuY29uc29sZS5sb2coZXZlbnQpOwogICAgICB2YXIgdmFsdWUgPSBldmVudC52YWx1ZTsKCiAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVt0ZXh0RmllbGRdID09PSBlbXB0eUl0ZW1bdGV4dEZpZWxkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zdXBwbGllciA9IHZhbHVlOwogICAgICB0aGlzLnNhbGVPcmRlci5zdXBwbGllciA9IHZhbHVlOwogICAgfSwKICAgIG9uU3VwcGxpZXJGaWx0ZXJDaGFuZ2U6IGZ1bmN0aW9uIG9uU3VwcGxpZXJGaWx0ZXJDaGFuZ2UoZXZlbnQpIHsKICAgICAgdmFyIHN1cGZpbHRlciA9IGV2ZW50LmZpbHRlci52YWx1ZTsKICAgICAgdGhpcy5zdXBwbGllclJlcXVlc3REYXRhKDAsIHN1cGZpbHRlciwgdGhpcy5zdXBCYXNlVXJsKTsKICAgIH0sCiAgICBzdXBwbGllclJlcXVlc3REYXRhOiBmdW5jdGlvbiBzdXBwbGllclJlcXVlc3REYXRhKHNraXAsIGZpbHRlciwgYmFzZVVybCkgewogICAgICB2YXIgdXJsID0gYmFzZVVybCArICI/ZmlsdGVyPSIuY29uY2F0KGZpbHRlcik7CiAgICAgIHRoaXMucmVxdWVzdFN0YXJ0ZWQgPSB0cnVlOwogICAgICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbih0aGlzLnN1cEFmdGVyRmV0Y2gpOwogICAgfSwKICAgIHN1cEFmdGVyRmV0Y2g6IGZ1bmN0aW9uIHN1cEFmdGVyRmV0Y2goanNvbikgewogICAgICB0aGlzLnN1cHBsaWVyTGlzdCA9IGpzb24uZGF0YTsKICAgIH0sCiAgICAvL2VtcGxveWVlCiAgICBvbkVtcGxveWVlQ2hhbmdlOiBmdW5jdGlvbiBvbkVtcGxveWVlQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciB2YWx1ZSA9IGV2ZW50LnZhbHVlOwoKICAgICAgaWYgKHZhbHVlICYmIHZhbHVlW3RleHRGaWVsZF0gPT09IGVtcHR5SXRlbVt0ZXh0RmllbGRdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmVtcGxveWVlID0gdmFsdWU7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmVtcGxveWVlID0gdmFsdWU7CiAgICB9LAogICAgb25FbXBsb3llZUZpbHRlckNoYW5nZWQ6IGZ1bmN0aW9uIG9uRW1wbG95ZWVGaWx0ZXJDaGFuZ2VkKGV2ZW50KSB7CiAgICAgIHZhciBlbXBmaWx0ZXIgPSBldmVudC5maWx0ZXIudmFsdWU7CiAgICAgIHRoaXMuZW1wbG95ZWVSZXF1ZXN0RGF0YSgwLCBlbXBmaWx0ZXIsIHRoaXMuZW1wQmFzZVVybCk7CiAgICB9LAogICAgZW1wbG95ZWVSZXF1ZXN0RGF0YTogZnVuY3Rpb24gZW1wbG95ZWVSZXF1ZXN0RGF0YShza2lwLCBmaWx0ZXIsIGJhc2VVcmwpIHsKICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyAiP2ZpbHRlcj0iLmNvbmNhdChmaWx0ZXIpOwogICAgICB0aGlzLnJlcXVlc3RTdGFydGVkID0gdHJ1ZTsKICAgICAgZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0pLnRoZW4odGhpcy5lbXBBZnRlckZldGNoKTsKICAgIH0sCiAgICBlbXBBZnRlckZldGNoOiBmdW5jdGlvbiBlbXBBZnRlckZldGNoKGpzb24pIHsKICAgICAgdGhpcy5lbXBsb3llZUxpc3QgPSBqc29uLmRhdGE7CiAgICB9LAogICAgcmVtb3ZlUm93OiBmdW5jdGlvbiByZW1vdmVSb3coZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZEl0ZW1MaW5lU2FsZU9yZGVyIikuZGF0YSgia2VuZG9HcmlkIiksCiAgICAgICAgICBkYXRhU291cmNlID0gZ3JpZC5kYXRhU291cmNlLAogICAgICAgICAgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKTsKCiAgICAgIGlmIChkYXRhU291cmNlLnRvdGFsKCkgPiAxKSB7CiAgICAgICAgZGF0YVNvdXJjZS5yZW1vdmUoZGF0YUl0ZW0pOwogICAgICB9CgogICAgICB0aGlzLmF1dG9DYWxjdWxhdGUoKTsKICAgIH0sCiAgICAvL2RhdGUKICAgIG9uU2FsZU9yZGVyRGF0ZUNoYW5nZWQ6IGZ1bmN0aW9uIG9uU2FsZU9yZGVyRGF0ZUNoYW5nZWQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHBheW1lbnRUZXJtLCBuZXREdWUsIHNvbWVEYXRlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LnNhbGVPcmRlci5tb250aE9mID0gbmV3IERhdGUoX3RoaXM0LnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQubG9hZENyZWRpdExpbWl0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQubG9hZEN1c3RvbWVyQmFsYW5jZShfdGhpczQuY3VzdG9tZXIuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0Lm9uUHJpY2VMZXZlbENoYW5nZSgpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmxvYWRQYXltZW50VGVybUxpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC5jdXN0b21lcikgewogICAgICAgICAgICAgICAgICBwYXltZW50VGVybSA9IF90aGlzNC5zYWxlT3JkZXIucGF5bWVudFRlcm0gfHwge307CiAgICAgICAgICAgICAgICAgIG5ldER1ZSA9IHBheW1lbnRUZXJtLm5ldER1ZSB8fCAwOwogICAgICAgICAgICAgICAgICBzb21lRGF0ZSA9IG5ldyBEYXRlKF90aGlzNC5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKTsKICAgICAgICAgICAgICAgICAgc29tZURhdGUuc2V0RGF0ZShzb21lRGF0ZS5nZXREYXRlKCkgKyBwYXJzZUludChuZXREdWUpKTsgLy9udW1iZXIgIG9mIGRheXMgdG8gYWRkLCBlLnguIDE1IGRheXMKCiAgICAgICAgICAgICAgICAgIF90aGlzNC5zYWxlT3JkZXIudmFsaWRpdHlEYXRlID0gc29tZURhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApOwogICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coImR1ZURhdGUiLCBfdGhpczQuc2FsZU9yZGVyLnZhbGlkaXR5RGF0ZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC4kcm91dGUucGFyYW1zLmlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmdlbmVyYXRlTnVtYmVyKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvblBheW1lbnRUZXJtQ2hhbmdlZDogZnVuY3Rpb24gb25QYXltZW50VGVybUNoYW5nZWQoKSB7CiAgICAgIC8vIHRoaXMub25TYWxlT3JkZXJEYXRlQ2hhbmdlZCgpOwogICAgICBpZiAodGhpcy5jdXN0b21lcikgewogICAgICAgIHZhciBwYXltZW50VGVybSA9IHRoaXMuc2FsZU9yZGVyLnBheW1lbnRUZXJtIHx8IHt9OwogICAgICAgIHZhciBuZXREdWUgPSBwYXltZW50VGVybS5uZXREdWUgfHwgMDsKICAgICAgICB2YXIgc29tZURhdGUgPSBuZXcgRGF0ZSh0aGlzLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUpOwogICAgICAgIHNvbWVEYXRlLnNldERhdGUoc29tZURhdGUuZ2V0RGF0ZSgpICsgcGFyc2VJbnQobmV0RHVlKSk7IC8vbnVtYmVyICBvZiBkYXlzIHRvIGFkZCwgZS54LiAxNSBkYXlzCgogICAgICAgIHRoaXMuc2FsZU9yZGVyLnZhbGlkaXR5RGF0ZSA9IHNvbWVEYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKTsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coImR1ZURhdGUiLCB0aGlzLnNhbGVPcmRlci52YWxpZGl0eURhdGUpOwogICAgICB9CiAgICB9LAogICAgLy9udW1iZXIKICAgIG51bWJlckZvcm1hdDogZnVuY3Rpb24gbnVtYmVyRm9ybWF0KHZhbHVlKSB7CiAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnNhbGVGb3JtQ29udGVudC5kZWNpbWFsLCduaW1vbCcpCiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyh2YWx1ZSwgIm4iLmNvbmNhdCh0aGlzLnNhbGVGb3JtQ29udGVudC5kZWNpbWFsKSk7IC8vIHJldHVybiB2YWx1ZQogICAgfSwKICAgIC8vCiAgICBsb2FkTGVhZDogZnVuY3Rpb24gbG9hZExlYWQoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ckZpbHRlciA9ICI/dHlwZT1TYWxlIExlYWQiOwogICAgICAgICAgICAgICAgICAgIF90aGlzNS5sZWFkcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGJpbGxpbmdIYW5kbGVyLmxpc3Qoc3RyRmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUubGVhZHMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFBheW1lbnRUZXJtOiBmdW5jdGlvbiBsb2FkUGF5bWVudFRlcm0oKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgcGF5bWVudFRlcm1IYW5kbGVyLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczYucGF5bWVudFRlcm1zID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LnBheW1lbnRUZXJtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczYuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkIHx8IF90aGlzNi4kcm91dGUucGFyYW1zLmlkICE9ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNi5zYWxlT3JkZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5zYWxlT3JkZXIucGF5bWVudFRlcm0gPSBfdGhpczYucGF5bWVudFRlcm1zWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFByaWNlTGV2ZWw6IGZ1bmN0aW9uIGxvYWRQcmljZUxldmVsKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHZhciBzdHJGaWx0ZXIgPSAiP25hdHVyZT1zYWxlIjsKICAgICAgICAgICAgICAgICAgICBwcmljZUxldmVsSGFuZGxlci5nZXQoc3RyRmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5wcmljZUxldmVsID0gcmVzOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczcucHJpY2VMZXZlbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczcuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkIHx8IF90aGlzNy4kcm91dGUucGFyYW1zLmlkICE9ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5zYWxlT3JkZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5zYWxlT3JkZXIucHJpY2VMZXZlbCA9IF90aGlzNy5wcmljZUxldmVsWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmxvYWRUcmFuc2FjdGlvblJhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlRHVwbGljYXRlOiBmdW5jdGlvbiByZW1vdmVEdXBsaWNhdGUoYXJyYXkpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICB2YXIgbWFwID0gbmV3IE1hcCgpOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFycmF5KSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBpZiAoIW1hcC5oYXMoaXRlbS5pZCkpIHsKICAgICAgICAgICAgbWFwLnNldChpdGVtLmlkLCB0cnVlKTsgLy8gc2V0IGFueSB2YWx1ZSB0byBNYXAKCiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGF1dG9DYWxjdWxhdGVEaXNjb3VudDogZnVuY3Rpb24gYXV0b0NhbGN1bGF0ZURpc2NvdW50KGRpc2NvdW50SXRlbSwgc3ViVG90YWwpIHsKICAgICAgaWYgKGRpc2NvdW50SXRlbSkgewogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygnZGlzY291bnRJdGVtJywgZGlzY291bnRJdGVtLCBzdWJUb3RhbCk7CiAgICAgICAgdmFyIG5hdHVyZSA9IGRpc2NvdW50SXRlbS5uYXR1cmUgfHwgJyc7CiAgICAgICAgdmFyIGFtb3VudCA9IGRpc2NvdW50SXRlbS5hbW91bnQgfHwgMDsKCiAgICAgICAgaWYgKG5hdHVyZSA9PT0gIkFtb3VudCIpIHsKICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGFtb3VudCk7CiAgICAgICAgfSBlbHNlIGlmIChuYXR1cmUgPT09ICJQZXJjZW50YWdlIikgewogICAgICAgICAgcmV0dXJuIHN1YlRvdGFsICogKHBhcnNlRmxvYXQoYW1vdW50KSAvIDEwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgfSwKICAgIGF1dG9DYWxjdWxhdGVUYXg6IGZ1bmN0aW9uIGF1dG9DYWxjdWxhdGVUYXgodGF4LCBhbW91bnQpIHsKICAgICAgaWYgKHRheCkgewogICAgICAgIHZhciBmb3JtdWxhID0gdGF4LmZvcm11bGE7CiAgICAgICAgdmFyIGluQW10ID0ga2VuZG8ucGFyc2VGbG9hdChhbW91bnQpOwogICAgICAgIHZhciBuQW10ID0ga2VuZG8ucGFyc2VGbG9hdChhbW91bnQpOwogICAgICAgIHZhciB0YXhCYXNlID0ga2VuZG8ucGFyc2VGbG9hdCh0YXgudGF4QmFzZSkgLyAxMDA7CiAgICAgICAgdmFyIHJhdGUgPSBrZW5kby5wYXJzZUZsb2F0KHRheC5yYXRlKSAvIDEwMDsKICAgICAgICB2YXIgdG90YWwgPSBldmFsKGZvcm11bGEpOwogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhpbkFtdCwgbkFtdCwgdGF4QmFzZSwgcmF0ZSwgZm9ybXVsYSwgdG90YWwpOyAvLyB3aW5kb3cuY29uc29sZS5sb2coYW1vdW50KQoKICAgICAgICByZXR1cm4gdG90YWw7CiAgICAgIH0gLy8gcmV0dXJuIDAKCiAgICB9LAogICAgYXV0b0NhbGN1bGF0ZVRheEJ5VHlwZTogZnVuY3Rpb24gYXV0b0NhbGN1bGF0ZVRheEJ5VHlwZSh0YXgpIHsKICAgICAgLy8gcmV0dXJuIGJ5IGEga2V5CiAgICAgIHZhciBncm91cEFsbCA9IGZ1bmN0aW9uIGdyb3VwQWxsKGxpc3QpIHsKICAgICAgICByZXR1cm4gbGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHRheCwgaXRlbSkgewogICAgICAgICAgdmFyIHRheEFtb3VudCA9IHRheFtpdGVtLm5hbWVdIHx8IDA7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGF4LCBfZGVmaW5lUHJvcGVydHkoe30sIGl0ZW0ubmFtZSwgdGF4QW1vdW50ICsgcGFyc2VGbG9hdChpdGVtLmFtb3VudCkpKTsKICAgICAgICB9LCB7fSk7CiAgICAgIH07CgogICAgICB0aGlzLnRheExpc3RUb3RhbCA9IGdyb3VwQWxsKHRheCk7IC8vIHdpbmRvdy5jb25zb2xlLmxvZygnbmltb2wnLCBncm91cEFsbCh0YXgpKQogICAgICAvLyB0aGlzLgogICAgfSwKICAgIGRhdGFTb3VyY2VDaGFuZ2VkOiBmdW5jdGlvbiBkYXRhU291cmNlQ2hhbmdlZChlKSB7CiAgICAgIGlmIChlLmZpZWxkKSB7CiAgICAgICAgdmFyIGRhdGFSb3cgPSBlLml0ZW1zWzBdLAogICAgICAgICAgICBidW9tID0ge30sCiAgICAgICAgICAgIGNvbnZlcnNpb25SYXRlID0gMSwKICAgICAgICAgICAgd2FjID0gMCwKICAgICAgICAgICAgcW9oID0gMCwKICAgICAgICAgICAgYW1vdW50ID0gMCwKICAgICAgICAgICAgeEFtb3VudCA9IDA7CgogICAgICAgIHN3aXRjaCAoZS5maWVsZCkgewogICAgICAgICAgY2FzZSAiaXRlbSI6CiAgICAgICAgICAgIC8vIHRoaXMuYXR0cmlidXRlXyA9IHRoaXMuYXR0cmlidXRlcy5maWx0ZXIobSA9PiBtLnR5cGUuaWQgPT09IGRhdGFSb3cudmFyaWFudC5pZCkKICAgICAgICAgICAgZGF0YVJvdy5zZXQoImRlc2NyaXB0aW9uIiwgZGF0YVJvdy5pdGVtLmRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgYnVvbSA9IGRhdGFSb3cuaXRlbS51b20gfHwge307CiAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJidW9tIiwgYnVvbSk7IC8vIHRoaXMuaXRlbUNoYW5nZShkYXRhUm93KQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAidW9tIjoKICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmljZUxldmVsQ2hhbmdlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgYnVvbSA9IGRhdGFSb3cudW9tLmJ1b20gfHwge307CiAgICAgICAgICAgICAgICAgIHFvaCA9IGRhdGFSb3cudW9tLnFvaCB8fCAwOwogICAgICAgICAgICAgICAgICBjb252ZXJzaW9uUmF0ZSA9IGRhdGFSb3cudW9tLmNvbnZlcnNpb25SYXRlIHx8IDE7CiAgICAgICAgICAgICAgICAgIHdhYyA9IGRhdGFSb3cudW9tLndhYyB8fCAwOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYnVvbSIsIGJ1b20pOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgid2FjIiwgd2FjKTsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoInFvaCIsIHFvaCk7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJjb252ZXJzaW9uUmF0ZSIsIHBhcnNlRmxvYXQoY29udmVyc2lvblJhdGUpKTsKCiAgICAgICAgICAgICAgICAgIGlmIChkYXRhUm93LnVvbSkgewogICAgICAgICAgICAgICAgICAgIGFtb3VudCA9IHBhcnNlRmxvYXQoZGF0YVJvdy51b20ucHJpY2UpICogcGFyc2VGbG9hdChkYXRhUm93LnF0eSk7CiAgICAgICAgICAgICAgICAgICAgeEFtb3VudCA9IGFtb3VudCAqIHBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoInByaWNlIiwgcGFyc2VGbG9hdChkYXRhUm93LnVvbS5wcmljZSkpOwogICAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJhbW91bnQiLCBhbW91bnQpOwogICAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJleGNoYW5nZUFtb3VudCIsIHhBbW91bnQpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFtb3VudCA9IHBhcnNlRmxvYXQoZGF0YVJvdy5wcmljZSkgKiBwYXJzZUZsb2F0KGRhdGFSb3cucXR5KTsKICAgICAgICAgICAgICAgICAgICB4QW1vdW50ID0gYW1vdW50ICogcGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgicHJpY2UiLCBwYXJzZUZsb2F0KGRhdGFSb3cucHJpY2UpKTsKICAgICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZXhjaGFuZ2VBbW91bnQiLCB4QW1vdW50KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJidW9tIiwge30pOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiY29udmVyc2lvblJhdGUiLCAxKTsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoInByaWNlIiwgMCk7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJxb2giLCAwKTsKICAgICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoIndhYyIsIDApOwogICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgMCk7CiAgICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJleGNoYW5nZUFtb3VudCIsIDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2ggKF91bnVzZWQpIHsKICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJwcmljZSIsIDApOwogICAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImFtb3VudCIsIDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAicHJpY2UiOgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGFtb3VudCA9IHBhcnNlRmxvYXQoZGF0YVJvdy5wcmljZSkgKiBwYXJzZUZsb2F0KGRhdGFSb3cucXR5KTsKICAgICAgICAgICAgICB4QW1vdW50ID0gYW1vdW50ICogcGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgicHJpY2UiLCBwYXJzZUZsb2F0KGRhdGFSb3cucHJpY2UpKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgYW1vdW50KTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZXhjaGFuZ2VBbW91bnQiLCB4QW1vdW50KTsgLy8gd2luZG93LmNvbnNvbGUubG9nKCdwcmljZScsZGF0YVJvdy5wcmljZSkKICAgICAgICAgICAgfSBjYXRjaCAoX3VudXNlZDIpIHsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgicHJpY2UiLCAwKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgMCk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImV4Y2hhbmdlQW1vdW50IiwgMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgInF0eSI6CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYW1vdW50ID0gcGFyc2VGbG9hdChkYXRhUm93LnByaWNlKSAqIHBhcnNlRmxvYXQoZGF0YVJvdy5xdHkpOwogICAgICAgICAgICAgIHhBbW91bnQgPSBhbW91bnQgKiBwYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJwcmljZSIsIHBhcnNlRmxvYXQoZGF0YVJvdy5wcmljZSkpOwogICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJhbW91bnQiLCBhbW91bnQpOwogICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJleGNoYW5nZUFtb3VudCIsIHhBbW91bnQpOwogICAgICAgICAgICB9IGNhdGNoIChfdW51c2VkMykgewogICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJwcmljZSIsIDApOwogICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJhbW91bnQiLCAwKTsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZXhjaGFuZ2VBbW91bnQiLCAwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAib3RoZXJUYXgiOgogICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coIi0tIiwgZGF0YVJvdykKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAoZS5maWVsZCkgewogICAgICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXV0b0NhbGN1bGF0ZTogZnVuY3Rpb24gYXV0b0NhbGN1bGF0ZSgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgIHN1YlRvdGFsID0gMCwKICAgICAgICAgIHRvdGFsVGF4ID0gMCwKICAgICAgICAgIGRpc2NvdW50VG90YWwgPSAwLAogICAgICAgICAgc3BUYXggPSAwLAogICAgICAgICAgcGx0YXggPSAwLAogICAgICAgICAgb3RoZXJUYXggPSAwLAogICAgICAgICAgdmF0VGF4ID0gMCwKICAgICAgICAgIGRpc2NvdW50SW52b2ljZSA9IDAsCiAgICAgICAgICB0YXhMaXN0ID0gW10sCiAgICAgICAgICBkaXNjb3VudEl0ZW0gPSBbXSwKICAgICAgICAgIHNhbGVVbml0ID0gW10sCiAgICAgICAgICBpbmNsdXNpdmVUYXggPSAwLAogICAgICAgICAgaXRlbVN1YnRvdGFsID0gMCwKICAgICAgICAgIHR4bkl0bVN1YnRvdGFsID0gMCwKICAgICAgICAgIHNlcnZpY2VTdWJ0b3RhbCA9IDAsCiAgICAgICAgICBpdGVtRGlzY291bnQgPSAwLAogICAgICAgICAgc2VydmljZURpc2NvdW50ID0gMCwKICAgICAgICAgIHR4bkRpc2NvdW50ID0gMDsKICAgICAgdmFyIHJvd3MgPSBkcy5kYXRhKCkuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobS5hbW91bnQpID4gMDsKICAgICAgfSk7CiAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgbW9kaWZpZXJQcmljZSA9IDA7CgogICAgICAgIGlmICh2YWx1ZS5tb2RpZmllcikgewogICAgICAgICAgbW9kaWZpZXJQcmljZSA9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUubW9kaWZpZXIucHJpY2UpOwogICAgICAgIH0gLy8gc3ViVG90YWwgKz0gKGtlbmRvLnBhcnNlRmxvYXQodmFsdWUuYW1vdW50KSArIG1vZGlmaWVyUHJpY2UpCgoKICAgICAgICB2YXIgZGlzY291bnQgPSAwOwoKICAgICAgICBpZiAodmFsdWUuZGlzY291bnRJdGVtKSB7CiAgICAgICAgICB2YXIgc3ViVG8gPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnByaWNlKSAqIGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucXR5KTsKICAgICAgICAgIGRpc2NvdW50ID0gX3RoaXM4LmF1dG9DYWxjdWxhdGVEaXNjb3VudCh2YWx1ZS5kaXNjb3VudEl0ZW0sIHN1YlRvKTsKICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygnZGlzY291bnQgaXRlbScsIGRpc2NvdW50LCAnLS0nLCB2YWx1ZS5kaXNjb3VudEl0ZW0pOwogICAgICAgICAgdmFsdWVbImRpc2NvdW50QW1vdW50Il0gPSBkaXNjb3VudDsKICAgICAgICAgIHZhbHVlWyJkaXNjb3VudEV4Y2hhbmdlQW1vdW50Il0gPSBkaXNjb3VudCAqIGtlbmRvLnBhcnNlRmxvYXQoX3RoaXM4LnNhbGVPcmRlci50eG5SYXRlKTsKCiAgICAgICAgICBpZiAodmFsdWUuZGlzY291bnRJdGVtLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgIGRpc2NvdW50SXRlbS5wdXNoKHZhbHVlLmRpc2NvdW50SXRlbSk7CiAgICAgICAgICB9CgogICAgICAgICAgZGlzY291bnRUb3RhbCArPSBkaXNjb3VudDsKICAgICAgICB9CgogICAgICAgIGlmICh2YWx1ZS5zYWxlVW5pdCkgewogICAgICAgICAgaWYgKHZhbHVlLnNhbGVVbml0Lmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgIHNhbGVVbml0LnB1c2godmFsdWUuc2FsZVVuaXQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbHVlLnNwZWNpZmljVGF4KSB7CiAgICAgICAgICBzcFRheCA9IF90aGlzOC5hdXRvQ2FsY3VsYXRlVGF4KHZhbHVlLnNwZWNpZmljVGF4LCBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmFtb3VudCkgLSBrZW5kby5wYXJzZUZsb2F0KGRpc2NvdW50KSk7IC8vIHdpbmRvdy5jb25zb2xlLmxvZygnc3AgJywgZGlzY291bnQpCgogICAgICAgICAgc3BUYXggPSBrZW5kby5wYXJzZUZsb2F0KHNwVGF4KSA/IGtlbmRvLnBhcnNlRmxvYXQoc3BUYXgpIDogMDsKICAgICAgICAgIHZhbHVlWyJzcGVjaWZpY1RheEFtb3VudCJdID0gc3BUYXg7CiAgICAgICAgICB2YWx1ZVsic3BlY2lmaWNUYXhFeGNoYW5nZUFtb3VudCJdID0gc3BUYXggKiBrZW5kby5wYXJzZUZsb2F0KF90aGlzOC5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgICAgICB2YXIgdGF4ID0gdmFsdWUuc3BlY2lmaWNUYXg7CiAgICAgICAgICB2YXIgYmFzZUFtb3VudCA9IHRheC5iYXNlQW1vdW50OwoKICAgICAgICAgIGlmIChiYXNlQW1vdW50KSB7CiAgICAgICAgICAgIGlmIChiYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09ICJpbmNsdXNpdmUiKSB7CiAgICAgICAgICAgICAgaW5jbHVzaXZlVGF4ICs9IHNwVGF4OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZhbHVlLnNwZWNpZmljVGF4Lmhhc093blByb3BlcnR5KCJ0YXhUeXBlIikpIHsKICAgICAgICAgICAgdGF4TGlzdC5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5zcGVjaWZpY1RheC50YXhUeXBlLm5hbWUsCiAgICAgICAgICAgICAgYW1vdW50OiBzcFRheCwKICAgICAgICAgICAgICBpZDogdmFsdWUuc3BlY2lmaWNUYXgudGF4VHlwZS5pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh2YWx1ZS5wdWJsaWNMaWdodGluZ1RheCkgewogICAgICAgICAgcGx0YXggPSBfdGhpczguYXV0b0NhbGN1bGF0ZVRheCh2YWx1ZS5wdWJsaWNMaWdodGluZ1RheCwga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpIC0ga2VuZG8ucGFyc2VGbG9hdChkaXNjb3VudCkpOwogICAgICAgICAgcGx0YXggPSBrZW5kby5wYXJzZUZsb2F0KHBsdGF4KSA/IGtlbmRvLnBhcnNlRmxvYXQocGx0YXgpIDogMDsKICAgICAgICAgIHZhbHVlWyJwdWJsaWNMaWdodGluZ1RheEFtb3VudCJdID0gcGx0YXg7CiAgICAgICAgICB2YWx1ZVsicHVibGljTGlnaHRpbmdUYXhFeGNoYW5nZUFtb3VudCJdID0gcGx0YXggKiBrZW5kby5wYXJzZUZsb2F0KF90aGlzOC5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgICAgICB2YXIgX3RheCA9IHZhbHVlLnB1YmxpY0xpZ2h0aW5nVGF4OwogICAgICAgICAgdmFyIF9iYXNlQW1vdW50ID0gX3RheC5iYXNlQW1vdW50OwoKICAgICAgICAgIGlmIChfYmFzZUFtb3VudCkgewogICAgICAgICAgICBpZiAoX2Jhc2VBbW91bnQudG9Mb3dlckNhc2UoKSA9PT0gImluY2x1c2l2ZSIpIHsKICAgICAgICAgICAgICBpbmNsdXNpdmVUYXggKz0gcGx0YXg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUucHVibGljTGlnaHRpbmdUYXguaGFzT3duUHJvcGVydHkoInRheFR5cGUiKSkgewogICAgICAgICAgICB0YXhMaXN0LnB1c2goewogICAgICAgICAgICAgIG5hbWU6IHZhbHVlLnB1YmxpY0xpZ2h0aW5nVGF4LnRheFR5cGUubmFtZSwKICAgICAgICAgICAgICBhbW91bnQ6IHBsdGF4LAogICAgICAgICAgICAgIGlkOiB2YWx1ZS5wdWJsaWNMaWdodGluZ1RheC50YXhUeXBlLmlkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbHVlLm90aGVyVGF4KSB7CiAgICAgICAgICBvdGhlclRheCA9IF90aGlzOC5hdXRvQ2FsY3VsYXRlVGF4KHZhbHVlLm90aGVyVGF4LCBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmFtb3VudCkgLSBrZW5kby5wYXJzZUZsb2F0KGRpc2NvdW50KSk7CiAgICAgICAgICBvdGhlclRheCA9IGtlbmRvLnBhcnNlRmxvYXQob3RoZXJUYXgpID8ga2VuZG8ucGFyc2VGbG9hdChvdGhlclRheCkgOiAwOwogICAgICAgICAgdmFsdWVbIm90aGVyVGF4QW1vdW50Il0gPSBvdGhlclRheDsKICAgICAgICAgIHZhbHVlWyJvdGhlclRheEV4Y2hhbmdlQW1vdW50Il0gPSBvdGhlclRheCAqIGtlbmRvLnBhcnNlRmxvYXQoX3RoaXM4LnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgICAgIHZhciBfdGF4MiA9IHZhbHVlLm90aGVyVGF4OwogICAgICAgICAgdmFyIF9iYXNlQW1vdW50MiA9IF90YXgyLmJhc2VBbW91bnQ7CgogICAgICAgICAgaWYgKF9iYXNlQW1vdW50MikgewogICAgICAgICAgICBpZiAoX2Jhc2VBbW91bnQyLnRvTG93ZXJDYXNlKCkgPT09ICJpbmNsdXNpdmUiKSB7CiAgICAgICAgICAgICAgaW5jbHVzaXZlVGF4ICs9IG90aGVyVGF4OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZhbHVlLm90aGVyVGF4Lmhhc093blByb3BlcnR5KCJ0YXhUeXBlIikpIHsKICAgICAgICAgICAgdGF4TGlzdC5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5vdGhlclRheC50YXhUeXBlLm5hbWUsCiAgICAgICAgICAgICAgYW1vdW50OiBvdGhlclRheCwKICAgICAgICAgICAgICBpZDogdmFsdWUub3RoZXJUYXgudGF4VHlwZS5pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh2YWx1ZS52YXRUYXgpIHsKICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZygnVmF0IFRheCcsIHZhbHVlLnZhdFRheCkKICAgICAgICAgIHZhciBhbXQgPSBrZW5kby5wYXJzZUZsb2F0KHNwVGF4ID8gc3BUYXggOiAwKSArIGtlbmRvLnBhcnNlRmxvYXQocGx0YXggPyBwbHRheCA6IDApICsga2VuZG8ucGFyc2VGbG9hdChvdGhlclRheCA/IG90aGVyVGF4IDogMCkgKyAoa2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQgPyB2YWx1ZS5hbW91bnQgOiAwKSAtIChkaXNjb3VudCA/IGRpc2NvdW50IDogMCkpOwogICAgICAgICAgdmF0VGF4ID0gX3RoaXM4LmF1dG9DYWxjdWxhdGVUYXgodmFsdWUudmF0VGF4LCBhbXQpOwogICAgICAgICAgdmF0VGF4ID0ga2VuZG8ucGFyc2VGbG9hdCh2YXRUYXgpID8ga2VuZG8ucGFyc2VGbG9hdCh2YXRUYXgpIDogMDsKICAgICAgICAgIHZhbHVlWyJ2YXRUYXhBbW91bnQiXSA9IHZhdFRheDsKICAgICAgICAgIHZhbHVlWyJ2YXRUYXhFeGNoYW5nZUFtb3VudCJdID0gdmF0VGF4ICoga2VuZG8ucGFyc2VGbG9hdChfdGhpczguc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICAgICAgdmFyIF90YXgzID0gdmFsdWUudmF0VGF4OwogICAgICAgICAgdmFyIF9iYXNlQW1vdW50MyA9IF90YXgzLmJhc2VBbW91bnQ7CgogICAgICAgICAgaWYgKF9iYXNlQW1vdW50MykgewogICAgICAgICAgICBpZiAoX2Jhc2VBbW91bnQzLnRvTG93ZXJDYXNlKCkgPT09ICJpbmNsdXNpdmUiKSB7CiAgICAgICAgICAgICAgaW5jbHVzaXZlVGF4ICs9IHZhdFRheDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS52YXRUYXguaGFzT3duUHJvcGVydHkoInRheFR5cGUiKSkgewogICAgICAgICAgICB0YXhMaXN0LnB1c2goewogICAgICAgICAgICAgIG5hbWU6IHZhbHVlLnZhdFRheC50YXhUeXBlLm5hbWUsCiAgICAgICAgICAgICAgYW1vdW50OiB2YXRUYXgsCiAgICAgICAgICAgICAgaWQ6IHZhbHVlLnZhdFRheC50YXhUeXBlLmlkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdG90YWxUYXggKz0ga2VuZG8ucGFyc2VGbG9hdChzcFRheCA/IHNwVGF4IDogMCkgKyBrZW5kby5wYXJzZUZsb2F0KHBsdGF4ID8gcGx0YXggOiAwKSArIGtlbmRvLnBhcnNlRmxvYXQob3RoZXJUYXggPyBvdGhlclRheCA6IDApICsga2VuZG8ucGFyc2VGbG9hdCh2YXRUYXggPyB2YXRUYXggOiAwKTsKICAgICAgICBzdWJUb3RhbCArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmFtb3VudCkgKyBtb2RpZmllclByaWNlIC0gaW5jbHVzaXZlVGF4OwogICAgICAgIHZhciBpdGVtID0gdmFsdWUuaXRlbTsKICAgICAgICB2YXIgaXRtVHlwZSA9IGl0ZW0udHlwZSB8fCAiIjsKCiAgICAgICAgaWYgKGl0bVR5cGUgPT09ICJWYXJpYW50IikgewogICAgICAgICAgaXRlbVN1YnRvdGFsICs9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucHJpY2UpICoga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5xdHkpOwogICAgICAgICAgaXRlbURpc2NvdW50ICs9IGtlbmRvLnBhcnNlRmxvYXQoZGlzY291bnQpOwogICAgICAgIH0gZWxzZSBpZiAoaXRtVHlwZSA9PT0gIlNlcnZpY2UiKSB7CiAgICAgICAgICBzZXJ2aWNlU3VidG90YWwgKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5wcmljZSkgKiBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnF0eSk7CiAgICAgICAgICBzZXJ2aWNlRGlzY291bnQgKz0ga2VuZG8ucGFyc2VGbG9hdChkaXNjb3VudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHR4bkl0bVN1YnRvdGFsICs9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucHJpY2UpICoga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5xdHkpOwogICAgICAgICAgdHhuRGlzY291bnQgKz0ga2VuZG8ucGFyc2VGbG9hdChkaXNjb3VudCk7CiAgICAgICAgfSAvL2luY2x1ZGUgVGF4IEFtb3VudAoKCiAgICAgICAgdmFyIGFtb3VudE5vZGlzY291bnQgPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnByaWNlKSAqIGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucXR5KSAtIGRpc2NvdW50OwogICAgICAgIHZhciBpbmNsdWRlVGF4QW1vdW50ID0gYW1vdW50Tm9kaXNjb3VudCArIHZhdFRheCArIHBsdGF4ICsgc3BUYXggKyBvdGhlclRheDsKICAgICAgICB2YWx1ZVsiaW5jbHVkZVRheEFtb3VudCJdID0gaW5jbHVkZVRheEFtb3VudDsKICAgICAgICB2YWx1ZVsiaW5jbHVkZVRheEV4Y2hhbmdlQW1vdW50Il0gPSBpbmNsdWRlVGF4QW1vdW50ICoga2VuZG8ucGFyc2VGbG9hdChfdGhpczguc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICB9KTsKICAgICAgdGhpcy5zYWxlT3JkZXIuaXRlbVN1YnRvdGFsID0gaXRlbVN1YnRvdGFsOwogICAgICB0aGlzLnNhbGVPcmRlci5leGNoYW5nZUl0ZW1TdWJ0b3RhbCA9IGl0ZW1TdWJ0b3RhbCAqIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLnNlcnZpY2VTdWJ0b3RhbCA9IHNlcnZpY2VTdWJ0b3RhbDsKICAgICAgdGhpcy5zYWxlT3JkZXIuZXhjaGFuZ2VTZXJ2aWNlU3VidG90YWwgPSBzZXJ2aWNlU3VidG90YWwgKiBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICB0aGlzLnNhbGVPcmRlci50eG5JdG1TdWJ0b3RhbCA9IHR4bkl0bVN1YnRvdGFsOwogICAgICB0aGlzLnNhbGVPcmRlci5leGNoYW5nZVR4bkl0bVN1YnRvdGFsID0gdHhuSXRtU3VidG90YWwgKiBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICB0aGlzLnNhbGVPcmRlci5pdGVtRGlzY291bnQgPSBpdGVtRGlzY291bnQ7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmV4Y2hhbmdlSXRlbURpc2NvdW50ID0gaXRlbURpc2NvdW50ICoga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50eG5SYXRlKTsKICAgICAgdGhpcy5zYWxlT3JkZXIuc2VydmljZURpc2NvdW50ID0gc2VydmljZURpc2NvdW50OwogICAgICB0aGlzLnNhbGVPcmRlci5leGNoYW5nZVNlcnZpY2VEaXNjb3VudCA9IHNlcnZpY2VEaXNjb3VudCAqIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLnR4bkl0bURpc2NvdW50ID0gdHhuRGlzY291bnQ7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmV4Y2hhbmdlVHhuSXRtRGlzY291bnQgPSB0eG5EaXNjb3VudCAqIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5zYWxlT3JkZXIudHhuUmF0ZSk7CiAgICAgIGRpc2NvdW50VG90YWwgPSBkaXNjb3VudFRvdGFsID8gZGlzY291bnRUb3RhbCA6IDA7IC8vIHdpbmRvdy5jb25zb2xlLmxvZyhzcFRheCwgcGx0YXgsIG90aGVyVGF4LCB2YXRUYXgpCgogICAgICB2YXIgdG90YWwgPSBrZW5kby5wYXJzZUZsb2F0KHN1YlRvdGFsKSAtIGtlbmRvLnBhcnNlRmxvYXQoZGlzY291bnRUb3RhbCkgKyBrZW5kby5wYXJzZUZsb2F0KHRvdGFsVGF4KTsKICAgICAgdGhpcy5zYWxlT3JkZXIuc3ViVG90YWwgPSBzdWJUb3RhbDsKICAgICAgdGhpcy5zYWxlT3JkZXIudG90YWxUYXhBbW91bnQgPSBrZW5kby5wYXJzZUZsb2F0KHRvdGFsVGF4KTsKICAgICAgdGhpcy5zYWxlT3JkZXIuZGlzY291bnRUb3RhbCA9IGtlbmRvLnBhcnNlRmxvYXQoZGlzY291bnRUb3RhbCk7CgogICAgICBpZiAodGhpcy5zYWxlT3JkZXIuc3BlY2lmaWNEaXNjb3VudEl0ZW0pIHsKICAgICAgICBkaXNjb3VudEludm9pY2UgPSB0aGlzLmF1dG9DYWxjdWxhdGVEaXNjb3VudCh0aGlzLnNhbGVPcmRlci5zcGVjaWZpY0Rpc2NvdW50SXRlbSwga2VuZG8ucGFyc2VGbG9hdChzdWJUb3RhbCkpOwogICAgICAgIGRpc2NvdW50SW52b2ljZSA9IGRpc2NvdW50SW52b2ljZSA/IGRpc2NvdW50SW52b2ljZSA6IDA7CiAgICAgIH0gLy8gdGhpcy5vbk90aGVyQ2hhcmdlQ2hhbmdlKCkKCgogICAgICB0aGlzLnNhbGVPcmRlci50b3RhbCA9IGtlbmRvLnBhcnNlRmxvYXQodG90YWwpIC0gZGlzY291bnRJbnZvaWNlICsga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci5vdGhlckNoYXJnZUFtb3VudCk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLmV4Y2hhbmdlQW1vdW50ID0ga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50b3RhbCkgKiBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnR4blJhdGUpOwogICAgICB0aGlzLmF1dG9DYWxjdWxhdGVUYXhCeVR5cGUodGF4TGlzdCk7CiAgICAgIHRoaXMuY3VzdG9tZXJEaXNjb3VudEl0ZW0gPSB0aGlzLnJlbW92ZUR1cGxpY2F0ZShkaXNjb3VudEl0ZW0pOwogICAgICB0aGlzLmN1c3RvbWVyU2FsZVVuaXQgPSB0aGlzLnJlbW92ZUR1cGxpY2F0ZShzYWxlVW5pdCk7IC8vIHdpbmRvdy5jb25zb2xlLmxvZygnZGlzY291bnQgJywgdGhpcy5jdXN0b21lckRpc2NvdW50SXRlbSkKICAgIH0sCiAgICByb3dOdW1iZXJUbXBsOiBmdW5jdGlvbiByb3dOdW1iZXJUbXBsKGRhdGFJdGVtKSB7CiAgICAgIHZhciBkcyA9IHRoaXMuJHJlZnMuaXRlbUxpbmVEUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgIH0sCiAgICBsb2FkU2FsZUZvcm1Db250ZW50OiBmdW5jdGlvbiBsb2FkU2FsZUZvcm1Db250ZW50KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHNhbGVGb3JtQ29udGVudEhhbmRsZXIubGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnNhbGVGb3JtQ29udGVudCA9IGRhdGFbMF07IC8vIHdpbmRvdy5jb25zb2xlLmxvZyhkYXRhWzBdKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB2YXRUZW1wbGF0ZTogZnVuY3Rpb24gdmF0VGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgdmFyIHZhdCA9IGRhdGFJdGVtLnZhdFRheDsKCiAgICAgIGlmICh2YXQpIHsKICAgICAgICByZXR1cm4gIjxzcGFuPiIuY29uY2F0KHZhdC5kZWZhdWx0VGF4ID8gdmF0LmRlZmF1bHRUYXggOiAiIiwgIjwvc3Bhbj4iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBpdGVtVGVtcGxhdGU6IGZ1bmN0aW9uIGl0ZW1UZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICB2YXIgaXRlbSA9IGRhdGFJdGVtLml0ZW07CgogICAgICBpZiAoaXRlbSkgewogICAgICAgIHJldHVybiAiPHNwYW4+Ii5jb25jYXQoaXRlbS5uYW1lID8gaXRlbS5uYW1lIDogIiIsICI8L3NwYW4+Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgVU9NVGVtcGxhdGU6IGZ1bmN0aW9uIFVPTVRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIHZhciB1b20gPSBkYXRhSXRlbS51b207CgogICAgICBpZiAodW9tKSB7CiAgICAgICAgcmV0dXJuICI8c3Bhbj4iLmNvbmNhdCh1b20udW9tID8gdW9tLnVvbS5uYW1lIDogIiIsICI8L3NwYW4+Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgc2FsZVVuaXRUZW1wbGF0ZTogZnVuY3Rpb24gc2FsZVVuaXRUZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICB2YXIgc2FsZVVuaXQgPSBkYXRhSXRlbS5zYWxlVW5pdDsKCiAgICAgIGlmIChzYWxlVW5pdCkgewogICAgICAgIHJldHVybiAiPHNwYW4+Ii5jb25jYXQoc2FsZVVuaXQubmFtZSA/IHNhbGVVbml0Lm5hbWUgOiAiIiwgIjwvc3Bhbj4iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBkaXNjb3VudEl0ZW1UZW1wbGF0ZTogZnVuY3Rpb24gZGlzY291bnRJdGVtVGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgdmFyIGRpc2NvdW50SXRlbSA9IGRhdGFJdGVtLmRpc2NvdW50SXRlbTsKCiAgICAgIGlmIChkaXNjb3VudEl0ZW0pIHsKICAgICAgICByZXR1cm4gIjxzcGFuPiIuY29uY2F0KGRpc2NvdW50SXRlbS5jb2RlID8gZGlzY291bnRJdGVtLmNvZGUgOiAiIiwgIiAtICIpLmNvbmNhdChkaXNjb3VudEl0ZW0ubmFtZSA/IGRpc2NvdW50SXRlbS5uYW1lIDogIiIsICI8L3NwYW4+Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgU2VydmljZURhdGVFZGl0b3I6IGZ1bmN0aW9uIFNlcnZpY2VEYXRlRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCByZXF1aXJlZCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKS5hcHBlbmRUbyhjb250YWluZXIpLmtlbmRvRGF0ZVBpY2tlcigpOyAvLyBsZXQgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKQogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coZHMuZGF0YSgpKQogICAgICAvLyAvLyBjb25zdCBkYXRlU3RyaW5nID0ga2VuZG8udG9TdHJpbmcoKG5ldyBEYXRlKG9wdGlvbnMubW9kZWwuaXRlbXMuc2VydmljZURhdGUpKSwgdGhpcy5pdGVtTGluZS5kYXRlRm9ybWF0KQogICAgICAvLyAvLyBjb25zdCBkYXRlU3RyaW5nID0ga2VuZG8udG9TdHJpbmcob3B0aW9ucy5tb2RlbC5pdGVtcy5zZXJ2aWNlRGF0ZSkKICAgICAgLy8gY29uc3QgJGlucHV0ID0gJCgiPGlucHV0IHZhbHVlPSIgKyBvcHRpb25zLm1vZGVsLnNlcnZpY2VEYXRlICsgIiAvPiIpLmFwcGVuZFRvKGNvbnRhaW5lcikKICAgICAgLy8gJGlucHV0LmtlbmRvRGF0ZVBpY2tlcigpCiAgICAgIC8vIC8vICRpbnB1dC5hcHBlbmRUbyhjb250YWluZXIpCiAgICAgIC8vIC8vIG9wdGlvbnMubW9kZWwuaXRlbXMuc2VydmljZURhdGUgPSBkYXRlU3RyaW5nCiAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZygkaW5wdXQpCiAgICB9LAogICAgU2VydmljZURhdGVUb0VkaXRvcjogZnVuY3Rpb24gU2VydmljZURhdGVUb0VkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgcmVxdWlyZWQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0RhdGVQaWNrZXIoKTsKICAgIH0sCiAgICBJdGVtRHJvcERvd25FZGl0b3I6IGZ1bmN0aW9uIEl0ZW1Ecm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogImNvbnRhaW5zIiwKICAgICAgICBkYXRhVGV4dEZpZWxkOiAibmFtZSIsCiAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICAgICAgaGVhZGVyVGVtcGxhdGU6ICc8ZGl2IGNsYXNzPSJkcm9wZG93bi1oZWFkZXIgay13aWRnZXQgay1oZWFkZXIiPicgKyAiPHNwYW4+SXRlbXMgPC9zcGFuPiIgKyAiPHNwYW4+PC9zcGFuPiIgKyAiPC9kaXY+IiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9bmFtZSM8L3NwYW4+IiwKICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIHNlcnZlckZpbHRlcmluZzogdHJ1ZSwKICAgICAgICAgIHRyYW5zcG9ydDogewogICAgICAgICAgICByZWFkOiB7CiAgICAgICAgICAgICAgdXJsOiBwcm9kdWN0VmFyaWFudEhhbmRsZXIuaXRlbVNlYXJjaFVSTCgnP3BsSWQ9JyArIHRoaXMuc2FsZU9yZGVyLnByaWNlTGV2ZWwuaWQpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIKICAgICAgICAgIH0sCiAgICAgICAgICBzY2hlbWE6IHsKICAgICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgICBpZDogImlkIiwKICAgICAgICAgICAgICBmaWVsZHM6IHsKICAgICAgICAgICAgICAgIGlkOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdHJpbmciCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbmFtZTogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNrdTogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gZGF0YShyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b3RhbDogZnVuY3Rpb24gdG90YWwocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBkYXRhOiB0aGlzLnZhcmlhbnRzCgogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSwKICAgIFVPTURyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBVT01Ecm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJ1b20ubmFtZSIsCiAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJ1b20uaWQiLAogICAgICAgIGNhc2NhZGVGcm9tOiAiaXRlbSIsCiAgICAgICAgdGVtcGxhdGU6ICI8c3Bhbj4jPXVvbS5uYW1lIHx8IGBObyBQcmljZSBMZXZlbGAjPC9zcGFuPiIsCiAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICBzZXJ2ZXJGaWx0ZXJpbmc6IHRydWUsCiAgICAgICAgICB0cmFuc3BvcnQ6IHsKICAgICAgICAgICAgcmVhZDogewogICAgICAgICAgICAgIC8vIHVybDogdW9tUHJpY2VIYW5kbGVyLmdldFVSTChvcHRpb25zLm1vZGVsLml0ZW0uaWQsIHRoaXMuc2FsZU9yZGVyLnByaWNlTGV2ZWwuaWQpLAogICAgICAgICAgICAgIHVybDogdW9tUHJpY2VIYW5kbGVyLnVvbVByaWNlQnlQcmljZUxldmVsVVJMKCJpZD0iICsgb3B0aW9ucy5tb2RlbC5pdGVtLmlkICsgIiZwbElkPSIgKyB0aGlzLnNhbGVPcmRlci5wcmljZUxldmVsLmlkICsgIiZkYXRlPSIgKyB0aGlzLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIKICAgICAgICAgIH0sCiAgICAgICAgICBzY2hlbWE6IHsKICAgICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgICBpZDogImlkIiwKICAgICAgICAgICAgICBmaWVsZHM6IHsKICAgICAgICAgICAgICAgIGlkOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdHJpbmciCiAgICAgICAgICAgICAgICB9IC8vIG5hbWU6IHt0eXBlOiAic3RyaW5nIn0sCiAgICAgICAgICAgICAgICAvLyBza3U6IHt0eXBlOiAic3RyaW5nIn0sCgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gZGF0YShyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b3RhbDogZnVuY3Rpb24gdG90YWwocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBkYXRhOiB0aGlzLnZhcmlhbnRzCgogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSwKICAgIERpc2NvdW50SXRlbURyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBEaXNjb3VudEl0ZW1Ecm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICBjYXNjYWRlRnJvbTogIml0ZW0iLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1jb2RlIyAtICM9bmFtZSM8L3NwYW4+IiwKICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIHNlcnZlckZpbHRlcmluZzogdHJ1ZSwKICAgICAgICAgIHRyYW5zcG9ydDogewogICAgICAgICAgICByZWFkOiB7CiAgICAgICAgICAgICAgdXJsOiBkaXNjb3VudEl0ZW1IYW5kbGVyLmdldFVSTChESVNDT1VOVF9UWVBFKQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iCiAgICAgICAgICB9LAogICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICBpZDogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSAvLyBuYW1lOiB7dHlwZTogInN0cmluZyJ9LAogICAgICAgICAgICAgICAgLy8gc2t1OiB7dHlwZTogInN0cmluZyJ9LAoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG90YWw6IGZ1bmN0aW9uIHRvdGFsKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBTcGVjaWZpY1RheERyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBTcGVjaWZpY1RheERyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKS5hcHBlbmRUbyhjb250YWluZXIpLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgZGF0YVRleHRGaWVsZDogImRlZmF1bHRUYXgiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgZGF0YTogdGhpcy5zcGVjaWZpY1RheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwuaGFzT3duUHJvcGVydHkoInZhdFRheCIpKSB7CiAgICAgICAgICAgICAgdmFyIHZhdCA9IG9wdGlvbnMubW9kZWwudmF0VGF4OwoKICAgICAgICAgICAgICBpZiAodmF0KSB7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbC52YXRUYXggIT09IG51bGwgfHwgb3B0aW9ucy5tb2RlbC52YXRUYXggIT09ICJudWxsIikgewogICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbC52YXRUYXguYmFzZUFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKSA9PT0gb3B0aW9ucy5tb2RlbC52YXRUYXguYmFzZUFtb3VudC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBQdWJsaWNMaWdodGluZ1RheERyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBQdWJsaWNMaWdodGluZ1RheERyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKS5hcHBlbmRUbyhjb250YWluZXIpLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgZGF0YVRleHRGaWVsZDogImRlZmF1bHRUYXgiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgZGF0YTogdGhpcy5wdWJsaWNMaWdodGluZ1RheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwuaGFzT3duUHJvcGVydHkoInZhdFRheCIpKSB7CiAgICAgICAgICAgICAgdmFyIHZhdCA9IG9wdGlvbnMubW9kZWwudmF0VGF4OwoKICAgICAgICAgICAgICBpZiAodmF0KSB7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbC52YXRUYXggIT09IG51bGwgJiYgb3B0aW9ucy5tb2RlbC52YXRUYXggIT09ICJudWxsIikgewogICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbC52YXRUYXguYmFzZUFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKSA9PT0gb3B0aW9ucy5tb2RlbC52YXRUYXguYmFzZUFtb3VudC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBPdGhlclRheERyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBPdGhlclRheERyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKS5hcHBlbmRUbyhjb250YWluZXIpLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgZGF0YVRleHRGaWVsZDogImRlZmF1bHRUYXgiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgZGF0YTogdGhpcy5vdGhlclRheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZWwuaGFzT3duUHJvcGVydHkoInZhdFRheCIpKSB7CiAgICAgICAgICAgICAgdmFyIHZhdCA9IG9wdGlvbnMubW9kZWwudmF0VGF4OwoKICAgICAgICAgICAgICBpZiAodmF0KSB7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbC52YXRUYXggIT09IG51bGwgJiYgb3B0aW9ucy5tb2RlbC52YXRUYXggIT09ICJudWxsIikgewogICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbC52YXRUYXguYmFzZUFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKSA9PT0gb3B0aW9ucy5tb2RlbC52YXRUYXguYmFzZUFtb3VudC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBWYXRUYXhEcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gVmF0VGF4RHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgIGF1dG9CaW5kOiB0cnVlLAogICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICBmaWx0ZXI6ICJzdGFydHN3aXRoIiwKICAgICAgICBkYXRhVGV4dEZpZWxkOiAiZGVmYXVsdFRheCIsCiAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICAgICAgdGVtcGxhdGU6ICI8c3Bhbj4jPWRlZmF1bHRUYXgjPC9zcGFuPiIsCiAgICAgICAgb3B0aW9uTGFiZWw6ICItLVNlbGVjdC0tIiwKICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgIGRhdGE6IHRoaXMudmF0VGF4CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgU2FsZVVuaXREcm9wRG93bkVkaXRvcjogZnVuY3Rpb24gU2FsZVVuaXREcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGhlaWdodDogNDAwLAogICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9Y29kZSMgLSAjPW5hbWUjPC9zcGFuPiIsCiAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICBkYXRhOiB0aGlzLnNhbGVVbml0SXRlbUxpc3QKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBNb2RpZmllckRyb3BEb3duRWRpdG9yOiBmdW5jdGlvbiBNb2RpZmllckRyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICB2YXIgaXRlbSA9IG9wdGlvbnMubW9kZWwuaXRlbSB8fCB7fTsKICAgICAgdmFyIHVvbSA9IGl0ZW0udW9tIHx8IHt9OwogICAgICB2YXIgaXRlbUlkID0gaXRlbS5pZCB8fCAnJzsKICAgICAgdmFyIHVvbUlkID0gdW9tLmlkIHx8ICcnOwogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKS5hcHBlbmRUbyhjb250YWluZXIpLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgZmlsdGVyOiAiY29udGFpbnMiLAogICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICBoZWFkZXJUZW1wbGF0ZTogJzxkaXYgY2xhc3M9ImRyb3Bkb3duLWhlYWRlciBrLXdpZGdldCBrLWhlYWRlciI+JyArICI8c3Bhbj5Nb2RpZmllciA8L3NwYW4+IiArICI8c3Bhbj48L3NwYW4+IiArICI8L2Rpdj4iLAogICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1uYW1lIzwvc3Bhbj4iLAogICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgc2VydmVyRmlsdGVyaW5nOiB0cnVlLAogICAgICAgICAgdHJhbnNwb3J0OiB7CiAgICAgICAgICAgIHJlYWQ6IHsKICAgICAgICAgICAgICB1cmw6IGl0ZW1Nb2RpZmllckhhbmRsZXIuc2VhcmNoVVJMKCc/cGxJZD0nICsgdGhpcy5zYWxlT3JkZXIucHJpY2VMZXZlbC5pZCArICcmaWQ9JyArIGl0ZW1JZCArICcmdW9tSWQ9JyArIHVvbUlkKQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iCiAgICAgICAgICB9LAogICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICBpZDogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcmljZTogewogICAgICAgICAgICAgICAgICB0eXBlOiAibnVtYmVyIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVvbTogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gZGF0YShyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b3RhbDogZnVuY3Rpb24gdG90YWwocmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSwKICAgIEVtcGxveWVlRHJvcERvd25FZGl0b3I6IGZ1bmN0aW9uIEVtcGxveWVlRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IGRhdGEtYmluZD0idmFsdWU6JyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb011bHRpU2VsZWN0KHsKICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgc3VnZ2VzdDogdHJ1ZSwKICAgICAgICBmaWx0ZXI6ICJjb250YWlucyIsCiAgICAgICAgZGF0YVRleHRGaWVsZDogIm5hbWUiLAogICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgIGhlYWRlclRlbXBsYXRlOiAnPGRpdiBjbGFzcz0iZHJvcGRvd24taGVhZGVyIGstd2lkZ2V0IGstaGVhZGVyIj4nICsgIjxzcGFuPkVtcGxveWVlIDwvc3Bhbj4iICsgIjxzcGFuPjwvc3Bhbj4iICsgIjwvZGl2PiIsCiAgICAgICAgdGVtcGxhdGU6ICI8c3Bhbj4jPW5hbWUjPC9zcGFuPiIsCiAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICBzZXJ2ZXJGaWx0ZXJpbmc6IHRydWUsCiAgICAgICAgICB0cmFuc3BvcnQ6IHsKICAgICAgICAgICAgcmVhZDogewogICAgICAgICAgICAgIHVybDogZW1wbG95ZWVIYW5kbGVyLnNlYXJjaFVSTCgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIKICAgICAgICAgIH0sCiAgICAgICAgICBzY2hlbWE6IHsKICAgICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgICBpZDogImlkIiwKICAgICAgICAgICAgICBmaWVsZHM6IHsKICAgICAgICAgICAgICAgIGlkOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdHJpbmciCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbmFtZTogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogewogICAgICAgICAgICAgICAgICB0eXBlOiAic3RyaW5nIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdHJpbmciCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvdGFsOiBmdW5jdGlvbiB0b3RhbChyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgZW1wSW1wbDogZnVuY3Rpb24gZW1wSW1wbChkYXRhSXRlbSkgewogICAgICB2YXIgZW1wSWRzID0gW107CiAgICAgIGRhdGFJdGVtLmVtcGxveWVlLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKICAgICAgICBlbXBJZHMucHVzaChtLmZpcnN0TmFtZSArICIgLSAiICsgbS5sYXN0TmFtZSk7CiAgICAgIH0pOyAvLyB3aW5kb3cuY29uc29sZS5sb2coZW1wSWRzLmpvaW4oJywgJykpCgogICAgICByZXR1cm4gIjxzcGFuPiIuY29uY2F0KGVtcElkcy5qb2luKCIsICIpLCAiPC9zcGFuPiIpOwogICAgfSwKICAgIGFkZFJvdzogZnVuY3Rpb24gYWRkUm93KCkgewogICAgICB2YXIgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKICAgICAgdGhpcy5pdGVtTGluZS5pZCA9IGludm9pY2VQcmVmaXggKyB1dWlkLnYxKCk7CiAgICAgIGRzLmluc2VydCh0b3RhbCwgdGhpcy5pdGVtTGluZSk7CiAgICB9LAogICAgb25TcGVjaWZpY0Rpc2NvdW50Q2hhbmdlZDogZnVuY3Rpb24gb25TcGVjaWZpY0Rpc2NvdW50Q2hhbmdlZCgpIHsKICAgICAgaWYgKHRoaXMuc2FsZU9yZGVyLnNwZWNpZmljRGlzY291bnRJdGVtKSB7CiAgICAgICAgdmFyIGRpc2NvdW50T3JkZXIgPSB0aGlzLmF1dG9DYWxjdWxhdGVEaXNjb3VudCh0aGlzLnNhbGVPcmRlci5zcGVjaWZpY0Rpc2NvdW50SXRlbSwgdGhpcy5zYWxlT3JkZXIuc3ViVG90YWwpOwogICAgICAgIHRoaXMuc2FsZU9yZGVyLnNwZWNpZmljRGlzY291bnRUb3RhbCA9IGtlbmRvLnRvU3RyaW5nKGRpc2NvdW50T3JkZXIgPyBkaXNjb3VudE9yZGVyIDogMCwgIm4iKTsKICAgICAgICB2YXIgdG90YWwgPSBrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLnN1YlRvdGFsKSAtIChrZW5kby5wYXJzZUZsb2F0KHRoaXMuc2FsZU9yZGVyLmRpc2NvdW50VG90YWwpICsga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnNhbGVPcmRlci50b3RhbFRheEFtb3VudCkpIC0gZGlzY291bnRPcmRlcjsKICAgICAgICB0aGlzLnNhbGVPcmRlci50b3RhbCA9IGtlbmRvLnRvU3RyaW5nKHRvdGFsLCAibiIpOwogICAgICB9CiAgICB9LAogICAgb25PdGhlckNoYXJnZUNoYW5nZTogZnVuY3Rpb24gb25PdGhlckNoYXJnZUNoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIG90aGVyQ2hhcmdlID0gMDsKICAgICAgdGhpcy5tT3RoZXJDaGFyZ2UuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgIG90aGVyQ2hhcmdlICs9IF90aGlzMTAuYXV0b0NhbGN1bGF0ZURpc2NvdW50KG0sIF90aGlzMTAuc2FsZU9yZGVyLnN1YlRvdGFsKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2FsZU9yZGVyLm90aGVyQ2hhcmdlQW1vdW50ID0gb3RoZXJDaGFyZ2U7CiAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgfSwKICAgIGxvYWRPdGhlckNoYXJnZTogZnVuY3Rpb24gbG9hZE90aGVyQ2hhcmdlKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBvdGhlckNoYXJnZUhhbmRsZXIubGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLm90aGVyQ2hhcmdlTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvbk90aGVyQW1vdW50OiBmdW5jdGlvbiBvbk90aGVyQW1vdW50KHZhbHVlKSB7CiAgICAgIHJldHVybiB0aGlzLmF1dG9DYWxjdWxhdGVEaXNjb3VudCh2YWx1ZSwgdGhpcy5zYWxlT3JkZXIuc3ViVG90YWwpOwogICAgfSwKICAgIGxvYWREaXNjb3VudEl0ZW06IGZ1bmN0aW9uIGxvYWREaXNjb3VudEl0ZW0oKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIGRpc2NvdW50SXRlbUhhbmRsZXIubGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLnNwZWNpZmljRGlzY291bnRJdGVtID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRTZWdtZW50OiBmdW5jdGlvbiBsb2FkU2VnbWVudCgpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIHJvbGVUeXBlLCByb2xlRGF0YSwgc2VnbWVudCwgc2VnbWVudERlZmF1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTMuc2VnbWVudHMgPSBbXTsKICAgICAgICAgICAgICAgIHJvbGVUeXBlID0gZGF0YVN0b3JlLnJvbGVUeXBlIHx8IDA7CgogICAgICAgICAgICAgICAgaWYgKHJvbGVUeXBlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGlmIChkYXRhU3RvcmUucm9sZURhdGEpIHsKICAgICAgICAgICAgICAgICAgICByb2xlRGF0YSA9IGRhdGFTdG9yZS5yb2xlRGF0YSB8fCBbXTsKICAgICAgICAgICAgICAgICAgICBzZWdtZW50ID0gcm9sZURhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdG0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdG0udHlwZSA9PT0gJ3NlZ21lbnQnOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNlZ21lbnREZWZhdWx0ID0gc2VnbWVudC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmlzRGVmYXVsdCA9PT0gMTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNlZ21lbnRzID0gc2VnbWVudDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkIHx8IF90aGlzMTMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50RGVmYXVsdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuc2FsZU9yZGVyLnNlZ21lbnQgPSBzZWdtZW50RGVmYXVsdFswXTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocm9sZVR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNlZ21lbnRzID0gW107CiAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0hhbmRsZXIuZ2V0U2VnKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuc2hvd0xvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNlZ21lbnRzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRMb2NhdGlvbjogZnVuY3Rpb24gbG9hZExvY2F0aW9uKCkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIHJvbGVUeXBlLCByb2xlRGF0YSwgbG9jYXRpb24sIGxvY2F0aW9uRGVmYXVsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTQubG9jYXRpb25zID0gW107CiAgICAgICAgICAgICAgICByb2xlVHlwZSA9IGRhdGFTdG9yZS5yb2xlVHlwZSB8fCAwOwoKICAgICAgICAgICAgICAgIGlmIChyb2xlVHlwZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBpZiAoZGF0YVN0b3JlLnJvbGVEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgcm9sZURhdGEgPSBkYXRhU3RvcmUucm9sZURhdGEgfHwgW107CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSByb2xlRGF0YS5maWx0ZXIoZnVuY3Rpb24gKGl0bSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0bS50eXBlID09PSAnbG9jYXRpb24nOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uRGVmYXVsdCA9IGxvY2F0aW9uLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uaXNEZWZhdWx0ID09PSAxOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIF90aGlzMTQubG9jYXRpb25zID0gbG9jYXRpb247CgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczE0LiRyb3V0ZS5wYXJhbXMuaWQgPT09IHVuZGVmaW5lZCB8fCBfdGhpczE0LiRyb3V0ZS5wYXJhbXMuaWQgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb25EZWZhdWx0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5zYWxlT3JkZXIubG9jYXRpb24gPSBsb2NhdGlvbkRlZmF1bHRbMF07CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGVUeXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5sb2NhdGlvbnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSGFuZGxlci5saXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQuc2hvd0xvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LmxvY2F0aW9ucyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRQcm9qZWN0QnlDdXN0b21lcjogZnVuY3Rpb24gbG9hZFByb2plY3RCeUN1c3RvbWVyKCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIHJvbGVUeXBlLCByb2xlRGF0YSwgcHJvamVjdCwgcHJvamVjdERlZmF1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczE1LmN1c3RvbWVyUHJvamVjdHMgPSBbXTsKICAgICAgICAgICAgICAgIHJvbGVUeXBlID0gZGF0YVN0b3JlLnJvbGVUeXBlIHx8IDA7CgogICAgICAgICAgICAgICAgaWYgKHJvbGVUeXBlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGlmIChkYXRhU3RvcmUucm9sZURhdGEpIHsKICAgICAgICAgICAgICAgICAgICByb2xlRGF0YSA9IGRhdGFTdG9yZS5yb2xlRGF0YSB8fCBbXTsKICAgICAgICAgICAgICAgICAgICBwcm9qZWN0ID0gcm9sZURhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdG0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdG0udHlwZSA9PT0gJ3Byb2plY3QnOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHByb2plY3QuZm9yRWFjaChmdW5jdGlvbiAoaykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbWVycyA9IGsuY3VzdG9tZXJzIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHByb0N1c3RvbWVyID0gY3VzdG9tZXJzLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5jdXN0b21lci5pZCA9PT0gX3RoaXMxNS5jdXN0b21lci5pZDsKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9DdXN0b21lci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTUuY3VzdG9tZXJQcm9qZWN0cy5wdXNoKGspOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNS4kcm91dGUucGFyYW1zLmlkID09PSB1bmRlZmluZWQgfHwgX3RoaXMxNS4kcm91dGUucGFyYW1zLmlkID09PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgcHJvamVjdERlZmF1bHQgPSBfdGhpczE1LmN1c3RvbWVyUHJvamVjdHMuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmlzRGVmYXVsdCA9PT0gMTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9qZWN0RGVmYXVsdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTUuc2FsZU9yZGVyLnByb2plY3QgPSBwcm9qZWN0RGVmYXVsdFswXTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocm9sZVR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SGFuZGxlci5nZXRCeUN1c3RvbWVyKF90aGlzMTUuY3VzdG9tZXIuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE1LnNob3dMb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE1LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS5jdXN0b21lclByb2plY3RzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE1LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFNhbGVDaGFubmVsOiBmdW5jdGlvbiBsb2FkU2FsZUNoYW5uZWwoKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNi5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc2FsZUNoYW5uZWxIYW5kbGVyLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTYuc2FsZUNoYW5uZWxMaXN0ID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LnNhbGVDaGFubmVsTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTYuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkIHx8IF90aGlzMTYuJHJvdXRlLnBhcmFtcy5pZCAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNi5zYWxlT3JkZXIuc2FsZUNoYW5uZWwgPSBfdGhpczE2LnNhbGVDaGFubmVsTGlzdFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTYuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFRheDogZnVuY3Rpb24gbG9hZFRheCgpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nSGFuZGxlci5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcudGF4ID0gcmVzOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy5vdGhlclRheCA9IF90aGlzMTcudGF4LmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG0udGF4VHlwZS50eXBlSWQgPT09IDcgfHwgbS50YXhUeXBlLnR5cGVJZCA9PT0gMTApICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gdmFsdWFibGUgdGF4CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy5zcGVjaWZpY1RheCA9IF90aGlzMTcudGF4LmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG0udGF4VHlwZS50eXBlSWQgPT09IDggfHwgbS50YXhUeXBlLnR5cGVJZCA9PT0gMTApICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gdmFsdWFibGUgdGF4CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy5wdWJsaWNMaWdodGluZ1RheCA9IF90aGlzMTcudGF4LmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG0udGF4VHlwZS50eXBlSWQgPT09IDkgfHwgbS50YXhUeXBlLnR5cGVJZCA9PT0gMTApICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gdmFsdWFibGUgdGF4CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy52YXRUYXggPSBfdGhpczE3LnRheC5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtLnRheFR5cGUudHlwZUlkID09PSAxIHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDggfHwgbS50YXhUeXBlLnR5cGVJZCA9PT0gMTApICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gdmFsdWFibGUgdGF4CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRTYWxlVW5pdEl0ZW1zOiBmdW5jdGlvbiBsb2FkU2FsZVVuaXRJdGVtcygpIHsKICAgICAgdmFyIF90aGlzMTggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBzYWxlVW5pdEl0ZW1IYW5kbGVyLmxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIF90aGlzMTguc2FsZVVuaXRJdGVtTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRDdXN0b21lckJhbGFuY2U6IGZ1bmN0aW9uIGxvYWRDdXN0b21lckJhbGFuY2UoaWQpIHsKICAgICAgdmFyIF90aGlzMTkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RyRmlsdGVyID0gaWQgKyAiP3R5cGU9YmFsIjsKICAgICAgICAgICAgICAgICAgICBiaWxsaW5nSGFuZGxlci5iYWxhbmNlKHN0ckZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE5LnNhbGVPcmRlci5jdXJyZW50QmFsYW5jZSA9IGRhdGFbMF0uYmFsYW5jZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCk7CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3JlZGl0TGltaXRVc2FnZTogZnVuY3Rpb24gY3JlZGl0TGltaXRVc2FnZShiYWxhbmNlLCBjcmVkaXRMaW1pdCkgewogICAgICB2YXIgbnVtID0gMDsKICAgICAgdmFyIHBlciA9IGJhbGFuY2UgLyBjcmVkaXRMaW1pdCAqIDEwMDsKCiAgICAgIGlmIChpc05hTihwZXIpKSB7CiAgICAgICAgLy8gSXQgaXNuJ3QgYSBudW1iZXIKICAgICAgICBudW0gPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEl0IGlzIGEgbnVtYmVyCiAgICAgICAgbnVtID0gcGVyOwogICAgICB9CgogICAgICByZXR1cm4gbnVtICsgIiAlIjsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoZGF0YSkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiQ3VzdG9tZXJzIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93Lmhpc3RvcnkuZ28oLTEpOwogICAgICB9CgogICAgICB3aW5kb3cuY29uc29sZS5sb2coZGF0YSwgImNsb3NlIik7IC8vIGxvY2FsU3RvcmFnZS5kYXRhLmlkID0gSlNPTi5zdHJpbmdpZnkoZGF0YSkKICAgIH0sCiAgICAvL2NhdGFsb2cKICAgIGxvYWRJbWFnZTogZnVuY3Rpb24gbG9hZEltYWdlKGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgiaW1hZ2VzIikpIHsKICAgICAgICBpZiAoZGF0YUl0ZW0uaW1hZ2VzLmhhc093blByb3BlcnR5KCJkZWZhdWx0IikpIHsKICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmltZ1VSTCArIGRhdGFJdGVtLmltYWdlcy5kZWZhdWx0LnRodW1iOwogICAgICAgICAgcmV0dXJuICI8aW1nIHdpZHRoPSc1MCcgaGVpZ2h0PSc1MCcgc3R5bGU9ICdtYXJnaW46IGF1dG87ZGlzcGxheTogYmxvY2s7JyBzcmM9JyIgKyB1cmwgKyAiJyAvPiI7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIGxvYWRDYXRhbG9nczogZnVuY3Rpb24gbG9hZENhdGFsb2dzKCkgewogICAgICB2YXIgX3RoaXMyMCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIF90aGlzMjAuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNhdGFsb2dIYW5kbGVyLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMC5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMC5jYXRhbG9ncyA9IHJlczsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkQ2F0YWxvZzogZnVuY3Rpb24gYWRkQ2F0YWxvZyhlKSB7CiAgICAgIHZhciBfdGhpczIxID0gdGhpczsKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGdyaWQgPSBrZW5kby5qUXVlcnkoIiNncmlkQ2F0YWxvZyIpLmRhdGEoImtlbmRvR3JpZCIpOwogICAgICB2YXIgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKTsgLy8gd2luZG93LmNvbnNvbGUubG9nKGRhdGFJdGVtKQoKICAgICAgaWYgKGRhdGFJdGVtLnZhcmlhbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhSXRlbS52YXJpYW50cy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBpZiAobS5oYXNPd25Qcm9wZXJ0eSgidmFyaWFudCIpKSB7CiAgICAgICAgICAgIGlmIChtLnZhcmlhbnQuaGFzT3duUHJvcGVydHkoImlkIikpIHsKICAgICAgICAgICAgICBfdGhpczIxLmxvYWRTaW5nbGVJdGVtKG0udmFyaWFudC5pZCwgImkiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZGlhbG9nQ2F0YWxvZyA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAoZGF0YUl0ZW0uc2VydmljZXMubGVuZ3RoID4gMCkgewogICAgICAgIGRhdGFJdGVtLnNlcnZpY2VzLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIGlmIChtLmhhc093blByb3BlcnR5KCJzZXJ2aWNlIikpIHsKICAgICAgICAgICAgaWYgKG0uc2VydmljZS5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICAgIF90aGlzMjEubG9hZFNpbmdsZUl0ZW0obS5zZXJ2aWNlLmlkLCAicyIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kaWFsb2dDYXRhbG9nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkU2luZ2xlSXRlbTogZnVuY3Rpb24gbG9hZFNpbmdsZUl0ZW0oaXRlbUlkLCB0eXBlKSB7CiAgICAgIHZhciBfdGhpczIyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMjIuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHByb2R1Y3RIYW5kbGVyLmdldE9uZShpdGVtSWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgdmFyIGRzID0gX3RoaXMyMi4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgPSBkcy50b3RhbCgpOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjIuaXRlbUxpbmUuaWQgPSBpbnZvaWNlUHJlZml4ICsgdXVpZC52MSgpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMi5pdGVtTGluZS5pdGVtID0gZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAiaSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMi5pdGVtTGluZS5kZXNjcmlwdGlvbiA9IGRhdGEudmFyaWFudC5zYWxlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIyLml0ZW1MaW5lLmRlc2NyaXB0aW9uID0gZGF0YS5zYWxlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgZHMuaW5zZXJ0KHRvdGFsLCBfdGhpczIyLml0ZW1MaW5lKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRQcmVmaXg6IGZ1bmN0aW9uIGxvYWRQcmVmaXgoKSB7CiAgICAgIHZhciBfdGhpczIzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDE4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgcHJlZml4SGFuZGxlci5nZXQoInNhbGUgb3JkZXIiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIzLnRyYW5zYWN0aW9uVHlwZSA9IHJlcy5kYXRhLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMyMy50cmFuc2FjdGlvblR5cGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjMuc2FsZU9yZGVyLnRyYW5zYWN0aW9uVHlwZSA9IF90aGlzMjMudHJhbnNhY3Rpb25UeXBlWzBdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMjMuaW5pdHNhbGVPcmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyMy5nZW5lcmF0ZU51bWJlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTgpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkVmlld3NhbGVPcmRlcjogZnVuY3Rpb24gbG9hZFZpZXdzYWxlT3JkZXIoKSB7CiAgICAgIHZhciBfdGhpczI0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDE5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyNC5pbml0c2FsZU9yZGVyKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjQuaXNFZGl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczI0LnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgIHNhbGVPcmRlckhhbmRsZXIudmlldyhfdGhpczI0LiRyb3V0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNC5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjQuc2FsZU9yZGVyID0gcmVzLmRhdGEuZGF0YVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI0LnF1b3RlcyA9IF90aGlzMjQuc2FsZU9yZGVyLnJlZkZyb20gfHwgW107CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjQuYmluZERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKTsKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNC5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczI0LnNldERlZmF1bHREYXRhKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFF1b3RlOiBmdW5jdGlvbiBsb2FkUXVvdGUoKSB7CiAgICAgIHZhciBfdGhpczI1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIwJChfY29udGV4dDIwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjAucHJldiA9IF9jb250ZXh0MjAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczI1LnNhbGVPcmRlci5jdXN0b21lcikgewogICAgICAgICAgICAgICAgICBfdGhpczI1LnJlZkZyb20gPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMyNS5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF90aGlzMjUucXVvdGVzID0gW107CiAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImJ5X2N1c3RvbWVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXI6IF90aGlzMjUuc2FsZU9yZGVyLmN1c3RvbWVyLmlkLAogICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50SWQ6IF90aGlzMjUuc2FsZU9yZGVyLnNlZ21lbnQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IF90aGlzMjUuc2FsZU9yZGVyLmxvY2F0aW9uLmlkLAogICAgICAgICAgICAgICAgICAgICAgICBwcmljZUxldmVsSWQ6IF90aGlzMjUuc2FsZU9yZGVyLnByaWNlTGV2ZWwuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJTYWxlIFF1b3RlIgogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIHNhbGVPcmRlckhhbmRsZXIuc2VhcmNoKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI1LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjUucXVvdGVzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkUXVvdGU6IGZ1bmN0aW9uIGFkZFF1b3RlKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMjYgPSB0aGlzOwoKICAgICAgLy9hZGQgaXRlbSBsaW5lcwogICAgICB2YXIgdHhuRGF0YSA9IGRhdGEudHhuRGF0YSB8fCB7fTsKICAgICAgdmFyIGl0ZW1MaW5lcyA9IGRhdGEuaXRlbUxpbmVzIHx8IFtdOwogICAgICB0aGlzLnJlZkZyb20ucHVzaCh7CiAgICAgICAgaWQ6IGRhdGEuaWQgfHwgJycsCiAgICAgICAgcmVmZXJlbmNlOiBkYXRhLm51bWJlciB8fCAnJywKICAgICAgICBjdXN0b21lcklkOiB0eG5EYXRhLmN1c3RvbWVySWQgfHwgJycKICAgICAgfSk7CgogICAgICBpZiAoaXRlbUxpbmVzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnJlbW92ZUVtcHR5TGluZSgpOwogICAgICAgIGl0ZW1MaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBtLnR4bl9hZGRfaWQgPSB0eG5EYXRhLmlkOwogICAgICAgICAgbS5pZCA9IGludm9pY2VQcmVmaXggKyB1dWlkLnYxKCk7CgogICAgICAgICAgdmFyIGRzID0gX3RoaXMyNi4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgICAgdG90YWwgPSBkcy50b3RhbCgpOwoKICAgICAgICAgIGRzLmluc2VydCh0b3RhbCwgbSk7CiAgICAgICAgfSk7IC8vIHRoaXMuYWRkUm93KCk7CiAgICAgIH0gLy9hZGQgb3RoZXIgY2hhcmQKCgogICAgICBpZiAoZGF0YS5vdGhlckNoYXJnZS5sZW5ndGggPiAwKSB7CiAgICAgICAgZGF0YS5vdGhlckNoYXJnZS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBtLnR4bl9hZGRfaWQgPSB0eG5EYXRhLmlkOwoKICAgICAgICAgIF90aGlzMjYubU90aGVyQ2hhcmdlLnB1c2gobSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CiAgICAgICAgdGhpcy5vbk90aGVyQ2hhcmdlQ2hhbmdlKCk7CiAgICAgIH0gLy8gYWRkIHR4bmxpc3QKCgogICAgICB0aGlzLnR4bkxpc3RzLnB1c2godHhuRGF0YSk7CgogICAgICBpZiAodHhuRGF0YS5sZWFkLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLnR4bkxpc3RzLnB1c2godHhuRGF0YS5sZWFkKTsKICAgICAgfSAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy50eG5MaXN0cyk7CiAgICAgIC8vcmVtb3ZlIHR4bgoKCiAgICAgIHZhciBpbmRleCA9IHRoaXMucXVvdGVzLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBkYXRhLmlkID09PSBpdGVtLmlkOwogICAgICB9KTsKICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CiAgICAgIHRoaXMucXVvdGVzLnNwbGljZShpbmRleCwgMSk7IC8vIHRoaXMucXVvdGVzW2luZGV4XS5pc19hZGRlZCA9IHRydWUKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMucXVvdGVzKQoKICAgICAgdGhpcy5zYWxlT3JkZXIucmVmRnJvbSA9IHRoaXMucmVtb3ZlRHVwbGljYXRlKHRoaXMucmVmRnJvbSk7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygncmVmJywgdGhpcy5zYWxlT3JkZXIucmVmRnJvbSk7CiAgICB9LAogICAgcmVtb3ZlRW1wdHlMaW5lOiBmdW5jdGlvbiByZW1vdmVFbXB0eUxpbmUoKSB7CiAgICAgIHZhciBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZEl0ZW1MaW5lU2FsZU9yZGVyIikuZGF0YSgia2VuZG9HcmlkIiksCiAgICAgICAgICBkYXRhU291cmNlID0gZ3JpZC5kYXRhU291cmNlOwogICAgICBkYXRhU291cmNlLmRhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgaWYgKG0pIHsKICAgICAgICAgIHZhciBpdGVtID0gbS5pdGVtIHx8IHt9OwoKICAgICAgICAgIGlmIChpdGVtLmlkID09PSB1bmRlZmluZWQgfHwgaXRlbS5pZCA9PT0gJycpIHsKICAgICAgICAgICAgZGF0YVNvdXJjZS5yZW1vdmUobSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkVHJhbnNhY3Rpb25SYXRlOiBmdW5jdGlvbiBsb2FkVHJhbnNhY3Rpb25SYXRlKCkgewogICAgICB2YXIgX3RoaXMyNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjEoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMSQoX2NvbnRleHQyMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIxLnByZXYgPSBfY29udGV4dDIxLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoX3RoaXMyNy5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlTGV2ZWwgPSBfdGhpczI3LnNhbGVPcmRlci5wcmljZUxldmVsOwogICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gIiI7CgogICAgICAgICAgICAgICAgICAgIGlmIChwcmljZUxldmVsLmhhc093blByb3BlcnR5KCJjdXJyZW5jeSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpY2VMZXZlbC5jdXJyZW5jeS5oYXNPd25Qcm9wZXJ0eSgiY29kZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSBwcmljZUxldmVsLmN1cnJlbmN5LmNvZGU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gdW5kZWZpbmVkIHx8IGNvZGUgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczI3LnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5SGFuZGxlci5nZXRMYXN0RXhjaGFuZ2VSYXRlQnlEYXRlKGRhdGUsIGNvZGUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjcuZXhjaGFuZ2VSYXRlID0gcmVzLmRhdGEuZGF0YVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczI3LmN1cnJlbmN5Q29kZSA9IF90aGlzMjcuZXhjaGFuZ2VSYXRlLmNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyNy50cmFuc2FjdGlvblJhdGUgPSBfdGhpczI3LmV4Y2hhbmdlUmF0ZS5yYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjcuc2FsZU9yZGVyLnR4blJhdGUgPSBfdGhpczI3LmV4Y2hhbmdlUmF0ZS5yYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjcuc2FsZU9yZGVyLmV4Y2hhbmdlUmF0ZSA9IF90aGlzMjcuZXhjaGFuZ2VSYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMjcuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjEpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHRoaXMuaWQgPSB1bmRlZmluZWQ7CiAgICAgIHRoaXMuc2FsZU9yZGVyID0ge307CiAgICAgIHRoaXMuaXRlbUxpbmVzID0gW107CiAgICAgIHRoaXMuY3VzdG9tZXIgPSAnJzsKICAgICAgdGhpcy5nZW5lcmF0ZU51bWJlcigpOwogICAgfSwKICAgIHNhdmVDbG9zZTogZnVuY3Rpb24gc2F2ZUNsb3NlKCkgewogICAgICB2YXIgX3RoaXMyOCA9IHRoaXM7CgogICAgICB2YXIgaWQgPSAiIjsKCiAgICAgIGlmICh0aGlzLmN1c3RvbWVyLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgaWQgPSB0aGlzLmN1c3RvbWVyLmlkIHx8ICIiOwogICAgICB9CgogICAgICBpZiAoaWQgPT09ICIiKSB7CiAgICAgICAgdGhpcy4kc25vdGlmeS5lcnJvcigiY3VzdG9tZXIgaXMgcmVxdWlyZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRzID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCk7CiAgICAgIHZhciBkMSA9IGRzLmRhdGEoKS5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKICAgICAgICByZXR1cm4gbS5hbW91bnQgPiAwOwogICAgICB9KTsKICAgICAgdmFyIGRhdGFWYWxpZGF0ZSA9IDA7CiAgICAgIGQxLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIGlmICh2YWx1ZS5pdGVtLmlkID09IHVuZGVmaW5lZCB8fCB2YWx1ZS51b20uaWQgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBfdGhpczI4LiRzbm90aWZ5LmVycm9yKCJQbGVhc2UgY2hlY2sgSXRlbSBvciBVb20gIG9uIHJvdyAiICsgKGluZGV4ICsgMSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhVmFsaWRhdGUgKz0gMTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGQxLmxlbmd0aCA9PSBkYXRhVmFsaWRhdGUpIHsKICAgICAgICB0aGlzLmlzU2F2ZUNsb3NlID0gdHJ1ZTsKICAgICAgICB0aGlzLnNhdmVPcHRpb24gPSAic2F2ZUNsb3NlIjsKICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgfQogICAgfSwKICAgIHNhdmVQcmludDogZnVuY3Rpb24gc2F2ZVByaW50KCkgewogICAgICB0aGlzLmlzU2F2ZVByaW50ID0gdHJ1ZTsKICAgICAgdGhpcy5zYXZlT3B0aW9uID0gInNhdmVQcmludCI7CiAgICAgIHRoaXMuc2F2ZSgpOwogICAgfSwKICAgIHNhdmVOZXc6IGZ1bmN0aW9uIHNhdmVOZXcoKSB7CiAgICAgIHRoaXMuc2F2ZU9wdGlvbiA9ICJzYXZlTmV3IjsKICAgICAgdGhpcy5pc1NhdmVOZXcgPSB0cnVlOwogICAgICB0aGlzLnNhdmUoKTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdmFyIF90aGlzMjkgPSB0aGlzOwoKICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgdGl0bGU6IGkxOG4udCgibXNnX3RpdGxlX3dhcm5pbmciKSwKICAgICAgICB0ZXh0OiBpMThuLnQoIm1zZ19kaXNjYXJkIiksCiAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCJjYW5jZWwiKSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNFRDFBM0EiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoImRpc2NhcmQiKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRDZW4pIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzdWx0Q2VuKTsKCiAgICAgICAgaWYgKHJlc3VsdENlbi52YWx1ZSkgewogICAgICAgICAgX3RoaXMyOS4kcm91dGVyLmdvKC0xKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVEcmFmdDogZnVuY3Rpb24gc2F2ZURyYWZ0KCkgewogICAgICB0aGlzLnNhdmVPcHRpb24gPSAic2F2ZURyYWZ0IjsKICAgICAgdGhpcy5pc1NhdmVEcmFmdCA9IHRydWU7CiAgICAgIHRoaXMuc2F2ZSgpOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczMwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIyJChfY29udGV4dDIyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjIucHJldiA9IF9jb250ZXh0MjIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMwLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMwLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczMwLnJlbW92ZUVtcHR5TGluZSgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUxpbmVEUyA9IF90aGlzMzAuJHJlZnMuaXRlbUxpbmVEUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IGl0ZW1MaW5lRFMudG90YWwoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGl0bUxpbmVzID0gaXRlbUxpbmVEUy5kYXRhKCkuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5hbW91bnQgPiAwOwogICAgICAgICAgICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVtTGluZU1vZGVsKG0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAodG90YWwgPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC4kc25vdGlmeS5lcnJvcigiRmllbGQgUmVxdWlyZWQhIik7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczMwLmlzUmVxdXJlZFB1cmNoYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLnNhbGVPcmRlci5zdXBwbGllciA9IHt9OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAvL2lzIGZvciBwdXJjaGFzZQogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5zYWxlT3JkZXJUeXBlID0gNTsKICAgICAgICAgICAgICAgICAgICB9IC8vIHdpbmRvdy5jb25zb2xlLmxvZyhpdG1MaW5lcywgJ2l0bUxpbmVzJykKICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoaXRtTGluZXMpLCAnaXRtTGluZXMnKQoKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXMzMC5zYWxlT3JkZXIuaWQgPyBfdGhpczMwLnNhbGVPcmRlci5pZCA6ICIiLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlNhbGUgT3JkZXIiLAogICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBfdGhpczMwLnNhbGVPcmRlci50cmFuc2FjdGlvblR5cGUsCiAgICAgICAgICAgICAgICAgICAgICBudW1iZXI6IF90aGlzMzAuc2FsZU9yZGVyLm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgIGFiYnI6IF90aGlzMzAuc2FsZU9yZGVyLnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25EYXRlOiBfdGhpczMwLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUsCiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkRhdGVUWjogSGVscGVyLnRvSVNPRGF0ZShfdGhpczMwLnNhbGVPcmRlci50cmFuc2FjdGlvbkRhdGUpLAogICAgICAgICAgICAgICAgICAgICAgdmFsaWRpdHlEYXRlOiBfdGhpczMwLnNhbGVPcmRlci52YWxpZGl0eURhdGUsCiAgICAgICAgICAgICAgICAgICAgICBtb250aE9mOiBfdGhpczMwLnNhbGVPcmRlci5tb250aE9mLAogICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXI6IF90aGlzMzAuc2FsZU9yZGVyLmN1c3RvbWVyLAogICAgICAgICAgICAgICAgICAgICAgcGF5bWVudFRlcm06IF90aGlzMzAuc2FsZU9yZGVyLnBheW1lbnRUZXJtLAogICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRQcm9tb3Rpb246IHt9LAogICAgICAgICAgICAgICAgICAgICAgcHJpY2VMZXZlbDogX3RoaXMzMC5zYWxlT3JkZXIucHJpY2VMZXZlbCwKICAgICAgICAgICAgICAgICAgICAgIGl0ZW1MaW5lczogaXRtTGluZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50OiBfdGhpczMwLnNhbGVPcmRlci5zZWdtZW50LAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF90aGlzMzAuc2FsZU9yZGVyLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogX3RoaXMzMC5zYWxlT3JkZXIucHJvamVjdCwKICAgICAgICAgICAgICAgICAgICAgIHNhbGVDaGFubmVsOiBfdGhpczMwLnNhbGVPcmRlci5zYWxlQ2hhbm5lbCwKICAgICAgICAgICAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiBfdGhpczMwLnNhbGVPcmRlci5iaWxsaW5nQWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzczogX3RoaXMzMC5zYWxlT3JkZXIuZGVsaXZlcnlBZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlEYXRlVGltZTogX3RoaXMzMC5zYWxlT3JkZXIuZGVsaXZlcnlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uTm90ZTogX3RoaXMzMC5zYWxlT3JkZXIudHJhbnNhY3Rpb25Ob3RlLAogICAgICAgICAgICAgICAgICAgICAgc3ViVG90YWw6IF90aGlzMzAuc2FsZU9yZGVyLnN1YlRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgdG90YWw6IF90aGlzMzAuc2FsZU9yZGVyLnRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBfdGhpczMwLnNhbGVPcmRlci5hbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICBkaXNjb3VudFRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5kaXNjb3VudFRvdGFsLAogICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNEaXNjb3VudFRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5zcGVjaWZpY0Rpc2NvdW50VG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeUZlZTogX3RoaXMzMC5zYWxlT3JkZXIuZGVsaXZlcnlGZWUsCiAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRheEFtb3VudDogX3RoaXMzMC5zYWxlT3JkZXIudG90YWxUYXhBbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmFsYW5jZTogX3RoaXMzMC5zYWxlT3JkZXIuY3VycmVudEJhbGFuY2UsCiAgICAgICAgICAgICAgICAgICAgICBjcmVkaXRMaW1pdDogX3RoaXMzMC5zYWxlT3JkZXIuY3JlZGl0TGltaXQsCiAgICAgICAgICAgICAgICAgICAgICBzYXZlT3B0aW9uOiBfdGhpczMwLnNhdmVPcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICB0eG5SYXRlOiBfdGhpczMwLnNhbGVPcmRlci50eG5SYXRlLAogICAgICAgICAgICAgICAgICAgICAgcmF0ZTogMSwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlUmF0ZTogX3RoaXMzMC5zYWxlT3JkZXIuZXhjaGFuZ2VSYXRlLAogICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VBbW91bnQ6IF90aGlzMzAuc2FsZU9yZGVyLmV4Y2hhbmdlQW1vdW50LAogICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLAogICAgICAgICAgICAgICAgICAgICAgYXBwcm92ZWRCeTogX3RoaXMzMC5zYWxlT3JkZXIuYXBwcm92ZWRCeSwKICAgICAgICAgICAgICAgICAgICAgIGZvcm1UZW1wbGF0ZToge30sCiAgICAgICAgICAgICAgICAgICAgICBzcGVjaWZpY0Rpc2NvdW50SXRlbTogX3RoaXMzMC5zYWxlT3JkZXIuc3BlY2lmaWNEaXNjb3VudEl0ZW0sCiAgICAgICAgICAgICAgICAgICAgICBvdGhlckNoYXJnZTogX3RoaXMzMC5tT3RoZXJDaGFyZ2UsCiAgICAgICAgICAgICAgICAgICAgICBvdGhlckNoYXJnZUFtb3VudDogX3RoaXMzMC5zYWxlT3JkZXIub3RoZXJDaGFyZ2VBbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNMaW5rOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIHRheExpc3RUb3RhbDogX3RoaXMzMC50YXhMaXN0VG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lckRpc2NvdW50SXRlbTogX3RoaXMzMC5jdXN0b21lckRpc2NvdW50SXRlbSwKICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyU2FsZVVuaXQ6IF90aGlzMzAuY3VzdG9tZXJTYWxlVW5pdCwKICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlZFVzZXI6IF90aGlzMzAubG9nZ2VkVXNlciwKICAgICAgICAgICAgICAgICAgICAgIHR4bkxpc3Q6IF90aGlzMzAudHhuTGlzdHMsCiAgICAgICAgICAgICAgICAgICAgICBzYWxlT3JkZXJUeXBlOiBfdGhpczMwLnNhbGVPcmRlci5zYWxlT3JkZXJUeXBlLAogICAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWU6IF90aGlzMzAuc2FsZU9yZGVyLmVtcGxveWVlLAogICAgICAgICAgICAgICAgICAgICAgc3VwcGxpZXI6IF90aGlzMzAuc2FsZU9yZGVyLnN1cHBsaWVyLAogICAgICAgICAgICAgICAgICAgICAgaXRlbVN1YnRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5pdGVtU3VidG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZUl0ZW1TdWJ0b3RhbDogX3RoaXMzMC5zYWxlT3JkZXIuZXhjaGFuZ2VJdGVtU3VidG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlU3VidG90YWw6IF90aGlzMzAuc2FsZU9yZGVyLnNlcnZpY2VTdWJ0b3RhbCwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlU2VydmljZVN1YnRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci5leGNoYW5nZVNlcnZpY2VTdWJ0b3RhbCwKICAgICAgICAgICAgICAgICAgICAgIHR4bkl0bVN1YnRvdGFsOiBfdGhpczMwLnNhbGVPcmRlci50eG5JdG1TdWJ0b3RhbCwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlVHhuSXRtU3VidG90YWw6IF90aGlzMzAuc2FsZU9yZGVyLmV4Y2hhbmdlVHhuSXRtU3VidG90YWwsCiAgICAgICAgICAgICAgICAgICAgICBpdGVtRGlzY291bnQ6IF90aGlzMzAuc2FsZU9yZGVyLml0ZW1EaXNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlSXRlbURpc2NvdW50OiBfdGhpczMwLnNhbGVPcmRlci5leGNoYW5nZUl0ZW1EaXNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VEaXNjb3VudDogX3RoaXMzMC5zYWxlT3JkZXIuc2VydmljZURpc2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VTZXJ2aWNlRGlzY291bnQ6IF90aGlzMzAuc2FsZU9yZGVyLmV4Y2hhbmdlU2VydmljZURpc2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgdHhuSXRtRGlzY291bnQ6IF90aGlzMzAuc2FsZU9yZGVyLnR4bkl0bURpc2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VUeG5JdG1EaXNjb3VudDogX3RoaXMzMC5zYWxlT3JkZXIuZXhjaGFuZ2VUeG5JdG1EaXNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIGxlYWQ6IHt9LAogICAgICAgICAgICAgICAgICAgICAgcm91dGVWaWV3OiAic2FsZV9vcmRlcl92aWV3IiwKICAgICAgICAgICAgICAgICAgICAgIGV4c3BlY3RlZERhdGU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgdXNlZERhdGVBdDogIiIsCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkQXQ6ICIiLAogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogMCwKICAgICAgICAgICAgICAgICAgICAgIHJlZkZyb206IF90aGlzMzAuc2FsZU9yZGVyLnJlZkZyb20gfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICByZWZUbzogX3RoaXMzMC5zYWxlT3JkZXIucmVmVG8gfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApCiAgICAgICAgICAgICAgICAgICAgfTsgLy8gd2luZG93LmNvbnNvbGUubG9nKCdkYXRhJywgZGF0YSkKICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ2RhdGEnLCBKU09OLnN0cmluZ2lmeShkYXRhKSkKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5idG5EaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc2FsZU9yZGVySGFuZGxlci5jcmVhdGUoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5idG5EaXNhYmxlZCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMzAuaXNTYXZlTmV3ID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLnNldERlZmF1bHREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC5jbG9zZShyZXNwb25zZS5kYXRhLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9IC8vIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuJHNub3RpZnkuc3VjY2VzcygiU3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLmJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzAuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMC4kc25vdGlmeS5lcnJvcigiU29tZXRoaW5nIHdlbnQgd3JvbmciKTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMwLmVycm9ycy5wdXNoKGUpOwoKICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFBheW1lbnRUZXJtTGlzdDogZnVuY3Rpb24gbG9hZFBheW1lbnRUZXJtTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMzEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjMkKF9jb250ZXh0MjMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMzEuY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJGaWx0ZXIgPSAiP2lkPSIgKyBfdGhpczMxLmN1c3RvbWVyLmlkICsgIiZ0cmFuc2FjdGlvbkRhdGU9IiArIF90aGlzMzEuc2FsZU9yZGVyLnRyYW5zYWN0aW9uRGF0ZSArICImdHlwZT1DdXN0b21lciI7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMxLnNhbGVPcmRlci5wYXltZW50VGVybSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgcGF5bWVudFRlcm1IYW5kbGVyXy5nZXQoc3RyRmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXJtcyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzMS5zYWxlT3JkZXIucGF5bWVudFRlcm0gPSB0ZXJtcy50ZXJtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRDcmVkaXRMaW1pdDogZnVuY3Rpb24gbG9hZENyZWRpdExpbWl0KCkgewogICAgICB2YXIgX3RoaXMzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNCQoX2NvbnRleHQyNCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzMi5jdXN0b21lcikgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ckZpbHRlciA9ICI/aWQ9IiArIF90aGlzMzIuY3VzdG9tZXIuaWQgKyAiJnRyYW5zYWN0aW9uRGF0ZT0iICsgX3RoaXMzMi5zYWxlT3JkZXIudHJhbnNhY3Rpb25EYXRlICsgIiZ0eXBlPUN1c3RvbWVyIjsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzIuc2FsZU9yZGVyLmNyZWRpdExpbWl0ID0gMDsKICAgICAgICAgICAgICAgICAgICAgIGNyZWRpdExpbWl0SGFuZGxlci5nZXQoc3RyRmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY3JlZGl0TGltaXRJdGVtID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcmVkaXQgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzIuc2FsZU9yZGVyLmNyZWRpdExpbWl0ID0ga2VuZG8ucGFyc2VGbG9hdChjcmVkaXQuYW1vdW50IHx8IDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsZWFyVU9NSXRlbTogZnVuY3Rpb24gY2xlYXJVT01JdGVtKCkgewogICAgICB2YXIgX3RoaXMzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjUoKSB7CiAgICAgICAgdmFyIGRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjUkKF9jb250ZXh0MjUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNS5wcmV2ID0gX2NvbnRleHQyNS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZHMgPSBfdGhpczMzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgICAgIGRzLmRhdGEoKS5tYXAoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgbi5zZXQoInVvbSIsIHt9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX3RoaXMzMy5pc1ByaWNlTGV2ZWxDaGFuZ2VkID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25QcmljZUxldmVsQ2hhbmdlOiBmdW5jdGlvbiBvblByaWNlTGV2ZWxDaGFuZ2UoKSB7CiAgICAgIHRoaXMuaXNQcmljZUxldmVsQ2hhbmdlZCA9IHRydWU7CiAgICAgIHRoaXMubG9hZFRyYW5zYWN0aW9uUmF0ZSgpOwogICAgICB0aGlzLmNsZWFyVU9NSXRlbSgpOwogICAgICB0aGlzLmxvYWRRdW90ZSgpOwogICAgfSwKICAgIGxvYWRTYWxlT3JkZXI6IGZ1bmN0aW9uIGxvYWRTYWxlT3JkZXIoaWQpIHsKICAgICAgdmFyIF90aGlzMzQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjYkKF9jb250ZXh0MjYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNi5wcmV2ID0gX2NvbnRleHQyNi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGlkLCAnbG9hZCBpZCcpOwogICAgICAgICAgICAgICAgX3RoaXMzNC5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhbmRsZXIudmlldyhpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMzQuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXMzNC5pc0VkaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczM0Lml0ZW1MaW5lcyA9IFtdOwogICAgICAgICAgICAgICAgICBfdGhpczM0LnNhbGVPcmRlciA9IHJlcy5kYXRhLmRhdGFbMF07CgogICAgICAgICAgICAgICAgICBfdGhpczM0LmJpbmREYXRhKCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkRW1wbG95ZWVDZW50ZXI6IGZ1bmN0aW9uIGxvYWRFbXBsb3llZUNlbnRlcigpIHsKICAgICAgdmFyIF90aGlzMzUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI3KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjckKF9jb250ZXh0MjcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNy5wcmV2ID0gX2NvbnRleHQyNy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczM1LmVtcGxveWVlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGVtcGxveWVlSGFuZGxlci5jZW50ZXIodW5kZWZpbmVkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzUuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzNS5zYWxlT3JkZXIuZW1wbG95ZWUgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzUuZW1wbG95ZWVzID0gW107CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczM1LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMzUuZW1wbG95ZWVzID0gcmVzLmRhdGEuZGF0YTsgLy8gaWYgKHRoaXMuZW1wbG95ZWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMudHJhbnNhY3Rpb24uZW1wbG95ZWUgPSB0aGlzLmVtcGxveWVlc1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCk7CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzNS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZFNpbmdsZURhdGE6IGZ1bmN0aW9uIGxvYWRTaW5nbGVEYXRhKCkgewogICAgICB2YXIgX3RoaXMzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjgoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOCQoX2NvbnRleHQyOCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczM2LiRyb3V0ZS5uYW1lID09PSAnU2FsZSBPcmRlcicpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMzNi5pbml0c2FsZU9yZGVyKSB7CiAgICAgICAgICAgICAgICAgIC8vIEVkaXQgTW9kZQogICAgICAgICAgICAgICAgICBfdGhpczM2Lml0ZW1MaW5lcyA9IFtdOwogICAgICAgICAgICAgICAgICBfdGhpczM2LnNhbGVPcmRlciA9IF90aGlzMzYuaW5pdHNhbGVPcmRlcjsKCiAgICAgICAgICAgICAgICAgIF90aGlzMzYuYmluZERhdGEoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIG5ldwogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzNi4kcm91dGUucGFyYW1zLmlkICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMzYubG9hZFNhbGVPcmRlcihfdGhpczM2LiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzMzYuc2V0RGVmYXVsdERhdGEoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHByZWZpeEhhbmRsZXIuZ2V0KCJzYWxlIG9yZGVyIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczM2LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzNi50cmFuc2FjdGlvblR5cGUgPSByZXMuZGF0YS5kYXRhOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzNi50cmFuc2FjdGlvblR5cGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMzYuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkIHx8IF90aGlzMzYuJHJvdXRlLnBhcmFtcy5pZCAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczM2LnNhbGVPcmRlci50cmFuc2FjdGlvblR5cGUgPSBfdGhpczM2LnRyYW5zYWN0aW9uVHlwZVswXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMzNi5pbml0U2FsZU9yZGVyICYmIF90aGlzMzYuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzNi5nZW5lcmF0ZU51bWJlcigpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkUGF5bWVudFRlcm0oKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM2LmxvYWRTYWxlRm9ybUNvbnRlbnQoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM2LmxvYWRPdGhlckNoYXJnZSgpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM2LmxvYWRQcmljZUxldmVsKCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM2LmxvYWREaXNjb3VudEl0ZW0oMCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM2LmxvYWRTYWxlQ2hhbm5lbCgpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNi5sb2FkQ2F0YWxvZ3MoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzYubG9hZExlYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF90aGlzMzYubG9hZFRheCgpOwoKICAgICAgICAgICAgICAgIF90aGlzMzYubG9hZFNhbGVVbml0SXRlbXMoKTsKCiAgICAgICAgICAgICAgICBfdGhpczM2LmxvYWRTZWdtZW50KCk7CgogICAgICAgICAgICAgICAgX3RoaXMzNi5sb2FkTG9jYXRpb24oKTsKCiAgICAgICAgICAgICAgICBfdGhpczM2LmxvYWRFbXBsb3llZUNlbnRlcigpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjgpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICB0aGlzLmxvYWRWaWV3c2FsZU9yZGVyKCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgaW5pdHNhbGVPcmRlcjogZnVuY3Rpb24gaW5pdHNhbGVPcmRlcigpIHsKICAgICAgdGhpcy5pbml0aWFsRGF0YSgpOwogICAgfSwKICAgICckcm91dGUnOiAnbG9hZFNpbmdsZURhdGEnCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkVGF4KCk7CiAgICB0aGlzLmxvYWRTYWxlVW5pdEl0ZW1zKCk7IC8vIHRoaXMubG9hZFByZWZpeCgpCgogICAgdGhpcy5sb2FkU2VnbWVudCgpOwogICAgdGhpcy5sb2FkTG9jYXRpb24oKTsgLy8gbG9jYWxTdG9yYWdlLnNhbGVPcmRlciA9ICJ7bmFtZTogJ2FiY3Nzc3MnfSIKICB9LAogIGNvbXB1dGVkOiB7CiAgICBhcHBUeXBlOiBmdW5jdGlvbiBhcHBUeXBlKCkgewogICAgICByZXR1cm4gZGF0YVN0b3JlLnByb2R1Y3RUeXBlOwogICAgfSwKICAgIGRhdGVGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGRhdGVGb3JtYXR0ZWQoKSB7CiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSgpLCBpbnN0aXR1dGUuZGF0ZUZvcm1hdCk7CiAgICB9LAogICAgZGF0ZVRpbWVGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGRhdGVUaW1lRm9ybWF0dGVkKCkgewogICAgICB3aW5kb3cuY29uc29sZS5sb2coaW5zdGl0dXRlLmRhdGVGb3JtYXQgKyAiIEhIOm1tIiwgImluc3QgZGF0ZSIpOwogICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcobmV3IERhdGUoKSwgaW5zdGl0dXRlLmRhdGVGb3JtYXQgKyAiIEhIOm1tIik7CiAgICB9LAogICAgdmFsaWRDdXN0b21lcjogZnVuY3Rpb24gdmFsaWRDdXN0b21lcigpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXIuaWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmN1c3RvbWVyLmlkICE9PSBudWxsOwogICAgfSwKICAgIGhpZGRlbkJ1dHRvbjogZnVuY3Rpb24gaGlkZGVuQnV0dG9uKCkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgZGlzYWJsZWRNZTogZnVuY3Rpb24gZGlzYWJsZWRNZSgpIHsKICAgICAgcmV0dXJuICEhdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgdmFyIF9tb3VudGVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjkoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjkkKF9jb250ZXh0MjkpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDI5LnByZXYgPSBfY29udGV4dDI5Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRoaXMubG9hZFNpbmdsZURhdGEoKTsKICAgICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3REYXRhKDAsIHRoaXMuZmlsdGVyLCB0aGlzLmN1c0Jhc2VVcmwpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VwcGxpZXJSZXF1ZXN0RGF0YSgwLCB0aGlzLmZpbHRlciwgdGhpcy5zdXBCYXNlVXJsKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLmVtcGxveWVlUmVxdWVzdERhdGEoMCwgdGhpcy5maWx0ZXIsIHRoaXMuZW1wQmFzZVVybCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjkuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTI5LCB0aGlzKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICByZXR1cm4gX21vdW50ZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gbW91bnRlZDsKICB9KCkKfTs="},{"version":3,"sources":["SaleOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqyBA,SAAA,IAAA,QAAA,QAAA;AACA,OAAA,mBAAA,MAAA,mDAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,SAAA,YAAA,QAAA,+BAAA;AACA,OAAA,oBAAA,MAAA,iCAAA;AACA,OAAA,aAAA,MAAA,kCAAA;AACA,SAAA,IAAA,QAAA,UAAA;AACA,OAAA,cAAA,MAAA,6BAAA;AAEA;;AACA,OAAA,KAAA,MAAA,SAAA;AAEA,IAAA,SAAA,GAAA,KAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA;AAEA,SAAA,YAAA,QAAA,oBAAA;AACA,OAAA,mBAAA,MAAA,kDAAA;AACA,OAAA,kBAAA,MAAA,kDAAA;AACA,OAAA,MAAA,MAAA,UAAA;AACA,OAAA,kBAAA,MAAA,8BAAA;AACA,SAAA,SAAA,QAAA,oBAAA,C,CAEA;;AACA,IAAA,gBAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,0CAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;;AACA,IAAA,aAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;;AACA,IAAA,iBAAA,GAAA,OAAA,CAAA,6BAAA,CAAA;;AACA,IAAA,sBAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,+BAAA,CAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,+BAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,qBAAA,GAAA,OAAA,CAAA,iCAAA,CAAA;;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,+BAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,4CAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AAEA,IAAA,oBAAA,GAAA,IAAA,oBAAA,CAAA,EAAA,CAAA;AACA,IAAA,aAAA,GAAA,IAAA,aAAA,CAAA,EAAA,CAAA,C,CACA;;AACA,IAAA,CAAA,GAAA,KAAA,CAAA,MAAA;AACA,IAAA,SAAA,GAAA,YAAA;AACA,IAAA,QAAA,GAAA,IAAA;AACA,IAAA,WAAA,qDAAA,SAAA,EAAA,oBAAA,iCAAA,QAAA,EAAA,IAAA,gBAAA;AACA,IAAA,cAAA,2DAAA,SAAA,EAAA,oBAAA,oCAAA,QAAA,EAAA,IAAA,mBAAA;AACA,IAAA,cAAA,2DAAA,SAAA,EAAA,oBAAA,oCAAA,QAAA,EAAA,IAAA,mBAAA;;AACA,IAAA,SAAA,uBAAA,SAAA,EAAA,aAAA,CAAA;;AACA,IAAA,aAAA,GAAA,MAAA;AACA,IAAA,aAAA,GAAA,YAAA;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AACA,IAAA,MAAA,GAAA,QAAA,CAAA,SAAA,EAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AAJA,GAFA;AAUA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AAAA,aAAA,8BAAA;AAAA,KADA;AAEA,sBAAA,mBAFA;AAGA,IAAA,YAAA,EAAA,YAHA;AAIA,0BAAA;AAAA,aAAA,OAAA,4CAAA,CAAA;AAAA;AAJA,GAVA;AAgBA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,SAAA,EAAA,IAAA,cAAA,EADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,SAAA,EAAA,CAAA,CAAA,CAHA;AAIA,MAAA,SAAA,EAAA,KAJA;AAKA,MAAA,OAAA,EAAA,EALA;AAMA;AACA,MAAA,aAAA,EAAA,KAPA;AAQA,MAAA,UAAA,EAAA;AACA,QAAA,KAAA,EAAA;AACA,UAAA,EAAA,EAAA;AADA;AADA,OARA;AAaA,MAAA,MAAA,EAAA,wDAbA;AAcA;AACA,MAAA,WAAA,EAAA,KAfA;AAgBA,MAAA,YAAA,EAAA,KAhBA;AAiBA,MAAA,iBAAA,EAAA,EAjBA;AAkBA,MAAA,gBAAA,EAAA,EAlBA;AAmBA,MAAA,SAAA,EAAA,EAnBA;AAoBA,MAAA,KAAA,EAAA,KApBA;AAqBA,MAAA,KAAA,EAAA,EArBA;AAsBA,MAAA,MAAA,EAAA,EAtBA;AAuBA;AACA,MAAA,KAAA,EAAA,IAxBA;AAyBA,MAAA,SAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,KAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,KAAA,EAAA;AAAA,OAJA,CAzBA;AA+BA,MAAA,aAAA,EAAA,CA/BA;AAgCA,MAAA,cAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA,gBAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA,YAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,IAAA,EAAA,UAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,IAAA,EAAA,mBAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAJA,CAKA;AALA,OAhCA;AAuCA,MAAA,iBAAA,EAAA,KAvCA;AAwCA,MAAA,UAAA,EAAA,CAxCA;AAyCA,MAAA,QAAA,EAAA,CAzCA;AA0CA,MAAA,SAAA,EAAA,KA1CA;AA2CA,MAAA,MAAA,EAAA,EA3CA;AA4CA,MAAA,SAAA,EAAA,YA5CA;AA6CA,MAAA,WAAA,EAAA,IA7CA;AA8CA,MAAA,WAAA,EAAA,WA9CA;AA+CA,MAAA,cAAA,EAAA,cA/CA;AAgDA,MAAA,cAAA,EAAA,cAhDA;AAiDA,MAAA,YAAA,EAAA,EAjDA;AAkDA;AACA,MAAA,SAAA,EAAA,EAnDA;AAoDA,MAAA,QAAA,EAAA,aApDA;AAqDA,MAAA,UAAA,EAAA,aAAA,CAAA,UArDA;AAsDA;AACA,MAAA,UAAA,EAAA,eAAA,CAAA,MAAA,EAvDA;AAwDA,MAAA,QAAA,EAAA,EAxDA;AAyDA,MAAA,YAAA,EAAA,EAzDA;AA0DA,MAAA,YAAA,EAAA,EA1DA;AA2DA,MAAA,QAAA,EAAA,EA3DA;AA4DA,MAAA,UAAA,EAAA,eAAA,CAAA,MAAA,EA5DA;AA6DA,MAAA,cAAA,EAAA,EA7DA;AA8DA,MAAA,eAAA,EAAA,EA9DA;AA+DA,MAAA,UAAA,EAAA,EA/DA;AAgEA;AACA,MAAA,YAAA,EAAA,EAjEA;AAkEA,MAAA,YAAA,EAAA,EAlEA;AAmEA,MAAA,YAAA,EAAA,EAnEA;AAoEA,MAAA,QAAA,EAAA,EApEA;AAqEA,MAAA,UAAA,EAAA,eAAA,CAAA,SAAA,EArEA;AAsEA,MAAA,eAAA,EAAA,EAtEA;AAuEA,MAAA,SAAA,EAAA,EAvEA;AAwEA,MAAA,gBAAA,EAAA,EAxEA;AAyEA,MAAA,QAAA,EAAA,EAzEA;AA0EA,MAAA,eAAA,EAAA,EA1EA;AA2EA,MAAA,YAAA,EAAA,EA3EA;AA4EA,MAAA,oBAAA,EAAA,EA5EA;AA6EA,MAAA,gBAAA,EAAA,EA7EA;AA8EA,MAAA,eAAA,EAAA,oBA9EA;AA+EA,MAAA,eAAA,EAAA,IAAA,IAAA,GAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA,CA/EA;AAgFA,MAAA,OAAA,EAAA,KAhFA;AAiFA,MAAA,gBAAA,EAAA,IAAA,IAAA,EAjFA;AAkFA,MAAA,YAAA,EAAA,IAAA,IAAA,GAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA,CAlFA;AAmFA,MAAA,oBAAA,EAAA,EAnFA;AAoFA,MAAA,eAAA,EAAA,EApFA;AAqFA,MAAA,gBAAA,EAAA,EArFA;AAsFA,MAAA,QAAA,EAAA,EAtFA;AAuFA,MAAA,WAAA,EAAA,EAvFA;AAwFA,MAAA,iBAAA,EAAA,EAxFA;AAyFA,MAAA,MAAA,EAAA,EAzFA;AA0FA,MAAA,GAAA,EAAA,EA1FA;AA2FA,MAAA,UAAA,EAAA;AACA,QAAA,EAAA,EAAA,MAAA,CAAA,OADA;AAEA,QAAA,IAAA,EAAA,MAAA,CAAA;AAFA,OA3FA;AA+FA,MAAA,KAAA,EAAA,EA/FA;AAgGA,MAAA,QAAA,EAAA,EAhGA;AAiGA,MAAA,OAAA,EAAA,EAjGA;AAkGA,MAAA,MAAA,EAAA,EAlGA;AAmGA,MAAA,QAAA,EAAA,EAnGA;AAoGA,MAAA,SAAA,EAAA,KApGA;AAqGA,MAAA,WAAA,EAAA,KArGA;AAsGA,MAAA,WAAA,EAAA,KAtGA;AAuGA,MAAA,WAAA,EAAA,KAvGA;AAwGA,MAAA,YAAA,EAAA,EAxGA;AAyGA,MAAA,gBAAA,EAAA,EAzGA;AA0GA,MAAA,YAAA,EAAA,EA1GA;AA2GA,MAAA,eAAA,EAAA,CA3GA;AA4GA,MAAA,UAAA,EAAA,EA5GA;AA6GA,MAAA,MAAA,EAAA,CACA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,CA7GA;AAiHA,MAAA,mBAAA,EAAA,KAjHA;AAkHA,MAAA,OAAA,EAAA,EAlHA;AAkHA;AACA,MAAA,WAAA,EAAA;AAnHA,KAAA;AAAA,GAhBA;AAqIA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,KADA,EACA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IAAA,CAAA,KAAA,CAAA,EAAA,KAAA,UAAA,cAAA,CAAA;AACA,KAHA;AAIA,IAAA,YAJA,wBAIA,KAJA,EAIA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA,aAAA,KAAA,eAAA,CAAA,OAAA,EAAA;AACA,KANA;AAOA,IAAA,WAPA,uBAOA,KAPA,EAOA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,aAAA,KAAA,eAAA,CAAA,OAAA,EAAA;AACA,KATA;AAUA,IAAA,IAVA,gBAUA,UAVA,EAUA;AACA,MAAA,YAAA,CAAA,UAAA,CAAA;AACA,KAZA;AAaA,IAAA,WAbA,yBAaA;AACA,UAAA,KAAA,aAAA,EAAA;AACA;AACA,aAAA,SAAA,GAAA,KAAA,aAAA;AACA,aAAA,SAAA,CAAA,WAAA,GAAA,CAAA;AACA,aAAA,SAAA,CAAA,cAAA,GAAA,CAAA,CAJA,CAKA;;AACA,aAAA,QAAA;AACA,OAPA,MAOA;AACA;AACA,YAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,EAAA;AACA,eAAA,cAAA;AACA;AACA;AACA,KA3BA;AA4BA,IAAA,cA5BA,4BA4BA;AAAA;;AACA;AACA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,WAAA,SAAA,GAAA,IAAA,cAAA,CAAA,EAAA,CAAA,CAJA,CAKA;;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,EAAA;AACA,aAAA,SAAA,CAAA,aAAA,GAAA,CAAA;AACA,aAAA,aAAA,GAAA,CAAA;;AACA,YAAA,KAAA,OAAA,KAAA,KAAA,IAAA,KAAA,OAAA,KAAA,gBAAA,EAAA;AACA,eAAA,SAAA,CAAA,aAAA,GAAA,CAAA;AACA,eAAA,aAAA,GAAA,CAAA;AACA;AACA;;AACA,WAAA,SAAA,CAAA,gBAAA,GAAA,IAAA,IAAA,EAAA;AACA,WAAA,SAAA,CAAA,YAAA,GAAA,CAAA;AACA,WAAA,SAAA,CAAA,eAAA,GAAA,IAAA,IAAA,GAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAhBA,CAiBA;;AACA,WAAA,SAAA,GAAA,EAAA,CAlBA,CAmBA;AACA;AACA;;AACA,WAAA,eAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,MAAA,GADA,CAEA;;AACA,OAHA,EAGA,GAHA,CAAA,CAvBA,CA2BA;;AACA,WAAA,eAAA,GAAA,EAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,WAAA,MAAA,GAAA,EAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,gBAAA,CAAA,CAAA,EAAA,CAAA;AACA,WAAA,iBAAA,GAAA,KAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,KApEA;AAqEA,IAAA,QArEA,sBAqEA;AACA;AACA;AACA,UAAA,KAAA,SAAA,EAAA;AACA,YAAA,KAAA,SAAA,CAAA,cAAA,CAAA,UAAA,CAAA,EAAA;AACA,eAAA,MAAA,GAAA,IAAA;AACA,eAAA,QAAA,GAAA,KAAA,SAAA,CAAA,QAAA,CAFA,CAGA;AACA;;AACA,eAAA,cAAA,GAAA,KAAA,SAAA,CAAA,QAAA,CAAA,cAAA;AACA,eAAA,eAAA,GAAA,KAAA,SAAA,CAAA,QAAA,CAAA,eAAA,CANA,CAOA;;AACA,eAAA,YAAA,GAAA,KAAA,SAAA,CAAA,YAAA;AACA,eAAA,SAAA,GAAA,KAAA,SAAA,CAAA,SAAA;AACA,eAAA,YAAA,GAAA,KAAA,SAAA,CAAA,WAAA;AACA,eAAA,qBAAA;;AACA,cAAA,KAAA,QAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,iBAAA,mBAAA,CAAA,KAAA,QAAA,CAAA,EAAA;AACA;AACA;AACA;AACA,KA1FA;AA2FA,IAAA,SA3FA,uBA2FA;AACA,UAAA,UAAA,GAAA,KAAA,SAAA,CAAA,MAAA;AACA,UAAA,GAAA,GAAA,KAAA,SAAA,CAAA,UAAA,GAAA,CAAA,CAAA;AACA,UAAA,OAAA,GAAA,GAAA,GAAA,CAAA;AACA,UAAA,UAAA,GAAA,KAAA,oBAAA,CAAA,MAAA;;AACA,UAAA,OAAA,IAAA,UAAA,EAAA;AACA,aAAA,SAAA,CAAA,IAAA,CAAA,OAAA;AACA;AACA,KAnGA;AAoGA,IAAA,YApGA,wBAoGA,KApGA,EAoGA;AACA,WAAA,SAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EADA,CAEA;AACA;AACA;AACA;AACA,KA1GA;AA2GA,IAAA,YA3GA,0BA2GA,CACA,CA5GA;AA6GA,IAAA,qBA7GA,mCA6GA,CACA,CA9GA;AA+GA,IAAA,iBA/GA,+BA+GA;AACA,UAAA,CAAA,KAAA,SAAA,EAAA;AACA;AACA;AACA,aAAA,SAAA,GAAA,IAAA;AACA,OAJA,MAIA;AACA;AACA;AACA,aAAA,SAAA,GAAA,KAAA;AACA;AACA,KAzHA;AA0HA;AACA,IAAA,cA3HA,4BA2HA;AAAA;;AACA,UAAA,KAAA,MAAA,IAAA,KAAA,EAAA;AACA,YAAA,CAAA,GAAA,IAAA,IAAA,GAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA,CAAA;;AACA,YAAA,KAAA,SAAA,CAAA,eAAA,EAAA;AACA;AACA,UAAA,CAAA,GAAA,KAAA,SAAA,CAAA,eAAA;AACA;;AACA,YAAA,IAAA,GAAA;AACA,UAAA,IAAA,EAAA,KAAA,SAAA,CAAA,eAAA,CAAA,IADA;AAEA,UAAA,SAAA,EAAA,KAAA,SAAA,CAAA,eAAA,CAAA,SAFA;AAGA,UAAA,eAAA,EAAA,CAHA;AAIA,UAAA,IAAA,EAAA;AAJA,SAAA;AAMA,QAAA,cAAA,CACA,UADA,CACA,IADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,gBAAA,GAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,gBAAA,UAAA,GAAA,MAAA,CAAA,OAAA,CACA,QAAA,CAAA,GAAA,CAAA,UAAA,CADA,EAEA,MAAA,CAAA,SAAA,CAAA,eAAA,CAAA,MAFA,CAAA;;AAIA,gBAAA,MAAA,GACA,GAAA,CAAA,MAAA,GACA,MAAA,CAAA,SAAA,CAAA,eAAA,CAAA,eADA,GAEA,UAHA;AAIA,YAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,MAAA;AACA;AACA,SAfA,EAgBA,KAhBA,CAgBA,UAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA;AACA,SAlBA;AAmBA;AACA,KA5JA;AA6JA,IAAA,OA7JA,mBA6JA,GA7JA,EA6JA,MA7JA,EA6JA;AACA,aAAA,MAAA,CAAA,GAAA,CAAA,CAAA,QAAA,CAAA,MAAA,EAAA,GAAA,CAAA;AACA,KA/JA;AAgKA;AACA,IAAA,QAjKA,oBAiKA,KAjKA,EAiKA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,KAAA;;AACA,UAAA,KAAA,IAAA,KAAA,CAAA,SAAA,CAAA,KAAA,SAAA,CAAA,SAAA,CAAA,EAAA;AACA;AACA;;AACA,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,SAAA,CAAA,QAAA,GAAA,KAAA,CAPA,CAQA;AACA;AACA;AACA;;AACA,WAAA,SAAA,CAAA,UAAA,GAAA,KAAA,CAAA,cAAA,CAAA,YAAA,IACA,KAAA,CAAA,UADA,GAEA,EAFA;AAGA,UAAA,YAAA,GAAA,KAAA,CAAA,cAAA,CAAA,cAAA,IACA,KAAA,CAAA,YADA,GAEA,EAFA;;AAGA,UAAA,YAAA,CAAA,cAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,gBAAA,GAAA,YAAA,CAAA,IAAA;AACA;;AACA,UAAA,UAAA,GAAA,KAAA,CAAA,cAAA,CAAA,YAAA,IACA,KAAA,CAAA,UADA,GAEA,EAFA;;AAGA,UAAA,UAAA,CAAA,cAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,UAAA,CAAA,QAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,eAAA,mBAAA;AACA;AACA;;AACA,WAAA,cAAA,GAAA,KAAA,CAAA,cAAA,CAAA,gBAAA,IACA,KAAA,CAAA,cADA,GAEA,EAFA;AAGA,WAAA,eAAA,GAAA,KAAA,CAAA,cAAA,CAAA,iBAAA,IACA,KAAA,CAAA,eADA,GAEA,EAFA;;AAGA,UAAA,KAAA,cAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,SAAA,CAAA,cAAA,GAAA,KAAA,cAAA,CAAA,CAAA,CAAA;AACA;;AACA,UAAA,KAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,SAAA,CAAA,eAAA,GAAA,KAAA,eAAA,CAAA,CAAA,CAAA;AACA;;AACA,WAAA,sBAAA;AACA,WAAA,qBAAA,GA1CA,CA2CA;AACA;AACA;AACA;;AACA,WAAA,eAAA;AACA,WAAA,mBAAA,CAAA,KAAA,QAAA,CAAA,EAAA,EAhDA,CAiDA;;AACA,WAAA,SAAA;AACA,WAAA,mBAAA;AACA,KArNA;AAsNA,IAAA,cAtNA,0BAsNA,KAtNA,EAsNA;AACA,UAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,WAAA,WAAA,CAAA,CAAA,EAAA,MAAA,EAAA,KAAA,UAAA;AACA,WAAA,MAAA,GAAA,MAAA;AACA,KA1NA;AA2NA,IAAA,WA3NA,uBA2NA,IA3NA,EA2NA,MA3NA,EA2NA,OA3NA,EA2NA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,OAAA,qBAAA,MAAA,CADA;;AAEA,oBAAA,MAAA,CAAA,OAAA,KAAA,KAAA,EAAA;AACA,kBAAA,GAAA,GAAA,OAAA,qBAAA,MAAA,mBAAA;AACA;;AACA,gBAAA,MAAA,CAAA,cAAA,GAAA,IAAA;AACA,gBAAA,KAAA,CAAA,GAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,yBAAA,QAAA,CAAA,IAAA,EAAA;AACA,iBAHA,EAIA,IAJA,CAIA,MAAA,CAAA,UAJA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,KAtOA;AAuOA,IAAA,UAvOA,sBAuOA,IAvOA,EAuOA;AACA,WAAA,YAAA,GAAA,IAAA,CAAA,IAAA;AACA,KAzOA;AA0OA;AACA,IAAA,gBA3OA,4BA2OA,KA3OA,EA2OA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,KAAA;;AACA,UAAA,KAAA,IAAA,KAAA,CAAA,SAAA,CAAA,KAAA,SAAA,CAAA,SAAA,CAAA,EAAA;AACA;AACA;;AACA,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,SAAA,CAAA,QAAA,GAAA,KAAA;AACA,KAnPA;AAoPA,IAAA,sBApPA,kCAoPA,KApPA,EAoPA;AACA,UAAA,SAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,WAAA,mBAAA,CAAA,CAAA,EAAA,SAAA,EAAA,KAAA,UAAA;AACA,KAvPA;AAwPA,IAAA,mBAxPA,+BAwPA,IAxPA,EAwPA,MAxPA,EAwPA,OAxPA,EAwPA;AACA,UAAA,GAAA,GAAA,OAAA,qBAAA,MAAA,CAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,eAAA,QAAA,CAAA,IAAA,EAAA;AACA,OAHA,EAIA,IAJA,CAIA,KAAA,aAJA;AAKA,KAhQA;AAiQA,IAAA,aAjQA,yBAiQA,IAjQA,EAiQA;AACA,WAAA,YAAA,GAAA,IAAA,CAAA,IAAA;AACA,KAnQA;AAoQA;AACA,IAAA,gBArQA,4BAqQA,KArQA,EAqQA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,KAAA;;AACA,UAAA,KAAA,IAAA,KAAA,CAAA,SAAA,CAAA,KAAA,SAAA,CAAA,SAAA,CAAA,EAAA;AACA;AACA;;AACA,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,SAAA,CAAA,QAAA,GAAA,KAAA;AACA,KA5QA;AA6QA,IAAA,uBA7QA,mCA6QA,KA7QA,EA6QA;AACA,UAAA,SAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,WAAA,mBAAA,CAAA,CAAA,EAAA,SAAA,EAAA,KAAA,UAAA;AACA,KAhRA;AAiRA,IAAA,mBAjRA,+BAiRA,IAjRA,EAiRA,MAjRA,EAiRA,OAjRA,EAiRA;AACA,UAAA,GAAA,GAAA,OAAA,qBAAA,MAAA,CAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,eAAA,QAAA,CAAA,IAAA,EAAA;AACA,OAHA,EAIA,IAJA,CAIA,KAAA,aAJA;AAKA,KAzRA;AA0RA,IAAA,aA1RA,yBA0RA,IA1RA,EA0RA;AACA,WAAA,YAAA,GAAA,IAAA,CAAA,IAAA;AACA,KA5RA;AA6RA,IAAA,SA7RA,qBA6RA,CA7RA,EA6RA;AACA,MAAA,CAAA,CAAA,cAAA;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,wBAAA,EAAA,IAAA,CAAA,WAAA,CAAA;AAAA,UACA,UAAA,GAAA,IAAA,CAAA,UADA;AAAA,UAEA,QAAA,GAAA,IAAA,CAAA,QAAA,CAAA,CAAA,CAAA,CAAA,CAAA,aAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAFA;;AAIA,UAAA,UAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,QAAA,UAAA,CAAA,MAAA,CAAA,QAAA;AACA;;AACA,WAAA,aAAA;AACA,KAvSA;AAwSA;AACA,IAAA,sBAzSA,oCAySA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,MAAA,CAAA,SAAA,CAAA,eAAA,EAAA;AACA,kBAAA,MAAA,CAAA,SAAA,CAAA,OAAA,GAAA,IAAA,IAAA,CAAA,MAAA,CAAA,SAAA,CAAA,eAAA,EAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AACA;;AAHA;AAAA,uBAIA,MAAA,CAAA,eAAA,EAJA;;AAAA;AAAA;AAAA,uBAKA,MAAA,CAAA,mBAAA,CAAA,MAAA,CAAA,QAAA,CAAA,EAAA,CALA;;AAAA;AAAA;AAAA,uBAMA,MAAA,CAAA,kBAAA,EANA;;AAAA;AAAA;AAAA,uBAOA,MAAA,CAAA,mBAAA,EAPA;;AAAA;AAQA,oBAAA,MAAA,CAAA,QAAA,EAAA;AACA,kBAAA,WADA,GACA,MAAA,CAAA,SAAA,CAAA,WAAA,IAAA,EADA;AAEA,kBAAA,MAFA,GAEA,WAAA,CAAA,MAAA,IAAA,CAFA;AAGA,kBAAA,QAHA,GAGA,IAAA,IAAA,CAAA,MAAA,CAAA,SAAA,CAAA,eAAA,CAHA;AAIA,kBAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,OAAA,KAAA,QAAA,CAAA,MAAA,CAAA,EAJA,CAIA;;AACA,kBAAA,MAAA,CAAA,SAAA,CAAA,YAAA,GAAA,QAAA,CAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,kBAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,MAAA,CAAA,SAAA,CAAA,YAAA;AACA;;AACA,oBAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,EAAA;AACA,kBAAA,MAAA,CAAA,cAAA;AACA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KA5TA;AA6TA,IAAA,oBA7TA,kCA6TA;AACA;AACA,UAAA,KAAA,QAAA,EAAA;AACA,YAAA,WAAA,GAAA,KAAA,SAAA,CAAA,WAAA,IAAA,EAAA;AACA,YAAA,MAAA,GAAA,WAAA,CAAA,MAAA,IAAA,CAAA;AACA,YAAA,QAAA,GAAA,IAAA,IAAA,CAAA,KAAA,SAAA,CAAA,eAAA,CAAA;AACA,QAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,OAAA,KAAA,QAAA,CAAA,MAAA,CAAA,EAJA,CAIA;;AACA,aAAA,SAAA,CAAA,YAAA,GAAA,QAAA,CAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,KAAA,SAAA,CAAA,YAAA;AACA;AACA,KAvUA;AAwUA;AACA,IAAA,YAzUA,wBAyUA,KAzUA,EAyUA;AACA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,KAAA,aAAA,KAAA,eAAA,CAAA,OAAA,EAAA,CAFA,CAGA;AACA,KA7UA;AA8UA;AACA,IAAA,QA/UA,sBA+UA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,wBAAA,SAAA,GAAA,iBAAA;AACA,oBAAA,MAAA,CAAA,KAAA,GAAA,EAAA;AACA,oBAAA,cAAA,CAAA,IAAA,CAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,EAAA;AACA,4BAAA,GAAA,CAAA,IAAA,EAAA;AACA,8BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,4BAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,4BAAA,MAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA;AACA;;AACA,sBAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,qBAVA;AAWA,mBAfA,EAeA,EAfA,CAAA;AAgBA,iBAjBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KAlWA;AAmWA,IAAA,eAnWA,6BAmWA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,kBAAA,CAAA,MAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,sBAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,0BAAA,MAAA,CAAA,YAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,4BACA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IACA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,IAAA,EAFA,EAGA;AACA,8BAAA,MAAA,CAAA,SAAA,EAAA;AACA,4BAAA,MAAA,CAAA,SAAA,CAAA,WAAA,GAAA,MAAA,CAAA,YAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA,qBAbA;AAcA,mBAhBA,EAgBA,EAhBA,CAAA;AAiBA,iBAlBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA,KAvXA;AAwXA,IAAA,cAxXA,4BAwXA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,wBAAA,SAAA,GAAA,cAAA;AACA,oBAAA,iBAAA,CAAA,GAAA,CAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,MAAA,CAAA,UAAA,GAAA,GAAA;;AACA,0BAAA,MAAA,CAAA,UAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,4BACA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IACA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,IAAA,EAFA,EAGA;AACA,8BAAA,MAAA,CAAA,SAAA,EAAA;AACA,4BAAA,MAAA,CAAA,SAAA,CAAA,UAAA,GAAA,MAAA,CAAA,UAAA,CAAA,CAAA,CAAA;AACA;;AACA,0BAAA,MAAA,CAAA,mBAAA;AACA;AACA;AACA,qBAbA;AAcA,mBAjBA,EAiBA,EAjBA,CAAA;AAkBA,iBAnBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA,KA7YA;AA8YA,IAAA,eA9YA,2BA8YA,KA9YA,EA8YA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,UAAA,GAAA,GAAA,IAAA,GAAA,EAAA;;AAFA,iDAGA,KAHA;AAAA;;AAAA;AAGA,4DAAA;AAAA,cAAA,IAAA;;AACA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,EAAA;AACA,YAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,EAAA,IAAA,EADA,CACA;;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;;AASA,aAAA,MAAA;AACA,KAxZA;AAyZA,IAAA,qBAzZA,iCAyZA,YAzZA,EAyZA,QAzZA,EAyZA;AACA,UAAA,YAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,cAAA,EAAA,YAAA,EAAA,QAAA;AACA,YAAA,MAAA,GAAA,YAAA,CAAA,MAAA,IAAA,EAAA;AACA,YAAA,MAAA,GAAA,YAAA,CAAA,MAAA,IAAA,CAAA;;AACA,YAAA,MAAA,KAAA,QAAA,EAAA;AACA,iBAAA,UAAA,CAAA,MAAA,CAAA;AACA,SAFA,MAEA,IAAA,MAAA,KAAA,YAAA,EAAA;AACA,iBAAA,QAAA,IAAA,UAAA,CAAA,MAAA,CAAA,GAAA,GAAA,CAAA;AACA,SAFA,MAEA;AACA,iBAAA,CAAA;AACA;AACA,OAXA,MAWA;AACA,eAAA,CAAA;AACA;AACA,KAxaA;AAyaA,IAAA,gBAzaA,4BAyaA,GAzaA,EAyaA,MAzaA,EAyaA;AACA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,GAAA,GAAA,CAAA,OAAA;AACA,YAAA,KAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA;AACA,YAAA,OAAA,GAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CAAA,OAAA,IAAA,GAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CAAA,IAAA,IAAA,GAAA;AACA,YAAA,KAAA,GAAA,IAAA,CAAA,OAAA,CAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,IAAA,EAAA,OAAA,EAAA,IAAA,EAAA,OAAA,EAAA,KAAA,EAPA,CAQA;;AACA,eAAA,KAAA;AACA,OAXA,CAYA;;AACA,KAtbA;AAubA,IAAA,sBAvbA,kCAubA,GAvbA,EAubA;AACA;AACA,UAAA,QAAA,GAAA,SAAA,QAAA,CAAA,IAAA;AAAA,eACA,IAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA,IAAA,EAAA;AACA,cAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,iBAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,GAAA,sBACA,IAAA,CAAA,IADA,EACA,SAAA,GAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CADA,EAAA;AAGA,SALA,EAKA,EALA,CADA;AAAA,OAAA;;AAOA,WAAA,YAAA,GAAA,QAAA,CAAA,GAAA,CAAA,CATA,CAUA;AACA;AACA,KAncA;AAocA,IAAA,iBApcA,6BAocA,CApcA,EAocA;AACA,UAAA,CAAA,CAAA,KAAA,EAAA;AACA,YAAA,OAAA,GAAA,CAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AAAA,YACA,IAAA,GAAA,EADA;AAAA,YAEA,cAAA,GAAA,CAFA;AAAA,YAGA,GAAA,GAAA,CAHA;AAAA,YAIA,GAAA,GAAA,CAJA;AAAA,YAKA,MAAA,GAAA,CALA;AAAA,YAMA,OAAA,GAAA,CANA;;AAOA,gBAAA,CAAA,CAAA,KAAA;AACA,eAAA,MAAA;AACA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,aAAA,EAAA,OAAA,CAAA,IAAA,CAAA,WAAA;AACA,YAAA,IAAA,GAAA,OAAA,CAAA,IAAA,CAAA,GAAA,IAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,IAAA,EAJA,CAKA;;AACA;;AACA,eAAA,KAAA;AACA,gBAAA,KAAA,mBAAA,KAAA,KAAA,EAAA;AACA,kBAAA;AACA,oBAAA;AACA,kBAAA,IAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,IAAA,EAAA;AACA,kBAAA,GAAA,GAAA,OAAA,CAAA,GAAA,CAAA,GAAA,IAAA,CAAA;AACA,kBAAA,cAAA,GAAA,OAAA,CAAA,GAAA,CAAA,cAAA,IAAA,CAAA;AACA,kBAAA,GAAA,GAAA,OAAA,CAAA,GAAA,CAAA,GAAA,IAAA,CAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,IAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,GAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,GAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,UAAA,CAAA,cAAA,CAAA;;AACA,sBAAA,OAAA,CAAA,GAAA,EAAA;AACA,oBAAA,MAAA,GACA,UAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,UAAA,CAAA,OAAA,CAAA,GAAA,CADA;AAEA,oBAAA,OAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,oBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,UAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,MAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,OAAA;AACA,mBARA,MAQA;AACA,oBAAA,MAAA,GACA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA,GAAA,UAAA,CAAA,OAAA,CAAA,GAAA,CADA;AAEA,oBAAA,OAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,oBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,MAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,OAAA;AACA;AACA,iBA1BA,CA0BA,OAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,CAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,CAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,CAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,CAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,CAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,CAAA;AACA;AACA,eApCA,CAoCA,gBAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,CAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,CAAA;AACA;AACA;;AACA;;AACA,eAAA,OAAA;AACA,gBAAA;AACA,cAAA,MAAA,GAAA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA,GAAA,UAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AACA,cAAA,OAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,cAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,MAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,OAAA,EANA,CAOA;AACA,aARA,CAQA,iBAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,CAAA;AACA;;AACA;;AACA,eAAA,KAAA;AACA,gBAAA;AACA,cAAA,MAAA,GAAA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA,GAAA,UAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AACA,cAAA,OAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,cAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,MAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,OAAA;AACA,aAPA,CAOA,iBAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,CAAA;AACA;;AACA;;AACA,eAAA,UAAA;AACA;AACA;;AACA;AACA;AArFA;;AAuFA,YAAA,CAAA,CAAA,KAAA,EAAA;AACA,eAAA,aAAA;AACA;AACA;AACA,KAxiBA;AAyiBA,IAAA,aAziBA,2BAyiBA;AAAA;;AACA,UAAA,EAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AAAA,UACA,QAAA,GAAA,CADA;AAAA,UAEA,QAAA,GAAA,CAFA;AAAA,UAGA,aAAA,GAAA,CAHA;AAAA,UAIA,KAAA,GAAA,CAJA;AAAA,UAKA,KAAA,GAAA,CALA;AAAA,UAMA,QAAA,GAAA,CANA;AAAA,UAOA,MAAA,GAAA,CAPA;AAAA,UAQA,eAAA,GAAA,CARA;AAAA,UASA,OAAA,GAAA,EATA;AAAA,UAUA,YAAA,GAAA,EAVA;AAAA,UAWA,QAAA,GAAA,EAXA;AAAA,UAYA,YAAA,GAAA,CAZA;AAAA,UAaA,YAAA,GAAA,CAbA;AAAA,UAcA,cAAA,GAAA,CAdA;AAAA,UAeA,eAAA,GAAA,CAfA;AAAA,UAgBA,YAAA,GAAA,CAhBA;AAAA,UAiBA,eAAA,GAAA,CAjBA;AAAA,UAkBA,WAAA,GAAA,CAlBA;AAoBA,UAAA,IAAA,GAAA,EAAA,CAAA,IAAA,GAAA,MAAA,CAAA,UAAA,CAAA;AAAA,eAAA,UAAA,CAAA,CAAA,CAAA,MAAA,CAAA,GAAA,CAAA;AAAA,OAAA,CAAA;AACA,MAAA,IAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,aAAA,GAAA,CAAA;;AACA,YAAA,KAAA,CAAA,QAAA,EAAA;AACA,UAAA,aAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA;AACA,SAJA,CAMA;;;AACA,YAAA,QAAA,GAAA,CAAA;;AACA,YAAA,KAAA,CAAA,YAAA,EAAA;AACA,cAAA,KAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,qBAAA,CAAA,KAAA,CAAA,YAAA,EAAA,KAAA,CAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,eAAA,EAAA,QAAA,EAAA,IAAA,EAAA,KAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,gBAAA,CAAA,GAAA,QAAA;AACA,UAAA,KAAA,CAAA,wBAAA,CAAA,GACA,QAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CADA;;AAEA,cAAA,KAAA,CAAA,YAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,YAAA,YAAA,CAAA,IAAA,CAAA,KAAA,CAAA,YAAA;AACA;;AACA,UAAA,aAAA,IAAA,QAAA;AACA;;AACA,YAAA,KAAA,CAAA,QAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA;;AACA,YAAA,KAAA,CAAA,WAAA,EAAA;AACA,UAAA,KAAA,GAAA,MAAA,CAAA,gBAAA,CACA,KAAA,CAAA,WADA,EAEA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,IAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAFA,CAAA,CADA,CAKA;;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,KAAA,CAAA,mBAAA,CAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,2BAAA,CAAA,GACA,KAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CADA;AAEA,cAAA,GAAA,GAAA,KAAA,CAAA,WAAA;AACA,cAAA,UAAA,GAAA,GAAA,CAAA,UAAA;;AACA,cAAA,UAAA,EAAA;AACA,gBAAA,UAAA,CAAA,WAAA,OAAA,WAAA,EAAA;AACA,cAAA,YAAA,IAAA,KAAA;AACA;AACA;;AACA,cAAA,KAAA,CAAA,WAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,WAAA,CAAA,OAAA,CAAA,IADA;AAEA,cAAA,MAAA,EAAA,KAFA;AAGA,cAAA,EAAA,EAAA,KAAA,CAAA,WAAA,CAAA,OAAA,CAAA;AAHA,aAAA;AAKA;AACA;;AACA,YAAA,KAAA,CAAA,iBAAA,EAAA;AACA,UAAA,KAAA,GAAA,MAAA,CAAA,gBAAA,CACA,KAAA,CAAA,iBADA,EAEA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,IAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAFA,CAAA;AAIA,UAAA,KAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,KAAA,CAAA,yBAAA,CAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,iCAAA,CAAA,GACA,KAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CADA;AAEA,cAAA,IAAA,GAAA,KAAA,CAAA,iBAAA;AACA,cAAA,WAAA,GAAA,IAAA,CAAA,UAAA;;AACA,cAAA,WAAA,EAAA;AACA,gBAAA,WAAA,CAAA,WAAA,OAAA,WAAA,EAAA;AACA,cAAA,YAAA,IAAA,KAAA;AACA;AACA;;AACA,cAAA,KAAA,CAAA,iBAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,iBAAA,CAAA,OAAA,CAAA,IADA;AAEA,cAAA,MAAA,EAAA,KAFA;AAGA,cAAA,EAAA,EAAA,KAAA,CAAA,iBAAA,CAAA,OAAA,CAAA;AAHA,aAAA;AAKA;AACA;;AACA,YAAA,KAAA,CAAA,QAAA,EAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,gBAAA,CACA,KAAA,CAAA,QADA,EAEA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,IAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAFA,CAAA;AAIA,UAAA,QAAA,GAAA,KAAA,CAAA,UAAA,CAAA,QAAA,IACA,KAAA,CAAA,UAAA,CAAA,QAAA,CADA,GAEA,CAFA;AAGA,UAAA,KAAA,CAAA,gBAAA,CAAA,GAAA,QAAA;AACA,UAAA,KAAA,CAAA,wBAAA,CAAA,GACA,QAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CADA;AAEA,cAAA,KAAA,GAAA,KAAA,CAAA,QAAA;AACA,cAAA,YAAA,GAAA,KAAA,CAAA,UAAA;;AACA,cAAA,YAAA,EAAA;AACA,gBAAA,YAAA,CAAA,WAAA,OAAA,WAAA,EAAA;AACA,cAAA,YAAA,IAAA,QAAA;AACA;AACA;;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,IADA;AAEA,cAAA,MAAA,EAAA,QAFA;AAGA,cAAA,EAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AAHA,aAAA;AAKA;AACA;;AAEA,YAAA,KAAA,CAAA,MAAA,EAAA;AACA;AACA,cAAA,GAAA,GACA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,KAAA,GAAA,CAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,KAAA,GAAA,CAAA,CADA,GAEA,KAAA,CAAA,UAAA,CAAA,QAAA,GAAA,QAAA,GAAA,CAAA,CAFA,IAGA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,GAAA,KAAA,CAAA,MAAA,GAAA,CAAA,KACA,QAAA,GAAA,QAAA,GAAA,CADA,CAHA,CADA;AAMA,UAAA,MAAA,GAAA,MAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,MAAA,EAAA,GAAA,CAAA;AACA,UAAA,MAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,IAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,CAAA;AACA,UAAA,KAAA,CAAA,cAAA,CAAA,GAAA,MAAA;AACA,UAAA,KAAA,CAAA,sBAAA,CAAA,GACA,MAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CADA;AAEA,cAAA,KAAA,GAAA,KAAA,CAAA,MAAA;AACA,cAAA,YAAA,GAAA,KAAA,CAAA,UAAA;;AACA,cAAA,YAAA,EAAA;AACA,gBAAA,YAAA,CAAA,WAAA,OAAA,WAAA,EAAA;AACA,cAAA,YAAA,IAAA,MAAA;AACA;AACA;;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA,IADA;AAEA,cAAA,MAAA,EAAA,MAFA;AAGA,cAAA,EAAA,EAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AAHA,aAAA;AAKA;AACA;;AACA,QAAA,QAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,KAAA,GAAA,CAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,KAAA,GAAA,CAAA,CADA,GAEA,KAAA,CAAA,UAAA,CAAA,QAAA,GAAA,QAAA,GAAA,CAAA,CAFA,GAGA,KAAA,CAAA,UAAA,CAAA,MAAA,GAAA,MAAA,GAAA,CAAA,CAJA;AAKA,QAAA,QAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,IAAA,aAAA,GAAA,YADA;AAGA,YAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AACA,YAAA,OAAA,GAAA,IAAA,CAAA,IAAA,IAAA,EAAA;;AACA,YAAA,OAAA,KAAA,SAAA,EAAA;AACA,UAAA,YAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CADA;AAEA,UAAA,YAAA,IAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA;AACA,SAJA,MAIA,IAAA,OAAA,KAAA,SAAA,EAAA;AACA,UAAA,eAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CADA;AAEA,UAAA,eAAA,IAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA;AACA,SAJA,MAIA;AACA,UAAA,cAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CADA;AAEA,UAAA,WAAA,IAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA;AACA,SAvJA,CAwJA;;;AACA,YAAA,gBAAA,GACA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,IAAA,KAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GACA,QAFA;AAGA,YAAA,gBAAA,GACA,gBAAA,GAAA,MAAA,GAAA,KAAA,GAAA,KAAA,GAAA,QADA;AAEA,QAAA,KAAA,CAAA,kBAAA,CAAA,GAAA,gBAAA;AACA,QAAA,KAAA,CAAA,0BAAA,CAAA,GACA,gBAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CADA;AAEA,OAjKA;AAmKA,WAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACA,WAAA,SAAA,CAAA,oBAAA,GAAA,YAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,WAAA,SAAA,CAAA,eAAA,GAAA,eAAA;AACA,WAAA,SAAA,CAAA,uBAAA,GAAA,eAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AACA,WAAA,SAAA,CAAA,cAAA,GAAA,cAAA;AACA,WAAA,SAAA,CAAA,sBAAA,GAAA,cAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,WAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACA,WAAA,SAAA,CAAA,oBAAA,GAAA,YAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AACA,WAAA,SAAA,CAAA,eAAA,GAAA,eAAA;AACA,WAAA,SAAA,CAAA,uBAAA,GAAA,eAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AACA,WAAA,SAAA,CAAA,cAAA,GAAA,WAAA;AACA,WAAA,SAAA,CAAA,sBAAA,GAAA,WAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AAEA,MAAA,aAAA,GAAA,aAAA,GAAA,aAAA,GAAA,CAAA,CAxMA,CA0MA;;AACA,UAAA,KAAA,GACA,KAAA,CAAA,UAAA,CAAA,QAAA,IACA,KAAA,CAAA,UAAA,CAAA,aAAA,CADA,GAEA,KAAA,CAAA,UAAA,CAAA,QAAA,CAHA;AAIA,WAAA,SAAA,CAAA,QAAA,GAAA,QAAA;AACA,WAAA,SAAA,CAAA,cAAA,GAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA;AACA,WAAA,SAAA,CAAA,aAAA,GAAA,KAAA,CAAA,UAAA,CAAA,aAAA,CAAA;;AACA,UAAA,KAAA,SAAA,CAAA,oBAAA,EAAA;AACA,QAAA,eAAA,GAAA,KAAA,qBAAA,CACA,KAAA,SAAA,CAAA,oBADA,EAEA,KAAA,CAAA,UAAA,CAAA,QAAA,CAFA,CAAA;AAIA,QAAA,eAAA,GAAA,eAAA,GAAA,eAAA,GAAA,CAAA;AACA,OAxNA,CAyNA;;;AACA,WAAA,SAAA,CAAA,KAAA,GACA,KAAA,CAAA,UAAA,CAAA,KAAA,IACA,eADA,GAEA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,iBAAA,CAHA;AAIA,WAAA,SAAA,CAAA,cAAA,GACA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,KAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,OAAA,CAFA;AAGA,WAAA,sBAAA,CAAA,OAAA;AACA,WAAA,oBAAA,GAAA,KAAA,eAAA,CAAA,YAAA,CAAA;AACA,WAAA,gBAAA,GAAA,KAAA,eAAA,CAAA,QAAA,CAAA,CAnOA,CAoOA;AACA,KA9wBA;AA+wBA,IAAA,aA/wBA,yBA+wBA,QA/wBA,EA+wBA;AACA,UAAA,EAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AAAA,UACA,KAAA,GAAA,EAAA,CAAA,OAAA,CAAA,QAAA,CADA;AAEA,aAAA,KAAA,GAAA,CAAA;AACA,KAnxBA;AAoxBA,IAAA,mBApxBA,iCAoxBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,sBAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,4BAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,4BAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,0BAAA,MAAA,CAAA,eAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CADA,CAEA;AACA;AACA;AACA,qBARA;AASA,mBAXA,EAWA,EAXA,CAAA;AAYA,iBAbA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA,KAnyBA;AAoyBA,IAAA,WApyBA,uBAoyBA,QApyBA,EAoyBA;AACA,UAAA,GAAA,GAAA,QAAA,CAAA,MAAA;;AACA,UAAA,GAAA,EAAA;AACA,+BAAA,GAAA,CAAA,UAAA,GAAA,GAAA,CAAA,UAAA,KAAA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA3yBA;AA4yBA,IAAA,YA5yBA,wBA4yBA,QA5yBA,EA4yBA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,IAAA;;AACA,UAAA,IAAA,EAAA;AACA,+BAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,KAAA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAnzBA;AAozBA,IAAA,WApzBA,uBAozBA,QApzBA,EAozBA;AACA,UAAA,GAAA,GAAA,QAAA,CAAA,GAAA;;AACA,UAAA,GAAA,EAAA;AACA,+BAAA,GAAA,CAAA,GAAA,GAAA,GAAA,CAAA,GAAA,CAAA,IAAA,KAAA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA3zBA;AA4zBA,IAAA,gBA5zBA,4BA4zBA,QA5zBA,EA4zBA;AACA,UAAA,QAAA,GAAA,QAAA,CAAA,QAAA;;AACA,UAAA,QAAA,EAAA;AACA,+BAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,KAAA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAn0BA;AAo0BA,IAAA,oBAp0BA,gCAo0BA,QAp0BA,EAo0BA;AACA,UAAA,YAAA,GAAA,QAAA,CAAA,YAAA;;AACA,UAAA,YAAA,EAAA;AACA,+BAAA,YAAA,CAAA,IAAA,GAAA,YAAA,CAAA,IAAA,KAAA,gBACA,YAAA,CAAA,IAAA,GAAA,YAAA,CAAA,IAAA,KADA;AAGA,OAJA,MAIA;AACA;AACA;AACA,KA70BA;AA80BA,IAAA,iBA90BA,6BA80BA,SA90BA,EA80BA,OA90BA,EA80BA;AACA,MAAA,KAAA,CACA,MADA,CACA,2BAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,eAHA,GADA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA71BA;AA81BA,IAAA,mBA91BA,+BA81BA,SA91BA,EA81BA,OA91BA,EA81BA;AACA,MAAA,KAAA,CACA,MADA,CACA,2BAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,eAHA;AAIA,KAn2BA;AAo2BA,IAAA,kBAp2BA,8BAo2BA,SAp2BA,EAo2BA,OAp2BA,EAo2BA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,UAJA;AAKA,QAAA,aAAA,EAAA,MALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,cAAA,EACA,oDACA,qBADA,GAEA,eAFA,GAGA,QAXA;AAYA,QAAA,QAAA,EAAA,sBAZA;AAaA,QAAA,WAAA,EAAA,gBAbA;AAcA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,eAAA,EAAA,IADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,cAAA,GAAA,EAAA,qBAAA,CAAA,aAAA,CAAA,WAAA,KAAA,SAAA,CAAA,UAAA,CAAA,EAAA;AADA,aADA;AAIA,YAAA,QAAA,EAAA;AAJA,WAFA;AAQA,UAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,EAAA,EAAA,IADA;AAEA,cAAA,MAAA,EAAA;AACA,gBAAA,EAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBADA;AAEA,gBAAA,IAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAFA;AAGA,gBAAA,GAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA;AAHA;AAFA,aADA;AASA,YAAA,IAAA,EAAA,cAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA;AACA,aAXA;AAYA,YAAA,KAAA,EAAA,eAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAdA,WARA,CAwBA;;AAxBA,SAAA;AAdA,OAHA;AA4CA,KAj5BA;AAk5BA,IAAA,iBAl5BA,6BAk5BA,SAl5BA,EAk5BA,OAl5BA,EAk5BA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,UALA;AAMA,QAAA,cAAA,EAAA,QANA;AAOA,QAAA,WAAA,EAAA,MAPA;AAQA,QAAA,QAAA,EAAA,8CARA;AASA,QAAA,WAAA,EAAA,gBATA;AAUA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,eAAA,EAAA,IADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA;AACA,cAAA,GAAA,EAAA,eAAA,CAAA,uBAAA,CACA,QACA,OAAA,CAAA,KAAA,CAAA,IAAA,CAAA,EADA,GAEA,QAFA,GAGA,KAAA,SAAA,CAAA,UAAA,CAAA,EAHA,GAIA,QAJA,GAKA,KAAA,SAAA,CAAA,eANA;AAFA,aADA;AAYA,YAAA,QAAA,EAAA;AAZA,WAFA;AAgBA,UAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,EAAA,EAAA,IADA;AAEA,cAAA,MAAA,EAAA;AACA,gBAAA,EAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBADA,CAEA;AACA;;AAHA;AAFA,aADA;AASA,YAAA,IAAA,EAAA,cAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA;AACA,aAXA;AAYA,YAAA,KAAA,EAAA,eAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAdA,WAhBA,CAgCA;;AAhCA,SAAA;AAVA,OAHA;AAgDA,KAn8BA;AAo8BA,IAAA,0BAp8BA,sCAo8BA,SAp8BA,EAo8BA,OAp8BA,EAo8BA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,MALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,WAAA,EAAA,MAPA;AAQA,QAAA,QAAA,EAAA,gCARA;AASA,QAAA,WAAA,EAAA,gBATA;AAUA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,eAAA,EAAA,IADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,cAAA,GAAA,EAAA,mBAAA,CAAA,MAAA,CAAA,aAAA;AADA,aADA;AAIA,YAAA,QAAA,EAAA;AAJA,WAFA;AAQA,UAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,EAAA,EAAA,IADA;AAEA,cAAA,MAAA,EAAA;AACA,gBAAA,EAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBADA,CAEA;AACA;;AAHA;AAFA,aADA;AASA,YAAA,IAAA,EAAA,cAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA;AACA,aAXA;AAYA,YAAA,KAAA,EAAA,eAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAdA;AARA,SAAA;AAVA,OAHA;AAuCA,KA5+BA;AA6+BA,IAAA,yBA7+BA,qCA6+BA,SA7+BA,EA6+BA,OA7+BA,EA6+BA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,YALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,QAAA,EAAA,4BAPA;AAQA,QAAA,WAAA,EAAA,gBARA;AASA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,IAAA,EAAA,KAAA,WAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AACA,gBAAA,OAAA,CAAA,KAAA,CAAA,cAAA,CAAA,QAAA,CAAA,EAAA;AACA,kBAAA,GAAA,GAAA,OAAA,CAAA,KAAA,CAAA,MAAA;;AACA,kBAAA,GAAA,EAAA;AACA,oBACA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,IAAA,IACA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,MAFA,EAGA;AACA,sBAAA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,EAAA;AACA,2BACA,CAAA,CAAA,UAAA,CAAA,WAAA,OACA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,CAAA,WAAA,EAFA;AAIA,mBALA,MAKA;AACA,2BAAA,CAAA;AACA;AACA;AACA,eAdA,MAcA;AACA,uBAAA,CAAA;AACA;AACA;AACA,WArBA;AADA,SAAA;AATA,OAHA;AAqCA,KAnhCA;AAohCA,IAAA,+BAphCA,2CAohCA,SAphCA,EAohCA,OAphCA,EAohCA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,YALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,QAAA,EAAA,4BAPA;AAQA,QAAA,WAAA,EAAA,gBARA;AASA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,IAAA,EAAA,KAAA,iBAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AACA,gBAAA,OAAA,CAAA,KAAA,CAAA,cAAA,CAAA,QAAA,CAAA,EAAA;AACA,kBAAA,GAAA,GAAA,OAAA,CAAA,KAAA,CAAA,MAAA;;AACA,kBAAA,GAAA,EAAA;AACA,oBACA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,IAAA,IACA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,MAFA,EAGA;AACA,sBAAA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,EAAA;AACA,2BACA,CAAA,CAAA,UAAA,CAAA,WAAA,OACA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,CAAA,WAAA,EAFA;AAIA,mBALA,MAKA;AACA,2BAAA,CAAA;AACA;AACA;AACA,eAdA,MAcA;AACA,uBAAA,CAAA;AACA;AACA;AACA,WArBA;AADA,SAAA;AATA,OAHA;AAqCA,KA1jCA;AA2jCA,IAAA,sBA3jCA,kCA2jCA,SA3jCA,EA2jCA,OA3jCA,EA2jCA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,YALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,QAAA,EAAA,4BAPA;AAQA,QAAA,WAAA,EAAA,gBARA;AASA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,IAAA,EAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AACA,gBAAA,OAAA,CAAA,KAAA,CAAA,cAAA,CAAA,QAAA,CAAA,EAAA;AACA,kBAAA,GAAA,GAAA,OAAA,CAAA,KAAA,CAAA,MAAA;;AACA,kBAAA,GAAA,EAAA;AACA,oBACA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,IAAA,IACA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,MAFA,EAGA;AACA,sBAAA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,EAAA;AACA,2BACA,CAAA,CAAA,UAAA,CAAA,WAAA,OACA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,CAAA,WAAA,EAFA;AAIA,mBALA,MAKA;AACA,2BAAA,CAAA;AACA;AACA;AACA,eAdA,MAcA;AACA,uBAAA,CAAA;AACA;AACA;AACA,WArBA;AADA,SAAA;AATA,OAHA;AAqCA,KAjmCA;AAkmCA,IAAA,oBAlmCA,gCAkmCA,SAlmCA,EAkmCA,OAlmCA,EAkmCA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,YALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,QAAA,EAAA,4BAPA;AAQA,QAAA,WAAA,EAAA,YARA;AASA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,IAAA,EAAA,KAAA;AADA,SAAA;AATA,OAHA;AAgBA,KAnnCA;AAonCA,IAAA,sBApnCA,kCAonCA,SApnCA,EAonCA,OApnCA,EAonCA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,YAJA;AAKA,QAAA,aAAA,EAAA,MALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,QAAA,EAAA,gCAPA;AAQA,QAAA,WAAA,EAAA,gBARA;AASA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,IAAA,EAAA,KAAA;AADA,SAAA;AATA,OAHA;AAgBA,KAroCA;AAsoCA,IAAA,sBAtoCA,kCAsoCA,SAtoCA,EAsoCA,OAtoCA,EAsoCA;AACA,UAAA,IAAA,GAAA,OAAA,CAAA,KAAA,CAAA,IAAA,IAAA,EAAA;AACA,UAAA,GAAA,GAAA,IAAA,CAAA,GAAA,IAAA,EAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,EAAA,IAAA,EAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,EAAA,IAAA,EAAA;AACA,MAAA,KAAA,CACA,MADA,CACA,kBAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,iBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA,UAJA;AAKA,QAAA,aAAA,EAAA,MALA;AAMA,QAAA,cAAA,EAAA,IANA;AAOA,QAAA,cAAA,EACA,oDACA,wBADA,GAEA,eAFA,GAGA,QAXA;AAYA,QAAA,QAAA,EAAA,sBAZA;AAaA,QAAA,WAAA,EAAA,gBAbA;AAcA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,eAAA,EAAA,IADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,cAAA,GAAA,EAAA,mBAAA,CAAA,SAAA,CAAA,WAAA,KAAA,SAAA,CAAA,UAAA,CAAA,EAAA,GAAA,MAAA,GAAA,MAAA,GAAA,SAAA,GAAA,KAAA;AADA,aADA;AAIA,YAAA,QAAA,EAAA;AAJA,WAFA;AAQA,UAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,EAAA,EAAA,IADA;AAEA,cAAA,MAAA,EAAA;AACA,gBAAA,EAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBADA;AAEA,gBAAA,IAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAFA;AAGA,gBAAA,KAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAHA;AAIA,gBAAA,GAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA;AAJA;AAFA,aADA;AAUA,YAAA,IAAA,EAAA,cAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA;AACA,aAZA;AAaA,YAAA,KAAA,EAAA,eAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAfA;AARA,SAAA;AAdA,OAHA;AA4CA,KAvrCA;AAwrCA,IAAA,sBAxrCA,kCAwrCA,SAxrCA,EAwrCA,OAxrCA,EAwrCA;AACA,MAAA,KAAA,CACA,MADA,CACA,6BAAA,OAAA,CAAA,KAAA,GAAA,KADA,EAEA,QAFA,CAEA,SAFA,EAGA,gBAHA,CAGA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,GAHA;AAIA,QAAA,OAAA,EAAA,IAJA;AAKA,QAAA,MAAA,EAAA,UALA;AAMA,QAAA,aAAA,EAAA,MANA;AAOA,QAAA,cAAA,EAAA,IAPA;AAQA,QAAA,cAAA,EACA,oDACA,wBADA,GAEA,eAFA,GAGA,QAZA;AAaA,QAAA,QAAA,EAAA,sBAbA;AAcA,QAAA,WAAA,EAAA,gBAdA;AAeA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,eAAA,EAAA,IADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,cAAA,GAAA,EAAA,eAAA,CAAA,SAAA;AADA,aADA;AAIA,YAAA,QAAA,EAAA;AAJA,WAFA;AAQA,UAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,EAAA,EAAA,IADA;AAEA,cAAA,MAAA,EAAA;AACA,gBAAA,EAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBADA;AAEA,gBAAA,IAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAFA;AAGA,gBAAA,SAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAHA;AAIA,gBAAA,QAAA,EAAA;AAAA,kBAAA,IAAA,EAAA;AAAA;AAJA;AAFA,aADA;AAUA,YAAA,IAAA,EAAA,cAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA;AACA,aAZA;AAaA,YAAA,KAAA,EAAA,eAAA,QAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAfA;AARA,SAAA;AAfA,OAHA;AA6CA,KAtuCA;AAuuCA,IAAA,OAvuCA,mBAuuCA,QAvuCA,EAuuCA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,MAAA,QAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,SAAA,GAAA,KAAA,GAAA,CAAA,CAAA,QAAA;AACA,OAFA,EAFA,CAKA;;AACA,6BAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,KA9uCA;AA+uCA,IAAA,MA/uCA,oBA+uCA;AACA,UAAA,EAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AAAA,UACA,KAAA,GAAA,EAAA,CAAA,KAAA,EADA;AAEA,WAAA,QAAA,CAAA,EAAA,GAAA,aAAA,GAAA,IAAA,CAAA,EAAA,EAAA;AACA,MAAA,EAAA,CAAA,MAAA,CAAA,KAAA,EAAA,KAAA,QAAA;AACA,KApvCA;AAqvCA,IAAA,yBArvCA,uCAqvCA;AACA,UAAA,KAAA,SAAA,CAAA,oBAAA,EAAA;AACA,YAAA,aAAA,GAAA,KAAA,qBAAA,CACA,KAAA,SAAA,CAAA,oBADA,EAEA,KAAA,SAAA,CAAA,QAFA,CAAA;AAIA,aAAA,SAAA,CAAA,qBAAA,GAAA,KAAA,CAAA,QAAA,CACA,aAAA,GAAA,aAAA,GAAA,CADA,EAEA,GAFA,CAAA;AAIA,YAAA,KAAA,GACA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,QAAA,KACA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,aAAA,IACA,KAAA,CAAA,UAAA,CAAA,KAAA,SAAA,CAAA,cAAA,CAFA,IAGA,aAJA;AAKA,aAAA,SAAA,CAAA,KAAA,GAAA,KAAA,CAAA,QAAA,CAAA,KAAA,EAAA,GAAA,CAAA;AACA;AACA,KAtwCA;AAuwCA,IAAA,mBAvwCA,iCAuwCA;AAAA;;AACA,UAAA,WAAA,GAAA,CAAA;AACA,WAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,WAAA,IAAA,OAAA,CAAA,qBAAA,CAAA,CAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAAA,CAAA;AACA,OAFA;AAGA,WAAA,SAAA,CAAA,iBAAA,GAAA,WAAA;AACA,WAAA,aAAA;AACA,KA9wCA;AA+wCA,IAAA,eA/wCA,6BA+wCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,kBAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,eAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,qBAJA;AAKA,mBAPA,EAOA,EAPA,CAAA;AAQA,iBATA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,KA1xCA;AA2xCA,IAAA,aA3xCA,yBA2xCA,KA3xCA,EA2xCA;AACA,aAAA,KAAA,qBAAA,CAAA,KAAA,EAAA,KAAA,SAAA,CAAA,QAAA,CAAA;AACA,KA7xCA;AA8xCA,IAAA,gBA9xCA,8BA8xCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,mBAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,oBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,qBAJA;AAKA,mBAPA,EAOA,EAPA,CAAA;AAQA,iBATA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,KAzyCA;AA0yCA,IAAA,WA1yCA,yBA0yCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OAAA,CAAA,QAAA,GAAA,EAAA;AACA,gBAAA,QAFA,GAEA,SAAA,CAAA,QAAA,IAAA,CAFA;;AAGA,oBAAA,QAAA,KAAA,CAAA,EAAA;AACA,sBAAA,SAAA,CAAA,QAAA,EAAA;AACA,oBAAA,QADA,GACA,SAAA,CAAA,QAAA,IAAA,EADA;AAEA,oBAAA,OAFA,GAEA,QAAA,CAAA,MAAA,CAAA,UAAA,GAAA;AAAA,6BAAA,GAAA,CAAA,IAAA,KAAA,SAAA;AAAA,qBAAA,CAFA;AAGA,oBAAA,cAHA,GAGA,OAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,6BAAA,CAAA,CAAA,SAAA,KAAA,CAAA;AAAA,qBAAA,CAHA;AAIA,oBAAA,OAAA,CAAA,QAAA,GAAA,OAAA;;AACA,wBAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,0BAAA,cAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,wBAAA,OAAA,CAAA,SAAA,CAAA,OAAA,GAAA,cAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA,iBAZA,MAYA,IAAA,QAAA,KAAA,CAAA,EAAA;AACA,sBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,oBAAA,UAAA,CAAA,YAAA;AACA,sBAAA,OAAA,CAAA,UAAA,CAAA;AACA,sBAAA,OAAA,CAAA,QAAA,GAAA,EAAA;AACA,sBAAA,eAAA,CACA,MADA,GAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,0BAAA,OAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,yBAHA,MAGA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,uBAVA;AAWA,qBAdA,EAcA,EAdA,CAAA;AAeA,mBAhBA;AAiBA;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCA,KA90CA;AA+0CA,IAAA,YA/0CA,0BA+0CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OAAA,CAAA,SAAA,GAAA,EAAA;AACA,gBAAA,QAFA,GAEA,SAAA,CAAA,QAAA,IAAA,CAFA;;AAGA,oBAAA,QAAA,KAAA,CAAA,EAAA;AACA,sBAAA,SAAA,CAAA,QAAA,EAAA;AACA,oBAAA,QADA,GACA,SAAA,CAAA,QAAA,IAAA,EADA;AAEA,oBAAA,QAFA,GAEA,QAAA,CAAA,MAAA,CAAA,UAAA,GAAA;AAAA,6BAAA,GAAA,CAAA,IAAA,KAAA,UAAA;AAAA,qBAAA,CAFA;AAGA,oBAAA,eAHA,GAGA,QAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,6BAAA,CAAA,CAAA,SAAA,KAAA,CAAA;AAAA,qBAAA,CAHA;AAIA,oBAAA,OAAA,CAAA,SAAA,GAAA,QAAA;;AACA,wBAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,0BAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,wBAAA,OAAA,CAAA,SAAA,CAAA,QAAA,GAAA,eAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA,iBAZA,MAYA,IAAA,QAAA,KAAA,CAAA,EAAA;AACA,sBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,oBAAA,UAAA,CAAA,YAAA;AACA,sBAAA,OAAA,CAAA,UAAA,CAAA;AACA,sBAAA,OAAA,CAAA,SAAA,GAAA,EAAA;AACA,sBAAA,eAAA,CACA,IADA,GAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,0BAAA,OAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,yBAHA,MAGA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,uBAVA;AAWA,qBAdA,EAcA,EAdA,CAAA;AAeA,mBAhBA;AAiBA;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkCA,KAj3CA;AAk3CA,IAAA,qBAl3CA,mCAk3CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OAAA,CAAA,gBAAA,GAAA,EAAA;AACA,gBAAA,QAFA,GAEA,SAAA,CAAA,QAAA,IAAA,CAFA;;AAGA,oBAAA,QAAA,KAAA,CAAA,EAAA;AACA,sBAAA,SAAA,CAAA,QAAA,EAAA;AACA,oBAAA,QADA,GACA,SAAA,CAAA,QAAA,IAAA,EADA;AAEA,oBAAA,OAFA,GAEA,QAAA,CAAA,MAAA,CAAA,UAAA,GAAA;AAAA,6BAAA,GAAA,CAAA,IAAA,KAAA,SAAA;AAAA,qBAAA,CAFA;AAGA,oBAAA,OAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,0BAAA,SAAA,GAAA,CAAA,CAAA,SAAA,IAAA,EAAA;AACA,0BAAA,WAAA,GAAA,SAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,+BAAA,CAAA,CAAA,QAAA,CAAA,EAAA,KAAA,OAAA,CAAA,QAAA,CAAA,EAAA;AAAA,uBAAA,CAAA;;AACA,0BAAA,WAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,wBAAA,OAAA,CAAA,gBAAA,CAAA,IAAA,CAAA,CAAA;AACA;AACA,qBANA;;AAOA,wBAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,sBAAA,cADA,GACA,OAAA,CAAA,gBAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,+BAAA,CAAA,CAAA,SAAA,KAAA,CAAA;AAAA,uBAAA,CADA;;AAEA,0BAAA,cAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,wBAAA,OAAA,CAAA,SAAA,CAAA,OAAA,GAAA,cAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA,iBAlBA,MAkBA,IAAA,QAAA,KAAA,CAAA,EAAA;AACA,sBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,oBAAA,UAAA,CAAA,YAAA;AACA,sBAAA,OAAA,CAAA,UAAA,CAAA;AACA,sBAAA,cAAA,CACA,aADA,CACA,OAAA,CAAA,QAAA,CAAA,EADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,0BAAA,OAAA,CAAA,gBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,yBAHA,MAGA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,uBAVA;AAWA,qBAbA,EAaA,EAbA,CAAA;AAcA,mBAfA;AAgBA;;AAtCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuCA,KAz5CA;AA05CA,IAAA,eA15CA,6BA05CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,oBAAA,kBAAA,CAAA,GAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,wBAAA,OAAA,CAAA,eAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,4BAAA,OAAA,CAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,8BACA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IACA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,IAAA,EAFA,EAGA;AACA,4BAAA,OAAA,CAAA,SAAA,CAAA,WAAA,GAAA,OAAA,CAAA,eAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA,uBAXA,MAWA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,qBAfA;AAgBA,mBAnBA,EAmBA,EAnBA,CAAA;AAoBA,iBArBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA,KAj7CA;AAk7CA,IAAA,OAl7CA,qBAk7CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,cAAA,CAAA,GAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,OAAA,CAAA,GAAA,GAAA,GAAA;AACA,sBAAA,OAAA,CAAA,QAAA,GAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CACA,UAAA,CAAA;AAAA,+BACA,CAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,EAAA,KACA,CAAA,CAAA,eAAA,KAAA,MAFA;AAAA,uBADA,CAAA,CAFA,CAMA;;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CACA,UAAA,CAAA;AAAA,+BACA,CAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,EAAA,KACA,CAAA,CAAA,eAAA,KAAA,MAFA;AAAA,uBADA,CAAA,CAPA,CAWA;;AACA,sBAAA,OAAA,CAAA,iBAAA,GAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CACA,UAAA,CAAA;AAAA,+BACA,CAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,EAAA,KACA,CAAA,CAAA,eAAA,KAAA,MAFA;AAAA,uBADA,CAAA,CAZA,CAgBA;;AACA,sBAAA,OAAA,CAAA,MAAA,GAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CACA,UAAA,CAAA;AAAA,+BACA,CAAA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,IACA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CADA,IAEA,CAAA,CAAA,OAAA,CAAA,MAAA,KAAA,EAFA,KAGA,CAAA,CAAA,eAAA,KAAA,MAJA;AAAA,uBADA,CAAA,CAjBA,CAuBA;AACA,qBAxBA;AAyBA,mBA3BA,EA2BA,EA3BA,CAAA;AA4BA,iBA7BA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BA,KAj9CA;AAk9CA,IAAA,iBAl9CA,+BAk9CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,mBAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EACA,OAAA,CAAA,gBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,qBAHA;AAIA,mBANA,EAMA,EANA,CAAA;AAOA,iBARA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,KA59CA;AA69CA,IAAA,mBA79CA,+BA69CA,EA79CA,EA69CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,wBAAA,SAAA,GAAA,EAAA,GAAA,WAAA;AACA,oBAAA,cAAA,CACA,OADA,CACA,SADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,4BAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,4BAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,0BAAA,OAAA,CAAA,SAAA,CAAA,cAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA,OAAA;AACA;AACA;AACA,qBATA,EAUA,KAVA;AAWA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,mBAjBA,EAiBA,EAjBA,CAAA;AAkBA,iBAnBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA,KAl/CA;AAm/CA,IAAA,gBAn/CA,4BAm/CA,OAn/CA,EAm/CA,WAn/CA,EAm/CA;AACA,UAAA,GAAA,GAAA,CAAA;AACA,UAAA,GAAA,GAAA,OAAA,GAAA,WAAA,GAAA,GAAA;;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,EAAA;AACA;AACA,QAAA,GAAA,GAAA,CAAA;AACA,OAHA,MAGA;AACA;AACA,QAAA,GAAA,GAAA,GAAA;AACA;;AACA,aAAA,GAAA,GAAA,IAAA;AACA,KA9/CA;AA+/CA,IAAA,KA//CA,iBA+/CA,IA//CA,EA+/CA;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,WADA;AAEA,UAAA,MAAA,EAAA;AACA,YAAA,IAAA,EAAA;AADA;AAFA,SAAA;AAMA,OAPA,MAOA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAAA,OAAA,EAXA,CAYA;AACA,KA5gDA;AA6gDA;AACA,IAAA,SA9gDA,qBA8gDA,QA9gDA,EA8gDA;AACA,UAAA,QAAA,CAAA,cAAA,CAAA,QAAA,CAAA,EAAA;AACA,YAAA,QAAA,CAAA,MAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,cAAA,GAAA,GAAA,KAAA,MAAA,GAAA,QAAA,CAAA,MAAA,CAAA,OAAA,CAAA,KAAA;AACA,iBACA,4EACA,GADA,GAEA,MAHA;AAKA;AACA,OATA,MASA;AACA,eAAA,EAAA;AACA;AACA,KA3hDA;AA4hDA,IAAA,YA5hDA,0BA4hDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,oBAAA,cAAA,CAAA,GAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,sBAAA,OAAA,CAAA,QAAA,GAAA,GAAA;AACA,qBAHA;AAIA,mBAPA,EAOA,EAPA,CAAA;AAQA,iBATA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,KAviDA;AAwiDA,IAAA,UAxiDA,sBAwiDA,CAxiDA,EAwiDA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,cAAA,EAAA,IAAA,CAAA,WAAA,CAAA;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,QAAA,CAAA,CAAA,CAAA,CAAA,CAAA,aAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,CAHA,CAIA;;AACA,UAAA,QAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,QAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,cAAA,CAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,gBAAA,CAAA,CAAA,OAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,cAAA,OAAA,CAAA,cAAA,CAAA,CAAA,CAAA,OAAA,CAAA,EAAA,EAAA,GAAA;AACA;AACA;AACA,SANA;AAOA,aAAA,aAAA,GAAA,KAAA;AACA;;AACA,UAAA,QAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,QAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,cAAA,CAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,gBAAA,CAAA,CAAA,OAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,cAAA,OAAA,CAAA,cAAA,CAAA,CAAA,CAAA,OAAA,CAAA,EAAA,EAAA,GAAA;AACA;AACA;AACA,SANA;AAOA,aAAA,aAAA,GAAA,KAAA;AACA;AACA,KAjkDA;AAkkDA,IAAA,cAlkDA,0BAkkDA,MAlkDA,EAkkDA,IAlkDA,EAkkDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,OAAA,CAAA,UAAA,CAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,oBAAA,cAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,0BAAA,IAAA,GAAA,GAAA;AACA,sBAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AACA,0BAAA,EAAA,GAAA,OAAA,CAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AAAA,0BACA,KAAA,GAAA,EAAA,CAAA,KAAA,EADA;;AAEA,sBAAA,OAAA,CAAA,QAAA,CAAA,EAAA,GAAA,aAAA,GAAA,IAAA,CAAA,EAAA,EAAA;AACA,sBAAA,OAAA,CAAA,QAAA,CAAA,IAAA,GAAA,IAAA;;AACA,0BAAA,IAAA,IAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,QAAA,CAAA,WAAA,GAAA,IAAA,CAAA,OAAA,CAAA,eAAA;AACA,uBAFA,MAEA;AACA,wBAAA,OAAA,CAAA,QAAA,CAAA,WAAA,GAAA,IAAA,CAAA,eAAA;AACA;;AACA,sBAAA,EAAA,CAAA,MAAA,CAAA,KAAA,EAAA,OAAA,CAAA,QAAA;AACA,qBAdA;AAeA,mBAjBA,EAiBA,GAjBA,CAAA;AAkBA,iBApBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA,KAxlDA;AAylDA,IAAA,UAzlDA,wBAylDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,aAAA,CAAA,GAAA,CAAA,YAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,wBAAA,OAAA,CAAA,eAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,4BAAA,OAAA,CAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,0BAAA,OAAA,CAAA,SAAA,CAAA,eAAA,GAAA,OAAA,CAAA,eAAA,CAAA,CAAA,CAAA;;AACA,8BAAA,CAAA,OAAA,CAAA,aAAA,EAAA;AACA,4BAAA,OAAA,CAAA,cAAA;AACA;AACA;AACA;AACA,qBAXA;AAYA,mBAdA,EAcA,EAdA,CAAA;AAeA,iBAhBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA,KA3mDA;AA4mDA,IAAA,iBA5mDA,+BA4mDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,CAAA,OAAA,CAAA,aAAA,EAAA;AACA,kBAAA,OAAA,CAAA,MAAA,GAAA,IAAA;AACA,sBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,oBAAA,UAAA,CAAA,YAAA;AACA,sBAAA,OAAA,CAAA,UAAA,CAAA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,sBAAA,gBAAA,CACA,IADA,CACA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,0BAAA,OAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,0BAAA,OAAA,CAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA,OAAA,IAAA,EAAA;;AACA,0BAAA,OAAA,CAAA,QAAA;AACA;AACA,uBATA,EAUA,KAVA;AAWA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,qBAjBA,EAiBA,EAjBA,CAAA;AAkBA,mBAnBA;AAoBA,iBAtBA,MAsBA;AACA,kBAAA,OAAA,CAAA,cAAA;AACA;;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BA,KAtoDA;AAuoDA,IAAA,SAvoDA,uBAuoDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,SAAA,CAAA,QAAA,EAAA;AACA,kBAAA,OAAA,CAAA,OAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,kBAAA,OAAA,CAAA,MAAA,GAAA,EAAA;AACA,sBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,oBAAA,UAAA,CAAA,YAAA;AACA,sBAAA,OAAA,CAAA,UAAA,CAAA;AACA,0BAAA,IAAA,GAAA;AACA,wBAAA,MAAA,EAAA,aADA;AAEA,wBAAA,QAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAAA,CAAA,EAFA;AAGA,wBAAA,SAAA,EAAA,OAAA,CAAA,SAAA,CAAA,OAAA,CAAA,EAHA;AAIA,wBAAA,UAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAAA,CAAA,EAJA;AAKA,wBAAA,YAAA,EAAA,OAAA,CAAA,SAAA,CAAA,UAAA,CAAA,EALA;AAMA,wBAAA,IAAA,EAAA;AANA,uBAAA;AAQA,sBAAA,gBAAA,CAAA,MAAA,CAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,wBAAA,OAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,uBAHA;AAIA,qBAdA,EAcA,EAdA,CAAA;AAeA,mBAhBA;AAiBA;;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA,KA9pDA;AA+pDA,IAAA,QA/pDA,oBA+pDA,IA/pDA,EA+pDA;AAAA;;AACA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,OAAA,IAAA,EAAA;AACA,UAAA,SAAA,GAAA,IAAA,CAAA,SAAA,IAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,EAAA,EAAA,IAAA,CAAA,EAAA,IAAA,EADA;AAEA,QAAA,SAAA,EAAA,IAAA,CAAA,MAAA,IAAA,EAFA;AAGA,QAAA,UAAA,EAAA,OAAA,CAAA,UAAA,IAAA;AAHA,OAAA;;AAKA,UAAA,SAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,eAAA;AACA,QAAA,SAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,UAAA,CAAA,CAAA,UAAA,GAAA,OAAA,CAAA,EAAA;AACA,UAAA,CAAA,CAAA,EAAA,GAAA,aAAA,GAAA,IAAA,CAAA,EAAA,EAAA;;AACA,cAAA,EAAA,GAAA,OAAA,CAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AAAA,cACA,KAAA,GAAA,EAAA,CAAA,KAAA,EADA;;AAEA,UAAA,EAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,SANA,EAFA,CASA;AACA,OAnBA,CAoBA;;;AACA,UAAA,IAAA,CAAA,WAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,IAAA,CAAA,WAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,UAAA,CAAA,CAAA,UAAA,GAAA,OAAA,CAAA,EAAA;;AACA,UAAA,OAAA,CAAA,YAAA,CAAA,IAAA,CAAA,CAAA;AACA,SAHA;AAIA,aAAA,aAAA;AACA,aAAA,mBAAA;AACA,OA5BA,CA6BA;;;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,OAAA;;AACA,UAAA,OAAA,CAAA,IAAA,CAAA,EAAA,KAAA,SAAA,EAAA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,IAAA;AACA,OAjCA,CAkCA;AACA;;;AACA,UAAA,KAAA,GAAA,KAAA,MAAA,CAAA,SAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,IAAA,CAAA,EAAA,KAAA,IAAA,CAAA,EAAA;AACA,OAFA,CAAA;AAGA,WAAA,aAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAxCA,CAyCA;AACA;;AACA,WAAA,SAAA,CAAA,OAAA,GAAA,KAAA,eAAA,CAAA,KAAA,OAAA,CAAA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,KAAA,SAAA,CAAA,OAAA;AACA,KA5sDA;AA6sDA,IAAA,eA7sDA,6BA6sDA;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,wBAAA,EAAA,IAAA,CAAA,WAAA,CAAA;AAAA,UACA,UAAA,GAAA,IAAA,CAAA,UADA;AAEA,MAAA,UAAA,CAAA,IAAA,GAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,CAAA,EAAA;AACA,cAAA,IAAA,GAAA,CAAA,CAAA,IAAA,IAAA,EAAA;;AACA,cAAA,IAAA,CAAA,EAAA,KAAA,SAAA,IAAA,IAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,YAAA,UAAA,CAAA,MAAA,CAAA,CAAA;AACA;AACA;AACA,OAPA;AAQA,KAxtDA;AAytDA,IAAA,mBAztDA,iCAytDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,wBAAA,IAAA,GAAA,IAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,eAAA,EACA,WADA,GAEA,MAFA,CAEA,CAFA,EAEA,EAFA,CAAA;AAGA,wBAAA,UAAA,GAAA,OAAA,CAAA,SAAA,CAAA,UAAA;AACA,wBAAA,IAAA,GAAA,EAAA;;AACA,wBAAA,UAAA,CAAA,cAAA,CAAA,UAAA,CAAA,EAAA;AACA,0BAAA,UAAA,CAAA,QAAA,CAAA,cAAA,CAAA,MAAA,CAAA,EAAA;AACA,wBAAA,IAAA,GAAA,UAAA,CAAA,QAAA,CAAA,IAAA;AACA;AACA;;AACA,wBAAA,IAAA,KAAA,SAAA,IAAA,IAAA,KAAA,EAAA,EAAA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,sBAAA,eAAA,CACA,yBADA,CACA,IADA,EACA,IADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,0BAAA,OAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,0BAAA,OAAA,CAAA,YAAA,GAAA,OAAA,CAAA,YAAA,CAAA,IAAA;AACA,0BAAA,OAAA,CAAA,eAAA,GAAA,OAAA,CAAA,YAAA,CAAA,IAAA;AACA,0BAAA,OAAA,CAAA,SAAA,CAAA,OAAA,GAAA,OAAA,CAAA,YAAA,CAAA,IAAA;AACA,0BAAA,OAAA,CAAA,SAAA,CAAA,YAAA,GAAA,OAAA,CAAA,YAAA;AACA,0BAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,uBAZA;AAaA;AACA,mBA5BA,EA4BA,EA5BA,CAAA;AA6BA,iBA9BA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgCA,KAzvDA;AA0vDA,IAAA,KA1vDA,mBA0vDA;AACA,WAAA,EAAA,GAAA,SAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,cAAA;AACA,KAhwDA;AAiwDA,IAAA,SAjwDA,uBAiwDA;AAAA;;AACA,UAAA,EAAA,GAAA,EAAA;;AACA,UAAA,KAAA,QAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,QAAA,EAAA,GAAA,KAAA,QAAA,CAAA,EAAA,IAAA,EAAA;AACA;;AACA,UAAA,EAAA,KAAA,EAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,qBAAA;AACA;AACA;;AACA,UAAA,EAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AACA,UAAA,EAAA,GAAA,EAAA,CAAA,IAAA,GAAA,MAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,MAAA,GAAA,CAAA;AAAA,OAAA,CAAA;AACA,UAAA,YAAA,GAAA,CAAA;AACA,MAAA,EAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,SAAA,IAAA,KAAA,CAAA,GAAA,CAAA,EAAA,IAAA,SAAA,EAAA;AACA,UAAA,OAAA,CAAA,QAAA,CAAA,KAAA,CACA,uCAAA,KAAA,GAAA,CAAA,CADA;AAGA,SAJA,MAIA;AACA,UAAA,YAAA,IAAA,CAAA;AACA;AACA,OARA;;AASA,UAAA,EAAA,CAAA,MAAA,IAAA,YAAA,EAAA;AACA,aAAA,WAAA,GAAA,IAAA;AACA,aAAA,UAAA,GAAA,WAAA;AACA,aAAA,IAAA;AACA;AACA,KA3xDA;AA4xDA,IAAA,SA5xDA,uBA4xDA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,WAAA,UAAA,GAAA,WAAA;AACA,WAAA,IAAA;AACA,KAhyDA;AAiyDA,IAAA,OAjyDA,qBAiyDA;AACA,WAAA,UAAA,GAAA,SAAA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,WAAA,IAAA;AACA,KAryDA;AAsyDA,IAAA,MAtyDA,oBAsyDA;AAAA;;AACA,WAAA,KAAA,CAAA;AACA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,mBAAA,CADA;AAEA,QAAA,IAAA,EAAA,IAAA,CAAA,CAAA,CAAA,aAAA,CAFA;AAGA,QAAA,IAAA,EAAA,SAHA;AAIA,QAAA,gBAAA,EAAA,IAJA;AAKA,QAAA,gBAAA,EAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CALA;AAMA,QAAA,kBAAA,EAAA,SANA;AAOA,QAAA,iBAAA,EAAA,SAPA;AAQA,QAAA,iBAAA,EAAA,IAAA,CAAA,CAAA,CAAA,SAAA;AARA,OAAA,EASA,IATA,CASA,UAAA,SAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,SAAA;;AACA,YAAA,SAAA,CAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;AACA,OAdA;AAeA,KAtzDA;AAuzDA,IAAA,SAvzDA,uBAuzDA;AACA,WAAA,UAAA,GAAA,WAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,WAAA,IAAA;AACA,KA3zDA;AA4zDA,IAAA,IA5zDA,kBA4zDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,OAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,EADA;AAAA;AAAA;AAAA;;AAEA,gBAAA,OAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA;;AAFA;;AAAA;AAKA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;;AACA,oBAAA,OAAA,CAAA,eAAA;;AACA,wBAAA,UAAA,GAAA,OAAA,CAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AAAA,wBACA,KAAA,GAAA,UAAA,CAAA,KAAA,EADA;;AAEA,wBAAA,QAAA,GAAA,UAAA,CAAA,IAAA,GAAA,MAAA,CAAA,UAAA,CAAA;AAAA,6BAAA,CAAA,CAAA,MAAA,GAAA,CAAA;AAAA,qBAAA,EAAA,GAAA,CAAA,UAAA,CAAA,EAAA;AACA,6BAAA,IAAA,aAAA,CAAA,CAAA,CAAA;AACA,qBAFA,CAAA;;AAIA,wBAAA,KAAA,IAAA,CAAA,EAAA;AACA,sBAAA,OAAA,CAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;;AACA;AACA;;AACA,wBAAA,CAAA,OAAA,CAAA,iBAAA,EAAA;AACA,sBAAA,OAAA,CAAA,SAAA,CAAA,QAAA,GAAA,EAAA;AACA,qBAFA,MAEA;AACA;AACA,sBAAA,OAAA,CAAA,aAAA,GAAA,CAAA;AACA,qBAlBA,CAmBA;AACA;;;AACA,wBAAA,IAAA,GAAA;AACA,sBAAA,EAAA,EAAA,OAAA,CAAA,SAAA,CAAA,EAAA,GAAA,OAAA,CAAA,SAAA,CAAA,EAAA,GAAA,EADA;AAEA,sBAAA,IAAA,EAAA,YAFA;AAGA,sBAAA,eAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eAHA;AAIA,sBAAA,MAAA,EAAA,OAAA,CAAA,SAAA,CAAA,MAJA;AAKA,sBAAA,IAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eAAA,CAAA,IALA;AAMA,sBAAA,eAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eANA;AAOA,sBAAA,iBAAA,EAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CAAA,SAAA,CAAA,eAAA,CAPA;AAQA,sBAAA,YAAA,EAAA,OAAA,CAAA,SAAA,CAAA,YARA;AASA,sBAAA,OAAA,EAAA,OAAA,CAAA,SAAA,CAAA,OATA;AAUA,sBAAA,QAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAVA;AAWA,sBAAA,WAAA,EAAA,OAAA,CAAA,SAAA,CAAA,WAXA;AAYA,sBAAA,iBAAA,EAAA,EAZA;AAaA,sBAAA,UAAA,EAAA,OAAA,CAAA,SAAA,CAAA,UAbA;AAcA,sBAAA,SAAA,EAAA,QAdA;AAeA,sBAAA,OAAA,EAAA,OAAA,CAAA,SAAA,CAAA,OAfA;AAgBA,sBAAA,QAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAhBA;AAiBA,sBAAA,OAAA,EAAA,OAAA,CAAA,SAAA,CAAA,OAjBA;AAkBA,sBAAA,WAAA,EAAA,OAAA,CAAA,SAAA,CAAA,WAlBA;AAmBA,sBAAA,cAAA,EAAA,OAAA,CAAA,SAAA,CAAA,cAnBA;AAoBA,sBAAA,eAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eApBA;AAqBA,sBAAA,gBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,gBArBA;AAsBA,sBAAA,eAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eAtBA;AAuBA,sBAAA,QAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAvBA;AAwBA,sBAAA,KAAA,EAAA,OAAA,CAAA,SAAA,CAAA,KAxBA;AAyBA,sBAAA,MAAA,EAAA,OAAA,CAAA,SAAA,CAAA,MAzBA;AA0BA,sBAAA,aAAA,EAAA,OAAA,CAAA,SAAA,CAAA,aA1BA;AA2BA,sBAAA,qBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,qBA3BA;AA4BA,sBAAA,WAAA,EAAA,OAAA,CAAA,SAAA,CAAA,WA5BA;AA6BA,sBAAA,cAAA,EAAA,OAAA,CAAA,SAAA,CAAA,cA7BA;AA8BA,sBAAA,cAAA,EAAA,OAAA,CAAA,SAAA,CAAA,cA9BA;AA+BA,sBAAA,WAAA,EAAA,OAAA,CAAA,SAAA,CAAA,WA/BA;AAgCA,sBAAA,UAAA,EAAA,OAAA,CAAA,UAhCA;AAiCA,sBAAA,OAAA,EAAA,OAAA,CAAA,SAAA,CAAA,OAjCA;AAkCA,sBAAA,IAAA,EAAA,CAlCA;AAmCA,sBAAA,YAAA,EAAA,OAAA,CAAA,SAAA,CAAA,YAnCA;AAoCA,sBAAA,cAAA,EAAA,OAAA,CAAA,SAAA,CAAA,cApCA;AAqCA,sBAAA,MAAA,EAAA,CArCA;AAsCA,sBAAA,UAAA,EAAA,OAAA,CAAA,SAAA,CAAA,UAtCA;AAuCA,sBAAA,YAAA,EAAA,EAvCA;AAwCA,sBAAA,oBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,oBAxCA;AAyCA,sBAAA,WAAA,EAAA,OAAA,CAAA,YAzCA;AA0CA,sBAAA,iBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,iBA1CA;AA2CA,sBAAA,UAAA,EAAA,EA3CA;AA4CA,sBAAA,YAAA,EAAA,OAAA,CAAA,YA5CA;AA6CA,sBAAA,oBAAA,EAAA,OAAA,CAAA,oBA7CA;AA8CA,sBAAA,gBAAA,EAAA,OAAA,CAAA,gBA9CA;AA+CA,sBAAA,UAAA,EAAA,OAAA,CAAA,UA/CA;AAgDA,sBAAA,OAAA,EAAA,OAAA,CAAA,QAhDA;AAiDA,sBAAA,aAAA,EAAA,OAAA,CAAA,SAAA,CAAA,aAjDA;AAkDA,sBAAA,QAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAlDA;AAmDA,sBAAA,QAAA,EAAA,OAAA,CAAA,SAAA,CAAA,QAnDA;AAoDA,sBAAA,YAAA,EAAA,OAAA,CAAA,SAAA,CAAA,YApDA;AAqDA,sBAAA,oBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,oBArDA;AAsDA,sBAAA,eAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eAtDA;AAuDA,sBAAA,uBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,uBAvDA;AAwDA,sBAAA,cAAA,EAAA,OAAA,CAAA,SAAA,CAAA,cAxDA;AAyDA,sBAAA,sBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,sBAzDA;AA0DA,sBAAA,YAAA,EAAA,OAAA,CAAA,SAAA,CAAA,YA1DA;AA2DA,sBAAA,oBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,oBA3DA;AA4DA,sBAAA,eAAA,EAAA,OAAA,CAAA,SAAA,CAAA,eA5DA;AA6DA,sBAAA,uBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,uBA7DA;AA8DA,sBAAA,cAAA,EAAA,OAAA,CAAA,SAAA,CAAA,cA9DA;AA+DA,sBAAA,sBAAA,EAAA,OAAA,CAAA,SAAA,CAAA,sBA/DA;AAgEA,sBAAA,IAAA,EAAA,EAhEA;AAiEA,sBAAA,SAAA,EAAA,iBAjEA;AAkEA,sBAAA,aAAA,EAAA,EAlEA;AAmEA,sBAAA,UAAA,EAAA,EAnEA;AAoEA,sBAAA,SAAA,EAAA,EApEA;AAqEA,sBAAA,OAAA,EAAA,CArEA;AAsEA,sBAAA,OAAA,EAAA,OAAA,CAAA,SAAA,CAAA,OAAA,IAAA,EAtEA;AAuEA,sBAAA,KAAA,EAAA,OAAA,CAAA,SAAA,CAAA,KAAA,IAAA,EAvEA;AAwEA,sBAAA,SAAA,EAAA,IAAA,IAAA,GAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,EAAA;AAxEA,qBAAA,CArBA,CA+FA;AACA;;AACA,oBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,oBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,oBAAA,gBAAA,CACA,MADA,CACA,IADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;;AACA,0BAAA,QAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;;AACA,4BAAA,OAAA,CAAA,SAAA,IAAA,IAAA,EAAA;AACA,0BAAA,OAAA,CAAA,cAAA;AACA,yBAFA,MAEA;AACA,0BAAA,OAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,yBANA,CAOA;;;AACA,wBAAA,OAAA,CAAA,QAAA,CAAA,OAAA,CAAA,cAAA;AACA,uBATA,MASA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,qBAjBA,EAkBA,KAlBA,CAkBA,UAAA,CAAA,EAAA;AACA,sBAAA,OAAA,CAAA,QAAA,CAAA,KAAA,CAAA,sBAAA;;AACA,sBAAA,OAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA;;AACA,sBAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,qBAtBA;AAuBA,mBA1HA,EA0HA,EA1HA,CAAA;AA2HA,iBA5HA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkIA,KA97DA;AA+7DA,IAAA,mBA/7DA,iCA+7DA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;;AACA,wBAAA,OAAA,CAAA,QAAA,EAAA;AACA,0BAAA,SAAA,GACA,SACA,OAAA,CAAA,QAAA,CAAA,EADA,GAEA,mBAFA,GAGA,OAAA,CAAA,SAAA,CAAA,eAHA,GAIA,gBALA;AAMA,sBAAA,OAAA,CAAA,SAAA,CAAA,WAAA,GAAA,EAAA;AACA,sBAAA,mBAAA,CAAA,GAAA,CAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,8BAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,0BAAA,OAAA,CAAA,SAAA,CAAA,WAAA,GAAA,KAAA,CAAA,IAAA;AACA;AACA,uBALA;AAMA;AACA,mBAjBA,EAiBA,EAjBA,CAAA;AAkBA,iBAnBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA,KAp9DA;AAq9DA,IAAA,eAr9DA,6BAq9DA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;;AACA,wBAAA,OAAA,CAAA,QAAA,EAAA;AACA,0BAAA,SAAA,GACA,SACA,OAAA,CAAA,QAAA,CAAA,EADA,GAEA,mBAFA,GAGA,OAAA,CAAA,SAAA,CAAA,eAHA,GAIA,gBALA;AAMA,sBAAA,OAAA,CAAA,SAAA,CAAA,WAAA,GAAA,CAAA;AACA,sBAAA,kBAAA,CAAA,GAAA,CAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,4BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA;AACA,8BAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,0BAAA,OAAA,CAAA,SAAA,CAAA,WAAA,GAAA,KAAA,CAAA,UAAA,CACA,MAAA,CAAA,MAAA,IAAA,CADA,CAAA;AAGA;AACA,uBARA;AASA;AACA,mBApBA,EAoBA,EApBA,CAAA;AAqBA,iBAtBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA,KA7+DA;AA8+DA,IAAA,YA9+DA,0BA8+DA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,EADA,GACA,OAAA,CAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EADA;AAEA,gBAAA,EAAA,CAAA,IAAA,GAAA,GAAA,CAAA,UAAA,CAAA,EAAA;AACA,kBAAA,CAAA,CAAA,GAAA,CAAA,KAAA,EAAA,EAAA;AACA,iBAFA;AAGA,gBAAA,OAAA,CAAA,mBAAA,GAAA,KAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,KAp/DA;AAq/DA,IAAA,kBAr/DA,gCAq/DA;AACA,WAAA,mBAAA,GAAA,IAAA;AACA,WAAA,mBAAA;AACA,WAAA,YAAA;AACA,WAAA,SAAA;AACA,KA1/DA;AA2/DA,IAAA,aA3/DA,yBA2/DA,EA3/DA,EA2/DA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,EAAA,EAAA,SAAA;AACA,gBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,gBAAA,kBAAA,CAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,kBAAA,OAAA,CAAA,MAAA,GAAA,IAAA;AACA,kBAAA,OAAA,CAAA,SAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA;;AACA,kBAAA,OAAA,CAAA,QAAA;AACA,iBANA;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,KArgEA;AAsgEA,IAAA,kBAtgEA,gCAsgEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,OAAA,CAAA,UAAA,CAAA;AACA,oBAAA,OAAA,CAAA,SAAA,GAAA,EAAA;AACA,oBAAA,eAAA,CACA,MADA,CACA,SADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,sBAAA,OAAA,CAAA,SAAA,CAAA,QAAA,GAAA,EAAA;AACA,sBAAA,OAAA,CAAA,SAAA,GAAA,EAAA;;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,wBAAA,OAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAFA,CAGA;AACA;AACA;AACA,uBANA,MAMA;AACA,wBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,qBAfA,EAgBA,KAhBA;AAiBA;AACA,sBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA;AACA,mBAvBA,EAuBA,EAvBA,CAAA;AAwBA,iBAzBA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA,KAjiEA;AAkiEA,IAAA,cAliEA,4BAkiEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,OAAA,CAAA,MAAA,CAAA,IAAA,KAAA,YADA;AAAA;AAAA;AAAA;;AAEA,oBAAA,OAAA,CAAA,aAAA,EAAA;AACA;AACA,kBAAA,OAAA,CAAA,SAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,SAAA,GAAA,OAAA,CAAA,aAAA;;AACA,kBAAA,OAAA,CAAA,QAAA;AACA,iBALA,MAKA;AACA;AACA,sBAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,IAAA,SAAA,EAAA;AACA,oBAAA,OAAA,CAAA,aAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,mBAFA,MAEA;AACA,oBAAA,OAAA,CAAA,cAAA;AACA;AACA;;AACA,gBAAA,aAAA,CAAA,GAAA,CAAA,YAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,IAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,oBAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,oBAAA,OAAA,CAAA,eAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,wBAAA,OAAA,CAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,0BACA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,IACA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,IAAA,EAFA,EAGA;AACA,wBAAA,OAAA,CAAA,SAAA,CAAA,eAAA,GAAA,OAAA,CAAA,eAAA,CAAA,CAAA,CAAA;;AACA,4BAAA,CAAA,OAAA,CAAA,aAAA,IAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,KAAA,SAAA,EAAA;AACA,0BAAA,OAAA,CAAA,cAAA;AACA;AACA;AACA;AACA;AACA,iBAhBA;AAfA;AAAA,uBAgCA,OAAA,CAAA,eAAA,EAhCA;;AAAA;AAAA;AAAA,uBAiCA,OAAA,CAAA,mBAAA,EAjCA;;AAAA;AAAA;AAAA,uBAkCA,OAAA,CAAA,eAAA,EAlCA;;AAAA;AAAA;AAAA,uBAmCA,OAAA,CAAA,cAAA,EAnCA;;AAAA;AAAA;AAAA,uBAoCA,OAAA,CAAA,gBAAA,CAAA,CAAA,CApCA;;AAAA;AAAA;AAAA,uBAqCA,OAAA,CAAA,eAAA,EArCA;;AAAA;AAAA;AAAA,uBAsCA,OAAA,CAAA,YAAA,EAtCA;;AAAA;AAAA;AAAA,uBAuCA,OAAA,CAAA,QAAA,EAvCA;;AAAA;AAwCA,gBAAA,OAAA,CAAA,OAAA;;AACA,gBAAA,OAAA,CAAA,iBAAA;;AACA,gBAAA,OAAA,CAAA,WAAA;;AACA,gBAAA,OAAA,CAAA,YAAA;;AACA,gBAAA,OAAA,CAAA,kBAAA;;AA5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8CA;AAhlEA,GArIA;AAutEA,EAAA,SAvtEA,uBAutEA;AACA,QAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,WAAA,iBAAA;AACA;AACA,GA3tEA;AA4tEA,EAAA,KAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,WAAA,WAAA;AACA,KAHA;AAIA,cAAA;AAJA,GA5tEA;AAkuEA,EAAA,OAluEA,qBAkuEA;AACA,SAAA,OAAA;AACA,SAAA,iBAAA,GAFA,CAGA;;AACA,SAAA,WAAA;AACA,SAAA,YAAA,GALA,CAMA;AACA,GAzuEA;AA0uEA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,SAAA,CAAA,WAAA;AACA,KAHA;AAIA,IAAA,aAJA,2BAIA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IAAA,EAAA,EAAA,SAAA,CAAA,UAAA,CAAA;AACA,KANA;AAOA,IAAA,iBAPA,+BAOA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,SAAA,CAAA,UAAA,GAAA,QAAA,EAAA,WAAA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IAAA,EAAA,EAAA,SAAA,CAAA,UAAA,GAAA,QAAA,CAAA;AACA,KAVA;AAWA,IAAA,aAXA,2BAWA;AACA,aAAA,KAAA,QAAA,CAAA,EAAA,KAAA,SAAA,IAAA,KAAA,QAAA,CAAA,EAAA,KAAA,IAAA;AACA,KAbA;AAcA,IAAA,YAdA,0BAcA;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA;AACA,eAAA,KAAA;AACA;AACA,KApBA;AAqBA,IAAA,UArBA,wBAqBA;AACA,aAAA,CAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA;AAvBA,GA1uEA;AAmwEA,EAAA,OAAA;AAAA,2EAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAA,cAAA;AADA;AAAA,qBAEA,KAAA,WAAA,CAAA,CAAA,EAAA,KAAA,MAAA,EAAA,KAAA,UAAA,CAFA;;AAAA;AAAA;AAAA,qBAGA,KAAA,mBAAA,CAAA,CAAA,EAAA,KAAA,MAAA,EAAA,KAAA,UAAA,CAHA;;AAAA;AAAA;AAAA,qBAIA,KAAA,mBAAA,CAAA,CAAA,EAAA,KAAA,MAAA,EAAA,KAAA,UAAA,CAJA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAnwEA,CAAA","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col sm=\"12\" cols=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border rounded-sm\"\n                        color=\"white\">\n                        <v-row>\n                            <v-col\n                                class=\"bigSide py-0 pr-2\"\n                                sm=\"8\"\n                                cols=\"12\"\n                                style=\"transition: .3s ease-in;\"\n                                :class=\"{ hide_big_bar_class: isHideBar }\">\n                                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                                    <v-card outlined dense class=\"no_border\">\n                                        <h2 class=\"mb-0\"><span v-if=\"appType != 'npo'\">{{\n                                                saleFormContent.saleOrder\n                                            }}</span> <span v-else> {{ $t('contract') }}</span></h2>\n\n                                        <v-icon v-if=\"isHideBar\" @click=\"cancel()\"\n                                                style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                                class=\"float-right\">close\n                                        </v-icon>\n                                        <span style=\"transition: .3s ease-in; z-index:10;\"\n                                              :class=\"{iconArrow: !isHideBar, iconArrowHide: isHideBar}\">\n                                            <v-icon size=\"22\" class=\"arr_icon\" @click=\"hide_smallsitebar\"\n                                                    v-if=\"isHideBar\">mdi-chevron-left-circle</v-icon>\n                                            <v-icon size=\"22\" class=\"arr_icon\" @click=\"hide_smallsitebar\"\n                                                    v-if=\"!isHideBar\">mdi-chevron-right-circle</v-icon>\n                                        </span>\n                                    </v-card>\n                                    <v-card\n                                        outlined\n                                        dense\n                                        class=\"px-3 mb-3 rounded-4 no_border\"\n                                        color=\"grayBg\">\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0 pa-4\">\n                                                <label v-if=\"appType == 'npo' \" class=\"label  mb-0\">{{\n                                                        $t(\"donor\")\n                                                    }}</label>\n                                                <label v-else class=\"label  mb-0\">{{ $t(\"customer\") }}</label>\n                                                <div class=\"kendo_dropdown_custom pb-2 mt-1\">\n                                                    <dropdownlist\n                                                        class=\"v-input__slot\"\n                                                        :data-items=\"customerList\"\n                                                        @change=\"onChange\"\n                                                        :rules=\"[(v) => !!v || 'Customer is required']\"\n                                                        :value=\"customer\"\n                                                        :data-item-key=\"dataItemKey\"\n                                                        :text-field=\"textField\"\n                                                        :default-item=\"defaultItem\"\n                                                        :filterable=\"true\"\n                                                        @filterchange=\"onFilterChange\"\n                                                        :required=\"true\"\n                                                        :valid=\"validCustomer\"\n                                                        :disabled=\"isEdit\">\n                                                    </dropdownlist>\n                                                </div>\n                                                <label class=\"label\" style=\"\">{{ $t(\"date\") }}</label>\n                                                <app-datepicker\n                                                    :initialDate=\"saleOrder.transactionDate\"\n                                                    @onChanged=\"onSaleOrderDateChanged\"\n                                                    @emitDate=\"saleOrder.transactionDate = $event\"/>\n                                                <label class=\"label\">{{ $t(\"number\") }}</label>\n                                                <v-row class=\"mt-1 mr-0\">\n                                                    <v-col sm=\"3\" cols=\"3\" class=\"py-0 pr-0\">\n                                                        <div class=\"code_text text-bold\">\n                                                            {{ saleOrder.transactionType.abbr }}\n                                                        </div>\n                                                    </v-col>\n                                                    <v-col sm=\"7\" cols=\"7\" class=\"py-0 pl-0 pr-1\">\n                                                        <v-text-field\n                                                            class=\" custom-border \"\n                                                            disabled\n                                                            v-model=\"saleOrder.number\"\n                                                            outlined\n                                                            :rules=\"[(v) => !!v || 'Number is required']\"\n                                                            required/>\n                                                    </v-col>\n                                                    <v-col sm=\"2\" cols=\"2\" class=\"py-0 px-0\">\n                                                        <v-icon color=\"black\"\n                                                                size=\"30\"\n                                                                class=\"border_qrcode\"\n                                                                :disabled=\"disabledMe\"\n                                                                @click=\"generateNumber\">mdi-qrcode\n                                                        </v-icon>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-col>\n                                            <v-col sm=\"8\" cols=\"12\" class=\"pa-4\">\n                                                <v-row v-if=\"appType != 'npo'\" class=\"mt-0\">\n                                                    <v-col sm=\"6\" cols=\"12\" class=\"pt-0 pb-5\">\n                                                        <p class=\"mb-1 d-block\">\n                                                            {{ $t(\"current_balance\") }}\n                                                        </p>\n                                                        <h3 class=\"primary--text float-right\">\n                                                            {{ numberFormat(saleOrder.currentBalance) }}\n                                                        </h3>\n                                                    </v-col>\n                                                    <v-col sm=\"6\" cols=\"12\" class=\"pl-0 pt-0 pb-5\">\n                                                        <p class=\"mb-1 d-block\">\n                                                            {{ $t(\"credit_limit_allowed\") }}\n                                                        </p>\n                                                        <h3 class=\"primary--text float-left\">\n                                                            {{\n                                                                creditLimitUsage(saleOrder.currentBalance, saleOrder.creditLimit)\n                                                            }}\n                                                        </h3>\n                                                        <h3 class=\"primary--text float-right\">\n                                                            {{ numberFormat(saleOrder.creditLimit) }}\n                                                        </h3>\n                                                    </v-col>\n                                                </v-row>\n                                                <v-row class=\"mr-0\">\n                                                    <v-col class=\"pb-0 pt-0\" sm=\"6\" cols=\"12\">\n                                                        <label class=\"label\">{{ $t(\"term\") }}</label>\n                                                        <v-select\n                                                            class=\"mt-1\"\n                                                            v-model=\"saleOrder.paymentTerm\"\n                                                            :items=\"paymentTerms\"\n                                                            @change=\"onPaymentTermChanged\"\n                                                            placeholder=\"Term\"\n                                                            item-text=\"name\"\n                                                            item-value=\"id\"\n                                                            return-object\n                                                            outlined/>\n                                                        <div v-if=\"appType === 'npo' || appType  ===  'Public Sectors' \">\n                                                            <label class=\"label\">{{ $t(\"contract\") }}</label>\n                                                            <v-select\n                                                                class=\"mt-1\"\n                                                                :items=\"saleOrderTypes\"\n                                                                v-model=\"saleOrder.saleOrderType\"\n                                                                item-text=\"name\"\n                                                                item-value=\"id\"\n                                                                return-object\n                                                            outlined/>\n                                                        </div>\n                                                    </v-col>\n                                                    <v-col class=\"pb-0 pr-0 pt-0\" sm=\"6\" cols=\"12\">\n                                                        <label class=\"label mb-0\">{{ $t(\"price_level\") }}</label>\n                                                        <v-select\n                                                            class=\"mt-1\"\n                                                            v-model=\"saleOrder.priceLevel\"\n                                                            :items=\"priceLevel\"\n                                                            :rules=\"[(v) => !!v['id'] || 'Price level is required']\"\n                                                            @change=\"onPriceLevelChange\"\n                                                            item-value=\"id\"\n                                                            item-text=\"name\"\n                                                            return-object\n                                                            placeholder=\"Price Level\"\n                                                            tage=\"Price Level\"\n                                                            outlined/>\n                                                 \n                                                    </v-col>\n                                                    <v-col\n                                                        sm=\"6\"\n                                                        col=\"6\"\n                                                        class=\" py-0 d-flex justify-space-between\">\n                                                        <div>\n                                                            <p class=\"label mb-0\">{{ $t(\"currency\") }}</p>\n                                                            <p class=\"label mb-0 pt-4 pb-3\">{{ currencyCode }}</p>\n                                                        </div>\n                                                        <div>\n                                                            <p class=\"label mb-0\">{{ $t(\"rate\") }}</p>\n                                                            <p class=\"label mb-0 pt-4 pb-3\">{{ transactionRate }}</p>\n                                                        </div>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-col>\n                                        </v-row>\n                                    </v-card>\n                                    <v-row class=\"pt-1 px-3\" style=\"background-color: #fff;\">\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-0 pb-1 px-0\">\n                                            <kendo-datasource\n                                                ref=\"itemLineDS\"\n                                                :data=\"itemLines\"\n                                                :change=\"dataSourceChanged\"/>\n                                            <kendo-grid\n                                                id=\"gridItemLineSaleOrder\"\n                                                class=\"grid-function\"\n                                                :data-source-ref=\"'itemLineDS'\"\n                                                :sortable=\"false\"\n                                                :column-menu=\"true\"\n                                                :editable=\"true\"\n                                                :scrollable-virtual=\"true\">\n                                                <kendo-grid-column\n                                                    :command=\"{iconClass: 'k-icon k-i-trash', text: ' ', click: removeRow, className: 'btn-plus'}\"\n                                                    :title=\"''\"\n                                                    :width=\"63\"\n                                                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                                                <kendo-grid-column\n                                                    :title=\"$t('no.')\"\n                                                    :width=\"53\"\n                                                    :column-menu=\"false\"\n                                                    :template=\"rowNumberTmpl\"\n                                                    :headerAttributes=\"{style: 'background-color: #EDF1F5;', class: 'text-products'}\"\n                                                    :attributes=\"{style: 'text-align: products'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'item'\"\n                                                    :title=\"$t('item')\"\n                                                    :template=\"itemTemplate\"\n                                                    :editor=\"ItemDropDownEditor\"\n                                                    :width=\"200\"\n                                                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'description'\"\n                                                    :title=\"$t('description')\"\n                                                    :template=\"'<span>#=description#</span>'\"\n                                                    :width=\"200\"\n                                                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'uom'\"\n                                                    :title=\"$t('uom')\"\n                                                    :width=\"100\"\n                                                    :template=\"UOMTemplate\"\n                                                    :editor=\"UOMDropDownEditor\"\n                                                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{style: 'text-align: left'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'qty'\"\n                                                    :title=\"$t('qty')\"\n                                                    :format=\"'{0:n}'\"\n                                                    :template=\"'<span>#=qty#</span>'\"\n                                                    :width=\"100\"\n                                                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{ style: 'text-align: left;'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'price'\"\n                                                    :title=\"$t('price')\"\n                                                    :width=\"150\"\n                                                    :template=\"priceFormat\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{style: 'text-align: left'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'amount'\"\n                                                    :title=\"$t('amount')\"\n                                                    :width=\"150\"\n                                                    :editable=\"() => {return false}\"\n                                                    :template=\"amountFormat\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{style: 'text-align: left'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'vatTax'\"\n                                                    :title=\"$t('vat')\"\n                                                    :width=\"200\"\n                                                    :template=\"vatTemplate\"\n                                                    :hidden=\"appType !='npo' ? false: true\"\n                                                    :editor=\"VatTaxDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'serviceDate'\"\n                                                    :title=\"$t('date_from')\"\n                                                    :width=\"160\"\n                                                    :hidden=\"!saleFormContent.serviceDate\"\n                                                    :template=\"'<span>#= kendo.toString(new Date(serviceDate), dateFormat)#</span>'\"\n                                                    :editor=\"ServiceDateEditor\"\n                                                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'serviceDateTo'\"\n                                                    :title=\"$t('date_to')\"\n                                                    :width=\"160\"\n                                                    :hidden=\"!saleFormContent.serviceDateTo\"\n                                                    :template=\"'<span>#= kendo.toString(new Date(serviceDateTo), dateFormat)#</span>'\"\n                                                    :editor=\"ServiceDateToEditor\"\n                                                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'modifier'\"\n                                                    :title=\"$t('modifier')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.modifier\"\n                                                    :template=\"'<span>#=modifier.name?modifier.name:``#</span>'\"\n                                                    :editor=\"ModifierDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5',}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'discountItem'\"\n                                                    :title=\"$t('discount_item')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.discountItem\"\n                                                    :template=\"discountItemTemplate\"\n                                                    :editor=\"DiscountItemDropDownEditor\"\n                                                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5',}\"\n                                                    :attributes=\"{style: 'text-align: left'}\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'specificTax'\"\n                                                    :title=\"$t('specificTax')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.specificTax\"\n                                                    :template=\"'<span>#=specificTax.defaultTax?specificTax.defaultTax:``#</span>'\"\n                                                    :editor=\"SpecificTaxDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'otherTax'\"\n                                                    :title=\"$t('otherTax')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.otherTax\"\n                                                    :template=\"'<span>#=otherTax.defaultTax?otherTax.defaultTax:``#</span>'\"\n                                                    :editor=\"OtherTaxDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5',}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'publicLightingTax'\"\n                                                    :title=\"$t('pl_tax')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.publicLightingTax\"\n                                                    :template=\"'<span>#=publicLightingTax.defaultTax?publicLightingTax.defaultTax:``#</span>'\"\n                                                    :editor=\"PublicLightingTaxDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5',}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'saleUnit'\"\n                                                    :title=\"$t('sale_unit')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.saleUnit\"\n                                                    :template=\"saleUnitTemplate\"\n                                                    :editor=\"SaleUnitDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'employee'\"\n                                                    :title=\"$t('employee')\"\n                                                    :width=\"200\"\n                                                    :hidden=\"!saleFormContent.employee\"\n                                                    :template=\"empImpl\"\n                                                    :editor=\"EmployeeDropDownEditor\"\n                                                    :headerAttributes=\"{style:'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{ style: 'text-align: left' }\"/>\n                                            </kendo-grid>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-0 pl-0\">\n                                            <v-btn\n                                                class=\"float-left btn_plus\"\n                                                @click=\"addRow\">\n                                                <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                                            </v-btn>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                            <v-row>\n                                                <v-row>\n                                                    <v-col class=\"pt-0\" sm=\"5\" cols=\"6\">\n                                                        <v-card\n                                                            class=\"no-boxshadow rounded-4 pa-3\"\n                                                            color=\"grayBg\">\n                                                            <v-row>\n                                                                <v-col class=\"py-0 px-4\" sm=\"12\" cols=\"12\">\n                                                                    <label\n                                                                        class=\"label mb-0\">{{\n                                                                            $t(\"billing_address\")\n                                                                        }}</label>\n                                                                    <v-select\n                                                                        class=\"mt-1\"\n                                                                        v-model=\"saleOrder.billingAddress\"\n                                                                        :items=\"billingAddress\"\n                                                                        item-value=\"id\"\n                                                                        item-text=\"name\"\n                                                                        placeholder=\"Address\"\n                                                                        outlined/>\n                                                                    <label\n                                                                        class=\"label mb-0\">{{\n                                                                            $t(\"pickup_delivery_address\")\n                                                                        }}</label>\n                                                                    <v-select\n                                                                        class=\"mt-1\"\n                                                                        v-model=\"saleOrder.deliveryAddress\"\n                                                                        :items=\"deliveryAddress\"\n                                                                        item-value=\"id\"\n                                                                        item-text=\"name\"\n                                                                        placeholder=\"Address\"\n                                                                        outlined/>\n                                                                    <!--                                                                    <label class=\"label  mb-0\">{{-->\n                                                                    <!--                                                                            $t(\"pickup_delivery_date_time\")-->\n                                                                    <!--                                                                        }}</label>-->\n                                                                    <!--                                                                    <v-datetime-picker-->\n                                                                    <!--                                                                        outlined-->\n                                                                    <!--                                                                        class=\"mt-1 py-0 date_time\"-->\n                                                                    <!--                                                                        :date-format=\"dateFormatted\"-->\n                                                                    <!--                                                                        v-model=\"saleOrder.deliveryDateTime\"-->\n                                                                    <!--                                                                    >-->\n                                                                    <!--                                                                    </v-datetime-picker>-->\n                                                                    <label v-if=\"appType != 'npo' \">{{\n                                                                            $t(\"message_on_sale_order\")\n                                                                        }}</label>\n                                                                    <label v-else>{{\n                                                                            $t(\"message_on_contract\")\n                                                                        }}</label>\n                                                                    <v-textarea\n                                                                        class=\"mt-1\"\n                                                                        v-model=\"saleOrder.transactionNote\"\n                                                                        outlined\n                                                                        no-resize\n                                                                        height=\"70px\"\n                                                                        placeholder=\"\"/>\n                                                                </v-col>\n                                                            </v-row>\n                                                        </v-card>\n                                                    </v-col>\n                                                    <v-col class=\"pt-0\" sm=\"7\" cols=\"6\">\n                                                        <v-simple-table>\n                                                            <template v-slot:default>\n                                                                <tbody>\n                                                                <tr v-if=\"appType != 'npo'\">\n                                                                    <td class=\"text-left pr-0\">{{ $t(\"subtotal\") }}</td>\n                                                                    <td class=\"text-center\">:</td>\n                                                                    <td class=\"text-right\">\n                                                                        {{ numberFormat(saleOrder.subTotal) }}\n                                                                    </td>\n                                                                </tr>\n                                                                <tr v-if=\"appType != 'npo' \">\n                                                                    <td class=\"text-left pr-0\">{{\n                                                                            $t(\"general_discount\")\n                                                                        }}\n                                                                    </td>\n                                                                    <td class=\"text-center\">:</td>\n                                                                    <td class=\"text-right\">\n                                                                        ({{ numberFormat(saleOrder.discountTotal) }})\n                                                                    </td>\n                                                                </tr>\n                                                                <tr v-if=\"appType != 'npo' \">\n                                                                    <td class=\"text-left pr-0\">{{ $t(\"total_tax\") }}\n                                                                        <v-btn @click=\"dialogTax = true\"\n                                                                               color=\"grayBg\"\n                                                                               outlined\n                                                                               class=\"black--text text-bold float-right text-uppercase\"\n                                                                               style=\"height: 30px !important;\">\n                                                                            {{ $t(\"tax\") }}\n                                                                        </v-btn>\n                                                                    </td>\n                                                                    <td class=\"text-center\">:</td>\n                                                                    <td class=\"text-right\">\n                                                                        {{ numberFormat(saleOrder.totalTaxAmount) }}\n                                                                    </td>\n                                                                </tr>\n                                                                <tr style=\"background: #F8F8F9\">\n                                                                    <td class=\"text-left text-uppercase pr-0\">\n                                                                        {{ $t(\"total\") }}\n                                                                    </td>\n                                                                    <td class=\"text-center\">:</td>\n                                                                    <td class=\"text-right primary--text text-bold\"\n                                                                        id=\"total\">{{ numberFormat(saleOrder.total) }}\n                                                                    </td>\n                                                                </tr>\n                                                                </tbody>\n                                                            </template>\n                                                        </v-simple-table>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-row>\n                                        </v-col>\n                                    </v-row>\n                                    <v-divider/>\n                                    <v-card outlined dense class=\"no_border function_footer\">\n                                        <v-alert type=\"warning\" v-model=\"alert\" dismissible>\n                                            <span v-html=\"errorMessage\"/>\n                                        </v-alert>\n                                        <v-menu>\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-btn\n                                                    class=\"mr-2 float-left select_template\"\n                                                    v-on=\"on\">\n                                                    {{ $t(\"select_template\") }}\n                                                    <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                                </v-btn>\n                                            </template>\n                                            <v-list>\n                                                <v-list-item\n                                                    v-for=\"(item, index) in formAR\"\n                                                    :key=\"index\">\n                                                    <v-list-item-title>{{ item.name }}</v-list-item-title>\n                                                </v-list-item>\n                                            </v-list>\n                                        </v-menu>\n                                        <v-btn\n                                            class=\"text-capitalize  black--text float-left\"\n                                            color=\"primary\"\n                                            outlined\n                                            @click=\"cancel\">{{ $t(\"cancel\") }}\n                                        </v-btn>\n                                        <!--                    <v-menu>-->\n                                        <!--                      <template v-slot:activator=\"{ on }\">-->\n                                        <!--                        <v-btn class=\"ml-2 float-right text-capitalize  white&#45;&#45;text\"-->\n                                        <!--                               color=\"primary\" v-on=\"on\">-->\n                                        <!--                          {{ $t('save_option') }}-->\n                                        <!--                          <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>-->\n                                        <!--                        </v-btn>-->\n                                        <!--                      </template>-->\n                                        <!--                      <v-list rounded>-->\n                                        <!--                        <v-list-item-group>-->\n                                        <!--                          <v-list-item>-->\n                                        <!--                            <v-list-item-content>-->\n                                        <!--                              <v-list-item-title v-if=\"!isEdit\" @click=\"saveNew\">-->\n                                        <!--                                {{ $t('save_new') }}-->\n                                        <!--                              </v-list-item-title>-->\n                                        <!--                            </v-list-item-content>-->\n                                        <!--                          </v-list-item>-->\n                                        <!--                          <v-list-item>-->\n                                        <!--                            <v-list-item-content>-->\n                                        <!--                              <v-list-item-title @click=\"saveClose\">{{-->\n                                        <!--                                  $t('save_close')-->\n                                        <!--                                }}-->\n                                        <!--                              </v-list-item-title>-->\n                                        <!--                            </v-list-item-content>-->\n                                        <!--                          </v-list-item>-->\n\n                                        <!--                        </v-list-item-group>-->\n                                        <!--                      </v-list>-->\n                                        <!--                    </v-menu>-->\n                                        <v-btn\n                                            @click=\"saveClose\"\n                                            class=\"float-right text-capitalize  white--text\"\n                                            :disabled=\"btnDisabled\"\n                                            color=\"primary\">\n                                            {{ $t(\"save_close\") }}\n                                        </v-btn>\n                                        <v-btn color=\"secondary\"\n                                               style=\"margin-right: 10px !important\"\n                                               :disabled=\"btnDisabled\"\n                                               class=\"white--text float-right text-capitalize\"\n                                               @click=\"saveNew\" :hidden=\"hiddenButton\">{{ $t(\"save_new\") }}\n                                        </v-btn>\n                                    </v-card>\n                                </v-form>\n                            </v-col>\n                            <v-col\n                                class=\"smallSide pl-2 pt-0\"\n                                sm=\"4\"\n                                style=\"transition: .3s ease-in;\"\n                                :class=\"{ hide_small_bar_class: isHideBar }\">\n                                <div class=\"d-flex justify-end\">\n                                    <h3 style=\"color: #b3b5bc; font-size:20px;\"\n                                        v-if=\"!isHideBar\"\n                                        class=\"text-uppercase\">\n                                        <span class=\"pointer\" @click=\"Help('sale order')\">{{ $t(\"help\") }}</span>\n                                        <v-icon\n                                            @click=\"cancel()\"\n                                            style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                            class=\"float-right mt-n1\">close\n                                        </v-icon>\n                                    </h3>\n                                </div>\n                                <div v-if=\"!isHideBar\"\n                                     class=\"small_sidebar mt-2 px-4 pt-5 grayBg\">\n                                    <v-card outlined dense class=\"pa-3 no_border my_card rounded-4 white--text\"\n                                            color=\"primary\" height=\"60px\">\n                                        <h3 class=\"text-left font_13 flex-1 text-uppercase\">\n                                            {{ $t('amount') }}</h3>\n                                        <h3 class=\"text-right flex-1 font_20 niradei_heavy\">\n                                            {{ numberFormat(saleOrder.total) }} </h3>\n                                    </v-card>\n                                    <v-row>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-3 kendo_dropdown_custom\">\n                                            <label class=\"label mb-2\">{{ $t(\"segment\") }}</label>\n                                            <v-select\n                                                class=\"mt-1\"\n                                                v-model=\"saleOrder.segment\"\n                                                :items=\"segments\"\n                                                item-value=\"id\"\n                                                @change=\"loadQuote\"\n                                                :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                                                return-object\n                                                tage=\"segment\"\n                                                :rules=\"[(v) => !!v || 'Segment is required']\"\n                                                placeholder=\"Segment\"\n                                                outlined=\"\"/>\n                                            <label class=\"label mb-0\">{{ $t(\"location\") }}</label>\n                                            <v-select\n                                                class=\"mt-1\"\n                                                v-model=\"saleOrder.location\"\n                                                :items=\"locations\"\n                                                @change=\"loadQuote\"\n                                                item-value=\"id\"\n                                                :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                                                return-object\n                                                tage=\"Location\"\n                                                placeholder=\"bu/location\"\n                                                outlined=\"\"/>\n                                            <label class=\"label font_14\">{{ $t(\"sale_channel\") }}</label>\n                                            <v-select\n                                                class=\" mt-1\"\n                                                v-model=\"saleOrder.saleChannel\"\n                                                :items=\"saleChannelList\"\n                                                item-value=\"id\"\n                                                item-text=\"name\"\n                                                return-object\n                                                tage=\"Sale Channel\"\n                                                placeholder=\"Channel\"\n                                                outlined/>\n                                            <label class=\"label font_14\">{{ $t(\"employee\") }}</label>\n                                            <v-col sm=\"12\"\n                                                   cols=\"12\"\n                                                   class=\"kendo_dropdown_custom pl-0 pb-3 pt-0\"\n                                                   style=\"padding: 0\">\n                                                <dropdownlist\n                                                    class=\"v-input__slot\"\n                                                    :data-items=\"employeeList\"\n                                                    @change=\"onEmployeeChange\"\n                                                    :value=\"saleOrder.employee\"\n                                                    :data-item-key=\"dataItemKey\"\n                                                    :text-field=\"'name'\"\n                                                    :default-item=\"defaultEmpItem\"\n                                                    :filterable=\"true\"\n                                                    @filterchange=\"onEmployeeFilterChanged\">\n                                                </dropdownlist>\n                                            </v-col>\n                                            <label class=\"label\">{{ $t(\"for_month_of\") }}</label>\n                                            <app-monthof-picker\n                                                :initMonthOf=\"saleOrder.monthOf\"\n                                                @emitMonthOf=\"saleOrder.monthOf = $event\"/>\n                                            <!--                                            <v-checkbox-->\n                                            <!--                                                v-model=\"isRequredPurchase\"-->\n                                            <!--                                                hide-details-->\n                                            <!--                                                :label=\"$t('order_required_purchase')\"-->\n                                            <!--                                                class=\"shrink mr-2 mt-0\"-->\n                                            <!--                                            ></v-checkbox>-->\n                                            <!--                                            <dropdownlist-->\n                                            <!--                                                class=\"v-input__slot mt-1\"-->\n                                            <!--                                                :disabled=\"!isRequredPurchase\"-->\n                                            <!--                                                :data-items=\"supplierList\"-->\n                                            <!--                                                @change=\"onSupplierChange\"-->\n                                            <!--                                                :value=\"saleOrder.supplier\"-->\n                                            <!--                                                :data-item-key=\"dataItemKey\"-->\n                                            <!--                                                :text-field=\"textField\"-->\n                                            <!--                                                :default-item=\"defaultSupItem\"-->\n                                            <!--                                                :filterable=\"true\"-->\n                                            <!--                                                @filterchange=\"onSupplierFilterChange\"-->\n                                            <!--                                            >-->\n                                            <!--                                            </dropdownlist>-->\n                                        </v-col>\n                                    </v-row>\n                                    <v-divider class=\"mb-3\"/>\n                                    <p class=\"text-bold ml-1\" style=\"font-size: 14px;\">{{ $t(\"tnc_to_be_added\") }}</p>\n                                    <v-row v-for=\"item in quotes\" v-bind:key=\"item.id\">\n                                        <v-col sm=\"9\" cols=\"9\" class=\"py-0 pr-0\">\n                                            <v-card\n                                                outlined\n                                                class=\"px-3 py-1 text-white no-boxshadow no_border justify-left d-flex\"\n                                                color=\"third\"\n                                                style=\"height: 30px\">\n                                                <p class=\"mb-0 white--text\" style=\"width: 100%\">\n                                                    <span class=\"pl-3 float-left\">{{ item.number }}</span>\n                                                    <span class=\"float-right\">{{ numberFormat(item.total) }}</span>\n                                                </p>\n                                            </v-card>\n                                        </v-col>\n                                        <v-col sm=\"3\" cols=\"3\" class=\"py-0  pl-1\">\n                                            <v-btn\n                                                class=\"white--text text-bold rounded-0 float-right text-uppercase\"\n                                                color=\"primary\"\n                                                style=\"height: 30px !important;\"\n                                                @click=\"addQuote(item)\">{{ $t(\"add\") }}\n                                            </v-btn>\n                                        </v-col>\n                                    </v-row>\n                                    <p v-if=\"appType != 'npo' \" class=\"mb-0 detial_smallside_p pr-4 font_14\">\n                                        {{ $t(\"sale_order_funct_desc\") }}\n                                    </p>\n                                </div>\n                            </v-col>\n                        </v-row>\n                    </v-card>\n                </v-col>\n            </v-row>\n            <LoadingMe\n                :isLoading=\"showLoading\"\n                :fullPage=\"false\"\n                :myLoading=\"true\"\n                type=\"loading\"\n                :alertMessage=\"loadingAlert\"\n                :color=\"loadingColorAlert\"\n                :alertText=\"loadingTextAlert\"/>\n            <v-dialog v-model=\"dialogTax\" max-width=\"450px\">\n                <v-card>\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"tax_list\") }}</v-card-title>\n                        <v-icon class=\"btn_close\" @click=\"dialogTax = false\">close</v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_content\">\n                        <v-row>\n                            <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                <v-simple-table>\n                                    <template v-slot:default>\n                                        <tbody>\n                                        <tr\n                                            v-for=\"(value, name) in taxListTotal\"\n                                            v-bind:key=\"name\"\n                                        >\n                                            <td class=\"text-left\" width=\"180px\">{{ name }}</td>\n                                            <td class=\"text-center\">:</td>\n                                            <td class=\"text-right\">\n                                                {{ numberFormat(value) }}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class=\"text-left\" width=\"180px\">\n                                                {{ $t(\"total\") }}\n                                            </td>\n                                            <td class=\"text-center\">:</td>\n                                            <td class=\"text-right\">\n                                                {{ numberFormat(saleOrder.totalTaxAmount) }}\n                                            </td>\n                                        </tr>\n                                        </tbody>\n                                    </template>\n                                </v-simple-table>\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                    <v-divider/>\n                </v-card>\n            </v-dialog>\n            <v-dialog v-model=\"dialogCatalog\" max-width=\"850px\">\n\n                <v-card>\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"catalog\") }}</v-card-title>\n                        <v-icon class=\"btn_close\" @click=\"dialogCatalog = false\"\n                        >close\n                        </v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_conent\">\n                        <v-row>\n                            <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                <v-simple-table>\n                                    <kendo-datasource\n                                        ref=\"catalogDatasource\"\n                                        :data=\"catalogs\"\n                                        :schema=\"gridSchema\"\n                                    />\n                                    <kendo-grid\n                                        id=\"gridCatalog\"\n                                        class=\"grid-function\"\n                                        :data-source-ref=\"'catalogDatasource'\"\n                                        :style=\"{ width: '100%' }\"\n                                        :noRecords=\"true\"\n                                        :pageable-numeric=\"false\"\n                                        :pageable-previous-next=\"false\"\n                                        :pageable-messages-display=\"'Showing {2} data items'\"\n                                        :scrollable-virtual=\"true\"\n                                    >\n                                        <kendo-grid-column\n                                            :field=\"'images'\"\n                                            :title=\"$t('image')\"\n                                            :width=\"50\"\n                                            :template=\"loadImage\"\n                                            :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'number'\"\n                                            :title=\"$t('number')\"\n                                            :width=\"70\"\n                                            :template=\"'<span>#=number#</span>'\"\n                                            :groupHeaderColumnTemplate=\"'#=value#'\"\n                                            :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'name'\"\n                                            :title=\"$t('name')\"\n                                            :attributes=\"{ class: 'tb_name_td' }\"\n                                            :width=\"100\"\n                                            :template=\"'<span>#=name#</span>'\"\n                                            :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'description'\"\n                                            :title=\"$t('description')\"\n                                            :width=\"100\"\n                                            :template=\"'<span>#=description#</span>'\"\n                                            :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'noOfProduct'\"\n                                            :title=\"$t('products')\"\n                                            :template=\"'<span>#=noOfProduct#</span>'\"\n                                            :width=\"50\"\n                                            :headerAttributes=\"{\n                        style: 'text-align: left; background-color: #EDF1F5',\n                      }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"''\"\n                                            :title=\"$t('action')\"\n                                            :width=\"60\"\n                                            :command=\"[{ text: $t('add'), click: addCatalog }]\"\n                                            :headerAttributes=\"{\n                        style: 'text-align: left; background-color: #EDF1F5',\n                      }\"\n                                        />\n                                    </kendo-grid>\n                                </v-simple-table>\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                </v-card>\n            </v-dialog>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport {i18n} from \"@/i18n\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport kendo from \"@progress/kendo-ui\";\nimport {DropDownList} from \"@progress/kendo-vue-dropdowns\";\nimport SaleFormContentModel from \"@/scripts/model/SaleFormContent\";\nimport ItemLineModel from \"@/scripts/invoice/model/ItemLine\";\nimport {uuid} from \"vue-uuid\";\nimport SaleOrderModel from \"@/scripts/model/Transaction\";\n\n/* Store */\nimport store from \"@/store\";\n\nconst institute = store.state.institute.institute;\n\nimport {ShowResource} from \"@/observable/store\";\nimport paymentTermHandler_ from \"@/scripts/paymentterm/handler/paymentTermHandler\";\nimport creditLimitHandler from \"@/scripts/creditLimit/handler/creditLimitHandler\";\nimport Helper from \"@/helper\";\nimport transactionHandler from \"@/scripts/transactionHandler\";\nimport {dataStore} from \"@/observable/store\";\n\n////handler\nconst saleOrderHandler = require(\"@/scripts/transactionHandler\");\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nconst customerHandler = require(\"@/scripts/customerHandler\");\nconst projectHandler = require(\"@/scripts/projectHandler\");\nconst prefixHandler = require(\"@/scripts/prefixHandler\");\nconst paymentTermHandler = require(\"@/scripts/paymentTermHandler\");\nconst priceLevelHandler = require(\"@/scripts/priceLevelHandler\");\nconst saleFormContentHandler = require(\"@/scripts/saleFormContentHandler\");\nconst employeeHandler = require(\"@/scripts/employeeHandler\");\nconst itemModifierHandler = require(\"@/scripts/itemModifierHandler\");\nconst discountItemHandler = require(\"@/scripts/discountItemHandler\");\nconst uomPriceHandler = require(\"@/scripts/uomPriceHandler\");\nconst productVariantHandler = require(\"@/scripts/productVariantHandler\");\nconst otherChargeHandler = require(\"@/scripts/otherChargeHandler\");\nconst locationHandler = require(\"@/scripts/locationHandler\");\nconst settingsHandler = require(\"@/scripts/settingsHandler\");\nconst saleChannelHandler = require(\"@/scripts/saleChannelHandler\");\nconst saleUnitItemHandler = require(\"@/scripts/saleUnitItemHandler\");\nconst settingHandler = require(\"@/scripts/settingHandler\");\nconst catalogHandler = require(\"@/scripts/catalogHandler\");\nconst productHandler = require(\"@/scripts/productHandler\");\nconst currencyHandler = require(\"@/scripts/currency/handler/currencyHandler\");\nconst supplierHandler = require(\"@/scripts/supplierHandler\");\n\nconst saleFormContentModel = new SaleFormContentModel({});\nconst itemLineModel = new ItemLineModel({});\n//other\nconst $ = kendo.jQuery\nconst textField = \"numberName\";\nconst keyField = \"id\";\nconst defaultItem = {[textField]: \"Select Customer...\", [keyField]: null};\nconst defaultSupItem = {[textField]: \"Select Supplier...\", [keyField]: null};\nconst defaultEmpItem = {[textField]: \"Select Employee...\", [keyField]: null};\nconst emptyItem = {[textField]: \"loading ...\"};\nconst invoicePrefix = \"lin-\";\nconst DISCOUNT_TYPE = \"?type=Sale\";\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\nexport default {\n    name: \"SaleOrder\",\n    props: {\n        id: {\n            type: String,\n        },\n        initSaleOrder: {\n            type: SaleOrderModel,\n        },\n    },\n    components: {\n        LoadingMe: () => import(`@/components/Loading`),\n        \"app-datepicker\": DatePickerComponent,\n        dropdownlist: DropDownList,\n        \"app-monthof-picker\": () => import(\"@/components/kendo_templates/MonthOfPicker\"),\n    },\n    data: () => ({\n        saleOrder: new SaleOrderModel(),\n        isEdit: false,\n        numSelect: [1],\n        dialogTax: false,\n        theDate: \"\",\n        //Catalog\n        dialogCatalog: false,\n        gridSchema: {\n            model: {\n                id: \"id\",\n            },\n        },\n        imgURL: \"https://s3-ap-southeast-1.amazonaws.com/images.banhji/\",\n        // LoadingMe\n        showLoading: false,\n        loadingAlert: false,\n        loadingColorAlert: \"\",\n        loadingTextAlert: \"\",\n        bill_date: \"\",\n        alert: false,\n        files: [],\n        errors: [],\n        // Form validation\n        valid: true,\n        templates: [\n            {title: \"Draft\"},\n            {title: \"Open\"},\n            {title: \"Partially Closed\"},\n            {title: \"Closed\"},\n        ],\n        saleOrderType: 1,\n        saleOrderTypes: [\n            {name: \"Standard Order\", id: 1},\n            {name: \"Open Order\", id: 2},\n            {name: \"Contract\", id: 3},\n            {name: \"Consignment Order\", id: 4},\n            // {name: 'Order required Purchase', id: 5},\n        ],\n        isRequredPurchase: false,\n        col_expand: 9,\n        col_hide: 3,\n        isHideBar: false,\n        filter: \"\",\n        textField: \"numberName\",\n        dataItemKey: \"id\",\n        defaultItem: defaultItem,\n        defaultSupItem: defaultSupItem,\n        defaultEmpItem: defaultEmpItem,\n        mOtherCharge: [],\n        //item\n        itemLines: [],\n        itemLine: itemLineModel,\n        dateFormat: itemLineModel.dateFormat,\n        //customer\n        cusBaseUrl: customerHandler.search(),\n        customer: {},\n        customerList: [],\n        supplierList: [],\n        supplier: {},\n        supBaseUrl: supplierHandler.search(),\n        billingAddress: [],\n        deliveryAddress: [],\n        priceLevel: [],\n        //date\n        paymentTerms: [],\n        transactions: [],\n        employeeList: [],\n        employee: {},\n        empBaseUrl: employeeHandler.searchURL(),\n        saleChannelList: [],\n        locations: [],\n        customerProjects: [],\n        segments: [],\n        transactionType: {},\n        taxListTotal: {},\n        customerDiscountItem: [],\n        customerSaleUnit: [],\n        saleFormContent: saleFormContentModel,\n        transactionDate: new Date().toISOString().substr(0, 10),\n        monthOf: false,\n        deliveryDateTime: new Date(),\n        validityDate: new Date().toISOString().substr(0, 10),\n        specificDiscountItem: [],\n        otherChargeList: [],\n        saleUnitItemList: [],\n        otherTax: [],\n        specificTax: [],\n        publicLightingTax: [],\n        vatTax: [],\n        tax: [],\n        loggedUser: {\n            id: cookie.creator,\n            name: cookie.email,\n        },\n        leads: [],\n        catalogs: [],\n        txnList: [],\n        quotes: [],\n        txnLists: [],\n        isSaveNew: false,\n        isSaveClose: false,\n        isSavePrint: false,\n        isSaveDraft: false,\n        exchangeRate: {},\n        baseCurrencyCode: \"\",\n        currencyCode: \"\",\n        transactionRate: 1,\n        saveOption: \"\",\n        formAR: [\n            {id: 1, name: \"Default Form\"},\n            {id: 2, name: \"Form 80mm\"},\n        ],\n        isPriceLevelChanged: false,\n        refFrom: [], // can SO can be from Sale Quotes\n        btnDisabled: false\n    }),\n    methods: {\n        formatDateTime(value) {\n            return kendo.toString(new Date(value), this.dateFormat + ` hh:mm tt`);\n        },\n        amountFormat(value) {\n            return kendo.toString(value.amount, `n${this.saleFormContent.decimal}`);\n        },\n        priceFormat(value) {\n            return kendo.toString(value.price, `n${this.saleFormContent.decimal}`);\n        },\n        Help(key_search) {\n            ShowResource(key_search);\n        },\n        initialData() {\n            if (this.initSaleOrder) {\n                // Edit Mode\n                this.saleOrder = this.initSaleOrder;\n                this.saleOrder.creditLimit = 0;\n                this.saleOrder.currentBalance = 0;\n                // window.console.log(this.initSaleOrder, 'propData')\n                this.bindData();\n            } else {\n                // Brand New Mode\n                if (this.$route.params.id === undefined) {\n                    this.setDefaultData();\n                }\n            }\n        },\n        setDefaultData() {\n            // Brand New Mode\n            // window.console.log('default or clear')\n            this.isEdit = false;\n            this.saleOrder = new SaleOrderModel({});\n            //sale order type\n            if (this.$route.params.id !== undefined) {\n                this.saleOrder.saleOrderType = 1;\n                this.saleOrderType = 1;\n                if (this.appType === 'npo' || this.appType === 'Public Sectors'){\n                    this.saleOrder.saleOrderType = 3;\n                    this.saleOrderType = 3;\n                }\n            }\n            this.saleOrder.deliveryDateTime = new Date();\n            this.saleOrder.formTemplate = 1;\n            this.saleOrder.transactionDate = new Date().toISOString().substr(0, 10);\n            // Generate Number\n            this.itemLines = []\n            // let ds = this.$refs.itemLineDS.kendoWidget();\n            // ds.data([]);\n            // Add 2 default lines\n            this.removeEmptyLine()\n            setTimeout(() => {\n                this.addRow()\n                // this.addRow()\n            }, 500)\n            // Add 2 default lines\n            this.otherChargeList = [];\n            this.mOtherCharge = [];\n            this.employee = {};\n            this.taxListTotal = {};\n            this.quotes = [];\n            this.isSaveNew = false;\n            this.isSaveClose = false;\n            this.isSavePrint = false;\n            this.isSaveDraft = false;\n            this.creditLimitUsage(0, 1);\n            this.isRequredPurchase = false;\n            this.customer = {}\n        },\n        bindData() {\n            // window.console.log(this.saleOrder, 'bindData')\n            // Edit Mode\n            if (this.saleOrder) {\n                if (this.saleOrder.hasOwnProperty(\"customer\")) {\n                    this.isEdit = true;\n                    this.customer = this.saleOrder.customer;\n                    // let e = {value: this.saleOrder.customer}\n                    // this.onChange(e)\n                    this.billingAddress = this.saleOrder.customer.billingAddress;\n                    this.deliveryAddress = this.saleOrder.customer.deliveryAddress;\n                    // this.customerProjects = this.saleOrder.customer.\n                    this.taxListTotal = this.saleOrder.taxListTotal;\n                    this.itemLines = this.saleOrder.itemLines;\n                    this.mOtherCharge = this.saleOrder.otherCharge;\n                    this.loadProjectByCustomer();\n                    if (this.customer.hasOwnProperty(\"id\")) {\n                        this.loadCustomerBalance(this.customer.id);\n                    }\n                }\n            }\n        },\n        addSelect() {\n            let amount_num = this.numSelect.length;\n            let num = this.numSelect[amount_num - 1];\n            let new_num = num + 1;\n            let lenghtItem = this.specificDiscountItem.length;\n            if (new_num <= lenghtItem) {\n                this.numSelect.push(new_num);\n            }\n        },\n        removeSelect(index) {\n            this.numSelect.splice(index, 1);\n            // window.console.log(index, this.numSelect)\n            // this.selectDiscount.splice(index,1)\n            // window.console.log(\"remove\",this.selectDiscount)\n            // this.selectDiscount = this.selectDiscount.filter(item =>  item.id != val.id);\n        },\n        errorMessage() {\n        },\n        accountDropDownEditor() {\n        },\n        hide_smallsitebar() {\n            if (!this.isHideBar) {\n                // this.col_expand = 12\n                // this.col_hide = 0\n                this.isHideBar = true;\n            } else {\n                // this.col_expand = 9\n                // this.col_hide = 3\n                this.isHideBar = false;\n            }\n        },\n        //number\n        generateNumber() {\n            if (this.isEdit == false) {\n                let d = new Date().toISOString().substr(0, 10);\n                if (this.saleOrder.transactionDate) {\n                    // window.console.log(this.transactionDate)\n                    d = this.saleOrder.transactionDate;\n                }\n                let data = {\n                    abbr: this.saleOrder.transactionType.abbr,\n                    structure: this.saleOrder.transactionType.structure,\n                    transactionDate: d,\n                    type: \"Sale Order\",\n                };\n                billingHandler\n                    .lastNumber(data)\n                    .then((response) => {\n                        if (response.data.statusCode === 200) {\n                            const res = response.data.data;\n                            const lastNumber = this.zeroPad(\n                                parseInt(res.lastNumber),\n                                this.saleOrder.transactionType.format\n                            );\n                            const number =\n                                res.suffix +\n                                this.saleOrder.transactionType.numberSeparator +\n                                lastNumber;\n                            this.saleOrder.number = number;\n                        }\n                    })\n                    .catch((e) => {\n                        this.errors.push(e);\n                    });\n            }\n        },\n        zeroPad(num, places) {\n            return String(num).padStart(places, \"0\");\n        },\n        //customer\n        onChange(event) {\n            window.console.log(event);\n            const value = event.value;\n            if (value && value[textField] === emptyItem[textField]) {\n                return;\n            }\n            this.customer = value;\n            this.saleOrder.customer = value;\n            // this.invoice = value\n            // this.saleOrder.paymentTerm = value.hasOwnProperty(\"paymentTerm\")\n            //   ? value.paymentTerm\n            //   : {};\n            this.saleOrder.priceLevel = value.hasOwnProperty(\"priceLevel\")\n                ? value.priceLevel\n                : {};\n            const baseCurrency = value.hasOwnProperty(\"baseCurrency\")\n                ? value.baseCurrency\n                : {};\n            if (baseCurrency.hasOwnProperty(\"code\")) {\n                this.baseCurrencyCode = baseCurrency.code;\n            }\n            const priceLevel = value.hasOwnProperty(\"priceLevel\")\n                ? value.priceLevel\n                : {};\n            if (priceLevel.hasOwnProperty(\"currency\")) {\n                if (priceLevel.currency.hasOwnProperty(\"id\")) {\n                    this.loadTransactionRate();\n                }\n            }\n            this.billingAddress = value.hasOwnProperty(\"billingAddress\")\n                ? value.billingAddress\n                : [];\n            this.deliveryAddress = value.hasOwnProperty(\"deliveryAddress\")\n                ? value.deliveryAddress\n                : [];\n            if (this.billingAddress.length > 0) {\n                this.saleOrder.billingAddress = this.billingAddress[0];\n            }\n            if (this.deliveryAddress.length > 0) {\n                this.saleOrder.deliveryAddress = this.deliveryAddress[0];\n            }\n            this.onSaleOrderDateChanged();\n            this.loadProjectByCustomer();\n            // const creditLimit = value.hasOwnProperty(\"creditLimit\")\n            //   ? value.creditLimit\n            //   : 0;\n            // this.saleOrder.creditLimit = kendo.parseFloat(creditLimit);\n            this.loadCreditLimit();\n            this.loadCustomerBalance(this.customer.id);\n            // load quote\n            this.loadQuote();\n            this.loadPaymentTermList();\n        },\n        onFilterChange(event) {\n            const filter = event.filter.value;\n            this.requestData(0, filter, this.cusBaseUrl);\n            this.filter = filter;\n        },\n        async requestData(skip, filter, baseUrl) {\n            let url = baseUrl + `?filter=${filter}`;\n            if(this.appType === 'npo'){\n                url = baseUrl + `?filter=${filter}&is_donor=true`;\n            }\n            this.requestStarted = true;\n            fetch(url)\n                .then((response) => {\n                    return response.json();\n                })\n                .then(this.afterFetch);\n        },\n        afterFetch(json) {\n            this.customerList = json.data;\n        },\n        //supplier\n        onSupplierChange(event) {\n            window.console.log(event);\n            const value = event.value;\n            if (value && value[textField] === emptyItem[textField]) {\n                return;\n            }\n            this.supplier = value;\n            this.saleOrder.supplier = value;\n        },\n        onSupplierFilterChange(event) {\n            const supfilter = event.filter.value;\n            this.supplierRequestData(0, supfilter, this.supBaseUrl);\n        },\n        supplierRequestData(skip, filter, baseUrl) {\n            const url = baseUrl + `?filter=${filter}`;\n            this.requestStarted = true;\n            fetch(url)\n                .then((response) => {\n                    return response.json();\n                })\n                .then(this.supAfterFetch);\n        },\n        supAfterFetch(json) {\n            this.supplierList = json.data;\n        },\n        //employee\n        onEmployeeChange(event) {\n            const value = event.value;\n            if (value && value[textField] === emptyItem[textField]) {\n                return;\n            }\n            this.employee = value;\n            this.saleOrder.employee = value;\n        },\n        onEmployeeFilterChanged(event) {\n            const empfilter = event.filter.value;\n            this.employeeRequestData(0, empfilter, this.empBaseUrl);\n        },\n        employeeRequestData(skip, filter, baseUrl) {\n            const url = baseUrl + `?filter=${filter}`;\n            this.requestStarted = true;\n            fetch(url)\n                .then((response) => {\n                    return response.json();\n                })\n                .then(this.empAfterFetch);\n        },\n        empAfterFetch(json) {\n            this.employeeList = json.data;\n        },\n        removeRow(e) {\n            e.preventDefault();\n            const grid = kendo.jQuery(\"#gridItemLineSaleOrder\").data(\"kendoGrid\"),\n                dataSource = grid.dataSource,\n                dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n            if (dataSource.total() > 1) {\n                dataSource.remove(dataItem);\n            }\n            this.autoCalculate()\n        },\n        //date\n        async onSaleOrderDateChanged() {\n            if (this.saleOrder.transactionDate) {\n                this.saleOrder.monthOf = new Date(this.saleOrder.transactionDate).toISOString().substr(0, 7)\n            }\n            await this.loadCreditLimit();\n            await this.loadCustomerBalance(this.customer.id);\n            await this.onPriceLevelChange();\n            await this.loadPaymentTermList();\n            if (this.customer) {\n                const paymentTerm = this.saleOrder.paymentTerm || {};\n                const netDue = paymentTerm.netDue || 0;\n                const someDate = new Date(this.saleOrder.transactionDate);\n                someDate.setDate(someDate.getDate() + parseInt(netDue)); //number  of days to add, e.x. 15 days\n                this.saleOrder.validityDate = someDate.toISOString().substr(0, 10);\n                window.console.log(\"dueDate\", this.saleOrder.validityDate);\n            }\n            if (this.$route.params.id === undefined) {\n                this.generateNumber();\n            }\n        },\n        onPaymentTermChanged() {\n            // this.onSaleOrderDateChanged();\n            if (this.customer) {\n                const paymentTerm = this.saleOrder.paymentTerm || {};\n                const netDue = paymentTerm.netDue || 0;\n                const someDate = new Date(this.saleOrder.transactionDate);\n                someDate.setDate(someDate.getDate() + parseInt(netDue)); //number  of days to add, e.x. 15 days\n                this.saleOrder.validityDate = someDate.toISOString().substr(0, 10);\n                window.console.log(\"dueDate\", this.saleOrder.validityDate);\n            }\n        },\n        //number\n        numberFormat(value) {\n            // window.console.log(this.saleFormContent.decimal,'nimol')\n            return kendo.toString(value, `n${this.saleFormContent.decimal}`);\n            // return value\n        },\n        //\n        async loadLead() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const strFilter = \"?type=Sale Lead\";\n                    this.leads = [];\n                    billingHandler.list(strFilter).then((res) => {\n                        if (res) {\n                            if (res.data) {\n                                if (res.data.statusCode === 200) {\n                                    this.showLoading = false;\n                                    this.leads = res.data.data;\n                                }\n                            }\n                        }\n                        this.showLoading = false;\n                    });\n                }, 10);\n            });\n        },\n        async loadPaymentTerm() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    paymentTermHandler.getAll().then((res) => {\n                        this.showLoading = false;\n                        this.paymentTerms = res.data.data;\n                        if (this.paymentTerms.length > 0) {\n                            if (\n                                this.$route.params.id !== undefined ||\n                                this.$route.params.id != \"\"\n                            ) {\n                                if (this.saleOrder) {\n                                    this.saleOrder.paymentTerm = this.paymentTerms[0];\n                                }\n                            }\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadPriceLevel() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const strFilter = \"?nature=sale\";\n                    priceLevelHandler.get(strFilter).then((res) => {\n                        this.priceLevel = res;\n                        if (this.priceLevel.length > 0) {\n                            if (\n                                this.$route.params.id !== undefined ||\n                                this.$route.params.id != \"\"\n                            ) {\n                                if (this.saleOrder) {\n                                    this.saleOrder.priceLevel = this.priceLevel[0];\n                                }\n                                this.loadTransactionRate();\n                            }\n                        }\n                    });\n                }, 10);\n            });\n        },\n        removeDuplicate(array) {\n            const result = [];\n            const map = new Map();\n            for (const item of array) {\n                if (!map.has(item.id)) {\n                    map.set(item.id, true); // set any value to Map\n                    result.push(item);\n                }\n            }\n            return result;\n        },\n        autoCalculateDiscount(discountItem, subTotal) {\n            if (discountItem) {\n                window.console.log('discountItem', discountItem, subTotal)\n                const nature = discountItem.nature || '';\n                const amount = discountItem.amount || 0;\n                if (nature === \"Amount\") {\n                    return parseFloat(amount);\n                } else if (nature === \"Percentage\") {\n                    return subTotal * (parseFloat(amount) / 100);\n                } else {\n                    return 0\n                }\n            } else {\n                return 0\n            }\n        },\n        autoCalculateTax(tax, amount) {\n            if (tax) {\n                var formula = tax.formula;\n                var inAmt = kendo.parseFloat(amount);\n                var nAmt = kendo.parseFloat(amount);\n                var taxBase = kendo.parseFloat(tax.taxBase) / 100;\n                var rate = kendo.parseFloat(tax.rate) / 100;\n                var total = eval(formula);\n                window.console.log(inAmt, nAmt, taxBase, rate, formula, total);\n                // window.console.log(amount)\n                return total;\n            }\n            // return 0\n        },\n        autoCalculateTaxByType(tax) {\n            // return by a key\n            const groupAll = (list) =>\n                list.reduce((tax, item) => {\n                    const taxAmount = tax[item.name] || 0;\n                    return Object.assign({}, tax, {\n                        [item.name]: taxAmount + parseFloat(item.amount),\n                    });\n                }, {});\n            this.taxListTotal = groupAll(tax);\n            // window.console.log('nimol', groupAll(tax))\n            // this.\n        },\n        dataSourceChanged(e) {\n            if (e.field) {\n                let dataRow = e.items[0],\n                    buom = {},\n                    conversionRate = 1,\n                    wac = 0,\n                    qoh = 0,\n                    amount = 0,\n                    xAmount = 0;\n                switch (e.field) {\n                    case \"item\":\n                        // this.attribute_ = this.attributes.filter(m => m.type.id === dataRow.variant.id)\n                        dataRow.set(\"description\", dataRow.item.description);\n                        buom = dataRow.item.uom || {};\n                        dataRow.set(\"buom\", buom);\n                        // this.itemChange(dataRow)\n                        break;\n                    case \"uom\":\n                        if (this.isPriceLevelChanged === false) {\n                            try {\n                                try {\n                                    buom = dataRow.uom.buom || {};\n                                    qoh = dataRow.uom.qoh || 0;\n                                    conversionRate = dataRow.uom.conversionRate || 1;\n                                    wac = dataRow.uom.wac || 0;\n                                    dataRow.set(\"buom\", buom);\n                                    dataRow.set(\"wac\", wac);\n                                    dataRow.set(\"qoh\", qoh);\n                                    dataRow.set(\"conversionRate\", parseFloat(conversionRate));\n                                    if (dataRow.uom) {\n                                        amount =\n                                            parseFloat(dataRow.uom.price) * parseFloat(dataRow.qty);\n                                        xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n                                        dataRow.set(\"price\", parseFloat(dataRow.uom.price));\n                                        dataRow.set(\"amount\", amount);\n                                        dataRow.set(\"exchangeAmount\", xAmount);\n                                    } else {\n                                        amount =\n                                            parseFloat(dataRow.price) * parseFloat(dataRow.qty);\n                                        xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n                                        dataRow.set(\"price\", parseFloat(dataRow.price));\n                                        dataRow.set(\"amount\", amount);\n                                        dataRow.set(\"exchangeAmount\", xAmount);\n                                    }\n                                } catch (err) {\n                                    dataRow.set(\"buom\", {});\n                                    dataRow.set(\"conversionRate\", 1);\n                                    dataRow.set(\"price\", 0);\n                                    dataRow.set(\"qoh\", 0);\n                                    dataRow.set(\"wac\", 0);\n                                    dataRow.set(\"amount\", 0);\n                                    dataRow.set(\"exchangeAmount\", 0);\n                                }\n                            } catch {\n                                dataRow.set(\"price\", 0);\n                                dataRow.set(\"amount\", 0);\n                            }\n                        }\n                        break;\n                    case \"price\":\n                        try {\n                            amount = parseFloat(dataRow.price) * parseFloat(dataRow.qty);\n                            xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n                            dataRow.set(\"price\", parseFloat(dataRow.price));\n                            dataRow.set(\"amount\", amount);\n                            dataRow.set(\"exchangeAmount\", xAmount);\n                            // window.console.log('price',dataRow.price)\n                        } catch {\n                            dataRow.set(\"price\", 0);\n                            dataRow.set(\"amount\", 0);\n                            dataRow.set(\"exchangeAmount\", 0);\n                        }\n                        break;\n                    case \"qty\":\n                        try {\n                            amount = parseFloat(dataRow.price) * parseFloat(dataRow.qty);\n                            xAmount = amount * parseFloat(this.saleOrder.txnRate);\n\n                            dataRow.set(\"price\", parseFloat(dataRow.price));\n                            dataRow.set(\"amount\", amount);\n                            dataRow.set(\"exchangeAmount\", xAmount);\n                        } catch {\n                            dataRow.set(\"price\", 0);\n                            dataRow.set(\"amount\", 0);\n                            dataRow.set(\"exchangeAmount\", 0);\n                        }\n                        break;\n                    case \"otherTax\":\n                        // window.console.log(\"--\", dataRow)\n                        break;\n                    default:\n                        break;\n                }\n                if (e.field) {\n                    this.autoCalculate();\n                }\n            }\n        },\n        autoCalculate() {\n            let ds = this.$refs.itemLineDS.kendoWidget(),\n                subTotal = 0,\n                totalTax = 0,\n                discountTotal = 0,\n                spTax = 0,\n                pltax = 0,\n                otherTax = 0,\n                vatTax = 0,\n                discountInvoice = 0,\n                taxList = [],\n                discountItem = [],\n                saleUnit = [],\n                inclusiveTax = 0,\n                itemSubtotal = 0,\n                txnItmSubtotal = 0,\n                serviceSubtotal = 0,\n                itemDiscount = 0,\n                serviceDiscount = 0,\n                txnDiscount = 0;\n\n            const rows = ds.data().filter((m) => parseFloat(m.amount) > 0);\n            rows.forEach((value) => {\n                let modifierPrice = 0;\n                if (value.modifier) {\n                    modifierPrice = kendo.parseFloat(value.modifier.price);\n                }\n\n                // subTotal += (kendo.parseFloat(value.amount) + modifierPrice)\n                let discount = 0;\n                if (value.discountItem) {\n                    let subTo = kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n                    discount = this.autoCalculateDiscount(value.discountItem, subTo);\n                    window.console.log('discount item', discount, '--', value.discountItem)\n                    value[\"discountAmount\"] = discount;\n                    value[\"discountExchangeAmount\"] =\n                        discount * kendo.parseFloat(this.saleOrder.txnRate);\n                    if (value.discountItem.hasOwnProperty(\"id\")) {\n                        discountItem.push(value.discountItem);\n                    }\n                    discountTotal += discount;\n                }\n                if (value.saleUnit) {\n                    if (value.saleUnit.hasOwnProperty(\"id\")) {\n                        saleUnit.push(value.saleUnit);\n                    }\n                }\n                if (value.specificTax) {\n                    spTax = this.autoCalculateTax(\n                        value.specificTax,\n                        kendo.parseFloat(value.amount) - kendo.parseFloat(discount)\n                    );\n                    // window.console.log('sp ', discount)\n                    spTax = kendo.parseFloat(spTax) ? kendo.parseFloat(spTax) : 0;\n                    value[\"specificTaxAmount\"] = spTax;\n                    value[\"specificTaxExchangeAmount\"] =\n                        spTax * kendo.parseFloat(this.saleOrder.txnRate);\n                    const tax = value.specificTax;\n                    const baseAmount = tax.baseAmount;\n                    if (baseAmount) {\n                        if (baseAmount.toLowerCase() === \"inclusive\") {\n                            inclusiveTax += spTax;\n                        }\n                    }\n                    if (value.specificTax.hasOwnProperty(\"taxType\")) {\n                        taxList.push({\n                            name: value.specificTax.taxType.name,\n                            amount: spTax,\n                            id: value.specificTax.taxType.id,\n                        });\n                    }\n                }\n                if (value.publicLightingTax) {\n                    pltax = this.autoCalculateTax(\n                        value.publicLightingTax,\n                        kendo.parseFloat(value.amount) - kendo.parseFloat(discount)\n                    );\n                    pltax = kendo.parseFloat(pltax) ? kendo.parseFloat(pltax) : 0;\n                    value[\"publicLightingTaxAmount\"] = pltax;\n                    value[\"publicLightingTaxExchangeAmount\"] =\n                        pltax * kendo.parseFloat(this.saleOrder.txnRate);\n                    const tax = value.publicLightingTax;\n                    const baseAmount = tax.baseAmount;\n                    if (baseAmount) {\n                        if (baseAmount.toLowerCase() === \"inclusive\") {\n                            inclusiveTax += pltax;\n                        }\n                    }\n                    if (value.publicLightingTax.hasOwnProperty(\"taxType\")) {\n                        taxList.push({\n                            name: value.publicLightingTax.taxType.name,\n                            amount: pltax,\n                            id: value.publicLightingTax.taxType.id,\n                        });\n                    }\n                }\n                if (value.otherTax) {\n                    otherTax = this.autoCalculateTax(\n                        value.otherTax,\n                        kendo.parseFloat(value.amount) - kendo.parseFloat(discount)\n                    );\n                    otherTax = kendo.parseFloat(otherTax)\n                        ? kendo.parseFloat(otherTax)\n                        : 0;\n                    value[\"otherTaxAmount\"] = otherTax;\n                    value[\"otherTaxExchangeAmount\"] =\n                        otherTax * kendo.parseFloat(this.saleOrder.txnRate);\n                    const tax = value.otherTax;\n                    const baseAmount = tax.baseAmount;\n                    if (baseAmount) {\n                        if (baseAmount.toLowerCase() === \"inclusive\") {\n                            inclusiveTax += otherTax;\n                        }\n                    }\n                    if (value.otherTax.hasOwnProperty(\"taxType\")) {\n                        taxList.push({\n                            name: value.otherTax.taxType.name,\n                            amount: otherTax,\n                            id: value.otherTax.taxType.id,\n                        });\n                    }\n                }\n\n                if (value.vatTax) {\n                    // window.console.log('Vat Tax', value.vatTax)\n                    let amt =\n                        kendo.parseFloat(spTax ? spTax : 0) +\n                        kendo.parseFloat(pltax ? pltax : 0) +\n                        kendo.parseFloat(otherTax ? otherTax : 0) +\n                        (kendo.parseFloat(value.amount ? value.amount : 0) -\n                            (discount ? discount : 0));\n                    vatTax = this.autoCalculateTax(value.vatTax, amt);\n                    vatTax = kendo.parseFloat(vatTax) ? kendo.parseFloat(vatTax) : 0;\n                    value[\"vatTaxAmount\"] = vatTax;\n                    value[\"vatTaxExchangeAmount\"] =\n                        vatTax * kendo.parseFloat(this.saleOrder.txnRate);\n                    const tax = value.vatTax;\n                    const baseAmount = tax.baseAmount;\n                    if (baseAmount) {\n                        if (baseAmount.toLowerCase() === \"inclusive\") {\n                            inclusiveTax += vatTax;\n                        }\n                    }\n                    if (value.vatTax.hasOwnProperty(\"taxType\")) {\n                        taxList.push({\n                            name: value.vatTax.taxType.name,\n                            amount: vatTax,\n                            id: value.vatTax.taxType.id,\n                        });\n                    }\n                }\n                totalTax +=\n                    kendo.parseFloat(spTax ? spTax : 0) +\n                    kendo.parseFloat(pltax ? pltax : 0) +\n                    kendo.parseFloat(otherTax ? otherTax : 0) +\n                    kendo.parseFloat(vatTax ? vatTax : 0);\n                subTotal +=\n                    kendo.parseFloat(value.amount) + modifierPrice - inclusiveTax;\n\n                const item = value.item;\n                const itmType = item.type || \"\";\n                if (itmType === \"Variant\") {\n                    itemSubtotal +=\n                        kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n                    itemDiscount += kendo.parseFloat(discount);\n                } else if (itmType === \"Service\") {\n                    serviceSubtotal +=\n                        kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n                    serviceDiscount += kendo.parseFloat(discount);\n                } else {\n                    txnItmSubtotal +=\n                        kendo.parseFloat(value.price) * kendo.parseFloat(value.qty);\n                    txnDiscount += kendo.parseFloat(discount);\n                }\n                //include Tax Amount\n                const amountNodiscount =\n                    kendo.parseFloat(value.price) * kendo.parseFloat(value.qty) -\n                    discount;\n                const includeTaxAmount =\n                    amountNodiscount + vatTax + pltax + spTax + otherTax;\n                value[\"includeTaxAmount\"] = includeTaxAmount;\n                value[\"includeTaxExchangeAmount\"] =\n                    includeTaxAmount * kendo.parseFloat(this.saleOrder.txnRate);\n            });\n\n            this.saleOrder.itemSubtotal = itemSubtotal;\n            this.saleOrder.exchangeItemSubtotal = itemSubtotal * kendo.parseFloat(this.saleOrder.txnRate);\n\n            this.saleOrder.serviceSubtotal = serviceSubtotal;\n            this.saleOrder.exchangeServiceSubtotal = serviceSubtotal * kendo.parseFloat(this.saleOrder.txnRate);\n            this.saleOrder.txnItmSubtotal = txnItmSubtotal;\n            this.saleOrder.exchangeTxnItmSubtotal = txnItmSubtotal * kendo.parseFloat(this.saleOrder.txnRate);\n\n            this.saleOrder.itemDiscount = itemDiscount;\n            this.saleOrder.exchangeItemDiscount = itemDiscount * kendo.parseFloat(this.saleOrder.txnRate);\n            this.saleOrder.serviceDiscount = serviceDiscount;\n            this.saleOrder.exchangeServiceDiscount = serviceDiscount * kendo.parseFloat(this.saleOrder.txnRate);\n            this.saleOrder.txnItmDiscount = txnDiscount;\n            this.saleOrder.exchangeTxnItmDiscount = txnDiscount * kendo.parseFloat(this.saleOrder.txnRate);\n\n            discountTotal = discountTotal ? discountTotal : 0;\n\n            // window.console.log(spTax, pltax, otherTax, vatTax)\n            let total =\n                kendo.parseFloat(subTotal) -\n                kendo.parseFloat(discountTotal) +\n                kendo.parseFloat(totalTax);\n            this.saleOrder.subTotal = subTotal;\n            this.saleOrder.totalTaxAmount = kendo.parseFloat(totalTax);\n            this.saleOrder.discountTotal = kendo.parseFloat(discountTotal);\n            if (this.saleOrder.specificDiscountItem) {\n                discountInvoice = this.autoCalculateDiscount(\n                    this.saleOrder.specificDiscountItem,\n                    kendo.parseFloat(subTotal)\n                );\n                discountInvoice = discountInvoice ? discountInvoice : 0;\n            }\n            // this.onOtherChargeChange()\n            this.saleOrder.total =\n                kendo.parseFloat(total) -\n                discountInvoice +\n                kendo.parseFloat(this.saleOrder.otherChargeAmount);\n            this.saleOrder.exchangeAmount =\n                kendo.parseFloat(this.saleOrder.total) *\n                kendo.parseFloat(this.saleOrder.txnRate);\n            this.autoCalculateTaxByType(taxList);\n            this.customerDiscountItem = this.removeDuplicate(discountItem);\n            this.customerSaleUnit = this.removeDuplicate(saleUnit);\n            // window.console.log('discount ', this.customerDiscountItem)\n        },\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.itemLineDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        async loadSaleFormContent() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    saleFormContentHandler.list().then((res) => {\n                        if (res.data.statusCode === 200) {\n                            const data = res.data.data;\n                            if (data.length > 0) {\n                                this.saleFormContent = data[0];\n                                // window.console.log(data[0])\n                            }\n                        }\n                    });\n                }, 10);\n            });\n        },\n        vatTemplate(dataItem) {\n            const vat = dataItem.vatTax;\n            if (vat) {\n                return `<span>${vat.defaultTax ? vat.defaultTax : ``}</span>`;\n            } else {\n                return ``;\n            }\n        },\n        itemTemplate(dataItem) {\n            const item = dataItem.item;\n            if (item) {\n                return `<span>${item.name ? item.name : ``}</span>`;\n            } else {\n                return ``;\n            }\n        },\n        UOMTemplate(dataItem) {\n            const uom = dataItem.uom;\n            if (uom) {\n                return `<span>${uom.uom ? uom.uom.name : ``}</span>`;\n            } else {\n                return ``;\n            }\n        },\n        saleUnitTemplate(dataItem) {\n            const saleUnit = dataItem.saleUnit;\n            if (saleUnit) {\n                return `<span>${saleUnit.name ? saleUnit.name : ``}</span>`;\n            } else {\n                return ``;\n            }\n        },\n        discountItemTemplate(dataItem) {\n            const discountItem = dataItem.discountItem;\n            if (discountItem) {\n                return `<span>${discountItem.code ? discountItem.code : ``} - ${\n                    discountItem.name ? discountItem.name : ``\n                }</span>`;\n            } else {\n                return ``;\n            }\n        },\n        ServiceDateEditor(container, options) {\n            kendo\n                .jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDatePicker();\n\n            // let ds = this.$refs.itemLineDS.kendoWidget()\n            // window.console.log(ds.data())\n            // // const dateString = kendo.toString((new Date(options.model.items.serviceDate)), this.itemLine.dateFormat)\n            // // const dateString = kendo.toString(options.model.items.serviceDate)\n            // const $input = $(\"<input value=\" + options.model.serviceDate + \" />\").appendTo(container)\n            // $input.kendoDatePicker()\n            // // $input.appendTo(container)\n            // // options.model.items.serviceDate = dateString\n            // window.console.log($input)\n        },\n        ServiceDateToEditor(container, options) {\n            kendo\n                .jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDatePicker();\n        },\n        ItemDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    headerTemplate:\n                        '<div class=\"dropdown-header k-widget k-header\">' +\n                        \"<span>Items </span>\" +\n                        \"<span></span>\" +\n                        \"</div>\",\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: productVariantHandler.itemSearchURL('?plId=' + this.saleOrder.priceLevel.id),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    name: {type: \"string\"},\n                                    sku: {type: \"string\"},\n                                },\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            },\n                        },\n                        // data: this.variants\n                    }),\n                });\n        },\n        UOMDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"uom.name\",\n                    dataValueField: \"uom.id\",\n                    cascadeFrom: \"item\",\n                    template: \"<span>#=uom.name || `No Price Level`#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                // url: uomPriceHandler.getURL(options.model.item.id, this.saleOrder.priceLevel.id),\n                                url: uomPriceHandler.uomPriceByPriceLevelURL(\n                                    \"id=\" +\n                                    options.model.item.id +\n                                    \"&plId=\" +\n                                    this.saleOrder.priceLevel.id +\n                                    \"&date=\" +\n                                    this.saleOrder.transactionDate\n                                ),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    // name: {type: \"string\"},\n                                    // sku: {type: \"string\"},\n                                },\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            },\n                        },\n                        // data: this.variants\n                    }),\n                });\n        },\n        DiscountItemDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    cascadeFrom: \"item\",\n                    template: \"<span>#=code# - #=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: discountItemHandler.getURL(DISCOUNT_TYPE),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    // name: {type: \"string\"},\n                                    // sku: {type: \"string\"},\n                                },\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            },\n                        },\n                    }),\n                });\n        },\n        SpecificTaxDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"defaultTax\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=defaultTax#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.specificTax.filter((m) => {\n                            if (options.model.hasOwnProperty(\"vatTax\")) {\n                                const vat = options.model.vatTax;\n                                if (vat) {\n                                    if (\n                                        options.model.vatTax !== null ||\n                                        options.model.vatTax !== \"null\"\n                                    ) {\n                                        if (options.model.vatTax.baseAmount) {\n                                            return (\n                                                m.baseAmount.toLowerCase() ===\n                                                options.model.vatTax.baseAmount.toLowerCase()\n                                            );\n                                        } else {\n                                            return m;\n                                        }\n                                    }\n                                } else {\n                                    return m;\n                                }\n                            }\n                        }),\n                    }),\n                });\n        },\n        PublicLightingTaxDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"defaultTax\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=defaultTax#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.publicLightingTax.filter((m) => {\n                            if (options.model.hasOwnProperty(\"vatTax\")) {\n                                const vat = options.model.vatTax;\n                                if (vat) {\n                                    if (\n                                        options.model.vatTax !== null &&\n                                        options.model.vatTax !== \"null\"\n                                    ) {\n                                        if (options.model.vatTax.baseAmount) {\n                                            return (\n                                                m.baseAmount.toLowerCase() ===\n                                                options.model.vatTax.baseAmount.toLowerCase()\n                                            );\n                                        } else {\n                                            return m;\n                                        }\n                                    }\n                                } else {\n                                    return m;\n                                }\n                            }\n                        }),\n                    }),\n                });\n        },\n        OtherTaxDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"defaultTax\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=defaultTax#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.otherTax.filter((m) => {\n                            if (options.model.hasOwnProperty(\"vatTax\")) {\n                                const vat = options.model.vatTax;\n                                if (vat) {\n                                    if (\n                                        options.model.vatTax !== null &&\n                                        options.model.vatTax !== \"null\"\n                                    ) {\n                                        if (options.model.vatTax.baseAmount) {\n                                            return (\n                                                m.baseAmount.toLowerCase() ===\n                                                options.model.vatTax.baseAmount.toLowerCase()\n                                            );\n                                        } else {\n                                            return m;\n                                        }\n                                    }\n                                } else {\n                                    return m;\n                                }\n                            }\n                        }),\n                    }),\n                });\n        },\n        VatTaxDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"defaultTax\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=defaultTax#</span>\",\n                    optionLabel: \"--Select--\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.vatTax,\n                    }),\n                });\n        },\n        SaleUnitDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=code# - #=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.saleUnitItemList,\n                    }),\n                });\n        },\n        ModifierDropDownEditor(container, options) {\n            const item = options.model.item || {}\n            const uom = item.uom || {}\n            const itemId = item.id || ''\n            const uomId = uom.id || ''\n            kendo\n                .jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    headerTemplate:\n                        '<div class=\"dropdown-header k-widget k-header\">' +\n                        \"<span>Modifier </span>\" +\n                        \"<span></span>\" +\n                        \"</div>\",\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: itemModifierHandler.searchURL('?plId=' + this.saleOrder.priceLevel.id + '&id=' + itemId + '&uomId=' + uomId),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    name: {type: \"string\"},\n                                    price: {type: \"number\"},\n                                    uom: {type: \"string\"},\n                                },\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            },\n                        },\n                    }),\n                });\n        },\n        EmployeeDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input data-bind=\"value:' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoMultiSelect({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    suggest: true,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    headerTemplate:\n                        '<div class=\"dropdown-header k-widget k-header\">' +\n                        \"<span>Employee </span>\" +\n                        \"<span></span>\" +\n                        \"</div>\",\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: employeeHandler.searchURL(),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    name: {type: \"string\"},\n                                    firstName: {type: \"string\"},\n                                    lastName: {type: \"string\"},\n                                },\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            },\n                        },\n                    }),\n                });\n        },\n        empImpl(dataItem) {\n            let empIds = [];\n            dataItem.employee.forEach((m) => {\n                empIds.push(m.firstName + \" - \" + m.lastName);\n            });\n            // window.console.log(empIds.join(', '))\n            return `<span>${empIds.join(\", \")}</span>`;\n        },\n        addRow() {\n            let ds = this.$refs.itemLineDS.kendoWidget(),\n                total = ds.total();\n            this.itemLine.id = invoicePrefix + uuid.v1();\n            ds.insert(total, this.itemLine);\n        },\n        onSpecificDiscountChanged() {\n            if (this.saleOrder.specificDiscountItem) {\n                const discountOrder = this.autoCalculateDiscount(\n                    this.saleOrder.specificDiscountItem,\n                    this.saleOrder.subTotal\n                );\n                this.saleOrder.specificDiscountTotal = kendo.toString(\n                    discountOrder ? discountOrder : 0,\n                    \"n\"\n                );\n                let total =\n                    kendo.parseFloat(this.saleOrder.subTotal) -\n                    (kendo.parseFloat(this.saleOrder.discountTotal) +\n                        kendo.parseFloat(this.saleOrder.totalTaxAmount)) -\n                    discountOrder;\n                this.saleOrder.total = kendo.toString(total, \"n\");\n            }\n        },\n        onOtherChargeChange() {\n            let otherCharge = 0;\n            this.mOtherCharge.forEach((m) => {\n                otherCharge += this.autoCalculateDiscount(m, this.saleOrder.subTotal);\n            });\n            this.saleOrder.otherChargeAmount = otherCharge;\n            this.autoCalculate();\n        },\n        async loadOtherCharge() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    otherChargeHandler.list().then((res) => {\n                        if (res.data.statusCode === 200) {\n                            this.otherChargeList = res.data.data;\n                        }\n                    });\n                }, 10);\n            });\n        },\n        onOtherAmount(value) {\n            return this.autoCalculateDiscount(value, this.saleOrder.subTotal);\n        },\n        async loadDiscountItem() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    discountItemHandler.list().then((res) => {\n                        if (res.data.statusCode === 200) {\n                            this.specificDiscountItem = res.data.data;\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadSegment() {\n            this.segments = []\n            const roleType = dataStore.roleType || 0\n            if (roleType === 0) {\n                if (dataStore.roleData) {\n                    const roleData = dataStore.roleData || []\n                    const segment = roleData.filter(itm => itm.type === 'segment')\n                    const segmentDefault = segment.filter(m => m.isDefault === 1)\n                    this.segments = segment\n                    if (this.$route.params.id === undefined || this.$route.params.id === '') {\n                        if (segmentDefault.length > 0) {\n                            this.saleOrder.segment = segmentDefault[0];\n                        }\n                    }\n                }\n            } else if (roleType === 1) {\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        this.segments = [];\n                        settingsHandler\n                            .getSeg()\n                            .then((res) => {\n                                this.showLoading = true;\n                                if (res.data.statusCode === 200) {\n                                    this.showLoading = false;\n                                    this.segments = res.data.data;\n                                } else {\n                                    this.showLoading = false\n                                }\n                            })\n                    }, 10);\n                });\n            }\n\n\n        },\n        async loadLocation() {\n            this.locations = []\n            const roleType = dataStore.roleType || 0\n            if (roleType === 0) {\n                if (dataStore.roleData) {\n                    const roleData = dataStore.roleData || []\n                    const location = roleData.filter(itm => itm.type === 'location')\n                    const locationDefault = location.filter(m => m.isDefault === 1)\n                    this.locations = location\n                    if (this.$route.params.id === undefined || this.$route.params.id === '') {\n                        if (locationDefault.length > 0) {\n                            this.saleOrder.location = locationDefault[0];\n                        }\n                    }\n                }\n            } else if (roleType === 1) {\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        this.locations = [];\n                        locationHandler\n                            .list()\n                            .then((res) => {\n                                this.showLoading = true;\n                                if (res.data.statusCode === 200) {\n                                    this.showLoading = false;\n                                    this.locations = res.data.data;\n                                } else {\n                                    this.showLoading = false;\n                                }\n                            })\n                    }, 10);\n                });\n            }\n        },\n        async loadProjectByCustomer() {\n            this.customerProjects = []\n            const roleType = dataStore.roleType || 0\n            if (roleType === 0) {\n                if (dataStore.roleData) {\n                    const roleData = dataStore.roleData || []\n                    const project = roleData.filter(itm => itm.type === 'project')\n                    project.forEach(k => {\n                        const customers = k.customers || []\n                        const proCustomer = customers.filter(n => n.customer.id === this.customer.id)\n                        if (proCustomer.length > 0) {\n                            this.customerProjects.push(k)\n                        }\n                    })\n                    if (this.$route.params.id === undefined || this.$route.params.id === '') {\n                        const projectDefault = this.customerProjects.filter(m => m.isDefault === 1)\n                        if (projectDefault.length > 0) {\n                            this.saleOrder.project = projectDefault[0];\n                        }\n                    }\n                }\n            } else if (roleType === 1) {\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        projectHandler\n                            .getByCustomer(this.customer.id)\n                            .then((res) => {\n                                this.showLoading = true;\n                                if (res.data.statusCode === 200) {\n                                    this.showLoading = false;\n                                    this.customerProjects = res.data.data;\n                                } else {\n                                    this.showLoading = false;\n                                }\n                            })\n                    }, 10);\n                });\n            }\n        },\n        async loadSaleChannel() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.showLoading = true;\n                    saleChannelHandler.get().then((res) => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false;\n                            this.saleChannelList = res.data.data;\n                            if (this.saleChannelList.length > 0) {\n                                if (\n                                    this.$route.params.id !== undefined ||\n                                    this.$route.params.id != \"\"\n                                ) {\n                                    this.saleOrder.saleChannel = this.saleChannelList[0];\n                                }\n                            }\n                        } else {\n                            this.showLoading = false;\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadTax() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    settingHandler.get().then((res) => {\n                        this.tax = res;\n                        this.otherTax = this.tax.filter(\n                            (m) =>\n                                (m.taxType.typeId === 7 || m.taxType.typeId === 10) &&\n                                m.transactionType === \"Sale\"\n                        ); // valuable tax\n                        this.specificTax = this.tax.filter(\n                            (m) =>\n                                (m.taxType.typeId === 8 || m.taxType.typeId === 10) &&\n                                m.transactionType === \"Sale\"\n                        ); // valuable tax\n                        this.publicLightingTax = this.tax.filter(\n                            (m) =>\n                                (m.taxType.typeId === 9 || m.taxType.typeId === 10) &&\n                                m.transactionType === \"Sale\"\n                        ); // valuable tax\n                        this.vatTax = this.tax.filter(\n                            (m) =>\n                                (m.taxType.typeId === 1 ||\n                                    m.taxType.typeId === 8 ||\n                                    m.taxType.typeId === 10) &&\n                                m.transactionType === \"Sale\"\n                        ); // valuable tax\n                    });\n                }, 10);\n            });\n        },\n        async loadSaleUnitItems() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    saleUnitItemHandler.list().then((res) => {\n                        if (res.data.statusCode === 200)\n                            this.saleUnitItemList = res.data.data;\n                    });\n                }, 10);\n            });\n        },\n        async loadCustomerBalance(id) {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const strFilter = id + \"?type=bal\";\n                    billingHandler\n                        .balance(strFilter)\n                        .then((res) => {\n                            if (res.data.statusCode === 200) {\n                                const data = res.data.data;\n                                if (data.length > 0) {\n                                    this.saleOrder.currentBalance = data[0].balance;\n                                }\n                            }\n                        })\n                        .catch();\n                    {\n                        this.showLoading = false;\n                    }\n                }, 10);\n            });\n        },\n        creditLimitUsage(balance, creditLimit) {\n            let num = 0;\n            let per = (balance / creditLimit) * 100\n            if (isNaN(per)) {\n                // It isn't a number\n                num = 0\n            } else {\n                // It is a number\n                num = per;\n            }\n            return num + \" %\";\n        },\n        close(data) {\n            if (this.$route.params.id === undefined) {\n                this.$router.push({\n                    name: \"Customers\",\n                    params: {\n                        data: data,\n                    },\n                });\n            } else {\n                window.history.go(-1);\n            }\n            window.console.log(data, \"close\");\n            // localStorage.data.id = JSON.stringify(data)\n        },\n        //catalog\n        loadImage(dataItem) {\n            if (dataItem.hasOwnProperty(\"images\")) {\n                if (dataItem.images.hasOwnProperty(\"default\")) {\n                    const url = this.imgURL + dataItem.images.default.thumb;\n                    return (\n                        \"<img width='50' height='50' style= 'margin: auto;display: block;' src='\" +\n                        url +\n                        \"' />\"\n                    );\n                }\n            } else {\n                return \"\";\n            }\n        },\n        async loadCatalogs() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.showLoading = true;\n                    catalogHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.catalogs = res;\n                    });\n                }, 10);\n            });\n        },\n        addCatalog(e) {\n            e.preventDefault();\n            let grid = kendo.jQuery(\"#gridCatalog\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            // window.console.log(dataItem)\n            if (dataItem.variants.length > 0) {\n                dataItem.variants.forEach((m) => {\n                    if (m.hasOwnProperty(\"variant\")) {\n                        if (m.variant.hasOwnProperty(\"id\")) {\n                            this.loadSingleItem(m.variant.id, \"i\");\n                        }\n                    }\n                });\n                this.dialogCatalog = false;\n            }\n            if (dataItem.services.length > 0) {\n                dataItem.services.forEach((m) => {\n                    if (m.hasOwnProperty(\"service\")) {\n                        if (m.service.hasOwnProperty(\"id\")) {\n                            this.loadSingleItem(m.service.id, \"s\");\n                        }\n                    }\n                });\n                this.dialogCatalog = false;\n            }\n        },\n        async loadSingleItem(itemId, type) {\n            new Promise((resolve) => {\n                resolve(\"resolved\");\n                setTimeout(() => {\n                    this.showLoading = true;\n                    productHandler.getOne(itemId).then((res) => {\n                        this.showLoading = false;\n                        let data = res;\n                        window.console.log(data);\n                        let ds = this.$refs.itemLineDS.kendoWidget(),\n                            total = ds.total();\n                        this.itemLine.id = invoicePrefix + uuid.v1();\n                        this.itemLine.item = data;\n                        if (type == \"i\") {\n                            this.itemLine.description = data.variant.saleDescription;\n                        } else {\n                            this.itemLine.description = data.saleDescription;\n                        }\n                        ds.insert(total, this.itemLine);\n                    });\n                }, 500);\n            });\n        },\n        async loadPrefix() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    prefixHandler.get(\"sale order\").then((res) => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false;\n                            this.transactionType = res.data.data;\n                            if (this.transactionType.length > 0) {\n                                this.saleOrder.transactionType = this.transactionType[0];\n                                if (!this.initsaleOrder) {\n                                    this.generateNumber();\n                                }\n                            }\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadViewsaleOrder() {\n            if (!this.initsaleOrder) {\n                this.isEdit = true\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        this.showLoading = true;\n                        saleOrderHandler\n                            .view(this.$route.params.id)\n                            .then((res) => {\n                                if (res.data.statusCode === 200) {\n                                    this.showLoading = false;\n                                    this.saleOrder = res.data.data[0];\n                                    this.quotes = this.saleOrder.refFrom || []\n                                    this.bindData();\n                                }\n                            })\n                            .catch();\n                        {\n                            this.showLoading = false;\n                        }\n                    }, 10);\n                });\n            } else {\n                this.setDefaultData()\n            }\n        },\n        async loadQuote() {\n            if (this.saleOrder.customer) {\n                this.refFrom = []\n                this.showLoading = true;\n                this.quotes = [];\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        let data = {\n                            method: \"by_customer\",\n                            customer: this.saleOrder.customer.id,\n                            segmentId: this.saleOrder.segment.id,\n                            locationId: this.saleOrder.location.id,\n                            priceLevelId: this.saleOrder.priceLevel.id,\n                            type: \"Sale Quote\",\n                        };\n                        saleOrderHandler.search(data).then((res) => {\n                            this.showLoading = false;\n                            this.quotes = res.data.data;\n                        });\n                    }, 10);\n                });\n            }\n        },\n        addQuote(data) {\n            //add item lines\n            let txnData = data.txnData || {}\n            const itemLines = data.itemLines || []\n            this.refFrom.push({\n                id: data.id || '',\n                reference: data.number || '',\n                customerId: txnData.customerId || '',\n            })\n            if (itemLines.length > 0) {\n                this.removeEmptyLine();\n                itemLines.forEach((m) => {\n                    m.txn_add_id = txnData.id;\n                    m.id = invoicePrefix + uuid.v1();\n                    let ds = this.$refs.itemLineDS.kendoWidget(),\n                        total = ds.total();\n                    ds.insert(total, m);\n                });\n                // this.addRow();\n            }\n            //add other chard\n            if (data.otherCharge.length > 0) {\n                data.otherCharge.forEach((m) => {\n                    m.txn_add_id = txnData.id;\n                    this.mOtherCharge.push(m);\n                });\n                this.autoCalculate();\n                this.onOtherChargeChange();\n            }\n            // add txnlist\n            this.txnLists.push(txnData);\n            if (txnData.lead.id !== undefined) {\n                this.txnLists.push(txnData.lead);\n            }\n            // window.console.log(this.txnLists);\n            //remove txn\n            const index = this.quotes.findIndex((item) => {\n                return data.id === item.id;\n            });\n            this.autoCalculate();\n            this.quotes.splice(index, 1);\n            // this.quotes[index].is_added = true\n            // window.console.log(this.quotes)\n            this.saleOrder.refFrom = this.removeDuplicate(this.refFrom)\n            window.console.log('ref', this.saleOrder.refFrom)\n        },\n        removeEmptyLine() {\n            const grid = kendo.jQuery(\"#gridItemLineSaleOrder\").data(\"kendoGrid\"),\n                dataSource = grid.dataSource;\n            dataSource.data().forEach((m) => {\n                if (m) {\n                    const item = m.item || {}\n                    if (item.id === undefined || item.id === '') {\n                        dataSource.remove(m);\n                    }\n                }\n            });\n        },\n        async loadTransactionRate() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const date = new Date(this.saleOrder.transactionDate)\n                        .toISOString()\n                        .substr(0, 10);\n                    const priceLevel = this.saleOrder.priceLevel;\n                    let code = \"\";\n                    if (priceLevel.hasOwnProperty(\"currency\")) {\n                        if (priceLevel.currency.hasOwnProperty(\"code\")) {\n                            code = priceLevel.currency.code;\n                        }\n                    }\n                    if (code !== undefined || code !== \"\") {\n                        this.showLoading = true;\n                        currencyHandler\n                            .getLastExchangeRateByDate(date, code)\n                            .then((res) => {\n                                if (res.data.statusCode === 200) {\n                                    this.showLoading = false;\n                                    this.exchangeRate = res.data.data[0];\n                                    this.currencyCode = this.exchangeRate.code;\n                                    this.transactionRate = this.exchangeRate.rate;\n                                    this.saleOrder.txnRate = this.exchangeRate.rate;\n                                    this.saleOrder.exchangeRate = this.exchangeRate;\n                                    this.showLoading = false;\n                                }\n                            });\n                    }\n                }, 10);\n            });\n        },\n        clear() {\n            this.id = undefined;\n            this.saleOrder = {};\n            this.itemLines = [];\n            this.customer = ''\n            this.generateNumber();\n        },\n        saveClose() {\n            let id = \"\";\n            if (this.customer.hasOwnProperty(\"id\")) {\n                id = this.customer.id || \"\";\n            }\n            if (id === \"\") {\n                this.$snotify.error(\"customer is require\");\n                return;\n            }\n            let ds = this.$refs.itemLineDS.kendoWidget();\n            let d1 = ds.data().filter((m) => m.amount > 0);\n            let dataValidate = 0;\n            d1.forEach((value, index) => {\n                if (value.item.id == undefined || value.uom.id == undefined) {\n                    this.$snotify.error(\n                        \"Please check Item or Uom  on row \" + (index + 1)\n                    );\n                } else {\n                    dataValidate += 1;\n                }\n            });\n            if (d1.length == dataValidate) {\n                this.isSaveClose = true;\n                this.saveOption = \"saveClose\";\n                this.save();\n            }\n        },\n        savePrint() {\n            this.isSavePrint = true;\n            this.saveOption = \"savePrint\";\n            this.save();\n        },\n        saveNew() {\n            this.saveOption = \"saveNew\";\n            this.isSaveNew = true;\n            this.save();\n        },\n        cancel() {\n            this.$swal({\n                title: i18n.t(\"msg_title_warning\"),\n                text: i18n.t(\"msg_discard\"),\n                icon: \"warning\",\n                showCancelButton: true,\n                cancelButtonText: i18n.t(\"cancel\"),\n                confirmButtonColor: \"#4d4848\",\n                cancelButtonColor: \"#ED1A3A\",\n                confirmButtonText: i18n.t(\"discard\"),\n            }).then((resultCen) => {\n                window.console.log(resultCen);\n                if (resultCen.value) {\n                    this.$router.go(-1);\n                }\n            });\n        },\n        saveDraft() {\n            this.saveOption = \"saveDraft\";\n            this.isSaveDraft = true;\n            this.save();\n        },\n        async save() {\n            if (!this.$refs.form.validate()) {\n                this.$refs.form.validate();\n                return;\n            }\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.removeEmptyLine();\n                    let itemLineDS = this.$refs.itemLineDS.kendoWidget(),\n                        total = itemLineDS.total();\n                    let itmLines = itemLineDS.data().filter(m => m.amount > 0).map(m => {\n                        return new ItemLineModel(m);\n                    })\n\n                    if (total <= 0) {\n                        this.$snotify.error(\"Field Required!\");\n                        return;\n                    }\n                    if (!this.isRequredPurchase) {\n                        this.saleOrder.supplier = {};\n                    } else {\n                        //is for purchase\n                        this.saleOrderType = 5;\n                    }\n                    // window.console.log(itmLines, 'itmLines')\n                    // window.console.log(JSON.stringify(itmLines), 'itmLines')\n                    let data = {\n                        id: this.saleOrder.id ? this.saleOrder.id : \"\",\n                        type: \"Sale Order\",\n                        transactionType: this.saleOrder.transactionType,\n                        number: this.saleOrder.number,\n                        abbr: this.saleOrder.transactionType.abbr,\n                        transactionDate: this.saleOrder.transactionDate,\n                        transactionDateTZ: Helper.toISODate(this.saleOrder.transactionDate),\n                        validityDate: this.saleOrder.validityDate,\n                        monthOf: this.saleOrder.monthOf,\n                        customer: this.saleOrder.customer,\n                        paymentTerm: this.saleOrder.paymentTerm,\n                        discountPromotion: {},\n                        priceLevel: this.saleOrder.priceLevel,\n                        itemLines: itmLines,\n                        segment: this.saleOrder.segment,\n                        location: this.saleOrder.location,\n                        project: this.saleOrder.project,\n                        saleChannel: this.saleOrder.saleChannel,\n                        billingAddress: this.saleOrder.billingAddress,\n                        deliveryAddress: this.saleOrder.deliveryAddress,\n                        deliveryDateTime: this.saleOrder.deliveryDateTime,\n                        transactionNote: this.saleOrder.transactionNote,\n                        subTotal: this.saleOrder.subTotal,\n                        total: this.saleOrder.total,\n                        amount: this.saleOrder.amount,\n                        discountTotal: this.saleOrder.discountTotal,\n                        specificDiscountTotal: this.saleOrder.specificDiscountTotal,\n                        deliveryFee: this.saleOrder.deliveryFee,\n                        totalTaxAmount: this.saleOrder.totalTaxAmount,\n                        currentBalance: this.saleOrder.currentBalance,\n                        creditLimit: this.saleOrder.creditLimit,\n                        saveOption: this.saveOption,\n                        txnRate: this.saleOrder.txnRate,\n                        rate: 1,\n                        exchangeRate: this.saleOrder.exchangeRate,\n                        exchangeAmount: this.saleOrder.exchangeAmount,\n                        status: 1,\n                        approvedBy: this.saleOrder.approvedBy,\n                        formTemplate: {},\n                        specificDiscountItem: this.saleOrder.specificDiscountItem,\n                        otherCharge: this.mOtherCharge,\n                        otherChargeAmount: this.saleOrder.otherChargeAmount,\n                        publicLink: \"\",\n                        taxListTotal: this.taxListTotal,\n                        customerDiscountItem: this.customerDiscountItem,\n                        customerSaleUnit: this.customerSaleUnit,\n                        loggedUser: this.loggedUser,\n                        txnList: this.txnLists,\n                        saleOrderType: this.saleOrder.saleOrderType,\n                        employee: this.saleOrder.employee,\n                        supplier: this.saleOrder.supplier,\n                        itemSubtotal: this.saleOrder.itemSubtotal,\n                        exchangeItemSubtotal: this.saleOrder.exchangeItemSubtotal,\n                        serviceSubtotal: this.saleOrder.serviceSubtotal,\n                        exchangeServiceSubtotal: this.saleOrder.exchangeServiceSubtotal,\n                        txnItmSubtotal: this.saleOrder.txnItmSubtotal,\n                        exchangeTxnItmSubtotal: this.saleOrder.exchangeTxnItmSubtotal,\n                        itemDiscount: this.saleOrder.itemDiscount,\n                        exchangeItemDiscount: this.saleOrder.exchangeItemDiscount,\n                        serviceDiscount: this.saleOrder.serviceDiscount,\n                        exchangeServiceDiscount: this.saleOrder.exchangeServiceDiscount,\n                        txnItmDiscount: this.saleOrder.txnItmDiscount,\n                        exchangeTxnItmDiscount: this.saleOrder.exchangeTxnItmDiscount,\n                        lead: {},\n                        routeView: \"sale_order_view\",\n                        exspectedDate: \"\",\n                        usedDateAt: \"\",\n                        deletedAt: \"\",\n                        deleted: 0,\n                        refFrom: this.saleOrder.refFrom || [],\n                        refTo: this.saleOrder.refTo || [],\n                        createdAt: new Date().toISOString().substr(0, 10),\n                    };\n                    // window.console.log('data', data)\n                    // window.console.log('data', JSON.stringify(data))\n                    this.showLoading = true;\n                    this.btnDisabled = true\n                    saleOrderHandler\n                        .create(data)\n                        .then((response) => {\n                            this.showLoading = false;\n                            if (response.data.statusCode === 201) {\n                                this.btnDisabled = false\n                                if (this.isSaveNew == true) {\n                                    this.setDefaultData();\n                                } else {\n                                    this.close(response.data.data);\n                                }\n                                // this.$refs.form.reset();\n                                this.$snotify.success(\"Successfully\");\n                            } else {\n                                this.btnDisabled = false\n                                this.showLoading = false;\n                            }\n                        })\n                        .catch((e) => {\n                            this.$snotify.error(\"Something went wrong\");\n                            this.errors.push(e);\n                            window.console.log(e);\n                        });\n                }, 10);\n            });\n        },\n        async loadPaymentTermList() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.customer) {\n                        const strFilter =\n                            \"?id=\" +\n                            this.customer.id +\n                            \"&transactionDate=\" +\n                            this.saleOrder.transactionDate +\n                            \"&type=Customer\";\n                        this.saleOrder.paymentTerm = {};\n                        paymentTermHandler_.get(strFilter).then((res) => {\n                            if (res.data.statusCode === 200) {\n                                const terms = res.data.data;\n                                this.saleOrder.paymentTerm = terms.term;\n                            }\n                        });\n                    }\n                }, 10);\n            });\n        },\n        async loadCreditLimit() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.customer) {\n                        const strFilter =\n                            \"?id=\" +\n                            this.customer.id +\n                            \"&transactionDate=\" +\n                            this.saleOrder.transactionDate +\n                            \"&type=Customer\";\n                        this.saleOrder.creditLimit = 0;\n                        creditLimitHandler.get(strFilter).then((res) => {\n                            if (res.data.statusCode === 200) {\n                                // this.creditLimitItem = res.data.data\n                                const credit = res.data.data;\n                                this.saleOrder.creditLimit = kendo.parseFloat(\n                                    credit.amount || 0\n                                );\n                            }\n                        });\n                    }\n                }, 10);\n            });\n        },\n        async clearUOMItem() {\n            let ds = this.$refs.itemLineDS.kendoWidget();\n            ds.data().map((n) => {\n                n.set(\"uom\", {});\n            });\n            this.isPriceLevelChanged = false;\n        },\n        onPriceLevelChange() {\n            this.isPriceLevelChanged = true;\n            this.loadTransactionRate();\n            this.clearUOMItem();\n            this.loadQuote()\n        },\n        async loadSaleOrder(id) {\n            window.console.log(id, 'load id')\n            this.showLoading = true\n            transactionHandler.view(id).then((res) => {\n                this.showLoading = false\n                this.isEdit = true\n                this.itemLines = []\n                this.saleOrder = res.data.data[0]\n                this.bindData();\n            })\n        },\n        async loadEmployeeCenter() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.employees = [];\n                    employeeHandler\n                        .center(undefined)\n                        .then((res) => {\n                            this.showLoading = true;\n                            this.saleOrder.employee = {}\n                            this.employees = []\n                            if (res.data.statusCode === 200) {\n                                this.showLoading = false;\n                                this.employees = res.data.data;\n                                // if (this.employees.length > 0) {\n                                //     this.transaction.employee = this.employees[0];\n                                // }\n                            } else {\n                                this.showLoading = false;\n                            }\n                        })\n                        .catch();\n                    {\n                        this.showLoading = false;\n                    }\n                }, 10);\n            });\n        },\n        async loadSingleData() {\n            if (this.$route.name === 'Sale Order') {\n                if (this.initsaleOrder) {\n                    // Edit Mode\n                    this.itemLines = []\n                    this.saleOrder = this.initsaleOrder;\n                    this.bindData();\n                } else {\n                    // new\n                    if (this.$route.params.id != undefined) {\n                        this.loadSaleOrder(this.$route.params.id)\n                    } else {\n                        this.setDefaultData()\n                    }\n                }\n                prefixHandler.get(\"sale order\").then((res) => {\n                    if (res.data.statusCode === 200) {\n                        this.showLoading = false;\n                        this.transactionType = res.data.data;\n                        if (this.transactionType.length > 0) {\n                            if (\n                                this.$route.params.id !== undefined ||\n                                this.$route.params.id != \"\"\n                            ) {\n                                this.saleOrder.transactionType = this.transactionType[0];\n                                if (!this.initSaleOrder && this.$route.params.id === undefined) {\n                                    this.generateNumber();\n                                }\n                            }\n                        }\n                    }\n                });\n                await this.loadPaymentTerm();\n                await this.loadSaleFormContent();\n                await this.loadOtherCharge();\n                await this.loadPriceLevel();\n                await this.loadDiscountItem(0);\n                await this.loadSaleChannel();\n                await this.loadCatalogs();\n                await this.loadLead();\n                this.loadTax();\n                this.loadSaleUnitItems();\n                this.loadSegment();\n                this.loadLocation();\n                this.loadEmployeeCenter();\n            }\n        },\n    },\n    activated() {\n        if (this.$route.params.id) {\n            this.loadViewsaleOrder();\n        }\n    },\n    watch: {\n        initsaleOrder() {\n            this.initialData();\n        },\n        '$route': 'loadSingleData',\n    },\n    created() {\n        this.loadTax();\n        this.loadSaleUnitItems();\n        // this.loadPrefix()\n        this.loadSegment();\n        this.loadLocation();\n        // localStorage.saleOrder = \"{name: 'abcssss'}\"\n    },\n    computed: {\n        appType() {\n            return dataStore.productType;\n        },\n        dateFormatted() {\n            return kendo.toString(new Date(), institute.dateFormat);\n        },\n        dateTimeFormatted() {\n            window.console.log(institute.dateFormat + \" HH:mm\", \"inst date\");\n            return kendo.toString(new Date(), institute.dateFormat + \" HH:mm\");\n        },\n        validCustomer() {\n            return this.customer.id !== undefined && this.customer.id !== null;\n        },\n        hiddenButton() {\n            if (this.$route.params.id) {\n                return true\n            } else {\n                return false\n            }\n        },\n        disabledMe() {\n            return !!this.$route.params.id;\n        },\n    },\n    mounted: async function () {\n        this.loadSingleData();\n        await this.requestData(0, this.filter, this.cusBaseUrl);\n        await this.supplierRequestData(0, this.filter, this.supBaseUrl);\n        await this.employeeRequestData(0, this.filter, this.empBaseUrl);\n    },\n};\n</script>\n\n<style scoped>\n.function_wrapper {\n    box-shadow: none !important;\n}\n\n.v-application--is-ltr .v-text-field .v-input__append-inner {\n    margin-top: 0 !important;\n}\n\n.v-input__slot {\n    background-color: #fff !important;\n}\n\n.function_content .label {\n    margin-bottom: 10px;\n    display: inline-block;\n}\n\n.border_radius10 {\n    border-radius: 10px !important;\n    background-color: #f2f2f2;\n}\n\n.pa-3.v-card h4 {\n    font-size: 18px;\n    color: #333;\n}\n\n.pa-3.v-card p {\n    font-size: 12px;\n    color: #b5b5b5;\n}\n\n.attachment_file {\n    background-color: #efeded;\n    border-radius: 0 !important;\n}\n\n.attachment_table.v-data-table table {\n    border: thin solid rgba(0, 0, 0, 0.12);\n}\n\n.attachment_table table tr th {\n    border-left: thin solid rgba(0, 0, 0, 0.12);\n    height: 35px;\n    border-right: thin solid rgba(0, 0, 0, 0.12);\n}\n\n.block_debit,\n.block_credit {\n    border-bottom: 1px solid #fff;\n}\n\n.block_debit p.number,\n.block_credit p.number {\n    font-size: 25px;\n    color: #7f7f7f;\n}\n\n.block_debit h5,\n.block_credit h5,\n.block_difference h5 {\n    text-transform: uppercase;\n    color: #7f7f7f;\n    font-size: 15px;\n    font-weight: normal;\n}\n\n.block_difference h5 {\n    font-size: 18px;\n}\n\n.block_difference h5 span {\n    font-size: 15px;\n}\n\n.custom_grid table th:last-child {\n    text-align: right !important;\n}\n\n.primary--text {\n    color: #f44336;\n}\n\n@media (min-width: 1264px) {\n    .container {\n        max-width: 1250px;\n    }\n}\n\n@media (max-width: 576px) {\n    .pt-6.col-sm-5.col-12 {\n        padding-top: 0 !important;\n    }\n\n    .code_text {\n        width: 100%;\n    }\n\n    .phone_no_pt {\n        padding-top: 0 !important;\n    }\n\n    .select_template,\n    .save_option {\n        margin-bottom: 10px;\n    }\n}\n\n.hide_small_bar_class {\n    max-width: 0;\n    transition: 0.5s ease-in;\n    flex: 0 0 0;\n}\n\n.hide_big_bar_class {\n    max-width: 100%;\n    transition: 0.5s ease-in;\n    flex: 0 0 100%;\n}\n\n.info_add {\n    background-color: #ffffff;\n}\n\n.small_sidebar {\n    height: 98%;\n    position: relative;\n    padding: 12px;\n    background-color: #edf1f5;\n}\n\n.iconArrow {\n    right: -35px;\n    position: absolute;\n    bottom: -10px;\n}\n\n.iconArrowHide {\n    position: absolute;\n    right: -7px;\n    bottom: -10px;\n}\n\n.color_grey {\n    color: #808080;\n}\n\n.card_green {\n    min-height: 70px;\n    background-color: #00b050 !important;\n    color: #ffffff;\n}\n\n.lb_bold {\n    font-size: 12px;\n}\n\n.detial_smallside_p {\n    position: absolute;\n    bottom: 10px;\n}\n\n.card_background {\n    background-color: #edf1f5;\n    min-height: 120px;\n}\n\n.deposite_input {\n    width: 100px;\n}\n\n.btn_save_draft {\n    color: #ffffff;\n    background-color: #00b0f0 !important;\n    text-transform: capitalize;\n}\n\n.save_option {\n    background-color: #203864 !important;\n}\n\n.btn_add_small {\n    height: 27px !important;\n    min-width: 25px !important;\n    font-size: 10px;\n    padding: 0 22px !important;\n    background-color: #00b050 !important;\n    color: #ffffff;\n    border-radius: 0 !important;\n}\n\n.list_site_inv {\n    background-color: #92d050;\n    color: #ffffff;\n    font-size: 12px;\n}\n\n.list_site_exp {\n    background-color: #c5e0b4;\n    color: #000000;\n    font-size: 12px;\n    line-height: 16px;\n    min-height: 40px;\n}\n\n.checkbox_inv {\n    padding: 2px;\n    margin-top: 3px;\n    margin-right: 2px;\n}\n\n.exp_select {\n    font-size: 12px !important;\n}\n\n.v-text-field {\n    padding-top: 0px !important;\n}\n</style>\n"],"sourceRoot":"src/views/customers"}]}
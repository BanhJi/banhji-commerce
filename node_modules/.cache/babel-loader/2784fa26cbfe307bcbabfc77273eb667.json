{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/budgets/SegmentBudget.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/budgets/SegmentBudget.vue","mtime":1642390528850},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWNvbW1lcmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBpMThuIH0gZnJvbSAnQC9pMThuJzsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiOwppbXBvcnQgQnVkZ2V0TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0J1ZGdldC5qcyI7CmltcG9ydCBCdWRnZXRMaW5lTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0J1ZGdldExpbmUuanMiOwppbXBvcnQgQnVkZ2V0TGluZUV4dGVuZGVkTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0J1ZGdldExpbmVFeHRlbmRlZC5qcyI7CmltcG9ydCBBY2NvdW50TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL2FjY291bnRpbmcvQWNjb3VudC5qcyI7CmltcG9ydCBTZWdtZW50TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1NlZ21lbnQuanMiOwovKiBFZGl0b3IgKi8KCmltcG9ydCBOdW1iZXJJbnB1dEJveEVkaXRvciBmcm9tICJAL3NjcmlwdHMva2VuZG9fZWRpdG9yL051bWJlcklucHV0Qm94IjsKaW1wb3J0IEFjY291bnRTZWNvbmRhcnlFZGl0b3IgZnJvbSAiQC9zY3JpcHRzL2tlbmRvX2VkaXRvci9BY2NvdW50U2Vjb25kYXJ5IjsKLyogU3RvcmUgKi8KCmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKdmFyIGluc3RpdHV0ZSA9IHN0b3JlLnN0YXRlLmluc3RpdHV0ZS5pbnN0aXR1dGU7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7Cgp2YXIgYnVkZ2V0SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL3dvcmtpbmdjYXBpdGFsL2J1ZGdldEhhbmRsZXIuanMiKTsKCnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0NvbGxlY3Rpb25zIiksCiAgICBTYXZlT3B0aW9uID0gX3JlcXVpcmUuU2F2ZU9wdGlvbjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2VnbWVudEJ1ZGdldCIsCiAgcHJvcHM6IHsKICAgIGluaXRCdWRnZXQ6IHsKICAgICAgdHlwZTogQnVkZ2V0TW9kZWwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICJMb2FkaW5nTWUiOiBmdW5jdGlvbiBMb2FkaW5nTWUoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ0AvY29tcG9uZW50cy9Mb2FkaW5nJyk7CiAgICB9LAogICAgImFwcC1zZWdtZW50LWRyb3Bkb3dubGlzdCI6IGZ1bmN0aW9uIGFwcFNlZ21lbnREcm9wZG93bmxpc3QoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ0AvY29tcG9uZW50cy9kcm9wZG93bmxpc3QvU2VnbWVudCcpOwogICAgfSwKICAgICJhcHAtZmlzY2FsLWRhdGUtZHJvcGRvd25saXN0IjogZnVuY3Rpb24gYXBwRmlzY2FsRGF0ZURyb3Bkb3dubGlzdCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9GaXNjYWxEYXRlRHJvcERvd25MaXN0Jyk7CiAgICB9LAogICAgImFwcC1yZXBvcnRpbmctbGFuZ3VhZ2UiOiBmdW5jdGlvbiBhcHBSZXBvcnRpbmdMYW5ndWFnZSgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9SZXBvcnRpbmdMYW5ndWFnZURyb3BEb3duTGlzdCIpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIE9iagogICAgICBidWRnZXQ6IG5ldyBCdWRnZXRNb2RlbCgpLAogICAgICBidWRnZXRMaW5lczogW10sCiAgICAgIHNlZ21lbnQ6IG5ldyBTZWdtZW50TW9kZWwoKSwKICAgICAgdXNlcjogSGVscGVyLmdldFVzZXIoKSwKICAgICAgLy8gRm9ybSB2YWxpZGF0aW9uCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICBhbGVydDogZmFsc2UsCiAgICAgIGVycm9yTWVzc2FnZTogIiIsCiAgICAgIHNhdmVNb2RlOiAiIiwKICAgICAgU2F2ZU9wdGlvbjogU2F2ZU9wdGlvbiwKICAgICAgLy8gUmVwb3J0aW5nIExhbmd1YWdlCiAgICAgIHJlcG9ydGluZ0xhbmd1YWdlOiAiZW5nbGlzaCIsCiAgICAgIGZpZWxkTmFtZTogJ2FjY291bnQubmFtZScsCiAgICAgIC8vIExvYWRpbmdNZQogICAgICBzaG93TG9hZGluZzogZmFsc2UsCgogICAgICAvKiBEaWFsb2cgKi8KICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRSb3c6IG5ldyBCdWRnZXRMaW5lRXh0ZW5kZWRNb2RlbCgpLAogICAgICBjcm9zc0Ftb3VudDogMCwKCiAgICAgIC8qIEtlbmRvICovCiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBidWRnZXRMaW5lRFM6IG5ldyBrZW5kby5kYXRhLlRyZWVMaXN0RGF0YVNvdXJjZSh7CiAgICAgICAgc29ydDogW3sKICAgICAgICAgIGZpZWxkOiAiYWNjb3VudC50eXBlX2NvZGUiLAogICAgICAgICAgZGlyOiAiYXNjIgogICAgICAgIH0sIHsKICAgICAgICAgIGZpZWxkOiAibnVtYmVyIiwKICAgICAgICAgIGRpcjogImFzYyIKICAgICAgICB9XSwKICAgICAgICBzY2hlbWE6IHsKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIGlkOiAidXVpZCIsCiAgICAgICAgICAgIGV4cGFuZGVkOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIEluaXRpYWwgRGF0YQogICAgaW5pdGlhbERhdGE6IGZ1bmN0aW9uIGluaXRpYWxEYXRhKCkgewogICAgICBpZiAodGhpcy5pbml0QnVkZ2V0KSB7CiAgICAgICAgLy8gRWRpdCBNb2RlCiAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICAgIHRoaXMuYnVkZ2V0ID0gdGhpcy5pbml0QnVkZ2V0OwogICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBCcmFuZCBOZXcKICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOwogICAgICAgIHRoaXMuc2V0RGVmYXVsdERhdGEoKTsKICAgICAgfQogICAgfSwKCiAgICAvKiBJbml0aWFsIFRyZWUgTGlzdCAqLwogICAgaW5pdGlhbFRyZWVMaXN0OiBmdW5jdGlvbiBpbml0aWFsVHJlZUxpc3QoKSB7CiAgICAgIGtlbmRvLmpRdWVyeSgiI2J1ZGdldExpbmVUcmVlTGlzdCIpLmtlbmRvVHJlZUxpc3QoewogICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLlRyZWVMaXN0RGF0YVNvdXJjZSgpLAogICAgICAgIGRhdGFCb3VuZDogdGhpcy5vbkRhdGFCb3VuZCwKICAgICAgICBlZGl0YWJsZTogImluY2VsbCIsCiAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgIGNvbHVtbk1lbnU6IHRydWUsCiAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zCiAgICAgIH0pOwogICAgfSwKICAgIC8vIFNldCBkZWZhdWx0IGRhdGEKICAgIHNldERlZmF1bHREYXRhOiBmdW5jdGlvbiBzZXREZWZhdWx0RGF0YSgpIHsKICAgICAgdGhpcy5idWRnZXQgPSBuZXcgQnVkZ2V0TW9kZWwoewogICAgICAgIGZpc2NhbF95ZWFyOiBpbnN0aXR1dGUuZmlzY2FsRGF0ZVswXQogICAgICB9KTsKICAgIH0sCiAgICAvLyBCaW5kIGRhdGEgZm9yIGVkaXQgbW9kZQogICAgYmluZERhdGE6IGZ1bmN0aW9uIGJpbmREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlZ21lbnRzL2dldExpc3QnKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXMuc2VnbWVudCA9IG5ldyBTZWdtZW50TW9kZWwoX3RoaXMuc2VnbWVudHMuZmluZChmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaS5pZCA9PT0gX3RoaXMuYnVkZ2V0LnNlZ21lbnRfdXVpZDsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXREZWZhdWx0QnVkZ2V0TGluZSgpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qIENvbmZpcm0gUmVsb2FkIEFjY291bnRzICovCiAgICBjb25maXJtUmVsb2FkOiBmdW5jdGlvbiBjb25maXJtUmVsb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmJ1ZGdldExpbmVEUy50b3RhbCgpID09PSAwKSB7CiAgICAgICAgdGhpcy5zZXREZWZhdWx0QnVkZ2V0TGluZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgdGl0bGU6IGkxOG4udCgncmVsb2FkX2RhdGFfPycpLAogICAgICAgICAgdGV4dDogaTE4bi50KCd0aGlzX3dpbGxfcmVzZXRfYWxsX2Ftb3VudF90b196ZXJvJyksCiAgICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCdjYW5jZWwnKSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiM0ZDQ4NDgiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjRUQxQTNBIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoJ3JlbG9hZCcpCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzMi5zZXREZWZhdWx0QnVkZ2V0TGluZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8gU2V0IEJ1ZGdldCBMaW5lcwogICAgc2V0RGVmYXVsdEJ1ZGdldExpbmU6IGZ1bmN0aW9uIHNldERlZmF1bHRCdWRnZXRMaW5lKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBnLCB0cmVlTGlzdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMzLnNob3dMb2FkaW5nID0gdHJ1ZTsgLy8gQWNjb3VudAoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdhY2NvdW50aW5nL2dldEFjY291bnRzJyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGcgPSB7fTsKCiAgICAgICAgICAgICAgICBfdGhpczMuYWNjb3VudHMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmFjY291bnRfdHlwZS5udW1iZXIgPj0gMzIgJiYgdmFsdWUuYWNjb3VudF90eXBlLm51bWJlciA8PSA0MykgewogICAgICAgICAgICAgICAgICAgIC8vRmlsdGVyIFBMIGFjY291bnRzIDMyIHRvIDQzCiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnQgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAvKiBHUk9VUElORyAqLwoKICAgICAgICAgICAgICAgICAgICAvKiBUb3AgTGV2ZWwgQWNjb3VudCBUeXBlICovCgogICAgICAgICAgICAgICAgICAgIGlmICghZ1thY2NvdW50LnR5cGVfY29kZV0pIHsKICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC50eXBlX2NvZGVdID0gbmV3IEJ1ZGdldExpbmVFeHRlbmRlZE1vZGVsKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogYWNjb3VudC50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogYWNjb3VudC50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfdXVpZDogYWNjb3VudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50LmFjY291bnRfdHlwZQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8qIFBhcmVudCBMZXZlbCAqLwoKCiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNBY2NvdW50UGFyZW50SWQgPSAiIjsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnQuaGFzT3duUHJvcGVydHkoInBhcmVudF9hY2NvdW50IikpIHsKICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGFyZW50QWNjb3VudCA9IG5ldyBBY2NvdW50TW9kZWwoYWNjb3VudC5wYXJlbnRfYWNjb3VudCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50UGFyZW50QWNjb3VudC5udW1iZXIgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLyogR2V0IGFjY291bnQgYnkgdXVpZCBvciBiYW5oamlfYWNjb3VudF9udW1iZXIgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQYXJlbnRBY2NvdW50LnV1aWQgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBHZXQgYnkgdXVpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwoX3RoaXMzLmFjY291bnRzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udXVpZCA9PT0gY3VycmVudFBhcmVudEFjY291bnQudXVpZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogR2V0IGJ5IGJhbmhqaV9hY2NvdW50X251bWJlciBiZWNhdXNlIGRlZmF1bHQgZGF0YSBoYXMgbm8gdXVpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQYXJlbnRBY2NvdW50LmJhbmhqaV9hY2NvdW50X251bWJlciAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwoX3RoaXMzLmFjY291bnRzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5iYW5oamlfYWNjb3VudF9udW1iZXIgPT09IGN1cnJlbnRQYXJlbnRBY2NvdW50LmJhbmhqaV9hY2NvdW50X251bWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgVGhpcyBBY2NvdW50IFBhcmVudCBJZCAqLwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNBY2NvdW50UGFyZW50SWQgPSBhY2NvdW50UGFyZW50LnV1aWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZpbmQgTmV4dCBQYXJlbnQgKi8KCgogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXh0UGFyZW50ID0gbmV3IEFjY291bnRNb2RlbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3VudFBhcmVudC5oYXNPd25Qcm9wZXJ0eSgicGFyZW50X2FjY291bnQiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudE9mQWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwoYWNjb3VudFBhcmVudC5wYXJlbnRfYWNjb3VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50T2ZBY2NvdW50UGFyZW50Lm51bWJlciAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50T2ZBY2NvdW50UGFyZW50LnV1aWQgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBHZXQgYnkgdXVpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFBhcmVudCA9IF90aGlzMy5hY2NvdW50cy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnV1aWQgPT09IHBhcmVudE9mQWNjb3VudFBhcmVudC51dWlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEdldCBieSBiYW5oamlfYWNjb3VudF9udW1iZXIgYmVjYXVzZSBkZWZhdWx0IGRhdGEgaGFzIG5vIHV1aWQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRPZkFjY291bnRQYXJlbnQuYmFuaGppX2FjY291bnRfbnVtYmVyICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0UGFyZW50ID0gX3RoaXMzLmFjY291bnRzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5iYW5oamlfYWNjb3VudF9udW1iZXIgPT09IHBhcmVudE9mQWNjb3VudFBhcmVudC5iYW5oamlfYWNjb3VudF9udW1iZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IFBhcmVudCBJZCAqLwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudElkID0gYWNjb3VudFBhcmVudC50eXBlX2NvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwobmV4dFBhcmVudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0UGFyZW50Lm51bWJlciAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkID0gbmV4dFBhcmVudC51dWlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IG5leHQgcGFyZW50IGFjY291bnQgKi8KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRQYXJlbnRBY2NvdW50LCBuZXh0UGFyZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IGxvb3AgdG8gZW5kICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFyZW50QWNjb3VudC5udW1iZXIgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQWRkIFBhcmVudCBMZXZlbCAqLwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnW2FjY291bnRQYXJlbnQudXVpZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudFBhcmVudC51dWlkXSA9IG5ldyBCdWRnZXRMaW5lRXh0ZW5kZWRNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGFjY291bnRQYXJlbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF91dWlkOiBhY2NvdW50UGFyZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogYWNjb3VudFBhcmVudC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkOiBwYXJlbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudFBhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEluY3JlYXNlIENvdW50ZXIgQnkgMSAqLwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEVuZCBXaGlsZSBMb29wICovCgogICAgICAgICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLyogQ2hpbGQgTGV2ZWwgKi8KCgogICAgICAgICAgICAgICAgICAgIGlmICghZ1thY2NvdW50LnV1aWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICBnW2FjY291bnQudXVpZF0gPSBuZXcgQnVkZ2V0TGluZUV4dGVuZGVkTW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiBhY2NvdW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfdXVpZDogYWNjb3VudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBudW1iZXI6IGFjY291bnQubnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLyogU2V0IFBhcmVudCBJZCBPciBTZWxmIFBhcmVudCAqLwoKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNBY2NvdW50UGFyZW50SWQgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAvKiBDaGlsZCBMZXZlbCAqLwogICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnV1aWRdLnBhcmVudElkID0gdGhpc0FjY291bnRQYXJlbnRJZDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgLyogQ2hpbGQgQXMgUGFyZW50ICovCiAgICAgICAgICAgICAgICAgICAgICBnW2FjY291bnQudXVpZF0ucGFyZW50SWQgPSBhY2NvdW50LnR5cGVfY29kZTsKICAgICAgICAgICAgICAgICAgICAgIC8qIFNlbGYgQXMgUGFyZW50ICovCiAgICAgICAgICAgICAgICAgICAgfSAvLyAxMiBtb250aHMgd2l0aCBhbW91bnQKCgogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IE1vbnRoIE9mCiAgICAgICAgICAgICAgICAgICAgICB2YXIgc2RhdGUgPSBuZXcgRGF0ZShfdGhpczMuYnVkZ2V0LmZpc2NhbF95ZWFyLnN0YXJ0X2RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgc2RhdGUuc2V0TW9udGgoc2RhdGUuZ2V0TW9udGgoKSArIGkpOwogICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnV1aWRdLm1vbnRobHlfYW1vdW50LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBtb250aF9vZjogc2RhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgNyksCiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogMAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8qIE1hdGNoaW5nIEFjY291bnQgKi8KCgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuaXNFZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxpbmUgPSBfdGhpczMuYnVkZ2V0LmxpbmVzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYWNjb3VudF91dWlkID09PSB2YWx1ZS51dWlkOwogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKGJsaW5lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJldmVyc2UgTmF0dXJlICovCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXR1cmUgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IE5hdXJlIGlzIERyID0gMSAqLwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnQuYWNjb3VudF90eXBlLm5hdHVyZS50b0xvd2VyQ2FzZSgpID09PSAiY3IiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0dXJlID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC51dWlkXS5zZWNvbmRhcnlfYWNjb3VudCA9IG5ldyBBY2NvdW50TW9kZWwoX3RoaXMzLnNlY29uZGFyeUFjY291bnRzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS51dWlkID09PSBibGluZS5zZWNvbmRhcnlfYWNjb3VudF91dWlkOwogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC51dWlkXS5ub3RlID0gYmxpbmUubm90ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnV1aWRdLmFtb3VudCA9IGJsaW5lLmFtb3VudCAqIG5hdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnV1aWRdLm1vbnRobHlfYW1vdW50ID0gYmxpbmUubW9udGhseV9hbW91bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC51dWlkXS5tb250aGx5X2Ftb3VudC5mb3JFYWNoKGZ1bmN0aW9uIChtYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIG1hLmFtb3VudCA9IG1hLmFtb3VudCAqIG5hdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8qIEJpbmQgQnVkZ2V0IExpbmUgKi8KCgogICAgICAgICAgICAgICAgX3RoaXMzLmJ1ZGdldExpbmVEUy5kYXRhKE9iamVjdC52YWx1ZXMoZykpOwogICAgICAgICAgICAgICAgLyogU2V0IE5ldyBEYXRhc291cmNlICovCgoKICAgICAgICAgICAgICAgIHRyZWVMaXN0ID0ga2VuZG8ualF1ZXJ5KCIjYnVkZ2V0TGluZVRyZWVMaXN0IikuZGF0YSgia2VuZG9UcmVlTGlzdCIpOwogICAgICAgICAgICAgICAgdHJlZUxpc3Quc2V0RGF0YVNvdXJjZShfdGhpczMuYnVkZ2V0TGluZURTKTsKICAgICAgICAgICAgICAgIF90aGlzMy5zaG93TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBSb3cgVGVtcGxhdGUKICAgIG5hbWVUbXBsOiBmdW5jdGlvbiBuYW1lVG1wbChkYXRhSXRlbSkgewogICAgICAvKiBOYW1lIGluIGxhbmd1YWdlICovCiAgICAgIHZhciBuYW1lID0gZGF0YUl0ZW0uYWNjb3VudC5uYW1lOwoKICAgICAgaWYgKHRoaXMucmVwb3J0aW5nTGFuZ3VhZ2UgPT09ICJsb2NhbCIpIHsKICAgICAgICBuYW1lID0gZGF0YUl0ZW0uYWNjb3VudC5sb2NhbF9uYW1lOwogICAgICB9CiAgICAgIC8qIERlZmluZSByZXN1bHQgKi8KCgogICAgICB2YXIgcmVzdWx0ID0gIjxzcGFuPiIuY29uY2F0KGRhdGFJdGVtLm51bWJlciwgIiAtICIpLmNvbmNhdChuYW1lLCAiPC9zcGFuPiIpOyAvLyAvKiBUb3AgTGV2ZWwgKi8KCiAgICAgIGlmIChkYXRhSXRlbS5wYXJlbnRJZCA9PT0gbnVsbCkgewogICAgICAgIHJlc3VsdCA9ICI8c3BhbiBzdHlsZT0nZm9udC13ZWlnaHQ6IGJvbGRlcjsnPiIuY29uY2F0KG5hbWUsICI8L3NwYW4+Iik7CiAgICAgIH0KICAgICAgLyogUGFyZW50IExldmVsICovCgoKICAgICAgaWYgKGRhdGFJdGVtLmhhc0NoaWxkcmVuICYmIGRhdGFJdGVtLm51bWJlci5sZW5ndGggPiAzKSB7CiAgICAgICAgcmVzdWx0ID0gIjxzcGFuIHN0eWxlPSdmb250LXdlaWdodDogYm9sZGVyOyc+Ii5jb25jYXQoZGF0YUl0ZW0ubnVtYmVyLCAiIC0gIikuY29uY2F0KG5hbWUsICI8L3NwYW4+Iik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgc2Vjb25kYXJ5QWNjb3VudFRtcGw6IGZ1bmN0aW9uIHNlY29uZGFyeUFjY291bnRUbXBsKGRhdGFJdGVtKSB7CiAgICAgIHZhciByZXN1bHQgPSAiIjsKCiAgICAgIGlmIChkYXRhSXRlbS5zZWNvbmRhcnlfYWNjb3VudC51dWlkICE9PSAnJykgewogICAgICAgIHJlc3VsdCA9ICI8c3Bhbj4iLmNvbmNhdChkYXRhSXRlbS5zZWNvbmRhcnlfYWNjb3VudC5udW1iZXIsICIgLSAiKS5jb25jYXQoZGF0YUl0ZW0uc2Vjb25kYXJ5X2FjY291bnQubmFtZSwgIjwvc3Bhbj4iKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBjb3B5QWNyb3NzOiBmdW5jdGlvbiBjb3B5QWNyb3NzKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdHJlZUxpc3QgPSBrZW5kby5qUXVlcnkoIiNidWRnZXRMaW5lVHJlZUxpc3QiKS5kYXRhKCJrZW5kb1RyZWVMaXN0Iik7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSB0cmVlTGlzdC5kYXRhSXRlbShrZW5kby5qUXVlcnkoZS50YXJnZXQpLmNsb3Nlc3QoInRyIikpOwogICAgICB0aGlzLmRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgYXBwbHlBY3Jvc3NBbW91bnQ6IGZ1bmN0aW9uIGFwcGx5QWNyb3NzQW1vdW50KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3cubW9udGhseV9hbW91bnQuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YWx1ZS5hbW91bnQgPSBrZW5kby5wYXJzZUZsb2F0KF90aGlzNC5jcm9zc0Ftb3VudCk7CiAgICAgIH0pOwogICAgICB0aGlzLnNlbGVjdGVkUm93LmFtb3VudCA9IGtlbmRvLnBhcnNlRmxvYXQodGhpcy5jcm9zc0Ftb3VudCkgKiAxMjsKICAgICAgLyogUmVmcmVzaCAqLwoKICAgICAgdmFyIHRyZWVMaXN0ID0ga2VuZG8ualF1ZXJ5KCIjYnVkZ2V0TGluZVRyZWVMaXN0IikuZGF0YSgia2VuZG9UcmVlTGlzdCIpOwogICAgICB0cmVlTGlzdC5yZWZyZXNoKCk7CiAgICAgIHRoaXMuY3Jvc3NBbW91bnQgPSAwOwogICAgfSwKICAgIGdlbmVyYXRlQ29sdW1uOiBmdW5jdGlvbiBnZW5lcmF0ZUNvbHVtbigpIHsKICAgICAgdmFyIGhlYWRlckF0dHJpYnV0ZXMgPSB7CiAgICAgICAgY2xhc3M6ICJ0YWJsZS1oZWFkZXItY2VsbCIsCiAgICAgICAgc3R5bGU6ICJmb250LXdlaWdodDogYm9sZDt0ZXh0LWFsaWduOiBjZW50ZXI7cGFkZGluZy1yaWdodDogMzVweDsgZm9udC1zaXplOiAxNHB4IgogICAgICB9LAogICAgICAgICAgYXR0cmlidXRlcyA9IHsKICAgICAgICBjbGFzczogInRhYmxlLWNlbGwiLAogICAgICAgIHN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMTRweCIKICAgICAgfTsKICAgICAgdmFyIGNvbHVtbnMgPSBbewogICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkTmFtZSwKICAgICAgICB0aXRsZTogaTE4bi50KCJhY2NvdW50IiksCiAgICAgICAgdGVtcGxhdGU6IHRoaXMubmFtZVRtcGwsCiAgICAgICAgZWRpdGFibGU6IGZ1bmN0aW9uIGVkaXRhYmxlKCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDMwMCwKICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBoZWFkZXJBdHRyaWJ1dGVzCiAgICAgIH0sIHsKICAgICAgICBmaWVsZDogInNlY29uZGFyeV9hY2NvdW50IiwKICAgICAgICB0aXRsZTogaTE4bi50KCJzZWNvbmRhcnlfYWNjb3VudCIpLAogICAgICAgIHRlbXBsYXRlOiB0aGlzLnNlY29uZGFyeUFjY291bnRUbXBsLAogICAgICAgIGVkaXRvcjogQWNjb3VudFNlY29uZGFyeUVkaXRvciwKICAgICAgICBoaWRkZW46ICF0aGlzLiRzdG9yZS5zdGF0ZS5hY2NvdW50aW5nLnNlY29uZGFyeUFjY291bnQsCiAgICAgICAgZWRpdGFibGU6IGZ1bmN0aW9uIGVkaXRhYmxlKGRhdGFJdGVtKSB7CiAgICAgICAgICByZXR1cm4gIWRhdGFJdGVtLmhhc0NoaWxkcmVuOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDMwMAogICAgICB9LCB7CiAgICAgICAgZmllbGQ6ICJub3RlIiwKICAgICAgICB0aXRsZTogaTE4bi50KCJub3RlIiksCiAgICAgICAgd2lkdGg6IDIwMAogICAgICB9LCB7CiAgICAgICAgdGl0bGU6IGkxOG4udCgiYWN0aW9uIiksCiAgICAgICAgY29tbWFuZDogW3sKICAgICAgICAgIG5hbWU6ICJjb3B5Y3Jvc3MiLAogICAgICAgICAgdGV4dDogImNvcHkgY3Jvc3MiLAogICAgICAgICAgY2xpY2s6IHRoaXMuY29weUFjcm9zcwogICAgICAgIH1dLAogICAgICAgIHdpZHRoOiAxNTAKICAgICAgfV07CiAgICAgIC8qIDEyIE1vbnRocyAqLwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CiAgICAgICAgY29sdW1ucy5wdXNoKHsKICAgICAgICAgIGZpZWxkOiAibW9udGhseV9hbW91bnRbIi5jb25jYXQoaSwgIl0uYW1vdW50IiksCiAgICAgICAgICBmb3JtYXQ6ICJ7MDpufSIsCiAgICAgICAgICBlZGl0b3I6IE51bWJlcklucHV0Qm94RWRpdG9yLAogICAgICAgICAgd2lkdGg6IDE1MCwKICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMKICAgICAgICB9KTsKICAgICAgfQogICAgICAvKiBUb3RhbCAqLwoKCiAgICAgIGNvbHVtbnMucHVzaCh7CiAgICAgICAgZmllbGQ6ICJhbW91bnQiLAogICAgICAgIHRpdGxlOiBpMThuLnQoInRvdGFsIiksCiAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgIGVkaXRhYmxlOiBmdW5jdGlvbiBlZGl0YWJsZSgpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcwogICAgICB9KTsKICAgICAgLyogU2V0IEFsbCBDb2x1bW5zICovCgogICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zOwogICAgfSwKCiAgICAvKiBPbiBkYXRhYm91bmQgKi8KICAgIG9uRGF0YUJvdW5kOiBmdW5jdGlvbiBvbkRhdGFCb3VuZChlKSB7CiAgICAgIC8qIFRpdGxlcyAqLwogICAgICB2YXIgdHJlZUxpc3QgPSBrZW5kby5qUXVlcnkoIiNidWRnZXRMaW5lVHJlZUxpc3QiKS5kYXRhKCJrZW5kb1RyZWVMaXN0Iik7CgogICAgICBpZiAodGhpcy5idWRnZXQuZmlzY2FsX3llYXIpIHsKICAgICAgICB2YXIgZmlzY2FsTW9udGhzID0gSGVscGVyLmdlbmVyYXRlRmlzY2FsTW9udGhzKHRoaXMuYnVkZ2V0LmZpc2NhbF95ZWFyLnN0YXJ0X2RhdGUsIHRoaXMuYnVkZ2V0LmZpc2NhbF95ZWFyLmVuZF9kYXRlLCAiMTIiKTsKCiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAxMjsgaysrKSB7CiAgICAgICAgICB2YXIgZWxlbWVudCA9IGZpc2NhbE1vbnRoc1trXTsKICAgICAgICAgIHRyZWVMaXN0LnRoZWFkLmZpbmQoIltkYXRhLWZpZWxkfj0nbW9udGhseV9hbW91bnRbIi5jb25jYXQoaywgIl0uYW1vdW50J10iKSkuaHRtbChlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLyogSGVhZGVycyAqLwoKCiAgICAgIHZhciBoZWFkZXJzID0gZS5zZW5kZXIudGhlYWQuY2hpbGRyZW4oKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB0aCA9IGtlbmRvLmpRdWVyeShoZWFkZXJzW2ldKTsKICAgICAgICB0aC5jc3MoImZvbnQtd2VpZ2h0IiwgImJvbGQiKTsKICAgICAgICB0aC5jc3MoInRleHQtYWxpZ24iLCAiY2VudGVyIik7CiAgICAgIH0KICAgICAgLyogSXRlbXMgKi8KCgogICAgICB2YXIgaXRlbXMgPSBlLnNlbmRlci5pdGVtcygpOwoKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpdGVtcy5sZW5ndGg7IGorKykgewogICAgICAgIHZhciBkYXRhSXRlbSA9IGUuc2VuZGVyLmRhdGFJdGVtKGl0ZW1zW2pdKTsKICAgICAgICB2YXIgcm93ID0ga2VuZG8ualF1ZXJ5KGl0ZW1zW2pdKTsKICAgICAgICAvKiBQYXJlbnQgaW4gYm9sZCAqLwoKICAgICAgICBpZiAoZGF0YUl0ZW0uZ2V0KCJoYXNDaGlsZHJlbiIpIHx8IGRhdGFJdGVtLmdldCgicGFyZW50SWQiKSA9PT0gbnVsbCkgewogICAgICAgICAgcm93LmZpbmQoIltkYXRhLWNvbW1hbmQ9J2NvcHljcm9zcyddIikuaGlkZSgpOwogICAgICAgICAgcm93LmNzcygiZm9udC13ZWlnaHQiLCAiYm9sZCIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIERhdGFTb3VyY2UgQ2hhbmdlcwogICAgb25EYXRhU291cmNlQ2hhbmdlczogZnVuY3Rpb24gb25EYXRhU291cmNlQ2hhbmdlcyhlKSB7CiAgICAgIGlmIChlLmZpZWxkKSB7CiAgICAgICAgdmFyIGRhdGFSb3cgPSBlLml0ZW1zWzBdOwoKICAgICAgICBpZiAoZS5maWVsZCA9PT0gInNlY29uZGFyeV9hY2NvdW50IikgewogICAgICAgICAgaWYgKGRhdGFSb3cuc2Vjb25kYXJ5X2FjY291bnQgIT09IG51bGwpIHsKICAgICAgICAgICAgZGF0YVJvdy5zZXQoInNlY29uZGFyeV9hY2NvdW50X3V1aWQiLCBkYXRhUm93LnNlY29uZGFyeV9hY2NvdW50LnV1aWQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgd2hlbiBkZXNlbGVjdAogICAgICAgICAgICBkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY291bnRfdXVpZCIsICIiKTsKICAgICAgICAgICAgZGF0YVJvdy5zZXQoInNlY29uZGFyeV9hY2NvdW50IiwgbmV3IEFjY291bnRNb2RlbCgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVNvdXJjZUF1dG9DYWxjdWxhdGUoKTsKICAgIH0sCiAgICAvLyBBdXRvIENhbGN1bGF0ZSBJbiBEYXRhU291cmNlCiAgICBkYXRhU291cmNlQXV0b0NhbGN1bGF0ZTogZnVuY3Rpb24gZGF0YVNvdXJjZUF1dG9DYWxjdWxhdGUoKSB7CiAgICAgIC8vIFN1bSBBbW91bnQKICAgICAgdGhpcy5idWRnZXRMaW5lRFMuZGF0YSgpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHN1bUFtdCA9IDA7CiAgICAgICAgdmFsdWUubW9udGhseV9hbW91bnQuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7CiAgICAgICAgICBzdW1BbXQgKz0gZWxlLmFtb3VudDsKICAgICAgICB9KTsKICAgICAgICB2YWx1ZS5zZXQoImFtb3VudCIsIHN1bUFtdCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIFNocmluayBEYXRhCiAgICBzaHJpbmtEYXRhOiBmdW5jdGlvbiBzaHJpbmtEYXRhKCkgewogICAgICAvLyBTZWdtZW50CiAgICAgIHRoaXMuYnVkZ2V0LnNlZ21lbnRfdXVpZCA9IHRoaXMuc2VnbWVudC5pZDsgLy8gTGluZXMKCiAgICAgIHZhciBsaW5lcyA9IFtdOwogICAgICB0aGlzLmJ1ZGdldExpbmVEUy5kYXRhKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAvLyBBZGQgYWNjb3VudCBsaW5lIHdpdGggYW1vdW50IG5vdCAwCiAgICAgICAgaWYgKHZhbHVlLmFtb3VudCAhPT0gMCkgewogICAgICAgICAgLyogQXBwbHkgTmF0dXJlICovCiAgICAgICAgICBpZiAodmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUubmF0dXJlLnRvTG93ZXJDYXNlKCkgPT09ICJjciIpIHsKICAgICAgICAgICAgLyogQW1vdW50ICovCiAgICAgICAgICAgIHZhbHVlLmFtb3VudCA9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgICAgICAvKiBNb250aGx5IEFtb3VudCAqLwoKICAgICAgICAgICAgdmFsdWUubW9udGhseV9hbW91bnQuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7CiAgICAgICAgICAgICAgZWxlLmFtb3VudCA9IGVsZS5hbW91bnQgKiAtMTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgbGluZXMucHVzaChuZXcgQnVkZ2V0TGluZU1vZGVsKHZhbHVlKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5idWRnZXQubGluZXMgPSBsaW5lczsgLy8gVXNlcgoKICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7CiAgICAgICAgdGhpcy5idWRnZXQubW9kaWZpZWRfYnkgPSB0aGlzLnVzZXI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5idWRnZXQuY3JlYXRlZF9ieSA9IHRoaXMudXNlcjsKICAgICAgfQogICAgfSwKICAgIC8vIFZhbGlkYXRpbmcKICAgIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkgewogICAgICB2YXIgcmVzdWx0ID0gdHJ1ZSwKICAgICAgICAgIG1zZyA9ICIiOyAvLyBOYW1lCgogICAgICBpZiAodGhpcy5idWRnZXQubmFtZSA9PT0gJycpIHsKICAgICAgICBtc2cgKz0gIjxwPiIuY29uY2F0KGkxOG4udCgibmFtZV9pc19yZXF1aXJlZCIpLCAiPC9wPiIpOwogICAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICB9IC8vIFNlZ21lbnQKCgogICAgICBpZiAodGhpcy5zZWdtZW50LmlkID09PSAnJykgewogICAgICAgIG1zZyArPSAiPHA+Ii5jb25jYXQoaTE4bi50KCJzZWdtZW50X2lzX3JlcXVpcmVkIiksICI8L3A+Iik7CiAgICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgIH0gLy8gU2VnbWVudAoKCiAgICAgIGlmICh0aGlzLmJ1ZGdldC5maXNjYWxfeWVhci5pZCA9PT0gJycpIHsKICAgICAgICBtc2cgKz0gIjxwPiIuY29uY2F0KGkxOG4udCgiZmlzY2FsX2RhdGVfaXNfcmVxdWlyZWQiKSwgIjwvcD4iKTsKICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgfSAvLyBBbW91bnQKCgogICAgICB2YXIgaGFzWmVyb0Ftb3VudCA9IHRydWU7CiAgICAgIHRoaXMuYnVkZ2V0TGluZURTLmRhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZS5hbW91bnQgIT09IDApIHsKICAgICAgICAgIGhhc1plcm9BbW91bnQgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGhhc1plcm9BbW91bnQpIHsKICAgICAgICBtc2cgKz0gIjxwPiIuY29uY2F0KGkxOG4udCgicGxlYXNlX2VudGVyX2Ftb3VudCIpLCAiPC9wPiIpOwogICAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICB9IC8vIFNob3cgQWxlcnQKCgogICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IG1zZzsKICAgICAgdGhpcy5hbGVydCA9IGZhbHNlOwoKICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmFsZXJ0ID0gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICAvLyBBbGwgU2F2ZXMKICAgIG9uU2F2ZU9wdGlvbkNsaWNrOiBmdW5jdGlvbiBvblNhdmVPcHRpb25DbGljayhtb2RlKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUuJHJlZnMuZm9ybS52YWxpZGF0ZSgpICYmIF90aGlzNS52YWxpZGF0ZUZvcm0oKSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuc2F2ZU1vZGUgPSBtb2RlOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LnNhdmUoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgdGl0bGU6IGkxOG4udCgnbXNnX3RpdGxlX3dhcm5pbmcnKSwKICAgICAgICB0ZXh0OiBpMThuLnQoJ21zZ19kaXNjYXJkJyksCiAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCdjYW5jZWwnKSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNFRDFBM0EiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoJ2Rpc2NhcmQnKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpczYuY2xlYXIoKTsKCiAgICAgICAgICBfdGhpczYuJHJvdXRlci5nbygtMSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2F2ZU1vZGUgPSAnJzsKICAgICAgdGhpcy5idWRnZXQgPSBuZXcgQnVkZ2V0TW9kZWwoKTsKICAgICAgdGhpcy5zZWdtZW50ID0gbmV3IFNlZ21lbnRNb2RlbCgpLCAvLyBEYXRhc291cmUKICAgICAgdGhpcy5idWRnZXRMaW5lRFMuZGF0YShbXSk7CiAgICAgIHRoaXMuc2V0RGVmYXVsdERhdGEoKTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBzZWxmID0gdGhpczsgLy8gU2hyaW5rIERhdGEKCiAgICAgIHRoaXMuc2hyaW5rRGF0YSgpOyAvLyBTeW5jIERhdGEKCiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICBidWRnZXRIYW5kbGVyLnNhdmUodGhpcy5idWRnZXQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAvKiBVcGRhdGUgVnVleCBEYXRhICovCiAgICAgICAgICBfdGhpczcuJHN0b3JlLmRpc3BhdGNoKCdidWRnZXRzL3NhdmVCdWRnZXQnLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICBzZWxmLnJlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM3LiRzbm90aWZ5LmVycm9yKGkxOG4udCgiZXJyb3Jfc29tZXRoaW5nX3dyb25nIikpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBfdGhpczcuJHNub3RpZnkuZXJyb3IoZXJyb3IpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIFJlc3BvbnNlIFN0YXR1cwogICAgcmVzcG9uc2VTdGF0dXM6IGZ1bmN0aW9uIHJlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgIC8qIFNhdmUgQ2xvc2Ugb3IgRGVsZXRlIEFjdGlvbiAqLwogICAgICAgIGlmICh0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLlNBVkVDTE9TRSB8fCB0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLkRFTEVURSkgewogICAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qIFJlc2V0IERhdGEgKi8KCgogICAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgICAvKiBBbGVydCBTdWNjZXNzICovCgogICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcyhpMThuLnQoInN1Y2Nlc3NmdWwiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogQWxlcnQgRXJyb3IgKi8KICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKGkxOG4udCgiZXJyb3Jfc29tZXRoaW5nX3dyb25nIikpOwogICAgICB9CiAgICB9LAogICAgLy8gT24gUmVwb3JpbnQgTGFuZ3VhZ2UgQ2hhbmdlcwogICAgb25SZXBvcnRpbmdMYW5ndWFnZUNoYW5nZXM6IGZ1bmN0aW9uIG9uUmVwb3J0aW5nTGFuZ3VhZ2VDaGFuZ2VzKCkgewogICAgICB0aGlzLmZpZWxkTmFtZSA9ICJhY2NvdW50Lm5hbWUiOwoKICAgICAgaWYgKHRoaXMucmVwb3J0aW5nTGFuZ3VhZ2UgPT09ICJsb2NhbCIpIHsKICAgICAgICB0aGlzLmZpZWxkTmFtZSA9ICJhY2NvdW50LmxvY2FsX25hbWUiOwogICAgICB9CgogICAgICB0aGlzLmdlbmVyYXRlQ29sdW1uKCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgaW5pdEJ1ZGdldDogImluaXRpYWxEYXRhIgogIH0sCiAgY29tcHV0ZWQ6IG1hcFN0YXRlKHsKICAgIGFjY291bnRzOiBmdW5jdGlvbiBhY2NvdW50cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYWNjb3VudGluZy5hY2NvdW50czsKICAgIH0sCiAgICBzZWNvbmRhcnlBY2NvdW50czogZnVuY3Rpb24gc2Vjb25kYXJ5QWNjb3VudHMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmFjY291bnRpbmcuc2Vjb25kYXJ5QWNjb3VudHM7CiAgICB9LAogICAgc2VnbWVudHM6IGZ1bmN0aW9uIHNlZ21lbnRzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zZWdtZW50cy5saXN0OwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBJbml0aWFsIERhdGEKICAgIHRoaXMuaW5pdGlhbERhdGEoKTsKICAgIHRoaXMuZ2VuZXJhdGVDb2x1bW4oKTsKICAgIHRoaXMuaW5pdGlhbFRyZWVMaXN0KCk7CiAgICAvKiBEYXRhc291cmNlIGJpbmQgZnVuY3Rpb25zICovCgogICAgdGhpcy5idWRnZXRMaW5lRFMuYmluZCgiY2hhbmdlIiwgdGhpcy5vbkRhdGFTb3VyY2VDaGFuZ2VzKTsKICB9Cn07"},{"version":3,"sources":["SegmentBudget.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA,SAAA,IAAA,QAAA,QAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,OAAA,MAAA,MAAA,aAAA;AACA,OAAA,WAAA,MAAA,2BAAA;AACA,OAAA,eAAA,MAAA,+BAAA;AACA,OAAA,uBAAA,MAAA,uCAAA;AACA,OAAA,YAAA,MAAA,uCAAA;AACA,OAAA,YAAA,MAAA,4BAAA;AAEA;;AACA,OAAA,oBAAA,MAAA,uCAAA;AACA,OAAA,sBAAA,MAAA,yCAAA;AAEA;;AACA,OAAA,KAAA,MAAA,SAAA;AACA,IAAA,SAAA,GAAA,KAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA;AACA,SAAA,QAAA,QAAA,MAAA;;AAEA,IAAA,aAAA,GAAA,OAAA,CAAA,mDAAA,CAAA;;AACA,eAAA,OAAA,CAAA,qCAAA,CAAA;AAAA,IAAA,UAAA,YAAA,UAAA;;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAFA;AAOA,EAAA,UAAA,EAAA;AACA,iBAAA;AAAA,aAAA,OAAA,sBAAA,CAAA;AAAA,KADA;AAEA,gCAAA;AAAA,aAAA,OAAA,mCAAA,CAAA;AAAA,KAFA;AAGA,oCAAA;AAAA,aAAA,OAAA,qDAAA,CAAA;AAAA,KAHA;AAIA,8BAAA;AAAA,aAAA,OAAA,4DAAA,CAAA;AAAA;AAJA,GAPA;AAaA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA;AACA,MAAA,MAAA,EAAA,IAAA,WAAA,EAFA;AAGA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,IAAA,YAAA,EAJA;AAKA,MAAA,IAAA,EAAA,MAAA,CAAA,OAAA,EALA;AAMA;AACA,MAAA,KAAA,EAAA,IAPA;AAQA,MAAA,MAAA,EAAA,KARA;AASA,MAAA,KAAA,EAAA,KATA;AAUA,MAAA,YAAA,EAAA,EAVA;AAWA,MAAA,QAAA,EAAA,EAXA;AAYA,MAAA,UAAA,EAAA,UAZA;AAaA;AACA,MAAA,iBAAA,EAAA,SAdA;AAeA,MAAA,SAAA,EAAA,cAfA;AAgBA;AACA,MAAA,WAAA,EAAA,KAjBA;;AAkBA;AACA,MAAA,MAAA,EAAA,KAnBA;AAoBA,MAAA,WAAA,EAAA,IAAA,uBAAA,EApBA;AAqBA,MAAA,WAAA,EAAA,CArBA;;AAsBA;AACA,MAAA,OAAA,EAAA,EAvBA;AAwBA,MAAA,YAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,CAAA;AACA,QAAA,IAAA,EAAA,CACA;AAAA,UAAA,KAAA,EAAA,mBAAA;AAAA,UAAA,GAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,KAAA,EAAA,QAAA;AAAA,UAAA,GAAA,EAAA;AAAA,SAFA,CADA;AAKA,QAAA,MAAA,EAAA;AACA,UAAA,KAAA,EAAA;AACA,YAAA,EAAA,EAAA,MADA;AAEA,YAAA,QAAA,EAAA;AAFA;AADA;AALA,OAAA;AAxBA,KAAA;AAAA,GAbA;AAkDA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA,yBAEA;AACA,UAAA,KAAA,UAAA,EAAA;AAAA;AACA,aAAA,MAAA,GAAA,IAAA;AACA,aAAA,MAAA,GAAA,KAAA,UAAA;AACA,aAAA,QAAA;AACA,OAJA,MAIA;AAAA;AACA,aAAA,MAAA,GAAA,KAAA;AACA,aAAA,cAAA;AACA;AACA,KAXA;;AAYA;AACA,IAAA,eAbA,6BAaA;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,aAAA,CAAA;AACA,QAAA,UAAA,EAAA,IAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,EADA;AAEA,QAAA,SAAA,EAAA,KAAA,WAFA;AAGA,QAAA,QAAA,EAAA,QAHA;AAIA,QAAA,SAAA,EAAA,IAJA;AAKA,QAAA,UAAA,EAAA,IALA;AAMA,QAAA,OAAA,EAAA,KAAA;AANA,OAAA;AAQA,KAtBA;AAuBA;AACA,IAAA,cAxBA,4BAwBA;AACA,WAAA,MAAA,GAAA,IAAA,WAAA,CAAA;AACA,QAAA,WAAA,EAAA,SAAA,CAAA,UAAA,CAAA,CAAA;AADA,OAAA,CAAA;AAGA,KA5BA;AA6BA;AACA,IAAA,QA9BA,sBA8BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,CAFA;;AAAA;AAGA,gBAAA,KAAA,CAAA,OAAA,GAAA,IAAA,YAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,yBAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,MAAA,CAAA,YAAA;AAAA,iBAAA,CAAA,CAAA;;AAEA,gBAAA,KAAA,CAAA,oBAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,KApCA;;AAqCA;AACA,IAAA,aAtCA,2BAsCA;AAAA;;AACA,UAAA,KAAA,YAAA,CAAA,KAAA,OAAA,CAAA,EAAA;AACA,aAAA,oBAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CAAA;AACA,UAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,eAAA,CADA;AAEA,UAAA,IAAA,EAAA,IAAA,CAAA,CAAA,CAAA,oCAAA,CAFA;AAGA,UAAA,IAAA,EAAA,SAHA;AAIA,UAAA,gBAAA,EAAA,IAJA;AAKA,UAAA,gBAAA,EAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CALA;AAMA,UAAA,kBAAA,EAAA,SANA;AAOA,UAAA,iBAAA,EAAA,SAPA;AAQA,UAAA,iBAAA,EAAA,IAAA,CAAA,CAAA,CAAA,QAAA;AARA,SAAA,EASA,IATA,CASA,UAAA,MAAA,EAAA;AACA,cAAA,MAAA,CAAA,KAAA,EAAA;AACA,YAAA,MAAA,CAAA,oBAAA;AACA;AACA,SAbA;AAcA;AACA,KAzDA;AA0DA;AACA,IAAA,oBA3DA,kCA2DA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,WAAA,GAAA,IAAA,CADA,CAGA;;AAHA;AAAA,uBAIA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,wBAAA,CAJA;;AAAA;AAMA,gBAAA,CANA,GAMA,EANA;;AAOA,gBAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,sBAAA,KAAA,CAAA,YAAA,CAAA,MAAA,IAAA,EAAA,IAAA,KAAA,CAAA,YAAA,CAAA,MAAA,IAAA,EAAA,EAAA;AAAA;AACA,wBAAA,OAAA,GAAA,KAAA;AAEA;;AACA;;AACA,wBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA;AACA,sBAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,GAAA,IAAA,uBAAA,CAAA;AACA,wBAAA,IAAA,EAAA,OAAA,CAAA,SADA;AAEA,wBAAA,MAAA,EAAA,OAAA,CAAA,SAFA;AAGA,wBAAA,YAAA,EAAA,OAAA,CAAA,IAHA;AAIA,wBAAA,OAAA,EAAA,OAAA,CAAA;AAJA,uBAAA,CAAA;AAMA;AAEA;;;AACA,wBAAA,mBAAA,GAAA,EAAA;;AACA,wBAAA,OAAA,CAAA,cAAA,CAAA,gBAAA,CAAA,EAAA;AAAA;AACA,4BAAA,oBAAA,GAAA,IAAA,YAAA,CAAA,OAAA,CAAA,cAAA,CAAA;AAAA,4BAAA,OAAA,GAAA,CAAA;;AACA,+BAAA,oBAAA,CAAA,MAAA,KAAA,EAAA,EAAA;AACA;AACA,8BAAA,aAAA,GAAA,IAAA,YAAA,EAAA;;AACA,8BAAA,oBAAA,CAAA,IAAA,KAAA,EAAA,EAAA;AAAA;AACA,4BAAA,aAAA,GAAA,IAAA,YAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,qCAAA,IAAA,CAAA,IAAA,KAAA,oBAAA,CAAA,IAAA;AAAA,6BAAA,CAAA,CAAA;AACA,2BAFA,MAEA;AAAA;AACA,gCAAA,oBAAA,CAAA,qBAAA,KAAA,EAAA,EAAA;AACA,8BAAA,aAAA,GAAA,IAAA,YAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,uCAAA,IAAA,CAAA,qBAAA,KAAA,oBAAA,CAAA,qBAAA;AAAA,+BAAA,CAAA,CAAA;AACA;AACA;AAEA;;;AACA,8BAAA,OAAA,KAAA,CAAA,EAAA;AACA,4BAAA,mBAAA,GAAA,aAAA,CAAA,IAAA;AACA;AAEA;;;AACA,8BAAA,UAAA,GAAA,IAAA,YAAA,EAAA;;AACA,8BAAA,aAAA,CAAA,cAAA,CAAA,gBAAA,CAAA,EAAA;AAAA;AACA,kCAAA,qBAAA,GAAA,IAAA,YAAA,CAAA,aAAA,CAAA,cAAA,CAAA;;AACA,kCAAA,qBAAA,CAAA,MAAA,KAAA,EAAA,EAAA;AACA,oCAAA,qBAAA,CAAA,IAAA,KAAA,EAAA,EAAA;AAAA;AACA,kCAAA,UAAA,GAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,2CAAA,IAAA,CAAA,IAAA,KAAA,qBAAA,CAAA,IAAA;AAAA,mCAAA,CAAA;AACA,iCAFA,MAEA;AAAA;AACA,sCAAA,qBAAA,CAAA,qBAAA,KAAA,EAAA,EAAA;AACA,oCAAA,UAAA,GAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,6CAAA,IAAA,CAAA,qBAAA,KAAA,qBAAA,CAAA,qBAAA;AAAA,qCAAA,CAAA;AACA;AACA;AACA;AAVA;AAWA;AAEA;;;AACA,8BAAA,QAAA,GAAA,aAAA,CAAA,SAAA;AACA,0BAAA,UAAA,GAAA,IAAA,YAAA,CAAA,UAAA,CAAA;;AACA,8BAAA,UAAA,CAAA,MAAA,KAAA,EAAA,EAAA;AACA,4BAAA,QAAA,GAAA,UAAA,CAAA,IAAA;AAEA;;AACA,4BAAA,MAAA,CAAA,MAAA,CAAA,oBAAA,EAAA,UAAA;AACA,2BALA,MAKA;AACA;AACA,4BAAA,oBAAA,CAAA,MAAA,GAAA,EAAA;AACA;AAEA;;;AACA,8BAAA,CAAA,CAAA,CAAA,aAAA,CAAA,IAAA,CAAA,EAAA;AACA,4BAAA,CAAA,CAAA,aAAA,CAAA,IAAA,CAAA,GAAA,IAAA,uBAAA,CAAA;AACA,8BAAA,IAAA,EAAA,aAAA,CAAA,IADA;AAEA,8BAAA,YAAA,EAAA,aAAA,CAAA,IAFA;AAGA,8BAAA,MAAA,EAAA,aAAA,CAAA,MAHA;AAIA,8BAAA,QAAA,EAAA,QAJA;AAKA,8BAAA,OAAA,EAAA;AALA,6BAAA,CAAA;AAOA;AAEA;;;AACA,0BAAA,OAAA;AACA;AAAA;;AA3DA;AA4DA;AAEA;;;AACA,wBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,EAAA;AACA,sBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,IAAA,uBAAA,CAAA;AACA,wBAAA,IAAA,EAAA,OAAA,CAAA,IADA;AAEA,wBAAA,YAAA,EAAA,OAAA,CAAA,IAFA;AAGA,wBAAA,MAAA,EAAA,OAAA,CAAA,MAHA;AAIA,wBAAA,OAAA,EAAA;AAJA,uBAAA,CAAA;AAMA;AAEA;;;AACA,wBAAA,mBAAA,KAAA,EAAA,EAAA;AAAA;AACA,sBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,QAAA,GAAA,mBAAA;AACA,qBAFA,MAEA;AAAA;AACA,sBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,QAAA,GAAA,OAAA,CAAA,SAAA;AAAA;AACA,qBA7FA,CA+FA;;;AACA,yBAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,EAAA,EAAA,CAAA,EAAA,EAAA;AACA;AACA,0BAAA,KAAA,GAAA,IAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA;AACA,sBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA,KAAA,CAAA;AAEA,sBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,cAAA,CAAA,IAAA,CAAA;AACA,wBAAA,QAAA,EAAA,KAAA,CAAA,WAAA,GAAA,MAAA,CAAA,CAAA,EAAA,CAAA,CADA;AAEA,wBAAA,MAAA,EAAA;AAFA,uBAAA;AAIA;AAEA;;;AACA,wBAAA,MAAA,CAAA,MAAA,EAAA;AACA,0BAAA,KAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,+BAAA,IAAA,CAAA,YAAA,KAAA,KAAA,CAAA,IAAA;AAAA,uBAAA,CAAA;;AACA,0BAAA,KAAA,EAAA;AACA;AACA,4BAAA,MAAA,GAAA,CAAA;AAAA;;AACA,4BAAA,OAAA,CAAA,YAAA,CAAA,MAAA,CAAA,WAAA,OAAA,IAAA,EAAA;AACA,0BAAA,MAAA,GAAA,CAAA,CAAA;AACA;;AAEA,wBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,iBAAA,GAAA,IAAA,YAAA,CAAA,MAAA,CAAA,iBAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,iCAAA,IAAA,CAAA,IAAA,KAAA,KAAA,CAAA,sBAAA;AAAA,yBAAA,CAAA,CAAA;AACA,wBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AACA,wBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,MAAA,GAAA,KAAA,CAAA,MAAA,GAAA,MAAA;AACA,wBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,cAAA,GAAA,KAAA,CAAA,cAAA;AACA,wBAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,cAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,0BAAA,EAAA,CAAA,MAAA,GAAA,EAAA,CAAA,MAAA,GAAA,MAAA;AACA,yBAFA;AAGA;AACA;AACA;AACA,iBAhIA;AAkIA;;;AACA,gBAAA,MAAA,CAAA,YAAA,CAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA;AAEA;;;AACA,gBAAA,QA7IA,GA6IA,KAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,IAAA,CAAA,eAAA,CA7IA;AA8IA,gBAAA,QAAA,CAAA,aAAA,CAAA,MAAA,CAAA,YAAA;AAEA,gBAAA,MAAA,CAAA,WAAA,GAAA,KAAA;;AAhJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiJA,KA5MA;AA6MA;AACA,IAAA,QA9MA,oBA8MA,QA9MA,EA8MA;AACA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,OAAA,CAAA,IAAA;;AACA,UAAA,KAAA,iBAAA,KAAA,OAAA,EAAA;AACA,QAAA,IAAA,GAAA,QAAA,CAAA,OAAA,CAAA,UAAA;AACA;AAEA;;;AACA,UAAA,MAAA,mBAAA,QAAA,CAAA,MAAA,gBAAA,IAAA,YAAA,CARA,CAUA;;AACA,UAAA,QAAA,CAAA,QAAA,KAAA,IAAA,EAAA;AACA,QAAA,MAAA,gDAAA,IAAA,YAAA;AACA;AAEA;;;AACA,UAAA,QAAA,CAAA,WAAA,IAAA,QAAA,CAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,MAAA,gDAAA,QAAA,CAAA,MAAA,gBAAA,IAAA,YAAA;AACA;;AAEA,aAAA,MAAA;AACA,KAnOA;AAoOA,IAAA,oBApOA,gCAoOA,QApOA,EAoOA;AACA,UAAA,MAAA,GAAA,EAAA;;AACA,UAAA,QAAA,CAAA,iBAAA,CAAA,IAAA,KAAA,EAAA,EAAA;AACA,QAAA,MAAA,mBAAA,QAAA,CAAA,iBAAA,CAAA,MAAA,gBAAA,QAAA,CAAA,iBAAA,CAAA,IAAA,YAAA;AACA;;AAEA,aAAA,MAAA;AACA,KA3OA;AA4OA,IAAA,UA5OA,sBA4OA,CA5OA,EA4OA;AACA,MAAA,CAAA,CAAA,cAAA;AAEA,UAAA,QAAA,GAAA,KAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,IAAA,CAAA,eAAA,CAAA;AACA,WAAA,WAAA,GAAA,QAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,CAAA,CAAA,MAAA,EAAA,OAAA,CAAA,IAAA,CAAA,CAAA;AAEA,WAAA,MAAA,GAAA,IAAA;AACA,KAnPA;AAoPA,IAAA,iBApPA,+BAoPA;AAAA;;AACA,WAAA,MAAA,GAAA,KAAA;AAEA,WAAA,WAAA,CAAA,cAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,WAAA,CAAA;AACA,OAFA;AAGA,WAAA,WAAA,CAAA,MAAA,GAAA,KAAA,CAAA,UAAA,CAAA,KAAA,WAAA,IAAA,EAAA;AAEA;;AACA,UAAA,QAAA,GAAA,KAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,IAAA,CAAA,eAAA,CAAA;AACA,MAAA,QAAA,CAAA,OAAA;AAEA,WAAA,WAAA,GAAA,CAAA;AACA,KAjQA;AAkQA,IAAA,cAlQA,4BAkQA;AACA,UAAA,gBAAA,GAAA;AACA,QAAA,KAAA,EAAA,mBADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA;AAAA,UAIA,UAAA,GAAA;AACA,QAAA,KAAA,EAAA,YADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAJA;AASA,UAAA,OAAA,GAAA,CACA;AACA,QAAA,KAAA,EAAA,KAAA,SADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,SAAA,CAFA;AAGA,QAAA,QAAA,EAAA,KAAA,QAHA;AAIA,QAAA,QAAA,EAAA,oBAAA;AAAA,iBAAA,KAAA;AAAA,SAJA;AAKA,QAAA,KAAA,EAAA,GALA;AAMA,QAAA,gBAAA,EAAA;AANA,OADA,EASA;AACA,QAAA,KAAA,EAAA,mBADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,mBAAA,CAFA;AAGA,QAAA,QAAA,EAAA,KAAA,oBAHA;AAIA,QAAA,MAAA,EAAA,sBAJA;AAKA,QAAA,MAAA,EAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,UAAA,CAAA,gBALA;AAMA,QAAA,QAAA,EAAA,kBAAA,QAAA,EAAA;AACA,iBAAA,CAAA,QAAA,CAAA,WAAA;AACA,SARA;AASA,QAAA,KAAA,EAAA;AATA,OATA,EAoBA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,MAAA,CAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OApBA,EAyBA;AACA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CADA;AAEA,QAAA,OAAA,EAAA,CAAA;AACA,UAAA,IAAA,EAAA,WADA;AAEA,UAAA,IAAA,EAAA,YAFA;AAGA,UAAA,KAAA,EAAA,KAAA;AAHA,SAAA,CAFA;AAOA,QAAA,KAAA,EAAA;AAPA,OAzBA,CAAA;AAoCA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,EAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA;AACA,UAAA,KAAA,2BAAA,CAAA,aADA;AAEA,UAAA,MAAA,EAAA,OAFA;AAGA,UAAA,MAAA,EAAA,oBAHA;AAIA,UAAA,KAAA,EAAA,GAJA;AAKA,UAAA,UAAA,EAAA;AALA,SAAA;AAOA;AAEA;;;AACA,MAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,OAAA,CAFA;AAGA,QAAA,MAAA,EAAA,OAHA;AAIA,QAAA,QAAA,EAAA,oBAAA;AAAA,iBAAA,KAAA;AAAA,SAJA;AAKA,QAAA,KAAA,EAAA,GALA;AAMA,QAAA,UAAA,EAAA;AANA,OAAA;AASA;;AACA,WAAA,OAAA,GAAA,OAAA;AACA,KAvUA;;AAwUA;AACA,IAAA,WAzUA,uBAyUA,CAzUA,EAyUA;AACA;AACA,UAAA,QAAA,GAAA,KAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,IAAA,CAAA,eAAA,CAAA;;AACA,UAAA,KAAA,MAAA,CAAA,WAAA,EAAA;AACA,YAAA,YAAA,GAAA,MAAA,CAAA,oBAAA,CAAA,KAAA,MAAA,CAAA,WAAA,CAAA,UAAA,EAAA,KAAA,MAAA,CAAA,WAAA,CAAA,QAAA,EAAA,IAAA,CAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,EAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,OAAA,GAAA,YAAA,CAAA,CAAA,CAAA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,IAAA,wCAAA,CAAA,iBAAA,IAAA,CAAA,OAAA;AACA;AACA;AAEA;;;AACA,UAAA,OAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,QAAA,EAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,EAAA,GAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA;AACA,QAAA,EAAA,CAAA,GAAA,CAAA,aAAA,EAAA,MAAA;AACA,QAAA,EAAA,CAAA,GAAA,CAAA,YAAA,EAAA,QAAA;AACA;AAEA;;;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,EAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,QAAA,GAAA,CAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CAAA;AACA,YAAA,GAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CAAA;AAEA;;AACA,YAAA,QAAA,CAAA,GAAA,CAAA,aAAA,KAAA,QAAA,CAAA,GAAA,CAAA,UAAA,MAAA,IAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,4BAAA,EAAA,IAAA;AACA,UAAA,GAAA,CAAA,GAAA,CAAA,aAAA,EAAA,MAAA;AACA;AACA;AACA,KAxWA;AAyWA;AACA,IAAA,mBA1WA,+BA0WA,CA1WA,EA0WA;AACA,UAAA,CAAA,CAAA,KAAA,EAAA;AACA,YAAA,OAAA,GAAA,CAAA,CAAA,KAAA,CAAA,CAAA,CAAA;;AAEA,YAAA,CAAA,CAAA,KAAA,KAAA,mBAAA,EAAA;AACA,cAAA,OAAA,CAAA,iBAAA,KAAA,IAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,wBAAA,EAAA,OAAA,CAAA,iBAAA,CAAA,IAAA;AACA,WAFA,MAEA;AACA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,wBAAA,EAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,IAAA,YAAA,EAAA;AACA;AACA;AACA;;AAEA,WAAA,uBAAA;AACA,KA1XA;AA2XA;AACA,IAAA,uBA5XA,qCA4XA;AACA;AACA,WAAA,YAAA,CAAA,IAAA,GAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,MAAA,GAAA,CAAA;AACA,QAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,IAAA,GAAA,CAAA,MAAA;AACA,SAFA;AAGA,QAAA,KAAA,CAAA,GAAA,CAAA,QAAA,EAAA,MAAA;AACA,OANA;AAOA,KArYA;AAsYA;AACA,IAAA,UAvYA,wBAuYA;AACA;AACA,WAAA,MAAA,CAAA,YAAA,GAAA,KAAA,OAAA,CAAA,EAAA,CAFA,CAIA;;AACA,UAAA,KAAA,GAAA,EAAA;AACA,WAAA,YAAA,CAAA,IAAA,GAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA;AACA,YAAA,KAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,MAAA,CAAA,WAAA,OAAA,IAAA,EAAA;AACA;AACA,YAAA,KAAA,CAAA,MAAA,GAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AAEA;;AACA,YAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,MAAA,GAAA,GAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,aAFA;AAGA;;AAEA,UAAA,KAAA,CAAA,IAAA,CAAA,IAAA,eAAA,CAAA,KAAA,CAAA;AACA;AACA,OAhBA;AAiBA,WAAA,MAAA,CAAA,KAAA,GAAA,KAAA,CAvBA,CAyBA;;AACA,UAAA,KAAA,MAAA,EAAA;AACA,aAAA,MAAA,CAAA,WAAA,GAAA,KAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,MAAA,CAAA,UAAA,GAAA,KAAA,IAAA;AACA;AACA,KAtaA;AAuaA;AACA,IAAA,YAxaA,0BAwaA;AACA,UAAA,MAAA,GAAA,IAAA;AAAA,UACA,GAAA,GAAA,EADA,CADA,CAIA;;AACA,UAAA,KAAA,MAAA,CAAA,IAAA,KAAA,EAAA,EAAA;AACA,QAAA,GAAA,iBAAA,IAAA,CAAA,CAAA,CAAA,kBAAA,CAAA,SAAA;AACA,QAAA,MAAA,GAAA,KAAA;AACA,OARA,CAUA;;;AACA,UAAA,KAAA,OAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,QAAA,GAAA,iBAAA,IAAA,CAAA,CAAA,CAAA,qBAAA,CAAA,SAAA;AACA,QAAA,MAAA,GAAA,KAAA;AACA,OAdA,CAgBA;;;AACA,UAAA,KAAA,MAAA,CAAA,WAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,QAAA,GAAA,iBAAA,IAAA,CAAA,CAAA,CAAA,yBAAA,CAAA,SAAA;AACA,QAAA,MAAA,GAAA,KAAA;AACA,OApBA,CAsBA;;;AACA,UAAA,aAAA,GAAA,IAAA;AACA,WAAA,YAAA,CAAA,IAAA,GAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,aAAA,GAAA,KAAA;AAEA,iBAAA,KAAA;AACA;AACA,OANA;;AAOA,UAAA,aAAA,EAAA;AACA,QAAA,GAAA,iBAAA,IAAA,CAAA,CAAA,CAAA,qBAAA,CAAA,SAAA;AACA,QAAA,MAAA,GAAA,KAAA;AACA,OAlCA,CAoCA;;;AACA,WAAA,YAAA,GAAA,GAAA;AACA,WAAA,KAAA,GAAA,KAAA;;AACA,UAAA,MAAA,KAAA,KAAA,EAAA;AACA,aAAA,KAAA,GAAA,IAAA;AACA;;AAEA,aAAA,MAAA;AACA,KApdA;AAqdA;AACA,IAAA,iBAtdA,6BAsdA,IAtdA,EAsdA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,MAAA,MAAA,CAAA,YAAA,EAAA,EAAA;AACA,kBAAA,MAAA,CAAA,QAAA,GAAA,IAAA;;AACA,kBAAA,MAAA,CAAA,IAAA;AACA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA,KA3dA;AA4dA,IAAA,MA5dA,oBA4dA;AAAA;;AACA,WAAA,KAAA,CAAA;AACA,QAAA,KAAA,EAAA,IAAA,CAAA,CAAA,CAAA,mBAAA,CADA;AAEA,QAAA,IAAA,EAAA,IAAA,CAAA,CAAA,CAAA,aAAA,CAFA;AAGA,QAAA,IAAA,EAAA,SAHA;AAIA,QAAA,gBAAA,EAAA,IAJA;AAKA,QAAA,gBAAA,EAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CALA;AAMA,QAAA,kBAAA,EAAA,SANA;AAOA,QAAA,iBAAA,EAAA,SAPA;AAQA,QAAA,iBAAA,EAAA,IAAA,CAAA,CAAA,CAAA,SAAA;AARA,OAAA,EASA,IATA,CASA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;AACA,OAdA;AAeA,KA5eA;AA6eA,IAAA,KA7eA,mBA6eA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,WAAA,QAAA,GAAA,EAAA;AAEA,WAAA,MAAA,GAAA,IAAA,WAAA,EAAA;AACA,WAAA,OAAA,GAAA,IAAA,YAAA,EAAA,EAEA;AACA,WAAA,YAAA,CAAA,IAAA,CAAA,EAAA,CAHA;AAKA,WAAA,cAAA;AACA,KAxfA;AAyfA,IAAA,IAzfA,kBAyfA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA,CADA,CAGA;;AACA,WAAA,UAAA,GAJA,CAMA;;AACA,WAAA,WAAA,GAAA,IAAA;AACA,MAAA,aAAA,CAAA,IAAA,CAAA,KAAA,MAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,EAAA;AACA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,QAAA,CAAA,IAAA;;AAEA,UAAA,IAAA,CAAA,cAAA,CAAA,QAAA;AACA,SALA,MAKA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,uBAAA,CAAA;AACA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,KAAA,EAAA;AACA,QAAA,IAAA,CAAA,WAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA;AACA,OAdA,EAeA,OAfA,CAeA,YAAA;AACA,QAAA,IAAA,CAAA,WAAA,GAAA,KAAA;AACA,OAjBA;AAkBA,KAnhBA;AAohBA;AACA,IAAA,cArhBA,0BAqhBA,QArhBA,EAqhBA;AACA,UAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA;AACA,YACA,KAAA,QAAA,KAAA,UAAA,CAAA,SAAA,IACA,KAAA,QAAA,KAAA,UAAA,CAAA,MAFA,EAGA;AACA,cAAA,KAAA,MAAA,EAAA;AACA,iBAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;AACA;AAEA;;;AACA,aAAA,KAAA;AAEA;;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,CAAA,YAAA,CAAA;AACA,OAhBA,MAgBA;AACA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,uBAAA,CAAA;AACA;AACA,KA1iBA;AA2iBA;AACA,IAAA,0BA5iBA,wCA4iBA;AACA,WAAA,SAAA,GAAA,cAAA;;AACA,UAAA,KAAA,iBAAA,KAAA,OAAA,EAAA;AACA,aAAA,SAAA,GAAA,oBAAA;AACA;;AAEA,WAAA,cAAA;AACA;AAnjBA,GAlDA;AAumBA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GAvmBA;AA0mBA,EAAA,QAAA,EAAA,QAAA,CAAA;AACA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,UAAA,CAAA,QAAA;AAAA,KADA;AAEA,IAAA,iBAAA,EAAA,2BAAA,KAAA;AAAA,aAAA,KAAA,CAAA,UAAA,CAAA,iBAAA;AAAA,KAFA;AAGA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,QAAA,CAAA,IAAA;AAAA;AAHA,GAAA,CA1mBA;AA+mBA,EAAA,OA/mBA,qBA+mBA;AACA;AACA,SAAA,WAAA;AACA,SAAA,cAAA;AACA,SAAA,eAAA;AAEA;;AACA,SAAA,YAAA,CAAA,IAAA,CAAA,QAAA,EAAA,KAAA,mBAAA;AACA;AAvnBA,CAAA","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border rounded-sm\"\n                        color=\"white\"\n                    >\n                        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                            <v-card elevation=\"0\" class=\"pt-2 mb-3\">\n                                <h2 class=\"mb-0\">{{ $t(\"segment_budget\") }}</h2>\n                                <v-icon\n                                    onclick=\"window.history.go(-1); return false;\"\n                                    style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                    class=\"float-right\"\n                                >close\n                                </v-icon>\n                            </v-card>\n                            \n                            <!-- Search -->\n                            <v-card\n                                outlined\n                                class=\"px-4 no_border pt-4 pb-3\"\n                                color=\"grayBg\"\n                                min-height=\"98px\"\n                            >\n                                <v-row>\n                                    <v-col md=\"6\" sm=\"4\" cols=\"12\" class=\"py-0\">\n                                        <label class=\"label\">{{ $t(\"budget_name\") }}</label>\n                                        <v-text-field\n                                            class=\"mt-1\"\n                                            v-model=\"budget.name\"\n                                            :placeholder=\"$t('name')\"\n                                            outlined\n                                            required\n                                        />\n                                    </v-col>\n                                     <v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0  pt-3 text-center\">\n                                        <v-checkbox\n                                            v-model=\"budget.use_consolidation\"\n                                            true-value=\"1\"\n                                            false-value=\"0\"\n                                            :label=\"$t('used_consolidation')\" />\n                                    </v-col>\n                                     <v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n                                            <app-reporting-language\n                                                :initLanguage=\"reportingLanguage\"\n                                                @emitLanguage=\"reportingLanguage = $event\"\n                                                @onChanged=\"onReportingLanguageChanges\"\n                                            />\n                                    </v-col>\n                                </v-row>\n                                <v-row>\n                                    <v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n                                        <label class=\"label\">{{ $t(\"fiscal_year\") }}</label>\n                                        <app-fiscal-date-dropdownlist\n                                            :initFiscalDate=\"budget.fiscal_year\"\n                                            @emitFiscalDate=\"budget.fiscal_year = $event\"\n                                        />\n                                    </v-col>\n                                      <v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n                                        <label class=\"label\">{{ $t(\"segment\") }}</label>\n                                        <app-segment-dropdownlist\n                                            :initSegment=\"segment\"\n                                            @emitSegment=\"segment = $event\"\n                                        />\n                                    </v-col>\n                                    <v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-6\">\n                                        <v-btn\n                                            class=\"text-capitalize  white--text\"\n                                            color=\"primary\"\n                                            @click=\"confirmReload\"\n                                        >\n                                            {{ $t(\"load_account\") }}\n                                        </v-btn>\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n                            \n                            <!-- Dialog -->\n                            <div class=\"text-center\">\n                                <v-dialog\n                                    v-model=\"dialog\"\n                                    width=\"500\"\n                                >\n                                    <v-card>\n                                        <v-card-title class=\"text-h5 grey lighten-2\">\n                                            {{ selectedRow.account.number }} - {{ selectedRow.account.name }}\n                                        </v-card-title>\n\n                                        <v-card-text>\n                                            <v-text-field\n                                                class=\"mt-7\"\n                                                type=\"number\"\n                                                v-model=\"crossAmount\"\n                                                outlined\n                                            />\n                                        </v-card-text>\n\n                                        <v-divider></v-divider>\n\n                                        <v-card-actions>\n                                            <v-btn\n                                                color=\"secondary\"\n                                                text\n                                                @click=\"dialog = false\"\n                                                outlined\n                                            >\n                                                Cancel\n                                            </v-btn>\n                                            <v-spacer></v-spacer>\n                                            <v-btn\n                                                color=\"primary\"\n                                                text\n                                                @click=\"applyAcrossAmount\"\n                                                outlined\n                                            >\n                                                Enter\n                                            </v-btn>\n                                        </v-card-actions>\n                                    </v-card>\n                                </v-dialog>\n                            </div>\n\n                            <!-- Tree List -->\n                            <v-card\n                                outlined\n                                class=\"rounded-0 mt-4\"\n                                color=\"white\"\n                                min-height=\"98px\"\n                            >\n                                <v-row>\n                                    <v-col sm=\"12\" cols=\"12\" class=\"\">\n                                        <!-- Tree List -->\n                                        <div id=\"budgetLineTreeList\" />\n                                    </v-col>\n                                </v-row>\n\n                                <LoadingMe\n                                    type=\"loading\"\n                                    :isLoading=\"showLoading\"\n                                    :myLoading=\"true\"\n                                    :fullPage=\"true\" />\n\n                                <v-card-actions>\n                                    <v-alert\n                                        type=\"warning\"\n                                        v-model=\"alert\"\n                                        dismissible\n                                    >\n                                        <span v-html=\"errorMessage\"/>\n                                    </v-alert>\n\n                                    <v-btn\n                                        color=\"black\"\n                                        class=\"text-capitalize  white--text\"\n                                        @click=\"cancel\"\n                                    >{{ $t(\"cancel\") }}\n                                    </v-btn>\n\n                                    <v-spacer />\n                                    \n                                    <v-btn\n                                        class=\"text-capitalize white--text\"\n                                        color=\"primary\"\n                                        @click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n                                    >\n                                        {{ $t(\"save_close\") }}\n                                    </v-btn>\n                                </v-card-actions>\n                            </v-card>\n                        </v-form>\n                    </v-card>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport {i18n} from '@/i18n'\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\nimport BudgetModel from \"@/scripts/model/Budget.js\";\nimport BudgetLineModel from \"@/scripts/model/BudgetLine.js\";\nimport BudgetLineExtendedModel from \"@/scripts/model/BudgetLineExtended.js\";\nimport AccountModel from \"@/scripts/model/accounting/Account.js\";\nimport SegmentModel from \"@/scripts/model/Segment.js\";\n\n/* Editor */\nimport NumberInputBoxEditor from \"@/scripts/kendo_editor/NumberInputBox\";\nimport AccountSecondaryEditor from \"@/scripts/kendo_editor/AccountSecondary\";\n\n/* Store */\nimport store from \"@/store\"\nconst institute = store.state.institute.institute\nimport { mapState } from 'vuex';\n\nconst budgetHandler = require(\"@/scripts/handler/workingcapital/budgetHandler.js\");\nconst { SaveOption } = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n    name: \"SegmentBudget\",\n    props: {\n        initBudget: {\n            type: BudgetModel,\n        },\n    },\n    components: {\n        \"LoadingMe\": () => import('@/components/Loading'),\n        \"app-segment-dropdownlist\": () => import('@/components/dropdownlist/Segment'),\n        \"app-fiscal-date-dropdownlist\": () => import('@/components/kendo_templates/FiscalDateDropDownList'),\n        \"app-reporting-language\": () => import(\"@/components/kendo_templates/ReportingLanguageDropDownList\"),\n    },\n    data: () => ({\n        // Obj\n        budget: new BudgetModel(),\n        budgetLines: [],\n        segment: new SegmentModel(),\n        user: Helper.getUser(),\n        // Form validation\n        valid: true,\n        isEdit: false,\n        alert: false,\n        errorMessage: \"\",\n        saveMode: \"\",\n        SaveOption: SaveOption,\n        // Reporting Language\n        reportingLanguage: \"english\",\n        fieldName : 'account.name',\n        // LoadingMe\n        showLoading: false,\n        /* Dialog */\n        dialog: false,\n        selectedRow: new BudgetLineExtendedModel(),\n        crossAmount: 0,\n        /* Kendo */\n        columns: [],\n        budgetLineDS : new kendo.data.TreeListDataSource({\n            sort: [\n                { field: \"account.type_code\", dir: \"asc\" },\n                { field: \"number\", dir: \"asc\" },\n            ],\n            schema: {\n                model: {\n                    id: \"uuid\",\n                    expanded: true\n                }\n            }\n        }),\n    }),\n    methods: {\n        // Initial Data\n        initialData() {\n            if(this.initBudget){ // Edit Mode\n                this.isEdit = true;\n                this.budget = this.initBudget;\n                this.bindData();\n            }else{ // Brand New\n                this.isEdit = false;\n                this.setDefaultData();\n            }\n        },\n        /* Initial Tree List */\n        initialTreeList(){\n            kendo.jQuery(\"#budgetLineTreeList\").kendoTreeList({\n                dataSource: new kendo.data.TreeListDataSource(),\n                dataBound: this.onDataBound,\n                editable: \"incell\",\n                resizable: true,\n                columnMenu: true,\n                columns: this.columns,\n            });\n        },\n        // Set default data\n        setDefaultData() {\n            this.budget = new BudgetModel({\n                fiscal_year: institute.fiscalDate[0],\n            });\n        },\n        // Bind data for edit mode\n        async bindData() {\n            /* Segment */\n            await this.$store.dispatch('segments/getList');\n\t\t\tthis.segment = new SegmentModel(this.segments.find(i => i.id === this.budget.segment_uuid));\n            \n            this.setDefaultBudgetLine();\n        },\n        /* Confirm Reload Accounts */\n        confirmReload() {\n            if(this.budgetLineDS.total() === 0){\n                this.setDefaultBudgetLine();\n            }else{\n                this.$swal({\n                    title: i18n.t('reload_data_?'),\n                    text: i18n.t('this_will_reset_all_amount_to_zero'),\n                    icon: \"warning\",\n                    showCancelButton: true,\n                    cancelButtonText: i18n.t('cancel'),\n                    confirmButtonColor: \"#4d4848\",\n                    cancelButtonColor: \"#ED1A3A\",\n                    confirmButtonText: i18n.t('reload'),\n                }).then((result) => {\n                    if (result.value) {\n                        this.setDefaultBudgetLine();\n                    }\n                });\n            }\n        },\n        // Set Budget Lines\n        async setDefaultBudgetLine (){\n            this.showLoading = true;\n\n            // Account\n            await this.$store.dispatch('accounting/getAccounts');\n            \n            let g = {};\n            this.accounts.forEach(value => {\n                if(value.account_type.number >= 32 && value.account_type.number <= 43){//Filter PL accounts 32 to 43\n                    let account = value;\n\n                    /* GROUPING */\n                    /* Top Level Account Type */\n                    if(!g[account.type_code]){\n                        g[account.type_code] = new BudgetLineExtendedModel({\n                            uuid : account.type_code,\n                            number : account.type_code,\n                            account_uuid : account.uuid,\n                            account : account.account_type,\n                        });\n                    }\n\n                    /* Parent Level */\n                    let thisAccountParentId = \"\";\n                    if(account.hasOwnProperty(\"parent_account\")){\n                        let currentParentAccount = new AccountModel(account.parent_account), counter = 0;\n                        while (currentParentAccount.number !== \"\") {\n                            /* Get account by uuid or banhji_account_number */\n                            let accountParent = new AccountModel();\n                            if(currentParentAccount.uuid !== \"\"){/* Get by uuid */\n                                accountParent = new AccountModel(this.accounts.find((item) => item.uuid === currentParentAccount.uuid));\n                            }else{/* Get by banhji_account_number because default data has no uuid */\n                                if(currentParentAccount.banhji_account_number !== \"\"){\n                                    accountParent = new AccountModel(this.accounts.find((item) => item.banhji_account_number === currentParentAccount.banhji_account_number));\n                                }\n                            }\n\n                            /* Set This Account Parent Id */\n                            if(counter === 0){\n                                thisAccountParentId = accountParent.uuid;\n                            }\n\n                            /* Find Next Parent */\n                            let nextParent = new AccountModel();\n                            if(accountParent.hasOwnProperty(\"parent_account\")){\n                                let parentOfAccountParent = new AccountModel(accountParent.parent_account);\n                                if(parentOfAccountParent.number !== \"\"){\n                                    if(parentOfAccountParent.uuid !== \"\"){/* Get by uuid */\n                                        nextParent = this.accounts.find((item) => item.uuid === parentOfAccountParent.uuid);\n                                    }else{/* Get by banhji_account_number because default data has no uuid */\n                                        if(parentOfAccountParent.banhji_account_number !== \"\"){\n                                            nextParent = this.accounts.find((item) => item.banhji_account_number === parentOfAccountParent.banhji_account_number);\n                                        }\n                                    }\n                                }\n                            }\n                            \n                            /* Set Parent Id */\n                            let parentId = accountParent.type_code;\n                            nextParent = new AccountModel(nextParent);\n                            if(nextParent.number !== \"\"){\n                                parentId = nextParent.uuid;\n\n                                /* Set next parent account */\n                                Object.assign(currentParentAccount, nextParent);\n                            }else{\n                                /* Set loop to end */\n                                currentParentAccount.number = \"\";\n                            }\n\n                            /* Add Parent Level */\n                            if(!g[accountParent.uuid]){\n                                g[accountParent.uuid] = new BudgetLineExtendedModel({\n                                    uuid : accountParent.uuid,\n                                    account_uuid : accountParent.uuid,\n                                    number : accountParent.number,\n                                    parentId : parentId,\n                                    account : accountParent,\n                                });\n                            }\n                            \n                            /* Increase Counter By 1 */\n                            counter++;\n                        }/* End While Loop */\n                    }\n                    \n                    /* Child Level */\n                    if(!g[account.uuid]){\n                        g[account.uuid] = new BudgetLineExtendedModel({\n                            uuid : account.uuid,\n                            account_uuid : account.uuid,\n                            number : account.number,\n                            account : account,\n                        });\n                    }\n\n                    /* Set Parent Id Or Self Parent */\n                    if(thisAccountParentId !== \"\"){/* Child Level */\n                        g[account.uuid].parentId = thisAccountParentId;\n                    }else{/* Child As Parent */\n                        g[account.uuid].parentId = account.type_code; /* Self As Parent */\n                    }\n                    \n                    // 12 months with amount\n                    for (let i = 0; i < 12; i++) {\n                        // Set Month Of\n                        let sdate = new Date(this.budget.fiscal_year.start_date);\n                        sdate.setMonth(sdate.getMonth() + i);\n\n                        g[account.uuid].monthly_amount.push({\n                            month_of : sdate.toISOString().substr(0, 7),\n                            amount : 0,\n                        });\n                    }\n\n                    /* Matching Account */\n                    if(this.isEdit){\n                        let bline = this.budget.lines.find((item) => item.account_uuid === value.uuid);\n                        if(bline){\n                            /* Reverse Nature */\n                            let nature = 1; /* Default Naure is Dr = 1 */\n                            if(account.account_type.nature.toLowerCase() === \"cr\"){\n                                nature = -1;\n                            }\n\n                            g[account.uuid].secondary_account = new AccountModel(this.secondaryAccounts.find((item) => item.uuid === bline.secondary_account_uuid));\n                            g[account.uuid].note = bline.note;\n                            g[account.uuid].amount = bline.amount * nature;\n                            g[account.uuid].monthly_amount = bline.monthly_amount;\n                            g[account.uuid].monthly_amount.forEach(ma => {\n                                ma.amount = ma.amount * nature;\n                            });\n                        }\n                    }\n                }\n            });\n            \n            /* Bind Budget Line */\n            this.budgetLineDS.data(Object.values(g));\n\n            /* Set New Datasource */\n            let treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n            treeList.setDataSource(this.budgetLineDS);\n\n            this.showLoading = false;\n        },\n        // Row Template\n        nameTmpl(dataItem){\n            /* Name in language */\n            let name = dataItem.account.name;\n            if(this.reportingLanguage === \"local\"){\n                name = dataItem.account.local_name;\n            }\n\n            /* Define result */\n            let result = `<span>${dataItem.number} - ${name}</span>`;\n\n            // /* Top Level */\n            if(dataItem.parentId === null){\n                result = `<span style='font-weight: bolder;'>${name}</span>`;\n            }\n\n            /* Parent Level */\n            if(dataItem.hasChildren && dataItem.number.length > 3){\n                result = `<span style='font-weight: bolder;'>${dataItem.number} - ${name}</span>`;\n            }\n\n            return result;\n        },\n        secondaryAccountTmpl(dataItem) {\n            let result = \"\";\n            if(dataItem.secondary_account.uuid !== ''){\n                result = `<span>${dataItem.secondary_account.number} - ${dataItem.secondary_account.name}</span>`;\n            }\n\n            return result;\n        },\n        copyAcross(e){\n            e.preventDefault();\n\n            let treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n            this.selectedRow = treeList.dataItem(kendo.jQuery(e.target).closest(\"tr\"));\n\n            this.dialog = true;\n        },\n        applyAcrossAmount(){\n            this.dialog = false;\n\n            this.selectedRow.monthly_amount.forEach(value => {\n                value.amount = kendo.parseFloat(this.crossAmount);\n            });\n            this.selectedRow.amount = kendo.parseFloat(this.crossAmount) * 12;\n\n            /* Refresh */\n            let treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n            treeList.refresh();\n\n            this.crossAmount = 0;\n        },\n        generateColumn() {\n            let headerAttributes = {\n                class: \"table-header-cell\",\n                style: \"font-weight: bold;text-align: center;padding-right: 35px; font-size: 14px\",\n            },\n            attributes = {\n                class: \"table-cell\",\n                style: \"text-align: right; font-size: 14px\",\n            };\n\n            let columns = [\n                {\n                    field: this.fieldName,\n                    title: i18n.t(\"account\"),\n                    template: this.nameTmpl,\n                    editable: ()=>{ return false },\n                    width: 300,\n                    headerAttributes: headerAttributes,\n                },\n                {\n                    field: \"secondary_account\",\n                    title: i18n.t(\"secondary_account\"),\n                    template: this.secondaryAccountTmpl,\n                    editor: AccountSecondaryEditor,\n                    hidden: !this.$store.state.accounting.secondaryAccount,\n                    editable: (dataItem)=>{\n                        return !dataItem.hasChildren;\n                    },\n                    width: 300,\n                },\n                {\n                    field: \"note\",\n                    title: i18n.t(\"note\"),\n                    width: 200,\n                },\n                {\n                    title: i18n.t(\"action\"),\n                    command: [{\n                        name: \"copycross\",\n                        text: \"copy cross\",\n                        click: this.copyAcross,\n                    }],\n                    width: 150,\n                }\n            ];\n            \n            /* 12 Months */\n            for (let i = 0; i < 12; i++) {\n                columns.push({\n                    field: `monthly_amount[${i}].amount`,\n                    format: \"{0:n}\",\n                    editor: NumberInputBoxEditor,\n                    width: 150,\n                    attributes: attributes,\n                });\n            }\n\n            /* Total */\n            columns.push({\n                field: \"amount\",\n                title: i18n.t(\"total\"),\n                format: \"{0:n}\",\n                editable: ()=>{return false},\n                width: 150,\n                attributes: attributes,\n            });\n\n            /* Set All Columns */\n            this.columns = columns;\n        },\n        /* On databound */\n        onDataBound (e) {\n            /* Titles */\n            let treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n            if(this.budget.fiscal_year){\n                let fiscalMonths = Helper.generateFiscalMonths(this.budget.fiscal_year.start_date, this.budget.fiscal_year.end_date, \"12\");\n                for (let k = 0; k < 12; k++) {\n                    const element = fiscalMonths[k];\n                    treeList.thead.find(`[data-field~='monthly_amount[${k}].amount']`).html(element);\n                }\n            }\n\n            /* Headers */\n            var headers = e.sender.thead.children();\n            for (var i = 0; i < headers.length; i++) {\n                var th = kendo.jQuery(headers[i]);\n                th.css(\"font-weight\", \"bold\");\n                th.css(\"text-align\", \"center\");\n            }\n\n            /* Items */\n            var items = e.sender.items();\n            for (var j = 0; j < items.length; j++) {\n                var dataItem = e.sender.dataItem(items[j]);\n                var row = kendo.jQuery(items[j]);\n\n                /* Parent in bold */\n                if(dataItem.get(\"hasChildren\") || dataItem.get(\"parentId\") === null){\n                    row.find(\"[data-command='copycross']\").hide();\n                    row.css(\"font-weight\", \"bold\");\n                }\n            }\n        },\n        // DataSource Changes\n        onDataSourceChanges(e) {\n            if (e.field) {\n\t\t\t\tlet dataRow = e.items[0];\n\n                if (e.field === \"secondary_account\") {\n                    if (dataRow.secondary_account !== null) {\n                        dataRow.set(\"secondary_account_uuid\", dataRow.secondary_account.uuid);\n                    } else {\n                        // Set default when deselect\n                        dataRow.set(\"secondary_account_uuid\", \"\");\n                        dataRow.set(\"secondary_account\", new AccountModel());\n                    }\n                }\n            }\n\n            this.dataSourceAutoCalculate();\n        },\n        // Auto Calculate In DataSource\n        dataSourceAutoCalculate() {\n            // Sum Amount\n            this.budgetLineDS.data().forEach(value => {\n                let sumAmt = 0;\n                value.monthly_amount.forEach(ele => {\n                    sumAmt += ele.amount;\n                });\n                value.set(\"amount\", sumAmt);\n            });\n        },\n        // Shrink Data\n        shrinkData() {\n            // Segment\n            this.budget.segment_uuid = this.segment.id;\n\n            // Lines\n            let lines = [];\n            this.budgetLineDS.data().forEach(value => {\n                // Add account line with amount not 0\n                if(value.amount !== 0){\n                    /* Apply Nature */\n                    if(value.account.account_type.nature.toLowerCase() === \"cr\"){\n                        /* Amount */\n                        value.amount = value.amount * -1;\n\n                        /* Monthly Amount */\n                        value.monthly_amount.forEach(ele => {\n                            ele.amount = ele.amount * -1;\n                        });\n                    }\n\n                    lines.push(new BudgetLineModel(value));\n                }\n            });\n            this.budget.lines = lines;\n\n            // User\n            if (this.isEdit) {\n                this.budget.modified_by = this.user;\n            } else {\n                this.budget.created_by = this.user;\n            }\n        },\n        // Validating\n        validateForm() {\n            let result = true,\n                msg = \"\";\n\n            // Name\n            if(this.budget.name === ''){\n                msg += `<p>${i18n.t(\"name_is_required\")}</p>`;\n                result = false;\n            }\n\n            // Segment\n            if(this.segment.id === ''){\n                msg += `<p>${i18n.t(\"segment_is_required\")}</p>`;\n                result = false;\n            }\n\n            // Segment\n            if(this.budget.fiscal_year.id === ''){\n                msg += `<p>${i18n.t(\"fiscal_date_is_required\")}</p>`;\n                result = false;\n            }\n\n            // Amount\n            let hasZeroAmount = true;\n            this.budgetLineDS.data().forEach(value => {\n                if(value.amount !== 0 ){\n                    hasZeroAmount = false;\n\n                    return false;\n                }\n            });\n            if(hasZeroAmount){\n                msg += `<p>${i18n.t(\"please_enter_amount\")}</p>`;\n                result = false;\n            }\n\n            // Show Alert\n            this.errorMessage = msg;\n            this.alert = false;\n            if (result === false) {\n                this.alert = true;\n            }\n\n            return result;\n        },\n        // All Saves\n        async onSaveOptionClick(mode) {\n            if (this.$refs.form.validate() && this.validateForm()) {\n                this.saveMode = mode;\n                this.save();\n            }\n        },\n        cancel() {\n            this.$swal({\n                title: i18n.t('msg_title_warning'),\n                text: i18n.t('msg_discard'),\n                icon: \"warning\",\n                showCancelButton: true,\n                cancelButtonText: i18n.t('cancel'),\n                confirmButtonColor: \"#4d4848\",\n                cancelButtonColor: \"#ED1A3A\",\n                confirmButtonText: i18n.t('discard'),\n            }).then((result) => {\n                if (result.value) {\n                    this.clear();\n                    this.$router.go(-1);\n                }\n            });\n        },\n        clear() {\n            this.isEdit = false;\n            this.saveMode = '';\n\n            this.budget = new BudgetModel();\n            this.segment = new SegmentModel(),\n\n            // Datasoure\n            this.budgetLineDS.data([]);\n\n            this.setDefaultData();\n        },\n        save() {\n            let self = this;\n\n            // Shrink Data\n            this.shrinkData();\n\n            // Sync Data\n            this.showLoading = true;\n            budgetHandler.save(this.budget)\n                .then((response) => {\n                    if (response) {\n                        /* Update Vuex Data */\n                        this.$store.dispatch('budgets/saveBudget', response.data);\n\n                        self.responseStatus(response);\n                    }else{\n                        this.$snotify.error(i18n.t(\"error_something_wrong\"));\n                    }\n                })\n                .catch((error) => {\n                    self.showLoading = false;\n\t\t\t\t\tthis.$snotify.error(error);\n                })\n                .finally(()=>{\n                    self.showLoading = false;\n                });\n        },\n        // Response Status\n        responseStatus(response) {\n            if (response.status === 200) {\n                /* Save Close or Delete Action */\n\t\t\t\tif (\n\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t) {\n\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* Reset Data */\n\t\t\t\tthis.clear();\n\n                /* Alert Success */\n                this.$snotify.success(i18n.t(\"successful\"));\n            } else {\n                /* Alert Error */\n                this.$snotify.error(i18n.t(\"error_something_wrong\"));\n            }\n        },\n        // On Reporint Language Changes\n        onReportingLanguageChanges() {\n            this.fieldName = \"account.name\";\n            if(this.reportingLanguage === \"local\"){\n                this.fieldName = \"account.local_name\";\n            }\n\n            this.generateColumn();\n        },\n    },\n    watch: {\n        initBudget: \"initialData\"\n    },\n    computed: mapState({\n        accounts: state => state.accounting.accounts,\n        secondaryAccounts: state => state.accounting.secondaryAccounts,\n        segments: state => state.segments.list,\n    }),\n    mounted () {\n        // Initial Data\n        this.initialData();\n        this.generateColumn();\n        this.initialTreeList();\n\n        /* Datasource bind functions */\n        this.budgetLineDS.bind(\"change\", this.onDataSourceChanges);\n    },\n};\n</script>\n\n<style scoped>\n.function_content {\n    padding: 0 25px 25px;\n    border-bottom: 0;\n    background-color: #fff !important;\n}\n\n@media (min-width: 1264px) {\n    .container {\n        max-width: 1185px;\n        /* max-width: 1080px !important; */\n    }\n}\n\n.grayBg {\n    background-color: #F8F8F9;\n}\n\n@media (max-width: 576px) {\n    .mb-6 {\n        margin-bottom: 0 !important;\n    }\n}\n\n.section2 {\n    border: 1px solid #d6d7d8;\n}\n\n.border_grey {\n    border: 1px solid #d6d7d8;\n}\n\n.attachment_table {\n    width: 100%;\n}\n\n.greyDark {\n    background-color: #f2f2f2;\n}\n\n.upload_btn {\n    width: 54%;\n    margin: auto;\n    padding: 10px 6px;\n    text-align: center;\n    color: #ffff;\n    border-radius: 22px;\n    background: #92d050;\n}\n\n.my_box_min_heihgt {\n    height: 295px;\n}\n\n.width_100 {\n    width: 100px;\n}\n.v-data-table.simple_table.theme--light{\n    border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.v-data-table.simple_table > .v-data-table__wrapper > table > tbody > tr > td {\n    height: 32px !important;\n    border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n    border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr > th{\n    border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n    border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr > th:last-child,\n.v-data-table.simple_table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n    border-right: none !important;\n}\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n\n.primary--text.text-left.v-btn:hover,\n.theme--light.v-btn:hover::before{\n    background: none !important;\n}\n</style>\n"],"sourceRoot":"src/views/budgeting/budgets"}]}
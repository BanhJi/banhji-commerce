{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/accounting/s_ledgers/Transaction.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/accounting/s_ledgers/Transaction.vue","mtime":1638499443113},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGtlbmRvIGZyb20gJ0Bwcm9ncmVzcy9rZW5kby11aSc7CmltcG9ydCBKUXVlcnkgZnJvbSAnanF1ZXJ5JzsgLy8gaW1wb3J0IHtpMThufSBmcm9tICdAL2kxOG4nCgppbXBvcnQgSGVscGVyIGZyb20gIkAvaGVscGVyLmpzIjsKaW1wb3J0IHsgQWNjb3VudE1vZGVsIH0gZnJvbSAiQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyI7IC8vIGNvbnN0ICQgPSByZXF1aXJlKCJqcXVlcnkiKTsKCnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9BcHBIYW5kbGVycy5qcyIpLAogICAgam91cm5hbEhhbmRsZXIgPSBfcmVxdWlyZS5qb3VybmFsSGFuZGxlcjsKCnZhciBfcmVxdWlyZTIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9Db2xsZWN0aW9ucyIpLAogICAgRW50aXR5VHlwZSA9IF9yZXF1aXJlMi5FbnRpdHlUeXBlOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUcmFuc2FjdGlvbiIsCiAgcHJvcHM6IHsKICAgIGluaXRBY2NvdW50OiB7CiAgICAgIHR5cGU6IEFjY291bnRNb2RlbAogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgJ2FwcC1zZWFyY2hkYXRlJzogZnVuY3Rpb24gYXBwU2VhcmNoZGF0ZSgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvU2VhcmNoRGF0ZScpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIE9iagogICAgICBhY2NvdW50OiBuZXcgQWNjb3VudE1vZGVsKCksCiAgICAgIHRyYW5zYWN0aW9uczogW10sCiAgICAgIC8vIFNlYXJjaCBEYXRlcyAgCiAgICAgIHN0YXJ0RGF0ZTogIiIsCiAgICAgIGVuZERhdGU6ICIiLAogICAgICBIZWxwZXI6IEhlbHBlcgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIFNlYXJjaCBUcmFuc2FjdGlvbgogICAgc2VhcmNoVHJhbnNhY3Rpb246IGZ1bmN0aW9uIHNlYXJjaFRyYW5zYWN0aW9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgICAgc2RhdGUgPSB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgIGVkYXRlID0gdGhpcy5lbmREYXRlOwoKICAgICAgaWYgKHRoaXMuYWNjb3VudC51dWlkKSB7CiAgICAgICAgaWYgKHNkYXRlICYmIGVkYXRlKSB7CiAgICAgICAgICBzZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHNkYXRlKSwgJ3l5eXktTU0tZGQnKSArICdUMDA6MDA6MDAuMDAwWic7CiAgICAgICAgICBlZGF0ZSA9IG5ldyBEYXRlKGVkYXRlKTsKICAgICAgICAgIGVkYXRlID0ga2VuZG8udG9TdHJpbmcoZWRhdGUsICd5eXl5LU1NLWRkJykgKyAnVDIzOjU5OjU5Ljk5OVonOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZGF0ZSA9IDA7CiAgICAgICAgICBlZGF0ZSA9IDA7CiAgICAgICAgfSAvLyBDbGVhcgoKCiAgICAgICAgdmFyIGRzID0gdGhpcy4kcmVmcy50cmFuc2FjdGlvbkRTLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgZHMuZGF0YShbXSk7CiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgam91cm5hbEhhbmRsZXIuZ2V0RW50cnlEZXRhaWxCeUFjY291bnQodGhpcy5hY2NvdW50LnV1aWQsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBzdGFydF9kYXRlOiBzZGF0ZSwKICAgICAgICAgICAgZW5kX2RhdGU6IGVkYXRlCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoIUpRdWVyeS5pc0VtcHR5T2JqZWN0KHJlcykpIHsKICAgICAgICAgICAgX3RoaXMudHJhbnNhY3Rpb25zID0gcmVzLmVudHJpZXNfZGV0YWlsOwogICAgICAgICAgfQogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8gVGVtcGxhdGUKICAgIG51bWJlclRlbXBsYXRlOiBmdW5jdGlvbiBudW1iZXJUZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICAvLyBEZWZhdWx0IGxpbmsgaXMgam91cm5hbAogICAgICB2YXIgbGluayA9IEhlbHBlci5saW5rVGVtcGxhdGUoZGF0YUl0ZW0uam91cm5hbF9udW1iZXIsICIiLmNvbmNhdChFbnRpdHlUeXBlLkpPVVJOQUwsICIvdmlldy8iKS5jb25jYXQoZGF0YUl0ZW0uam91cm5hbF91dWlkKSk7IC8vIFRyYW5zYWN0aW9uIGxpbmsKCiAgICAgIGlmIChkYXRhSXRlbS5yZWZlcnJhbF90cmFuc2FjdGlvbl91dWlkICE9PSAnJykgewogICAgICAgIHJldHVybiBIZWxwZXIubGlua1RlbXBsYXRlKGRhdGFJdGVtLmpvdXJuYWxfbnVtYmVyLCAiIi5jb25jYXQoZGF0YUl0ZW0udHJhbnNhY3Rpb25fdHlwZSwgIi92aWV3LyIpLmNvbmNhdChkYXRhSXRlbS5yZWZlcnJhbF90cmFuc2FjdGlvbl91dWlkKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsaW5rOwogICAgfSAvLyBnb1ZpZXcgKGUpIHsKICAgIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAvLyAJbGV0IGdyaWQgPSB0aGlzLiRyZWZzLnRyYW5zYWN0aW9uR3JpZC5rZW5kb1dpZGdldCgpLAogICAgLy8gICAgICAgICBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwogICAgLy8gICAgIGlmKGRhdGFJdGVtLnJlZmVycmFsX3RyYW5zYWN0aW9uX3V1aWQgIT09ICcnKXsKICAgIC8vICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiBgJHtkYXRhSXRlbS50cmFuc2FjdGlvbl90eXBlLnRvTG93ZXJDYXNlKCl9L3ZpZXcvJHtkYXRhSXRlbS5yZWZlcnJhbF90cmFuc2FjdGlvbl91dWlkfWAgfSk7CiAgICAvLyAgICAgfWVsc2V7CiAgICAvLyAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogYGpvdXJuYWwvdmlldy8ke2RhdGFJdGVtLmpvdXJuYWxfdXVpZH1gIH0pOwogICAgLy8gICAgIH0KICAgIC8vIH0sCgogIH0sCiAgd2F0Y2g6IHsKICAgIGluaXRBY2NvdW50OiBmdW5jdGlvbiBpbml0QWNjb3VudCgpIHsKICAgICAgdGhpcy5hY2NvdW50ID0gdGhpcy5pbml0QWNjb3VudDsKICAgICAgdGhpcy5zZWFyY2hUcmFuc2FjdGlvbigpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLmluaXRBY2NvdW50KSB7CiAgICAgIHRoaXMuYWNjb3VudCA9IHRoaXMuaW5pdEFjY291bnQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Transaction.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,OAAA,KAAA,MAAA,oBAAA;AACA,OAAA,MAAA,MAAA,QAAA,C,CACA;;AACA,OAAA,MAAA,MAAA,aAAA;AACA,SAAA,YAAA,QAAA,2BAAA,C,CAEA;;AACA,eAAA,OAAA,CAAA,0BAAA,CAAA;AAAA,IAAA,cAAA,YAAA,cAAA;;AACA,gBAAA,OAAA,CAAA,qCAAA,CAAA;AAAA,IAAA,UAAA,aAAA,UAAA;;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAFA;AAOA,EAAA,UAAA,EAAA;AACA,sBAAA;AAAA,aAAA,OAAA,0CAAA,CAAA;AAAA;AADA,GAPA;AAUA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA;AACA,MAAA,OAAA,EAAA,IAAA,YAAA,EAFA;AAGA,MAAA,YAAA,EAAA,EAHA;AAIA;AACA,MAAA,SAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA,EANA;AAOA,MAAA,MAAA,EAAA;AAPA,KAAA;AAAA,GAVA;AAmBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,iBAFA,+BAEA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA;AAAA,UACA,KAAA,GAAA,KAAA,SADA;AAAA,UAEA,KAAA,GAAA,KAAA,OAFA;;AAIA,UAAA,KAAA,OAAA,CAAA,IAAA,EAAA;AACA,YAAA,KAAA,IAAA,KAAA,EAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IAAA,CAAA,KAAA,CAAA,EAAA,YAAA,IAAA,gBAAA;AAEA,UAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA,CAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,QAAA,CAAA,KAAA,EAAA,YAAA,IAAA,gBAAA;AACA,SALA,MAKA;AACA,UAAA,KAAA,GAAA,CAAA;AACA,UAAA,KAAA,GAAA,CAAA;AACA,SATA,CAWA;;;AACA,YAAA,EAAA,GAAA,KAAA,KAAA,CAAA,aAAA,CAAA,WAAA,EAAA;AACA,QAAA,EAAA,CAAA,IAAA,CAAA,EAAA;AAEA,aAAA,WAAA,GAAA,IAAA;AACA,QAAA,cAAA,CAAA,uBAAA,CAAA,KAAA,OAAA,CAAA,IAAA,EAAA;AACA,UAAA,MAAA,EAAA;AACA,YAAA,UAAA,EAAA,KADA;AAEA,YAAA,QAAA,EAAA;AAFA;AADA,SAAA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,cAAA,CAAA,MAAA,CAAA,aAAA,CAAA,GAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,YAAA,GAAA,GAAA,CAAA,cAAA;AACA;AACA,SAVA,EAWA,OAXA,CAWA,YAAA;AACA,UAAA,IAAA,CAAA,WAAA,GAAA,KAAA;AACA,SAbA;AAcA;AACA,KAtCA;AAuCA;AACA,IAAA,cAAA,EAAA,wBAAA,QAAA,EAAA;AACA;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,YAAA,CAAA,QAAA,CAAA,cAAA,YAAA,UAAA,CAAA,OAAA,mBAAA,QAAA,CAAA,YAAA,EAAA,CAFA,CAIA;;AACA,UAAA,QAAA,CAAA,yBAAA,KAAA,EAAA,EAAA;AACA,eAAA,MAAA,CAAA,YAAA,CAAA,QAAA,CAAA,cAAA,YAAA,QAAA,CAAA,gBAAA,mBAAA,QAAA,CAAA,yBAAA,EAAA;AACA;;AAEA,aAAA,IAAA;AACA,KAlDA,CAmDA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AA9DA,GAnBA;AAmFA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,OAAA,GAAA,KAAA,WAAA;AACA,WAAA,iBAAA;AACA;AAJA,GAnFA;AAyFA,EAAA,OAzFA,qBAyFA;AACA,QAAA,KAAA,WAAA,EAAA;AACA,WAAA,OAAA,GAAA,KAAA,WAAA;AACA;AACA;AA7FA,CAAA","sourcesContent":["<template>\n    <v-row class=\"white\">\n        <v-col sm=\"10\" cols=\"12\" class=\"pb-0\">\n            <app-searchdate :initStartDate=\"startDate\" @emitStartDate=\"startDate = $event\"\n                            :initEndDate=\"endDate\" @emitEndDate=\"endDate = $event\" />\n        </v-col>\n\n        <v-col sm=\"1\" cols=\"1\" class=\"mt-1 pb-0\">\n            <v-btn class=\"btn_search\" @click=\"searchTransaction\" style=\"background-color: rgb(237, 241, 245)\">\n                <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n            </v-btn>\n        </v-col>\n        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n            <kendo-datasource \n                ref=\"transactionDS\"\n                :data=\"transactions\"\n                :sort-field=\"'journal_date'\"\n                :sort-dir=\"'desc'\"\n                page=\"1\"\n                page-size=\"10\" />\n\n            <kendo-grid id=\"transactionGrid\" \n                ref=\"transactionGrid\"\n                :data-source-ref=\"'transactionDS'\"\n                :noRecords=\"true\"\n                :sortable=\"true\"\n                :pageable-page-sizes=\"true\"\n                :pageable-button-count=\"5\">\n                <kendo-grid-column \n                    :field=\"'journal_date'\"\n                    :title=\"$t('date')\"\n                    :template=\"'#=kendo.toString(new Date(journal_date), `dd-MM-yyyy`)#'\"\n                    :headerAttributes=\"{class:'header_grid'}\"\n                    :attributes=\"{ style: 'text-align: center;' }\" />\n                <kendo-grid-column \n                    :field=\"'transaction_type'\"\n                    :title=\"$t('type')\"\n                    :headerAttributes=\"{class:'header_grid'}\" />\n                <kendo-grid-column \n                    :field=\"'journal_number'\"\n                    :title=\"$t('number')\"\n                    :template=\"numberTemplate\"\n                    :headerAttributes=\"{class:'header_grid'}\" />\n                <kendo-grid-column \n                    :field=\"'description'\"\n                    :title=\"$t('description')\"\n                    :headerAttributes=\"{class:'header_grid' }\" />\n                <kendo-grid-column \n                    :field=\"'dr'\"\n                    :title=\"$t('debit')\"\n                    :format=\"'{0:n}'\"\n                    :headerAttributes=\"{class:'header_grid'}\"\n                    :attributes=\"{ style: 'text-align: right;' }\" />\n                <kendo-grid-column \n                    :field=\"'cr'\"\n                    :title=\"$t('credit')\"\n                    :format=\"'{0:n}'\"\n                    :headerAttributes=\"{class:'header_grid'}\"\n                    :attributes=\"{ style: 'text-align: right;' }\" />\n            </kendo-grid>\n        </v-col>\n    </v-row>\n</template>\n\n<script>    \n    import kendo from '@progress/kendo-ui';\n    import JQuery from 'jquery';\n    // import {i18n} from '@/i18n'\n    import Helper from \"@/helper.js\";\n    import { AccountModel } from \"@/scripts/model/AppModels\";\n\n    // const $ = require(\"jquery\");\n    const { journalHandler } = require(\"@/scripts/AppHandlers.js\");\n    const { EntityType } = require(\"@/scripts/default_setup/Collections\");\n\n    export default {\n        name: \"Transaction\",\n        props: {\n            initAccount: {\n                type: AccountModel,\n            },\n        },\n        components: {\n            'app-searchdate': () => import('@/components/custom_templates/SearchDate'),\n        },\n        data: () => ({\n            // Obj\n            account             : new AccountModel(),\n            transactions        : [],\n            // Search Dates  \n            startDate          : \"\",\n            endDate            : \"\",\n            Helper              : Helper,\n        }),\n        methods: {\n            // Search Transaction\n            searchTransaction() {\n                let self = this,\n                    sdate = this.startDate,\n                    edate = this.endDate;\n\n                if (this.account.uuid) {\n                    if (sdate && edate) {\n                        sdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z';\n\n                        edate = new Date(edate);\n                        edate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z';\n                    } else {\n                        sdate = 0;\n                        edate = 0;\n                    }\n\n                    // Clear\n                    let ds = this.$refs.transactionDS.kendoWidget();\n                    ds.data([]);\n\n                    this.showLoading = true;\n                    journalHandler.getEntryDetailByAccount(this.account.uuid, {\n                        params: {\n                            start_date: sdate,\n                            end_date: edate,\n                        }\n                    })\n                    .then(res => {\n                        if(!JQuery.isEmptyObject(res)){\n                            this.transactions = res.entries_detail;\n                        }\n                    })\n                    .finally(() => {\n                        self.showLoading = false;\n                    })\n                }\n            },\n            // Template\n            numberTemplate: (dataItem) => {\n                // Default link is journal\n                let link = Helper.linkTemplate(dataItem.journal_number, `${EntityType.JOURNAL}/view/${dataItem.journal_uuid}`);\n                \n                // Transaction link\n                if(dataItem.referral_transaction_uuid !== ''){\n                    return Helper.linkTemplate(dataItem.journal_number, `${dataItem.transaction_type}/view/${dataItem.referral_transaction_uuid}`);\n                }\n                \n                return link;\n\t\t\t},\n            // goView (e) {\n            //     e.preventDefault();\n\n\t\t\t// \tlet grid = this.$refs.transactionGrid.kendoWidget(),\n            //         dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n                    \n            //     if(dataItem.referral_transaction_uuid !== ''){\n            //         this.$router.push({ path: `${dataItem.transaction_type.toLowerCase()}/view/${dataItem.referral_transaction_uuid}` });\n            //     }else{\n            //         this.$router.push({ path: `journal/view/${dataItem.journal_uuid}` });\n            //     }\n            // },\n        },\n        watch: {\n            initAccount () {\n                this.account = this.initAccount;\n                this.searchTransaction();\n            },\n        },\n        created () {\n            if(this.initAccount){\n                this.account = this.initAccount;\n            }\n        }\n    };\n</script>\n<style scoped>\n</style>"],"sourceRoot":"src/views/accounting/account"}]}
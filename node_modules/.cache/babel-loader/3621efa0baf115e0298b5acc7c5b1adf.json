{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/suppliers/RequestPayment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/suppliers/RequestPayment.vue","mtime":1638499443347},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbWFjb3MvRGVza3RvcC9iYW5oamktMC4yL2JhbmhqaS1hY2NvdW50aW5nLXdlYi1tb2R1bGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvbWFjb3MvRGVza3RvcC9iYW5oamktMC4yL2JhbmhqaS1hY2NvdW50aW5nLXdlYi1tb2R1bGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5wYWQtc3RhcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGkxOG4gfSBmcm9tICJAL2kxOG4iOwppbXBvcnQgRGF0ZVBpY2tlckNvbXBvbmVudCBmcm9tICJAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9EYXRlUGlja2VyQ29tcG9uZW50IjsKaW1wb3J0IHN1cHBsaWVySGFuZGxlciBmcm9tICJAL3NjcmlwdHMvc3VwcGxpZXJIYW5kbGVyIjsKaW1wb3J0IGpvdXJuYWxIYW5kbGVyIGZyb20gIkAvc2NyaXB0cy9qb3VybmFsSGFuZGxlciI7CmltcG9ydCBSZXF1ZXN0UGF5bWVudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9yZXF1ZXN0LXBheW1lbnQvbW9kZWwvUmVxdWVzdFBheW1lbnQiOwppbXBvcnQgSXRlbUxpbmVNb2RlbCBmcm9tICJAL3NjcmlwdHMvcmVxdWVzdC1wYXltZW50L21vZGVsL0l0ZW1MaW5lIjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBiaWxsaW5nSGFuZGxlciBmcm9tICJAL3NjcmlwdHMvaW52b2ljZS9oYW5kbGVyL2JpbGxpbmdIYW5kbGVyIjsKaW1wb3J0IHByZWZpeEhhbmRsZXIgZnJvbSAiQC9zY3JpcHRzL3ByZWZpeEhhbmRsZXIiOwppbXBvcnQgcHVyY2hhc2VGb3JtQ29udGVudEhhbmRsZXIgZnJvbSAiQC9zY3JpcHRzL3B1cmNoYXNlRm9ybUNvbnRlbnRIYW5kbGVyIjsKaW1wb3J0IHNldHRpbmdIYW5kbGVyIGZyb20gIkAvc2NyaXB0cy9zZXR0aW5nc0hhbmRsZXIiOwppbXBvcnQgeyBDdXJyZW5jeU1vZGVsLCBQYXltZW50VGVybU1vZGVsIH0gZnJvbSAiQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyI7CmltcG9ydCBQYXltZW50T3B0aW9uTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1BheW1lbnRPcHRpb24iOwppbXBvcnQgQWNjb3VudE1hcHBpbmdNb2RlbCBmcm9tICJAL3NjcmlwdHMvYWNjb3VudC1tYXAvQWNjb3VudCI7CmltcG9ydCBTdXBwbGllck1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9TdXBwbGllciI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIiOwoKdmFyIGNvb2tpZUpTID0gcmVxdWlyZSgiQC9jb29raWUuanMiKTsKCnZhciBjb29raWUgPSBjb29raWVKUy5nZXRDb29raWUoKTsKdmFyIHJlcXVlc3RQYXltZW50TW9kZWwgPSBuZXcgUmVxdWVzdFBheW1lbnRNb2RlbCh7fSk7CnZhciBpdGVtTGluZU1vZGVsID0gbmV3IEl0ZW1MaW5lTW9kZWwoe30pOwp2YXIgT1BUSU9OX1RZUEUgPSAiU3VwcGxpZXIiOwp2YXIgVFJBTlNBQ1RJT05fVFlQRSA9ICJSZXF1ZXN0IFBheW1lbnQiOwp2YXIgVFhOX1RZUEUgPSAicmVxdWVzdCBwYXltZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZXF1ZXN0UGF5bWVudCIsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZ01lOiBmdW5jdGlvbiBMb2FkaW5nTWUoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIkAvY29tcG9uZW50cy9Mb2FkaW5nIik7CiAgICB9LAogICAgImFwcC1kYXRlcGlja2VyIjogRGF0ZVBpY2tlckNvbXBvbmVudCwKICAgICJ2ZW5kb3ItZHJvcGRvd25saXN0IjogZnVuY3Rpb24gdmVuZG9yRHJvcGRvd25saXN0KCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMvZHJvcGRvd25saXN0L1ZlbmRvckRyb3Bkb3duIik7CiAgICB9LAogICAgInBheW1lbnRvcHRpb24tZHJvcGRvd25saXN0IjogZnVuY3Rpb24gcGF5bWVudG9wdGlvbkRyb3Bkb3dubGlzdCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiQC9jb21wb25lbnRzL2Ryb3Bkb3dubGlzdC9QYXltZW50T3B0aW9uRHJvcERvd25MaXN0Iik7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICBjdXN0b21lckxpc3Q6IFtdLAogICAgICBncm91cDogW10sCiAgICAgIHN1cHBsaWVyczogW10sCiAgICAgIGN1c3RvbWVyOiB7fSwKICAgICAgb3ZlckR1ZUFtb3VudDogMCwKICAgICAgcmVjZWl2YWJsZUJhbGFuY2U6IDAsCiAgICAgIHRvYmVDb2xsZWN0ZWQ6IDAsCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICB0ZW1wbGF0ZTogW10sCiAgICAgIHRlbXBsYXRlczogW10sCiAgICAgIGl0ZW1MaW5lczogW10sCiAgICAgIHRyYW5zYWN0aW9uVHlwZXM6IFtdLAogICAgICByZWNlaXZhYmxlTGlzdDogW10sCiAgICAgIHJlcXVlc3RQYXltZW50OiByZXF1ZXN0UGF5bWVudE1vZGVsLAogICAgICBpdGVtTGluZTogaXRlbUxpbmVNb2RlbCwKICAgICAgc3VwQmFzZVVybDogc3VwcGxpZXJIYW5kbGVyLnNlYXJjaCgpLAogICAgICBzZWxlY3RlZEV4cGVuc2VJZHM6IFtdLAogICAgICBwdXJjaGFzZUZvcm1Db250ZW50OiB7fSwKICAgICAgYmFsYW5jZTogMCwKICAgICAgalJhdzogW10sCiAgICAgIHR4bkxpc3Q6IFtdLAogICAgICBnYWluTG9zc0FjYzoge30sCiAgICAgIG90aGVyUmV2ZW51ZUFjYzoge30sCiAgICAgIGdhaW5Pckxvc3NEZXNjcmlwdGlvbjogImdhaW4vbG9zcyBvbiBleGNoYW5nZSByYXRlIiwKICAgICAgcGVuYWx0eURlc2NyaXB0aW9uOiAicGVuYWx0eSIsCiAgICAgIGJhc2VDdXJyZW5jeUNvZGU6ICIiLAogICAgICBsb2dnZWRVc2VyOiB7CiAgICAgICAgaWQ6IGNvb2tpZS5jcmVhdG9yLAogICAgICAgIG5hbWU6IGNvb2tpZS5lbWFpbAogICAgICB9LAogICAgICBjcjogMCwKICAgICAgZHI6IDAsCiAgICAgIGZ1bmRCYWxhbmNlOiAwLAogICAgICB2ZW5kb3JSZW1haW5pbmdCYWxhbmNlOiAwLAogICAgICBmdW5kUmVtYWluQmFsYW5jZTogMCwKICAgICAgc2NoZW1hRGVmaW5pdGlvbjogewogICAgICAgIG1vZGVsOiB7CiAgICAgICAgICBpZDogImxpbmVJZCIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGlzQ2hlY2tDaGFuZ2VkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uVmVuZG9yQ2hhbmdlZDogZnVuY3Rpb24gb25WZW5kb3JDaGFuZ2VkKHZhbHVlKSB7CiAgICAgIHRoaXMucmVxdWVzdFBheW1lbnQuc3VwcGxpZXIgPSB2YWx1ZTsKICAgICAgdmFyIHN1cHBsaWVyID0gdGhpcy5yZXF1ZXN0UGF5bWVudC5zdXBwbGllciB8fCB7fTsKICAgICAgdmFyIHN1cHBsaWVySWQgPSBzdXBwbGllci5pZCB8fCAiIjsKCiAgICAgIGlmIChzdXBwbGllcklkKSB7CiAgICAgICAgdGhpcy5sb2FkVmVuZG9yQmFsYW5jZShzdXBwbGllcklkKTsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgdGl0bGU6IGkxOG4udCgibXNnX3RpdGxlX3dhcm5pbmciKSwKICAgICAgICB0ZXh0OiBpMThuLnQoIm1zZ19kaXNjYXJkIiksCiAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCJjYW5jZWwiKSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNFRDFBM0EiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoImRpc2NhcmQiKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeShkYXRhSXRlbSkgewogICAgICBpZiAoZGF0YUl0ZW0pIHsKICAgICAgICBpZiAoZGF0YUl0ZW0uaGFzT3duUHJvcGVydHkoImN1cnJlbmN5Q29kZSIpKSB7CiAgICAgICAgICByZXR1cm4gZGF0YUl0ZW0uY3VycmVuY3lDb2RlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuICIiOwogICAgfSwKICAgIHJlZmVyZW5jZU5vVG1wOiBmdW5jdGlvbiByZWZlcmVuY2VOb1RtcChkYXRhSXRlbSkgewogICAgICBpZiAoZGF0YUl0ZW0pIHsKICAgICAgICBpZiAoZGF0YUl0ZW0uaGFzT3duUHJvcGVydHkoInJlZmVyZW5jZU5vIikpIHsKICAgICAgICAgIHJldHVybiBkYXRhSXRlbS5yZWZlcmVuY2VObzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBiaWxsTnVtYmVyVG1wOiBmdW5jdGlvbiBiaWxsTnVtYmVyVG1wKGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbSkgewogICAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgiYmlsbE51bWJlciIpKSB7CiAgICAgICAgICByZXR1cm4gZGF0YUl0ZW0uYmlsbE51bWJlcjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBwYWlkQW1vdW50VG1wOiBmdW5jdGlvbiBwYWlkQW1vdW50VG1wKGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbSkgewogICAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgicGFpZEFtb3VudCIpKSB7CiAgICAgICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcoZGF0YUl0ZW0ucGFpZEFtb3VudCwgZGF0YUl0ZW0uZGVjaW1hbEZvcm1hdCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgYW1vdW50VG9iZVBhaWQ6IGZ1bmN0aW9uIGFtb3VudFRvYmVQYWlkKGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbSkgewogICAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgiYW1vdW50VG9iZVBhaWQiKSkgewogICAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKGRhdGFJdGVtLmFtb3VudFRvYmVQYWlkLCBkYXRhSXRlbS5kZWNpbWFsRm9ybWF0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBkaXNjb3VudDogZnVuY3Rpb24gZGlzY291bnQoZGF0YUl0ZW0pIHsKICAgICAgaWYgKGRhdGFJdGVtKSB7CiAgICAgICAgaWYgKGRhdGFJdGVtLmhhc093blByb3BlcnR5KCJkaXNjb3VudCIpKSB7CiAgICAgICAgICB2YXIgZGlzY291bnQgPSBkYXRhSXRlbS5kaXNjb3VudCB8fCAwOwogICAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKGRpc2NvdW50LCBkYXRhSXRlbS5kZWNpbWFsRm9ybWF0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAwOwogICAgfSwKICAgIGFtb3VudDogZnVuY3Rpb24gYW1vdW50KGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbSkgewogICAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgiYW1vdW50IikpIHsKICAgICAgICAgIHZhciBhbW91bnQgPSBkYXRhSXRlbS5hbW91bnQgfHwgMDsKICAgICAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyhhbW91bnQsIGRhdGFJdGVtLmRlY2ltYWxGb3JtYXQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIDA7CiAgICB9LAogICAgYmFua1JlZmVyZW5jZU5vOiBmdW5jdGlvbiBiYW5rUmVmZXJlbmNlTm8oZGF0YUl0ZW0pIHsKICAgICAgaWYgKGRhdGFJdGVtKSB7CiAgICAgICAgaWYgKGRhdGFJdGVtLmhhc093blByb3BlcnR5KCJvdmVyRHVlIikpIHsKICAgICAgICAgIHJldHVybiBkYXRhSXRlbS5iYW5rUmVmZXJlbmNlTm87CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgb3ZlckR1ZTogZnVuY3Rpb24gb3ZlckR1ZShkYXRhSXRlbSkgewogICAgICBpZiAoZGF0YUl0ZW0pIHsKICAgICAgICBpZiAoZGF0YUl0ZW0uaGFzT3duUHJvcGVydHkoIm92ZXJEdWUiKSkgewogICAgICAgICAgcmV0dXJuIGRhdGFJdGVtLm92ZXJEdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH0sCiAgICBwYWlkQW1vdW50RWRpdG9yOiBmdW5jdGlvbiBwYWlkQW1vdW50RWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBkYXRhLWJpbmQ9InZhbHVlOicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9OdW1lcmljVGV4dEJveCh7CiAgICAgICAgZGVjaW1hbHM6IDUsCiAgICAgICAgZm9ybWF0OiAibiIuY29uY2F0KHRoaXMucHVyY2hhc2VGb3JtQ29udGVudC5kZWNpbWFsKSwKICAgICAgICBtaW46IDAKICAgICAgfSk7CiAgICB9LAogICAgZGlzY291bnRFZGl0b3I6IGZ1bmN0aW9uIGRpc2NvdW50RWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBkYXRhLWJpbmQ9InZhbHVlOicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpLmFwcGVuZFRvKGNvbnRhaW5lcikua2VuZG9OdW1lcmljVGV4dEJveCh7CiAgICAgICAgZGVjaW1hbHM6IDMwLAogICAgICAgIGZvcm1hdDogIm4iLmNvbmNhdCh0aGlzLnB1cmNoYXNlRm9ybUNvbnRlbnQuZGVjaW1hbCksCiAgICAgICAgbWluOiAwCiAgICAgIH0pOwogICAgfSwKICAgIG9uVHJhbnNhY3Rpb25EYXRlQ2hhbmdlZDogZnVuY3Rpb24gb25UcmFuc2FjdGlvbkRhdGVDaGFuZ2VkKCkgewogICAgICBpZiAodGhpcy5yZXF1ZXN0UGF5bWVudC5zdXBwbGllcikgewogICAgICAgIHZhciBzdXBwbGllciA9IHRoaXMucmVxdWVzdFBheW1lbnQuc3VwcGxpZXIgfHwge307CiAgICAgICAgdmFyIHN1cElkID0gc3VwcGxpZXIuaWQgfHwgIiI7CgogICAgICAgIGlmIChzdXBJZCkgewogICAgICAgICAgdGhpcy5nZW5lcmF0ZU51bWJlcigpOwogICAgICAgICAgdGhpcy5zZWFyY2hQdXJjaGFzZU9yZGVyRXhwZW5zZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlTnVtYmVyOiBmdW5jdGlvbiBnZW5lcmF0ZU51bWJlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgdmFyIHRyYW5EYXRlID0gbmV3IERhdGUodGhpcy5yZXF1ZXN0UGF5bWVudC50cmFuc2FjdGlvbkRhdGUpOwogICAgICAgIHZhciB0cmFuRGF0ZVJlY2VpcHQgPSBuZXcgRGF0ZSh0aGlzLnJlcXVlc3RQYXltZW50LnRyYW5zYWN0aW9uRGF0ZSk7CiAgICAgICAgdmFyIHRyYW5EYXRlTSA9IHRyYW5EYXRlLmdldEZ1bGxZZWFyKCkgKyB0cmFuRGF0ZS5nZXRNb250aCgpOwogICAgICAgIHZhciB0cmFuRGF0ZVJlY2VpcHRNID0gdHJhbkRhdGVSZWNlaXB0LmdldEZ1bGxZZWFyKCkgKyB0cmFuRGF0ZVJlY2VpcHQuZ2V0TW9udGgoKTsKCiAgICAgICAgaWYgKHRyYW5EYXRlTSA9PT0gdHJhbkRhdGVSZWNlaXB0TSkgewogICAgICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC5yZWZlcmVuY2VObyA9IHRoaXMucmVmZXJlbmNlTm87CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IC8vIHdpbmRvdy5jb25zb2xlLmxvZygiYWJiciIsIHRoaXMucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25UeXBlKTsKCgogICAgICBpZiAodGhpcy5yZXF1ZXN0UGF5bWVudC50cmFuc2FjdGlvbkRhdGUgIT09ICIiKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICBhYmJyOiB0aGlzLnJlcXVlc3RQYXltZW50LnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgICAgc3RydWN0dXJlOiB0aGlzLnJlcXVlc3RQYXltZW50LnRyYW5zYWN0aW9uVHlwZS5zdHJ1Y3R1cmUsCiAgICAgICAgICB0cmFuc2FjdGlvbkRhdGU6IG5ldyBEYXRlKHRoaXMucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25EYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCiAgICAgICAgICBzZXF1Y2VuY2luZzogdGhpcy5yZXF1ZXN0UGF5bWVudC50cmFuc2FjdGlvblR5cGUuc2VxdWNlbmNpbmcsCiAgICAgICAgICB0eXBlOiBUUkFOU0FDVElPTl9UWVBFLAogICAgICAgICAgZW50aXR5OiAxCiAgICAgICAgfTsKICAgICAgICBiaWxsaW5nSGFuZGxlci5sYXN0TnVtYmVyKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKCiAgICAgICAgICAgIHZhciBsYXN0TnVtYmVyID0gX3RoaXMyLnplcm9QYWQocGFyc2VJbnQocmVzLmxhc3ROdW1iZXIpLCBfdGhpczIucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25UeXBlLmZvcm1hdCk7CgogICAgICAgICAgICB2YXIgbnVtYmVyID0gcmVzLnN1ZmZpeCArIF90aGlzMi5yZXF1ZXN0UGF5bWVudC50cmFuc2FjdGlvblR5cGUubnVtYmVyU2VwYXJhdG9yICsgbGFzdE51bWJlcjsKICAgICAgICAgICAgX3RoaXMyLnJlcXVlc3RQYXltZW50Lm51bWJlciA9IG51bWJlcjsKCiAgICAgICAgICAgIGlmIChfdGhpczIucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25UeXBlLmhhc093blByb3BlcnR5KCJwcmVmaXhTZXBhcmF0b3IiKSkgewogICAgICAgICAgICAgIHZhciBwcmVmaXhTZXAgPSBfdGhpczIucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25UeXBlLnByZWZpeFNlcGFyYXRvcjsKICAgICAgICAgICAgICBfdGhpczIucmVxdWVzdFBheW1lbnQucmVmZXJlbmNlTm8gPSBfdGhpczIucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25UeXBlLmFiYnIgKyBwcmVmaXhTZXAgKyBudW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKGUpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgemVyb1BhZDogZnVuY3Rpb24gemVyb1BhZChudW0sIHBsYWNlcykgewogICAgICByZXR1cm4gU3RyaW5nKG51bSkucGFkU3RhcnQocGxhY2VzLCAiMCIpOwogICAgfSwKICAgIHJlbW92ZUR1cGxpY2F0ZTogZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlKGFycmF5KSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoKTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihhcnJheSksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0uaWQpKSB7CiAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5pZCwgdHJ1ZSk7IC8vIHNldCBhbnkgdmFsdWUgdG8gTWFwCgogICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgiZHVlRGF0ZSIpKSB7CiAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKGRhdGFJdGVtLmR1ZURhdGUpLCBkYXRhSXRlbS5kYXRlRm9ybWF0KTsKICAgICAgfQoKICAgICAgcmV0dXJuICIiOwogICAgfSwKICAgIHNldHRsZW1lbnREaXNjb3VudDogZnVuY3Rpb24gc2V0dGxlbWVudERpc2NvdW50KGRhdGFJdGVtKSB7CiAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgicGF5bWVudFRlcm0iKSkgewogICAgICAgIHJldHVybiBkYXRhSXRlbS5wYXltZW50VGVybS5uYW1lIHx8ICIiOwogICAgICB9CgogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgc3RhdHVzOiBmdW5jdGlvbiBzdGF0dXMoZGF0YUl0ZW0pIHsKICAgICAgaWYgKGRhdGFJdGVtKSB7CiAgICAgICAgaWYgKGRhdGFJdGVtLmhhc093blByb3BlcnR5KCJzdGF0dXMiKSkgewogICAgICAgICAgdmFyIHN0YXR1cyA9IGRhdGFJdGVtLnN0YXR1czsKICAgICAgICAgIHZhciBzdGF0dXNUZXh0ID0gIiI7CgogICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHN0YXR1c1RleHQgPSAiT1BFTiI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9ICJQYXJ0aWFsbHkgUGFpZCI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9ICJWT0lEIjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gIlBBSUQiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBzdGF0dXNUZXh0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuICIiOwogICAgfSwKICAgIG9uUGF5bWVudE9wdGlvbkNoYW5nZWQ6IGZ1bmN0aW9uIG9uUGF5bWVudE9wdGlvbkNoYW5nZWQodmFsdWUpIHsKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC5wYXltZW50T3B0aW9uID0gdmFsdWU7CiAgICAgIHZhciBhY2NvdW50ID0gdmFsdWUuYWNjb3VudCB8fCB7fTsKICAgICAgdmFyIGFjY291bnRJZCA9IGFjY291bnQudXVpZCB8fCAiIjsKCiAgICAgIGlmIChhY2NvdW50SWQpIHsKICAgICAgICB2YXIgY3VycmVudEZpc2NhbERhdGUgPSBIZWxwZXIuZ2V0RmlzY2FsRGF0ZUJ5RGF0ZShuZXcgRGF0ZSgpKTsKICAgICAgICB2YXIgc3RhcnREYXRlID0gY3VycmVudEZpc2NhbERhdGUuc3RhcnRfZGF0ZTsKICAgICAgICB2YXIgc3RyUGFyYW0gPSB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgc3RhcnRfZGF0ZToga2VuZG8udG9TdHJpbmcobmV3IERhdGUoc3RhcnREYXRlKSwgInl5eXktTU0tZGQiKSArICJUMDA6MDA6MDAuMDAwWiIsCiAgICAgICAgICAgIGVuZF9kYXRlOiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh0aGlzLnJlcXVlc3RQYXltZW50LnRyYW5zYWN0aW9uRGF0ZSksICJ5eXl5LU1NLWRkIikgKyAiVDIzOjU5OjU5Ljk5OVoiCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmxvYWRFbnRyeURldGFpbEJ5QWNjb3VudChhY2NvdW50SWQsIHN0clBhcmFtKTsKICAgICAgfSAvLyB3aW5kb3cuY29uc29sZS5sb2codmFsdWUsICJwYXltZW50T3B0aW9uIik7CgogICAgfSwKICAgIGxvYWRQcmVmaXg6IGZ1bmN0aW9uIGxvYWRQcmVmaXgoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHByZWZpeEhhbmRsZXIuZ2V0KFRYTl9UWVBFKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnRyYW5zYWN0aW9uVHlwZXMgPSByZXNwb25zZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnJlcXVlc3RQYXltZW50LnRyYW5zYWN0aW9uVHlwZSA9IHJlc3BvbnNlWzBdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZ2VuZXJhdGVOdW1iZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZWFyY2hQdXJjaGFzZU9yZGVyRXhwZW5zZTogZnVuY3Rpb24gc2VhcmNoUHVyY2hhc2VPcmRlckV4cGVuc2UoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgICAgICAgICAgICAgICBfdGhpczQuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHZhciBzdXBwbGllciA9IF90aGlzNC5yZXF1ZXN0UGF5bWVudC5zdXBwbGllciB8fCB7fTsKICAgICAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBzdXBwbGllci5pZCB8fCAiIiwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJWZW5kb3IiLAogICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25EYXRlOiBuZXcgRGF0ZShfdGhpczQucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25EYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIF90aGlzNC5pdGVtTGluZXMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2VhcmNoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZWFyY2gubGVuZ3RoID4gNCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuc2hvd0xvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBiaWxsaW5nSGFuZGxlci5zZWFyY2hDYXNoUGF5bWVudChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zaG93TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5kYXRhLnJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnNob3dMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5pdGVtTGluZXMgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gcmVzcG9uc2VbMF07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoInN1cHBsaWVyIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5yZXF1ZXN0UGF5bWVudC5zdXBwbGllciA9IG9iai5zdXBwbGllcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnN1cHBsaWVyLmhhc093blByb3BlcnR5KCJuYW1lIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0Lm5hbWUgPSBvYmouc3VwcGxpZXIubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlQ3VycmVuY3kgPSByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5iYXNlQ3VycmVuY3kgPSBiYXNlQ3VycmVuY3k7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5yZXF1ZXN0UGF5bWVudC5jdXJyZW5jeSA9IG5ldyBDdXJyZW5jeU1vZGVsKGJhc2VDdXJyZW5jeSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZUN1cnJlbmN5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VDdXJyZW5jeS5oYXNPd25Qcm9wZXJ0eSgiY29kZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuYmFzZUN1cnJlbmN5Q29kZSA9IGJhc2VDdXJyZW5jeS5jb2RlOyAvLyBpZiAoY29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMubG9hZFRyYW5zYWN0aW9uUmF0ZShiYXNlQ3VycmVuY3kuY29kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25HcmlkUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25HcmlkUmVxdWVzdENoYW5nZSgpIHsKICAgICAgdmFyIGdyaWQgPSB0aGlzLiRyZWZzLmdyaWRSZXF1ZXN0UGF5bWVudC5rZW5kb1dpZGdldCgpOwogICAgICB0aGlzLnNlbGVjdGVkRXhwZW5zZUlkcyA9IGdyaWQuc2VsZWN0ZWRLZXlOYW1lcygpOyAvLyBsZXQgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKQogICAgICAvLyB0aGlzLmlzQ2hlY2tDaGFuZ2VkID0gdHJ1ZQogICAgICAvLyBjb25zdCByb3dzID0gZHMuZGF0YSgpOwogICAgICAvLyByb3dzLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgIC8vICAgICBpZiAofnRoaXMuc2VsZWN0ZWRFeHBlbnNlSWRzLmluZGV4T2YodmFsdWUubGluZUlkKSkgewogICAgICAvLyAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh2YWx1ZSwgJ3ZhbHVlJykKICAgICAgLy8gICAgICAgICBpZiAodmFsdWUucGFpZEFtb3VudCA9PT0gMCkgewogICAgICAvLyAgICAgICAgICAgICBjb25zdCB0b2JlUGFpZCA9IHZhbHVlLmFtb3VudFRvYmVQYWlkIHx8IDAKICAgICAgLy8gICAgICAgICAgICAgdmFsdWUuc2V0KCdwYWlkQW1vdW50JywgdG9iZVBhaWQpCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgfQogICAgICAvLyB9KQogICAgICAvLyB0aGlzLiRyZWZzLmdyaWRSZXF1ZXN0UGF5bWVudC5rZW5kb1dpZGdldCgpLnJlYWQoKQogICAgICAvLyB0aGlzLmlzQ2hlY2tDaGFuZ2VkID0gZmFsc2UKCiAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgfSwKICAgIG9uRGF0YVNvdXJjZUNoYW5nZTogZnVuY3Rpb24gb25EYXRhU291cmNlQ2hhbmdlKGUpIHsKICAgICAgdmFyIGFtdFRvYmVQYWlkID0gMCwKICAgICAgICAgIGFtb3VudCA9IDAsCiAgICAgICAgICBkaXNjb3VudCA9IDAsCiAgICAgICAgICBwYWlkQW1vdW50ID0gMDsKICAgICAgdmFyIGRhdGFSb3cgPSBlLml0ZW1zWzBdIHx8IHt9OwoKICAgICAgaWYgKE9iamVjdC5rZXlzKGRhdGFSb3cpLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhUm93LnNldCgib3B0aW9uVHlwZSIsIE9QVElPTl9UWVBFKTsKICAgICAgfQoKICAgICAgaWYgKGUuZmllbGQpIHsKICAgICAgICB2YXIgX2RhdGFSb3cgPSBlLml0ZW1zWzBdOwoKICAgICAgICBzd2l0Y2ggKGUuZmllbGQpIHsKICAgICAgICAgIGNhc2UgImRpc2NvdW50IjoKICAgICAgICAgICAgYW1vdW50ID0gX2RhdGFSb3cuYW1vdW50IHx8IDA7CiAgICAgICAgICAgIGRpc2NvdW50ID0gX2RhdGFSb3cuZGlzY291bnQgfHwgMDsKCiAgICAgICAgICAgIGlmIChkaXNjb3VudCA+IGFtb3VudCkgewogICAgICAgICAgICAgIF9kYXRhUm93LnNldCgiZGlzY291bnQiLCBhbW91bnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfZGF0YVJvdy5zZXQoImFtb3VudFRvYmVQYWlkIiwgcGFyc2VGbG9hdChfZGF0YVJvdy5hbW91bnQpIC0gcGFyc2VGbG9hdChfZGF0YVJvdy5kaXNjb3VudCB8fCAwKSk7CgogICAgICAgICAgICBfZGF0YVJvdy5zZXQoImV4Y2hhbmdlRGlzY291bnQiLCBwYXJzZUZsb2F0KF9kYXRhUm93LmRpc2NvdW50KSAqIHBhcnNlRmxvYXQoX2RhdGFSb3cucmF0ZVRvYmFzZSB8fCAxKSk7CgogICAgICAgICAgICBfZGF0YVJvdy5zZXQoImV4Y2hhbmdlRGlzY291bnRUeG4iLCBwYXJzZUZsb2F0KF9kYXRhUm93LmRpc2NvdW50KSAqIHBhcnNlRmxvYXQoX2RhdGFSb3cudHhuUmF0ZSB8fCAxKSk7CgogICAgICAgICAgICBhbXRUb2JlUGFpZCA9IHBhcnNlRmxvYXQoX2RhdGFSb3cuYW1vdW50VG9iZVBhaWQgfHwgMCk7CiAgICAgICAgICAgIHBhaWRBbW91bnQgPSBwYXJzZUZsb2F0KF9kYXRhUm93LnBhaWRBbW91bnQgfHwgMCk7CgogICAgICAgICAgICBpZiAocGFpZEFtb3VudCA+IGFtdFRvYmVQYWlkKSB7CiAgICAgICAgICAgICAgcGFpZEFtb3VudCA9IGFtdFRvYmVQYWlkOwoKICAgICAgICAgICAgICBfZGF0YVJvdy5zZXQoInBhaWRBbW91bnQiLCBwYXJzZUZsb2F0KHBhaWRBbW91bnQpKTsKCiAgICAgICAgICAgICAgX2RhdGFSb3cuc2V0KCJwYWlkQW1vdW50VG9iYXNlIiwgcGFyc2VGbG9hdChwYWlkQW1vdW50KSAqIHBhcnNlRmxvYXQoX2RhdGFSb3cucmF0ZVRvYmFzZSB8fCAxKSk7CgogICAgICAgICAgICAgIF9kYXRhUm93LnNldCgicGFpZEFtb3VudFR4biIsIHBhaWRBbW91bnQgKiBwYXJzZUZsb2F0KF9kYXRhUm93LnR4blJhdGUgfHwgMSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJwYWlkQW1vdW50IjoKICAgICAgICAgICAgLy8gaWYgKHRoaXMuaXNDaGVja0NoYW5nZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIGFtdFRvYmVQYWlkID0gcGFyc2VGbG9hdChfZGF0YVJvdy5hbW91bnRUb2JlUGFpZCB8fCAwKTsKICAgICAgICAgICAgcGFpZEFtb3VudCA9IHBhcnNlRmxvYXQoX2RhdGFSb3cucGFpZEFtb3VudCB8fCAwKTsKCiAgICAgICAgICAgIGlmIChwYWlkQW1vdW50ID4gYW10VG9iZVBhaWQpIHsKICAgICAgICAgICAgICBwYWlkQW1vdW50ID0gYW10VG9iZVBhaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9kYXRhUm93LnNldCgicGFpZEFtb3VudCIsIHBhcnNlRmxvYXQocGFpZEFtb3VudCkpOwoKICAgICAgICAgICAgX2RhdGFSb3cuc2V0KCJwYWlkQW1vdW50VG9iYXNlIiwgcGFyc2VGbG9hdChwYWlkQW1vdW50KSAqIHBhcnNlRmxvYXQoX2RhdGFSb3cucmF0ZVRvYmFzZSB8fCAxKSk7CgogICAgICAgICAgICBfZGF0YVJvdy5zZXQoInBhaWRBbW91bnRUeG4iLCBwYWlkQW1vdW50ICogcGFyc2VGbG9hdChfZGF0YVJvdy50eG5SYXRlIHx8IDEpKTsgLy8gfQoKCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wdXJjaGFzZVR4bigpOwogICAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgICB9CiAgICB9LAogICAgbG9hZFNhbGVGb3JtQ29udGVudDogZnVuY3Rpb24gbG9hZFNhbGVGb3JtQ29udGVudCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZUZvcm1Db250ZW50SGFuZGxlci5saXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUucHVyY2hhc2VGb3JtQ29udGVudCA9IGRhdGFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRWZW5kb3JCYWxhbmNlOiBmdW5jdGlvbiBsb2FkVmVuZG9yQmFsYW5jZShpZCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHZhciBzdHJGaWx0ZXIgPSBpZCArICI/dHlwZT1iYWwiOwogICAgICAgICAgICAgICAgICAgIF90aGlzNi5yZXF1ZXN0UGF5bWVudC52ZW5kb3JCYWxhbmNlID0gMDsKICAgICAgICAgICAgICAgICAgICBiaWxsaW5nSGFuZGxlci5iYWxhbmNlKHN0ckZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYucmVxdWVzdFBheW1lbnQudmVuZG9yQmFsYW5jZSA9IGRhdGFbMF0uYmFsYW5jZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuYmFsYW5jZSA9IF90aGlzNi5udW1iZXJGb3JtYXQoZGF0YVswXS5iYWxhbmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbnVtYmVyRm9ybWF0OiBmdW5jdGlvbiBudW1iZXJGb3JtYXQodmFsdWUpIHsKICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKHZhbHVlLCAibiIuY29uY2F0KHRoaXMucHVyY2hhc2VGb3JtQ29udGVudC5kZWNpbWFsKSk7CiAgICB9LAogICAgYXV0b0NhbGN1bGF0ZTogZnVuY3Rpb24gYXV0b0NhbGN1bGF0ZSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgIHJlY2VpcHRBbW91bnQgPSAwLAogICAgICAgICAgZGlzY291bnQgPSAwLAogICAgICAgICAgY29udmVydGVkQW1vdW50ID0gMCwKICAgICAgICAgIGV4Y2hhbmdlRGlzY291bnQgPSAwLAogICAgICAgICAgZXhjaGFuZ2VEaXNjb3VudFR4biA9IDAsCiAgICAgICAgICBwYWlkQW1vdW50VHhuID0gMDsKICAgICAgdGhpcy5qUmF3ID0gW107CiAgICAgIHZhciByb3dzID0gZHMuZGF0YSgpLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLnBhaWRBbW91bnQgPiAwIHx8IG4uZGlzY291bnQgPiAwOwogICAgICB9KTsKICAgICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh+X3RoaXM3LnNlbGVjdGVkRXhwZW5zZUlkcy5pbmRleE9mKHZhbHVlLmxpbmVJZCkpIHsKICAgICAgICAgIHZhciBuYXR1cmUgPSAiIiwKICAgICAgICAgICAgICBwdXJjaGFzZVJhdGUgPSAwLAogICAgICAgICAgICAgIHBheW1lbnRSYXRlID0gMCwKICAgICAgICAgICAgICByYXdQYWlkQW1vdW50ID0gMCwKICAgICAgICAgICAgICByYXdEaXNjb3VudEFtb3VudCA9IDAsCiAgICAgICAgICAgICAgY3VycmVuY3lDb2RlID0gIiI7CiAgICAgICAgICB2YXIgZGlzY291bnRBbW91bnQgPSAwLAogICAgICAgICAgICAgIGFwQW1vdW50ID0gMCwKICAgICAgICAgICAgICByZWZObyA9ICIiLAogICAgICAgICAgICAgIHBheU9wdGlvbiA9IHt9LAogICAgICAgICAgICAgIGN1cnJlbmN5ID0ge30sCiAgICAgICAgICAgICAgZ2Fpbkxvc3MgPSAwLAogICAgICAgICAgICAgIGxhc3RYUmF0ZSA9IHt9LAogICAgICAgICAgICAgIGxvY2F0aW9uID0ge30sCiAgICAgICAgICAgICAgc2VnbWVudCA9IHt9LAogICAgICAgICAgICAgIHByb2plY3QgPSB7fSwKICAgICAgICAgICAgICBsb2NhdGlvbklkID0gIiIsCiAgICAgICAgICAgICAgc2VnbWVudElkID0gIiIsCiAgICAgICAgICAgICAgcHJvamVjdElkID0gIiIsCiAgICAgICAgICAgICAgdHhuSWQgPSAiIiwKICAgICAgICAgICAgICBpbnZSYXRlID0gMTsKCiAgICAgICAgICBpZiAodmFsdWUucmVmZXJlbmNlTm8pIHsKICAgICAgICAgICAgcmVmTm8gPSB2YWx1ZS5yZWZlcmVuY2VObzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUuaWQpIHsKICAgICAgICAgICAgdHhuSWQgPSB2YWx1ZS5pZCB8fCAiIjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUudHhuUmF0ZSkgewogICAgICAgICAgICBwdXJjaGFzZVJhdGUgPSBwYXJzZUZsb2F0KHZhbHVlLnR4blJhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5jdXJyZW5jeUNvZGUpIHsKICAgICAgICAgICAgY3VycmVuY3lDb2RlID0gdmFsdWUuY3VycmVuY3lDb2RlIHx8ICIiOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5jdXJyZW5jeSkgewogICAgICAgICAgICBjdXJyZW5jeSA9IHZhbHVlLmN1cnJlbmN5IHx8IHt9OwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5sb2NhdGlvbikgewogICAgICAgICAgICBsb2NhdGlvbiA9IHZhbHVlLmxvY2F0aW9uIHx8IHt9OwoKICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgbG9jYXRpb25JZCA9IGxvY2F0aW9uLmlkOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZhbHVlLnNlZ21lbnQpIHsKICAgICAgICAgICAgc2VnbWVudCA9IHZhbHVlLnNlZ21lbnQgfHwge307CgogICAgICAgICAgICBpZiAoc2VnbWVudC5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICAgIHNlZ21lbnRJZCA9IHNlZ21lbnQuaWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUucHJvamVjdCkgewogICAgICAgICAgICBwcm9qZWN0ID0gdmFsdWUucHJvamVjdCB8fCB7fTsKCiAgICAgICAgICAgIGlmIChwcm9qZWN0Lmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgcHJvamVjdElkID0gcHJvamVjdC5pZDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5leGNoYW5nZVJhdGUpIHsKICAgICAgICAgICAgbGFzdFhSYXRlID0gdmFsdWUuZXhjaGFuZ2VSYXRlIHx8IHt9OwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS50eG5SYXRlKSB7CiAgICAgICAgICAgIGludlJhdGUgPSBwYXJzZUZsb2F0KHZhbHVlLnR4blJhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5yYXRlVG9iYXNlKSB7CiAgICAgICAgICAgIHBheW1lbnRSYXRlID0gcGFyc2VGbG9hdCh2YWx1ZS5yYXRlVG9iYXNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUucGFpZEFtb3VudCkgewogICAgICAgICAgICByZWNlaXB0QW1vdW50ICs9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucGFpZEFtb3VudCk7CiAgICAgICAgICAgIGNvbnZlcnRlZEFtb3VudCArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnBhaWRBbW91bnQpICogdmFsdWUucmF0ZVRvYmFzZTsKICAgICAgICAgICAgcGFpZEFtb3VudFR4biArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnBhaWRBbW91bnQpICogaW52UmF0ZTsgLy8gcGFpZEFtdCA9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUucGFpZEFtb3VudCkgKiBwdXJjaGFzZVJhdGUKCiAgICAgICAgICAgIHJhd1BhaWRBbW91bnQgPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLnBhaWRBbW91bnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5kaXNjb3VudCkgewogICAgICAgICAgICAvLyBkaXNjb3VudCArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmRpc2NvdW50KQogICAgICAgICAgICBkaXNjb3VudCArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmRpc2NvdW50KSAqIHZhbHVlLnJhdGVUb2Jhc2U7CiAgICAgICAgICAgIGV4Y2hhbmdlRGlzY291bnQgKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5leGNoYW5nZURpc2NvdW50KSAqIHZhbHVlLnJhdGVUb2Jhc2U7CiAgICAgICAgICAgIGV4Y2hhbmdlRGlzY291bnRUeG4gKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5kaXNjb3VudCkgKiBpbnZSYXRlOwogICAgICAgICAgICBkaXNjb3VudEFtb3VudCA9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUuZGlzY291bnQpICogcGF5bWVudFJhdGU7CiAgICAgICAgICAgIHJhd0Rpc2NvdW50QW1vdW50ID0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5kaXNjb3VudCk7CiAgICAgICAgICB9IC8vIHRvZG86IGdhaW4gb3IgbG9zcyBleGNoYW5nZSByYXRlCgoKICAgICAgICAgIGdhaW5Mb3NzID0gcGFyc2VGbG9hdCgocHVyY2hhc2VSYXRlIC0gcGF5bWVudFJhdGUpICogKHJhd1BhaWRBbW91bnQgKyByYXdEaXNjb3VudEFtb3VudCkpICogLTE7CgogICAgICAgICAgaWYgKGdhaW5Mb3NzICE9PSAwKSB7CiAgICAgICAgICAgIGlmIChnYWluTG9zcyA+IDApIHsKICAgICAgICAgICAgICBuYXR1cmUgPSAiZHIiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5hdHVyZSA9ICJjciI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiZ2Fpbkxvc3MiLCBnYWluTG9zcyk7CgogICAgICAgICAgICBpZiAoZ2Fpbkxvc3MpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXM3LmdhaW5Mb3NzQWNjLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgICBfdGhpczcualJhdy5wdXNoKHsKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzNy5nYWluTG9zc0FjYy5pZCArICItIiArIG5hdHVyZSArICItIiArIGN1cnJlbmN5Q29kZSArICItIiArIHB1cmNoYXNlUmF0ZSArICItIiArIGxvY2F0aW9uSWQgKyAiLSIgKyBwcm9qZWN0SWQgKyAiLSIgKyBzZWdtZW50SWQgKyAiLSIgKyB0eG5JZCwKICAgICAgICAgICAgICAgICAgdHhuSWQ6IHR4bklkLAogICAgICAgICAgICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LAogICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sCiAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IHNlZ21lbnQsCiAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLAogICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBsb2NhdGlvbklkLAogICAgICAgICAgICAgICAgICBzZWdtZW50SWQ6IHNlZ21lbnRJZCwKICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBjdXJyZW5jeUNvZGUsCiAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICAgICAgICAgICAgbGFzdFhSYXRlOiBsYXN0WFJhdGUsCiAgICAgICAgICAgICAgICAgIGxpbmU6IG5ldyBJdGVtTGluZU1vZGVsKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgcmVjZWlwdFJhdGU6IGdhaW5Mb3NzID4gMCA/IHBheW1lbnRSYXRlIDogcHVyY2hhc2VSYXRlLAogICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RoaXM3LmdhaW5Pckxvc3NEZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgYWNjb3VudDogX3RoaXM3LmdhaW5Mb3NzQWNjLAogICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IF90aGlzNy5nYWluTG9zc0FjYy5pZCwKICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLAogICAgICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogZ2Fpbkxvc3MsCiAgICAgICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICAgICAgdHlwZUFzOiAiR2Fpbk9yTG9zcyIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSAvL1RvZG86IEFQICBEcgoKCiAgICAgICAgICBhcEFtb3VudCA9IHJhd1BhaWRBbW91bnQgKyByYXdEaXNjb3VudEFtb3VudDsKCiAgICAgICAgICBpZiAoYXBBbW91bnQgPiAwKSB7CiAgICAgICAgICAgIG5hdHVyZSA9ICJkciI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuYXR1cmUgPSAiY3IiOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgiYXBBY2MiKSkgewogICAgICAgICAgICB2YXIgYXBBY2MgPSB2YWx1ZS5hcEFjYzsKCiAgICAgICAgICAgIGlmIChhcEFjYykgewogICAgICAgICAgICAgIGlmIChhcEFjYy5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICAgICAgX3RoaXM3LmpSYXcucHVzaCh7CiAgICAgICAgICAgICAgICAgIGlkOiBhcEFjYy5pZCArICItIiArIG5hdHVyZSArICItIiArIGN1cnJlbmN5Q29kZSArICItIiArIHB1cmNoYXNlUmF0ZSArICItIiArIGxvY2F0aW9uSWQgKyAiLSIgKyBwcm9qZWN0SWQgKyAiLSIgKyBzZWdtZW50SWQgKyAiLSIgKyB0eG5JZCwKICAgICAgICAgICAgICAgICAgdHhuSWQ6IHR4bklkLAogICAgICAgICAgICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LAogICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sCiAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IHNlZ21lbnQsCiAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLAogICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBsb2NhdGlvbklkLAogICAgICAgICAgICAgICAgICBzZWdtZW50SWQ6IHNlZ21lbnRJZCwKICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBjdXJyZW5jeUNvZGUsCiAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICAgICAgICAgICAgbGFzdFhSYXRlOiBsYXN0WFJhdGUsCiAgICAgICAgICAgICAgICAgIGxpbmU6IG5ldyBJdGVtTGluZU1vZGVsKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgcmVjZWlwdFJhdGU6IHB1cmNoYXNlUmF0ZSwKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlZk5vLAogICAgICAgICAgICAgICAgICBhY2NvdW50OiBhcEFjYywKICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBhcEFjYy5pZCwKICAgICAgICAgICAgICAgICAgYW1vdW50OiBhcEFtb3VudCwKICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VBbW91bnQ6IGFwQW1vdW50ICogcHVyY2hhc2VSYXRlLAogICAgICAgICAgICAgICAgICB0eXBlOiBuYXR1cmUsCiAgICAgICAgICAgICAgICAgIHR5cGVBczogIkFQIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vVG9kbzogQ2FzaCBBY2NvdW50ICBDUgoKCiAgICAgICAgICBpZiAoX3RoaXM3LnJlcXVlc3RQYXltZW50LnBheW1lbnRPcHRpb24pIHsKICAgICAgICAgICAgcGF5T3B0aW9uID0gX3RoaXM3LnJlcXVlc3RQYXltZW50LnBheW1lbnRPcHRpb247CiAgICAgICAgICAgIHZhciBjYXNoQW1vdW50ID0gcmF3UGFpZEFtb3VudCAqIC0xOyAvLysgKChwdXJjaGFzZVJhdGUgLSBwYXltZW50UmF0ZSkgKiAocmF3UGFpZEFtb3VudCArIHJhd0Rpc2NvdW50QW1vdW50KSkKICAgICAgICAgICAgLy8gY29uc3QgY2FzaEFtb3VudCA9IHJhd1BhaWRBbW91bnQgKyAoZ2Fpbkxvc3MgKSArIHJhd1BhaWRBbW91bnQKCiAgICAgICAgICAgIGlmIChjYXNoQW1vdW50ID4gMCkgewogICAgICAgICAgICAgIG5hdHVyZSA9ICJkciI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmF0dXJlID0gImNyIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHBheU9wdGlvbi5oYXNPd25Qcm9wZXJ0eSgiYWNjb3VudCIpKSB7CiAgICAgICAgICAgICAgdmFyIHBheU9wdGlvbkFjYyA9IHBheU9wdGlvbi5hY2NvdW50OwoKICAgICAgICAgICAgICBpZiAocGF5T3B0aW9uQWNjLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgICBfdGhpczcualJhdy5wdXNoKHsKICAgICAgICAgICAgICAgICAgaWQ6IHBheU9wdGlvbkFjYy5pZCArICItIiArIG5hdHVyZSArICItIiArIGN1cnJlbmN5Q29kZSArICItIiArIHB1cmNoYXNlUmF0ZSArICItIiArIGxvY2F0aW9uSWQgKyAiLSIgKyBwcm9qZWN0SWQgKyAiLSIgKyBzZWdtZW50SWQgKyAiLSIgKyB0eG5JZCwKICAgICAgICAgICAgICAgICAgdHhuSWQ6IHR4bklkLAogICAgICAgICAgICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LAogICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sCiAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IHNlZ21lbnQsCiAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLAogICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBsb2NhdGlvbklkLAogICAgICAgICAgICAgICAgICBzZWdtZW50SWQ6IHNlZ21lbnRJZCwKICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBjdXJyZW5jeUNvZGUsCiAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICAgICAgICAgICAgbGFzdFhSYXRlOiBsYXN0WFJhdGUsCiAgICAgICAgICAgICAgICAgIGxpbmU6IG5ldyBJdGVtTGluZU1vZGVsKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgcmVjZWlwdFJhdGU6IHB1cmNoYXNlUmF0ZSwKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlZk5vLAogICAgICAgICAgICAgICAgICBhY2NvdW50OiBwYXlPcHRpb25BY2MsCiAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogcGF5T3B0aW9uQWNjLmlkLAogICAgICAgICAgICAgICAgICBhbW91bnQ6IGNhc2hBbW91bnQsCiAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlQW1vdW50OiBjYXNoQW1vdW50ICogcGF5bWVudFJhdGUsCiAgICAgICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICAgICAgdHlwZUFzOiAiQ2FzaEFjY291bnQiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy9Ub2RvOiBTZXR0bGVtZW50IERpc2NvdW50ICBDcgoKCiAgICAgICAgICBpZiAodmFsdWUucGF5bWVudFRlcm0pIHsKICAgICAgICAgICAgdmFyIHNldHRsZW1lbnREaXNjID0gdmFsdWUucGF5bWVudFRlcm07CgogICAgICAgICAgICBpZiAoZGlzY291bnRBbW91bnQgPiAwKSB7CiAgICAgICAgICAgICAgaWYgKGRpc2NvdW50QW1vdW50ICogLTEgPiAwKSB7CiAgICAgICAgICAgICAgICBuYXR1cmUgPSAiZHIiOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBuYXR1cmUgPSAiY3IiOwogICAgICAgICAgICAgIH0gLy8gd2luZG93LmNvbnNvbGUubG9nKHNldHRsZW1lbnREaXNjLCAic2V0dGxlbWVudERpc2MiKTsKCgogICAgICAgICAgICAgIGlmIChzZXR0bGVtZW50RGlzYy5oYXNPd25Qcm9wZXJ0eSgiYWNjb3VudCIpKSB7CiAgICAgICAgICAgICAgICB2YXIgc2V0dGxlbWVudERpc2NBY2MgPSBzZXR0bGVtZW50RGlzYy5hY2NvdW50OwoKICAgICAgICAgICAgICAgIGlmIChzZXR0bGVtZW50RGlzY0FjYy5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICAgICAgICBfdGhpczcualJhdy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogc2V0dGxlbWVudERpc2NBY2MuaWQgKyAiLSIgKyBuYXR1cmUgKyAiLSIgKyBjdXJyZW5jeUNvZGUgKyAiLSIgKyBwdXJjaGFzZVJhdGUgKyAiLSIgKyBsb2NhdGlvbklkICsgIi0iICsgcHJvamVjdElkICsgIi0iICsgc2VnbWVudElkICsgIi0iICsgdHhuSWQsCiAgICAgICAgICAgICAgICAgICAgdHhuSWQ6IHR4bklkLAogICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IHByb2plY3QsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IHNlZ21lbnQsCiAgICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiBwcm9qZWN0SWQsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogbG9jYXRpb25JZCwKICAgICAgICAgICAgICAgICAgICBzZWdtZW50SWQ6IHNlZ21lbnRJZCwKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGU6IGN1cnJlbmN5Q29kZSwKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3ksCiAgICAgICAgICAgICAgICAgICAgbGFzdFhSYXRlOiBsYXN0WFJhdGUsCiAgICAgICAgICAgICAgICAgICAgbGluZTogbmV3IEl0ZW1MaW5lTW9kZWwodmFsdWUpLAogICAgICAgICAgICAgICAgICAgIHJlY2VpcHRSYXRlOiBwYXltZW50UmF0ZSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlB1cmNoYXNlIFBheW1lbnQgRGlzY291bnQiLAogICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IHNldHRsZW1lbnREaXNjQWNjLAogICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogc2V0dGxlbWVudERpc2NBY2MuaWQsCiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiByYXdEaXNjb3VudEFtb3VudCAqIC0xLAogICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlQW1vdW50OiBkaXNjb3VudEFtb3VudCAqIC0xLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICAgICAgICB0eXBlQXM6ICJTZXR0bGVtZW50IERpc2NvdW50IgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOyAvLyB0aGlzLmludm9pY2VUeG4odHhuSWRzKQoKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC50b3RhbCA9IHJlY2VpcHRBbW91bnQ7CiAgICAgIHRoaXMucmVxdWVzdFBheW1lbnQuZXhjaGFuZ2VBbW91bnQgPSBjb252ZXJ0ZWRBbW91bnQ7CiAgICAgIHRoaXMucmVxdWVzdFBheW1lbnQuZGlzY291bnQgPSBkaXNjb3VudDsKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC5leGNoYW5nZURpc2NvdW50ID0gZXhjaGFuZ2VEaXNjb3VudDsKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC5wYWlkQW1vdW50VHhuID0gcGFpZEFtb3VudFR4bjsKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC5leGNoYW5nZURpc2NvdW50VHhuID0gZXhjaGFuZ2VEaXNjb3VudFR4bjsKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC5mdW5kUmVtYWluQmFsYW5jZSA9IHBhcnNlRmxvYXQodGhpcy5yZXF1ZXN0UGF5bWVudC5mdW5kQmFsYW5jZSB8fCAwKSAtIHBhcnNlRmxvYXQoY29udmVydGVkQW1vdW50KTsKICAgICAgdGhpcy5yZXF1ZXN0UGF5bWVudC52ZW5kb3JSZW1haW5pbmdCYWxhbmNlID0gcGFyc2VGbG9hdCh0aGlzLnJlcXVlc3RQYXltZW50LnZlbmRvckJhbGFuY2UgfHwgMCkgLSAocGFyc2VGbG9hdChjb252ZXJ0ZWRBbW91bnQpICsgZGlzY291bnQpOwogICAgICB0aGlzLnZlbmRvclJlbWFpbmluZ0JhbGFuY2UgPSB0aGlzLm51bWJlckZvcm1hdChwYXJzZUZsb2F0KHRoaXMucmVxdWVzdFBheW1lbnQudmVuZG9yQmFsYW5jZSB8fCAwKSAtIChwYXJzZUZsb2F0KGNvbnZlcnRlZEFtb3VudCkgKyBkaXNjb3VudCkpOwogICAgICB0aGlzLmZ1bmRSZW1haW5CYWxhbmNlID0gdGhpcy5udW1iZXJGb3JtYXQocGFyc2VGbG9hdCh0aGlzLnJlcXVlc3RQYXltZW50LmZ1bmRCYWxhbmNlIHx8IDApIC0gcGFyc2VGbG9hdChjb252ZXJ0ZWRBbW91bnQpKTsKICAgICAgdGhpcy5zaHJpbmtEYXRhKHRoaXMualJhdyk7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiYWEiLCByb3dzKTsKICAgIH0sCiAgICBzaHJpbmtEYXRhOiBmdW5jdGlvbiBzaHJpbmtEYXRhKG9iaikgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHZhciB1bmlxdWVzID0gdGhpcy5yZW1vdmVEdXBsaWNhdGUob2JqKTsKICAgICAgdW5pcXVlcy5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgdmFyIGZvdW5kID0gb2JqLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0uaWQgPT09IG4uaWQ7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGFtb3VudCA9IDAsCiAgICAgICAgICAgIGV4Y2hhbmdlQW1vdW50ID0gMDsKICAgICAgICBmb3VuZC5mb3JFYWNoKGZ1bmN0aW9uICh6KSB7CiAgICAgICAgICBhbW91bnQgKz0gcGFyc2VGbG9hdCh6LmFtb3VudCB8fCAwKTsKICAgICAgICAgIGV4Y2hhbmdlQW1vdW50ICs9IHBhcnNlRmxvYXQoei5leGNoYW5nZUFtb3VudCB8fCAwKTsKICAgICAgICB9KTsKICAgICAgICBuLmV4Y2hhbmdlQW1vdW50ID0gcGFyc2VGbG9hdChleGNoYW5nZUFtb3VudCk7IC8vdGhpcy5udW1iZXJGb3JtYXQoYW1vdW50KQoKICAgICAgICBuLmFtb3VudCA9IHBhcnNlRmxvYXQoYW1vdW50KTsgLy9wYXJzZUZsb2F0KHBhcnNlRmxvYXQoYW1vdW50IC8gcGFyc2VGbG9hdChuLnJlY2VpcHRSYXRlKSkpIC8vdGhpcy5udW1iZXJGb3JtYXQoYW1vdW50ICogcGFyc2VGbG9hdCh0aGlzLmludm9pY2UudHhuUmF0ZSkpIC8vLnRvRml4ZWQodGhpcy5zYWxlRm9ybUNvbnRlbnQuZGVjaW1hbCkKICAgICAgfSk7CiAgICAgIHRoaXMualJhdyA9IHVuaXF1ZXM7CiAgICAgIHZhciBkciA9IDAsCiAgICAgICAgICBjciA9IDA7CiAgICAgIHRoaXMualJhdy5mb3JFYWNoKGZ1bmN0aW9uIChqKSB7CiAgICAgICAgc3dpdGNoIChqLnR5cGUpIHsKICAgICAgICAgIGNhc2UgImNyIjoKICAgICAgICAgICAgY3IgKz0gcGFyc2VGbG9hdChqLmV4Y2hhbmdlQW1vdW50KTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAiZHIiOgogICAgICAgICAgICBkciArPSBwYXJzZUZsb2F0KGouZXhjaGFuZ2VBbW91bnQpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0pOyAvLyB3aW5kb3cuY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5qUmF3KSwgJ3VuaXF1ZXMnKQoKICAgICAgdmFyIHR4bklkID0gdGhpcy5qUmF3Lm1hcChmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiBvLnR4bklkOwogICAgICB9KTsKICAgICAgdmFyIHVTZXQgPSBuZXcgU2V0KHR4bklkKTsKCiAgICAgIHZhciB1bmlxdWVTZXQgPSBfdG9Db25zdW1hYmxlQXJyYXkodVNldCk7CgogICAgICB2YXIgalJhd3MgPSBbXTsgLy8gd2luZG93LmNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHVuaXF1ZVNldCksICd1bmlxdWVzJykKCiAgICAgIHVuaXF1ZVNldC5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgdmFyIGZvdW5kID0gX3RoaXM4LmpSYXcuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICByZXR1cm4gbS50eG5JZCA9PT0gbjsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIGxpbmUgPSBmb3VuZFswXS5saW5lOwogICAgICAgIHZhciByZWZObyA9IGxpbmUucmVmZXJlbmNlTm87CiAgICAgICAgalJhd3MucHVzaCh7CiAgICAgICAgICBpZDogbiwKICAgICAgICAgIGN1cnJlbmN5Q29kZTogZm91bmRbMF0uY3VycmVuY3lDb2RlLAogICAgICAgICAgcHJvamVjdElkOiBmb3VuZFswXS5wcm9qZWN0SWQsCiAgICAgICAgICBzZWdtZW50SWQ6IGZvdW5kWzBdLnNlZ21lbnRJZCwKICAgICAgICAgIGxvY2F0aW9uSWQ6IGZvdW5kWzBdLmxvY2F0aW9uSWQsCiAgICAgICAgICByZWZlcmVuY2VObzogcmVmTm8gfHwgIiIsCiAgICAgICAgICBlbnRyaWVzOiBmb3VuZAogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5qUmF3ID0galJhd3M7CiAgICAgIHRoaXMuZHIgPSBkcjsKICAgICAgdGhpcy5jciA9IGNyOwogICAgICB3aW5kb3cuY29uc29sZS5sb2coImRyPSIsIGRyLCAiY3I9IiwgY3IsICJkcitjciA9ICIsIGRyICsgY3IpOwogICAgICB3aW5kb3cuY29uc29sZS5sb2coalJhd3MsICJ1bmlxdWVzIik7CiAgICB9LAogICAgcHVyY2hhc2VUeG46IGZ1bmN0aW9uIHB1cmNoYXNlVHhuKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciB0eG5JZHMgPSBbXSwKICAgICAgICAgIGlkcyA9IFtdOwogICAgICB0aGlzLml0ZW1MaW5lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZS5pZCkgewogICAgICAgICAgdHhuSWRzLnB1c2goewogICAgICAgICAgICBpZDogdmFsdWUuaWQsCiAgICAgICAgICAgIHN0YXR1czogMQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWRzID0gT2JqZWN0LnZhbHVlcyh0eG5JZHMucmVkdWNlKGZ1bmN0aW9uIChyLCBvKSB7CiAgICAgICAgcmV0dXJuIHJbby5pZF0gPSBvLCByOwogICAgICB9LCB7fSkpOwogICAgICBpZHMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgIHZhciBsaW5lcyA9IF90aGlzOS5pdGVtTGluZXMuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gbi5pZCA9PT0gbS5pZDsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIHBhaWRBbXQgPSAwOwogICAgICAgIHZhciBhbW91bnRUb2JlUGFpZCA9IDA7CiAgICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAoeCkgewogICAgICAgICAgaWYgKHgucGFpZEFtb3VudCkgewogICAgICAgICAgICBwYWlkQW10ICs9IHgucGFpZEFtb3VudDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoeC5hbW91bnRUb2JlUGFpZCkgewogICAgICAgICAgICBhbW91bnRUb2JlUGFpZCArPSB4LmFtb3VudFRvYmVQYWlkOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB2YXIgcEFtdCA9IF90aGlzOS5udW1iZXJGb3JtYXQocGFpZEFtdCk7CgogICAgICAgIHZhciBhbXRUb2JlUGFpZCA9IF90aGlzOS5udW1iZXJGb3JtYXQoYW1vdW50VG9iZVBhaWQpOwoKICAgICAgICBpZiAocEFtdCA9PT0gYW10VG9iZVBhaWQpIHsKICAgICAgICAgIG1bInN0YXR1cyJdID0gMzsgLy9QYWlkCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1bInN0YXR1cyJdID0gMjsgLy8gUGFydGlhbGx5IFBhaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnR4bkxpc3QgPSBpZHM7CiAgICB9LAogICAgbG9hZE90aGVyQWNjb3VudDogZnVuY3Rpb24gbG9hZE90aGVyQWNjb3VudCgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ0hhbmRsZXIuZ2V0T3RoZXJBY2NvdW50KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTAuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5maWx0ZXIoZnVuY3Rpb24gKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5iYW5oamlBY2NDb2RlID09PSAiNzQwMDEwIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5nYWluTG9zc0FjYyA9IGRhdGFbMF0uYWNjb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFfID0gcmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uYmFuaGppQWNjQ29kZSA9PT0gIjc0MDA0MCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFfLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLm90aGVyUmV2ZW51ZUFjYyA9IGRhdGFfWzBdLmFjY291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpOwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTAuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvblNhdmVDbG9zZTogZnVuY3Rpb24gb25TYXZlQ2xvc2UoKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMS4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczExLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CgogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtTGluZURTID0gX3RoaXMxMS4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtTGluZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VwcGxpZXIgPSBfdGhpczExLnJlcXVlc3RQYXltZW50LnN1cHBsaWVyIHx8IHt9OwogICAgICAgICAgICAgICAgICAgIGl0ZW1MaW5lRFMuZGF0YSgpLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ucGFpZEFtb3VudCA+IDAgfHwgbi5kaXNjb3VudCA+IDA7CiAgICAgICAgICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAofl90aGlzMTEuc2VsZWN0ZWRFeHBlbnNlSWRzLmluZGV4T2Yobi5saW5lSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW5jeSA9IG4uY3VycmVuY3kgfHwge307CiAgICAgICAgICAgICAgICAgICAgICAgIG5bInBheW1lbnRPcHRpb24iXSA9IG5ldyBQYXltZW50T3B0aW9uTW9kZWwobi5wYXltZW50T3B0aW9uIHx8IHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgblsicGF5bWVudFRlcm0iXSA9IG5ldyBQYXltZW50VGVybU1vZGVsKG4ucGF5bWVudFRlcm0gfHwge30pOwogICAgICAgICAgICAgICAgICAgICAgICBuWyJjdXJyZW5jeSJdID0gbmV3IEN1cnJlbmN5TW9kZWwobi5jdXJyZW5jeSB8fCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5bImN1cnJlbmN5Q29kZSJdID0gY3VycmVuY3kuY29kZSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgblsiYXBBY2MiXSA9IG5ldyBBY2NvdW50TWFwcGluZ01vZGVsKG4uYXBBY2MgfHwge30pOwogICAgICAgICAgICAgICAgICAgICAgICBuWyJzdXBwbGllciJdID0gbmV3IFN1cHBsaWVyTW9kZWwoc3VwcGxpZXIpOwogICAgICAgICAgICAgICAgICAgICAgICBuWyJpZCJdID0gblsidHhuSWQiXTsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUxpbmVzLnB1c2gobmV3IEl0ZW1MaW5lTW9kZWwobikpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbUxpbmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0F1dG9HZW5lcmF0ZSA9IDE7IC8vdG9kbzogbWF0Y2ggUmVxdWVzdCBQYXltZW50IG1vZGVsCgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5yZXF1ZXN0UGF5bWVudFsiaXRlbUxpbmVzIl0gPSBpdGVtTGluZXM7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLnJlcXVlc3RQYXltZW50WyJ0eXBlIl0gPSBUUkFOU0FDVElPTl9UWVBFOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5yZXF1ZXN0UGF5bWVudFsiaXNBdXRvR2VuZXJhdGUiXSA9IGlzQXV0b0dlbmVyYXRlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5yZXF1ZXN0UGF5bWVudFsiYWN0aW9uVHlwZSJdID0gX3RoaXMxMS4kcm91dGUucGFyYW1zLmlkID8gX3RoaXMxMS4kcm91dGUucXVlcnkudHlwZSA6ICJuZXciOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5yZXF1ZXN0UGF5bWVudFsibG9nZ2VkVXNlciJdID0gX3RoaXMxMS5sb2dnZWRVc2VyOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5zaG93TG9hZGluZyA9IHRydWU7IC8vIHdpbmRvdy5jb25zb2xlLmxvZygndGhpcy5pdGVtTGluZXMnLCBpdGVtTGluZXMpCiAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ3RoaXMuaXRlbUxpbmVzJywgSlNPTi5zdHJpbmdpZnkoaXRlbUxpbmVzKSkKCiAgICAgICAgICAgICAgICAgICAgICBiaWxsaW5nSGFuZGxlci5jcmVhdGVSZXF1ZXN0UGF5bWVudChuZXcgUmVxdWVzdFBheW1lbnRNb2RlbChfdGhpczExLnJlcXVlc3RQYXltZW50KSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jbG9zZShyZXNwb25zZS5kYXRhLmRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5zaG93TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLiRzbm90aWZ5LnN1Y2Nlc3MoIlN1Y2Nlc3NmdWxseSIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLmNsZWFyKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmdvKC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5zaG93TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kc25vdGlmeS5lcnJvcigiU29tZXRoaW5nIHdlbnQgd3JvbmciKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZXJyb3JzLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDIwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHRoaXMuaWQgPSB1bmRlZmluZWQ7CiAgICAgIHRoaXMucmVxdWVzdFBheW1lbnQgPSBuZXcgUmVxdWVzdFBheW1lbnRNb2RlbCh7fSk7CiAgICAgIHRoaXMuaXRlbUxpbmVzID0gW107CiAgICAgIHRoaXMucmVxdWVzdFBheW1lbnQudHJhbnNhY3Rpb25UeXBlID0gdGhpcy50cmFuc2FjdGlvblR5cGVzWzBdOwogICAgICB0aGlzLmdlbmVyYXRlTnVtYmVyKCk7CiAgICB9LAogICAgbG9hZEVudHJ5RGV0YWlsQnlBY2NvdW50OiBmdW5jdGlvbiBsb2FkRW50cnlEZXRhaWxCeUFjY291bnQoaWQsIHBhcmFtcykgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczEyLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBqb3VybmFsSGFuZGxlci5nZXRFbnRyeURldGFpbEJ5QWNjb3VudChpZCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIucmVxdWVzdFBheW1lbnQuZnVuZEJhbGFuY2UgPSByZXMuZW5kaW5nX2JhbGFuY2UgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuZnVuZEJhbGFuY2UgPSBfdGhpczEyLm51bWJlckZvcm1hdChyZXMuZW5kaW5nX2JhbGFuY2UgfHwgMCk7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLmZ1bmRSZW1haW5CYWxhbmNlID0gX3RoaXMxMi5udW1iZXJGb3JtYXQocGFyc2VGbG9hdChyZXMuZW5kaW5nX2JhbGFuY2UgfHwgMCkgLSBwYXJzZUZsb2F0KF90aGlzMTIucmVxdWVzdFBheW1lbnQuZXhjaGFuZ2VBbW91bnQpKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIucmVxdWVzdFBheW1lbnQuZnVuZFJlbWFpbkJhbGFuY2UgPSBwYXJzZUZsb2F0KHJlcy5lbmRpbmdfYmFsYW5jZSB8fCAwKSAtIHBhcnNlRmxvYXQoX3RoaXMxMi5yZXF1ZXN0UGF5bWVudC5mdW5kQmFsYW5jZSk7IC8vIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfbW91bnRlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRQcmVmaXgoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFNhbGVGb3JtQ29udGVudCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkT3RoZXJBY2NvdW50KCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlOCwgdGhpcyk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgcmV0dXJuIF9tb3VudGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIG1vdW50ZWQ7CiAgfSgpLAogIGNvbXB1dGVkOiB7fQp9Ow=="},{"version":3,"sources":["RequestPayment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col cols=\"12\" sm=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border rounded-sm\"\n            color=\"white\"\n          >\n            <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n              <v-card outlined dense class=\"no_border mb-1\">\n                <h2 class=\"mb-0 \">{{ $t(\"payment_request\") }}</h2>\n                <v-icon\n                  @click=\"cancel()\"\n                  style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                  class=\"float-right\"\n                  >close\n                </v-icon>\n              </v-card>\n\n              <v-card outlined dense class=\"px-3 no_border mb-3\" color=\"white\">\n                <v-row style=\"background: #F8F8F9;\">\n                  <v-col\n                    sm=\"3\"\n                    cols=\"12\"\n                    class=\"kendo_dropdown_custom pt-3 pb-0\"\n                  >\n                    <label>{{ $t(\"vendor_name\") }}</label>\n                    <vendor-dropdownlist\n                      :initVendor=\"requestPayment.supplier\"\n                      @emitVendor=\"requestPayment.supplier = $event\"\n                      @onChange=\"onVendorChanged\"\n                    />\n                  </v-col>\n                  <v-col\n                    sm=\"3\"\n                    cols=\"12\"\n                    class=\"kendo_dropdown_custom pt-3 pb-0\"\n                  >\n                    <label>{{ $t(\"request_date\") }}</label>\n                    <app-datepicker\n                      :initialDate=\"requestPayment.transactionDate\"\n                      @emitDate=\"requestPayment.transactionDate = $event\"\n                    />\n                  </v-col>\n                  <v-col sm=\"4\">\n                    <label>{{ $t(\"number\") }}</label>\n                    <div class=\"d-flex mt-1\">\n                      <div class=\"code_text flex-1 text-bold\">\n                        {{ requestPayment.transactionType.abbr }}\n                      </div>\n\n                      <v-text-field\n                        class=\" custom-border flex-2\"\n                        v-model=\"requestPayment.number\"\n                        outlined\n                        disabled\n                        :rules=\"[(v) => !!v || 'Number is required']\"\n                        required\n                      />\n                      <v-icon\n                        color=\"black\"\n                        size=\"30\"\n                        style=\" height: 40px;\"\n                        class=\"border_qrcode ml-2\"\n                        @click=\"generateNumber\"\n                        >mdi-qrcode\n                      </v-icon>\n                    </div>\n                  </v-col>\n                  <v-col sm=\"1\" cols=\"1\" class=\"pb-0\">\n                    <v-btn\n                      color=\"primary mt-6 white--text\"\n                      @click=\"searchPurchaseOrderExpense\"\n                    >\n                      <i\n                        class=\"b-search\"\n                        style=\"font-size: 15px; color:#fff !important;\"\n                      />\n                    </v-btn>\n                  </v-col>\n                </v-row>\n                <v-row style=\"background: #F8F8F9;\"> </v-row>\n                <v-row>\n                  <v-col cols=\"12\" class=\"pt-0\">\n                    <template>\n                      <LoadingMe\n                        :isLoading=\"showLoading\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"\n                      />\n                      <kendo-datasource\n                        ref=\"itemLineDS\"\n                        :change=\"onDataSourceChange\"\n                        :schema=\"schemaDefinition\"\n                        :data=\"itemLines\"\n                      />\n                      <kendo-grid\n                        id=\"gridRequestPayment_\"\n                        class=\"grid-function\"\n                        :data-source-ref=\"'itemLineDS'\"\n                        ref=\"gridRequestPayment\"\n                        :sortable=\"false\"\n                        :filterable=\"false\"\n                        :column-menu=\"true\"\n                        :editable=\"true\"\n                        :change=\"onGridRequestChange\"\n                        :noRecords=\"true\"\n                      >\n                        <kendo-grid-column\n                          :locked=\"true\"\n                          :selectable=\"true\"\n                          :width=\"40\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'billNumber'\"\n                          :title=\"$t('bill_number')\"\n                          :width=\"180\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"billNumberTmp\"\n                          :locked=\"true\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'referenceNo'\"\n                          :title=\"$t('transaction_num')\"\n                          :width=\"210\"\n                          :hidden=\"false\"\n                          :locked=\"true\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"referenceNoTmp\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'dueDate'\"\n                          :title=\"$t('due_date')\"\n                          :width=\"150\"\n                          :lockable=\"false\"\n                          :template=\"formatDate\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'txnNote'\"\n                          :title=\"$t('note')\"\n                          :width=\"200\"\n                          :hidden=\"false\"\n                          :lockable=\"false\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: left; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'currencyCode'\"\n                          :title=\"$t('currency')\"\n                          :width=\"150\"\n                          :lockable=\"false\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"currency\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amount'\"\n                          :title=\"$t('amount')\"\n                          :width=\"150\"\n                          :lockable=\"false\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"amount\"\n                          :attributes=\"{ style: 'text-align: right' }\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'discount'\"\n                          :title=\"$t('discount')\"\n                          :editor=\"discountEditor\"\n                          :template=\"discount\"\n                          :width=\"150\"\n                          :lockable=\"false\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amountTobePaid'\"\n                          :title=\"$t('amount_to_be_paid')\"\n                          :width=\"210\"\n                          :lockable=\"false\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"amountTobePaid\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'paidAmount'\"\n                          :title=\"$t('paid_amount')\"\n                          :width=\"200\"\n                          :lockable=\"false\"\n                          :editor=\"paidAmountEditor\"\n                          :template=\"paidAmountTmp\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'overDue'\"\n                          :title=\"$t('over_due')\"\n                          :width=\"130\"\n                          :lockable=\"false\"\n                          :hidden=\"true\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"overDue\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'paymentTerm'\"\n                          :title=\"$t('payment_term')\"\n                          :width=\"200\"\n                          :lockable=\"false\"\n                          :hidden=\"true\"\n                          :template=\"settlementDiscount\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'bankReferenceNo'\"\n                          :title=\"$t('bank_reference_no')\"\n                          :width=\"180\"\n                          :lockable=\"false\"\n                          :hidden=\"true\"\n                          :template=\"bankReferenceNo\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'status'\"\n                          :title=\"$t('status')\"\n                          :width=\"150\"\n                          :lockable=\"false\"\n                          :template=\"status\"\n                          :hidden=\"true\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                      </kendo-grid>\n                    </template>\n                  </v-col>\n                  <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                    <v-row>\n                      <v-col sm=\"6\" cols=\"12\" class=\"\"></v-col>\n                      <v-col sm=\"6\" cols=\"12\">\n                        <v-simple-table>\n                          <template v-slot:default>\n                            <tbody>\n                              <tr>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t(\"discount\") }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-left primary--text text-bold\">\n                                  {{ numberFormat(requestPayment.discount) }}\n                                </td>\n                              </tr>\n                              <tr>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t(\"exchange_amount\") }} -\n                                  {{ baseCurrencyCode }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-left primary--text text-bold\">\n                                  {{\n                                    numberFormat(requestPayment.exchangeAmount)\n                                  }}\n                                </td>\n                              </tr>\n                              <tr hidden>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t(\"dr\") }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-left primary--text text-bold\">\n                                  {{ numberFormat(dr) }}\n                                </td>\n                              </tr>\n                              <tr hidden>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t(\"cr\") }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-left primary--text text-bold\">\n                                  {{ numberFormat(cr) }}\n                                </td>\n                              </tr>\n                            </tbody>\n                          </template>\n                        </v-simple-table>\n                      </v-col>\n                    </v-row>\n                  </v-col>\n                </v-row>\n                <!-- Payment Options & Position Analysis -->\n                <v-row>\n                  <v-col sm=\"4\" cols=\"4\" class=\"kendo_dropdown_custom\">\n                    <v-card outlined dense class=\"no_border pa-4\" color=\"grayBg\" >\n                      <h3 class=\"mb-1\">{{ $t(\"payment_option_position\") }}</h3>\n                      <label>{{ $t(\"payment_option\") }}</label>\n                      <div class=\"mb-3\">\n                      <paymentoption-dropdownlist\n                        :initPaymentOption=\"requestPayment.paymentOption\"\n                        :initType=\"'Supplier'\"\n                        @onChange=\"onPaymentOptionChanged\"\n                      />\n                      </div>\n\n                      <label>{{ $t(\"expected_payment_date\") }}</label>\n                      <app-datepicker\n                        :initialDate=\"requestPayment.expectedPaymentDate\"\n                        @emitDate=\"requestPayment.expectedPaymentDate = $event\"\n                      />\n                    </v-card>\n                  </v-col>\n                  <v-col sm=\"4\" cols=\"4\" class=\"kendo_dropdown_custom\">\n                    <!-- Fund Position  -->\n                    <v-card outlined dense class=\"no_border pa-4\" color=\"grayBg\" mind>\n                      <h3 class=\"mb-1\">{{ $t(\"fund_position\") }}</h3>\n                      <label>{{ $t(\"current_balance\") }}</label>\n                      <h1 class=\"font_16 primary--text my-3 text-right\">{{fundBalance}}</h1>\n\n                      <label>{{ $t(\"remaining_balance\") }}</label>\n                      <h1 class=\"font_16 primary--text my-3 text-right\">{{fundRemainBalance}}</h1>\n                    </v-card>\n                  </v-col>\n                  <v-col sm=\"4\" cols=\"4\">\n                    <!-- \tPayable Position  -->\n                    <v-card outlined dense class=\"no_border pa-4\" color=\"grayBg\">\n                      <h3 class=\"mb-1\">{{ $t(\"payable_position\") }}</h3>\n                      <label>{{ $t(\"current_balance\") }}</label>\n                      <v-text-field\n                        outlined\n                        :disabled=\"true\"\n                        v-model=\"balance\"\n                        class=\"mt-1\"\n                      />\n                      <label>{{ $t(\"remaining_balance\") }}</label>\n                      <v-text-field\n                        outlined\n                        :disabled=\"true\"\n                        v-model=\"vendorRemainingBalance\"\n                        class=\"mt-1\"\n                      />\n                    </v-card>\n                  </v-col>\n                </v-row>\n              </v-card>\n              <v-divider class=\"mt-4\" />\n              <v-card outlined dense class=\"no_border function_footer\">\n                <!--                                <v-menu>-->\n                <!--                                    <template v-slot:activator=\"{ on }\">-->\n                <!--                                        <v-btn-->\n                <!--                                            color=\"black\"-->\n                <!--                                            outlined-->\n                <!--                                            class=\"mr-2 text-capitalize  black&#45;&#45;text float-left\"-->\n                <!--                                            v-on=\"on\"-->\n                <!--                                        >-->\n                <!--                                            {{ $t(\"select_template\") }}-->\n                <!--                                            <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>-->\n                <!--                                        </v-btn>-->\n                <!--                                    </template>-->\n                <!--                                    <v-list>-->\n                <!--                                        <v-list-item-->\n                <!--                                            v-for=\"(item, index) in templates\"-->\n                <!--                                            :key=\"index\"-->\n                <!--                                        >-->\n                <!--                                            <v-list-item-title>{{ item.title }}</v-list-item-title>-->\n                <!--                                        </v-list-item>-->\n                <!--                                    </v-list>-->\n                <!--                                </v-menu>-->\n                <v-btn\n                  color=\"black\"\n                  class=\"text-capitalize  white--text float-left\"\n                  @click=\"cancel()\"\n                  >{{ $t(\"cancel\") }}\n                </v-btn>\n                <!--                                <v-btn-->\n                <!--                                    color=\"third\"-->\n                <!--                                    class=\"ml-3 float-right text-capitalize  white&#45;&#45;text\">-->\n                <!--                                    {{ $t(\"save_new\") }}-->\n                <!--                                </v-btn>-->\n                <v-btn\n                  @click=\"onSaveClose\"\n                  color=\"primary\"\n                  class=\" float-right text-capitalize  white--text\"\n                >\n                  {{ $t(\"save_close\") }}\n                </v-btn>\n              </v-card>\n            </v-form>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport { i18n } from \"@/i18n\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport supplierHandler from \"@/scripts/supplierHandler\";\nimport journalHandler from \"@/scripts/journalHandler\";\nimport RequestPaymentModel from \"@/scripts/request-payment/model/RequestPayment\";\nimport ItemLineModel from \"@/scripts/request-payment/model/ItemLine\";\nimport kendo from \"@progress/kendo-ui\";\nimport billingHandler from \"@/scripts/invoice/handler/billingHandler\";\nimport prefixHandler from \"@/scripts/prefixHandler\";\nimport purchaseFormContentHandler from \"@/scripts/purchaseFormContentHandler\";\nimport settingHandler from \"@/scripts/settingsHandler\";\nimport { CurrencyModel, PaymentTermModel } from \"@/scripts/model/AppModels\";\nimport PaymentOptionModel from \"@/scripts/model/PaymentOption\";\nimport AccountMappingModel from \"@/scripts/account-map/Account\";\nimport SupplierModel from \"@/scripts/model/Supplier\";\nimport Helper from \"@/helper\";\n\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\nconst requestPaymentModel = new RequestPaymentModel({});\nconst itemLineModel = new ItemLineModel({});\n\nconst OPTION_TYPE = \"Supplier\";\nconst TRANSACTION_TYPE = \"Request Payment\";\nconst TXN_TYPE = \"request payment\";\n\nexport default {\n  name: \"RequestPayment\",\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    \"app-datepicker\": DatePickerComponent,\n    \"vendor-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/VendorDropdown\"),\n    \"paymentoption-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/PaymentOptionDropDownList\"),\n  },\n  data: () => ({\n    showLoading: false,\n    customerList: [],\n    group: [],\n    suppliers: [],\n    customer: {},\n    overDueAmount: 0,\n    receivableBalance: 0,\n    tobeCollected: 0,\n    valid: true,\n    template: [],\n    templates: [],\n    itemLines: [],\n    transactionTypes: [],\n    receivableList: [],\n    requestPayment: requestPaymentModel,\n    itemLine: itemLineModel,\n    supBaseUrl: supplierHandler.search(),\n    selectedExpenseIds: [],\n    purchaseFormContent: {},\n    balance: 0,\n    jRaw: [],\n    txnList: [],\n    gainLossAcc: {},\n    otherRevenueAcc: {},\n    gainOrLossDescription: \"gain/loss on exchange rate\",\n    penaltyDescription: \"penalty\",\n    baseCurrencyCode: \"\",\n    loggedUser: {\n      id: cookie.creator,\n      name: cookie.email,\n    },\n    cr: 0,\n    dr: 0,\n    fundBalance: 0,\n    vendorRemainingBalance: 0,\n    fundRemainBalance: 0,\n    schemaDefinition: {\n      model: { id: \"lineId\" },\n    },\n    isCheckChanged: false,\n  }),\n  methods: {\n    onVendorChanged(value) {\n      this.requestPayment.supplier = value;\n      const supplier = this.requestPayment.supplier || {};\n      const supplierId = supplier.id || \"\";\n      if (supplierId) {\n        this.loadVendorBalance(supplierId);\n      }\n    },\n    cancel() {\n      this.$swal({\n        title: i18n.t(\"msg_title_warning\"),\n        text: i18n.t(\"msg_discard\"),\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: i18n.t(\"cancel\"),\n        confirmButtonColor: \"#4d4848\",\n        cancelButtonColor: \"#ED1A3A\",\n        confirmButtonText: i18n.t(\"discard\"),\n      }).then((result) => {\n        if (result.value) {\n          this.$router.go(-1);\n        }\n      });\n    },\n    currency(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"currencyCode\")) {\n          return dataItem.currencyCode;\n        }\n      }\n      return \"\";\n    },\n    referenceNoTmp(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"referenceNo\")) {\n          return dataItem.referenceNo;\n        }\n      }\n      return \"\";\n    },\n    billNumberTmp(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"billNumber\")) {\n          return dataItem.billNumber;\n        }\n      }\n      return \"\";\n    },\n    paidAmountTmp(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"paidAmount\")) {\n          return kendo.toString(dataItem.paidAmount, dataItem.decimalFormat);\n        }\n      }\n      return \"\";\n    },\n    amountTobePaid(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"amountTobePaid\")) {\n          return kendo.toString(\n            dataItem.amountTobePaid,\n            dataItem.decimalFormat\n          );\n        }\n      }\n      return \"\";\n    },\n    discount(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"discount\")) {\n          const discount = dataItem.discount || 0;\n          return kendo.toString(discount, dataItem.decimalFormat);\n        }\n      }\n      return 0;\n    },\n    amount(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"amount\")) {\n          const amount = dataItem.amount || 0;\n          return kendo.toString(amount, dataItem.decimalFormat);\n        }\n      }\n      return 0;\n    },\n    bankReferenceNo(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"overDue\")) {\n          return dataItem.bankReferenceNo;\n        }\n      }\n      return \"\";\n    },\n    overDue(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"overDue\")) {\n          return dataItem.overDue;\n        }\n      }\n      return 0;\n    },\n    paidAmountEditor(container, options) {\n      kendo\n        .jQuery('<input data-bind=\"value:' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoNumericTextBox({\n          decimals: 5,\n          format: `n${this.purchaseFormContent.decimal}`,\n          min: 0,\n        });\n    },\n    discountEditor(container, options) {\n      kendo\n        .jQuery('<input data-bind=\"value:' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoNumericTextBox({\n          decimals: 30,\n          format: `n${this.purchaseFormContent.decimal}`,\n          min: 0,\n        });\n    },\n    onTransactionDateChanged() {\n      if (this.requestPayment.supplier) {\n        const supplier = this.requestPayment.supplier || {};\n        const supId = supplier.id || \"\";\n        if (supId) {\n          this.generateNumber();\n          this.searchPurchaseOrderExpense();\n        }\n      }\n    },\n    generateNumber() {\n      if (this.$route.params.id) {\n        const tranDate = new Date(this.requestPayment.transactionDate);\n        const tranDateReceipt = new Date(this.requestPayment.transactionDate);\n        const tranDateM = tranDate.getFullYear() + tranDate.getMonth();\n        const tranDateReceiptM =\n          tranDateReceipt.getFullYear() + tranDateReceipt.getMonth();\n        if (tranDateM === tranDateReceiptM) {\n          this.requestPayment.referenceNo = this.referenceNo;\n          return;\n        }\n      }\n      // window.console.log(\"abbr\", this.requestPayment.transactionType);\n      if (this.requestPayment.transactionDate !== \"\") {\n        let data = {\n          abbr: this.requestPayment.transactionType.abbr,\n          structure: this.requestPayment.transactionType.structure,\n          transactionDate: new Date(this.requestPayment.transactionDate)\n            .toISOString()\n            .substr(0, 10),\n          sequcencing: this.requestPayment.transactionType.sequcencing,\n          type: TRANSACTION_TYPE,\n          entity: 1,\n        };\n        billingHandler\n          .lastNumber(data)\n          .then((response) => {\n            if (response.data.statusCode === 200) {\n              const res = response.data.data;\n              const lastNumber = this.zeroPad(\n                parseInt(res.lastNumber),\n                this.requestPayment.transactionType.format\n              );\n              const number =\n                res.suffix +\n                this.requestPayment.transactionType.numberSeparator +\n                lastNumber;\n              this.requestPayment.number = number;\n              if (\n                this.requestPayment.transactionType.hasOwnProperty(\n                  \"prefixSeparator\"\n                )\n              ) {\n                const prefixSep = this.requestPayment.transactionType\n                  .prefixSeparator;\n                this.requestPayment.referenceNo =\n                  this.requestPayment.transactionType.abbr + prefixSep + number;\n              }\n            }\n          })\n          .catch((e) => {\n            this.errors.push(e);\n          });\n      }\n    },\n    zeroPad(num, places) {\n      return String(num).padStart(places, \"0\");\n    },\n    removeDuplicate(array) {\n      const result = [];\n      const map = new Map();\n      for (const item of array) {\n        if (!map.has(item.id)) {\n          map.set(item.id, true); // set any value to Map\n          result.push(item);\n        }\n      }\n      return result;\n    },\n    formatDate(dataItem) {\n      if (dataItem.hasOwnProperty(\"dueDate\")) {\n        return kendo.toString(new Date(dataItem.dueDate), dataItem.dateFormat);\n      }\n      return \"\";\n    },\n    settlementDiscount(dataItem) {\n      if (dataItem.hasOwnProperty(\"paymentTerm\")) {\n        return dataItem.paymentTerm.name || \"\";\n      }\n      return \"\";\n    },\n    status(dataItem) {\n      if (dataItem) {\n        if (dataItem.hasOwnProperty(\"status\")) {\n          const status = dataItem.status;\n          let statusText = \"\";\n          switch (status) {\n            case 1:\n              statusText = \"OPEN\";\n              break;\n            case 2:\n              statusText = \"Partially Paid\";\n              break;\n            case 4:\n              statusText = \"VOID\";\n              break;\n            case 3:\n              statusText = \"PAID\";\n              break;\n          }\n          return statusText;\n        }\n      }\n      return \"\";\n    },\n    onPaymentOptionChanged(value) {\n      this.requestPayment.paymentOption = value;\n      const account = value.account || {};\n      const accountId = account.uuid || \"\";\n      if (accountId) {\n        let currentFiscalDate = Helper.getFiscalDateByDate(new Date());\n        let startDate = currentFiscalDate.start_date;\n        const strParam = {\n          params: {\n            start_date:\n              kendo.toString(new Date(startDate), \"yyyy-MM-dd\") +\n              \"T00:00:00.000Z\",\n            end_date:\n              kendo.toString(\n                new Date(this.requestPayment.transactionDate),\n                \"yyyy-MM-dd\"\n              ) + \"T23:59:59.999Z\",\n          },\n        };\n        this.loadEntryDetailByAccount(accountId, strParam);\n      }\n      // window.console.log(value, \"paymentOption\");\n    },\n    async loadPrefix() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          prefixHandler.get(TXN_TYPE).then((res) => {\n            if (res.data.statusCode === 200) {\n              const response = res.data.data;\n              this.transactionTypes = response;\n              if (response.length > 0) {\n                this.requestPayment.transactionType = response[0];\n                if (!this.$route.params.id) {\n                  this.generateNumber();\n                }\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async searchPurchaseOrderExpense() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let data = {};\n          this.showLoading = true;\n          const supplier = this.requestPayment.supplier || {};\n          data = {\n            search: supplier.id || \"\",\n            type: \"Vendor\",\n            transactionDate: new Date(this.requestPayment.transactionDate)\n              .toISOString()\n              .substr(0, 10),\n          };\n          this.itemLines = [];\n          if (data.search) {\n            if (data.search.length > 4) {\n              this.showLoading = true;\n              try {\n                billingHandler.searchCashPayment(data).then((res) => {\n                  this.showLoading = false;\n                  if (res.data.statusCode === 200) {\n                    const response = res.data.data;\n                    const result = res.data.result;\n                    this.showLoading = false;\n                    if (response.length > 0) {\n                      this.itemLines = response;\n                      const obj = response[0];\n                      if (obj.hasOwnProperty(\"supplier\")) {\n                        this.requestPayment.supplier = obj.supplier;\n                        if (obj.supplier.hasOwnProperty(\"name\")) {\n                          this.name = obj.supplier.name;\n                        }\n                      }\n                    }\n                    const baseCurrency = result;\n                    this.baseCurrency = baseCurrency;\n                    this.requestPayment.currency = new CurrencyModel(\n                      baseCurrency\n                    );\n                    if (baseCurrency) {\n                      if (baseCurrency.hasOwnProperty(\"code\")) {\n                        this.baseCurrencyCode = baseCurrency.code;\n                        // if (code) {\n                        //     this.loadTransactionRate(baseCurrency.code)\n                        // }\n                      }\n                    }\n                  }\n                });\n              } catch (e) {\n                this.showLoading = false;\n              }\n            } else {\n              this.showLoading = false;\n            }\n          } else {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    onGridRequestChange() {\n      const grid = this.$refs.gridRequestPayment.kendoWidget();\n      this.selectedExpenseIds = grid.selectedKeyNames();\n      // let ds = this.$refs.itemLineDS.kendoWidget()\n      // this.isCheckChanged = true\n      // const rows = ds.data();\n      // rows.forEach((value) => {\n      //     if (~this.selectedExpenseIds.indexOf(value.lineId)) {\n      //         // window.console.log(value, 'value')\n      //         if (value.paidAmount === 0) {\n      //             const tobePaid = value.amountTobePaid || 0\n      //             value.set('paidAmount', tobePaid)\n      //         }\n      //     }\n      // })\n      // this.$refs.gridRequestPayment.kendoWidget().read()\n      // this.isCheckChanged = false\n      this.autoCalculate();\n    },\n    onDataSourceChange(e) {\n      let amtTobePaid = 0,\n        amount = 0,\n        discount = 0,\n        paidAmount = 0;\n      let dataRow = e.items[0] || {};\n      if (Object.keys(dataRow).length > 0) {\n        dataRow.set(\"optionType\", OPTION_TYPE);\n      }\n      if (e.field) {\n        let dataRow = e.items[0];\n        switch (e.field) {\n          case \"discount\":\n            amount = dataRow.amount || 0;\n            discount = dataRow.discount || 0;\n            if (discount > amount) {\n              dataRow.set(\"discount\", amount);\n            }\n            dataRow.set(\n              \"amountTobePaid\",\n              parseFloat(dataRow.amount) - parseFloat(dataRow.discount || 0)\n            );\n            dataRow.set(\n              \"exchangeDiscount\",\n              parseFloat(dataRow.discount) * parseFloat(dataRow.rateTobase || 1)\n            );\n            dataRow.set(\n              \"exchangeDiscountTxn\",\n              parseFloat(dataRow.discount) * parseFloat(dataRow.txnRate || 1)\n            );\n            amtTobePaid = parseFloat(dataRow.amountTobePaid || 0);\n            paidAmount = parseFloat(dataRow.paidAmount || 0);\n            if (paidAmount > amtTobePaid) {\n              paidAmount = amtTobePaid;\n              dataRow.set(\"paidAmount\", parseFloat(paidAmount));\n              dataRow.set(\n                \"paidAmountTobase\",\n                parseFloat(paidAmount) * parseFloat(dataRow.rateTobase || 1)\n              );\n              dataRow.set(\n                \"paidAmountTxn\",\n                paidAmount * parseFloat(dataRow.txnRate || 1)\n              );\n            }\n            break;\n          case \"paidAmount\":\n            // if (this.isCheckChanged === false) {\n            amtTobePaid = parseFloat(dataRow.amountTobePaid || 0);\n            paidAmount = parseFloat(dataRow.paidAmount || 0);\n            if (paidAmount > amtTobePaid) {\n              paidAmount = amtTobePaid;\n            }\n            dataRow.set(\"paidAmount\", parseFloat(paidAmount));\n            dataRow.set(\n              \"paidAmountTobase\",\n              parseFloat(paidAmount) * parseFloat(dataRow.rateTobase || 1)\n            );\n            dataRow.set(\n              \"paidAmountTxn\",\n              paidAmount * parseFloat(dataRow.txnRate || 1)\n            );\n            // }\n            break;\n          default:\n            break;\n        }\n\n        this.purchaseTxn();\n        this.autoCalculate();\n      }\n    },\n    async loadSaleFormContent() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          purchaseFormContentHandler.list().then((res) => {\n            if (res.data.statusCode === 200) {\n              const data = res.data.data;\n              if (data.length > 0) {\n                this.purchaseFormContent = data[0];\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadVendorBalance(id) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          const strFilter = id + \"?type=bal\";\n          this.requestPayment.vendorBalance = 0;\n          billingHandler.balance(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              const data = res.data.data;\n              if (data.length > 0) {\n                this.requestPayment.vendorBalance = data[0].balance;\n                this.balance = this.numberFormat(data[0].balance);\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    numberFormat(value) {\n      return kendo.toString(value, `n${this.purchaseFormContent.decimal}`);\n    },\n    autoCalculate() {\n      let ds = this.$refs.itemLineDS.kendoWidget(),\n        receiptAmount = 0,\n        discount = 0,\n        convertedAmount = 0,\n        exchangeDiscount = 0,\n        exchangeDiscountTxn = 0,\n        paidAmountTxn = 0;\n      this.jRaw = [];\n      const rows = ds.data().filter((n) => n.paidAmount > 0 || n.discount > 0);\n      rows.forEach((value) => {\n        if (~this.selectedExpenseIds.indexOf(value.lineId)) {\n          let nature = \"\",\n            purchaseRate = 0,\n            paymentRate = 0,\n            rawPaidAmount = 0,\n            rawDiscountAmount = 0,\n            currencyCode = \"\";\n          let discountAmount = 0,\n            apAmount = 0,\n            refNo = \"\",\n            payOption = {},\n            currency = {},\n            gainLoss = 0,\n            lastXRate = {},\n            location = {},\n            segment = {},\n            project = {},\n            locationId = \"\",\n            segmentId = \"\",\n            projectId = \"\",\n            txnId = \"\",\n            invRate = 1;\n          if (value.referenceNo) {\n            refNo = value.referenceNo;\n          }\n          if (value.id) {\n            txnId = value.id || \"\";\n          }\n          if (value.txnRate) {\n            purchaseRate = parseFloat(value.txnRate);\n          }\n          if (value.currencyCode) {\n            currencyCode = value.currencyCode || \"\";\n          }\n          if (value.currency) {\n            currency = value.currency || {};\n          }\n          if (value.location) {\n            location = value.location || {};\n            if (location.hasOwnProperty(\"id\")) {\n              locationId = location.id;\n            }\n          }\n          if (value.segment) {\n            segment = value.segment || {};\n            if (segment.hasOwnProperty(\"id\")) {\n              segmentId = segment.id;\n            }\n          }\n          if (value.project) {\n            project = value.project || {};\n            if (project.hasOwnProperty(\"id\")) {\n              projectId = project.id;\n            }\n          }\n          if (value.exchangeRate) {\n            lastXRate = value.exchangeRate || {};\n          }\n          if (value.txnRate) {\n            invRate = parseFloat(value.txnRate);\n          }\n          if (value.rateTobase) {\n            paymentRate = parseFloat(value.rateTobase);\n          }\n          if (value.paidAmount) {\n            receiptAmount += kendo.parseFloat(value.paidAmount);\n            convertedAmount +=\n              kendo.parseFloat(value.paidAmount) * value.rateTobase;\n            paidAmountTxn += kendo.parseFloat(value.paidAmount) * invRate;\n            // paidAmt = kendo.parseFloat(value.paidAmount) * purchaseRate\n            rawPaidAmount = kendo.parseFloat(value.paidAmount);\n          }\n          if (value.discount) {\n            // discount += kendo.parseFloat(value.discount)\n            discount += kendo.parseFloat(value.discount) * value.rateTobase;\n            exchangeDiscount +=\n              kendo.parseFloat(value.exchangeDiscount) * value.rateTobase;\n            exchangeDiscountTxn += kendo.parseFloat(value.discount) * invRate;\n            discountAmount = kendo.parseFloat(value.discount) * paymentRate;\n            rawDiscountAmount = kendo.parseFloat(value.discount);\n          }\n          // todo: gain or loss exchange rate\n          gainLoss =\n            parseFloat(\n              (purchaseRate - paymentRate) * (rawPaidAmount + rawDiscountAmount)\n            ) * -1;\n          if (gainLoss !== 0) {\n            if (gainLoss > 0) {\n              nature = \"dr\";\n            } else {\n              nature = \"cr\";\n            }\n            window.console.log(\"gainLoss\", gainLoss);\n            if (gainLoss) {\n              if (this.gainLossAcc.hasOwnProperty(\"id\")) {\n                this.jRaw.push({\n                  id:\n                    this.gainLossAcc.id +\n                    \"-\" +\n                    nature +\n                    \"-\" +\n                    currencyCode +\n                    \"-\" +\n                    purchaseRate +\n                    \"-\" +\n                    locationId +\n                    \"-\" +\n                    projectId +\n                    \"-\" +\n                    segmentId +\n                    \"-\" +\n                    txnId,\n                  txnId: txnId,\n                  project: project,\n                  location: location,\n                  segment: segment,\n                  projectId: projectId,\n                  locationId: locationId,\n                  segmentId: segmentId,\n                  currencyCode: currencyCode,\n                  currency: currency,\n                  lastXRate: lastXRate,\n                  line: new ItemLineModel(value),\n                  receiptRate: gainLoss > 0 ? paymentRate : purchaseRate,\n                  description: this.gainOrLossDescription,\n                  account: this.gainLossAcc,\n                  accountId: this.gainLossAcc.id,\n                  amount: 0,\n                  exchangeAmount: gainLoss,\n                  type: nature,\n                  typeAs: \"GainOrLoss\",\n                });\n              }\n            }\n          }\n          //Todo: AP  Dr\n          apAmount = rawPaidAmount + rawDiscountAmount;\n          if (apAmount > 0) {\n            nature = \"dr\";\n          } else {\n            nature = \"cr\";\n          }\n          if (value.hasOwnProperty(\"apAcc\")) {\n            const apAcc = value.apAcc;\n            if (apAcc) {\n              if (apAcc.hasOwnProperty(\"id\")) {\n                this.jRaw.push({\n                  id:\n                    apAcc.id +\n                    \"-\" +\n                    nature +\n                    \"-\" +\n                    currencyCode +\n                    \"-\" +\n                    purchaseRate +\n                    \"-\" +\n                    locationId +\n                    \"-\" +\n                    projectId +\n                    \"-\" +\n                    segmentId +\n                    \"-\" +\n                    txnId,\n                  txnId: txnId,\n                  project: project,\n                  location: location,\n                  segment: segment,\n                  projectId: projectId,\n                  locationId: locationId,\n                  segmentId: segmentId,\n                  currencyCode: currencyCode,\n                  currency: currency,\n                  lastXRate: lastXRate,\n                  line: new ItemLineModel(value),\n                  receiptRate: purchaseRate,\n                  description: refNo,\n                  account: apAcc,\n                  accountId: apAcc.id,\n                  amount: apAmount,\n                  exchangeAmount: apAmount * purchaseRate,\n                  type: nature,\n                  typeAs: \"AP\",\n                });\n              }\n            }\n          }\n          //Todo: Cash Account  CR\n          if (this.requestPayment.paymentOption) {\n            payOption = this.requestPayment.paymentOption;\n            const cashAmount = rawPaidAmount * -1; //+ ((purchaseRate - paymentRate) * (rawPaidAmount + rawDiscountAmount))\n            // const cashAmount = rawPaidAmount + (gainLoss ) + rawPaidAmount\n            if (cashAmount > 0) {\n              nature = \"dr\";\n            } else {\n              nature = \"cr\";\n            }\n            if (payOption.hasOwnProperty(\"account\")) {\n              const payOptionAcc = payOption.account;\n              if (payOptionAcc.hasOwnProperty(\"id\")) {\n                this.jRaw.push({\n                  id:\n                    payOptionAcc.id +\n                    \"-\" +\n                    nature +\n                    \"-\" +\n                    currencyCode +\n                    \"-\" +\n                    purchaseRate +\n                    \"-\" +\n                    locationId +\n                    \"-\" +\n                    projectId +\n                    \"-\" +\n                    segmentId +\n                    \"-\" +\n                    txnId,\n                  txnId: txnId,\n                  project: project,\n                  location: location,\n                  segment: segment,\n                  projectId: projectId,\n                  locationId: locationId,\n                  segmentId: segmentId,\n                  currencyCode: currencyCode,\n                  currency: currency,\n                  lastXRate: lastXRate,\n                  line: new ItemLineModel(value),\n                  receiptRate: purchaseRate,\n                  description: refNo,\n                  account: payOptionAcc,\n                  accountId: payOptionAcc.id,\n                  amount: cashAmount,\n                  exchangeAmount: cashAmount * paymentRate,\n                  type: nature,\n                  typeAs: \"CashAccount\",\n                });\n              }\n            }\n          }\n          //Todo: Settlement Discount  Cr\n          if (value.paymentTerm) {\n            const settlementDisc = value.paymentTerm;\n            if (discountAmount > 0) {\n              if (discountAmount * -1 > 0) {\n                nature = \"dr\";\n              } else {\n                nature = \"cr\";\n              }\n              // window.console.log(settlementDisc, \"settlementDisc\");\n              if (settlementDisc.hasOwnProperty(\"account\")) {\n                const settlementDiscAcc = settlementDisc.account;\n                if (settlementDiscAcc.hasOwnProperty(\"id\")) {\n                  this.jRaw.push({\n                    id:\n                      settlementDiscAcc.id +\n                      \"-\" +\n                      nature +\n                      \"-\" +\n                      currencyCode +\n                      \"-\" +\n                      purchaseRate +\n                      \"-\" +\n                      locationId +\n                      \"-\" +\n                      projectId +\n                      \"-\" +\n                      segmentId +\n                      \"-\" +\n                      txnId,\n                    txnId: txnId,\n                    project: project,\n                    location: location,\n                    segment: segment,\n                    projectId: projectId,\n                    locationId: locationId,\n                    segmentId: segmentId,\n                    currencyCode: currencyCode,\n                    currency: currency,\n                    lastXRate: lastXRate,\n                    line: new ItemLineModel(value),\n                    receiptRate: paymentRate,\n                    description: \"Purchase Payment Discount\",\n                    account: settlementDiscAcc,\n                    accountId: settlementDiscAcc.id,\n                    amount: rawDiscountAmount * -1,\n                    exchangeAmount: discountAmount * -1,\n                    type: nature,\n                    typeAs: \"Settlement Discount\",\n                  });\n                }\n              }\n            }\n          }\n        }\n      });\n      // this.invoiceTxn(txnIds)\n\n      this.requestPayment.total = receiptAmount;\n      this.requestPayment.exchangeAmount = convertedAmount;\n      this.requestPayment.discount = discount;\n      this.requestPayment.exchangeDiscount = exchangeDiscount;\n      this.requestPayment.paidAmountTxn = paidAmountTxn;\n      this.requestPayment.exchangeDiscountTxn = exchangeDiscountTxn;\n      this.requestPayment.fundRemainBalance =\n        parseFloat(this.requestPayment.fundBalance || 0) -\n        parseFloat(convertedAmount);\n      this.requestPayment.vendorRemainingBalance =\n        parseFloat(this.requestPayment.vendorBalance || 0) -\n        (parseFloat(convertedAmount) + discount);\n\n      this.vendorRemainingBalance = this.numberFormat(\n        parseFloat(this.requestPayment.vendorBalance || 0) -\n          (parseFloat(convertedAmount) + discount)\n      );\n      this.fundRemainBalance = this.numberFormat(\n        parseFloat(this.requestPayment.fundBalance || 0) -\n          parseFloat(convertedAmount)\n      );\n      this.shrinkData(this.jRaw);\n      window.console.log(\"aa\", rows);\n    },\n    shrinkData(obj) {\n      const uniques = this.removeDuplicate(obj);\n      uniques.forEach((n) => {\n        const found = obj.filter((m) => m.id === n.id);\n        let amount = 0,\n          exchangeAmount = 0;\n        found.forEach((z) => {\n          amount += parseFloat(z.amount || 0);\n          exchangeAmount += parseFloat(z.exchangeAmount || 0);\n        });\n        n.exchangeAmount = parseFloat(exchangeAmount); //this.numberFormat(amount)\n        n.amount = parseFloat(amount); //parseFloat(parseFloat(amount / parseFloat(n.receiptRate))) //this.numberFormat(amount * parseFloat(this.invoice.txnRate)) //.toFixed(this.saleFormContent.decimal)\n      });\n      this.jRaw = uniques;\n      let dr = 0,\n        cr = 0;\n      this.jRaw.forEach((j) => {\n        switch (j.type) {\n          case \"cr\":\n            cr += parseFloat(j.exchangeAmount);\n            break;\n          case \"dr\":\n            dr += parseFloat(j.exchangeAmount);\n            break;\n          default:\n            break;\n        }\n      });\n      // window.console.log(JSON.stringify(this.jRaw), 'uniques')\n      const txnId = this.jRaw.map((o) => o.txnId);\n      const uSet = new Set(txnId);\n      const uniqueSet = [...uSet];\n      let jRaws = [];\n      // window.console.log(JSON.stringify(uniqueSet), 'uniques')\n      uniqueSet.forEach((n) => {\n        const found = this.jRaw.filter((m) => m.txnId === n);\n        const line = found[0].line;\n        const refNo = line.referenceNo;\n        jRaws.push({\n          id: n,\n          currencyCode: found[0].currencyCode,\n          projectId: found[0].projectId,\n          segmentId: found[0].segmentId,\n          locationId: found[0].locationId,\n          referenceNo: refNo || \"\",\n          entries: found,\n        });\n      });\n      this.jRaw = jRaws;\n      this.dr = dr;\n      this.cr = cr;\n      window.console.log(\"dr=\", dr, \"cr=\", cr, \"dr+cr = \", dr + cr);\n      window.console.log(jRaws, \"uniques\");\n    },\n    purchaseTxn() {\n      let txnIds = [],\n        ids = [];\n      this.itemLines.forEach((value) => {\n        if (value.id) {\n          txnIds.push({\n            id: value.id,\n            status: 1,\n          });\n        }\n      });\n      ids = Object.values(txnIds.reduce((r, o) => ((r[o.id] = o), r), {}));\n      ids.forEach((m) => {\n        const lines = this.itemLines.filter((n) => n.id === m.id);\n        let paidAmt = 0;\n        let amountTobePaid = 0;\n        lines.forEach((x) => {\n          if (x.paidAmount) {\n            paidAmt += x.paidAmount;\n          }\n          if (x.amountTobePaid) {\n            amountTobePaid += x.amountTobePaid;\n          }\n        });\n        const pAmt = this.numberFormat(paidAmt);\n        const amtTobePaid = this.numberFormat(amountTobePaid);\n        if (pAmt === amtTobePaid) {\n          m[\"status\"] = 3; //Paid\n        } else {\n          m[\"status\"] = 2; // Partially Paid\n        }\n      });\n      this.txnList = ids;\n    },\n    async loadOtherAccount() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          settingHandler\n            .getOtherAccount()\n            .then((res) => {\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                const response = res.data.data;\n                const data = response.filter(\n                  (o) => o.banhjiAccCode === \"740010\"\n                );\n                if (data.length > 0) {\n                  this.gainLossAcc = data[0].account;\n                }\n                const data_ = response.filter(\n                  (o) => o.banhjiAccCode === \"740040\"\n                );\n                if (data_.length > 0) {\n                  this.otherRevenueAcc = data_[0].account;\n                }\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    async onSaveClose() {\n      if (!this.$refs.form.validate()) {\n        this.$refs.form.validate();\n        return;\n      }\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let itemLineDS = this.$refs.itemLineDS.kendoWidget();\n          let itemLines = [];\n          const supplier = this.requestPayment.supplier || {};\n          itemLineDS\n            .data()\n            .filter((n) => n.paidAmount > 0 || n.discount > 0)\n            .map((n) => {\n              if (~this.selectedExpenseIds.indexOf(n.lineId)) {\n                const currency = n.currency || {};\n                n[\"paymentOption\"] = new PaymentOptionModel(\n                  n.paymentOption || {}\n                );\n                n[\"paymentTerm\"] = new PaymentTermModel(n.paymentTerm || {});\n                n[\"currency\"] = new CurrencyModel(n.currency || {});\n                n[\"currencyCode\"] = currency.code || \"\";\n                n[\"apAcc\"] = new AccountMappingModel(n.apAcc || {});\n                n[\"supplier\"] = new SupplierModel(supplier);\n                n[\"id\"] = n[\"txnId\"];\n                itemLines.push(new ItemLineModel(n));\n              }\n            });\n          if (itemLines.length > 0) {\n            let isAutoGenerate = 1;\n            //todo: match Request Payment model\n            this.requestPayment[\"itemLines\"] = itemLines;\n            this.requestPayment[\"type\"] = TRANSACTION_TYPE;\n            this.requestPayment[\"isAutoGenerate\"] = isAutoGenerate;\n            this.requestPayment[\"actionType\"] = this.$route.params.id\n              ? this.$route.query.type\n              : \"new\";\n            this.requestPayment[\"loggedUser\"] = this.loggedUser;\n\n            this.showLoading = true;\n            // window.console.log('this.itemLines', itemLines)\n            // window.console.log('this.itemLines', JSON.stringify(itemLines))\n            billingHandler\n              .createRequestPayment(\n                new RequestPaymentModel(this.requestPayment)\n              )\n              .then((response) => {\n                if (response.data.statusCode === 201) {\n                  // this.close(response.data.data)\n                  this.showLoading = false;\n                  this.$snotify.success(\"Successfully\");\n                  this.clear();\n                  window.history.go(-1);\n                }\n              })\n              .catch((e) => {\n                this.showLoading = false;\n                this.$snotify.error(\"Something went wrong\");\n                this.errors.push(e);\n              });\n          }\n        }, 20);\n      });\n    },\n    clear() {\n      this.id = undefined;\n      this.requestPayment = new RequestPaymentModel({});\n      this.itemLines = [];\n      this.requestPayment.transactionType = this.transactionTypes[0];\n      this.generateNumber();\n    },\n    async loadEntryDetailByAccount(id, params) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          journalHandler.getEntryDetailByAccount(id, params).then((res) => {\n            // if (res.data.statusCode === 200) {\n            this.showLoading = false;\n            this.requestPayment.fundBalance = res.ending_balance || 0;\n            this.fundBalance = this.numberFormat(res.ending_balance || 0);\n            this.fundRemainBalance = this.numberFormat(\n              parseFloat(res.ending_balance || 0) -\n                parseFloat(this.requestPayment.exchangeAmount)\n            );\n            this.requestPayment.fundRemainBalance =\n              parseFloat(res.ending_balance || 0) -\n              parseFloat(this.requestPayment.fundBalance);\n            // } else {\n            //     this.showLoading = true;\n            // }\n          });\n        }, 10);\n      });\n    },\n  },\n  mounted: async function() {\n    // this.loadSuppliers()\n    // this.loadVendors('', this.supBaseUrl)\n    await this.loadPrefix();\n    await this.loadSaleFormContent();\n    await this.loadOtherAccount();\n  },\n  computed: {},\n};\n</script>\n\n<style scoped>\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:not(:last-child)\n  > td:not(.v-data-table__mobile-row),\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:not(:last-child)\n  > th:not(.v-data-table__mobile-row) {\n  border-bottom: thin solid #dfdfdf;\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:last-child\n  td {\n  border-bottom: thin solid #dfdfdf;\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:first-child\n  td {\n  border-top: thin solid #dfdfdf;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n  height: 32px !important;\n}\n\n@media (min-width: 1264px) {\n  .container {\n    max-width: 1280px !important;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/suppliers"}]}
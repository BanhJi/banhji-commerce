{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js??ref--13-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/helper.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/helper.js","mtime":1640595536766},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWNvcy9EZXNrdG9wL2JhbmhqaS0wLjIvYmFuaGppLWFjY291bnRpbmctd2ViLW1vZHVsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5wYWQtc3RhcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwZWF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0IHsgaTE4biB9IGZyb20gJ0AvaTE4bic7CmltcG9ydCBrZW5kbyBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdWknOwppbXBvcnQgWExTWCBmcm9tICJ4bHN4IjsKaW1wb3J0IExpbmtUZW1wbGF0ZSBmcm9tICJAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL0xpbmtUZW1wbGF0ZSI7CmltcG9ydCB7IENsb3NpbmdEYXRlTW9kZWwsIEV4Y2hhbmdlUmF0ZU1vZGVsLCBCYW5rQWNjb3VudFR5cGVNb2RlbCwgVXNlck1vZGVsLCBDbGFzc01vZGVsIH0gZnJvbSAnQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyc7Ci8qIFN0b3JlICovCgppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CnZhciBpbnN0aXR1dGUgPSBzdG9yZS5zdGF0ZS5pbnN0aXR1dGUuaW5zdGl0dXRlOwovKiBDb29raWUgKi8KCnZhciBjb29raWVKUyA9IHJlcXVpcmUoIkAvY29va2llLmpzIik7Cgp2YXIgY29va2llID0gY29va2llSlMuZ2V0Q29va2llKCk7Cgp2YXIgU3dhbCA9IHJlcXVpcmUoJ3N3ZWV0YWxlcnQyJyk7Cgp2YXIgQ3J5cHRvSlMgPSByZXF1aXJlKCJjcnlwdG8tanMiKTsKCnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9BcHBIYW5kbGVycyIpLAogICAgY2xvc2luZ0RhdGVIYW5kbGVyID0gX3JlcXVpcmUuY2xvc2luZ0RhdGVIYW5kbGVyLAogICAgcHJlZml4SGFuZGxlciA9IF9yZXF1aXJlLnByZWZpeEhhbmRsZXIsCiAgICBjdXJyZW5jeUhhbmRsZXIgPSBfcmVxdWlyZS5jdXJyZW5jeUhhbmRsZXI7Cgp2YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2RlZmF1bHRfc2V0dXAvQ29sbGVjdGlvbnMiKSwKICAgIEFjY291bnRUeXBlQ29kZSA9IF9yZXF1aXJlMi5BY2NvdW50VHlwZUNvZGU7Cgp2YXIgZXhwb3J0cyA9IHt9OwovKiBHZXQgVXNlciAqLwoKZXhwb3J0cy5nZXRVc2VyID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBuZXcgVXNlck1vZGVsKGNvb2tpZS51c2VyKTsKfTsgLy8gUmVtb3ZlIEN1cnJlbmN5IEZvcm1hdCBGcm9tIEEgTnVtYmVyCgoKZXhwb3J0cy5yZW1vdmVDdXJyZW5jeUZvcm1hdCA9IGZ1bmN0aW9uIChudW0pIHsKICByZXR1cm4gbnVtLnJlcGxhY2UoL1teXGQuLV0rL2csICIiKTsKfTsgLy8gTGluayBUZW1wbGF0ZQoKCmV4cG9ydHMubGlua1RlbXBsYXRlID0gZnVuY3Rpb24gKGRpc3BsYXlUZXh0LCB1cmxQYXRoKSB7CiAgcmV0dXJuIHsKICAgIHRlbXBsYXRlOiBMaW5rVGVtcGxhdGUsCiAgICB0ZW1wbGF0ZUFyZ3M6IHsKICAgICAgdGV4dDogZGlzcGxheVRleHQsCiAgICAgIHVybDogdXJsUGF0aAogICAgfQogIH07Cn07IC8vIEdldCBHZW5lcmF0ZSBBY2NvdW50aW5nIE51bWJlcgoKCmV4cG9ydHMuZ2VuZXJhdGVBY2NvdW50aW5nTnVtYmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwcmVmaXhUeXBlLCB0cmFuc2FjdGlvbkRhdGUpIHsKICAgIHZhciBwcmVmaXhlcywgcGYsIHN0cnVjdHVyZSwgdHhuRGF0ZSwgc2hvcnRQcmVmaXgsIGZ1bGxQcmVmaXgsIGxhc3ROdW1iZXJSZXNwb25zZSwgbGFzdE51bWJlcnMsIGxhc3ROdW1iZXIsIG51bWJlcjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncHJlZml4ZXMvZ2V0TGlzdCcpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcHJlZml4ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBwZiA9IHByZWZpeGVzLmZpbmQoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gcHJlZml4VHlwZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB9KTsgLy8gU3RydWN0dXJlCgogICAgICAgICAgICBzdHJ1Y3R1cmUgPSAnJywgdHhuRGF0ZSA9IG5ldyBEYXRlKHRyYW5zYWN0aW9uRGF0ZSk7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gcGYuc3RydWN0dXJlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSBfY29udGV4dC50MCA9PT0gJ3l5eXknID8gOCA6IF9jb250ZXh0LnQwID09PSAneXknID8gMTAgOiBfY29udGV4dC50MCA9PT0gJ3l5eXltbScgPyAxMiA6IF9jb250ZXh0LnQwID09PSAneXltbScgPyAxNCA6IDE2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHN0cnVjdHVyZSA9IHR4bkRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDE3KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBzdHJ1Y3R1cmUgPSB0eG5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zdWJzdHIoMik7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMTcpOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHN0cnVjdHVyZSA9IHR4bkRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgKHR4bkRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxNyk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgc3RydWN0dXJlID0gdHhuRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyKDIpICsgKHR4bkRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxNyk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxNyk7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgLy8gUHJlZml4IEZvcm1hdCAiSkUteXltbS0wMDAwMCIKICAgICAgICAgICAgc2hvcnRQcmVmaXggPSBwZi5hYmJyICsgcGYucHJlZml4U2VwYXJhdG9yICsgc3RydWN0dXJlICsgcGYubnVtYmVyU2VwYXJhdG9yLCBmdWxsUHJlZml4ID0gcGYuYWJiciArIHBmLnByZWZpeFNlcGFyYXRvciArIHBmLnN0cnVjdHVyZSArIHBmLm51bWJlclNlcGFyYXRvciArICcwJy5yZXBlYXQocGYuZm9ybWF0KSArICJAIi5jb25jYXQocGYuc2VxdWNlbmNpbmcpOyAvLyBDYWxsIExhc3QgTnVtYmVyCgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgIHJldHVybiBwcmVmaXhIYW5kbGVyLmxhc3ROdW1iZXIoewogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgcHJlZml4OiBmdWxsUHJlZml4LAogICAgICAgICAgICAgICAgc2hvcnRlbl9wcmVmaXg6IHNob3J0UHJlZml4LAogICAgICAgICAgICAgICAgam91cm5hbF9kYXRlOiB0cmFuc2FjdGlvbkRhdGUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGxhc3ROdW1iZXJSZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGxhc3ROdW1iZXJzID0gbGFzdE51bWJlclJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIC8qIFN0YXJ0aW5nIE51bWJlciAqLwoKICAgICAgICAgICAgbGFzdE51bWJlciA9IHBmLm51bWJlcjsKICAgICAgICAgICAgLyogU2VxdWNlbmNpbmcgKi8KCiAgICAgICAgICAgIF9jb250ZXh0LnQxID0gcGYuc2VxdWNlbmNpbmcudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IF9jb250ZXh0LnQxID09PSAnbW9udGgnID8gMjYgOiBfY29udGV4dC50MSA9PT0gJ3llYXInID8gMjggOiAzMDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgLy8gTW9udGgKICAgICAgICAgICAgaWYgKGtlbmRvLnBhcnNlSW50KGxhc3ROdW1iZXJzLm1vbnRobHlfbGFzdF9udW1iZXIpICE9PSAwKSB7CiAgICAgICAgICAgICAgbGFzdE51bWJlciA9IGtlbmRvLnBhcnNlSW50KGxhc3ROdW1iZXJzLm1vbnRobHlfbGFzdF9udW1iZXIpICsgMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAzMik7CgogICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgLy8gWWVhcgogICAgICAgICAgICBpZiAoa2VuZG8ucGFyc2VJbnQobGFzdE51bWJlcnMueWVhcmx5X2xhc3RfbnVtYmVyKSAhPT0gMCkgewogICAgICAgICAgICAgIGxhc3ROdW1iZXIgPSBrZW5kby5wYXJzZUludChsYXN0TnVtYmVycy55ZWFybHlfbGFzdF9udW1iZXIpICsgMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAzMik7CgogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgLy8gUHJlZml4CiAgICAgICAgICAgIGlmIChrZW5kby5wYXJzZUludChsYXN0TnVtYmVycy5sYXN0X251bWJlcikgIT09IDApIHsKICAgICAgICAgICAgICBsYXN0TnVtYmVyID0ga2VuZG8ucGFyc2VJbnQobGFzdE51bWJlcnMubGFzdF9udW1iZXIpICsgMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAzMik7CgogICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgLyogRnVsbCBOdW1iZXIgKi8KICAgICAgICAgICAgbnVtYmVyID0gcGYuYWJiciArIHBmLnByZWZpeFNlcGFyYXRvciArIHN0cnVjdHVyZSArIHBmLm51bWJlclNlcGFyYXRvciArIGxhc3ROdW1iZXIudG9TdHJpbmcoKS5wYWRTdGFydChwZi5mb3JtYXQsICcwJyk7CiAgICAgICAgICAgIC8qIFJlc3VsdCAqLwoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIG51bWJlcjogbnVtYmVyLAogICAgICAgICAgICAgIGxhc3RfbnVtYmVyOiBsYXN0TnVtYmVyLAogICAgICAgICAgICAgIHByZWZpeF9mb3JtYXQ6IGZ1bGxQcmVmaXgsCiAgICAgICAgICAgICAgcHJlZml4OiBwZgogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gR2V0IExhc3QgRXhjaGFuZ2UgUmF0ZSBCeSBEYXRlCgoKZXhwb3J0cy5nZXRMYXN0RXhjaGFuZ2VSYXRlQnlEYXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGRhdGUsIGNvZGUpIHsKICAgIHZhciB4cmF0ZSwgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB4cmF0ZSA9IG5ldyBFeGNoYW5nZVJhdGVNb2RlbChpbnN0aXR1dGUuYmFzZUN1cnJlbmN5KTsKCiAgICAgICAgICAgIGlmICghKGNvZGUgIT09IGluc3RpdHV0ZS5iYXNlQ3VycmVuY3kuY29kZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbmN5SGFuZGxlci5nZXRMYXN0RXhjaGFuZ2VSYXRlQnlEYXRlKGRhdGUsIGNvZGUpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEpIHsKICAgICAgICAgICAgICB4cmF0ZSA9IG5ldyBFeGNoYW5nZVJhdGVNb2RlbChyZXNwb25zZS5kYXRhLmRhdGFbMF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgeHJhdGUpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDMsIF94NCkgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBDb252ZXJ0IERhdGUgdG8gSVNPCgoKZXhwb3J0cy50b0lTT0RhdGUgPSBmdW5jdGlvbiAoYURhdGUpIHsKICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogIHZhciB0aGVEYXRlID0gbmV3IERhdGUoYURhdGUpOwogIHRoZURhdGUuc2V0SG91cnModG9kYXkuZ2V0SG91cnMoKSwgdG9kYXkuZ2V0TWludXRlcygpLCB0b2RheS5nZXRTZWNvbmRzKCksIHRvZGF5LmdldE1pbGxpc2Vjb25kcygpKTsKICByZXR1cm4gbmV3IERhdGUodGhlRGF0ZS5nZXRUaW1lKCkpLnRvSVNPU3RyaW5nKCk7Cn07IC8vIERhdGUgRm9ybWF0CgoKZXhwb3J0cy5kYXRlRm9ybWF0ID0gZnVuY3Rpb24gKHRoZURhdGUpIHsKICB2YXIgZm9ybWF0ZWREYXRlID0gdGhlRGF0ZTsKCiAgaWYgKGZvcm1hdGVkRGF0ZSAhPT0gJycpIHsKICAgIGZvcm1hdGVkRGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRoZURhdGUpLCBpbnN0aXR1dGUuZGF0ZUZvcm1hdCk7CiAgfQoKICByZXR1cm4gZm9ybWF0ZWREYXRlOwp9OyAvLyBEYXRlIEZvcm1hdCBmb3JtCgoKZXhwb3J0cy5pbnN0aXR1dGVEYXRlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBpbnN0aXR1dGUuZGF0ZUZvcm1hdDsKfTsgLy8gQWxlcnQgRXJyb3IgTWVzc2FnZQoKCmV4cG9ydHMuYWxlcnRFcnJvck1zZyA9IGZ1bmN0aW9uICgpIHsKICB2YXIgbXNnID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICBTd2FsLmZpcmUoewogICAgcG9zaXRpb246ICJjZW50ZXIiLAogICAgaWNvbjogIndhcm5pbmciLAogICAgdGl0bGU6ICJPb3BzLi4uISIsCiAgICB0ZXh0OiBtc2csCiAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZQogIH0pOwp9OyAvLyBQcmUtQ29uZmlybSBDbG9zaW5nIERhdGUKCgpmdW5jdGlvbiBwcmVDb25maXJtQ2xvc2luZ0RhdGUoX3g1KSB7CiAgcmV0dXJuIF9wcmVDb25maXJtQ2xvc2luZ0RhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyBTaG93IEFsZXJ0CgoKZnVuY3Rpb24gX3ByZUNvbmZpcm1DbG9zaW5nRGF0ZSgpIHsKICBfcHJlQ29uZmlybUNsb3NpbmdEYXRlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNih0eG5EYXRlKSB7CiAgICB2YXIgcmVzdWx0LCBjZGF0ZSwgY2QsIGNvbmZpcm1Qc3c7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gY2xvc2luZ0RhdGVIYW5kbGVyLmxhc3QoKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNkYXRlID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICBpZiAoISh0eXBlb2YgY2RhdGUuZGF0YS5kYXRhICE9ICJ1bmRlZmluZWQiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNkID0gbmV3IENsb3NpbmdEYXRlTW9kZWwoY2RhdGUuZGF0YS5kYXRhKTsKCiAgICAgICAgICAgIGlmICghKG5ldyBEYXRlKHR4bkRhdGUpIDw9IG5ldyBEYXRlKGNkLmNsb3NpbmdEYXRlKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlIEVudGVyIFBhc3N3b3JkISIsCiAgICAgICAgICAgICAgdGV4dDogIllvdSBhcmUgcmVjb3JkaW5nIHdpdGhpbiBjbG9zaW5nIGRhdGUsIHBsZWFzZSBjb25maXJtIHBhc3N3b3JkLiIsCiAgICAgICAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgICAgICAgIGlucHV0OiAicGFzc3dvcmQiLAogICAgICAgICAgICAgIGlucHV0UGxhY2Vob2xkZXI6ICJQYXNzd29yZC4uLiIsCiAgICAgICAgICAgICAgaW5wdXRBdHRyaWJ1dGVzOiB7CiAgICAgICAgICAgICAgICBhdXRvY2FwaXRhbGl6ZTogIm9mZiIsCiAgICAgICAgICAgICAgICBhdXRvY29ycmVjdDogIm9mZiIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJTdWJtaXQiLAogICAgICAgICAgICAgIHNob3dMb2FkZXJPbkNvbmZpcm06IHRydWUsCiAgICAgICAgICAgICAgcHJlQ29uZmlybTogZnVuY3Rpb24gcHJlQ29uZmlybShwYXNzd29yZCkgewogICAgICAgICAgICAgICAgLy8gRGVjcnlwdCAoUGFzc3dvcmQsIEtleSkKICAgICAgICAgICAgICAgIHZhciBwc3dJbkJ5dGVzID0gQ3J5cHRvSlMuQUVTLmRlY3J5cHQoY2QucGFzc3dvcmQsIGNvb2tpZS5pbnN0aXR1dGVJZCk7CiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxQc3cgPSBwc3dJbkJ5dGVzLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTsgLy8gQ29tcGFyZSBQYXNzd29yZAoKICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgUGFzc3dvcmQKICAgICAgICAgICAgICAgIGlmIChwYXNzd29yZCA9PT0gb3JpZ2luYWxQc3cpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBTd2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgiUGFzc3dvcmQgRG9lcyBOb3QgTWFjdGghIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNvbmZpcm1Qc3cgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgcmVzdWx0ID0gQm9vbGVhbihjb25maXJtUHN3LnZhbHVlKTsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTsgLy8gR3JlYXRlciB0aGFuIGNsb3NpbmcgZGF0ZQoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7IC8vIE5vdCB1c2UgY2xvc2luZyBkYXRlCgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTYpOwogIH0pKTsKICByZXR1cm4gX3ByZUNvbmZpcm1DbG9zaW5nRGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBzaG93QWxlcnQobXNnKSB7CiAgU3dhbC5maXJlKHsKICAgIHBvc2l0aW9uOiAiY2VudGVyIiwKICAgIGljb246ICJ3YXJuaW5nIiwKICAgIHRpdGxlOiAiT29wcy4uLiEiLAogICAgdGV4dDogbXNnLAogICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICB9KTsKfSAvLyBHZXQgRmlzY2FsIERhdGUgQnkgRGF0ZSAoT2JqZWN0KQoKCmV4cG9ydHMuZ2V0RmlzY2FsRGF0ZUJ5RGF0ZSA9IGZ1bmN0aW9uICh0aGVEYXRlKSB7CiAgdmFyIGFEYXRlID0gbmV3IERhdGUodGhlRGF0ZSk7CiAgdmFyIGZpc2NhbFllYXIgPSBpbnN0aXR1dGUuZmlzY2FsRGF0ZS5maW5kKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgcmV0dXJuIGFEYXRlID49IG5ldyBEYXRlKHZhbHVlLnN0YXJ0X2RhdGUpICYmIGFEYXRlIDw9IG5ldyBEYXRlKHZhbHVlLmVuZF9kYXRlKTsKICB9KTsKICByZXR1cm4gZmlzY2FsWWVhcjsKfTsgLy8gR2VuZXJhdGUgRmlzY2FsIE1vbnRocwoKCmV4cG9ydHMuZ2VuZXJhdGVGaXNjYWxNb250aHMgPSBmdW5jdGlvbiAoc3RhcnREYXRlLCBlbmREYXRlLCBjb2x1bW5CeSkgewogIHZhciBkYXRlRm9ybWF0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAiTU1NIHl5eXkiOwogIHZhciBmaXNjYWxNb250aHMgPSBbXSwKICAgICAgaW50ZXJ2YWwgPSAxLAogICAgICBzZGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSksCiAgICAgIGVkYXRlID0gbmV3IERhdGUoZW5kRGF0ZSksCiAgICAgIHBhaXJNb250aCA9IGVkYXRlOwoKICB3aGlsZSAoc2RhdGUgPD0gZWRhdGUpIHsKICAgIGlmIChjb2x1bW5CeSA9PT0gIjQiKSB7CiAgICAgIC8vIFF1YXJ0ZXIKICAgICAgaW50ZXJ2YWwgPSAzOwogICAgICBwYWlyTW9udGggPSBuZXcgRGF0ZShzZGF0ZSk7CiAgICAgIHBhaXJNb250aC5zZXRNb250aChzZGF0ZS5nZXRNb250aCgpICsgKGludGVydmFsIC0gMSkpOwogICAgICBmaXNjYWxNb250aHMucHVzaChrZW5kby50b1N0cmluZyhzZGF0ZSwgZGF0ZUZvcm1hdCkgKyAiIC0gIiArIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHBhaXJNb250aCksIGRhdGVGb3JtYXQpKTsKICAgIH0gZWxzZSBpZiAoY29sdW1uQnkgPT09ICIyIikgewogICAgICAvLyBTZW1pLUFubnVhbAogICAgICBpbnRlcnZhbCA9IDY7CiAgICAgIHBhaXJNb250aCA9IG5ldyBEYXRlKHNkYXRlKTsKICAgICAgcGFpck1vbnRoLnNldE1vbnRoKHNkYXRlLmdldE1vbnRoKCkgKyAoaW50ZXJ2YWwgLSAxKSk7CiAgICAgIGZpc2NhbE1vbnRocy5wdXNoKGtlbmRvLnRvU3RyaW5nKHNkYXRlLCBkYXRlRm9ybWF0KSArICIgLSAiICsga2VuZG8udG9TdHJpbmcobmV3IERhdGUocGFpck1vbnRoKSwgZGF0ZUZvcm1hdCkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gTW9udGgKICAgICAgaW50ZXJ2YWwgPSAxOwogICAgICBmaXNjYWxNb250aHMucHVzaChrZW5kby50b1N0cmluZyhzZGF0ZSwgZGF0ZUZvcm1hdCkpOwogICAgfSAvLyBOZXh0IE1vbnRoCgoKICAgIHNkYXRlLnNldE1vbnRoKHNkYXRlLmdldE1vbnRoKCkgKyBpbnRlcnZhbCk7CiAgfQoKICByZXR1cm4gZmlzY2FsTW9udGhzOwp9OyAvLyBGb3JtYXQgRmlzY2FsRGF0ZQoKCmV4cG9ydHMuZm9ybWF0RmlzY2FsRGF0ZSA9IGZ1bmN0aW9uIChhRGF0ZSkgewogIHJldHVybiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShhRGF0ZSksICJNTU0geXl5eSIpOwp9LCAvLyBWYWxpZGF0ZSBDbG9zaW5nIERhdGUgKEIgS2V0aHlhIGZvcmNlZCBtZSB0byBkbyBsaWtlIHRoaXMsIGluIGNhc2UgaGUgc2F5cyBObykgYWxzbyBSb3Robnkgam9sIGRhaSBqb2wgamVybmcKZXhwb3J0cy52YWxpZGF0ZUNsb3NpbmdEYXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHR4bkRhdGUpIHsKICAgIHZhciByZXN1bHQsIHRvZGF5LCBjdXJyZW50RmlzY2FsRGF0ZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlLCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIC8qIFBhcnNlIFRyYW5zYWN0aW9uIERhdGUgKi8KCiAgICAgICAgICAgIHR4bkRhdGUgPSBuZXcgRGF0ZSh0eG5EYXRlKTsgLy8gQ2hlY2sgaWYgYmFjayBkYXRlIHRyYW5zYWN0aW9uCgogICAgICAgICAgICBpZiAoISh0eG5EYXRlIDwgdG9kYXkpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY3VycmVudEZpc2NhbERhdGUgPSBpbnN0aXR1dGUuZmlzY2FsRGF0ZS5maW5kKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGkuc3RhcnRfZGF0ZSkgPD0gdG9kYXkgJiYgbmV3IERhdGUoaS5lbmRfZGF0ZSkgPj0gdG9kYXk7CiAgICAgICAgICAgIH0pOyAvLyBBcHByb3ZlZCBSZXBvcnRpbmcgRGF0ZSB3aXRob3V0IHRpbWUKCiAgICAgICAgICAgIGlmICghKGtlbmRvLnRvU3RyaW5nKHR4bkRhdGUsICJ5eXl5LU1NLWRkIikgPCBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShjdXJyZW50RmlzY2FsRGF0ZS5zdGFydF9kYXRlKSwgInl5eXktTU0tZGQiKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIShrZW5kby50b1N0cmluZyh0eG5EYXRlLCAieXl5eS1NTS1kZCIpID49IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKGluc3RpdHV0ZS5hcHByb3ZlZFJlcG9ydGluZ0RhdGUpLCAieXl5eS1NTS1kZCIpKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIHByZUNvbmZpcm1DbG9zaW5nRGF0ZSh0eG5EYXRlKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAvLyBXaXRoaW4gcHJldmlvdXMgZmlzY2FsIGRhdGUgd2l0aCBleHBpcmVkIGFwcHJvdmVkIHJlcG9ydGluZyBkYXRlCiAgICAgICAgICAgIHNob3dBbGVydChpMThuLnQoIm1zZ19hbGVydF9hcHByb3ZlZF9yZXBvcnRpbmdfZGF0ZSIpKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgICByZXR1cm4gcHJlQ29uZmlybUNsb3NpbmdEYXRlKHR4bkRhdGUpOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7IC8vIE5vbmUgYmFjayBkYXRlIHRyYW5zYWN0aW9uCgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gR2V0IE1heCBOdW1iZXIgT2YgQWNjb3VudAoKZXhwb3J0cy5nZXRNYXhOdW1iZXJPZkFjY291bnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoYWNjb3VudFR5cGVDb2RlKSB7CiAgICB2YXIgcGFMaXN0LCBudW1iZXIsIHBhcmVudE51bXMsIGJpZ051bTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhY2NvdW50aW5nL2dldEFjY291bnRzJyk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBwYUxpc3QgPSBzdG9yZS5zdGF0ZS5hY2NvdW50aW5nLmFjY291bnRzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuYWNjb3VudF90eXBlLmNvZGUgPT09IGFjY291bnRUeXBlQ29kZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG51bWJlciA9ICIiOwoKICAgICAgICAgICAgaWYgKHBhTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgcGFyZW50TnVtcyA9IFtdOwogICAgICAgICAgICAgIHBhTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgcGFyZW50TnVtcy5wdXNoKGtlbmRvLnBhcnNlSW50KHZhbHVlLm51bWJlcikpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJpZ051bSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHBhcmVudE51bXMpOwogICAgICAgICAgICAgIG51bWJlciA9IGJpZ051bSArIDEwOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbnVtYmVyKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3g3KSB7CiAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIEdldCBCYW5rIEFjY291bnQgVHlwZSBieSB1dWlkCgoKZXhwb3J0cy5nZXRCYW5rQWNjb3VudFR5cGVCeVV1aWQgPSBmdW5jdGlvbiAodXVpZCkgewogIHZhciBiYW5rQWNjb3VudFR5cGUgPSBuZXcgQmFua0FjY291bnRUeXBlTW9kZWwoKTsKCiAgaWYgKHN0b3JlLnN0YXRlLmJhbmtpbmcuYmFua0FjY291bnRUeXBlcy5sZW5ndGggPiAwKSB7CiAgICB2YXIgYmEgPSBzdG9yZS5zdGF0ZS5iYW5raW5nLmJhbmtBY2NvdW50VHlwZXMuZmluZChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlLnV1aWQgPT09IHV1aWQ7CiAgICB9KTsKICAgIGJhbmtBY2NvdW50VHlwZSA9IG5ldyBCYW5rQWNjb3VudFR5cGVNb2RlbChiYSk7CiAgfQoKICByZXR1cm4gYmFua0FjY291bnRUeXBlOwp9OyAvLyBHcm91cCBFeHBlbnNlcyBieSBDYXNoIEFkdmFuY2UgKEFkdmFuY2UgU2V0dGxlbWVudCBQYWdlKQoKCmV4cG9ydHMuZ3JvdXBFeHBlbnNlQnlDYXNoQWR2YW5jZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdmFyIGcgPSB7fTsKICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgaWQgPSB2YWx1ZS5qb3VybmFsLnV1aWQ7CgogICAgaWYgKHZhbHVlLmFjY291bnQubnVtYmVyID09PSBBY2NvdW50VHlwZUNvZGUuQURWQU5DRV9TRVRUTEVNRU5UX0NMRUFSSU5HX0NPREUpIHsKICAgICAgaWYgKGdbaWRdKSB7CiAgICAgICAgZ1tpZF1bJ2Ftb3VudCddICs9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgIGdbaWRdWydleGNoYW5nZWRfYW1vdW50J10gKz0gdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xOwogICAgICB9IGVsc2UgewogICAgICAgIGdbaWRdID0gewogICAgICAgICAgdXVpZDogaWQsCiAgICAgICAgICBuYW1lOiB2YWx1ZS5wcmltYXJ5X2NvbnRhY3QubmFtZSwKICAgICAgICAgIG51bWJlcjogdmFsdWUuam91cm5hbC5udW1iZXIsCiAgICAgICAgICBhbW91bnQ6IHZhbHVlLmFtb3VudCAqIC0xLAogICAgICAgICAgZGVzY3JpcHRpb246IHZhbHVlLmRlc2NyaXB0aW9uLAogICAgICAgICAgZXhjaGFuZ2VkX2Ftb3VudDogdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xLAogICAgICAgICAgY3VycmVuY3k6IHZhbHVlLmN1cnJlbmN5LAogICAgICAgICAgc2VnbWVudF91dWlkOiB2YWx1ZS5zZWdtZW50X3V1aWQKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZyk7Cn07IC8vIEdyb3VwIEV4cGVuc2UgQnkgRW1wbG95ZWUgKFJlaW1idXJzdG1lbnQgUGFnZSkKCgpleHBvcnRzLmdyb3VwRXhwZW5zZUJ5RW1wbG95ZWUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHZhciBnID0gW107CiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgdmFyIGFtdCA9IDAsCiAgICAgICAgeGFtdCA9IDA7CiAgICB2YWx1ZS5leHBlbnNlX2VudHJpZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7CiAgICAgIGlmIChlbGUuYWNjb3VudC5udW1iZXIgPT09IEFjY291bnRUeXBlQ29kZS5BRFZBTkNFX1NFVFRMRU1FTlRfQ0xFQVJJTkdfQ09ERSkgewogICAgICAgIGFtdCArPSBlbGUuYW1vdW50ICogLTE7CiAgICAgICAgeGFtdCArPSBlbGUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xOwogICAgICB9CiAgICB9KTsKICAgIGcucHVzaCh7CiAgICAgIHV1aWQ6IHZhbHVlLnV1aWQsCiAgICAgIG5hbWU6IHZhbHVlLnN1cHBsaWVyLm5hbWUsCiAgICAgIG51bWJlcjogdmFsdWUubnVtYmVyLAogICAgICBhbW91bnQ6IGFtdCwKICAgICAgZXhjaGFuZ2VkX2Ftb3VudDogeGFtdCwKICAgICAgY3VycmVuY3k6IHZhbHVlLmJpbGxfY3VycmVuY3kKICAgIH0pOwogIH0pOwogIHJldHVybiBnOwp9OyAvLyBBY2NvdW50IEVkaXRvcgoKCmV4cG9ydHMuYWNjb3VudEVkaXRvciA9IGZ1bmN0aW9uIChjb250YWluZXIsIG9wdGlvbnMsIGRhdGEpIHsKICB2YXIgYWNjX2xhbmd1YWdlID0gc3RvcmUuc3RhdGUuYWNjb3VudGluZy5hY2NvdW50TGFuZ3VhZ2UgPT09ICdFbmdsaXNoJyA/ICJhY2NvdW50X3R5cGUubmFtZSIgOiAiYWNjb3VudF90eXBlLmxvY2FsX25hbWUiOwogIHZhciBhY2NfdGVtcGxhdGUgPSBzdG9yZS5zdGF0ZS5hY2NvdW50aW5nLmFjY291bnRMYW5ndWFnZSA9PT0gJ0VuZ2xpc2gnID8gIjxzcGFuPiM9bnVtYmVyIyAjPW5hbWUjPC9zcGFuPiIgOiAiPHNwYW4+Iz1udW1iZXIjICM9bG9jYWxfbmFtZSM8L3NwYW4+IjsKICByZXR1cm4ga2VuZG8ualF1ZXJ5KCc8aW5wdXQgcmVxdWlyZWQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykuYXBwZW5kVG8oY29udGFpbmVyKS5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICBhdXRvQmluZDogZmFsc2UsCiAgICBhdXRvV2lkdGg6IHRydWUsCiAgICBoZWlnaHQ6IDQwMCwKICAgIGZpbHRlcjogImNvbnRhaW5zIiwKICAgIGZpbHRlcmluZzogZnVuY3Rpb24gZmlsdGVyaW5nKGUpIHsKICAgICAgdmFyIGZpbHRlciA9IGUuZmlsdGVyOwogICAgICB2YXIgbmV3RmlsdGVyID0gewogICAgICAgIGxvZ2ljOiAib3IiLAogICAgICAgIGZpbHRlcnM6IFt7CiAgICAgICAgICBmaWVsZDogIm51bWJlciIsCiAgICAgICAgICBvcGVyYXRvcjogImNvbnRhaW5zIiwKICAgICAgICAgIHZhbHVlOiBmaWx0ZXIudmFsdWUKICAgICAgICB9LCB7CiAgICAgICAgICBmaWVsZDogIm5hbWUiLAogICAgICAgICAgb3BlcmF0b3I6ICJjb250YWlucyIsCiAgICAgICAgICB2YWx1ZTogZmlsdGVyLnZhbHVlCiAgICAgICAgfV0KICAgICAgfTsKICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlcihuZXdGaWx0ZXIpOyAvLyBJbXBvcnRhbnQ6IHN0b3AgZGVmYXVsdCBmaWx0ZXIKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBkYXRhVGV4dEZpZWxkOiAibnVtYmVyIiwKICAgIGRhdGFWYWx1ZUZpZWxkOiAidXVpZCIsCiAgICB0ZW1wbGF0ZTogYWNjX3RlbXBsYXRlLAogICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgZGF0YTogZGF0YSwKICAgICAgZ3JvdXA6IHsKICAgICAgICBmaWVsZDogYWNjX2xhbmd1YWdlLAogICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikgewogICAgICAgICAgLy8gT3JkZXIgYnkgbnVtYmVyCiAgICAgICAgICBpZiAoYS5pdGVtc1swXS5udW1iZXIgPT09IGIuaXRlbXNbMF0ubnVtYmVyKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfSBlbHNlIGlmIChhLml0ZW1zWzBdLm51bWJlciA+IGIuaXRlbXNbMF0ubnVtYmVyKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSkKICB9KTsKfTsgLy8gUmVhZCBFeGNlbCBGaWxlCgoKZXhwb3J0cy5nZXRFeGNlbERhdGEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmF3RmlsZSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgLyogSW5pdGlhbCBGaWxlIFJlYWRlciAqLwogICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIC8qIFBhcnNlIGRhdGEgKi8KICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgdmFyIHdvcmtib29rID0gWExTWC5yZWFkKGRhdGEsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2FycmF5JwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvKiBHZXQgZmlyc3Qgd29ya3NoZWV0ICovCgogICAgICAgICAgICAgICAgLyogR2V0IGZpcnN0IHdvcmtzaGVldCAqLwogICAgICAgICAgICAgICAgdmFyIGZpcnN0U2hlZXROYW1lID0gd29ya2Jvb2suU2hlZXROYW1lc1swXTsKICAgICAgICAgICAgICAgIHZhciB3b3Jrc2hlZXQgPSB3b3JrYm9vay5TaGVldHNbZmlyc3RTaGVldE5hbWVdOwogICAgICAgICAgICAgICAgLyogQ29udmVydCBhcnJheSBvZiBhcnJheXMgKi8KCiAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IGFycmF5IG9mIGFycmF5cyAqLwogICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya3NoZWV0LCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcjogMQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdHMpOwogICAgICAgICAgICAgIH07IC8vIFJlYWQgRmlsZQoKCiAgICAgICAgICAgICAgLy8gUmVhZCBGaWxlCiAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHJhd0ZpbGUpOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94OCkgewogICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBUcmFuc2FsYXRlIHRvIGxvY2FsIGxhbmd1YWdlCgoKZXhwb3J0cy5sb2NhbFRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChsYW5nKSB7CiAgdmFyIHdvcmQgPSBsYW5nOwoKICBpZiAobGFuZy50b0xvd2VyQ2FzZSgpID09PSAiYXNzZXQiKSB7CiAgICB3b3JkID0gIuGekeGfkuGemuGeluGfkuGemeGen+GegOGemOGfkuGemCI7CiAgfSBlbHNlIGlmIChsYW5nLnRvTG93ZXJDYXNlKCkgPT09ICJjdXJyZW50IGFzc2V0IikgewogICAgd29yZCA9ICLhnpHhn5Lhnprhnpbhn5Lhnpnhnp/hnoDhnpjhn5Lhnpjhnprhnpnhn4jhnpbhn4HhnpvhnoHhn5LhnpvhnrgiOwogIH0gZWxzZSBpZiAobGFuZy50b0xvd2VyQ2FzZSgpID09PSAibm9uLWN1cnJlbnQgYXNzZXQiKSB7CiAgICB3b3JkID0gIuGekeGfkuGemuGeluGfkuGemeGen+GegOGemOGfkuGemOGemuGemeGfiOGeluGfgeGem+GenOGfguGehCI7CiAgfSBlbHNlIGlmIChsYW5nLnRvTG93ZXJDYXNlKCkgPT09ICJsaWFiaWxpdGllcyIpIHsKICAgIHdvcmQgPSAi4Z6U4Z+G4Z6O4Z674Z6bIjsKICB9IGVsc2UgaWYgKGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gImN1cnJlbnQgbGlhYmlsaXRpZXMiKSB7CiAgICB3b3JkID0gIuGelOGfhuGejuGeu+Gem+GemuGemeGfiOGeluGfgeGem+GegeGfkuGem+GeuCI7CiAgfSBlbHNlIGlmIChsYW5nLnRvTG93ZXJDYXNlKCkgPT09ICJub24tY3VycmVudCBsaWFiaWxpdGllcyIpIHsKICAgIHdvcmQgPSAi4Z6U4Z+G4Z6O4Z674Z6b4Z6a4Z6Z4Z+I4Z6W4Z+B4Z6b4Z6c4Z+C4Z6EIjsKICB9IGVsc2UgaWYgKGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gImVxdWl0eSIpIHsKICAgIHdvcmQgPSAi4Z6K4Z6+4Z6Y4Z6R4Z674Z6TIjsKICB9IGVsc2UgaWYgKGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gInJldGFpbmVkIGVhcm5pbmciKSB7CiAgICB3b3JkID0gIuGelOGfkuGemuGetuGegOGfi+GeheGfhuGejuGfgeGeieGemuGegOGfkuGen+GetuGekeGeu+GegCI7CiAgfQoKICByZXR1cm4gd29yZDsKfTsKLyogUmVmb3JtIGRhdGEgdG8gSGllcmFyY2hpY2FsRGF0YVNvdXJjZSAqLwoKCmV4cG9ydHMucmVmb3JtRGF0YVRvSGllcmFyY2hpY2FsRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChkYXRhSXRlbXMpIHsKICB2YXIgZyA9IHt9OwogIC8qIFBhcmVudCBMZXZlbHMgKi8KCiAgZGF0YUl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgY2xhenogPSBuZXcgQ2xhc3NNb2RlbCh2YWx1ZSk7CiAgICAvKiBOYXR1cmUgKi8KCiAgICBpZiAoY2xhenouY2xhenouaWQgIT09ICIiKSB7CiAgICAgIGdbY2xhenouY2xhenouaWRdID0gewogICAgICAgIGlkOiBjbGF6ei5jbGF6ei5pZCwKICAgICAgICBwYXJlbnRJZDogbnVsbCwKICAgICAgICBjb2RlOiBjbGF6ei5jbGF6ei5jb2RlLAogICAgICAgIG5hbWU6IGNsYXp6LmNsYXp6Lm5hbWUsCiAgICAgICAgaXRlbXM6IFtdLAogICAgICAgIGhhc0NoaWxkcmVuOiB0cnVlCiAgICAgIH07CiAgICB9CiAgICAvKiBUeXBlICovCgoKICAgIGlmIChjbGF6ei5jbGFzc1R5cGUuaWQgIT09ICIiKSB7CiAgICAgIGdbY2xhenouY2xhc3NUeXBlLmlkXSA9IHsKICAgICAgICBpZDogY2xhenouY2xhc3NUeXBlLmlkLAogICAgICAgIHBhcmVudElkOiBjbGF6ei5jbGF6ei5pZCwKICAgICAgICBjb2RlOiBjbGF6ei5jbGFzc1R5cGUuY29kZSwKICAgICAgICBuYW1lOiBjbGF6ei5jbGFzc1R5cGUubmFtZSwKICAgICAgICBpdGVtczogW10sCiAgICAgICAgaGFzQ2hpbGRyZW46IHRydWUKICAgICAgfTsKICAgIH0KICAgIC8qIEdyb3VwICovCgoKICAgIGlmIChjbGF6ei5jbGFzc0dyb3VwLmlkICE9PSAiIikgewogICAgICBnW2NsYXp6LmNsYXNzR3JvdXAuaWRdID0gewogICAgICAgIGlkOiBjbGF6ei5jbGFzc0dyb3VwLmlkLAogICAgICAgIHBhcmVudElkOiBjbGF6ei5jbGFzc1R5cGUuaWQsCiAgICAgICAgY29kZTogY2xhenouY2xhc3NHcm91cC5jb2RlLAogICAgICAgIG5hbWU6IGNsYXp6LmNsYXNzR3JvdXAubmFtZSwKICAgICAgICBpdGVtczogW10sCiAgICAgICAgaGFzQ2hpbGRyZW46IHRydWUKICAgICAgfTsKICAgIH0KICAgIC8qIFN1YiBHcm91cCAqLwoKCiAgICBpZiAoY2xhenouY2xhc3NTdWJHcm91cC5pZCAhPT0gIiIpIHsKICAgICAgZ1tjbGF6ei5jbGFzc1N1Ykdyb3VwLmlkXSA9IHsKICAgICAgICBpZDogY2xhenouY2xhc3NTdWJHcm91cC5pZCwKICAgICAgICBwYXJlbnRJZDogY2xhenouY2xhc3NHcm91cC5pZCwKICAgICAgICBjb2RlOiBjbGF6ei5jbGFzc1N1Ykdyb3VwLmNvZGUsCiAgICAgICAgbmFtZTogY2xhenouY2xhc3NTdWJHcm91cC5uYW1lLAogICAgICAgIGhhc0NoaWxkcmVuOiBmYWxzZQogICAgICB9OwogICAgfQogIH0pOwogIC8qIEFkZCBQYXJlbnRzICovCgogIHZhciBsaXN0ID0gW107CgogIGZvciAodmFyIGtleSBpbiBnKSB7CiAgICBsaXN0LnB1c2goZ1trZXldKTsKICB9CgogIHZhciBtYXAgPSB7fSwKICAgICAgbm9kZSwKICAgICAgcm9vdHMgPSBbXSwKICAgICAgaTsKCiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHsKICAgIG1hcFtsaXN0W2ldLmlkXSA9IGk7IC8vIGluaXRpYWxpemUgdGhlIG1hcAoKICAgIGxpc3RbaV0uaXRlbXMgPSBbXTsgLy8gaW5pdGlhbGl6ZSB0aGUgY2hpbGRyZW4KICB9CgogIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICBub2RlID0gbGlzdFtpXTsKCiAgICBpZiAobm9kZS5wYXJlbnRJZCAhPT0gbnVsbCkgewogICAgICAvLyBpZiB5b3UgaGF2ZSBkYW5nbGluZyBicmFuY2hlcyBjaGVjayB0aGF0IG1hcFtub2RlLnBhcmVudElkXSBleGlzdHMKICAgICAgbGlzdFttYXBbbm9kZS5wYXJlbnRJZF1dLml0ZW1zLnB1c2gobm9kZSk7CiAgICB9IGVsc2UgewogICAgICByb290cy5wdXNoKG5vZGUpOwogICAgfQogIH0KCiAgcmV0dXJuIHJvb3RzOwp9OwoKZXhwb3J0IGRlZmF1bHQgZXhwb3J0czs="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/helper.js"],"names":["i18n","kendo","XLSX","LinkTemplate","ClosingDateModel","ExchangeRateModel","BankAccountTypeModel","UserModel","ClassModel","store","institute","state","cookieJS","require","cookie","getCookie","Swal","CryptoJS","closingDateHandler","prefixHandler","currencyHandler","AccountTypeCode","exports","getUser","user","removeCurrencyFormat","num","replace","linkTemplate","displayText","urlPath","template","templateArgs","text","url","generateAccountingNumber","prefixType","transactionDate","dispatch","prefixes","pf","find","value","type","toLowerCase","structure","txnDate","Date","getFullYear","toString","substr","getMonth","padStart","shortPrefix","abbr","prefixSeparator","numberSeparator","fullPrefix","repeat","format","sequcencing","lastNumber","params","prefix","shorten_prefix","journal_date","lastNumberResponse","lastNumbers","data","number","parseInt","monthly_last_number","yearly_last_number","last_number","prefix_format","getLastExchangeRateByDate","date","code","xrate","baseCurrency","response","toISODate","aDate","today","theDate","setHours","getHours","getMinutes","getSeconds","getMilliseconds","getTime","toISOString","dateFormat","formatedDate","instituteDateFormat","alertErrorMsg","msg","fire","position","icon","title","showConfirmButton","preConfirmClosingDate","result","last","cdate","cd","closingDate","input","inputPlaceholder","inputAttributes","autocapitalize","autocorrect","showCancelButton","confirmButtonText","showLoaderOnConfirm","preConfirm","password","pswInBytes","AES","decrypt","instituteId","originalPsw","enc","Utf8","showValidationMessage","confirmPsw","Boolean","showAlert","getFiscalDateByDate","fiscalYear","fiscalDate","start_date","end_date","generateFiscalMonths","startDate","endDate","columnBy","fiscalMonths","interval","sdate","edate","pairMonth","setMonth","push","formatFiscalDate","validateClosingDate","currentFiscalDate","i","approvedReportingDate","t","getMaxNumberOfAccount","accountTypeCode","paList","accounting","accounts","filter","account_type","length","parentNums","forEach","bigNum","Math","max","getBankAccountTypeByUuid","uuid","bankAccountType","banking","bankAccountTypes","ba","groupExpenseByCashAdvance","g","id","journal","account","ADVANCE_SETTLEMENT_CLEARING_CODE","amount","exchanged_amount","name","primary_contact","description","currency","segment_uuid","Object","values","groupExpenseByEmployee","amt","xamt","expense_entries","ele","supplier","bill_currency","accountEditor","container","options","acc_language","accountLanguage","acc_template","jQuery","field","appendTo","kendoDropDownList","autoBind","autoWidth","height","filtering","e","newFilter","logic","filters","operator","dataSource","preventDefault","dataTextField","dataValueField","optionLabel","DataSource","group","compare","a","b","items","getExcelData","rawFile","Promise","resolve","reader","FileReader","onload","target","workbook","read","firstSheetName","SheetNames","worksheet","Sheets","results","utils","sheet_to_json","header","readAsArrayBuffer","localTranslate","lang","word","reformDataToHierarchicalDataSource","dataItems","clazz","parentId","hasChildren","classType","classGroup","classSubGroup","list","key","map","node","roots"],"mappings":"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","sourcesContent":["'use strict'\n\nimport {i18n} from '@/i18n';\nimport kendo from '@progress/kendo-ui';\nimport XLSX from \"xlsx\";\nimport LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\nimport {\n    ClosingDateModel,\n    ExchangeRateModel,\n    BankAccountTypeModel,\n    UserModel,\n    ClassModel,\n} from '@/scripts/model/AppModels';\n\n/* Store */\nimport store from '@/store';\nconst institute = store.state.institute.institute;\n\n/* Cookie */\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\n\nconst Swal = require('sweetalert2');\nconst CryptoJS = require(\"crypto-js\");\nconst {\n    closingDateHandler,\n    prefixHandler,\n    currencyHandler,\n} = require(\"@/scripts/AppHandlers\");\nconst {AccountTypeCode} = require(\"@/scripts/default_setup/Collections\");\n\nlet exports = {};\n\n/* Get User */\nexports.getUser = () => {\n    return new UserModel(cookie.user);\n}\n\n// Remove Currency Format From A Number\nexports.removeCurrencyFormat = (num) => {\n    return num.replace(/[^\\d.-]+/g, \"\");\n}\n\n// Link Template\nexports.linkTemplate = (displayText, urlPath) => {\n    return {\n        template: LinkTemplate,\n        templateArgs: {\n            text: displayText,\n            url: urlPath\n        }\n    };\n}\n\n// Get Generate Accounting Number\nexports.generateAccountingNumber = async (prefixType, transactionDate) => {\n    // Call All Prefixes\n    let prefixes = await store.dispatch('prefixes/getList');\n\n    let pf = prefixes.find(value => value.type.toLowerCase() === prefixType.toLowerCase());\n    \n    // Structure\n    let structure = '', txnDate = new Date(transactionDate);\n    switch (pf.structure.toLowerCase()) {\n        case 'yyyy':\n            structure = txnDate.getFullYear().toString();\n            break;\n        case 'yy':\n            structure = txnDate.getFullYear().toString().substr(2);\n            break;\n        case 'yyyymm':\n            structure = txnDate.getFullYear().toString() + (txnDate.getMonth() + 1).toString().padStart(2, '0');\n            break;\n        case 'yymm':\n            structure = txnDate.getFullYear().toString().substr(2) + (txnDate.getMonth() + 1).toString().padStart(2, '0');\n            break;\n\n        default:// None structure\n            break;\n    }\n\n    // Prefix Format \"JE-yymm-00000\"\n    let shortPrefix = pf.abbr + pf.prefixSeparator + structure + pf.numberSeparator,\n        fullPrefix = pf.abbr + pf.prefixSeparator + pf.structure + pf.numberSeparator + '0'.repeat(pf.format) + `@${pf.sequcencing}`;\n\n    // Call Last Number\n    const lastNumberResponse = await prefixHandler.lastNumber({\n        params : {\n            prefix          : fullPrefix,\n            shorten_prefix  : shortPrefix,\n            journal_date    : transactionDate,\n        }\n    });\n    const lastNumbers = lastNumberResponse.data;\n\n    /* Starting Number */\n    let lastNumber = pf.number;\n\n    /* Sequcencing */\n    switch (pf.sequcencing.toLowerCase()) {\n        case 'month':// Month\n            if(kendo.parseInt(lastNumbers.monthly_last_number) !== 0){\n                lastNumber = kendo.parseInt(lastNumbers.monthly_last_number) + 1;\n            }\n\n            break;\n        case 'year':// Year\n            if(kendo.parseInt(lastNumbers.yearly_last_number) !== 0){\n                lastNumber = kendo.parseInt(lastNumbers.yearly_last_number) + 1;\n            }\n\n            break;\n        default:// Prefix\n            if(kendo.parseInt(lastNumbers.last_number) !== 0){\n                lastNumber = kendo.parseInt(lastNumbers.last_number) + 1;\n            }\n\n            break;\n    }\n\n    /* Full Number */\n    let number = pf.abbr + pf.prefixSeparator + structure + pf.numberSeparator + lastNumber.toString().padStart(pf.format, '0');\n\n    /* Result */\n    return {\n        number: number,\n        last_number: lastNumber,\n        prefix_format: fullPrefix,\n        prefix: pf,\n    }\n}\n\n// Get Last Exchange Rate By Date\nexports.getLastExchangeRateByDate = async (date, code) => {\n    let xrate = new ExchangeRateModel(institute.baseCurrency);\n\n    if (code !== institute.baseCurrency.code) {\n        const response = await currencyHandler.getLastExchangeRateByDate(date, code);\n        if (response.data.data) {\n            xrate = new ExchangeRateModel(response.data.data[0]);\n        }\n    }\n\n    return xrate;\n}\n\n// Convert Date to ISO\nexports.toISODate = (aDate) => {\n    let today = new Date();\n    let theDate = new Date(aDate);\n    theDate.setHours(today.getHours(), today.getMinutes(), today.getSeconds(), today.getMilliseconds());\n\n    return new Date(theDate.getTime()).toISOString();\n}\n\n// Date Format\nexports.dateFormat = (theDate) => {\n    let formatedDate = theDate;\n    if (formatedDate !== '') {\n        formatedDate = kendo.toString(new Date(theDate), institute.dateFormat);\n    }\n\n    return formatedDate;\n}\n// Date Format form\nexports.instituteDateFormat = () => {\n    return institute.dateFormat;\n}\n// Alert Error Message\nexports.alertErrorMsg = (msg = '') => {\n    Swal.fire({\n        position: \"center\",\n        icon: \"warning\",\n        title: \"Oops...!\",\n        text: msg,\n        showConfirmButton: true,\n    });\n}\n\n// Pre-Confirm Closing Date\nasync function preConfirmClosingDate(txnDate) {\n    let result = false,\n        cdate = await closingDateHandler.last();\n\n    if (typeof cdate.data.data != \"undefined\") {\n        let cd = new ClosingDateModel(cdate.data.data);\n\n        if (new Date(txnDate) <= new Date(cd.closingDate)) {\n            let confirmPsw = await Swal.fire({\n                title: \"Please Enter Password!\",\n                text: \"You are recording within closing date, please confirm password.\",\n                icon: \"warning\",\n                input: \"password\",\n                inputPlaceholder: \"Password...\",\n                inputAttributes: {\n                    autocapitalize: \"off\",\n                    autocorrect: \"off\",\n                },\n                showCancelButton: true,\n                confirmButtonText: \"Submit\",\n                showLoaderOnConfirm: true,\n                preConfirm: (password) => {\n                    // Decrypt (Password, Key)\n                    let pswInBytes = CryptoJS.AES.decrypt(\n                        cd.password,\n                        cookie.instituteId\n                    );\n                    let originalPsw = pswInBytes.toString(\n                        CryptoJS.enc.Utf8\n                    );\n\n                    // Compare Password\n                    if (password === originalPsw) {\n                        return true;\n                    } else {\n                        Swal.showValidationMessage(\n                            \"Password Does Not Macth!\"\n                        );\n                    }\n                },\n            });\n            result = Boolean(confirmPsw.value);\n        } else {\n            result = true; // Greater than closing date\n        }\n    } else {\n        result = true; // Not use closing date\n    }\n\n    return result;\n}\n\n// Show Alert\nfunction showAlert(msg) {\n    Swal.fire({\n        position: \"center\",\n        icon: \"warning\",\n        title: \"Oops...!\",\n        text: msg,\n        showConfirmButton: true,\n    });\n}\n\n// Get Fiscal Date By Date (Object)\nexports.getFiscalDateByDate = (theDate) => {\n    let aDate = new Date(theDate);\n    let fiscalYear = institute.fiscalDate.find(value => aDate >= new Date(value.start_date) && aDate <= new Date(value.end_date));\n\n    return fiscalYear;\n}\n\n// Generate Fiscal Months\nexports.generateFiscalMonths = (startDate, endDate, columnBy, dateFormat=\"MMM yyyy\") => {\n    let fiscalMonths = [],\n        interval = 1,\n        sdate = new Date(startDate),\n        edate = new Date(endDate),\n        pairMonth = edate;\n\n    while (sdate <= edate) {\n        if (columnBy === \"4\") { // Quarter\n            interval = 3;\n            pairMonth = new Date(sdate);\n            pairMonth.setMonth(sdate.getMonth() + (interval -1));\n            fiscalMonths.push(kendo.toString(sdate, dateFormat) +\" - \"+ kendo.toString(new Date(pairMonth), dateFormat));\n        } else if (columnBy === \"2\") { // Semi-Annual\n            interval = 6;\n            pairMonth = new Date(sdate);\n            pairMonth.setMonth(sdate.getMonth() + (interval -1));\n            fiscalMonths.push(kendo.toString(sdate, dateFormat) +\" - \"+ kendo.toString(new Date(pairMonth), dateFormat));\n        } else { // Month\n            interval = 1;\n            fiscalMonths.push(kendo.toString(sdate, dateFormat));\n        }\n\n        // Next Month\n        sdate.setMonth(sdate.getMonth() + interval);\n    }\n    \n    return fiscalMonths;\n}\n\n// Format FiscalDate\nexports.formatFiscalDate = (aDate) => {\n    return kendo.toString(new Date(aDate), \"MMM yyyy\");\n},\n\n// Validate Closing Date (B Kethya forced me to do like this, in case he says No) also Rothny jol dai jol jerng\nexports.validateClosingDate = async (txnDate) => {\n    let result = false,\n        today = new Date();\n\n    /* Parse Transaction Date */\n    txnDate = new Date(txnDate);\n\n    // Check if back date transaction\n    if (txnDate < today) {\n        let currentFiscalDate = institute.fiscalDate.find(i => (new Date(i.start_date) <= today) && (new Date(i.end_date) >= today));\n            \n        // Approved Reporting Date without time\n        if (kendo.toString(txnDate, \"yyyy-MM-dd\") < kendo.toString(new Date(currentFiscalDate.start_date), \"yyyy-MM-dd\")) {// Within previous fiscal date\n            if (kendo.toString(txnDate, \"yyyy-MM-dd\") >= kendo.toString(new Date(institute.approvedReportingDate), \"yyyy-MM-dd\")) {\n                result = await preConfirmClosingDate(txnDate);\n            } else {// Within previous fiscal date with expired approved reporting date\n                showAlert(i18n.t(\"msg_alert_approved_reporting_date\"));\n            }\n        } else {// Within Closing Date\n            result = await preConfirmClosingDate(txnDate);\n        }\n    } else {\n        result = true;// None back date transaction\n    }\n\n    return result;\n}\n\n// Get Max Number Of Account\nexports.getMaxNumberOfAccount = async (accountTypeCode) => {\n    await store.dispatch('accounting/getAccounts');\n\n    let paList = store.state.accounting.accounts.filter(value => value.account_type.code === accountTypeCode);\n\n    let number = \"\";\n    if(paList.length > 0){\n        let parentNums = [];\n        paList.forEach(value => {\n            parentNums.push(kendo.parseInt(value.number));\n        });\n        let bigNum = Math.max(...parentNums);\n        number = bigNum + 10;\n    }\n\n    return number;\n}\n\n// Get Bank Account Type by uuid\nexports.getBankAccountTypeByUuid = (uuid) => {\n    let bankAccountType = new BankAccountTypeModel();\n    if(store.state.banking.bankAccountTypes.length > 0){\n        let ba = store.state.banking.bankAccountTypes.find(value => value.uuid === uuid);\n        bankAccountType = new BankAccountTypeModel(ba);\n    }\n\n    return bankAccountType;\n}\n\n// Group Expenses by Cash Advance (Advance Settlement Page)\nexports.groupExpenseByCashAdvance = (data) => {\n    let g = {};\n\n    data.forEach(value => {\n        let id = value.journal.uuid;\n        if (value.account.number === AccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE) {\n            if (g[id]) {\n                g[id]['amount'] += value.amount * -1;\n                g[id]['exchanged_amount'] += value.exchanged_amount * -1;\n            } else {\n                g[id] = {\n                    uuid: id,\n                    name: value.primary_contact.name,\n                    number: value.journal.number,\n                    amount: value.amount * -1,\n                    description: value.description,\n                    exchanged_amount: value.exchanged_amount * -1,\n                    currency: value.currency,\n                    segment_uuid: value.segment_uuid\n                }\n            }\n        }\n    })\n\n    return Object.values(g);\n}\n\n// Group Expense By Employee (Reimburstment Page)\nexports.groupExpenseByEmployee = (data) => {\n    let g = [];\n\n    data.forEach(value => {\n        let amt = 0, xamt = 0;\n        value.expense_entries.forEach(ele => {\n            if (ele.account.number === AccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE) {\n                amt += ele.amount * -1;\n                xamt += ele.exchanged_amount * -1;\n            }\n        });\n\n        g.push({\n            uuid: value.uuid,\n            name: value.supplier.name,\n            number: value.number,\n            amount: amt,\n            exchanged_amount: xamt,\n            currency: value.bill_currency,\n        });\n    })\n\n    return g;\n}\n\n// Account Editor\nexports.accountEditor = (container, options, data) => {\n    let acc_language = store.state.accounting.accountLanguage === 'English' ? \"account_type.name\" :  \"account_type.local_name\";\n    let acc_template = store.state.accounting.accountLanguage === 'English' ?\"<span>#=number# #=name#</span>\" :  \"<span>#=number# #=local_name#</span>\";\n    return kendo.jQuery('<input required name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n            autoBind: false,\n            autoWidth: true,\n            height: 400,\n            filter: \"contains\",\n            filtering: function(e) {\n                var filter = e.filter;\n                \n                var newFilter = {\n                    logic: \"or\",\n                    filters: [\n                        { field: \"number\", operator: \"contains\", value: filter.value },\n                        { field: \"name\", operator: \"contains\", value: filter.value },\n                    ]\n                };\n                this.dataSource.filter(newFilter);\n\n                // Important: stop default filter\n                e.preventDefault();\n            },\n            dataTextField: \"number\",\n            dataValueField: \"uuid\",\n            template: acc_template ,\n            optionLabel: \"--- Select ---\",\n            dataSource: new kendo.data.DataSource({\n                data: data,\n                group: {\n                    field: acc_language ,\n                    compare: function (a, b) {// Order by number\n                        if (a.items[0].number === b.items[0].number) {\n                            return 0\n                        } else if (a.items[0].number > b.items[0].number) {\n                            return 1\n                        } else {\n                            return -1\n                        }\n                    }\n                },\n            })\n        })\n}\n\n// Read Excel File\nexports.getExcelData = async (rawFile) => {\n    return new Promise((resolve) => {\n        /* Initial File Reader */\n        const reader = new FileReader();\n\n        reader.onload = (e) => {\n            /* Parse data */\n            const data = e.target.result;\n            const workbook = XLSX.read(data, {type: 'array'});\n\n            /* Get first worksheet */\n            const firstSheetName = workbook.SheetNames[0];\n            const worksheet = workbook.Sheets[firstSheetName];\n\n            /* Convert array of arrays */\n            let results = XLSX.utils.sheet_to_json(worksheet, {header: 1});\n            resolve(results);\n        }\n\n        // Read File\n        reader.readAsArrayBuffer(rawFile);\n    })\n}\n\n// Transalate to local language\nexports.localTranslate = (lang) => {\n    let word = lang;\n\n    if (lang.toLowerCase() === \"asset\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"current asset\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"non-current asset\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"liabilities\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"current liabilities\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"non-current liabilities\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"equity\") {\n        word = \"\";\n    } else if (lang.toLowerCase() === \"retained earning\") {\n        word = \"\";\n    }\n\n    return word;\n}\n\n/* Reform data to HierarchicalDataSource */\nexports.reformDataToHierarchicalDataSource = (dataItems) => {\n    let g = {};\n\n    /* Parent Levels */\n    dataItems.forEach(value => {\n        let clazz = new ClassModel(value);\n        \n        /* Nature */\n        if(clazz.clazz.id !== \"\"){\n            g[clazz.clazz.id] = {\n                id : clazz.clazz.id,\n                parentId : null,\n                code : clazz.clazz.code,\n                name : clazz.clazz.name,\n                items : [],\n                hasChildren : true,\n            };\n        }\n        /* Type */\n        if(clazz.classType.id !== \"\"){\n            g[clazz.classType.id] = {\n                id : clazz.classType.id,\n                parentId : clazz.clazz.id,\n                code : clazz.classType.code,\n                name : clazz.classType.name,\n                items : [],\n                hasChildren : true,\n            };\n        }\n        /* Group */\n        if(clazz.classGroup.id !== \"\"){\n            g[clazz.classGroup.id] = {\n                id : clazz.classGroup.id,\n                parentId : clazz.classType.id,\n                code : clazz.classGroup.code,\n                name : clazz.classGroup.name,\n                items : [],\n                hasChildren : true,\n            };\n        }\n        /* Sub Group */\n        if(clazz.classSubGroup.id !== \"\"){\n            g[clazz.classSubGroup.id] = {\n                id : clazz.classSubGroup.id,\n                parentId : clazz.classGroup.id,\n                code : clazz.classSubGroup.code,\n                name : clazz.classSubGroup.name,\n                hasChildren : false,\n            };\n        }\n    });\n\n    /* Add Parents */\n    let list = [];\n    for (let key in g)\n    list.push(g[key]);\n    \n    var map = {}, node, roots = [], i;\n\n    for (i = 0; i < list.length; i += 1) {\n        map[list[i].id] = i; // initialize the map\n        list[i].items = []; // initialize the children\n    }\n    \n    for (i = 0; i < list.length; i += 1) {\n        node = list[i];\n        if (node.parentId !== null) {\n            // if you have dangling branches check that map[node.parentId] exists\n            list[map[node.parentId]].items.push(node);\n        } else {\n            roots.push(node);\n        }\n    }\n    \n    return roots;\n}\n\nexport default exports;"]}]}
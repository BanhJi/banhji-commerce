{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js??ref--14-0!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/auth.js","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/auth.js","mtime":1638499442938},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/babel.config.js","mtime":1638499442885},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9hc3luY1RvR2VuZXJhdG9yID0gcmVxdWlyZSgiL1VzZXJzL21hY29zL0Rlc2t0b3AvYmFuaGppLTAuMi9iYW5oamktYWNjb3VudGluZy13ZWItbW9kdWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKS5kZWZhdWx0OwoKcmVxdWlyZSgicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIik7Cgp2YXIgY29va2llSlMgPSByZXF1aXJlKCJAL2Nvb2tpZS5qcyIpOwoKdmFyIGNvb2tpZSA9IGNvb2tpZUpTLmdldENvb2tpZSgpOwoKdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi9vYnNlcnZhYmxlL3N0b3JlJyksCiAgICBkYXRhU3RvcmUgPSBfcmVxdWlyZS5kYXRhU3RvcmU7Cgp2YXIgaW5zdGl0dXRlSGFuZGxlciA9IHJlcXVpcmUoJ0Avc2NyaXB0cy9pbnN0aXR1dGVIYW5kbGVyJyk7Cgptb2R1bGUuZXhwb3J0cy5pbml0ID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICB2YXIgZGF0YTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZiAoIWNvb2tpZSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gaW5zdGl0dXRlSGFuZGxlci5nZXRSb2xlcygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgZGF0YVN0b3JlLnJvbGVzID0gcmVzLm1vZHVsZSB8fCBbXTsKICAgICAgICAgICAgICBkYXRhU3RvcmUucm9sZURhdGEgPSByZXMuZGF0YSB8fCBbXTsKICAgICAgICAgICAgICBkYXRhU3RvcmUucm9sZVR5cGUgPSByZXMudHlwZSB8fCAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgZGF0YVN0b3JlLmlzVmFsaWRVc2VyID0gdHJ1ZTsKICAgICAgICAgIGRhdGEgPSBjb29raWU7CgogICAgICAgICAgaWYgKHBhcnNlSW50KGRhdGEucGxhbikgPT09IDQpIHsKICAgICAgICAgICAgZGF0YVN0b3JlLnByb2R1Y3RUeXBlID0gJ0Nvb3BlcmF0aXZlJzsKICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoZGF0YS5wbGFuKSA9PT0gMykgewogICAgICAgICAgICBkYXRhU3RvcmUucHJvZHVjdFR5cGUgPSAiQWR2YW5jZWQiOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChkYXRhLnBsYW4pID09PSAyKSB7CiAgICAgICAgICAgIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJQcmVtaXVtIjsKICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoZGF0YS5wbGFuKSA9PT0gNikgewogICAgICAgICAgICBkYXRhU3RvcmUucHJvZHVjdFR5cGUgPSAibnBvIjsKICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoZGF0YS5wbGFuKSA9PT0gNykgewogICAgICAgICAgICBkYXRhU3RvcmUucHJvZHVjdFR5cGUgPSAiUHVibGlzaCBTZWN0b3JzIjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICdTdGFuZGFyZCc7CiAgICAgICAgICB9IC8vIGRhdGFTdG9yZS5wcm9kdWN0VHlwZSA9ICJQdWJsaXNoIFNlY3RvcnMiOwogICAgICAgICAgLy8gZGF0YVN0b3JlLnByb2R1Y3RUeXBlID0gIm5wbyI7CgoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBkYXRhU3RvcmUuaXNWYWxpZFVzZXIgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuVlVFX0FQUF9NT0RFICE9PSAiZGV2IikgewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwczovL2Nvbm5lY3QuYmFuaGppLmNvbS8iOwogICAgICAgICAgfQoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgX2NhbGxlZSk7Cn0pKTs="},{"version":3,"sources":["/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/auth.js"],"names":["cookieJS","require","cookie","getCookie","dataStore","instituteHandler","module","exports","init","getRoles","then","res","roles","roleData","data","roleType","type","isValidUser","parseInt","plan","productType","process","env","VUE_APP_MODE","window","location","href"],"mappings":";;;;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAMC,MAAM,GAAGF,QAAQ,CAACG,SAAT,EAAf;;AACA,eAAoBF,OAAO,CAAC,oBAAD,CAA3B;AAAA,IAAOG,SAAP,YAAOA,SAAP;;AACA,IAAMC,gBAAgB,GAAGJ,OAAO,CAAC,4BAAD,CAAhC;;AACAK,MAAM,CAACC,OAAP,CAAeC,IAAf,wEAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACdN,MADc;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAERG,gBAAgB,CAACI,QAAjB,GAA4BC,IAA5B,CAAiC,UAAAC,GAAG,EAAI;AAC1C,gBAAIA,GAAJ,EAAS;AACLP,cAAAA,SAAS,CAACQ,KAAV,GAAkBD,GAAG,CAACL,MAAJ,IAAc,EAAhC;AACAF,cAAAA,SAAS,CAACS,QAAV,GAAqBF,GAAG,CAACG,IAAJ,IAAY,EAAjC;AACAV,cAAAA,SAAS,CAACW,QAAV,GAAqBJ,GAAG,CAACK,IAAJ,IAAY,CAAjC;AACH;AACJ,WANK,CAFQ;;AAAA;AASdZ,UAAAA,SAAS,CAACa,WAAV,GAAwB,IAAxB;AACIH,UAAAA,IAVU,GAUHZ,MAVG;;AAWd,cAAIgB,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAC3Bf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,aAAxB;AACH,WAFD,MAEO,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAClCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,UAAxB;AACH,WAFM,MAEA,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAClCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,SAAxB;AACH,WAFM,MAGF,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AAChCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,KAAxB;AACH,WAFI,MAEC,IAAIF,QAAQ,CAACJ,IAAI,CAACK,IAAN,CAAR,KAAwB,CAA5B,EAA+B;AACjCf,YAAAA,SAAS,CAACgB,WAAV,GAAwB,iBAAxB;AACH,WAFK,MAEC;AACHhB,YAAAA,SAAS,CAACgB,WAAV,GAAwB,UAAxB;AACH,WAxBa,CAyBd;AACA;;;AA1Bc;AAAA;;AAAA;AA4BdhB,UAAAA,SAAS,CAACa,WAAV,GAAwB,KAAxB;;AACA,cAAII,OAAO,CAACC,GAAR,CAAYC,YAAZ,KAA6B,KAAjC,EAAwC;AACpCC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,6BAAvB;AACH;;AA/Ba;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB","sourcesContent":["const cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\nconst {dataStore} = require('./observable/store');\nconst instituteHandler = require('@/scripts/instituteHandler')\nmodule.exports.init = async () => {\n    if (cookie) {\n        await instituteHandler.getRoles().then(res => {\n            if (res) {\n                dataStore.roles = res.module || []\n                dataStore.roleData = res.data || []\n                dataStore.roleType = res.type || 0\n            }\n        })\n        dataStore.isValidUser = true\n        let data = cookie\n        if (parseInt(data.plan) === 4) {\n            dataStore.productType = 'Cooperative'\n        } else if (parseInt(data.plan) === 3) {\n            dataStore.productType = \"Advanced\";\n        } else if (parseInt(data.plan) === 2) {\n            dataStore.productType = \"Premium\";\n        }\n        else if (parseInt(data.plan) === 6) {\n            dataStore.productType = \"npo\";\n        }else if (parseInt(data.plan) === 7) {\n            dataStore.productType = \"Publish Sectors\";\n        } else {\n            dataStore.productType = 'Standard'\n        }\n        // dataStore.productType = \"Publish Sectors\";\n        // dataStore.productType = \"npo\";\n    } else {\n        dataStore.isValidUser = false;\n        if (process.env.VUE_APP_MODE !== \"dev\") {\n            window.location.href = \"https://connect.banhji.com/\"\n        }\n    }\n}"]}]}
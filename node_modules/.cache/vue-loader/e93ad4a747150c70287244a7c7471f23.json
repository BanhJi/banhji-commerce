{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products/production/internal_usage/InternalUsage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products/production/internal_usage/InternalUsage.vue","mtime":1642155812699},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJzsKaW1wb3J0IExvYWRpbmdNZSBmcm9tICdAL2NvbXBvbmVudHMvTG9hZGluZycKaW1wb3J0IERhdGVQaWNrZXJDb21wb25lbnQgZnJvbSAnQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvRGF0ZVBpY2tlckNvbXBvbmVudCcKaW1wb3J0IE1vbnRoT2ZQaWNrZXIgZnJvbSAiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9Nb250aE9mUGlja2VyIjsKaW1wb3J0IEludGVyYWxVc2FnZSBmcm9tICJAL3NjcmlwdHMvbW9kZWwvSW50ZXJhbFVzYWdlIjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCB7IFNob3dSZXNvdXJjZSB9IGZyb20gJ0Avb2JzZXJ2YWJsZS9zdG9yZScKCmNvbnN0IGludGVyYWxVc2FnZU1vZGVsID0gbmV3IEludGVyYWxVc2FnZSh7fSkKY29uc3QgYmlsbGluZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaW52b2ljZS9oYW5kbGVyL2JpbGxpbmdIYW5kbGVyIikKY29uc3QgcHJlZml4SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcmVmaXhIYW5kbGVyIikKY29uc3Qgd2FyZWhvdXNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy93YXJlaG91c2VIYW5kbGVyIikKY29uc3Qgc2V0dGluZ3NIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NldHRpbmdzSGFuZGxlciIpCmNvbnN0IHNldHRpbmdIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NldHRpbmdIYW5kbGVyIikKY29uc3QgbG9jYXRpb25IYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2xvY2F0aW9uSGFuZGxlciIpCmNvbnN0IHNhbGVDaGFubmVsSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zYWxlQ2hhbm5lbEhhbmRsZXIiKQpjb25zdCBwcm9qZWN0SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcm9qZWN0SGFuZGxlciIpCmNvbnN0IHVvbVByaWNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy91b21QcmljZUhhbmRsZXIiKQpjb25zdCBwcm9kdWN0VmFyaWFudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcHJvZHVjdFZhcmlhbnRIYW5kbGVyIikKY29uc3QgYWNjb3VudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaGFuZGxlci9hY2NvdW50aW5nL2FjY291bnQiKQpjb25zdCBpbnRlcm5hbFVzYWdlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9pbnRlcm5hbFVzYWdlSGFuZGxlciIpCmNvbnN0IHN0b3JlID0gcmVxdWlyZSgiQC9pbnN0aXR1dGUiKTsKCmNvbnN0ICQgPSByZXF1aXJlKCJqcXVlcnkiKQpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiSW50ZXJuYWxVc2FnZSIsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgJ0xvYWRpbmdNZSc6IExvYWRpbmdNZSwKICAgICAgICAnYXBwLWRhdGVwaWNrZXInOiBEYXRlUGlja2VyQ29tcG9uZW50LAogICAgICAgICJhcHAtbW9udGhwaWNrZXIiOiBNb250aE9mUGlja2VyLAogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgdG90YWxDb3N0KCkgewogICAgICAgICAgICBpZiAodGhpcy5jb3N0SVAgIT09IDAgfHwgdGhpcy5jb3N0SUEgIT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvc3RJUCArIHRoaXMuY29zdElBCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCiAgICBkYXRhOiAoKSA9PiAoewogICAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgICAgLy8gTG9hZGluZ01lCiAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgIGxvYWRpbmdBbGVydDogZmFsc2UsCiAgICAgICAgbG9hZGluZ0NvbG9yQWxlcnQ6ICcnLAogICAgICAgIGxvYWRpbmdUZXh0QWxlcnQ6ICcnLAogICAgICAgIGJpbGxfZGF0ZTogJycsCiAgICAgICAgYWxlcnQ6IGZhbHNlLAogICAgICAgIGRlcG9zaXRlOiAxMDAwLAogICAgICAgIGZpbGVzOiBbXSwKICAgICAgICAvLyBGb3JtIHZhbGlkYXRpb24KICAgICAgICB2YWxpZDogdHJ1ZSwKCiAgICAgICAgam91cm5hbF90eXBlczogW10sCiAgICAgICAgc3VwcGxpZXJzX2l0ZW06IFtdLAogICAgICAgIGV4cGVuc2U6IFsKICAgICAgICAgICAgJ0VxdWFsJywKICAgICAgICAgICAgJ3dlaWdodGVkJwogICAgICAgIF0sCiAgICAgICAgam91cm5hbF9kYXRlOiAiIiwKICAgICAgICB0ZW1wbGF0ZXM6IFt7CiAgICAgICAgICAgIHRpdGxlOiAnRHJhZnQnCiAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICdPcGVuJwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ1BhaWQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnUGFydGlhbGx5IFBhaWQnCiAgICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBjb2xfZXhwYW5kOiA5LAogICAgICAgIGNvbF9oaWRlOiAzLAogICAgICAgIGlzSGlkZUJhcjogZmFsc2UsCiAgICAgICAgc3VwcGxpZXJzOiBbIlN1cHBsaWVycyIsICJDdXN0b21lciIsICJFbXBsb3llZSJdLAogICAgICAgIHRyYW5zYWN0aW9uOiBbewogICAgICAgICAgICBpZDogIjEyIiwKICAgICAgICAgICAgbmFtZTogIlB1cmNoYXNlIE9yZGVyIiwKICAgICAgICAgICAgbm86ICJOby4wMDI0IiwKICAgICAgICAgICAgcHJpY2U6ICIyLDUwMDAwIiwKICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZDogIjE0IiwKICAgICAgICAgICAgICAgIG5hbWU6ICJHb2RkIFJlY2lwdCBOb3RlIiwKICAgICAgICAgICAgICAgIG5vOiAiTm8uMDAyNCIsCiAgICAgICAgICAgICAgICBwcmljZTogIjIsNTAwMDAiLAogICAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBpdGVtX3N1cHBsaWVyczogW3sKICAgICAgICAgICAgbmFtZTogIlN1YnRvdGFsIiwKICAgICAgICAgICAgdmFsdWU6ICIxMDAwMC4wMCIKICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiAiU3VidG90YWwiLAogICAgICAgICAgICAgICAgdmFsdWU6ICIxMDAwMC4wMCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZTogIlN1YnRvdGFsIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAiMTAwMDAuMDAiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6ICJTdWJ0b3RhbCIsCiAgICAgICAgICAgICAgICB2YWx1ZTogIjEwMDAwLjAwIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiAiU3VidG90YWwiLAogICAgICAgICAgICAgICAgdmFsdWU6ICIxMDAwMC4wMCIKICAgICAgICAgICAgfSwKICAgICAgICBdLAoKICAgICAgICBpbnRlcmFsVXNhZ2U6IGludGVyYWxVc2FnZU1vZGVsLAogICAgICAgIHdhcmVob3VzZXM6IFtdLAogICAgICAgIHNlZ21lbnRzOiBbXSwKICAgICAgICBsb2NhdGlvbnM6IFtdLAogICAgICAgIHNhbGVDaGFubmVsTGlzdDogW10sCiAgICAgICAgcHJvamVjdHM6IFtdLAoKICAgICAgICBpdGVtTGluZXNJUDogaW50ZXJhbFVzYWdlTW9kZWwucHJvZHVjdCwKICAgICAgICBpdGVtTGluZXNJQTogaW50ZXJhbFVzYWdlTW9kZWwuYWNjb3VudHMsCiAgICAgICAgaXRlbUxpbmVzQ1U6IGludGVyYWxVc2FnZU1vZGVsLmNvbXBvbmVudHNVc2VkLAogICAgICAgIGl0ZW1MaW5lSVA6IFtdLAogICAgICAgIGl0ZW1MaW5lSUE6IFtdLAogICAgICAgIGl0ZW1MaW5lQ1U6IFtdLAogICAgICAgIGFjY291bnRzOiBbXSwKICAgICAgICBjb3N0SVA6IDAsCiAgICAgICAgY29zdElBOiAwLAogICAgICAgIHZhdFRheDogW10sCiAgICB9KSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBIZWxwKGtlX3NlYXJjaCl7CiAgICAgICAgICAgIFNob3dSZXNvdXJjZShrZV9zZWFyY2gpCiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkVGF4KCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nSGFuZGxlci5nZXQoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGF4ID0gcmVzCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMub3RoZXJUYXggPSB0aGlzLnRheC5maWx0ZXIobSA9PiBtLnRheFR5cGUudHlwZUlkID09PSA3KSAvLyB2YWx1YWJsZSB0YXgKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zcGVjaWZpY1RheCA9IHRoaXMudGF4LmZpbHRlcihtID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDggJiYgbS50cmFuc2FjdGlvblR5cGUgPT09ICdTYWxlJykgLy8gdmFsdWFibGUgdGF4CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMucHVibGljTGlnaHRpbmdUYXggPSB0aGlzLnRheC5maWx0ZXIobSA9PiBtLnRheFR5cGUudHlwZUlkID09PSA5ICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAnU2FsZScpIC8vIHZhbHVhYmxlIHRheAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhdFRheCA9IHRoaXMudGF4LmZpbHRlcihtID0+IChtLnRheFR5cGUudHlwZUlkID09PSAxIHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDIpICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAnUHVyY2hhc2UnKSAvLyB2YWx1YWJsZSB0YXgKCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIDMwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRBY2NvdW50KCkgewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICAvLyBVc2UgcmVtb3RlIGRhdGEKICAgICAgICAgICAgaWYgKHN0b3JlLmRlZmF1bHQuc3RhdGUuYWNjb3VudHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBhd2FpdCBhY2NvdW50SGFuZGxlci5nZXRBbGwoKQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMsICdhY2NvdW50JykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50cyA9IHJlcwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuYWNjb3VudHMgPSBzdG9yZS5kZWZhdWx0LnN0YXRlLmFjY291bnRzCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRQcm9qZWN0cygpIHsKICAgICAgICAgICAgYXdhaXQgcHJvamVjdEhhbmRsZXIubGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMucHJvamVjdHMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UucHJvamVjdCA9IHRoaXMucHJvamVjdHNbMF0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRTZWdtZW50KCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRzID0gW10KICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0hhbmRsZXIuZ2V0U2VnKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWdtZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2Uuc2VnbWVudCA9IHRoaXMuc2VnbWVudHNbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VnbWVudExpc3QgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAzMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkTG9jYXRpb24oKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb25zID0gW10KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkhhbmRsZXIubGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9ucyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvY2F0aW9ucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UubG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uc1swXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMzAwKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFNhbGVDaGFubmVsKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICBzYWxlQ2hhbm5lbEhhbmRsZXIuZ2V0KCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FsZUNoYW5uZWxMaXN0ID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2FsZUNoYW5uZWxMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVyYWxVc2FnZS5zYWxlQ2hhbm5lbCA9IHRoaXMuc2FsZUNoYW5uZWxMaXN0WzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlUm93T0MoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGNvbnN0IGdyaWQgPSBrZW5kby5qUXVlcnkoIiNncmlkT3RoZXJDb3N0IikuZGF0YSgia2VuZG9HcmlkIiksCiAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gZ3JpZC5kYXRhU291cmNlLAogICAgICAgICAgICAgICAgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKTsKCiAgICAgICAgICAgIGlmIChkYXRhU291cmNlLnRvdGFsKCkgPiAxKSB7CiAgICAgICAgICAgICAgICBkYXRhU291cmNlLnJlbW92ZShkYXRhSXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRXYXJlaG91c2VzKCkgewogICAgICAgICAgICB3YXJlaG91c2VIYW5kbGVyLmdldFdhcmVob3VzZVNldHRpbmdBbGwoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLndhcmVob3VzZXMgPSByZXMKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRQcmVmaXgoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBwcmVmaXhIYW5kbGVyLmdldCgnaW50ZXJuYWwgdXNhZ2UnKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblR5cGVzID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25UeXBlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UudHJhbnNhY3Rpb25UeXBlID0gdGhpcy50cmFuc2FjdGlvblR5cGVzWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVOdW1iZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdlbmVyYXRlTnVtYmVyKCkgewogICAgICAgICAgICBpZiAodGhpcy5pbnRlcmFsVXNhZ2UuZGF0ZSAhPT0gJycpIHsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIGFiYnI6IHRoaXMuaW50ZXJhbFVzYWdlLnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZTogdGhpcy5pbnRlcmFsVXNhZ2UudHJhbnNhY3Rpb25UeXBlLnN0cnVjdHVyZSwKICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkRhdGU6IHRoaXMuaW50ZXJhbFVzYWdlLmRhdGUsCiAgICAgICAgICAgICAgICAgICAgc2VxdWNlbmNpbmc6IHRoaXMuaW50ZXJhbFVzYWdlLnRyYW5zYWN0aW9uVHlwZS5zZXF1Y2VuY2luZywKICAgICAgICAgICAgICAgICAgICBwcmVmaXhTZXBhcmF0b3I6IHRoaXMuaW50ZXJhbFVzYWdlLnRyYW5zYWN0aW9uVHlwZS5wcmVmaXhTZXBhcmF0b3IgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyU2VwYXJhdG9yOiB0aGlzLmludGVyYWxVc2FnZS50cmFuc2FjdGlvblR5cGUubnVtYmVyU2VwYXJhdG9yIHx8ICcnLAogICAgICAgICAgICAgICAgICAgIGZvcm1hdDogdGhpcy5pbnRlcmFsVXNhZ2UudHJhbnNhY3Rpb25UeXBlLmZvcm1hdCB8fCA1LAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdJbnRlcm5hbCBVc2FnZScsCiAgICAgICAgICAgICAgICAgICAgZW50aXR5OiAyLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UuYWJiciA9IGRhdGEuYWJicgogICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2Uuc3RydWN0dXJlID0gZGF0YS5zdHJ1Y3R1cmUKICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJhbFVzYWdlLnNlcXVjZW5jaW5nID0gZGF0YS5zZXF1Y2VuY2luZwogICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UudHJhbnNhY3Rpb25EYXRlID0gZGF0YS50cmFuc2FjdGlvbkRhdGUKICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJhbFVzYWdlLnR5cGUgPSBkYXRhLnR5cGUKICAgICAgICAgICAgICAgIGF3YWl0IGJpbGxpbmdIYW5kbGVyLmxhc3ROdW1iZXIoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YS5sYXN0TnVtYmVyLCAnbGFzdG51bWJlcicpCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TnVtYmVyID0gdGhpcy56ZXJvUGFkKHBhcnNlSW50KHJlcy5sYXN0TnVtYmVyKSwgdGhpcy5pbnRlcmFsVXNhZ2UudHJhbnNhY3Rpb25UeXBlLmZvcm1hdCkKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtYmVyID0gcmVzLnN1ZmZpeCArIHRoaXMuaW50ZXJhbFVzYWdlLnRyYW5zYWN0aW9uVHlwZS5udW1iZXJTZXBhcmF0b3IgKyBsYXN0TnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJhbFVzYWdlLm51bWJlciA9IG51bWJlcgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVyYWxVc2FnZS5sYXN0TnVtYmVyID0gcmVzLnN1ZmZpeCArIGxhc3ROdW1iZXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGUpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB6ZXJvUGFkKG51bSwgcGxhY2VzKSB7CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICcwJykKICAgICAgICB9LAogICAgICAgIHJvd051bWJlcklQKGRhdGFJdGVtKSB7CiAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMucHJvZHVjdERTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICAgICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0RGF0YVNvdXJjZSgpIHsKICAgICAgICAgICAgbGV0IGRzRlAgPSB0aGlzLiRyZWZzLnByb2R1Y3REUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgZGF0YVJvd0ZQID0gZHNGUC5kYXRhKCkKICAgICAgICAgICAgdGhpcy5pdGVtTGluZUlQID0gW10KICAgICAgICAgICAgZGF0YVJvd0ZQLmZvckVhY2goaSA9PiB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coaSwgJ2l0ZW0nKQogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGkuaXRlbSwgJzIxMzQnKQogICAgICAgICAgICAgICAgdGhpcy5pdGVtTGluZUlQLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkOiBpLmlkLAogICAgICAgICAgICAgICAgICAgIGl0ZW06IGkuaXRlbSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogaS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICB1b206IGkudW9tLAogICAgICAgICAgICAgICAgICAgIHlpZWxkX3F0eTogaS55aWVsZF9xdHksCiAgICAgICAgICAgICAgICAgICAgY29zdDogaS5jb3N0LAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuaXRlbUxpbmVJUFswXS5pdGVtLCAnaXRlbTIxNDM1JykKICAgICAgICAgICAgbGV0IGRzSUEgPSB0aGlzLiRyZWZzLmFjY291bnREUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgZGF0YVJvd09QID0gZHNJQS5kYXRhKCkKICAgICAgICAgICAgdGhpcy5pdGVtTGluZUlBID0gW10KICAgICAgICAgICAgZGF0YVJvd09QLmZvckVhY2goaSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1MaW5lSUEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGkuaWQsCiAgICAgICAgICAgICAgICAgICAgaXRlbTogaS5pdGVtLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgIGFtb3VudDogaS5hbW91bnQsCiAgICAgICAgICAgICAgICAgICAgdGF4OiBpLnRheAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgbGV0IGRzQ1UgPSB0aGlzLiRyZWZzLmNvbXBvbmVudFVzZWREUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgZGF0YVJvd0NVID0gZHNDVS5kYXRhKCkKICAgICAgICAgICAgdGhpcy5pdGVtTGluZUNVID0gW10KICAgICAgICAgICAgZGF0YVJvd0NVLmZvckVhY2goaSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1MaW5lQ1UucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGkuaWQsCiAgICAgICAgICAgICAgICAgICAgaXRlbTogaS5pdGVtLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgIHVvbTogaS51b20sCiAgICAgICAgICAgICAgICAgICAgcXR5OiBpLnF0eSwKICAgICAgICAgICAgICAgICAgICBjb3N0OiBpLmNvc3QsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZGF0YVNvdXJjZUNoYW5nZWRJUChlKSB7CiAgICAgICAgICAgIGlmIChlLmZpZWxkKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YVJvdyA9IGUuaXRlbXNbMF0KICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5maWVsZCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgImNvc3QiOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvc3RJUCA9IGRhdGFSb3cuY29zdAogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGNhc2UgIml0ZW0iOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgnZGVzY3JpcHRpb24nLCBkYXRhUm93Lml0ZW0uZGVzY3JpcHRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRhdGFTb3VyY2VDaGFuZ2VkSUEoZSkgewogICAgICAgICAgICBpZiAoZS5maWVsZCkgewogICAgICAgICAgICAgICAgbGV0IGRhdGFSb3cgPSBlLml0ZW1zWzBdCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuZmllbGQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJhbW91bnQiOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvc3RJQSA9IGtlbmRvLnBhcnNlRmxvYXQoZGF0YVJvdy5hbW91bnQpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdGF4VGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCd2YXQnLCBkYXRhSXRlbS50YXgpCiAgICAgICAgICAgIGNvbnN0IHZhdCA9IGRhdGFJdGVtLnRheAogICAgICAgICAgICBpZiAodmF0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYDxzcGFuPiR7dmF0LmRlZmF1bHRUYXggPyB2YXQuZGVmYXVsdFRheCA6IGBgfTwvc3Bhbj5gCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYGAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgVGF4RHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgICAgICAgICAgLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICAgICAgICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVRleHRGaWVsZDogImRlZmF1bHRUYXgiLAogICAgICAgICAgICAgICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxhYmVsOiAiLS1TZWxlY3QtLSIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMudmF0VGF4CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhY2NvdW50VGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgY29uc3QgYWNjID0gZGF0YUl0ZW0uYWNjb3VudAogICAgICAgICAgICBpZiAoYWNjKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYDxzcGFuPiR7YWNjLm5hbWUgPyBhY2MubmFtZSA6IGBgfTwvc3Bhbj5gCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYGAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgVU9NRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgICAgICAgICAgLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICAgICAgICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVRleHRGaWVsZDogInVvbS50b1VPTS5uYW1lIiwKICAgICAgICAgICAgICAgICAgICBkYXRhVmFsdWVGaWVsZDogInVvbS50b1VPTS5pZCIsCiAgICAgICAgICAgICAgICAgICAgY2FzY2FkZUZyb206ICJpdGVtIiwKICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9dW9tLnRvVU9NLm5hbWUjPC9zcGFuPiIsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckZpbHRlcmluZzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1b21QcmljZUhhbmRsZXIuZ2V0VXJsKG9wdGlvbnMubW9kZWwuaXRlbS5pZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiaWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDoge3R5cGU6ICJzdHJpbmcifSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmFtZToge3R5cGU6ICJzdHJpbmcifSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2t1OiB7dHlwZTogInN0cmluZyJ9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb3VudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhOiB0aGlzLnZhcmlhbnRzCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgVU9NVGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgY29uc3QgdW9tID0gZGF0YUl0ZW0udW9tCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIGlmICh1b20pIHsKICAgICAgICAgICAgICAgIHJldHVybiBgPHNwYW4+JHt1b20udW9tID8gdW9tLnVvbS50b1VPTS5uYW1lIDogYGB9PC9zcGFuPmAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBgYAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBVT01UZW1wbGF0ZUNVKGRhdGFJdGVtKSB7CiAgICAgICAgICAgIGNvbnN0IHVvbSA9IGRhdGFJdGVtLnVvbQogICAgICAgICAgICAvLwogICAgICAgICAgICBpZiAodW9tKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYDxzcGFuPiR7dW9tLnVvbSA/IHVvbS51b20udG9VT00ubmFtZSA6IGBgfTwvc3Bhbj5gCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYGAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgSXRlbURyb3BEb3duRWRpdG9yVFAoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgICAgICAgICAgLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICAgICAgICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAiY29udGFpbnMiLAogICAgICAgICAgICAgICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICAgICAgICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJUZW1wbGF0ZTogJzxkaXYgY2xhc3M9ImRyb3Bkb3duLWhlYWRlciBrLXdpZGdldCBrLWhlYWRlciI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3Bhbj5JdGVtcyA8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3Bhbj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1uYW1lIzwvc3Bhbj4iLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJGaWx0ZXJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcHJvZHVjdFZhcmlhbnRIYW5kbGVyLnNlYXJjaFVSTCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogImlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHt0eXBlOiAic3RyaW5nIn0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHt0eXBlOiAic3RyaW5nIn0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNrdToge3R5cGU6ICJzdHJpbmcifSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhOiB0aGlzLnZhcmlhbnRzCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgSXRlbURyb3BEb3duRWRpdG9yQ1UoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgICAgICAgICAgLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICAgICAgICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAiY29udGFpbnMiLAogICAgICAgICAgICAgICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICAgICAgICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJUZW1wbGF0ZTogJzxkaXYgY2xhc3M9ImRyb3Bkb3duLWhlYWRlciBrLXdpZGdldCBrLWhlYWRlciI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3Bhbj5JdGVtcyA8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3Bhbj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1uYW1lIzwvc3Bhbj4iLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJGaWx0ZXJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcHJvZHVjdFZhcmlhbnRIYW5kbGVyLml0ZW1TZWFyY2hVUkwoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB7dHlwZTogInN0cmluZyJ9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7dHlwZTogInN0cmluZyJ9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza3U6IHt0eXBlOiAic3RyaW5nIn0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YTogdGhpcy52YXJpYW50cwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGl0ZW1UZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICAgICAgICBjb25zdCBpdGVtID0gZGF0YUl0ZW0uaXRlbQogICAgICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGA8c3Bhbj4ke2l0ZW0ubmFtZSA/IGl0ZW0ubmFtZSA6IGBgfTwvc3Bhbj5gCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYGAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWRkUm93UHJvZHVjdCgpIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5wcm9kdWN0RFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKICAgICAgICAgICAgZHMuaW5zZXJ0KHRvdGFsLCB0aGlzLml0ZW1MaW5lc0lQKQogICAgICAgIH0sCiAgICAgICAgYWRkUm93QWNjb3VudCgpIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5hY2NvdW50RFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKQogICAgICAgICAgICBkcy5pbnNlcnQodG90YWwsIHRoaXMuaXRlbUxpbmVzVEEpCiAgICAgICAgfSwKICAgICAgICByb3dOdW1iZXJJQShkYXRhSXRlbSkgewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmFjY291bnREUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgICAgICB9LAogICAgICAgIGFkZFJvd0NvbXBvbmVudFVzZSgpIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5jb21wb25lbnRVc2VkRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKQogICAgICAgICAgICBkcy5pbnNlcnQodG90YWwsIHRoaXMuaXRlbUxpbmVzQ1UpCiAgICAgICAgfSwKICAgICAgICByb3dOdW1iZXJDVShkYXRhSXRlbSkgewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmNvbXBvbmVudFVzZWREUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgICAgICB9LAogICAgICAgIHNhdmVQcmludCgpIHsKCiAgICAgICAgfSwKICAgICAgICBhc3luYyBzYXZlTmV3KCkgewogICAgICAgICAgICBhd2FpdCB0aGlzLmdldERhdGFTb3VyY2UoKQogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy5pdGVtTGluZXNJUCkKICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UudG90YWxDb3N0ID0gdGhpcy50b3RhbENvc3QKICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UucHJvZHVjdCA9IHRoaXMuaXRlbUxpbmVJUAogICAgICAgICAgICB0aGlzLmludGVyYWxVc2FnZS5hY2NvdW50cyA9IHRoaXMuaXRlbUxpbmVJQQogICAgICAgICAgICB0aGlzLmludGVyYWxVc2FnZS5jb21wb25lbnRzVXNlZCA9IHRoaXMuaXRlbUxpbmVDVQogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy5pbnRlcmFsVXNhZ2UpCiAgICAgICAgICAgIGF3YWl0IGludGVybmFsVXNhZ2VIYW5kbGVyLmNyZWF0ZSh0aGlzLmludGVyYWxVc2FnZSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIHNhdmVDbG9zZSgpIHsKICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXREYXRhU291cmNlKCkKICAgICAgICAgICAgdGhpcy5pbnRlcmFsVXNhZ2UudG90YWxDb3N0ID0gdGhpcy50b3RhbENvc3QKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuaW50ZXJhbFVzYWdlKQogICAgICAgICAgICBhd2FpdCBpbnRlcm5hbFVzYWdlSGFuZGxlci5jcmVhdGUodGhpcy5pbnRlcmFsVXNhZ2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICByZW1vdmVSb3coKSB7CiAgICAgICAgfSwKICAgICAgICBlcnJvck1lc3NhZ2UoKSB7CgogICAgICAgIH0sCiAgICAgICAgYWRkUm93KCkgewogICAgICAgIH0sCiAgICAgICAgYWNjb3VudERyb3BEb3duRWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICAgICAgICAvLyBEZWZpbmQgb3JkZXJpbmcgYnkgbnVtYmVyCiAgICAgICAgICAgIGxldCBjb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgIGlmIChhLml0ZW1zWzBdLm51bWJlciA9PT0gYi5pdGVtc1swXS5udW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5pdGVtc1swXS5udW1iZXIgPiBiLml0ZW1zWzBdLm51bWJlcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIERlZmluZCBkZWZhdWx0IGdyb3VwCiAgICAgICAgICAgIGxldCBncm91cCA9IHsKICAgICAgICAgICAgICAgIGZpZWxkOiAiYWNjb3VudF90eXBlLm5hbWUiLAogICAgICAgICAgICAgICAgY29tcGFyZTogY29tcGFyZQogICAgICAgICAgICB9OwogICAgICAgICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCByZXF1aXJlZCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKQogICAgICAgICAgICAgICAgLmFwcGVuZFRvKGNvbnRhaW5lcikKICAgICAgICAgICAgICAgIC5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgICAgICAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLAogICAgICAgICAgICAgICAgICAgIGZpbHRlcjogInN0YXJ0c3dpdGgiLAogICAgICAgICAgICAgICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICAgICAgICAgICAgICBkYXRhVmFsdWVGaWVsZDogInV1aWQiLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmFjY291bnRzLAogICAgICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkuZGF0YSgia2VuZG9Ecm9wRG93bkxpc3QiKTsKICAgICAgICB9LAogICAgICAgIGNhbmNlbCgpIHsKICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogaTE4bi50KCdtc2dfdGl0bGVfd2FybmluZycpLAogICAgICAgICAgICAgICAgdGV4dDogaTE4bi50KCdtc2dfZGlzY2FyZCcpLAogICAgICAgICAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IGkxOG4udCgnY2FuY2VsJyksCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI0VEMUEzQSIsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogaTE4bi50KCdkaXNjYXJkJyksCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdENlbikgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdENlbi52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaGlkZV9zbWFsbHNpdGViYXIoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc0hpZGVCYXIpIHsKICAgICAgICAgICAgICAgIC8vIHRoaXMuY29sX2V4cGFuZCA9IDEyCiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbF9oaWRlID0gMAogICAgICAgICAgICAgICAgdGhpcy5pc0hpZGVCYXIgPSB0cnVlCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbF9leHBhbmQgPSA5CiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbF9oaWRlID0gMwogICAgICAgICAgICAgICAgdGhpcy5pc0hpZGVCYXIgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgLy8gY2FsbCBhZ2FpbiB0aGUgbWV0aG9kIGlmIHRoZSByb3V0ZSBjaGFuZ2VzCgogICAgfSwKICAgIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQWNjb3VudCgpCiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgICBhd2FpdCB0aGlzLmxvYWRQcmVmaXgoKQogICAgICAgIGF3YWl0IHRoaXMubG9hZFdhcmVob3VzZXMoKQogICAgICAgIGF3YWl0IHRoaXMubG9hZFRheCgpCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkTG9jYXRpb24oKQogICAgICAgIGF3YWl0IHRoaXMubG9hZFByb2plY3RzKCkKICAgICAgICBhd2FpdCB0aGlzLmxvYWRTYWxlQ2hhbm5lbCgpCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2VnbWVudCgpCiAgICB9LAp9Owo="},{"version":3,"sources":["InternalUsage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0bA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InternalUsage.vue","sourceRoot":"src/views/products/production/internal_usage","sourcesContent":["<!--\n  - Last modified : 3/2/21, 3:38 PM in Project banhji-accounting-web-module\n  - Copyright (c) 2021. Chandarith Chea under Company BanhJi Fintech Co., Ltd\n  - Facebook Profile : https://www.facebook.com/profile.php?id=100011194806947\n  - Github Profile : https://github.com/Darith-Mokpost\n  - Instagram Profile : https://www.instagram.com/chandarith_chea\n  -->\n\n<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col sm=\"12\" cols=\"12\">\n                    <v-card outlined dense class=\"pa-4 no_border rounded-sm\" color=\"white\">\n                        <v-row>\n                            <v-col class=\"bigSide py-0\" sm=\"8\" cols=\"12\" style=\"transition: .3s ease-in;\"\n                                   :class=\"{'hide_big_bar_class':isHideBar}\">\n                                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                                    <v-card outlined dense class=\"no_border\">\n                                        <h2 class=\"mb-0\">{{ $t('internal_usage') }}</h2>\n                                        <v-icon v-if=\"isHideBar\" \n                                            @click=\"cancel()\"\n                                            style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                            class=\"float-right\">close\n                                        </v-icon>\n                                        <span style=\"transition: .3s ease-in; z-index:10;\"\n                                              :class=\"{'iconArrow': !isHideBar,'iconArrowHide': isHideBar }\">\n                                        <v-icon size=\"22\" class=\"arr_icon\" @click=\"hide_smallsitebar\" v-if=\"isHideBar\"> fa fa-chevron-circle-left\n                                        </v-icon>\n                                        <v-icon size=\"22\" class=\"arr_icon\" @click=\"hide_smallsitebar\" v-if=\"!isHideBar\"> fa fa-chevron-circle-right\n                                        </v-icon>\n                                    </span>\n                                    </v-card>\n                                    <v-card outlined dense class=\"px-3 no_border\" color=\"grayBg\" height=\"90px\">\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{ $t('internal_usage_no') }}</label>\n                                                <v-row class=\"mt-1 mr-0\">\n                                                    <v-col sm=\"3\" cols=\"3\" class=\"py-0 pr-0\">\n                                                        <div class=\"code_text text-uppercase\"> {{\n                                                                interalUsage.abbr\n                                                            }}\n                                                        </div>\n                                                    </v-col>\n                                                    <v-col sm=\"7\" cols=\"7\" class=\"pt-0 pl-0 pr-1\">\n                                                        <v-text-field\n                                                            disabled\n                                                            class=\"custom-border\"\n                                                            v-model=\"interalUsage.number\"\n                                                            tage=\"Product Order Number\"\n                                                            outlined\n                                                            :rules=\"[(v) => !!v || 'Number is required']\"\n                                                            required\n                                                        />\n                                                    </v-col>\n                                                    <v-col sm=\"2\" cols=\"2\" class=\"pt-0 px-0\">\n                                                        <v-icon\n                                                            color=\"black\"\n                                                            size=\"30\"\n                                                            class=\"border_qrcode\"\n                                                            @click=\"generateNumber\"\n                                                        >mdi-qrcode\n                                                        </v-icon>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-col>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{ $t('date') }}</label>\n                                                <app-datepicker :initialDate=\"interalUsage.date\"\n                                                                @emitDate=\"interalUsage.date = $event\"/>\n                                            </v-col>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\"\n                                                       style=\"\">{{ $t('default_warehouse') }}</label>\n                                                <v-select class=\"mt-1\"\n                                                          :items=\"warehouses\"\n                                                          v-model=\"interalUsage.warehouse\"\n                                                          item-value=\"id\"\n                                                          item-text=\"name\"\n                                                          return-object\n                                                          :placeholder=\"$t('warehouse')\"\n                                                          tage=\"Default Warehouse\"\n                                                          outlined/>\n                                            </v-col>\n                                        </v-row>\n                                    </v-card>\n                                    <!-- Grid One -->\n                                    <v-row style=\"background-color: #fff;\">\n                                        <v-col cols=\"12\" class=\"pb-0\">\n                                            <h2 class=\"primary--text mb-0 font_20\">\n                                                {{ $t('internal_usage_products') }}</h2>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                                            <kendo-datasource ref=\"productDS\" :change=\"dataSourceChangedIP\" :data=\"interalUsage.product\"/>\n                                            <kendo-grid id=\"gridProduct\" class=\"grid-function\"\n                                                        :data-source-ref=\"'productDS'\"\n                                                        :sortable=\"false\" :filterable=\"false\" :column-menu=\"true\"\n                                                        :editable=\"true\" :scrollable-virtual=\"true\">\n                                                <kendo-grid-column :template=\"rowNumberIP\" :title=\"$t('no.')\"\n                                                                   :width=\"55\" :column-menu=\"false\"\n                                                                   :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5;',\n                                                    class: 'text-variants'\n                                                }\" :attributes=\"{\n                                                    style: 'text-align: variants'\n                                                }\"/>\n                                                <kendo-grid-column :field=\"'item'\" :title=\"$t('items')\" :width=\"200\"\n                                                                   :template=\"itemTemplate\"\n                                                                   :editor=\"ItemDropDownEditorTP\" :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n                                                <kendo-grid-column :field=\"'description'\" :title=\"$t('description')\"\n                                                                   :width=\"200\" :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n                                                <kendo-grid-column :field=\"'uom'\" :title=\"$t('uom')\"\n                                                                   :template=\"UOMTemplate\"\n                                                                   :editor=\"UOMDropDownEditor\"\n                                                                   :width=\"150\"\n                                                                   :headerAttributes=\"{style: 'text-align: right; background-color: #EDF1F5'}\"\n                                                                   :attributes=\"{style: 'text-align: right; '}\"/>\n                                                <kendo-grid-column :field=\"'yield_qty'\" :title=\"$t('yield_qty')\"\n                                                                   :format=\"'{0:n}'\" :width=\"150\" :headerAttributes=\"{\n                                                        style: 'text-align: right; background-color: #EDF1F5'\n                                                    }\" :attributes=\"{\n                                                        style: 'text-align: right'\n                                                    }\"/>\n                                                <kendo-grid-column :field=\"'cost'\" :title=\"$t('cost')\" :format=\"'{0:n}'\"\n                                                                   :width=\"150\" :headerAttributes=\"{\n                                                        style: 'text-align: right; background-color: #EDF1F5'\n                                                    }\" :attributes=\"{\n                                                        style: 'text-align: right'\n                                                    }\"/>\n                                                <!--                                                <kendo-grid-column-->\n                                                <!--                                                        :command=\"{ iconClass: 'k-icon k-i-trash', text: 'Delete', click: removeRow, class: 'btn-plus' }\"-->\n                                                <!--                                                        :title=\"'&nbsp;'\" :width=\"100\" :headerAttributes=\"{-->\n                                                <!--                                                    style: 'text-align: right; background-color: #EDF1F5'-->\n                                                <!--                                                }\"/>-->\n                                            </kendo-grid>\n                                        </v-col>\n\n                                    </v-row>\n                                    <!-- Grid Two -->\n                                    <v-row style=\"background-color: #fff;\">\n                                        <v-col cols=\"12\" class=\"pb-0\">\n                                            <h2 class=\"primary--text mb-0 font_20\">\n                                                {{ $t('intented_usage_accounts') }}</h2>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                                            <kendo-datasource ref=\"accountDS\" :change=\"dataSourceChangedIA\" :data=\"interalUsage.accounts\"/>\n                                            <kendo-grid id=\"gridAccount\" class=\"grid-function\"\n                                                        :data-source-ref=\"'accountDS'\"\n                                                        :sortable=\"false\" :filterable=\"false\" :column-menu=\"true\"\n                                                        :editable=\"true\" :scrollable-virtual=\"true\">\n                                                <kendo-grid-column :template=\"rowNumberIA\" :title=\"$t('no.')\"\n                                                                   :width=\"55\" :column-menu=\"false\"\n                                                                   :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5;',\n                                                    class: 'text-variants'\n                                                }\" :attributes=\"{\n                                                    style: 'text-align: variants'\n                                                }\"/>\n                                                <kendo-grid-column :field=\"'account'\" :title=\"$t('account')\"\n                                                                   :width=\"200\" :template=\"accountTemplate\"\n                                                                   :editor=\"accountDropDownEditor\" :headerAttributes=\"{\n                                                            style: 'background-color: #EDF1F5'\n                                                        }\"/>\n                                                <kendo-grid-column :field=\"'description'\" :title=\"$t('description')\"\n                                                                   :width=\"200\" :headerAttributes=\"{\n                                                            style: 'background-color: #EDF1F5'\n                                                        }\"/>\n                                                <kendo-grid-column :field=\"'amount'\" :title=\"$t('amount')\" :width=\"160\"\n                                                                   :format=\"'{0:n}'\"\n                                                                   :headerAttributes=\"{\n                                                            style: 'background-color: #EDF1F5'\n                                                        }\"/>\n                                                <kendo-grid-column :field=\"'tax'\" :title=\"$t('tax')\"\n                                                                   :editor=\"TaxDropDownEditor\"\n                                                                   :template=\"taxTemplate\"\n                                                                   :width=\"150\" :headerAttributes=\"{\n                                                                style: 'text-align: right; background-color: #EDF1F5'\n                                                            }\" :attributes=\"{\n                                                                style: 'text-align: right'\n                                                            }\"/>\n                                                <kendo-grid-column\n                                                    :command=\"{ iconClass: 'k-icon k-i-trash', text: 'Delete', click: removeRowOC, class: 'btn-plus' }\"\n                                                    :title=\"'&nbsp;'\" :width=\"100\" :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\"/>\n                                            </kendo-grid>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                            <v-btn @click=\"addRowAccount\" class=\"float-left btn_plus rounded-0 mr-2\">\n                                                <v-icon size=\"\" class=\"ma-1\">fa-plus</v-icon>\n                                            </v-btn>\n                                            <!--                                            <v-btn class=\"float-left btn_plus rounded-0 mr-2\">-->\n                                            <!--                                                <v-icon size=\"\" class=\"ma-1\">fa fa-barcode</v-icon>-->\n                                            <!--                                            </v-btn>-->\n                                        </v-col>\n                                    </v-row>\n                                    <!-- Grid Three -->\n                                    <v-row style=\"background-color: #fff;\">\n                                        <v-col cols=\"12\" class=\"pb-0\">\n                                            <h2 class=\"greyText--text mb-0 font_20\">{{ $t('components_used') }}</h2>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                                            <kendo-datasource ref=\"componentUsedDS\"\n                                                              :data=\"interalUsage.componentsUsed\"/>\n                                            <kendo-grid id=\"gridComponentUsed\" class=\"grid-function\"\n                                                        :data-source-ref=\"'componentUsedDS'\"\n                                                        :sortable=\"false\" :filterable=\"false\" :column-menu=\"true\"\n                                                        :editable=\"true\" :scrollable-virtual=\"true\">\n                                                <kendo-grid-column :template=\"rowNumberCU\" :title=\"$t('no.')\"\n                                                                   :width=\"55\" :column-menu=\"false\"\n                                                                   :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5;',\n                                                        class: 'text-variants'\n                                                    }\" :attributes=\"{\n                                                        style: 'text-align: variants'\n                                                    }\"/>\n                                                <kendo-grid-column :field=\"'item'\" :title=\"$t('item')\"\n                                                                   :width=\"200\" :template=\"itemTemplate\"\n                                                                   :editor=\"ItemDropDownEditorCU\" :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5'\n                                                    }\"/>\n                                                <kendo-grid-column :field=\"'description'\" :title=\"$t('description')\"\n                                                                   :width=\"200\" :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5'\n                                                    }\"/>\n                                                <kendo-grid-column :field=\"'uom'\"\n                                                                   :editor=\"UOMDropDownEditor\"\n                                                                   :template=\"UOMTemplateCU\"\n                                                                   :title=\"$t('uom')\" :width=\"160\"\n                                                                   :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5'\n                                                    }\"/>\n                                                <kendo-grid-column :field=\"'qty'\" :title=\"$t('qty')\" :format=\"'{0:n}'\"\n                                                                   :width=\"150\" :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\" :attributes=\"{\n                                                            style: 'text-align: right'\n                                                        }\"/>\n<!--                                                <kendo-grid-column :field=\"'wastage'\" :title=\"$t('wastage')\"-->\n<!--                                                                   :format=\"'{0:n}'\" :width=\"150\" :headerAttributes=\"{-->\n<!--                                                            style: 'text-align: right; background-color: #EDF1F5'-->\n<!--                                                        }\" :attributes=\"{-->\n<!--                                                            style: 'text-align: right'-->\n<!--                                                        }\"/>-->\n                                                <kendo-grid-column :field=\"'cost'\" :title=\"$t('cost')\" :format=\"'{0:n}'\"\n                                                                   :width=\"150\" :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\" :attributes=\"{\n                                                            style: 'text-align: right'\n                                                        }\"/>\n                                                <kendo-grid-column\n                                                    :command=\"{ iconClass: 'k-icon k-i-trash', text: 'Delete', click: removeRow, class: 'btn-plus' }\"\n                                                    :title=\"'&nbsp;'\" :width=\"100\" :headerAttributes=\"{\n                                                        style: 'text-align: right; background-color: #EDF1F5'\n                                                    }\"/>\n                                            </kendo-grid>\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                            <v-btn @click=\"addRowComponentUse\"\n                                                   class=\"float-left btn_plus rounded-0 mr-2\">\n                                                <v-icon size=\"\" class=\"ma-1\">fa-plus</v-icon>\n                                            </v-btn>\n<!--                                            <v-btn class=\"float-left btn_plus rounded-0 mr-2\">-->\n<!--                                                <v-icon size=\"\" class=\"ma-1\">fa fa-barcode</v-icon>-->\n<!--                                            </v-btn>-->\n                                        </v-col>\n                                    </v-row>\n\n                                    <v-row style=\"background-color: #fff;\">\n                                        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                            <v-row>\n                                                <v-col sm=\"6\" cols=\"6\" class=\"pb-0\">\n                                                    <v-textarea height=\"90px\" no-resize outlined clearable rows=\"3\"\n                                                                placeholder=\"This will appear on the invoice\"/>\n                                                </v-col>\n                                                <v-col sm=\"6\" cols=\"6\" class=\"py-0\">\n                                                    <v-simple-table>\n                                                        <template v-slot:default>\n                                                            <tbody>\n                                                            <tr>\n                                                                <td class=\"text-left text-uppercase\">\n                                                                    {{ $t('total_cost') }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-right\">{{ totalCost }}</td>\n                                                            </tr>\n                                                            </tbody>\n                                                        </template>\n                                                    </v-simple-table>\n                                                </v-col>\n                                            </v-row>\n                                        </v-col>\n                                    </v-row>\n\n                                    <v-divider/>\n                                    <v-card outlined dense class=\"no_border function_footer\">\n                                        <v-alert type=\"warning\" v-model=\"alert\" dismissible>\n                                            <span v-html=\"errorMessage\"/>\n                                        </v-alert>\n                                        <v-menu>\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-btn class=\"mr-2 float-left select_template\" v-on=\"on\">\n                                                    {{ $t('select_template') }}\n                                                    <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                                </v-btn>\n                                            </template>\n                                            <v-list>\n                                                <v-list-item v-for=\"(item, index) in templates\" :key=\"index\">\n                                                    <v-list-item-title>{{ item.title }}</v-list-item-title>\n                                                </v-list-item>\n                                            </v-list>\n                                        </v-menu>\n                                        <v-btn color=\"black\"\n                                               class=\"text-capitalize rounded-pill white--text float-left\"\n                                               @click=\"cancel\">{{ $t('cancel') }}\n                                        </v-btn>\n                                        <v-menu>\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-btn color=\"primary\"\n                                                       class=\"ml-2 float-right text-capitalize rounded-pill white--text\"\n                                                       v-on=\"on\">\n                                                    {{ $t('save_option') }}\n                                                    <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                                </v-btn>\n                                            </template>\n                                            <v-list rounded>\n                                                <v-list-item-group>\n                                                    <v-list-item>\n                                                        <v-list-item-content>\n                                                            <v-list-item-title v-if=\"!isEdit\" @click=\"saveNew\">\n                                                                {{ $t('save_new') }}\n                                                            </v-list-item-title>\n                                                        </v-list-item-content>\n                                                    </v-list-item>\n                                                    <v-list-item>\n                                                        <v-list-item-content>\n                                                            <v-list-item-title @click=\"savePrint\">{{ $t('save_print') }}\n                                                            </v-list-item-title>\n                                                        </v-list-item-content>\n                                                    </v-list-item>\n                                                </v-list-item-group>\n                                            </v-list>\n                                        </v-menu>\n                                        <v-btn color=\"secondary\"\n                                               class=\"float-right white--text text-capitalize rounded-pill\">\n                                            {{ $t('save_draft') }}\n                                        </v-btn>\n                                    </v-card>\n                                </v-form>\n                            </v-col>\n                            <v-col class=\"smallSide\" sm=\"4\" style=\"transition: .3s ease-in;\"\n                                   :class=\"{'hide_small_bar_class':isHideBar}\">\n                                <h3 style=\"color: #b3b5bc; font-size:20px;\" v-if=\"!isHideBar\"\n                                    class=\"text-uppercase float-right mt-n3\">\n                                    <span class=\"pointer\" @click=\"Help('internal usage')\">\n                                        {{ $t('help') }}\n                                    </span>\n                                    <v-icon @click=\"cancel()\"\n                                            style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                            class=\"float-right mt-n1\">close\n                                    </v-icon>\n                                </h3>\n\n                                <div v-if=\"!isHideBar\" class=\"small_sidebar mt-9 px-4 grayBg\">\n                                    <v-row>\n                                        <v-col sm=\"12\" cols=\"12\">\n                                            <h4 class=\"mb-3 text-uppercase\">{{ $t(\"analysis\") }}</h4>\n                                            <label class=\"label mb-0\">{{ $t('segment') }}</label>\n                                            <v-select class=\"mt-2\"\n                                                      v-model=\"interalUsage.segment\"\n                                                      :items=\"segments\"\n                                                      item-value=\"id\"\n                                                      :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                      return-object\n                                                      tage=\"sub Of\"\n                                                      placeholder=\"Sub Of\"\n                                                      outlined=\"\"/>\n                                            <label class=\"label mb-0\">{{ $t('location') }}</label>\n                                            <v-select class=\"mt-2\"\n                                                      v-model=\"interalUsage.location\"\n                                                      :items=\"locations\"\n                                                      item-value=\"id\"\n                                                      :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                      return-object\n                                                      tage=\"Location\"\n                                                      placeholder=\"bu/location\"\n                                                      outlined=\"\"/>\n                                            <label class=\"label font_14\">{{ $t('sale_channel') }}</label>\n                                            <v-select class=\" my-2\"\n                                                      v-model=\"interalUsage.saleChannel\"\n                                                      :items=\"saleChannelList\"\n                                                      item-value=\"id\"\n                                                      item-text=\"name\"\n                                                      return-object\n                                                      tage=\"Sale Channel\"\n                                                      placeholder=\"Channel\"\n                                                      outlined\n                                            />\n                                            <label class=\"label\">{{ $t(\"project\") }}</label>\n                                            <v-select\n                                                class=\"mt-1\"\n                                                v-model=\"interalUsage.project\"\n                                                :items=\"projects\"\n                                                :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                item-value=\"id\"\n                                                tage=\"Project\"\n                                                outlined\n                                            />\n                                            <!--                                            <label class=\"label\">{{ $t(\"default_employee\") }}</label>-->\n                                            <!--                                            <v-select-->\n                                            <!--                                                class=\"mt-1\"-->\n                                            <!--                                                :items=\"suppliers\"-->\n                                            <!--                                                :rules=\"[(v) => !!v || 'Payble Account is required']\"-->\n                                            <!--                                                return-object-->\n                                            <!--                                                tage=\"Default Employee\"-->\n                                            <!--                                                outlined-->\n                                            <!--                                            />-->\n                                            <label class=\"label\">{{ $t(\"for_month_of\") }}</label>\n                                            <app-monthpicker\n                                                :initMonthOf=\"interalUsage.monthOf\"\n                                                @emitMonthOf=\"interalUsage.monthOf = $event\"\n                                            />\n                                        </v-col>\n                                    </v-row>\n                                    <p class=\"mb-0 detial_smallside_p\">{{ $t('internal_usage_funt_decs') }}</p>\n                                </div>\n                            </v-col>\n                        </v-row>\n                    </v-card>\n                </v-col>\n            </v-row>\n            <LoadingMe :isLoading=\"showLoading\" :fullPage=\"true\" :myLoading=\"true\" :alertMessage=\"loadingAlert\"\n                       :color=\"loadingColorAlert\" :alertText=\"loadingTextAlert\"/>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport {i18n} from '@/i18n';\nimport LoadingMe from '@/components/Loading'\nimport DatePickerComponent from '@/components/custom_templates/DatePickerComponent'\nimport MonthOfPicker from \"@/components/kendo_templates/MonthOfPicker\";\nimport InteralUsage from \"@/scripts/model/InteralUsage\";\nimport kendo from \"@progress/kendo-ui\";\nimport { ShowResource } from '@/observable/store'\n\nconst interalUsageModel = new InteralUsage({})\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\")\nconst prefixHandler = require(\"@/scripts/prefixHandler\")\nconst warehouseHandler = require(\"@/scripts/warehouseHandler\")\nconst settingsHandler = require(\"@/scripts/settingsHandler\")\nconst settingHandler = require(\"@/scripts/settingHandler\")\nconst locationHandler = require(\"@/scripts/locationHandler\")\nconst saleChannelHandler = require(\"@/scripts/saleChannelHandler\")\nconst projectHandler = require(\"@/scripts/projectHandler\")\nconst uomPriceHandler = require(\"@/scripts/uomPriceHandler\")\nconst productVariantHandler = require(\"@/scripts/productVariantHandler\")\nconst accountHandler = require(\"@/scripts/handler/accounting/account\")\nconst internalUsageHandler = require(\"@/scripts/internalUsageHandler\")\nconst store = require(\"@/institute\");\n\nconst $ = require(\"jquery\")\nexport default {\n    name: \"InternalUsage\",\n    components: {\n        'LoadingMe': LoadingMe,\n        'app-datepicker': DatePickerComponent,\n        \"app-monthpicker\": MonthOfPicker,\n    },\n    computed: {\n        totalCost() {\n            if (this.costIP !== 0 || this.costIA !== 0) {\n                return this.costIP + this.costIA\n            } else {\n                return 0\n            }\n        },\n    },\n    data: () => ({\n        isEdit: false,\n        // LoadingMe\n        showLoading: false,\n        loadingAlert: false,\n        loadingColorAlert: '',\n        loadingTextAlert: '',\n        bill_date: '',\n        alert: false,\n        deposite: 1000,\n        files: [],\n        // Form validation\n        valid: true,\n\n        journal_types: [],\n        suppliers_item: [],\n        expense: [\n            'Equal',\n            'weighted'\n        ],\n        journal_date: \"\",\n        templates: [{\n            title: 'Draft'\n        },\n            {\n                title: 'Open'\n            },\n            {\n                title: 'Paid'\n            },\n            {\n                title: 'Partially Paid'\n            },\n        ],\n        col_expand: 9,\n        col_hide: 3,\n        isHideBar: false,\n        suppliers: [\"Suppliers\", \"Customer\", \"Employee\"],\n        transaction: [{\n            id: \"12\",\n            name: \"Purchase Order\",\n            no: \"No.0024\",\n            price: \"2,50000\",\n        },\n            {\n                id: \"14\",\n                name: \"Godd Recipt Note\",\n                no: \"No.0024\",\n                price: \"2,50000\",\n            }\n        ],\n        item_suppliers: [{\n            name: \"Subtotal\",\n            value: \"10000.00\"\n        },\n            {\n                name: \"Subtotal\",\n                value: \"10000.00\"\n            },\n            {\n                name: \"Subtotal\",\n                value: \"10000.00\"\n            },\n            {\n                name: \"Subtotal\",\n                value: \"10000.00\"\n            },\n            {\n                name: \"Subtotal\",\n                value: \"10000.00\"\n            },\n        ],\n\n        interalUsage: interalUsageModel,\n        warehouses: [],\n        segments: [],\n        locations: [],\n        saleChannelList: [],\n        projects: [],\n\n        itemLinesIP: interalUsageModel.product,\n        itemLinesIA: interalUsageModel.accounts,\n        itemLinesCU: interalUsageModel.componentsUsed,\n        itemLineIP: [],\n        itemLineIA: [],\n        itemLineCU: [],\n        accounts: [],\n        costIP: 0,\n        costIA: 0,\n        vatTax: [],\n    }),\n    methods: {\n        Help(ke_search){\n            ShowResource(ke_search)\n        },\n        async loadTax() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    settingHandler.get().then(res => {\n                        this.tax = res\n                        // this.otherTax = this.tax.filter(m => m.taxType.typeId === 7) // valuable tax\n                        // this.specificTax = this.tax.filter(m => m.taxType.typeId === 8 && m.transactionType === 'Sale') // valuable tax\n                        // this.publicLightingTax = this.tax.filter(m => m.taxType.typeId === 9 && m.transactionType === 'Sale') // valuable tax\n                        this.vatTax = this.tax.filter(m => (m.taxType.typeId === 1 || m.taxType.typeId === 2) && m.transactionType === 'Purchase') // valuable tax\n\n                    })\n                }, 300)\n            })\n        },\n        async loadAccount() {\n            this.showLoading = true\n            // Use remote data\n            if (store.default.state.accounts.length === 0) {\n                await accountHandler.getAll()\n                    .then(res => {\n                        window.console.log(res, 'account')\n                        this.accounts = res\n                        this.showLoading = false\n                    });\n            } else {\n                this.accounts = store.default.state.accounts\n            }\n        },\n        async loadProjects() {\n            await projectHandler.list().then(res => {\n                this.projects = res.data.data\n                if (this.projects.length > 0) {\n                    this.interalUsage.project = this.projects[0]\n                }\n            })\n        },\n        async loadSegment() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.segments = []\n                    settingsHandler.getSeg().then(res => {\n                        this.showLoading = true\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            this.segments = res.data.data\n                            if (this.segments.length > 0) {\n                                this.interalUsage.segment = this.segments[0]\n                            }\n                            // this.segmentList = res.data.data\n                        }\n                    }).catch()\n                    {\n                        this.showLoading = false\n                    }\n                }, 300)\n            })\n        },\n        async loadLocation() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.locations = []\n                    locationHandler.list().then(res => {\n                        this.showLoading = true\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            this.locations = res.data.data\n                            if (this.locations.length > 0) {\n                                this.interalUsage.location = this.locations[0]\n                            }\n                        }\n                    }).catch()\n                    {\n                        this.showLoading = false\n                    }\n                }, 300)\n            })\n        },\n        async loadSaleChannel() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    this.showLoading = true\n                    saleChannelHandler.get().then(res => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            this.saleChannelList = res.data.data\n                            if (this.saleChannelList.length > 0) {\n                                this.interalUsage.saleChannel = this.saleChannelList[0]\n                            }\n                        } else {\n                            this.showLoading = false\n                        }\n                    })\n                }, 300);\n            })\n        },\n        removeRowOC(e) {\n            e.preventDefault();\n            const grid = kendo.jQuery(\"#gridOtherCost\").data(\"kendoGrid\"),\n                dataSource = grid.dataSource,\n                dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n            if (dataSource.total() > 1) {\n                dataSource.remove(dataItem);\n            }\n        },\n        async loadWarehouses() {\n            warehouseHandler.getWarehouseSettingAll().then(res => {\n                this.warehouses = res\n            })\n        },\n        async loadPrefix() {\n            new Promise(resolve => {\n                setTimeout(async () => {\n                    resolve('resolved');\n                    await prefixHandler.get('internal usage').then(async res => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            this.transactionTypes = res.data.data\n                            if (this.transactionTypes.length > 0) {\n                                this.interalUsage.transactionType = this.transactionTypes[0]\n                                if (this.$route.params.id === undefined) {\n                                    await this.generateNumber()\n                                }\n                            }\n                        }\n\n                    })\n                }, 300);\n            })\n        },\n        async generateNumber() {\n            if (this.interalUsage.date !== '') {\n                let data = {\n                    abbr: this.interalUsage.transactionType.abbr,\n                    structure: this.interalUsage.transactionType.structure,\n                    transactionDate: this.interalUsage.date,\n                    sequcencing: this.interalUsage.transactionType.sequcencing,\n                    prefixSeparator: this.interalUsage.transactionType.prefixSeparator || '',\n                    numberSeparator: this.interalUsage.transactionType.numberSeparator || '',\n                    format: this.interalUsage.transactionType.format || 5,\n                    type: 'Internal Usage',\n                    entity: 2,\n                }\n                this.interalUsage.abbr = data.abbr\n                this.interalUsage.structure = data.structure\n                this.interalUsage.sequcencing = data.sequcencing\n                this.interalUsage.transactionDate = data.transactionDate\n                this.interalUsage.type = data.type\n                await billingHandler.lastNumber(data).then(response => {\n                    window.console.log(response.data.data.lastNumber, 'lastnumber')\n                    if (response.data.statusCode === 200) {\n                        const res = response.data.data\n                        const lastNumber = this.zeroPad(parseInt(res.lastNumber), this.interalUsage.transactionType.format)\n                        const number = res.suffix + this.interalUsage.transactionType.numberSeparator + lastNumber\n                        this.interalUsage.number = number\n                        this.interalUsage.lastNumber = res.suffix + lastNumber\n                    }\n                }).catch(e => {\n                    this.errors.push(e)\n                })\n            }\n        },\n        zeroPad(num, places) {\n            return String(num).padStart(places, '0')\n        },\n        rowNumberIP(dataItem) {\n            let ds = this.$refs.productDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        async getDataSource() {\n            let dsFP = this.$refs.productDS.kendoWidget(),\n                dataRowFP = dsFP.data()\n            this.itemLineIP = []\n            dataRowFP.forEach(i => {\n                window.console.log(i, 'item')\n                window.console.log(i.item, '2134')\n                this.itemLineIP.push({\n                    id: i.id,\n                    item: i.item,\n                    description: i.description,\n                    uom: i.uom,\n                    yield_qty: i.yield_qty,\n                    cost: i.cost,\n                })\n            })\n            window.console.log(this.itemLineIP[0].item, 'item21435')\n            let dsIA = this.$refs.accountDS.kendoWidget(),\n                dataRowOP = dsIA.data()\n            this.itemLineIA = []\n            dataRowOP.forEach(i => {\n                this.itemLineIA.push({\n                    id: i.id,\n                    item: i.item,\n                    description: i.description,\n                    amount: i.amount,\n                    tax: i.tax\n                })\n            })\n            let dsCU = this.$refs.componentUsedDS.kendoWidget(),\n                dataRowCU = dsCU.data()\n            this.itemLineCU = []\n            dataRowCU.forEach(i => {\n                this.itemLineCU.push({\n                    id: i.id,\n                    item: i.item,\n                    description: i.description,\n                    uom: i.uom,\n                    qty: i.qty,\n                    cost: i.cost,\n                })\n            })\n        },\n        dataSourceChangedIP(e) {\n            if (e.field) {\n                let dataRow = e.items[0]\n                switch (e.field) {\n                    case \"cost\":\n                        this.costIP = dataRow.cost\n                        break\n                    case \"item\":\n                        dataRow.set('description', dataRow.item.description)\n                        break\n                }\n            }\n        },\n        dataSourceChangedIA(e) {\n            if (e.field) {\n                let dataRow = e.items[0]\n                switch (e.field) {\n                    case \"amount\":\n                        this.costIA = kendo.parseFloat(dataRow.amount)\n                        break\n\n\n                }\n            }\n        },\n        taxTemplate(dataItem) {\n            window.console.log('vat', dataItem.tax)\n            const vat = dataItem.tax\n            if (vat) {\n                return `<span>${vat.defaultTax ? vat.defaultTax : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        TaxDropDownEditor(container, options) {\n            kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"defaultTax\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=defaultTax#</span>\",\n                    optionLabel: \"--Select--\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.vatTax\n                    })\n                })\n        },\n        accountTemplate(dataItem) {\n            const acc = dataItem.account\n            if (acc) {\n                return `<span>${acc.name ? acc.name : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        UOMDropDownEditor(container, options) {\n            kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"uom.toUOM.name\",\n                    dataValueField: \"uom.toUOM.id\",\n                    cascadeFrom: \"item\",\n                    template: \"<span>#=uom.toUOM.name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: uomPriceHandler.getUrl(options.model.item.id),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    // name: {type: \"string\"},\n                                    // sku: {type: \"string\"},\n                                }\n                            },\n                            data: function (response) {\n                                return response.data\n                            },\n                            total: function (response) {\n                                return response.data.count\n                            }\n                        },\n                        // data: this.variants\n                    }),\n                })\n        },\n        UOMTemplate(dataItem) {\n            const uom = dataItem.uom\n            //\n            if (uom) {\n                return `<span>${uom.uom ? uom.uom.toUOM.name : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        UOMTemplateCU(dataItem) {\n            const uom = dataItem.uom\n            //\n            if (uom) {\n                return `<span>${uom.uom ? uom.uom.toUOM.name : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        ItemDropDownEditorTP(container, options) {\n            kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    headerTemplate: '<div class=\"dropdown-header k-widget k-header\">' +\n                        '<span>Items </span>' +\n                        '<span></span>' +\n                        '</div>',\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: productVariantHandler.searchURL(),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    name: {type: \"string\"},\n                                    sku: {type: \"string\"},\n                                }\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            }\n                        },\n                        // data: this.variants\n                    }),\n                })\n        },\n        ItemDropDownEditorCU(container, options) {\n            kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    headerTemplate: '<div class=\"dropdown-header k-widget k-header\">' +\n                        '<span>Items </span>' +\n                        '<span></span>' +\n                        '</div>',\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: productVariantHandler.itemSearchURL(),\n                            },\n                            dataType: \"json\",\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: {type: \"string\"},\n                                    name: {type: \"string\"},\n                                    sku: {type: \"string\"},\n                                }\n                            },\n                            data: function (response) {\n                                return response.data;\n                            },\n                            total: function (response) {\n                                return response.data.count;\n                            }\n                        },\n                        // data: this.variants\n                    }),\n                })\n        },\n        itemTemplate(dataItem) {\n            const item = dataItem.item\n            if (item) {\n                return `<span>${item.name ? item.name : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        addRowProduct() {\n            let ds = this.$refs.productDS.kendoWidget(),\n                total = ds.total();\n            ds.insert(total, this.itemLinesIP)\n        },\n        addRowAccount() {\n            let ds = this.$refs.accountDS.kendoWidget(),\n                total = ds.total()\n            ds.insert(total, this.itemLinesTA)\n        },\n        rowNumberIA(dataItem) {\n            let ds = this.$refs.accountDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        addRowComponentUse() {\n            let ds = this.$refs.componentUsedDS.kendoWidget(),\n                total = ds.total()\n            ds.insert(total, this.itemLinesCU)\n        },\n        rowNumberCU(dataItem) {\n            let ds = this.$refs.componentUsedDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        savePrint() {\n\n        },\n        async saveNew() {\n            await this.getDataSource()\n            window.console.log(this.itemLinesIP)\n            this.interalUsage.totalCost = this.totalCost\n            this.interalUsage.product = this.itemLineIP\n            this.interalUsage.accounts = this.itemLineIA\n            this.interalUsage.componentsUsed = this.itemLineCU\n            window.console.log(this.interalUsage)\n            await internalUsageHandler.create(this.interalUsage).then(res => {\n                window.console.log(res)\n            })\n        },\n        async saveClose() {\n            await this.getDataSource()\n            this.interalUsage.totalCost = this.totalCost\n            window.console.log(this.interalUsage)\n            await internalUsageHandler.create(this.interalUsage).then(res => {\n                window.console.log(res)\n            })\n        },\n        removeRow() {\n        },\n        errorMessage() {\n\n        },\n        addRow() {\n        },\n        accountDropDownEditor(container, options) {\n            // Defind ordering by number\n            let compare = function (a, b) {\n                if (a.items[0].number === b.items[0].number) {\n                    return 0;\n                } else if (a.items[0].number > b.items[0].number) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            };\n            // Defind default group\n            let group = {\n                field: \"account_type.name\",\n                compare: compare\n            };\n            kendo.jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"name\",\n                    dataValueField: \"uuid\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.accounts,\n                        group: group\n                    })\n                }).data(\"kendoDropDownList\");\n        },\n        cancel() {\n            this.$swal({\n                title: i18n.t('msg_title_warning'),\n                text: i18n.t('msg_discard'),\n                icon: \"warning\",\n                showCancelButton: true,\n                cancelButtonText: i18n.t('cancel'),\n                confirmButtonColor: \"#4d4848\",\n                cancelButtonColor: \"#ED1A3A\",\n                confirmButtonText: i18n.t('discard'),\n            }).then((resultCen) => {\n                if (resultCen.value) {\n                    this.$router.go(-1);\n                }\n            });\n        },\n        hide_smallsitebar() {\n            if (!this.isHideBar) {\n                // this.col_expand = 12\n                // this.col_hide = 0\n                this.isHideBar = true\n            } else {\n                // this.col_expand = 9\n                // this.col_hide = 3\n                this.isHideBar = false\n            }\n        }\n    },\n    watch: {\n        // call again the method if the route changes\n\n    },\n    async created() {\n        await this.loadAccount()\n    },\n    async mounted() {\n        await this.loadPrefix()\n        await this.loadWarehouses()\n        await this.loadTax()\n        await this.loadLocation()\n        await this.loadProjects()\n        await this.loadSaleChannel()\n        await this.loadSegment()\n    },\n};\n</script>\n\n<style scoped>\n.function_wrapper {\n    box-shadow: none !important;\n}\n\n.custom_grid table th:last-child {\n    text-align: right !important;\n}\n\n.color_green {\n    color: #03b154;\n}\n\n@media (min-width: 1264px) {\n    .container {\n        max-width: 1250px;\n    }\n}\n\n@media (max-width: 576px) {\n    .pt-6.col-sm-5.col-12 {\n        padding-top: 0 !important;\n    }\n\n    .code_text {\n        width: 100%;\n    }\n\n    .phone_no_pt {\n        padding-top: 0 !important;\n    }\n\n    .select_template,\n    .save_option {\n        margin-bottom: 10px;\n    }\n}\n\n.hide_small_bar_class {\n    max-width: 0;\n    transition: .5s ease-in;\n    flex: 0 0 0;\n    padding: 0;\n}\n\n.hide_big_bar_class {\n    max-width: 100%;\n    transition: .5s ease-in;\n    flex: 0 0 100%;\n}\n\n.info_add {\n    background-color: #ffffff;\n}\n\n.small_sidebar {\n    height: 97%;\n    position: relative;\n    padding: 12px;\n    background-color: #EDF1F5;\n}\n\n.iconArrow {\n    right: -35px;\n    position: absolute;\n    bottom: -10px;\n}\n\n.iconArrowHide {\n    position: absolute;\n    right: -7px;\n    bottom: -10px;\n}\n\n.color_grey {\n    color: #808080;\n}\n\n.card_green {\n    min-height: 70px;\n    background-color: #00b050 !important;\n    color: #ffffff;\n}\n\n.lb_bold {\n    font-size: 12px;\n}\n\n.detial_smallside_p {\n    position: absolute;\n    bottom: 10px;\n}\n\n.card_background {\n    background-color: #EDF1F5;\n    min-height: 120px;\n}\n\n.deposite_input {\n    width: 100px;\n}\n\n.btn_save_draft {\n    color: #ffffff;\n    background-color: #00b0f0 !important;\n    text-transform: capitalize;\n}\n\n.save_option {\n    background-color: #203864 !important;\n}\n\n.btn_add_small {\n    height: 27px !important;\n    min-width: 25px !important;\n    font-size: 10px;\n    padding: 0 22px !important;\n    background-color: #00b050 !important;\n    color: #ffffff;\n    border-radius: 0 !important;\n}\n\n.list_site_inv {\n    background-color: #92d050;\n    color: #ffffff;\n    font-size: 12px;\n}\n\n.list_site_exp {\n    background-color: #c5e0b4;\n    color: #000000;\n    font-size: 12px;\n    line-height: 16px;\n    min-height: 40px;\n}\n\n.checkbox_inv {\n    padding: 2px;\n    margin-top: 3px;\n    margin-right: 2px;\n}\n\n.exp_select {\n    font-size: 12px !important;\n}\n\n.border_radius10 {\n    border-radius: 10px !important;\n    background-color: #F2F2F2;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n</style>\n"]}]}
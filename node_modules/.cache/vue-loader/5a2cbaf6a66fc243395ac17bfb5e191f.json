{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/banking/ToBeReconciled.vue?vue&type=style&index=0&id=324a5460&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/banking/ToBeReconciled.vue","mtime":1638499443123},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5rLWNoYXJ0IHsKICAgIGhlaWdodDogMTgwcHg7Cn0KCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyID4gdGQgewogICAgaGVpZ2h0OiAzMnB4ICFpbXBvcnRhbnQ7CiAgICBib3JkZXItYm90dG9tOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoKLnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHI6Zmlyc3QtY2hpbGQgPiB0ZCB7CiAgICBib3JkZXItdG9wOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyOmhvdmVyOm5vdCgudi1kYXRhLXRhYmxlX19leHBhbmRlZF9fY29udGVudCk6bm90KC52LWRhdGEtdGFibGVfX2VtcHR5LXdyYXBwZXIpIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KLnJvdyArIC5yb3cgewogICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["ToBeReconciled.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyQA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ToBeReconciled.vue","sourceRoot":"src/views/banking/banking","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <v-card color=\"white\" class=\" no_border\" elevation=\"0\">\n                <v-row>\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                        <h2 class=\"mb-1 font_20\">{{ $t('transactions_need_to_be_reconciled') }}</h2>\n                    </v-col>\n                </v-row>\n                <v-row>\n                    <v-col sm=\"9\" cols=\"12\" class=\"py-0\">\n                        <app-searchdate :initStartDate=\"startDate\" @emitStartDate=\"startDate = $event\"\n                                        :initEndDate=\"endDate\" @emitEndDate=\"endDate = $event\"/>\n                    </v-col>\n\n                    <v-col sm=\"1\" cols=\"12\" class=\"pt-1 pb-0\">\n                        <v-btn class=\"btn_search\" style=\"background-color: rgb(237, 241, 245)\"\n                               @click=\"search\">\n                            <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n                        </v-btn>\n                    </v-col>\n                </v-row>\n\n                <v-row>\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                        <template>\n                            <LoadingMe\n                                :isLoading=\"showLoading\"\n                                :fullPage=\"true\"\n                                :myLoading=\"true\"\n                                :alertMessage=\"loadingAlert\"\n                                :color=\"loadingColorAlert\"\n                                :alertText=\"loadingTextAlert\"/>\n\n                            <kendo-datasource ref=\"statementDS\"\n                                :data=\"statements\"\n                                :schema=\"schemaDefinition\"\n                                :sort=\"sortDefinition\"\n                                :group=\"groupDefinition\"\n\t\t\t\t\t\t\t\t:aggregate=\"aggregateDefinition\"\n                                />\n\n                            <kendo-grid ref=\"gridStatement\" class=\"grid-function\"\n                                    :data-source-ref=\"'statementDS'\"\n                                    :sortable=\"true\"\n                                    :column-menu=\"true\"\n                                    :reorderable=\"true\"\n                                    :resizable=\"true\"\n                                    :noRecords=\"true\"\n                                    :scrollable-virtual=\"true\">\n                                <kendo-grid-column\n                                    :field=\"'created_date'\"\n                                    :title=\"$t('imported_date')\"\n                                    :template=\"importDateTmpl\"\n                                    :width=\"200\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'bank_ref'\"\n                                    :title=\"$t('num')\"\n                                    :width=\"200\"\n                                    :hidden=\"true\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'statement_date'\"\n                                    :title=\"$t('date')\"\n                                    :width=\"200\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'transaction_type'\"\n                                    :title=\"$t('type')\"\n                                    :width=\"200\"\n                                    :hidden=\"true\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'bank_acc_number'\"\n                                    :title=\"$t('bank_account')\"\n                                    :template=\"'<span>#=bank_acc_number# #=currency#</span>'\"\n                                    :groupHeaderTemplate=\"`<span class='text-bold text-black'>#=value#</span>`\"\n                                    :width=\"200\"\n                                    :hidden=\"true\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'bank.name'\"\n                                    :title=\"$t('bank')\"\n                                    :template=\"'<span>#=bank.name#</span>'\"\n                                    :groupHeaderTemplate=\"`<span class='text-bold text-black'>#=value#</span>`\"\n                                    :width=\"200\"\n                                    :hidden=\"true\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'details'\"\n                                    :title=\"$t('details')\"\n                                    :width=\"200\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'amount'\"\n                                    :title=\"$t('amount')\"\n                                    :format=\"'{0:n}'\"\n                                    :width=\"200\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"\n                                    :attributes=\"{\n                                        class: 'table-cell',\n                                        style: 'text-align: right; font-size: 14px'\n                                    }\" />\n                                <kendo-grid-column :command=\"{ text: 'Reconcile Now', click: goReconcile }\"\n                                    :title=\"$t('action')\"\n                                    :width=\"200\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>\n                            </kendo-grid>\n                        </template>\n                    </v-col>\n                </v-row>\n            </v-card>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\n// import { i18n } from '@/i18n';\nimport { \n    BankStatementModel,\n    BankModel,\n} from \"@/scripts/model/AppModels\";\n\nconst $ = require(\"jquery\");\nconst {\n    bankStatementHandler,\n    bankHandler,\n} = require(\"@/scripts/AppHandlers\");\n\nexport default {\n    components: {\n        \"LoadingMe\": () => import('@/components/Loading'),\n        \"app-searchdate\": () => import('@/components/custom_templates/SearchDate'),\n    },\n    data: () => ({\n        startDate \t\t: '',\n        endDate \t\t: '',\n        statements      : [],\n        /* KENDO */\n        sortDefinition : { field: \"statement_date\", dir: \"desc\" },\n        groupDefinition : [],\n        aggregateDefinition : [\n            { field: \"amount\", aggregate: \"sum\" },\n            { field: \"balance\", aggregate: \"sum\" },\n        ],\n        schemaDefinition\t: {\n            model: { id: \"uuid\" }\n        },\n        // LoadingMe\n        showLoading: false,\n        loadingAlert: false,\n        loadingColorAlert: \"\",\n        loadingTextAlert: \"\",\n    }),\n    methods: {\n        // Search journals\n        async search () {\n            let sdate = this.startDate,\n                edate = this.endDate;\n\n            if(sdate && edate){\n                sdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z';\n\n                edate = new Date(edate);\n                edate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z';\n            }else{\n                sdate = 0;\n                edate = 0;\n            }\n            \n            // Empty dataSource\n            let ds = this.$refs.statementDS.kendoWidget();\n            ds.data([]);\n                \n            // Query\n            this.showLoading = true;\n\n            /* Load Statement */\n            let bankStatements = await bankStatementHandler.toBeReconcileEntries({\n                params : {\n                    start_date \t\t: sdate,\n                    end_date \t\t: edate\n                }\n            });\n\n            /* Load Bank */\n            let banks = await bankHandler.getAll();\n            \n            let statementList = [];\n            bankStatements.data.forEach(value => {\n                let bankStatement = new BankStatementModel(value);\n\n                // Statement Date\n                bankStatement.statement_date = kendo.toString(new Date(value.statement_date), 'dd-MM-yyyy HH:mm:ss tt');\n\n                // Bank\n                bankStatement.bank = new BankModel(banks.data.find(item => item.uuid === value.bank_uuid));\n\n                statementList.push(bankStatement);\n            });\n            this.statements = statementList;\n\n            this.showLoading = false;\n        },\n        // Kendo Grid Template\n        importDateTmpl(dataItem){\n            return Helper.dateFormat(dataItem.created_date);\n        },\n        // Generate Group By\n        generateGroupBy(){\n            this.groupDefinition = [\n                { \n                    field: \"bank.name\", \n                    aggregates : this.aggregateDefinition,\n                    compare: function(a, b) {\n                        if (a.items[0].bank.name === b.items[0].bank.name) {\n                            return 0;\n                        } else if (a.items[0].bank.name > b.items[0].bank.name) {\n                            return 1;\n                        } else {\n                            return -1;\n                        }\n                    }\n                },\n                { \n                    field: \"bank_acc_number\", \n                    aggregates : this.aggregateDefinition,\n                    compare: function(a, b) {\n                        if (a.items[0].statement_date === b.items[0].statement_date) {\n                            return 0;\n                        } else if (a.items[0].statement_date > b.items[0].statement_date) {\n                            return 1;\n                        } else {\n                            return -1;\n                        }\n                    }\n                },\n            ];\n        },\n        // Go Reconcile\n        goReconcile(e) {\n            e.preventDefault();\n\n            let grid = this.$refs.gridStatement.kendoWidget();\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n\t\t\tthis.$router.push({ \n                name: 'Bank Statement Reconciliation', \n                params: { \n                    initBankStatement: new BankStatementModel(dataItem),\n                },\n            });\n\t\t}, \n    },\n    mounted(){\n        // Generate Group By\n\t\tthis.generateGroupBy();\n    }\n};\n</script>\n\n<style scoped>\n.k-chart {\n    height: 180px;\n}\n\n.theme--light.v-data-table {\n    background-color: transparent !important;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n    height: 32px !important;\n    border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n    border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n.row + .row {\n    margin-top: 0 !important;\n}\n</style>\n"]}]}
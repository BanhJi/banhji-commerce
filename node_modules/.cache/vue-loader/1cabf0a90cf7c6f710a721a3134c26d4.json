{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/banking/views/BankReconciliationView.vue?vue&type=style&index=0&id=63e9f1c8&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/banking/views/BankReconciliationView.vue","mtime":1638499443135},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAbWVkaWEgKG1pbi13aWR0aDogMTI2NHB4KSB7CiAgICAuY29udGFpbmVyIHsKICAgICAgICBtYXgtd2lkdGg6IDEwODBweCAhaW1wb3J0YW50OwogICAgfQp9Cg=="},{"version":3,"sources":["BankReconciliationView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiWA;AACA;AACA;AACA;AACA","file":"BankReconciliationView.vue","sourceRoot":"src/views/banking/views","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                    <v-card outlined dense class=\"pa-4 no_border rounded-sm\" color=\"white\">\n                        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                            <v-card outlined dense class=\"no_border\">\n                                <h2 class=\"mb-0\">{{$t('bank_reconciliation_manually')}}</h2>\n                                <v-icon\n                                        onclick=\"window.history.go(-1); return false;\"\n                                        style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                        class=\"float-right\"\n                                >close\n                                </v-icon>\n                            </v-card>\n\n                            <v-card outlined dense class=\"px-3 no_border mb-3\" color=\"grayBg\">\n                                <v-row>\n                                    <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                        <v-row>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{$t('date')}}</label>\n                                                <h3 class=\"text-bold py-1\">{{ Helper.dateFormat(reconcile.date) }}</h3>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{$t('number')}}</label>\n                                                <h3 class=\"text-bold py-1\">{{ reconcile.number }}</h3>\n                                            </v-col>\n                                        </v-row>\n\n                                        <v-row>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0 py-0\">\n                                                <label class=\"label\">{{$t('ending_balance_date')}}</label>\n                                                <h3 class=\"text-bold py-1\">{{ Helper.dateFormat(reconcile.ending_balance_date) }}</h3>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0 py-0\">\n                                                <label class=\"label\">{{$t('reconcile_account')}}</label>\n                                                <h3 class=\"text-bold py-1\">{{ reconcile.account.number }} - {{ reconcile.account.name }}</h3>\n                                            </v-col>\n                                            <v-col sm=\"16\" cols=\"12\" class=\"py-0\">\n                                                <label class=\"label\">{{$t('ending_balance')}}</label>\n                                                <h3 class=\"text-bold py-1\">{{ Number(reconcile.ending_balance).toLocaleString() }}</h3>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                    <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                        <v-card outlined dense color=\"primary\" min-height=\"60\" class=\" pa-3 white--text mb-3\">\n                                            <p style=\"font-size: 20px;\" class=\"col-sm-7 float-left text-left mb-0 pa-0\">\n                                                {{$t('reported_beginning_balance')}}\n                                            </p>\n                                        \n                                            <p style=\"font-size: 20px;\"\n                                               class=\"col-sm-5 float-left text-right mb-0 pa-0 font-bold\">{{\n                                                Number(reconcile.opening_balance).toLocaleString() }}</p>\n                                        </v-card>\n\n\n                                        <v-card outlined dense color=\"primary\" min-height=\"60\"  class=\"pa-3 white--text mb-3\">\n                                            <p style=\"font-size: 20px;\" class=\"col-sm-7 float-left text-left mb-0 pa-0\">\n                                                {{$t('reported_ending_balance')}}\n                                            </p>\n                                            <p style=\"font-size: 20px;\"\n                                               class=\"col-sm-5 float-left text-right mb-0 pa-0 font-bold\">{{\n                                                Number(reportingEndingBalance).toLocaleString() }}</p>\n                                        </v-card>\n\n                                        <v-row>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                                <v-card outlined dense class=\"block-white\">\n                                                    <p style=\"font-size: 20px;\"\n                                                       class=\"col-sm-7 float-left text-left mb-0 pa-0\">\n                                                        {{$t('variance')}}\n                                                    </p>\n                                                    <p style=\"font-size: 20px;\"\n                                                       class=\"col-sm-5 float-left text-right mb-0 pa-0 font-bold\">{{\n                                                        Number(reconcile.variance_amount).toLocaleString() }}</p>\n                                                </v-card>\n                                            </v-col>\n\n                                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                                <label class=\"label\">{{$t('adjustment_account')}}</label>\n                                                <h3 class=\"text-bold py-1\">{{ reconcile.adjustment_account.number }} - {{ reconcile.adjustment_account.name }}</h3>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n\n                            <v-row style=\"background-color: rgb(255, 255, 255); width: 100%; margin: 10px auto 0px;\">\n                                <v-col sm=\"12\" cols=\"12\" class=\"py-3 pa-0\">\n                                    <kendo-datasource\n                                        ref=\"reconcileDS\"\n                                        :data=\"entries\"\n                                    />\n\n                                    <kendo-grid\n                                        id=\"grid\"\n                                        class=\"grid-function\"\n                                        :data-source-ref=\"'reconcileDS'\"\n                                        :column-menu=\"true\"\n                                        :scrollable-virtual=\"true\"\n                                    >\n                                        <kendo-grid-column\n                                            :title=\"$t('no.')\"\n                                            :template=\"rowNumberTmpl\"\n                                            :width=\"55\"\n                                            :column-menu=\"false\"\n                                            :headerAttributes=\"{\n                                                style: 'background-color: #EDF1F5;',\n                                                class: 'text-products',\n                                            }\"\n                                            :attributes=\"{\n                                                style: 'text-align: products',\n                                            }\"\n                                        />\n                                        <kendo-grid-column \n                                            :field=\"'journal_date'\"\n                                            :title=\"$t('date')\"\n                                            :template=\"'#=kendo.toString(new Date(journal_date), `dd-MM-yyyy`)#'\"\n                                            :width=\"100\"\n                                            :headerAttributes=\"{\n                                                style: 'text-align: center; background-color: #fff',\n                                            }\"\n                                            :attributes=\"{ style: 'text-align: center;' }\" />\n                                        <kendo-grid-column\n                                            :field=\"'transaction_type'\"\n                                            :title=\"$t('type')\"\n                                            :width=\"100\"\n                                            :headerAttributes=\"{\n                                                style: 'background-color: #EDF1F5',\n                                            }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'description'\"\n                                            :title=\"$t('description')\"\n                                            :width=\"100\"\n                                            :headerAttributes=\"{\n                                                style: 'background-color: #EDF1F5',\n                                            }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'journal_number'\"\n                                            :title=\"$t('reference')\"\n                                            :width=\"100\"\n                                            :headerAttributes=\"{\n                                                style: 'background-color: #EDF1F5',\n                                            }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'dr'\"\n                                            :title=\"$t('cash_in')\"\n                                            :format=\"'{0:n}'\"\n                                            :width=\"150\"\n                                            :headerAttributes=\"{\n                                                style: 'text-align: right; background-color: #EDF1F5',\n                                            }\"\n                                            :attributes=\"{ style: 'text-align: right; ' }\"\n                                        />\n                                        <kendo-grid-column\n                                            :field=\"'cr'\"\n                                            :title=\"$t('cash_out')\"\n                                            :format=\"'{0:n}'\"\n                                            :width=\"150\"\n                                            :headerAttributes=\"{\n                                                style: 'text-align: right; background-color: #EDF1F5',\n                                            }\"\n                                            :attributes=\"{ style: 'text-align: right; ' }\"\n                                        />\n                                    </kendo-grid>\n                                </v-col>\n                            </v-row>\n                            <v-divider class=\"mt-1\" />\n                            <v-card outlined dense class=\"no_border function_footer py-2\">\n             \n                                <v-btn\n                                class=\"float-right save_option mx-1 capitalize\"\n                                color=\"secondary\"\n                                @click=\"_print(3)\"\n                                >\n                                {{ $t(\"print\") }}\n                                </v-btn>\n                                <!-- <v-btn\n                                class=\"float-right mx-1 white--text capitalize\"\n                                color=\"blue\"\n                                >\n                                {{ $t(\"delete\") }}\n                                </v-btn> -->\n                                <!-- <v-btn\n                                class=\"float-right mx-1 white--text capitalize\"\n                                color=\"primary\"\n                                >\n                                {{ $t(\"edit\") }}\n                                </v-btn>  -->\n                            </v-card>\n                            <v-divider />\n                        </v-form>\n                    </v-card>\n                </v-col>\n            </v-row>\n            <LoadingMe\n                :isLoading=\"showLoading\"\n                :fullPage=\"true\"\n                :myLoading=\"true\"\n                type=\"loading\"\n            />\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport kendo from \"@progress/kendo-ui\";\n// import {i18n} from '@/i18n'\nimport Helper from \"@/helper.js\";\nimport {\n\tReconcileModel\n} from \"@/scripts/model/AppModels\";\n\nconst journalHandler = require(\"@/scripts/journalHandler\");\n// from\nconst {getFormSetting} = require(\"@/scripts/settingsHandler.js\")\nimport {print} from \"@/form/Accounting.js\";\nimport {i18n} from '@/i18n';\n\nexport default {\n\tname: \"BankReconciliationView\",\n\tprops: {\n\t\tinitReconcile: {\n\t\t\ttype: ReconcileModel,\n\t\t},\n\t},\n\tcomponents: {\n\t\t\"LoadingMe\": () => import('@/components/Loading'),\n\t},\n\tdata: () => ({\n\t\t// Obj\n\t\treconcile : new ReconcileModel(),\n        entries : [],\n        reportingEndingBalance : 0,\n        varianceAmount : 0,\n        valid: true,\n\t\t// Other\n\t\tHelper: Helper,\n\t\tnotes: [],\n\t\t// LoadingMe\n\t\tshowLoading: false,\n\t\tloadingAlert: false,\n\t\tloadingColorAlert: \"\",\n\t\tloadingTextAlert: \"\",\n\t}),\n\tmethods: {\n        _print(id) {\n\t\t\tlet print_data = this.reconcile;\n            let params = \"?formType=BankReconciliation\"\n            print_data['reportingEndingBalance'] = this.reportingEndingBalance\n            print_data['entries'] = this.entries\n\n            getFormSetting(params).then(res => {\n                if (res.data.statusCode === 200) {\n                    if (res.data.data.length > 0) {\n                        window.console.log(res.data.data[\"0\"].settings);\n                        print(print_data, id, res.data.data[\"0\"].settings);\n                    }else{\n                        this.$snotify.error(i18n.t('please_save_form_in_setting'))\n                    }   \n                }\n            });\n        },\n        initialData(){\n            if(this.initReconcile){\n\t\t\t\tthis.reconcile = Object.assign({}, this.initReconcile);\n\t\t\t\tthis.bindData();\n\t\t\t}\n        },\n\t\tasync bindData() {\n            let fiscalDate = Helper.getFiscalDateByDate(this.reconcile.ending_balance_date),\n                sdate = fiscalDate.start_date,\n                edate = this.reconcile.ending_balance_date;\n\n            if (sdate && edate) {\n                sdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z';\n\n                edate = new Date(edate);\n                edate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z';\n            } else {\n                sdate = 0;\n                edate = 0;\n            }\n\n            /* Journal */\n            let journals = await journalHandler.getEntryDetailByAccount(this.reconcile.account.uuid, {\n                        params: {\n                            start_date: sdate,\n                            end_date: edate,\n                        }\n                    })\n\n\t\t\t// Bind Obj\n\t\t\tlet entries = [],\n                dr = 0, cr = 0;\n\t\t\tjournals.entries_detail.forEach(value => {\n                let entry = value;\n\n                if(~this.reconcile.reconcile_entries.indexOf(value.entry_uuid)){\n                    entry.dr = value.amount;\n                    entry.cr = 0;\n\n                    if(value.amount < 0){\n                        entry.dr = 0;\n                        entry.cr = value.amount;\n                    }\n\n                    dr += kendo.parseFloat(entry.dr);\n                    cr += kendo.parseFloat(entry.cr);\n\n                    entries.push(entry);\n                }\n\t\t\t});\n\n            this.reportingEndingBalance = (this.reconcile.opening_balance + dr) - cr;\n\n\t\t\t// Entries\n\t\t\tthis.entries = entries;\n\t\t},\n\t\t// Row Number Template\n\t\trowNumberTmpl (dataItem) {\n\t\t\tlet ds = this.$refs.reconcileDS.kendoWidget(),\n\t\t\t\tindex = ds.indexOf(dataItem);\n\n\t\t\treturn index + 1;\n\t\t},\n\t\tgetReconcile () {\n\t\t\treturn new ReconcileModel(this.reconcile);\n\t\t},\n\t\tedit() {\n\t\t\tthis.$router.replace({ name: 'Cash Reconciliation', params: { initReconcile: this.getReconcile() } });\n\t\t},\n\t\tprint() {\n\t\t\t// Code here\n\t\t},\n\t},\n\twatch: {\n\t\tinitReconcile () {\n\t\t\tthis.initialData();\n\t\t},\n\t},\n\tmounted () {\n\t\tthis.initialData();\n\t}\n};\n</script>\n\n<style scoped>\n    @media (min-width: 1264px) {\n        .container {\n            max-width: 1080px !important;\n        }\n    }\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/business_unit/Budget.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/business_unit/Budget.vue","mtime":1642390528851},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7CmltcG9ydCBCdWRnZXRNb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvQnVkZ2V0LmpzIjsKaW1wb3J0IEJ1ZGdldExpbmVNb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvQnVkZ2V0TGluZS5qcyI7CmltcG9ydCBCdWRnZXRMaW5lRXh0ZW5kZWRNb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvQnVkZ2V0TGluZUV4dGVuZGVkLmpzIjsKaW1wb3J0IEFjY291bnRNb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvYWNjb3VudGluZy9BY2NvdW50LmpzIjsKaW1wb3J0IExvY2F0aW9uTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0xvY2F0aW9uLmpzIjsKCi8qIEVkaXRvciAqLwppbXBvcnQgTnVtYmVySW5wdXRCb3hFZGl0b3IgZnJvbSAiQC9zY3JpcHRzL2tlbmRvX2VkaXRvci9OdW1iZXJJbnB1dEJveCI7CmltcG9ydCBBY2NvdW50U2Vjb25kYXJ5RWRpdG9yIGZyb20gIkAvc2NyaXB0cy9rZW5kb19lZGl0b3IvQWNjb3VudFNlY29uZGFyeSI7CgovKiBTdG9yZSAqLwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSIKY29uc3QgaW5zdGl0dXRlID0gc3RvcmUuc3RhdGUuaW5zdGl0dXRlLmluc3RpdHV0ZQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwoKY29uc3QgYnVkZ2V0SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL3dvcmtpbmdjYXBpdGFsL2J1ZGdldEhhbmRsZXIuanMiKTsKY29uc3QgeyBTYXZlT3B0aW9uIH0gPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9Db2xsZWN0aW9ucyIpOwoKZXhwb3J0IGRlZmF1bHQgewoJbmFtZTogIkJ1c2luZXNzVW5pdEJ1ZGdldCIsCglwcm9wczogewoJCWluaXRCdWRnZXQ6IHsKCQkJdHlwZTogQnVkZ2V0TW9kZWwsCgkJfSwKCX0sCgljb21wb25lbnRzOiB7CgkJIkxvYWRpbmdNZSI6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL0xvYWRpbmcnKSwKCQkiYXBwLWxvY2F0aW9uLWRyb3Bkb3dubGlzdCI6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL2Ryb3Bkb3dubGlzdC9Mb2NhdGlvbicpLAoJCSJhcHAtZmlzY2FsLWRhdGUtZHJvcGRvd25saXN0IjogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL0Zpc2NhbERhdGVEcm9wRG93bkxpc3QnKSwKCQkiYXBwLXJlcG9ydGluZy1sYW5ndWFnZSI6ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9SZXBvcnRpbmdMYW5ndWFnZURyb3BEb3duTGlzdCIpLAoJfSwKCWRhdGE6ICgpID0+ICh7CgkJLy8gT2JqCgkJYnVkZ2V0OiBuZXcgQnVkZ2V0TW9kZWwoKSwKCQlidWRnZXRMaW5lczogW10sCgkJbG9jYXRpb246IG5ldyBMb2NhdGlvbk1vZGVsKCksCgkJdXNlcjogSGVscGVyLmdldFVzZXIoKSwKCQkvLyBGb3JtIHZhbGlkYXRpb24KCQl2YWxpZDogdHJ1ZSwKCQlpc0VkaXQ6IGZhbHNlLAoJCWFsZXJ0OiBmYWxzZSwKCQllcnJvck1lc3NhZ2U6ICIiLAoJCXNhdmVNb2RlOiAiIiwKCQlTYXZlT3B0aW9uOiBTYXZlT3B0aW9uLAoJCS8vIFJlcG9ydGluZyBMYW5ndWFnZQoJCXJlcG9ydGluZ0xhbmd1YWdlOiAiZW5nbGlzaCIsCgkJZmllbGROYW1lIDogJ2FjY291bnQubmFtZScsCgkJLy8gTG9hZGluZ01lCgkJc2hvd0xvYWRpbmc6IGZhbHNlLAoJCS8qIERpYWxvZyAqLwoJCWRpYWxvZzogZmFsc2UsCgkJc2VsZWN0ZWRSb3c6IG5ldyBCdWRnZXRMaW5lRXh0ZW5kZWRNb2RlbCgpLAoJCWNyb3NzQW1vdW50OiAwLAoJCS8qIEtlbmRvICovCgkJY29sdW1uczogW10sCgkJYnVkZ2V0TGluZURTIDogbmV3IGtlbmRvLmRhdGEuVHJlZUxpc3REYXRhU291cmNlKHsKCQkJCXNvcnQ6IFsKCQkJCQkJeyBmaWVsZDogImFjY291bnQudHlwZV9jb2RlIiwgZGlyOiAiYXNjIiB9LAoJCQkJCQl7IGZpZWxkOiAibnVtYmVyIiwgZGlyOiAiYXNjIiB9LAoJCQkJXSwKCQkJCXNjaGVtYTogewoJCQkJCQltb2RlbDogewoJCQkJCQkJCWlkOiAidXVpZCIsCgkJCQkJCQkJZXhwYW5kZWQ6IHRydWUKCQkJCQkJfQoJCQkJfQoJCX0pLAoJfSksCgltZXRob2RzOiB7CgkJLy8gSW5pdGlhbCBEYXRhCgkJaW5pdGlhbERhdGEoKSB7CgkJCWlmKHRoaXMuaW5pdEJ1ZGdldCl7IC8vIEVkaXQgTW9kZQoJCQkJdGhpcy5pc0VkaXQgPSB0cnVlOwoJCQkJdGhpcy5idWRnZXQgPSB0aGlzLmluaXRCdWRnZXQ7CgkJCQl0aGlzLmJpbmREYXRhKCk7CgkJCX1lbHNleyAvLyBCcmFuZCBOZXcKCQkJCXRoaXMuaXNFZGl0ID0gZmFsc2U7CgkJCQl0aGlzLnNldERlZmF1bHREYXRhKCk7CgkJCX0KCQl9LAoJCS8qIEluaXRpYWwgVHJlZSBMaXN0ICovCgkJaW5pdGlhbFRyZWVMaXN0KCl7CgkJCWtlbmRvLmpRdWVyeSgiI2J1ZGdldExpbmVUcmVlTGlzdCIpLmtlbmRvVHJlZUxpc3QoewoJCQkJZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuVHJlZUxpc3REYXRhU291cmNlKCksCgkJCQlkYXRhQm91bmQ6IHRoaXMub25EYXRhQm91bmQsCgkJCQllZGl0YWJsZTogImluY2VsbCIsCgkJCQlyZXNpemFibGU6IHRydWUsCgkJCQljb2x1bW5NZW51OiB0cnVlLAoJCQkJY29sdW1uczogdGhpcy5jb2x1bW5zLAoJCQl9KTsKCQl9LAoJCS8vIFNldCBkZWZhdWx0IGRhdGEKCQlzZXREZWZhdWx0RGF0YSgpIHsKCQkJdGhpcy5idWRnZXQgPSBuZXcgQnVkZ2V0TW9kZWwoewoJCQkJZmlzY2FsX3llYXI6IGluc3RpdHV0ZS5maXNjYWxEYXRlWzBdLAoJCQl9KTsKCQkJLy8gdGhpcy5zZXREZWZhdWx0QnVkZ2V0TGluZSgpOwoJCX0sCgkJLy8gQmluZCBkYXRhIGZvciBlZGl0IG1vZGUKCQlhc3luYyBiaW5kRGF0YSgpIHsKCQkJLyogTG9jYXRpb24gKi8KCQkJYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvY2F0aW9ucy9nZXRMaXN0Jyk7CgkJCXRoaXMubG9jYXRpb24gPSBuZXcgTG9jYXRpb25Nb2RlbCh0aGlzLmxvY2F0aW9ucy5maW5kKGkgPT4gaS5pZCA9PT0gdGhpcy5idWRnZXQubG9jYXRpb25fdXVpZCkpOwoJCQkKCQkJdGhpcy5zZXREZWZhdWx0QnVkZ2V0TGluZSgpOwoJCX0sCgkJLyogQ29uZmlybSBSZWxvYWQgQWNjb3VudHMgKi8KCQljb25maXJtUmVsb2FkKCkgewoJCQlpZih0aGlzLmJ1ZGdldExpbmVEUy50b3RhbCgpID09PSAwKXsKCQkJCXRoaXMuc2V0RGVmYXVsdEJ1ZGdldExpbmUoKTsKCQkJfWVsc2V7CgkJCQl0aGlzLiRzd2FsKHsKCQkJCQl0aXRsZTogaTE4bi50KCdyZWxvYWRfZGF0YV8/JyksCgkJCQkJdGV4dDogaTE4bi50KCd0aGlzX3dpbGxfcmVzZXRfYWxsX2Ftb3VudF90b196ZXJvJyksCgkJCQkJaWNvbjogIndhcm5pbmciLAoJCQkJCXNob3dDYW5jZWxCdXR0b246IHRydWUsCgkJCQkJY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCdjYW5jZWwnKSwKCQkJCQljb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKCQkJCQljYW5jZWxCdXR0b25Db2xvcjogIiNFRDFBM0EiLAoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoJ3JlbG9hZCcpLAoJCQkJfSkudGhlbigocmVzdWx0KSA9PiB7CgkJCQkJaWYgKHJlc3VsdC52YWx1ZSkgewoJCQkJCQl0aGlzLnNldERlZmF1bHRCdWRnZXRMaW5lKCk7CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9LAoJCS8vIFNldCBCdWRnZXQgTGluZXMKCQlhc3luYyBzZXREZWZhdWx0QnVkZ2V0TGluZSAoKXsKCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwoKCQkJCS8vIEFjY291bnQKCQkJCWF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhY2NvdW50aW5nL2dldEFjY291bnRzJyk7CgkJCQkKCQkJCWxldCBnID0ge307CgkJCQl0aGlzLmFjY291bnRzLmZvckVhY2godmFsdWUgPT4gewoJCQkJCWlmKHZhbHVlLmFjY291bnRfdHlwZS5udW1iZXIgPj0gMzIgJiYgdmFsdWUuYWNjb3VudF90eXBlLm51bWJlciA8PSA0Myl7Ly9GaWx0ZXIgUEwgYWNjb3VudHMgMzIgdG8gNDMKCQkJCQkJbGV0IGFjY291bnQgPSB2YWx1ZTsKCgkJCQkJCS8qIEdST1VQSU5HICovCgkJCQkJCS8qIFRvcCBMZXZlbCBBY2NvdW50IFR5cGUgKi8KCQkJCQkJaWYoIWdbYWNjb3VudC50eXBlX2NvZGVdKXsKCQkJCQkJCWdbYWNjb3VudC50eXBlX2NvZGVdID0gbmV3IEJ1ZGdldExpbmVFeHRlbmRlZE1vZGVsKHsKCQkJCQkJCQl1dWlkIDogYWNjb3VudC50eXBlX2NvZGUsCgkJCQkJCQkJbnVtYmVyIDogYWNjb3VudC50eXBlX2NvZGUsCgkJCQkJCQkJYWNjb3VudF91dWlkIDogYWNjb3VudC51dWlkLAoJCQkJCQkJCWFjY291bnQgOiBhY2NvdW50LmFjY291bnRfdHlwZSwKCQkJCQkJCX0pOwoJCQkJCQl9CgoJCQkJCQkvKiBQYXJlbnQgTGV2ZWwgKi8KCQkJCQkJbGV0IHRoaXNBY2NvdW50UGFyZW50SWQgPSAiIjsKCQkJCQkJaWYoYWNjb3VudC5oYXNPd25Qcm9wZXJ0eSgicGFyZW50X2FjY291bnQiKSl7CgkJCQkJCQlsZXQgY3VycmVudFBhcmVudEFjY291bnQgPSBuZXcgQWNjb3VudE1vZGVsKGFjY291bnQucGFyZW50X2FjY291bnQpLCBjb3VudGVyID0gMDsKCQkJCQkJCXdoaWxlIChjdXJyZW50UGFyZW50QWNjb3VudC5udW1iZXIgIT09ICIiKSB7CgkJCQkJCQkJLyogR2V0IGFjY291bnQgYnkgdXVpZCBvciBiYW5oamlfYWNjb3VudF9udW1iZXIgKi8KCQkJCQkJCQlsZXQgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwoKTsKCQkJCQkJCQlpZihjdXJyZW50UGFyZW50QWNjb3VudC51dWlkICE9PSAiIil7LyogR2V0IGJ5IHV1aWQgKi8KCQkJCQkJCQkJYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwodGhpcy5hY2NvdW50cy5maW5kKChpdGVtKSA9PiBpdGVtLnV1aWQgPT09IGN1cnJlbnRQYXJlbnRBY2NvdW50LnV1aWQpKTsKCQkJCQkJCQl9ZWxzZXsvKiBHZXQgYnkgYmFuaGppX2FjY291bnRfbnVtYmVyIGJlY2F1c2UgZGVmYXVsdCBkYXRhIGhhcyBubyB1dWlkICovCgkJCQkJCQkJCWlmKGN1cnJlbnRQYXJlbnRBY2NvdW50LmJhbmhqaV9hY2NvdW50X251bWJlciAhPT0gIiIpewoJCQkJCQkJCQkJYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwodGhpcy5hY2NvdW50cy5maW5kKChpdGVtKSA9PiBpdGVtLmJhbmhqaV9hY2NvdW50X251bWJlciA9PT0gY3VycmVudFBhcmVudEFjY291bnQuYmFuaGppX2FjY291bnRfbnVtYmVyKSk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgoJCQkJCQkJCS8qIFNldCBUaGlzIEFjY291bnQgUGFyZW50IElkICovCgkJCQkJCQkJaWYoY291bnRlciA9PT0gMCl7CgkJCQkJCQkJCQl0aGlzQWNjb3VudFBhcmVudElkID0gYWNjb3VudFBhcmVudC51dWlkOwoJCQkJCQkJCX0KCgkJCQkJCQkJLyogRmluZCBOZXh0IFBhcmVudCAqLwoJCQkJCQkJCWxldCBuZXh0UGFyZW50ID0gbmV3IEFjY291bnRNb2RlbCgpOwoJCQkJCQkJCWlmKGFjY291bnRQYXJlbnQuaGFzT3duUHJvcGVydHkoInBhcmVudF9hY2NvdW50IikpewoJCQkJCQkJCQlsZXQgcGFyZW50T2ZBY2NvdW50UGFyZW50ID0gbmV3IEFjY291bnRNb2RlbChhY2NvdW50UGFyZW50LnBhcmVudF9hY2NvdW50KTsKCQkJCQkJCQkJaWYocGFyZW50T2ZBY2NvdW50UGFyZW50Lm51bWJlciAhPT0gIiIpewoJCQkJCQkJCQkJaWYocGFyZW50T2ZBY2NvdW50UGFyZW50LnV1aWQgIT09ICIiKXsvKiBHZXQgYnkgdXVpZCAqLwoJCQkJCQkJCQkJCW5leHRQYXJlbnQgPSB0aGlzLmFjY291bnRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udXVpZCA9PT0gcGFyZW50T2ZBY2NvdW50UGFyZW50LnV1aWQpOwoJCQkJCQkJCQkJfWVsc2V7LyogR2V0IGJ5IGJhbmhqaV9hY2NvdW50X251bWJlciBiZWNhdXNlIGRlZmF1bHQgZGF0YSBoYXMgbm8gdXVpZCAqLwoJCQkJCQkJCQkJCWlmKHBhcmVudE9mQWNjb3VudFBhcmVudC5iYW5oamlfYWNjb3VudF9udW1iZXIgIT09ICIiKXsKCQkJCQkJCQkJCQkJbmV4dFBhcmVudCA9IHRoaXMuYWNjb3VudHMuZmluZCgoaXRlbSkgPT4gaXRlbS5iYW5oamlfYWNjb3VudF9udW1iZXIgPT09IHBhcmVudE9mQWNjb3VudFBhcmVudC5iYW5oamlfYWNjb3VudF9udW1iZXIpOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCQkJCgkJCQkJCQkJLyogU2V0IFBhcmVudCBJZCAqLwoJCQkJCQkJCWxldCBwYXJlbnRJZCA9IGFjY291bnRQYXJlbnQudHlwZV9jb2RlOwoJCQkJCQkJCW5leHRQYXJlbnQgPSBuZXcgQWNjb3VudE1vZGVsKG5leHRQYXJlbnQpOwoJCQkJCQkJCWlmKG5leHRQYXJlbnQubnVtYmVyICE9PSAiIil7CgkJCQkJCQkJCXBhcmVudElkID0gbmV4dFBhcmVudC51dWlkOwoKCQkJCQkJCQkJLyogU2V0IG5leHQgcGFyZW50IGFjY291bnQgKi8KCQkJCQkJCQkJT2JqZWN0LmFzc2lnbihjdXJyZW50UGFyZW50QWNjb3VudCwgbmV4dFBhcmVudCk7CgkJCQkJCQkJfWVsc2V7CgkJCQkJCQkJCS8qIFNldCBsb29wIHRvIGVuZCAqLwoJCQkJCQkJCQljdXJyZW50UGFyZW50QWNjb3VudC5udW1iZXIgPSAiIjsKCQkJCQkJCQl9CgoJCQkJCQkJCS8qIEFkZCBQYXJlbnQgTGV2ZWwgKi8KCQkJCQkJCQlpZighZ1thY2NvdW50UGFyZW50LnV1aWRdKXsKCQkJCQkJCQkJZ1thY2NvdW50UGFyZW50LnV1aWRdID0gbmV3IEJ1ZGdldExpbmVFeHRlbmRlZE1vZGVsKHsKCQkJCQkJCQkJCXV1aWQgOiBhY2NvdW50UGFyZW50LnV1aWQsCgkJCQkJCQkJCQlhY2NvdW50X3V1aWQgOiBhY2NvdW50UGFyZW50LnV1aWQsCgkJCQkJCQkJCQludW1iZXIgOiBhY2NvdW50UGFyZW50Lm51bWJlciwKCQkJCQkJCQkJCXBhcmVudElkIDogcGFyZW50SWQsCgkJCQkJCQkJCQlhY2NvdW50IDogYWNjb3VudFBhcmVudCwKCQkJCQkJCQkJfSk7CgkJCQkJCQkJfQoJCQkJCQkJCQkKCQkJCQkJCQkvKiBJbmNyZWFzZSBDb3VudGVyIEJ5IDEgKi8KCQkJCQkJCQljb3VudGVyKys7CgkJCQkJCQl9LyogRW5kIFdoaWxlIExvb3AgKi8KCQkJCQkJfQoJCQkJCQkJCgkJCQkJCS8qIENoaWxkIExldmVsICovCgkJCQkJCWlmKCFnW2FjY291bnQudXVpZF0pewoJCQkJCQkJZ1thY2NvdW50LnV1aWRdID0gbmV3IEJ1ZGdldExpbmVFeHRlbmRlZE1vZGVsKHsKCQkJCQkJCQl1dWlkIDogYWNjb3VudC51dWlkLAoJCQkJCQkJCWFjY291bnRfdXVpZCA6IGFjY291bnQudXVpZCwKCQkJCQkJCQludW1iZXIgOiBhY2NvdW50Lm51bWJlciwKCQkJCQkJCQlhY2NvdW50IDogYWNjb3VudCwKCQkJCQkJCX0pOwoJCQkJCQl9CgoJCQkJCQkvKiBTZXQgUGFyZW50IElkIE9yIFNlbGYgUGFyZW50ICovCgkJCQkJCWlmKHRoaXNBY2NvdW50UGFyZW50SWQgIT09ICIiKXsvKiBDaGlsZCBMZXZlbCAqLwoJCQkJCQkJZ1thY2NvdW50LnV1aWRdLnBhcmVudElkID0gdGhpc0FjY291bnRQYXJlbnRJZDsKCQkJCQkJfWVsc2V7LyogQ2hpbGQgQXMgUGFyZW50ICovCgkJCQkJCQlnW2FjY291bnQudXVpZF0ucGFyZW50SWQgPSBhY2NvdW50LnR5cGVfY29kZTsgLyogU2VsZiBBcyBQYXJlbnQgKi8KCQkJCQkJfQoJCQkJCQkJCgkJCQkJCS8vIDEyIG1vbnRocyB3aXRoIGFtb3VudAoJCQkJCQlmb3IgKGxldCBpID0gMDsgaSA8IDEyOyBpKyspIHsKCQkJCQkJCS8vIFNldCBNb250aCBPZgoJCQkJCQkJbGV0IHNkYXRlID0gbmV3IERhdGUodGhpcy5idWRnZXQuZmlzY2FsX3llYXIuc3RhcnRfZGF0ZSk7CgkJCQkJCQlzZGF0ZS5zZXRNb250aChzZGF0ZS5nZXRNb250aCgpICsgaSk7CgoJCQkJCQkJZ1thY2NvdW50LnV1aWRdLm1vbnRobHlfYW1vdW50LnB1c2goewoJCQkJCQkJCW1vbnRoX29mIDogc2RhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgNyksCgkJCQkJCQkJYW1vdW50IDogMCwKCQkJCQkJCX0pOwoJCQkJCQl9CgoJCQkJCQkvKiBNYXRjaGluZyBBY2NvdW50ICovCgkJCQkJCWlmKHRoaXMuaXNFZGl0KXsKCQkJCQkJCWxldCBibGluZSA9IHRoaXMuYnVkZ2V0LmxpbmVzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uYWNjb3VudF91dWlkID09PSB2YWx1ZS51dWlkKTsKCQkJCQkJCWlmKGJsaW5lKXsKCQkJCQkJCQkvKiBSZXZlcnNlIE5hdHVyZSAqLwoJCQkJCQkJCWxldCBuYXR1cmUgPSAxOyAvKiBEZWZhdWx0IE5hdXJlIGlzIERyID0gMSAqLwoJCQkJCQkJCWlmKGFjY291bnQuYWNjb3VudF90eXBlLm5hdHVyZS50b0xvd2VyQ2FzZSgpID09PSAiY3IiKXsKCQkJCQkJCQkJbmF0dXJlID0gLTE7CgkJCQkJCQkJfQoKCQkJCQkJCQlnW2FjY291bnQudXVpZF0uc2Vjb25kYXJ5X2FjY291bnQgPSBuZXcgQWNjb3VudE1vZGVsKHRoaXMuc2Vjb25kYXJ5QWNjb3VudHMuZmluZCgoaXRlbSkgPT4gaXRlbS51dWlkID09PSBibGluZS5zZWNvbmRhcnlfYWNjb3VudF91dWlkKSk7CgkJCQkJCQkJZ1thY2NvdW50LnV1aWRdLm5vdGUgPSBibGluZS5ub3RlOwoJCQkJCQkJCWdbYWNjb3VudC51dWlkXS5hbW91bnQgPSBibGluZS5hbW91bnQgKiBuYXR1cmU7CgkJCQkJCQkJZ1thY2NvdW50LnV1aWRdLm1vbnRobHlfYW1vdW50ID0gYmxpbmUubW9udGhseV9hbW91bnQ7CgkJCQkJCQkJZ1thY2NvdW50LnV1aWRdLm1vbnRobHlfYW1vdW50LmZvckVhY2gobWEgPT4gewoJCQkJCQkJCQltYS5hbW91bnQgPSBtYS5hbW91bnQgKiBuYXR1cmU7CgkJCQkJCQkJfSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJCQoJCQkJLyogQmluZCBCdWRnZXQgTGluZSAqLwoJCQkJdGhpcy5idWRnZXRMaW5lRFMuZGF0YShPYmplY3QudmFsdWVzKGcpKTsKCgkJCQkvKiBTZXQgTmV3IERhdGFzb3VyY2UgKi8KCQkJCWxldCB0cmVlTGlzdCA9IGtlbmRvLmpRdWVyeSgiI2J1ZGdldExpbmVUcmVlTGlzdCIpLmRhdGEoImtlbmRvVHJlZUxpc3QiKTsKCQkJCXRyZWVMaXN0LnNldERhdGFTb3VyY2UodGhpcy5idWRnZXRMaW5lRFMpOwoKCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQl9LAoJCS8vIFJvdyBUZW1wbGF0ZQoJCW5hbWVUbXBsKGRhdGFJdGVtKXsKCQkJCS8qIE5hbWUgaW4gbGFuZ3VhZ2UgKi8KCQkJCWxldCBuYW1lID0gZGF0YUl0ZW0uYWNjb3VudC5uYW1lOwoJCQkJaWYodGhpcy5yZXBvcnRpbmdMYW5ndWFnZSA9PT0gImxvY2FsIil7CgkJCQkJCW5hbWUgPSBkYXRhSXRlbS5hY2NvdW50LmxvY2FsX25hbWU7CgkJCQl9CgoJCQkJLyogRGVmaW5lIHJlc3VsdCAqLwoJCQkJbGV0IHJlc3VsdCA9IGA8c3Bhbj4ke2RhdGFJdGVtLm51bWJlcn0gLSAke25hbWV9PC9zcGFuPmA7CgoJCQkJLy8gLyogVG9wIExldmVsICovCgkJCQlpZihkYXRhSXRlbS5wYXJlbnRJZCA9PT0gbnVsbCl7CgkJCQkJCXJlc3VsdCA9IGA8c3BhbiBzdHlsZT0nZm9udC13ZWlnaHQ6IGJvbGRlcjsnPiR7bmFtZX08L3NwYW4+YDsKCQkJCX0KCgkJCQkvKiBQYXJlbnQgTGV2ZWwgKi8KCQkJCWlmKGRhdGFJdGVtLmhhc0NoaWxkcmVuICYmIGRhdGFJdGVtLm51bWJlci5sZW5ndGggPiAzKXsKCQkJCQkJcmVzdWx0ID0gYDxzcGFuIHN0eWxlPSdmb250LXdlaWdodDogYm9sZGVyOyc+JHtkYXRhSXRlbS5udW1iZXJ9IC0gJHtuYW1lfTwvc3Bhbj5gOwoJCQkJfQoKCQkJCXJldHVybiByZXN1bHQ7CgkJfSwKCQlzZWNvbmRhcnlBY2NvdW50VG1wbChkYXRhSXRlbSkgewoJCQlsZXQgcmVzdWx0ID0gIiI7CgkJCWlmKGRhdGFJdGVtLnNlY29uZGFyeV9hY2NvdW50LnV1aWQgIT09ICcnKXsKCQkJCXJlc3VsdCA9IGA8c3Bhbj4ke2RhdGFJdGVtLnNlY29uZGFyeV9hY2NvdW50Lm51bWJlcn0gLSAke2RhdGFJdGVtLnNlY29uZGFyeV9hY2NvdW50Lm5hbWV9PC9zcGFuPmA7CgkJCX0KCgkJCXJldHVybiByZXN1bHQ7CgkJfSwKCQljb3B5QWNyb3NzKGUpewoJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJCWxldCB0cmVlTGlzdCA9IGtlbmRvLmpRdWVyeSgiI2J1ZGdldExpbmVUcmVlTGlzdCIpLmRhdGEoImtlbmRvVHJlZUxpc3QiKTsKCQkJCXRoaXMuc2VsZWN0ZWRSb3cgPSB0cmVlTGlzdC5kYXRhSXRlbShrZW5kby5qUXVlcnkoZS50YXJnZXQpLmNsb3Nlc3QoInRyIikpOwoKCQkJCXRoaXMuZGlhbG9nID0gdHJ1ZTsKCQl9LAoJCWFwcGx5QWNyb3NzQW1vdW50KCl7CgkJCQl0aGlzLmRpYWxvZyA9IGZhbHNlOwoKCQkJCXRoaXMuc2VsZWN0ZWRSb3cubW9udGhseV9hbW91bnQuZm9yRWFjaCh2YWx1ZSA9PiB7CgkJCQkJCXZhbHVlLmFtb3VudCA9IGtlbmRvLnBhcnNlRmxvYXQodGhpcy5jcm9zc0Ftb3VudCk7CgkJCQl9KTsKCQkJCXRoaXMuc2VsZWN0ZWRSb3cuYW1vdW50ID0ga2VuZG8ucGFyc2VGbG9hdCh0aGlzLmNyb3NzQW1vdW50KSAqIDEyOwoKCQkJCS8qIFJlZnJlc2ggKi8KCQkJCWxldCB0cmVlTGlzdCA9IGtlbmRvLmpRdWVyeSgiI2J1ZGdldExpbmVUcmVlTGlzdCIpLmRhdGEoImtlbmRvVHJlZUxpc3QiKTsKCQkJCXRyZWVMaXN0LnJlZnJlc2goKTsKCgkJCQl0aGlzLmNyb3NzQW1vdW50ID0gMDsKCQl9LAoJCWdlbmVyYXRlQ29sdW1uKCkgewoJCQkJbGV0IGhlYWRlckF0dHJpYnV0ZXMgPSB7CgkJCQkJCWNsYXNzOiAidGFibGUtaGVhZGVyLWNlbGwiLAoJCQkJCQlzdHlsZTogImZvbnQtd2VpZ2h0OiBib2xkO3RleHQtYWxpZ246IGNlbnRlcjtwYWRkaW5nLXJpZ2h0OiAzNXB4OyBmb250LXNpemU6IDE0cHgiLAoJCQkJfSwKCQkJCWF0dHJpYnV0ZXMgPSB7CgkJCQkJCWNsYXNzOiAidGFibGUtY2VsbCIsCgkJCQkJCXN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMTRweCIsCgkJCQl9OwoKCQkJCWxldCBjb2x1bW5zID0gWwoJCQkJCQl7CgkJCQkJCQkJZmllbGQ6IHRoaXMuZmllbGROYW1lLAoJCQkJCQkJCXRpdGxlOiBpMThuLnQoImFjY291bnQiKSwKCQkJCQkJCQl0ZW1wbGF0ZTogdGhpcy5uYW1lVG1wbCwKCQkJCQkJCQllZGl0YWJsZTogKCk9PnsgcmV0dXJuIGZhbHNlIH0sCgkJCQkJCQkJd2lkdGg6IDMwMCwKCQkJCQkJCQloZWFkZXJBdHRyaWJ1dGVzOiBoZWFkZXJBdHRyaWJ1dGVzLAoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkJZmllbGQ6ICJzZWNvbmRhcnlfYWNjb3VudCIsCgkJCQkJCQkJdGl0bGU6IGkxOG4udCgic2Vjb25kYXJ5X2FjY291bnQiKSwKCQkJCQkJCQl0ZW1wbGF0ZTogdGhpcy5zZWNvbmRhcnlBY2NvdW50VG1wbCwKCQkJCQkJCQllZGl0b3I6IEFjY291bnRTZWNvbmRhcnlFZGl0b3IsCgkJCQkJCQkJaGlkZGVuOiAhdGhpcy4kc3RvcmUuc3RhdGUuYWNjb3VudGluZy5zZWNvbmRhcnlBY2NvdW50LAoJCQkJCQkJCWVkaXRhYmxlOiAoZGF0YUl0ZW0pPT57CgkJCQkJCQkJCQlyZXR1cm4gIWRhdGFJdGVtLmhhc0NoaWxkcmVuOwoJCQkJCQkJCX0sCgkJCQkJCQkJd2lkdGg6IDMwMCwKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJCWZpZWxkOiAibm90ZSIsCgkJCQkJCQkJdGl0bGU6IGkxOG4udCgibm90ZSIpLAoJCQkJCQkJCXdpZHRoOiAyMDAsCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCQl0aXRsZTogaTE4bi50KCJhY3Rpb24iKSwKCQkJCQkJCQljb21tYW5kOiBbewoJCQkJCQkJCQkJbmFtZTogImNvcHljcm9zcyIsCgkJCQkJCQkJCQl0ZXh0OiAiY29weSBjcm9zcyIsCgkJCQkJCQkJCQljbGljazogdGhpcy5jb3B5QWNyb3NzLAoJCQkJCQkJCX1dLAoJCQkJCQkJCXdpZHRoOiAxNTAsCgkJCQkJCX0KCQkJCV07CgkJCQkKCQkJCS8qIDEyIE1vbnRocyAqLwoJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CgkJCQkJCWNvbHVtbnMucHVzaCh7CgkJCQkJCQkJZmllbGQ6IGBtb250aGx5X2Ftb3VudFske2l9XS5hbW91bnRgLAoJCQkJCQkJCWZvcm1hdDogInswOm59IiwKCQkJCQkJCQllZGl0b3I6IE51bWJlcklucHV0Qm94RWRpdG9yLAoJCQkJCQkJCXdpZHRoOiAxNTAsCgkJCQkJCQkJYXR0cmlidXRlczogYXR0cmlidXRlcywKCQkJCQkJfSk7CgkJCQl9CgoJCQkJLyogVG90YWwgKi8KCQkJCWNvbHVtbnMucHVzaCh7CgkJCQkJCWZpZWxkOiAiYW1vdW50IiwKCQkJCQkJdGl0bGU6IGkxOG4udCgidG90YWwiKSwKCQkJCQkJZm9ybWF0OiAiezA6bn0iLAoJCQkJCQllZGl0YWJsZTogKCk9PntyZXR1cm4gZmFsc2V9LAoJCQkJCQl3aWR0aDogMTUwLAoJCQkJCQlhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAoJCQkJfSk7CgoJCQkJLyogU2V0IEFsbCBDb2x1bW5zICovCgkJCQl0aGlzLmNvbHVtbnMgPSBjb2x1bW5zOwoJCX0sCgkJLyogT24gZGF0YWJvdW5kICovCgkJb25EYXRhQm91bmQgKGUpIHsKCQkJLyogVGl0bGVzICovCgkJCWxldCB0cmVlTGlzdCA9IGtlbmRvLmpRdWVyeSgiI2J1ZGdldExpbmVUcmVlTGlzdCIpLmRhdGEoImtlbmRvVHJlZUxpc3QiKTsKCQkJaWYodGhpcy5idWRnZXQuZmlzY2FsX3llYXIpewoJCQkJbGV0IGZpc2NhbE1vbnRocyA9IEhlbHBlci5nZW5lcmF0ZUZpc2NhbE1vbnRocyh0aGlzLmJ1ZGdldC5maXNjYWxfeWVhci5zdGFydF9kYXRlLCB0aGlzLmJ1ZGdldC5maXNjYWxfeWVhci5lbmRfZGF0ZSwgIjEyIik7CgkJCQlmb3IgKGxldCBrID0gMDsgayA8IDEyOyBrKyspIHsKCQkJCQljb25zdCBlbGVtZW50ID0gZmlzY2FsTW9udGhzW2tdOwoJCQkJCXRyZWVMaXN0LnRoZWFkLmZpbmQoYFtkYXRhLWZpZWxkfj0nbW9udGhseV9hbW91bnRbJHtrfV0uYW1vdW50J11gKS5odG1sKGVsZW1lbnQpOwoJCQkJfQoJCQl9CgoJCQkvKiBIZWFkZXJzICovCgkJCXZhciBoZWFkZXJzID0gZS5zZW5kZXIudGhlYWQuY2hpbGRyZW4oKTsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJzLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgdGggPSBrZW5kby5qUXVlcnkoaGVhZGVyc1tpXSk7CgkJCQl0aC5jc3MoImZvbnQtd2VpZ2h0IiwgImJvbGQiKTsKCQkJCXRoLmNzcygidGV4dC1hbGlnbiIsICJjZW50ZXIiKTsKCQkJfQoKCQkJLyogSXRlbXMgKi8KCQkJdmFyIGl0ZW1zID0gZS5zZW5kZXIuaXRlbXMoKTsKCQkJZm9yICh2YXIgaiA9IDA7IGogPCBpdGVtcy5sZW5ndGg7IGorKykgewoJCQkJdmFyIGRhdGFJdGVtID0gZS5zZW5kZXIuZGF0YUl0ZW0oaXRlbXNbal0pOwoJCQkJdmFyIHJvdyA9IGtlbmRvLmpRdWVyeShpdGVtc1tqXSk7CgoJCQkJLyogUGFyZW50IGluIGJvbGQgKi8KCQkJCWlmKGRhdGFJdGVtLmdldCgiaGFzQ2hpbGRyZW4iKSB8fCBkYXRhSXRlbS5nZXQoInBhcmVudElkIikgPT09IG51bGwpewoJCQkJCXJvdy5maW5kKCJbZGF0YS1jb21tYW5kPSdjb3B5Y3Jvc3MnXSIpLmhpZGUoKTsKCQkJCQlyb3cuY3NzKCJmb250LXdlaWdodCIsICJib2xkIik7CgkJCQl9CgkJCX0KCQl9LAoJCS8vIERhdGFTb3VyY2UgQ2hhbmdlcwoJCW9uRGF0YVNvdXJjZUNoYW5nZXMoZSkgewoJCQlpZiAoZS5maWVsZCkgewoJCQkJbGV0IGRhdGFSb3cgPSBlLml0ZW1zWzBdOwoKCQkJCWlmIChlLmZpZWxkID09PSAic2Vjb25kYXJ5X2FjY291bnQiKSB7CgkJCQkJCWlmIChkYXRhUm93LnNlY29uZGFyeV9hY2NvdW50ICE9PSBudWxsKSB7CgkJCQkJCQkJZGF0YVJvdy5zZXQoInNlY29uZGFyeV9hY2NvdW50X3V1aWQiLCBkYXRhUm93LnNlY29uZGFyeV9hY2NvdW50LnV1aWQpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJCS8vIFNldCBkZWZhdWx0IHdoZW4gZGVzZWxlY3QKCQkJCQkJCQlkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY291bnRfdXVpZCIsICIiKTsKCQkJCQkJCQlkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY291bnQiLCBuZXcgQWNjb3VudE1vZGVsKCkpOwoJCQkJCQl9CgkJCQl9CgkJCX0KCgkJCQl0aGlzLmRhdGFTb3VyY2VBdXRvQ2FsY3VsYXRlKCk7CgkJfSwKCQkvLyBBdXRvIENhbGN1bGF0ZSBJbiBEYXRhU291cmNlCgkJZGF0YVNvdXJjZUF1dG9DYWxjdWxhdGUoKSB7CgkJCQkvLyBTdW0gQW1vdW50CgkJCQl0aGlzLmJ1ZGdldExpbmVEUy5kYXRhKCkuZm9yRWFjaCh2YWx1ZSA9PiB7CgkJCQkJCWxldCBzdW1BbXQgPSAwOwoJCQkJCQl2YWx1ZS5tb250aGx5X2Ftb3VudC5mb3JFYWNoKGVsZSA9PiB7CgkJCQkJCQkJc3VtQW10ICs9IGVsZS5hbW91bnQ7CgkJCQkJCX0pOwoJCQkJCQl2YWx1ZS5zZXQoImFtb3VudCIsIHN1bUFtdCk7CgkJCQl9KTsKCQl9LAoJCS8vIFNocmluayBEYXRhCgkJc2hyaW5rRGF0YSgpIHsKCQkJCS8vIExvY2F0aW9uCgkJCQl0aGlzLmJ1ZGdldC5sb2NhdGlvbl91dWlkID0gdGhpcy5sb2NhdGlvbi5pZDsKCgkJCQkvLyBMaW5lcwoJCQkJbGV0IGxpbmVzID0gW107CgkJCQl0aGlzLmJ1ZGdldExpbmVEUy5kYXRhKCkuZm9yRWFjaCh2YWx1ZSA9PiB7CgkJCQkJCS8vIEFkZCBhY2NvdW50IGxpbmUgd2l0aCBhbW91bnQgbm90IDAKCQkJCQkJaWYodmFsdWUuYW1vdW50ICE9PSAwKXsKCQkJCQkJCQkvKiBBcHBseSBOYXR1cmUgKi8KCQkJCQkJCQlpZih2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5uYXR1cmUudG9Mb3dlckNhc2UoKSA9PT0gImNyIil7CgkJCQkJCQkJCQkvKiBBbW91bnQgKi8KCQkJCQkJCQkJCXZhbHVlLmFtb3VudCA9IHZhbHVlLmFtb3VudCAqIC0xOwoKCQkJCQkJCQkJCS8qIE1vbnRobHkgQW1vdW50ICovCgkJCQkJCQkJCQl2YWx1ZS5tb250aGx5X2Ftb3VudC5mb3JFYWNoKGVsZSA9PiB7CgkJCQkJCQkJCQkJCWVsZS5hbW91bnQgPSBlbGUuYW1vdW50ICogLTE7CgkJCQkJCQkJCQl9KTsKCQkJCQkJCQl9CgoJCQkJCQkJCWxpbmVzLnB1c2gobmV3IEJ1ZGdldExpbmVNb2RlbCh2YWx1ZSkpOwoJCQkJCQl9CgkJCQl9KTsKCQkJCXRoaXMuYnVkZ2V0LmxpbmVzID0gbGluZXM7CgoJCQkJLy8gVXNlcgoJCQkJaWYgKHRoaXMuaXNFZGl0KSB7CgkJCQkJCXRoaXMuYnVkZ2V0Lm1vZGlmaWVkX2J5ID0gdGhpcy51c2VyOwoJCQkJfSBlbHNlIHsKCQkJCQkJdGhpcy5idWRnZXQuY3JlYXRlZF9ieSA9IHRoaXMudXNlcjsKCQkJCX0KCQl9LAoJCS8vIFZhbGlkYXRpbmcKCQl2YWxpZGF0ZUZvcm0oKSB7CgkJCWxldCByZXN1bHQgPSB0cnVlLAoJCQkJbXNnID0gIiI7CgoJCQkvLyBOYW1lCgkJCWlmKHRoaXMuYnVkZ2V0Lm5hbWUgPT09ICcnKXsKCQkJCW1zZyArPSBgPHA+JHtpMThuLnQoIm5hbWVfaXNfcmVxdWlyZWQiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvLyBMb2NhdGlvbgoJCQlpZih0aGlzLmxvY2F0aW9uLmlkID09PSAnJyl7CgkJCQltc2cgKz0gYDxwPiR7aTE4bi50KCJidXNpbmVzc191bml0X2lzX3JlcXVpcmVkIil9PC9wPmA7CgkJCQlyZXN1bHQgPSBmYWxzZTsKCQkJfQoKCQkJLy8gRmlzY2FsIERhdGUKCQkJaWYodGhpcy5idWRnZXQuZmlzY2FsX3llYXIuaWQgPT09ICcnKXsKCQkJCW1zZyArPSBgPHA+JHtpMThuLnQoImZpc2NhbF9kYXRlX2lzX3JlcXVpcmVkIil9PC9wPmA7CgkJCQlyZXN1bHQgPSBmYWxzZTsKCQkJfQoKCQkJLy8gQW1vdW50CgkJCWxldCBoYXNaZXJvQW1vdW50ID0gdHJ1ZTsKCQkJdGhpcy5idWRnZXRMaW5lRFMuZGF0YSgpLmZvckVhY2godmFsdWUgPT4gewoJCQkJaWYodmFsdWUuYW1vdW50ICE9PSAwICl7CgkJCQkJaGFzWmVyb0Ftb3VudCA9IGZhbHNlOwoKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0pOwoJCQlpZihoYXNaZXJvQW1vdW50KXsKCQkJCW1zZyArPSBgPHA+JHtpMThuLnQoInBsZWFzZV9lbnRlcl9hbW91bnQiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvLyBTaG93IEFsZXJ0CgkJCXRoaXMuZXJyb3JNZXNzYWdlID0gbXNnOwoJCQl0aGlzLmFsZXJ0ID0gZmFsc2U7CgkJCWlmIChyZXN1bHQgPT09IGZhbHNlKSB7CgkJCQl0aGlzLmFsZXJ0ID0gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIHJlc3VsdDsKCQl9LAoJCS8vIEFsbCBTYXZlcwoJCWFzeW5jIG9uU2F2ZU9wdGlvbkNsaWNrKG1vZGUpIHsKCQkJCWlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSAmJiB0aGlzLnZhbGlkYXRlRm9ybSgpKSB7CgkJCQkJCXRoaXMuc2F2ZU1vZGUgPSBtb2RlOwoJCQkJCQl0aGlzLnNhdmUoKTsKCQkJCX0KCQl9LAoJCWNhbmNlbCgpIHsKCQkJdGhpcy4kc3dhbCh7CgkJCQl0aXRsZTogaTE4bi50KCdtc2dfdGl0bGVfd2FybmluZycpLAoJCQkJdGV4dDogaTE4bi50KCdtc2dfZGlzY2FyZCcpLAoJCQkJaWNvbjogIndhcm5pbmciLAoJCQkJc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKCQkJCWNhbmNlbEJ1dHRvblRleHQ6IGkxOG4udCgnY2FuY2VsJyksCgkJCQljb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKCQkJCWNhbmNlbEJ1dHRvbkNvbG9yOiAiI0VEMUEzQSIsCgkJCQljb25maXJtQnV0dG9uVGV4dDogaTE4bi50KCdkaXNjYXJkJyksCgkJCX0pLnRoZW4oKHJlc3VsdCkgPT4gewoJCQkJaWYgKHJlc3VsdC52YWx1ZSkgewoJCQkJCXRoaXMuY2xlYXIoKTsKCQkJCQl0aGlzLiRyb3V0ZXIuZ28oLTEpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCWNsZWFyKCkgewoJCQl0aGlzLmlzRWRpdCA9IGZhbHNlOwoJCQl0aGlzLnNhdmVNb2RlID0gJyc7CgoJCQl0aGlzLmJ1ZGdldCA9IG5ldyBCdWRnZXRNb2RlbCgpOwoJCQl0aGlzLmxvY2F0aW9uID0gbmV3IExvY2F0aW9uTW9kZWwoKSwKCgkJCS8vIERhdGFzb3VyZQoJCQl0aGlzLmJ1ZGdldExpbmVEUy5kYXRhKFtdKTsKCgkJCXRoaXMuc2V0RGVmYXVsdERhdGEoKTsKCQl9LAoJCXNhdmUoKSB7CgkJCQlsZXQgc2VsZiA9IHRoaXM7CgoJCQkJLy8gU2hyaW5rIERhdGEKCQkJCXRoaXMuc2hyaW5rRGF0YSgpOwoKCQkJCS8vIFN5bmMgRGF0YQoJCQkJdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CgkJCQlidWRnZXRIYW5kbGVyLnNhdmUodGhpcy5idWRnZXQpCgkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCWlmIChyZXNwb25zZSkgewoJCQkJCQkJLyogVXBkYXRlIFZ1ZXggRGF0YSAqLwoJCQkJCQkJdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2J1ZGdldHMvc2F2ZUJ1ZGdldCcsIHJlc3BvbnNlLmRhdGEpOwoKCQkJCQkJCXNlbGYucmVzcG9uc2VTdGF0dXMocmVzcG9uc2UpOwoJCQkJCQl9ZWxzZXsKCQkJCQkJCXRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJlcnJvcl9zb21ldGhpbmdfd3JvbmciKSk7CgkJCQkJCX0KCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJCQl0aGlzLiRzbm90aWZ5LmVycm9yKGVycm9yKTsKCQkJCQl9KQoJCQkJCS5maW5hbGx5KCgpPT57CgkJCQkJCXNlbGYuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJCQl9KTsKCQl9LAoJCS8vIFJlc3BvbnNlIFN0YXR1cwoJCXJlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKSB7CgkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJLyogU2F2ZSBDbG9zZSBvciBEZWxldGUgQWN0aW9uICovCgkJCQlpZiAoCgkJCQkJdGhpcy5zYXZlTW9kZSA9PT0gU2F2ZU9wdGlvbi5TQVZFQ0xPU0UgfHwKCQkJCQl0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLkRFTEVURQoJCQkJKSB7CgkJCQkJaWYgKHRoaXMuaXNFZGl0KSB7CgkJCQkJCXRoaXMuJHJvdXRlci5nbygtMSk7CgkJCQkJfQoJCQkJfQoKCQkJCS8qIFJlc2V0IERhdGEgKi8KCQkJCXRoaXMuY2xlYXIoKTsKCgkJCQkvKiBBbGVydCBTdWNjZXNzICovCgkJCQl0aGlzLiRzbm90aWZ5LnN1Y2Nlc3MoaTE4bi50KCJzdWNjZXNzZnVsIikpOwoJCQl9IGVsc2UgewoJCQkJLyogQWxlcnQgRXJyb3IgKi8KCQkJCXRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJlcnJvcl9zb21ldGhpbmdfd3JvbmciKSk7CgkJCX0KCQl9LAoJCS8vIE9uIFJlcG9yaW50IExhbmd1YWdlIENoYW5nZXMKCQlvblJlcG9ydGluZ0xhbmd1YWdlQ2hhbmdlcygpIHsKCQkJCXRoaXMuZmllbGROYW1lID0gImFjY291bnQubmFtZSI7CgkJCQlpZih0aGlzLnJlcG9ydGluZ0xhbmd1YWdlID09PSAibG9jYWwiKXsKCQkJCQkJdGhpcy5maWVsZE5hbWUgPSAiYWNjb3VudC5sb2NhbF9uYW1lIjsKCQkJCX0KCgkJCQl0aGlzLmdlbmVyYXRlQ29sdW1uKCk7CgkJfSwKCX0sCgl3YXRjaDogewoJCWluaXRCdWRnZXQ6ICJpbml0aWFsRGF0YSIKCX0sCgljb21wdXRlZDogbWFwU3RhdGUoewoJCWFjY291bnRzOiBzdGF0ZSA9PiBzdGF0ZS5hY2NvdW50aW5nLmFjY291bnRzLAoJCXNlY29uZGFyeUFjY291bnRzOiBzdGF0ZSA9PiBzdGF0ZS5hY2NvdW50aW5nLnNlY29uZGFyeUFjY291bnRzLAoJCWxvY2F0aW9uczogc3RhdGUgPT4gc3RhdGUubG9jYXRpb25zLmxpc3QsCgl9KSwKCW1vdW50ZWQgKCkgewoJCS8vIEluaXRpYWwgRGF0YQoJCXRoaXMuaW5pdGlhbERhdGEoKTsKCQl0aGlzLmdlbmVyYXRlQ29sdW1uKCk7CgkJdGhpcy5pbml0aWFsVHJlZUxpc3QoKTsKCgkJLyogRGF0YXNvdXJjZSBiaW5kIGZ1bmN0aW9ucyAqLwoJCXRoaXMuYnVkZ2V0TGluZURTLmJpbmQoImNoYW5nZSIsIHRoaXMub25EYXRhU291cmNlQ2hhbmdlcyk7Cgl9LAp9Owo="},{"version":3,"sources":["Budget.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Budget.vue","sourceRoot":"src/views/budgeting/business_unit","sourcesContent":["<template>\n\t<v-app>\n\t\t<v-container>\n\t\t\t<v-row>\n\t\t\t\t<v-col cols=\"12\" sm=\"12\">\n\t\t\t\t\t<v-card\n\t\t\t\t\t\toutlined\n\t\t\t\t\t\tdense\n\t\t\t\t\t\tclass=\"pa-4 no_border rounded-sm\"\n\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n\t\t\t\t\t\t\t<v-card elevation=\"0\" class=\"pt-2 mb-3\">\n\t\t\t\t\t\t\t\t<h2 class=\"mb-0\">{{ $t(\"business_unit_budget\") }}</h2>\n\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\tonclick=\"window.history.go(-1); return false;\"\n\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer; color: #333; font-size: 40px;\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right\"\n\t\t\t\t\t\t\t\t>close\n\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- Search -->\n\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\tclass=\"px-4 no_border pt-4 pb-3\"\n\t\t\t\t\t\t\t\tcolor=\"grayBg\"\n\t\t\t\t\t\t\t\tmin-height=\"98px\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t<v-col md=\"6\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"name\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"budget.name\"\n\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('name')\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col md=\"6\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t<app-reporting-language\n\t\t\t\t\t\t\t\t\t\t\t:initLanguage=\"reportingLanguage\"\n\t\t\t\t\t\t\t\t\t\t\t@emitLanguage=\"reportingLanguage = $event\"\n\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"onReportingLanguageChanges\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t<v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"fiscal_year\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<app-fiscal-date-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t:initFiscalDate=\"budget.fiscal_year\"\n\t\t\t\t\t\t\t\t\t\t\t@emitFiscalDate=\"budget.fiscal_year = $event\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"location\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<app-location-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t:initLocation=\"location\"\n\t\t\t\t\t\t\t\t\t\t\t\t@emitLocation=\"location = $event\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"pl-9 py-6\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"confirmReload\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"load_account\") }}\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- Dialog -->\n\t\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t\t\t<v-dialog\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\twidth=\"500\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-card>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-title class=\"text-h5 grey lighten-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ selectedRow.account.number }} - {{ selectedRow.account.name }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-title>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-7\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"crossAmount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-text>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-divider></v-divider>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"dialog = false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"applyAcrossAmount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEnter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t\t</v-dialog>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Tree List -->\n\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\tclass=\"rounded-0 mt-4\"\n\t\t\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\t\t\tmin-height=\"98px\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Tree List -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"budgetLineTreeList\" />\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t</v-row>\n\n\t\t\t\t\t\t\t\t\t<LoadingMe\n\t\t\t\t\t\t\t\t\t\t\ttype=\"loading\"\n\t\t\t\t\t\t\t\t\t\t\t:isLoading=\"showLoading\"\n\t\t\t\t\t\t\t\t\t\t\t:myLoading=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:fullPage=\"true\" />\n\n\t\t\t\t\t\t\t\t\t<v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t<v-alert\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"alert\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdismissible\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"errorMessage\"/>\n\t\t\t\t\t\t\t\t\t\t\t</v-alert>\n\n\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"cancel\") }}\n\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\n\t\t\t\t\t\t\t\t\t\t\t<v-spacer />\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-capitalize white--text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"save_close\") }}\n\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</v-card-actions>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t</v-form>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-col>\n\t\t\t</v-row>\n\t\t</v-container>\n\t</v-app>\n</template>\n\n<script>\nimport {i18n} from '@/i18n'\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\nimport BudgetModel from \"@/scripts/model/Budget.js\";\nimport BudgetLineModel from \"@/scripts/model/BudgetLine.js\";\nimport BudgetLineExtendedModel from \"@/scripts/model/BudgetLineExtended.js\";\nimport AccountModel from \"@/scripts/model/accounting/Account.js\";\nimport LocationModel from \"@/scripts/model/Location.js\";\n\n/* Editor */\nimport NumberInputBoxEditor from \"@/scripts/kendo_editor/NumberInputBox\";\nimport AccountSecondaryEditor from \"@/scripts/kendo_editor/AccountSecondary\";\n\n/* Store */\nimport store from \"@/store\"\nconst institute = store.state.institute.institute\nimport { mapState } from 'vuex';\n\nconst budgetHandler = require(\"@/scripts/handler/workingcapital/budgetHandler.js\");\nconst { SaveOption } = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n\tname: \"BusinessUnitBudget\",\n\tprops: {\n\t\tinitBudget: {\n\t\t\ttype: BudgetModel,\n\t\t},\n\t},\n\tcomponents: {\n\t\t\"LoadingMe\": () => import('@/components/Loading'),\n\t\t\"app-location-dropdownlist\": () => import('@/components/dropdownlist/Location'),\n\t\t\"app-fiscal-date-dropdownlist\": () => import('@/components/kendo_templates/FiscalDateDropDownList'),\n\t\t\"app-reporting-language\": () => import(\"@/components/kendo_templates/ReportingLanguageDropDownList\"),\n\t},\n\tdata: () => ({\n\t\t// Obj\n\t\tbudget: new BudgetModel(),\n\t\tbudgetLines: [],\n\t\tlocation: new LocationModel(),\n\t\tuser: Helper.getUser(),\n\t\t// Form validation\n\t\tvalid: true,\n\t\tisEdit: false,\n\t\talert: false,\n\t\terrorMessage: \"\",\n\t\tsaveMode: \"\",\n\t\tSaveOption: SaveOption,\n\t\t// Reporting Language\n\t\treportingLanguage: \"english\",\n\t\tfieldName : 'account.name',\n\t\t// LoadingMe\n\t\tshowLoading: false,\n\t\t/* Dialog */\n\t\tdialog: false,\n\t\tselectedRow: new BudgetLineExtendedModel(),\n\t\tcrossAmount: 0,\n\t\t/* Kendo */\n\t\tcolumns: [],\n\t\tbudgetLineDS : new kendo.data.TreeListDataSource({\n\t\t\t\tsort: [\n\t\t\t\t\t\t{ field: \"account.type_code\", dir: \"asc\" },\n\t\t\t\t\t\t{ field: \"number\", dir: \"asc\" },\n\t\t\t\t],\n\t\t\t\tschema: {\n\t\t\t\t\t\tmodel: {\n\t\t\t\t\t\t\t\tid: \"uuid\",\n\t\t\t\t\t\t\t\texpanded: true\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}),\n\t}),\n\tmethods: {\n\t\t// Initial Data\n\t\tinitialData() {\n\t\t\tif(this.initBudget){ // Edit Mode\n\t\t\t\tthis.isEdit = true;\n\t\t\t\tthis.budget = this.initBudget;\n\t\t\t\tthis.bindData();\n\t\t\t}else{ // Brand New\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.setDefaultData();\n\t\t\t}\n\t\t},\n\t\t/* Initial Tree List */\n\t\tinitialTreeList(){\n\t\t\tkendo.jQuery(\"#budgetLineTreeList\").kendoTreeList({\n\t\t\t\tdataSource: new kendo.data.TreeListDataSource(),\n\t\t\t\tdataBound: this.onDataBound,\n\t\t\t\teditable: \"incell\",\n\t\t\t\tresizable: true,\n\t\t\t\tcolumnMenu: true,\n\t\t\t\tcolumns: this.columns,\n\t\t\t});\n\t\t},\n\t\t// Set default data\n\t\tsetDefaultData() {\n\t\t\tthis.budget = new BudgetModel({\n\t\t\t\tfiscal_year: institute.fiscalDate[0],\n\t\t\t});\n\t\t\t// this.setDefaultBudgetLine();\n\t\t},\n\t\t// Bind data for edit mode\n\t\tasync bindData() {\n\t\t\t/* Location */\n\t\t\tawait this.$store.dispatch('locations/getList');\n\t\t\tthis.location = new LocationModel(this.locations.find(i => i.id === this.budget.location_uuid));\n\t\t\t\n\t\t\tthis.setDefaultBudgetLine();\n\t\t},\n\t\t/* Confirm Reload Accounts */\n\t\tconfirmReload() {\n\t\t\tif(this.budgetLineDS.total() === 0){\n\t\t\t\tthis.setDefaultBudgetLine();\n\t\t\t}else{\n\t\t\t\tthis.$swal({\n\t\t\t\t\ttitle: i18n.t('reload_data_?'),\n\t\t\t\t\ttext: i18n.t('this_will_reset_all_amount_to_zero'),\n\t\t\t\t\ticon: \"warning\",\n\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\tcancelButtonText: i18n.t('cancel'),\n\t\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\t\tconfirmButtonText: i18n.t('reload'),\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tif (result.value) {\n\t\t\t\t\t\tthis.setDefaultBudgetLine();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// Set Budget Lines\n\t\tasync setDefaultBudgetLine (){\n\t\t\t\tthis.showLoading = true;\n\n\t\t\t\t// Account\n\t\t\t\tawait this.$store.dispatch('accounting/getAccounts');\n\t\t\t\t\n\t\t\t\tlet g = {};\n\t\t\t\tthis.accounts.forEach(value => {\n\t\t\t\t\tif(value.account_type.number >= 32 && value.account_type.number <= 43){//Filter PL accounts 32 to 43\n\t\t\t\t\t\tlet account = value;\n\n\t\t\t\t\t\t/* GROUPING */\n\t\t\t\t\t\t/* Top Level Account Type */\n\t\t\t\t\t\tif(!g[account.type_code]){\n\t\t\t\t\t\t\tg[account.type_code] = new BudgetLineExtendedModel({\n\t\t\t\t\t\t\t\tuuid : account.type_code,\n\t\t\t\t\t\t\t\tnumber : account.type_code,\n\t\t\t\t\t\t\t\taccount_uuid : account.uuid,\n\t\t\t\t\t\t\t\taccount : account.account_type,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/* Parent Level */\n\t\t\t\t\t\tlet thisAccountParentId = \"\";\n\t\t\t\t\t\tif(account.hasOwnProperty(\"parent_account\")){\n\t\t\t\t\t\t\tlet currentParentAccount = new AccountModel(account.parent_account), counter = 0;\n\t\t\t\t\t\t\twhile (currentParentAccount.number !== \"\") {\n\t\t\t\t\t\t\t\t/* Get account by uuid or banhji_account_number */\n\t\t\t\t\t\t\t\tlet accountParent = new AccountModel();\n\t\t\t\t\t\t\t\tif(currentParentAccount.uuid !== \"\"){/* Get by uuid */\n\t\t\t\t\t\t\t\t\taccountParent = new AccountModel(this.accounts.find((item) => item.uuid === currentParentAccount.uuid));\n\t\t\t\t\t\t\t\t}else{/* Get by banhji_account_number because default data has no uuid */\n\t\t\t\t\t\t\t\t\tif(currentParentAccount.banhji_account_number !== \"\"){\n\t\t\t\t\t\t\t\t\t\taccountParent = new AccountModel(this.accounts.find((item) => item.banhji_account_number === currentParentAccount.banhji_account_number));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Set This Account Parent Id */\n\t\t\t\t\t\t\t\tif(counter === 0){\n\t\t\t\t\t\t\t\t\t\tthisAccountParentId = accountParent.uuid;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Find Next Parent */\n\t\t\t\t\t\t\t\tlet nextParent = new AccountModel();\n\t\t\t\t\t\t\t\tif(accountParent.hasOwnProperty(\"parent_account\")){\n\t\t\t\t\t\t\t\t\tlet parentOfAccountParent = new AccountModel(accountParent.parent_account);\n\t\t\t\t\t\t\t\t\tif(parentOfAccountParent.number !== \"\"){\n\t\t\t\t\t\t\t\t\t\tif(parentOfAccountParent.uuid !== \"\"){/* Get by uuid */\n\t\t\t\t\t\t\t\t\t\t\tnextParent = this.accounts.find((item) => item.uuid === parentOfAccountParent.uuid);\n\t\t\t\t\t\t\t\t\t\t}else{/* Get by banhji_account_number because default data has no uuid */\n\t\t\t\t\t\t\t\t\t\t\tif(parentOfAccountParent.banhji_account_number !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\t\tnextParent = this.accounts.find((item) => item.banhji_account_number === parentOfAccountParent.banhji_account_number);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Set Parent Id */\n\t\t\t\t\t\t\t\tlet parentId = accountParent.type_code;\n\t\t\t\t\t\t\t\tnextParent = new AccountModel(nextParent);\n\t\t\t\t\t\t\t\tif(nextParent.number !== \"\"){\n\t\t\t\t\t\t\t\t\tparentId = nextParent.uuid;\n\n\t\t\t\t\t\t\t\t\t/* Set next parent account */\n\t\t\t\t\t\t\t\t\tObject.assign(currentParentAccount, nextParent);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t/* Set loop to end */\n\t\t\t\t\t\t\t\t\tcurrentParentAccount.number = \"\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Add Parent Level */\n\t\t\t\t\t\t\t\tif(!g[accountParent.uuid]){\n\t\t\t\t\t\t\t\t\tg[accountParent.uuid] = new BudgetLineExtendedModel({\n\t\t\t\t\t\t\t\t\t\tuuid : accountParent.uuid,\n\t\t\t\t\t\t\t\t\t\taccount_uuid : accountParent.uuid,\n\t\t\t\t\t\t\t\t\t\tnumber : accountParent.number,\n\t\t\t\t\t\t\t\t\t\tparentId : parentId,\n\t\t\t\t\t\t\t\t\t\taccount : accountParent,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Increase Counter By 1 */\n\t\t\t\t\t\t\t\tcounter++;\n\t\t\t\t\t\t\t}/* End While Loop */\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t/* Child Level */\n\t\t\t\t\t\tif(!g[account.uuid]){\n\t\t\t\t\t\t\tg[account.uuid] = new BudgetLineExtendedModel({\n\t\t\t\t\t\t\t\tuuid : account.uuid,\n\t\t\t\t\t\t\t\taccount_uuid : account.uuid,\n\t\t\t\t\t\t\t\tnumber : account.number,\n\t\t\t\t\t\t\t\taccount : account,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/* Set Parent Id Or Self Parent */\n\t\t\t\t\t\tif(thisAccountParentId !== \"\"){/* Child Level */\n\t\t\t\t\t\t\tg[account.uuid].parentId = thisAccountParentId;\n\t\t\t\t\t\t}else{/* Child As Parent */\n\t\t\t\t\t\t\tg[account.uuid].parentId = account.type_code; /* Self As Parent */\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t// 12 months with amount\n\t\t\t\t\t\tfor (let i = 0; i < 12; i++) {\n\t\t\t\t\t\t\t// Set Month Of\n\t\t\t\t\t\t\tlet sdate = new Date(this.budget.fiscal_year.start_date);\n\t\t\t\t\t\t\tsdate.setMonth(sdate.getMonth() + i);\n\n\t\t\t\t\t\t\tg[account.uuid].monthly_amount.push({\n\t\t\t\t\t\t\t\tmonth_of : sdate.toISOString().substr(0, 7),\n\t\t\t\t\t\t\t\tamount : 0,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/* Matching Account */\n\t\t\t\t\t\tif(this.isEdit){\n\t\t\t\t\t\t\tlet bline = this.budget.lines.find((item) => item.account_uuid === value.uuid);\n\t\t\t\t\t\t\tif(bline){\n\t\t\t\t\t\t\t\t/* Reverse Nature */\n\t\t\t\t\t\t\t\tlet nature = 1; /* Default Naure is Dr = 1 */\n\t\t\t\t\t\t\t\tif(account.account_type.nature.toLowerCase() === \"cr\"){\n\t\t\t\t\t\t\t\t\tnature = -1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tg[account.uuid].secondary_account = new AccountModel(this.secondaryAccounts.find((item) => item.uuid === bline.secondary_account_uuid));\n\t\t\t\t\t\t\t\tg[account.uuid].note = bline.note;\n\t\t\t\t\t\t\t\tg[account.uuid].amount = bline.amount * nature;\n\t\t\t\t\t\t\t\tg[account.uuid].monthly_amount = bline.monthly_amount;\n\t\t\t\t\t\t\t\tg[account.uuid].monthly_amount.forEach(ma => {\n\t\t\t\t\t\t\t\t\tma.amount = ma.amount * nature;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t/* Bind Budget Line */\n\t\t\t\tthis.budgetLineDS.data(Object.values(g));\n\n\t\t\t\t/* Set New Datasource */\n\t\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\t\ttreeList.setDataSource(this.budgetLineDS);\n\n\t\t\t\tthis.showLoading = false;\n\t\t},\n\t\t// Row Template\n\t\tnameTmpl(dataItem){\n\t\t\t\t/* Name in language */\n\t\t\t\tlet name = dataItem.account.name;\n\t\t\t\tif(this.reportingLanguage === \"local\"){\n\t\t\t\t\t\tname = dataItem.account.local_name;\n\t\t\t\t}\n\n\t\t\t\t/* Define result */\n\t\t\t\tlet result = `<span>${dataItem.number} - ${name}</span>`;\n\n\t\t\t\t// /* Top Level */\n\t\t\t\tif(dataItem.parentId === null){\n\t\t\t\t\t\tresult = `<span style='font-weight: bolder;'>${name}</span>`;\n\t\t\t\t}\n\n\t\t\t\t/* Parent Level */\n\t\t\t\tif(dataItem.hasChildren && dataItem.number.length > 3){\n\t\t\t\t\t\tresult = `<span style='font-weight: bolder;'>${dataItem.number} - ${name}</span>`;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t},\n\t\tsecondaryAccountTmpl(dataItem) {\n\t\t\tlet result = \"\";\n\t\t\tif(dataItem.secondary_account.uuid !== ''){\n\t\t\t\tresult = `<span>${dataItem.secondary_account.number} - ${dataItem.secondary_account.name}</span>`;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tcopyAcross(e){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\t\tthis.selectedRow = treeList.dataItem(kendo.jQuery(e.target).closest(\"tr\"));\n\n\t\t\t\tthis.dialog = true;\n\t\t},\n\t\tapplyAcrossAmount(){\n\t\t\t\tthis.dialog = false;\n\n\t\t\t\tthis.selectedRow.monthly_amount.forEach(value => {\n\t\t\t\t\t\tvalue.amount = kendo.parseFloat(this.crossAmount);\n\t\t\t\t});\n\t\t\t\tthis.selectedRow.amount = kendo.parseFloat(this.crossAmount) * 12;\n\n\t\t\t\t/* Refresh */\n\t\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\t\ttreeList.refresh();\n\n\t\t\t\tthis.crossAmount = 0;\n\t\t},\n\t\tgenerateColumn() {\n\t\t\t\tlet headerAttributes = {\n\t\t\t\t\t\tclass: \"table-header-cell\",\n\t\t\t\t\t\tstyle: \"font-weight: bold;text-align: center;padding-right: 35px; font-size: 14px\",\n\t\t\t\t},\n\t\t\t\tattributes = {\n\t\t\t\t\t\tclass: \"table-cell\",\n\t\t\t\t\t\tstyle: \"text-align: right; font-size: 14px\",\n\t\t\t\t};\n\n\t\t\t\tlet columns = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: this.fieldName,\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"account\"),\n\t\t\t\t\t\t\t\ttemplate: this.nameTmpl,\n\t\t\t\t\t\t\t\teditable: ()=>{ return false },\n\t\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t\t\theaderAttributes: headerAttributes,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: \"secondary_account\",\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"secondary_account\"),\n\t\t\t\t\t\t\t\ttemplate: this.secondaryAccountTmpl,\n\t\t\t\t\t\t\t\teditor: AccountSecondaryEditor,\n\t\t\t\t\t\t\t\thidden: !this.$store.state.accounting.secondaryAccount,\n\t\t\t\t\t\t\t\teditable: (dataItem)=>{\n\t\t\t\t\t\t\t\t\t\treturn !dataItem.hasChildren;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: \"note\",\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"note\"),\n\t\t\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"action\"),\n\t\t\t\t\t\t\t\tcommand: [{\n\t\t\t\t\t\t\t\t\t\tname: \"copycross\",\n\t\t\t\t\t\t\t\t\t\ttext: \"copy cross\",\n\t\t\t\t\t\t\t\t\t\tclick: this.copyAcross,\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\t/* 12 Months */\n\t\t\t\tfor (let i = 0; i < 12; i++) {\n\t\t\t\t\t\tcolumns.push({\n\t\t\t\t\t\t\t\tfield: `monthly_amount[${i}].amount`,\n\t\t\t\t\t\t\t\tformat: \"{0:n}\",\n\t\t\t\t\t\t\t\teditor: NumberInputBoxEditor,\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\tattributes: attributes,\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/* Total */\n\t\t\t\tcolumns.push({\n\t\t\t\t\t\tfield: \"amount\",\n\t\t\t\t\t\ttitle: i18n.t(\"total\"),\n\t\t\t\t\t\tformat: \"{0:n}\",\n\t\t\t\t\t\teditable: ()=>{return false},\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tattributes: attributes,\n\t\t\t\t});\n\n\t\t\t\t/* Set All Columns */\n\t\t\t\tthis.columns = columns;\n\t\t},\n\t\t/* On databound */\n\t\tonDataBound (e) {\n\t\t\t/* Titles */\n\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\tif(this.budget.fiscal_year){\n\t\t\t\tlet fiscalMonths = Helper.generateFiscalMonths(this.budget.fiscal_year.start_date, this.budget.fiscal_year.end_date, \"12\");\n\t\t\t\tfor (let k = 0; k < 12; k++) {\n\t\t\t\t\tconst element = fiscalMonths[k];\n\t\t\t\t\ttreeList.thead.find(`[data-field~='monthly_amount[${k}].amount']`).html(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Headers */\n\t\t\tvar headers = e.sender.thead.children();\n\t\t\tfor (var i = 0; i < headers.length; i++) {\n\t\t\t\tvar th = kendo.jQuery(headers[i]);\n\t\t\t\tth.css(\"font-weight\", \"bold\");\n\t\t\t\tth.css(\"text-align\", \"center\");\n\t\t\t}\n\n\t\t\t/* Items */\n\t\t\tvar items = e.sender.items();\n\t\t\tfor (var j = 0; j < items.length; j++) {\n\t\t\t\tvar dataItem = e.sender.dataItem(items[j]);\n\t\t\t\tvar row = kendo.jQuery(items[j]);\n\n\t\t\t\t/* Parent in bold */\n\t\t\t\tif(dataItem.get(\"hasChildren\") || dataItem.get(\"parentId\") === null){\n\t\t\t\t\trow.find(\"[data-command='copycross']\").hide();\n\t\t\t\t\trow.css(\"font-weight\", \"bold\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// DataSource Changes\n\t\tonDataSourceChanges(e) {\n\t\t\tif (e.field) {\n\t\t\t\tlet dataRow = e.items[0];\n\n\t\t\t\tif (e.field === \"secondary_account\") {\n\t\t\t\t\t\tif (dataRow.secondary_account !== null) {\n\t\t\t\t\t\t\t\tdataRow.set(\"secondary_account_uuid\", dataRow.secondary_account.uuid);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Set default when deselect\n\t\t\t\t\t\t\t\tdataRow.set(\"secondary_account_uuid\", \"\");\n\t\t\t\t\t\t\t\tdataRow.set(\"secondary_account\", new AccountModel());\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\tthis.dataSourceAutoCalculate();\n\t\t},\n\t\t// Auto Calculate In DataSource\n\t\tdataSourceAutoCalculate() {\n\t\t\t\t// Sum Amount\n\t\t\t\tthis.budgetLineDS.data().forEach(value => {\n\t\t\t\t\t\tlet sumAmt = 0;\n\t\t\t\t\t\tvalue.monthly_amount.forEach(ele => {\n\t\t\t\t\t\t\t\tsumAmt += ele.amount;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvalue.set(\"amount\", sumAmt);\n\t\t\t\t});\n\t\t},\n\t\t// Shrink Data\n\t\tshrinkData() {\n\t\t\t\t// Location\n\t\t\t\tthis.budget.location_uuid = this.location.id;\n\n\t\t\t\t// Lines\n\t\t\t\tlet lines = [];\n\t\t\t\tthis.budgetLineDS.data().forEach(value => {\n\t\t\t\t\t\t// Add account line with amount not 0\n\t\t\t\t\t\tif(value.amount !== 0){\n\t\t\t\t\t\t\t\t/* Apply Nature */\n\t\t\t\t\t\t\t\tif(value.account.account_type.nature.toLowerCase() === \"cr\"){\n\t\t\t\t\t\t\t\t\t\t/* Amount */\n\t\t\t\t\t\t\t\t\t\tvalue.amount = value.amount * -1;\n\n\t\t\t\t\t\t\t\t\t\t/* Monthly Amount */\n\t\t\t\t\t\t\t\t\t\tvalue.monthly_amount.forEach(ele => {\n\t\t\t\t\t\t\t\t\t\t\t\tele.amount = ele.amount * -1;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlines.push(new BudgetLineModel(value));\n\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.budget.lines = lines;\n\n\t\t\t\t// User\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.budget.modified_by = this.user;\n\t\t\t\t} else {\n\t\t\t\t\t\tthis.budget.created_by = this.user;\n\t\t\t\t}\n\t\t},\n\t\t// Validating\n\t\tvalidateForm() {\n\t\t\tlet result = true,\n\t\t\t\tmsg = \"\";\n\n\t\t\t// Name\n\t\t\tif(this.budget.name === ''){\n\t\t\t\tmsg += `<p>${i18n.t(\"name_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Location\n\t\t\tif(this.location.id === ''){\n\t\t\t\tmsg += `<p>${i18n.t(\"business_unit_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Fiscal Date\n\t\t\tif(this.budget.fiscal_year.id === ''){\n\t\t\t\tmsg += `<p>${i18n.t(\"fiscal_date_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Amount\n\t\t\tlet hasZeroAmount = true;\n\t\t\tthis.budgetLineDS.data().forEach(value => {\n\t\t\t\tif(value.amount !== 0 ){\n\t\t\t\t\thasZeroAmount = false;\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(hasZeroAmount){\n\t\t\t\tmsg += `<p>${i18n.t(\"please_enter_amount\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Show Alert\n\t\t\tthis.errorMessage = msg;\n\t\t\tthis.alert = false;\n\t\t\tif (result === false) {\n\t\t\t\tthis.alert = true;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\t// All Saves\n\t\tasync onSaveOptionClick(mode) {\n\t\t\t\tif (this.$refs.form.validate() && this.validateForm()) {\n\t\t\t\t\t\tthis.saveMode = mode;\n\t\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t},\n\t\tcancel() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t('msg_title_warning'),\n\t\t\t\ttext: i18n.t('msg_discard'),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcancelButtonText: i18n.t('cancel'),\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: i18n.t('discard'),\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tclear() {\n\t\t\tthis.isEdit = false;\n\t\t\tthis.saveMode = '';\n\n\t\t\tthis.budget = new BudgetModel();\n\t\t\tthis.location = new LocationModel(),\n\n\t\t\t// Datasoure\n\t\t\tthis.budgetLineDS.data([]);\n\n\t\t\tthis.setDefaultData();\n\t\t},\n\t\tsave() {\n\t\t\t\tlet self = this;\n\n\t\t\t\t// Shrink Data\n\t\t\t\tthis.shrinkData();\n\n\t\t\t\t// Sync Data\n\t\t\t\tthis.showLoading = true;\n\t\t\t\tbudgetHandler.save(this.budget)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (response) {\n\t\t\t\t\t\t\t/* Update Vuex Data */\n\t\t\t\t\t\t\tthis.$store.dispatch('budgets/saveBudget', response.data);\n\n\t\t\t\t\t\t\tself.responseStatus(response);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\t\tthis.$snotify.error(error);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(()=>{\n\t\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\t});\n\t\t},\n\t\t// Response Status\n\t\tresponseStatus(response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\t/* Save Close or Delete Action */\n\t\t\t\tif (\n\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t) {\n\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* Reset Data */\n\t\t\t\tthis.clear();\n\n\t\t\t\t/* Alert Success */\n\t\t\t\tthis.$snotify.success(i18n.t(\"successful\"));\n\t\t\t} else {\n\t\t\t\t/* Alert Error */\n\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t}\n\t\t},\n\t\t// On Reporint Language Changes\n\t\tonReportingLanguageChanges() {\n\t\t\t\tthis.fieldName = \"account.name\";\n\t\t\t\tif(this.reportingLanguage === \"local\"){\n\t\t\t\t\t\tthis.fieldName = \"account.local_name\";\n\t\t\t\t}\n\n\t\t\t\tthis.generateColumn();\n\t\t},\n\t},\n\twatch: {\n\t\tinitBudget: \"initialData\"\n\t},\n\tcomputed: mapState({\n\t\taccounts: state => state.accounting.accounts,\n\t\tsecondaryAccounts: state => state.accounting.secondaryAccounts,\n\t\tlocations: state => state.locations.list,\n\t}),\n\tmounted () {\n\t\t// Initial Data\n\t\tthis.initialData();\n\t\tthis.generateColumn();\n\t\tthis.initialTreeList();\n\n\t\t/* Datasource bind functions */\n\t\tthis.budgetLineDS.bind(\"change\", this.onDataSourceChanges);\n\t},\n};\n</script>\n\n<style scoped>\n.function_content {\n\t\tpadding: 0 25px 25px;\n\t\tborder-bottom: 0;\n\t\tbackground-color: #fff !important;\n}\n\n@media (min-width: 1264px) {\n\t\t.container {\n\t\t\t\tmax-width: 1185px;\n\t\t\t\t/* max-width: 1080px !important; */\n\t\t}\n}\n\n.grayBg {\n\t\tbackground-color: #F8F8F9;\n}\n\n@media (max-width: 576px) {\n\t\t.mb-6 {\n\t\t\t\tmargin-bottom: 0 !important;\n\t\t}\n}\n\n.section2 {\n\t\tborder: 1px solid #d6d7d8;\n}\n\n.border_grey {\n\t\tborder: 1px solid #d6d7d8;\n}\n\n.attachment_table {\n\t\twidth: 100%;\n}\n\n.greyDark {\n\t\tbackground-color: #f2f2f2;\n}\n\n.upload_btn {\n\t\twidth: 54%;\n\t\tmargin: auto;\n\t\tpadding: 10px 6px;\n\t\ttext-align: center;\n\t\tcolor: #ffff;\n\t\tborder-radius: 22px;\n\t\tbackground: #92d050;\n}\n\n.my_box_min_heihgt {\n\t\theight: 295px;\n}\n\n.width_100 {\n\t\twidth: 100px;\n}\n.v-data-table.simple_table.theme--light{\n\t\tborder-top: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.v-data-table.simple_table > .v-data-table__wrapper > table > tbody > tr > td {\n\t\theight: 32px !important;\n\t\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n\t\tborder-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr > th{\n\t\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n\t\tborder-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr > th:last-child,\n.v-data-table.simple_table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n\t\tborder-right: none !important;\n}\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n\t\tbackground-color: transparent !important;\n}\n\n.primary--text.text-left.v-btn:hover,\n.theme--light.v-btn:hover::before{\n\t\tbackground: none !important;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/components/overview/ExpenseNpo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/components/overview/ExpenseNpo.vue","mtime":1638499442952},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICAvLyBpbXBvcnQga2VuZG8gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXVpJzsKICAgIC8vIGltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJwogICAgaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7CiAgICBpbXBvcnQgeyBDaGFydCB9IGZyb20gIkBwcm9ncmVzcy9rZW5kby1jaGFydHMtdnVlLXdyYXBwZXIiOwoKICAgIGNvbnN0IEluY29tZVN0YXRlbWVudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaGFuZGxlci9hY2NvdW50aW5nL2luY29tZVN0YXRlbWVudEhhbmRsZXIiKTsKICAgIAogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIG5hbWU6ICJPdmVydmlld0V4cGVuc2UiLAogICAgICAgIGNvbXBvbmVudHM6ewogICAgICAgICAgICAnY2hhcnQnIDogQ2hhcnQsCiAgICAgICAgICAgICJMb2FkaW5nTWUiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9Mb2FkaW5nJyksCiAgICAgICAgfSwKICAgICAgICBkYXRhOiAoKSA9PiAoewogICAgICAgICAgICB0b3RhbEV4cGVuc2UgOiAwLAogICAgICAgICAgICBzZXJpZXM6IFtdLAogICAgICAgICAgICBsYWJlbFRlbXBsYXRlOiAiIz0gY2F0ZWdvcnkgIyAtICM9IGtlbmRvLmZvcm1hdCgnezA6UH0nLCBwZXJjZW50YWdlKSMiLAogICAgICAgICAgICB0b29sdGlwVGVtcGxhdGU6ICIjPSBjYXRlZ29yeSAjIC0gIz0ga2VuZG8uZm9ybWF0KCd7MDpQfScsIHBlcmNlbnRhZ2UpICMiLAogICAgICAgICAgICAvLyBMb2FkaW5nTWUKICAgICAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBjaGFydEFyZWE6IHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgICBtYXJnaW46IDAsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIzMCwKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGFzeW5jIGxvYWREYXRhICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgIC8qIFNldCBDdXJyZW50IEZpc2NhbCBEYXRlICovCiAgICAgICAgICAgICAgICBsZXQgY3VycmVuY3lGaXNjYWxEYXRlID0gSGVscGVyLmdldEZpc2NhbERhdGVCeURhdGUobmV3IERhdGUoKSk7CgogICAgICAgICAgICAgICAgLyogU2V0IEZpc2NhbCBNb250aHMgKi8KICAgICAgICAgICAgICAgIGxldCBmaXNjYWxNb250aHMgPSBbXSwKICAgICAgICAgICAgICAgICAgICBzZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbmN5RmlzY2FsRGF0ZS5zdGFydF9kYXRlKSwKICAgICAgICAgICAgICAgICAgICBlZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbmN5RmlzY2FsRGF0ZS5lbmRfZGF0ZSk7CgogICAgICAgICAgICAgICAgLyogU2V0IENhdGVnb3JpZXMgQXhpcyAqLwogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUF4aXMgPSBmaXNjYWxNb250aHM7CgogICAgICAgICAgICAgICAgLyogSW5jb21lIFN0YXRlbWVudCAqLwogICAgICAgICAgICAgICAgbGV0IGluY29tZVN0YXRlbWVudHMgPSBhd2FpdCBJbmNvbWVTdGF0ZW1lbnRIYW5kbGVyLmdldEluY29tZVN0YXRlbWVudCh7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zIDogewogICAgICAgICAgICAgICAgICAgICAgICBzdGFydF9kYXRlIAkJOiBzZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGUgCQk6IGVkYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBncm91cF9ieSAJCTogIjEyIiwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvKiBCaW5kIFN0YXRlbWVudCAqLwogICAgICAgICAgICAgICAgbGV0IHN0YXRlbWVudExpc3QgPSBbXSwgdG90YWxFeHBlbnNlID0gMCwgZyA9IFtdOwogICAgICAgICAgICAgICAgbGV0IGkgPSAwOwogICAgICAgICAgICAgICAgaW5jb21lU3RhdGVtZW50cy5kYXRhLmZvckVhY2goIHZhbHVlID0+IHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlLnN0YXRlbWVudEdyb3VwLnRvTG93ZXJDYXNlKCkgPT09ICJleHBlbnNlcyIpewogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEV4cGVuc2UgKz0gdmFsdWUuYmFsYW5jZTsKICAgICAgICAgICAgICAgICAgICAgICAgLyogR3JvdXBpbmcgKi8KICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZihnW3ZhbHVlLnR5cGVdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbdmFsdWUudHlwZV0udmFsdWUgKz0gdmFsdWUuYmFsYW5jZTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyNjODAwMDAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcjZjQ0MzM2JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI2Q4NTYwNCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyNFRDFBM0EnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcjY2MxZTFlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI2U4OGQxNCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW3ZhbHVlLnR5cGVdID0geyBjYXRlZ29yeTogdmFsdWUudHlwZSwgdmFsdWU6IHZhbHVlLmJhbGFuY2UsIGNvbG9yOiBjb2xvcltpXX07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaT09NSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLyogQWRkIHRvIHN0YXRlbWVudCAqLwogICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGcpCiAgICAgICAgICAgICAgICBzdGF0ZW1lbnRMaXN0LnB1c2goZ1trZXldKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLyogQmluZCBUb3RhbCBFeHBlbnNlICovCiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsRXhwZW5zZSA9IHRvdGFsRXhwZW5zZTsKCiAgICAgICAgICAgICAgICAvKiBCaW5kIFNlcmllcyAqLwogICAgICAgICAgICAgICAgdGhpcy5zZXJpZXMgPSBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGllJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc3RhdGVtZW50TGlzdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF07CgogICAgICAgICAgICAgICAgLyogUmVmcmVzaCBDaGFydCAqLwogICAgICAgICAgICAgICAgbGV0IGV4cGVuc2VDaGFydCA9IHRoaXMuJHJlZnMuZXhwZW5zZUNoYXJ0LmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgICAgICAgICBleHBlbnNlQ2hhcnQucmVmcmVzaCgpOwoKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJfSwKICAgICAgICB9LAogICAgICAgIG1vdW50ZWQoKSB7CiAgICAgICAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgICB9LAogICAgfTsK"},{"version":3,"sources":["ExpenseNpo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExpenseNpo.vue","sourceRoot":"src/components/overview","sourcesContent":["<template>\n    <v-card\n        color=\"white\"\n        outlined\n        dense\n    >\n        <h2 class=\"primary--text mb-0 pa-0 niradei_black mb-0 col-sm-12 text-right\">\n            {{ Number(totalExpense).toLocaleString() }}\n        </h2>\n\n        <chart ref=\"expenseChart\"\n            :legend-visible=\"false\"\n            :series=\"series\"\n            :series-defaults-type=\"'pie'\"\n            :series-defaults-labels-visible=\"false\"\n            :series-defaults-labels-position=\"'outsideEnd'\"\n            :series-defaults-labels-background=\"'transparent'\"\n            :series-defaults-labels-template=\"labelTemplate\"\n            :tooltip-visible=\"true\"\n            :categoryAxis=\"{visible: false}\"\n            :chartArea=\"chartArea\"\n            :tooltip-template=\"tooltipTemplate\"\n            :theme=\"'sass'\"\n        />\n\n        <LoadingMe\n            type=\"loading\"\n            :isLoading=\"showLoading\"\n            :myLoading=\"true\"\n            :fullPage=\"false\" />\n    </v-card>\n</template>\n\n<script>\n    // import kendo from '@progress/kendo-ui';\n    // import {i18n} from '@/i18n'\n    import Helper from \"@/helper.js\";\n    import { Chart } from \"@progress/kendo-charts-vue-wrapper\";\n\n    const IncomeStatementHandler = require(\"@/scripts/handler/accounting/incomeStatementHandler\");\n    \n    export default {\n        name: \"OverviewExpense\",\n        components:{\n            'chart' : Chart,\n            \"LoadingMe\": () => import('@/components/Loading'),\n        },\n        data: () => ({\n            totalExpense : 0,\n            series: [],\n            labelTemplate: \"#= category # - #= kendo.format('{0:P}', percentage)#\",\n            tooltipTemplate: \"#= category # - #= kendo.format('{0:P}', percentage) #\",\n            // LoadingMe\n            showLoading: false,\n            chartArea: {\n                background: \"transparent\",\n                margin: 0,\n                height: 230,\n            },\n        }),\n        methods: {\n            async loadData () {\n                this.showLoading = true;\n\n                /* Set Current Fiscal Date */\n                let currencyFiscalDate = Helper.getFiscalDateByDate(new Date());\n\n                /* Set Fiscal Months */\n                let fiscalMonths = [],\n                    sdate = new Date(currencyFiscalDate.start_date),\n                    edate = new Date(currencyFiscalDate.end_date);\n\n                /* Set Categories Axis */\n                this.categoryAxis = fiscalMonths;\n\n                /* Income Statement */\n                let incomeStatements = await IncomeStatementHandler.getIncomeStatement({\n                    params : {\n                        start_date \t\t: sdate,\n                        end_date \t\t: edate,\n                        group_by \t\t: \"12\",\n                    }\n                });\n\n                /* Bind Statement */\n                let statementList = [], totalExpense = 0, g = [];\n                let i = 0;\n                incomeStatements.data.forEach( value => {\n                \n                    if(value.statementGroup.toLowerCase() === \"expenses\"){\n                        totalExpense += value.balance;\n                        /* Grouping */\n                   \n                        if(g[value.type]){\n                            g[value.type].value += value.balance;\n                        }else{\n                            let color = [\n                                '#c80000',\n                                '#f44336',\n                                '#d85604',\n                                '#ED1A3A',\n                                '#cc1e1e',\n                                '#e88d14'\n                            ]\n                        \n                            g[value.type] = { category: value.type, value: value.balance, color: color[i]};\n\n                            if(i==5){\n                                i = 0\n                            }\n                            i++\n                        }\n                    }\n                });\n\n                /* Add to statement */\n                for (let key in g)\n                statementList.push(g[key]);\n                \n                /* Bind Total Expense */\n                this.totalExpense = totalExpense;\n\n                /* Bind Series */\n                this.series = [\n                    {\n                        type: 'pie',\n                        data: statementList\n                    }\n                ];\n\n                /* Refresh Chart */\n                let expenseChart = this.$refs.expenseChart.kendoWidget();\n                expenseChart.refresh();\n\n                this.showLoading = false;\n\t\t\t},\n        },\n        mounted() {\n            this.loadData();\n        },\n    };\n</script>\n\n<style scoped>\n    .theme--light.v-data-table {\n        background-color: transparent !important;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .v-data-table.simple1_table.theme--light,\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .theme--light.v-data-table.simple1_table > .v-data-table__wrapper > table > thead > tr:last-child > th:last-child{\n        border-right: none !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: transparent !important;\n    }\n\n    .border-bottom {\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .font-small {\n        font-size: 12px;\n        line-height: 15px;\n    }\n\n    .font-26 {\n        font-size: 26px !important;\n    }\n    .v-data-table.simple_table.theme--light{\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n        border-bottom: none !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n        border-right: none !important;\n    }\n\n    @media (max-width: 576px) {\n\n    }\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/banking/cash/CashRelateRatio.vue?vue&type=style&index=0&id=04018d34&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/banking/cash/CashRelateRatio.vue","mtime":1642155812623},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hdHRhY2htZW50X3RhYmxlLnYtZGF0YS10YWJsZQogID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlcgogID4gdGFibGUKICA+IHRoZWFkCiAgPiB0cgogID4gdGgsCi5hdHRhY2htZW50X3RhYmxlLnYtZGF0YS10YWJsZQogID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlcgogID4gdGFibGUKICA+IHRib2R5CiAgPiB0cgogID4gdGQgewogIGJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50Owp9CkBtZWRpYSAobWF4LXdpZHRoOiA1NzZweCkgewogIC5tdC02IHsKICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDsKICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgfQogIC5yb3cgKyAucm93IHsKICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDsKICB9Cn0K"},{"version":3,"sources":["CashRelateRatio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CashRelateRatio.vue","sourceRoot":"src/views/banking/cash","sourcesContent":["<template>\n  <v-row>\n    <v-col cols=\"12\" sm=\"12\" class=\"py-0 px-5\">\n      <v-row>\n        <v-col cols=\"12\" sm=\"12\" class=\"py-0\">\n          <h2 class=\"mb-3 font_20 float-left\">\n            {{ $t(\"financial_ratio\") }}\n          </h2>\n        </v-col>\n        <v-col cols=\"12\" sm=\"12\" class=\"py-0\">\n          <v-row>\n            <v-col cols=\"12\" sm=\"3\" class=\"py-0\">\n              <label class=\"label pr-3\">{{ $t(\"base_month\") }}</label>\n              <app-month-of-picker\n                :initMonthOf=\"baseMonthOf\"\n                @emitMonthOf=\"baseMonthOf = $event\"\n              />\n            </v-col>\n            <v-col cols=\"12\" sm=\"3\" class=\"py-0\">\n              <label class=\"label pr-3\">{{ $t(\"compare_month\") }}</label>\n              <app-month-of-picker\n                :initMonthOf=\"compareMonthOf\"\n                @emitMonthOf=\"compareMonthOf = $event\"\n              />\n            </v-col>\n            <v-col cols=\"12\" sm=\"3\" class=\"py-0\">\n              <v-btn\n                color=\"primary\"\n                class=\" white--text mt-6 float-right\"\n                @click=\"search\"\n              >\n                <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n              </v-btn>\n            </v-col>\n            <v-col cols=\"12\" sm=\"3\" class=\"py-0\">\n              <v-select\n                label=\"Reporting Language\"\n                v-model=\"lang\"\n                :items=\"languages\"\n                item-text=\"text\"\n                item-value=\"value\"\n              ></v-select>\n            </v-col>\n          </v-row>\n        </v-col>\n        <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n          <template>\n            <v-simple-table>\n              <template v-slot:default>\n                <thead>\n                  <tr>\n                    <th class=\"text-left\">\n                      {{ $t(\"financial_ratio\") }}\n                    </th>\n                    <th class=\"text-left\"></th>\n                    <th class=\"text-right\">\n                      {{ $t(\"accumulated\") }}\n                    </th>\n                    <th class=\"text-right\">\n                      {{ $t(\"base_month\") }}\n                    </th>\n                    <th class=\"text-right\">\n                      {{ $t(\"compare_month\") }}\n                    </th>\n                    <th class=\"text-right\">\n                      %\n                    </th>\n                    <th class=\"text-right\">\n                      {{ $t(\"previous_month\") }}\n                    </th>\n                    <th class=\"text-right\">\n                      %\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"item in ratios\" :key=\"item.en\">\n                    <template v-if=\"item.isHeader !== undefined\">\n                      <td class=\"grayBg text-bold text-uppercase\" colspan=\"8\">\n                        {{ item[lang] }}\n                      </td>\n                    </template>\n                    <template v-else>\n                      <td>{{ item[lang] }}</td>\n                      <td>{{ item.measurement }}</td>\n                      <td class=\"text-right\">\n                        {{ Number(item.accumulate).toLocaleString() }}\n                      </td>\n                      <td class=\"text-right\">\n                        {{ Number(item.base).toLocaleString() }}\n                      </td>\n                      <td class=\"text-right\">\n                        {{ Number(item.compare).toLocaleString() }}\n                      </td>\n                      <td class=\"text-right\">{{ item.comparePercentage }}</td>\n                      <td class=\"text-right\">\n                        {{ Number(item.previous).toLocaleString() }}\n                      </td>\n                      <td class=\"text-right\">{{ item.previousPercentage }}</td>\n                    </template>\n                  </tr>\n                </tbody>\n              </template>\n            </v-simple-table>\n          </template>\n\n          <LoadingMe\n            :isLoading=\"showLoading\"\n            :fullPage=\"false\"\n            :myLoading=\"true\"\n            type=\"loading\"\n          />\n        </v-col>\n      </v-row>\n    </v-col>\n  </v-row>\n</template>\n<script>\n// import {i18n} from '@/i18n';\nimport kendo from \"@progress/kendo-ui\";\nconst financialRatioHandler = require(\"@/scripts/handler/accounting/financialRatio.js\");\n\nexport default {\n  components: {\n    LoadingMe: () => import(\"@/components/Loading\"),\n    \"app-month-of-picker\": () =>\n      import(\"@/components/kendo_templates/MonthOfPicker\"),\n  },\n  data: () => ({\n    baseMonthOf: new Date().toISOString().substr(0, 7),\n    compareMonthOf: new Date().toISOString().substr(0, 7),\n    lang: \"en\",\n    languages: [\n      { text: \"English\", value: \"en\" },\n      { text: \"Local\", value: \"kh\" },\n    ],\n    ratios: [],\n    defaultRatios: {\n  \n\n\n      /* Liquidity Measure */\n      liquidityMeasure: {\n        en: \"Liquidity Measure\",\n        kh: \"ការវិភាគលើអត្រាលទ្ធភាពទូទាត់សាច់ប្រាក់\",\n        isHeader: \"h1\",\n      },\n      currentRatio: {\n        en: \"Current Ratio\",\n        kh: \"អនុបាតចរន្ត\",\n        measurement: \"Time\",\n      },\n      cashRatio: {\n        en: \"Cash Ratio\",\n        kh: \"អនុបាតសាច់ប្រាក់\",\n        measurement: \"Time\",\n      },\n      quickRation: {\n        en: \"Quick Ratio\",\n        kh: \"អនុបាតបំន្ទាន់\",\n        measurement: \"Time\",\n      },\n      workingCapitalToSaleRation: {\n        en: \"Working Capital To Sale Ratio\",\n        kh: \"អនុបាតទុនបង្វិលធៀបនឹងចំណូលលក់\",\n        measurement: \"%\",\n      },\n\n      /* Working Capital Measures */\n      workingCapitalMeasures: {\n        en: \"Working Capital Measures\",\n        kh: \"ការវិភាគលើអត្រាគ្រប់គ្រងទុនបង្វិល\",\n        isHeader: \"h1\",\n      },\n      payablePaymentDay: {\n        en: \"Payable Payment Days (PPD)\",\n        kh: \"រយះពេលនៃការទូទាត់បំណុលអ្នកផ្គត់ផ្គង់\",\n        measurement: \"Days\",\n      },\n      inventoryTurnoverDays: {\n        en: \"Inventory Turnover Days\",\n        kh: \"៉រយះពេលសន្និធិក្នុងសហគ្រាស\",\n        measurement: \"Days\",\n      },\n      receivableCollectionDays: {\n        en: \"Receivable Collection Days\",\n        kh: \"រយះពេលនៃការទូទាត់បំណុលអតិថិជន\",\n        measurement: \"Days\",\n      },\n      cashConversionCycle: {\n        en: \"Cash Conversion Cycle\",\n        kh: \"ចំនួនរយះបង្វិលសាច់ប្រាក់\",\n        measurement: \"%\",\n      },\n    },\n    // LoadingMe\n    showLoading: false,\n  }),\n  methods: {\n    // Search\n    async search() {\n      // Empty dataSource\n      let ratios = this.defaultRatios;\n\n      if (this.baseMonthOf && this.compareMonthOf) {\n        this.showLoading = true;\n\n        let bm = new Date(this.baseMonthOf),\n          baseMonthLastDay = new Date(bm.getFullYear(), bm.getMonth() + 1, 0),\n          cm = new Date(this.compareMonthOf),\n          compareMonthLastDay = new Date(\n            cm.getFullYear(),\n            cm.getMonth() + 1,\n            0\n          ),\n          previousMonthLastDay = new Date(\n            bm.getFullYear(),\n            bm.getMonth() - 1,\n            0\n          );\n\n        /* Accumulated Month */\n        let accumulatedMonths = await financialRatioHandler.getReport({\n          params: {\n            month_of:\n              kendo.toString(new Date(), \"yyyy-MM-dd\") + \"T23:59:59.999Z\", // Today Month (use data)\n            compare_month:\n              kendo.toString(baseMonthLastDay, \"yyyy-MM-dd\") + \"T23:59:59.999Z\", // Selected Base Month (don't use data)\n          },\n        });\n\n        /* Compare Month */\n        let compareMonths = await financialRatioHandler.getReport({\n          params: {\n            month_of:\n              kendo.toString(baseMonthLastDay, \"yyyy-MM-dd\") + \"T23:59:59.999Z\", // Selected Base Month\n            compare_month:\n              kendo.toString(compareMonthLastDay, \"yyyy-MM-dd\") +\n              \"T23:59:59.999Z\", // Selected Compare Month\n          },\n        });\n\n        /* Previous Month */\n        let previousMonths = await financialRatioHandler.getReport({\n          params: {\n            month_of:\n              kendo.toString(baseMonthLastDay, \"yyyy-MM-dd\") + \"T23:59:59.999Z\", // Selected Base Month (don't use data)\n            compare_month:\n              kendo.toString(previousMonthLastDay, \"yyyy-MM-dd\") +\n              \"T23:59:59.999Z\", // Selected Base Month -1 (use data)\n          },\n        });\n\n        /* Accumulate Month */\n        for (let key in accumulatedMonths.data.moth_of) {\n          if (ratios[`${key}`]) {\n            ratios[`${key}`][\"accumulate\"] =\n              accumulatedMonths.data.moth_of[`${key}`];\n\n            /* Sum up for Z Score */\n            if (ratios[`${key}`][\"privateFirmWeight\"]) {\n              ratios[\"totalZScore\"][\"accumulate\"] +=\n                accumulatedMonths.data.moth_of[`${key}`] *\n                ratios[`${key}`][\"privateFirmWeight\"];\n            }\n          }\n        }\n\n        /* Base Month */\n        for (let key in compareMonths.data.moth_of) {\n          if (ratios[`${key}`]) {\n            ratios[`${key}`][\"base\"] = compareMonths.data.moth_of[`${key}`];\n\n            /* Sum up for Z Score */\n            if (ratios[`${key}`][\"privateFirmWeight\"]) {\n              ratios[\"totalZScore\"][\"base\"] +=\n                compareMonths.data.moth_of[`${key}`] *\n                ratios[`${key}`][\"privateFirmWeight\"];\n            }\n          }\n        }\n\n        /* Compare Month */\n        for (let key in compareMonths.data.compare_month) {\n          if (ratios[`${key}`]) {\n            ratios[`${key}`][\"compare\"] =\n              compareMonths.data.compare_month[`${key}`];\n            ratios[`${key}`][\"comparePercentage\"] = this.convertPercentage(\n              ratios[`${key}`][\"base\"],\n              ratios[`${key}`][\"compare\"]\n            );\n\n            /* Sum up for Z Score */\n            if (ratios[`${key}`][\"privateFirmWeight\"]) {\n              ratios[\"totalZScore\"][\"compare\"] +=\n                compareMonths.data.compare_month[`${key}`] *\n                ratios[`${key}`][\"privateFirmWeight\"];\n            }\n          }\n        }\n\n        /* Previous Month */\n        for (let key in previousMonths.data.compare_month) {\n          if (ratios[`${key}`]) {\n            ratios[`${key}`][\"previous\"] =\n              previousMonths.data.compare_month[`${key}`];\n            ratios[`${key}`][\"previousPercentage\"] = this.convertPercentage(\n              ratios[`${key}`][\"base\"],\n              ratios[`${key}`][\"previous\"]\n            );\n\n            /* Sum up for Z Score */\n            if (ratios[`${key}`][\"privateFirmWeight\"]) {\n              ratios[\"totalZScore\"][\"previous\"] +=\n                previousMonths.data.compare_month[`${key}`] *\n                ratios[`${key}`][\"privateFirmWeight\"];\n            }\n          }\n        }\n\n        this.ratios = ratios;\n\n        this.showLoading = false;\n      }\n    },\n    convertPercentage(baseAmount, compareAmount) {\n      let amt = 0;\n      if (compareAmount !== 0) {\n        amt = baseAmount / compareAmount - 1;\n      }\n\n      return kendo.toString(amt, \"n2\");\n    },\n  },\n};\n</script>\n<style scoped>\n.attachment_table.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > thead\n  > tr\n  > th,\n.attachment_table.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr\n  > td {\n  border-right: none !important;\n}\n@media (max-width: 576px) {\n  .mt-6 {\n    margin-top: 0 !important;\n    margin-bottom: 15px;\n  }\n  .row + .row {\n    margin-top: 0 !important;\n  }\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/suppliers/AdvanceSettlement.vue?vue&type=style&index=0&id=73998599&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/suppliers/AdvanceSettlement.vue","mtime":1642155812717},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZnVuY3Rpb25fY29udGVudCB7CglwYWRkaW5nOiAwIDI1cHggMjVweDsKCWJvcmRlci1ib3R0b206IDA7Cn0KCi5jYXNoLWJhbGFuY2UudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZSB7CgliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9CgouY2FzaC1iYWxhbmNlLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUKCT4gLnYtZGF0YS10YWJsZV9fd3JhcHBlcgoJPiB0YWJsZQoJPiB0Ym9keQoJPiB0cgoJPiB0ZCB7CglwYWRkaW5nOiA1cHggMTBweCAhaW1wb3J0YW50OwoJaGVpZ2h0OiA1MHB4Owp9CgouY2FzaC1iYWxhbmNlLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUKCT4gLnYtZGF0YS10YWJsZV9fd3JhcHBlcgoJPiB0YWJsZQoJPiB0Ym9keQoJPiB0cgoJPiB0ZDpub3QoLnYtZGF0YS10YWJsZV9fbW9iaWxlLXJvdykgewoJYm9yZGVyLXRvcDogdGhpbiBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpOwoJYm9yZGVyLWJvdHRvbTogMCAhaW1wb3J0YW50Owp9CgouY2FzaC1iYWxhbmNlLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUKCT4gLnYtZGF0YS10YWJsZV9fd3JhcHBlcgoJPiB0YWJsZQoJPiB0Ym9keQoJPiB0cjpsYXN0LWNoaWxkCgl0ZCB7Cglib3JkZXItYm90dG9tOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoKLmstbGluayB7Cgljb2xvcjogYXF1YSAhaW1wb3J0YW50Owp9CgpAbWVkaWEgKG1pbi13aWR0aDogMTI2NHB4KSB7CgkuY29udGFpbmVyIHsKCQkvKiBtYXgtd2lkdGg6IDExODVweDsgKi8KCQltYXgtd2lkdGg6IDEwODBweCAhaW1wb3J0YW50OwoJfQp9CgpAbWVkaWEgKG1heC13aWR0aDogNTc2cHgpIHsKCS5tYi02IHsKCQltYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7Cgl9Cn0KLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUKCT4gLnYtZGF0YS10YWJsZV9fd3JhcHBlcgoJPiB0YWJsZQoJPiB0Ym9keQoJPiB0cjpob3Zlcjpub3QoLnYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX2NvbnRlbnQpOm5vdCgudi1kYXRhLXRhYmxlX19lbXB0eS13cmFwcGVyKSB7CgliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["AdvanceSettlement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA69BA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdvanceSettlement.vue","sourceRoot":"src/views/suppliers","sourcesContent":["<template>\n\t<v-app>\n\t\t<v-container>\n\t\t\t<v-row>\n\t\t\t\t<v-col cols=\"12\" sm=\"12\">\n\t\t\t\t\t<v-card\n\t\t\t\t\t\toutlined\n\t\t\t\t\t\tdense\n\t\t\t\t\t\tclass=\"pa-4 no_border rounded-sm\"\n\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n\t\t\t\t\t\t\t<v-card outlined dense class=\"no_border\">\n\t\t\t\t\t\t\t\t<h2 class=\"mb-0\">{{ $t(\"advance_settlement\") }}</h2>\n\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\tonclick=\"window.history.go(-1); return false;\"\n\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer; color: #333; font-size: 40px;\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right\"\n\t\t\t\t\t\t\t\t\t>close\n\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t<v-card outlined dense class=\"px-3 no_border mb-3\" color=\"grayBg\">\n\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- New Mode -->\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"employee\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<app-employee-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t:initEmployee=\"employee\"\n\t\t\t\t\t\t\t\t\t\t\t\t@emitEmployee=\"employee = $event\"\n\t\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"loadCashAdvance\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"advance_number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-select\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"employee.id === ''\"\n\t\t\t\t\t\t\t\t\t\t\t\t:items=\"cashAdvances\"\n\t\t\t\t\t\t\t\t\t\t\t\titem-value=\"uuid\"\n\t\t\t\t\t\t\t\t\t\t\t\titem-text=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"cashAdvance\"\n\t\t\t\t\t\t\t\t\t\t\t\t@change=\"onCashAdvanceChanges\"\n\t\t\t\t\t\t\t\t\t\t\t\tno-data-text=\"No data found.\"\n\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"[(v) => !!v || 'Cash Advance is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select Cash Advance\"\n\t\t\t\t\t\t\t\t\t\t\t\treturn-object\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t\t\t<!-- Edit Mode -->\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"employee\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.settled_by.name\"\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"advance_number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"cashAdvance.number\"\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"date\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<app-datepicker\n\t\t\t\t\t\t\t\t\t\t\t:initialDate=\"advanceSettlement.settlement_date\"\n\t\t\t\t\t\t\t\t\t\t\t@emitDate=\"advanceSettlement.settlement_date = $event\"\n\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"generateNumber\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"10\" cols=\"10\" class=\"pb-0 pt-1 pr-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\ttage=\"Number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"[(v) => !!v || 'Number is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"2\" cols=\"2\" class=\"pb-0 pt-1 pl-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"30\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"border_qrcode\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"generateNumber\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tmdi-qrcode\n\t\t\t\t\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"description\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-textarea\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\tno-resize\n\t\t\t\t\t\t\t\t\t\t\theight=\"120px\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.description\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('transaction_purpose')\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t</v-card>\n\n\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"pb-3 pa-3\">\n\t\t\t\t\t\t\t\t\t<p>{{ $t(\"purchase_transactions\") }}</p>\n\n\t\t\t\t\t\t\t\t\t<kendo-datasource\n\t\t\t\t\t\t\t\t\t\tref=\"clearingTransactionDS\"\n\t\t\t\t\t\t\t\t\t\t:data=\"clearingTransactionGrouping\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<kendo-grid\n\t\t\t\t\t\t\t\t\t\tid=\"clearingTransactionGrid\"\n\t\t\t\t\t\t\t\t\t\tref=\"clearingTransactionGrid\"\n\t\t\t\t\t\t\t\t\t\tclass=\"grid-function\"\n\t\t\t\t\t\t\t\t\t\t:data-source-ref=\"'clearingTransactionDS'\"\n\t\t\t\t\t\t\t\t\t\t:sortable=\"true\"\n\t\t\t\t\t\t\t\t\t\t:filterable=\"true\"\n\t\t\t\t\t\t\t\t\t\t:noRecords=\"true\"\n\t\t\t\t\t\t\t\t\t\t:column-menu=\"true\"\n\t\t\t\t\t\t\t\t\t\t:scrollable-virtual=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('no.')\"\n\t\t\t\t\t\t\t\t\t\t\t:template=\"rowNumberTmpl\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"40\"\n\t\t\t\t\t\t\t\t\t\t\t:column-menu=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t\tclass: 'text-products;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: products',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'number'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('number')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'name'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('supplier')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'amount'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('amount')\"\n\t\t\t\t\t\t\t\t\t\t\t:format=\"'{0:n}'\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'currency'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('currency')\"\n\t\t\t\t\t\t\t\t\t\t\t:template=\"'#=currency.code#'\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'exchanged_amount'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('exchanged_amount')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</kendo-grid>\n\n\t\t\t\t\t\t\t\t\t<v-row style=\"background-color: #fff;\">\n\t\t\t\t\t\t\t\t\t\t<v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-file-input\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-0 pt-0 \"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsm=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcols=\"6\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('attachment')\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\t\tprepend-icon=\"mdi-paperclip\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-slot:selection=\"{ text }\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-chip small label color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ text }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-chip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-file-input>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t<v-col sm=\"7\" cols=\"12\" class=\"py-0 pr-0\">\n\t\t\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3 pb-3 no_border\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"grayBg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-simple-table class=\"cash-balance\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"advance_amount\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(advancedAmount).toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ cashAdvance.currency.code }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"showExchangeAmount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"advance_in_exchanged_amount\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvancedExchangeAmount\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"settled_amount\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ Number(settledAmount).toLocaleString() }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"showCashAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"cash_account\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"hide_form_alert\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-cash-account-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initAccount=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvanceSettlement.cash_account\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitAccount=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvanceSettlement.cash_account = $event\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"$store.state.accounting.secondaryAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td v-if=\"showCashAccount\">{{ $t(\"secondary_account\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"hide_form_alert\" v-if=\"showCashAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-secondary-account-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initPrimaryAccountId=\"advanceSettlement.cash_account.uuid\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initAccount=\"secondaryAccount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitAccount=\"secondaryAccount = $event\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{{ $t(\"remaining\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ Number(remaining).toLocaleString() }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-simple-table>\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t</v-row>\n\n\t\t\t\t\t\t\t<v-divider class=\"mt-3\" />\n\t\t\t\t\t\t\t<v-card outlined dense class=\"no_border function_footer\">\n\t\t\t\t\t\t\t\t<!-- Warning Message -->\n\t\t\t\t\t\t\t\t<v-alert type=\"warning\" v-model=\"alert\" dismissible>\n\t\t\t\t\t\t\t\t\t<span v-html=\"errorMessage\" />\n\t\t\t\t\t\t\t\t</v-alert>\n\n\t\t\t\t\t\t\t\t<v-menu>\n\t\t\t\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mr-2 text-capitalize  black--text float-left\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"select_template\") }}\n\t\t\t\t\t\t\t\t\t\t\t<v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<v-list>\n\t\t\t\t\t\t\t\t\t\t<v-list-item\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in templates\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>{{ item.title }}</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t</v-list>\n\t\t\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text float-left\"\n\t\t\t\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $t(\"cancel\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclass=\"ml-2 text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\t\t\t@click=\"confirmDelete\"\n\t\t\t\t\t\t\t\t\t>{{ $t(\"delete\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-menu>\n\t\t\t\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-2 float-right text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"save_option\") }}\n\t\t\t\t\t\t\t\t\t\t\t<v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<v-list rounded>\n\t\t\t\t\t\t\t\t\t\t<v-list-item-group>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVENEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_new\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVEPRINT)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_print\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVEDRAFT)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_draft\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t</v-list-item-group>\n\t\t\t\t\t\t\t\t\t</v-list>\n\t\t\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right  text-capitalize white--text\"\n\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n\t\t\t\t\t\t\t\t\t>{{ $t(\"save_close\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t</v-form>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-col>\n\t\t\t</v-row>\n\t\t\t<LoadingMe\n\t\t\t\t:isLoading=\"showLoading\"\n\t\t\t\t:fullPage=\"false\"\n\t\t\t\t:myLoading=\"true\"\n\t\t\t\t:alertMessage=\"loadingAlert\"\n\t\t\t\t:color=\"loadingColorAlert\"\n\t\t\t\t:alertText=\"loadingTextAlert\"\n\t\t\t/>\n\t\t</v-container>\n\t</v-app>\n</template>\n\n<script>\n// import kendo from \"@progress/kendo-ui\";\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\nimport {\n\tAdvanceSettlementModel,\n\tJournalModel,\n\tJournalEntryModel,\n\tAccountModel,\n\tEmployeeModel,\n\tCashAdvanceModel,\n\tCurrencyModel,\n\tContactModel,\n} from \"@/scripts/model/AppModels\";\nimport ResponseDataModel from \"@/scripts/model/ResponseData\";\nimport AccountSecondaryEditor from \"@/scripts/kendo_editor/AccountSecondary\";\n\n/* Store */\nimport store from \"@/store\";\nconst institute = store.state.institute.institute;\n\nconst {\n\tadvanceSettlementHandler,\n\tcashAdvanceHandler,\n} = require(\"@/scripts/AppHandlers\");\nconst clearingTransactionHandler = require(\"@/scripts/handler/workingcapital/clearingTransactionHandler.js\");\n\nconst {\n\tAccountTypeCode,\n\tSaveOption,\n\tEntityType,\n} = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n\tname: \"AdvanceSettlement\",\n\tcomponents: {\n\t\tLoadingMe: () => import(\"@/components/Loading\"),\n\t\t\"app-datepicker\": () =>\n\t\t\timport(\"@/components/custom_templates/DatePickerComponent\"),\n\t\t\"app-employee-dropdownlist\": () =>\n\t\t\timport(\"@/components/dropdownlist/Employee\"),\n\t\t\"app-cash-account-dropdownlist\": () =>\n\t\t\timport(\"@/components/dropdownlist/CashAccount\"),\n\t\t\"app-secondary-account-dropdownlist\": () => import('@/components/dropdownlist/AccountSecondary'),\n\t},\n\tprops: {\n\t\tinitAdvanceSettlement: {\n\t\t\ttype: AdvanceSettlementModel,\n\t\t},\n\t\tinitCashAdvance: {\n\t\t\ttype: CashAdvanceModel,\n\t\t},\n\t\tinitClearingTransactions: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\tdata: () => ({\n\t\t// Obj\n\t\tadvanceSettlement: new AdvanceSettlementModel(),\n\t\tjournal: new JournalModel(),\n\t\tjournalEntries: [],\n\t\temployee: new EmployeeModel(),\n\t\tclearingTransactionGrouping: [],\n\t\tclearingTransactions: [],\n\t\tcashAdvance: new CashAdvanceModel(),\n\t\tcashAdvances: [],\n\t\tsecondaryAccount: new AccountModel(),\n\t\t// Other\n\t\tadvancedAmount: 0,\n\t\tadvancedExchangeAmount: 0,\n\t\tsettledAmount: 0,\n\t\tshowExchangeAmount: false,\n\t\tshowCashAccount: true,\n\t\tfiles: [],\n\t\ttemplates: [],\n\t\tuser: Helper.getUser(),\n\t\t/* Editors */\n\t\tAccountSecondaryEditor : AccountSecondaryEditor,\n\t\t// Form validation\n\t\tvalid: true,\n\t\tisEdit: false,\n\t\talert: false,\n\t\terrorMessage: \"\",\n\t\tsaveMode: \"\",\n\t\tSaveOption: SaveOption,\n\t\t// LoadingMe\n\t\tshowLoading: false,\n\t\tloadingAlert: false,\n\t\tloadingColorAlert: \"\",\n\t\tloadingTextAlert: \"\",\n\t}),\n\tmethods: {\n\t\t// Initial Data\n\t\tinitialData() {\n\t\t\tif (this.initAdvanceSettlement) {\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.advanceSettlement = Object.assign({}, this.initAdvanceSettlement);\n\n\t\t\t\tthis.bindData();\n\t\t\t} else {\n\t\t\t\t// Brand New Mode\n\t\t\t\tthis.setDefaultData();\n\t\t\t}\n\t\t},\n\t\t// Set default data\n\t\tsetDefaultData() {\n\t\t\t// Brand New Mode\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.advanceSettlement = new AdvanceSettlementModel({\n\t\t\t\tsettlement_date: new Date().toISOString().substr(0, 10),\n\t\t\t});\n\n\t\t\t// Generate Number\n\t\t\tthis.generateNumber();\n\t\t},\n\t\t// Bind data from prop for edit mode\n\t\tasync bindData() {\n\t\t\t// Edit Mode\n\t\t\tthis.isEdit = true;\n\n\t\t\t// Employee\n\t\t\tthis.employee = new EmployeeModel(this.advanceSettlement.settled_by);\n\n\t\t\t// Cash Advance\n\t\t\tthis.cashAdvance = new CashAdvanceModel(this.initCashAdvance);\n\n\t\t\t// Show/Hide exchange amount\n\t\t\tlet baseCurrency = new CurrencyModel(institute.baseCurrency);\n\t\t\tthis.showExchangeAmount = Boolean(\n\t\t\t\tthis.cashAdvance.currency.code !== baseCurrency.code\n\t\t\t);\n\n\t\t\t// Clearing Transactions\n\t\t\tthis.clearingTransactions = this.initClearingTransactions;\n\t\t\tthis.clearingTransactionGrouping = Helper.groupExpenseByCashAdvance(\n\t\t\t\tthis.clearingTransactions\n\t\t\t);\n\t\t\tthis.autoCalculate();\n\n\t\t\t//Journal\n\t\t\tthis.journal = this.advanceSettlement.journal;\n\t\t\tthis.journalEntries = this.advanceSettlement.journal_entries;\n\t\t},\n\t\t// Number\n\t\tasync generateNumber() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\tlet num = await Helper.generateAccountingNumber(\n\t\t\t\t\tEntityType.ADVANCE_SETTLEMENT,\n\t\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t\t);\n\n\t\t\t\tthis.advanceSettlement.number = num.number;\n\t\t\t\tthis.advanceSettlement.prefix_format = num.prefix_format;\n\t\t\t}\n\t\t},\n\t\t// Row Number Template\n\t\trowNumberTmpl(dataItem) {\n\t\t\tlet ds = this.$refs.clearingTransactionDS.kendoWidget(),\n\t\t\t\tindex = ds.indexOf(dataItem);\n\n\t\t\treturn index + 1;\n\t\t},\n\t\t// Load Cash Advance\n\t\tloadCashAdvance() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\tthis.cashAdvance = new CashAdvanceModel();\n\t\t\t\tthis.cashAdvances = [];\n\n\t\t\t\tif (this.employee.id !== \"\") {\n\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\tcashAdvanceHandler\n\t\t\t\t\t\t.getByEmployeeId(this.employee.id)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tlet responseData = new ResponseDataModel(res);\n\n\t\t\t\t\t\t\tlet cashAdvanceList = [];\n\t\t\t\t\t\t\tresponseData.data.forEach((value) => {\n\t\t\t\t\t\t\t\tcashAdvanceList.push(new CashAdvanceModel(value));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.cashAdvances = cashAdvanceList;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// On Cash Advance Changes\n\t\tonCashAdvanceChanges() {\n\t\t\tthis.clearingTransactionGrouping = [];\n\t\t\tthis.clearingTransactions = [];\n\t\t\tthis.autoCalculate();\n\n\t\t\tif (this.cashAdvance.uuid !== \"\") {\n\t\t\t\t// Show/Hide exchange amount\n\t\t\t\tlet baseCurrency = new CurrencyModel(institute.baseCurrency);\n\t\t\t\tthis.showExchangeAmount = Boolean(\n\t\t\t\t\tthis.cashAdvance.currency.code !== baseCurrency.code\n\t\t\t\t);\n\n\t\t\t\t// Load Related Expenses\n\t\t\t\tthis.showLoading = true;\n\t\t\t\tclearingTransactionHandler\n\t\t\t\t\t.getByCashAdvanceId(this.cashAdvance.uuid)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tlet responseData = new ResponseDataModel(res);\n\t\t\t\t\t\tthis.clearingTransactions = responseData.data;\n\t\t\t\t\t\tthis.clearingTransactionGrouping = Helper.groupExpenseByCashAdvance(\n\t\t\t\t\t\t\tresponseData.data\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.autoCalculate();\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// Auto Calculate\n\t\tautoCalculate() {\n\t\t\t// Cash Advance Amount\n\t\t\tthis.advancedAmount = 0;\n\t\t\tthis.advancedExchangeAmount = 0;\n\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\tif (value.amount > 0) {\n\t\t\t\t\tthis.advancedAmount += value.amount;\n\t\t\t\t\tthis.advancedExchangeAmount += value.exchanged_amount;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Transaction Amount\n\t\t\tthis.settledAmount = 0;\n\t\t\tthis.clearingTransactionGrouping.forEach((value) => {\n\t\t\t\tthis.settledAmount += value.exchanged_amount;\n\t\t\t});\n\n\t\t\tthis.showCashAccount = Boolean(\n\t\t\t\tthis.advancedExchangeAmount - this.settledAmount !== 0\n\t\t\t);\n\t\t},\n\t\t// Shrink Data\n\t\tshrinkData() {\n\t\t\t// Settlement Date\n\t\t\tthis.advanceSettlement.settlement_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\n\t\t\t// Employee\n\t\t\tthis.advanceSettlement.settled_by = new ContactModel(this.employee);\n\n\t\t\t// Cash Advance\n\t\t\tthis.advanceSettlement.cash_advance_uuid = this.cashAdvance.uuid;\n\n\t\t\t// Cash Amount\n\t\t\tthis.advanceSettlement.cash_amount = this.remaining;\n\n\t\t\t// Update Cash Advance\n\t\t\tthis.cashAdvance.is_settled = 1;\n\t\t\tthis.cashAdvance.settled_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\n\t\t\t// User\n\t\t\tif (this.isEdit) {\n\t\t\t\tthis.advanceSettlement.modified_by = this.user;\n\t\t\t} else {\n\t\t\t\tthis.advanceSettlement.created_by = this.user;\n\t\t\t}\n\t\t},\n\t\t// Add Journal\n\t\taddJournal() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\t// New Mode\n\t\t\t\tlet entries = [];\n\n\t\t\t\t// Advance Settlement Clearing Account (From Expense) on Dr\n\t\t\t\tthis.clearingTransactions.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue.account.number ===\n\t\t\t\t\t\tAccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE\n\t\t\t\t\t) {\n\t\t\t\t\t\tentries.push(\n\t\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\t\taccount: new AccountModel(value.account),\n\t\t\t\t\t\t\t\taccount_uuid: value.account.uuid,\n\t\t\t\t\t\t\t\tsecondary_acc_uuid: value.secondary_acc_uuid,\n\t\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\t\tamount: value.exchanged_amount * -1,\n\t\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Cash Account\n\t\t\t\tif (this.remaining !== 0) {\n\t\t\t\t\tentries.push(\n\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\taccount: new AccountModel(this.advanceSettlement.cash_account),\n\t\t\t\t\t\t\taccount_uuid: this.advanceSettlement.cash_account.uuid,\n\t\t\t\t\t\t\tsecondary_acc_uuid: this.secondaryAccount.uuid,\n\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\tamount: this.remaining,\n\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Cash Advance on Cr\n\t\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue.account.account_type.code === AccountTypeCode.CASH_ADVANCE\n\t\t\t\t\t) {\n\t\t\t\t\t\tentries.push(\n\t\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\t\taccount: new AccountModel(value.account),\n\t\t\t\t\t\t\t\taccount_uuid: value.account.uuid,\n\t\t\t\t\t\t\t\tsecondary_acc_uuid: value.secondary_acc_uuid,\n\t\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\t\tamount: value.exchanged_amount * -1, // Cr side is negative\n\t\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Journal Entries\n\t\t\t\tthis.journalEntries = entries;\n\t\t\t} else {\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.journalEntries.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t~AccountTypeCode.CASH_ACCOUNTS.indexOf(\n\t\t\t\t\t\t\tvalue.account.account_type.code\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tvalue.account = new AccountModel(\n\t\t\t\t\t\t\tthis.advanceSettlement.cash_account\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Journal\n\t\t\tthis.journal.number = this.advanceSettlement.number;\n\t\t\tthis.journal.description = this.advanceSettlement.description;\n\t\t\tthis.journal.journal_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\t\t\tthis.journal.journal_type = EntityType.AUTO_JOURNAL;\n\t\t\tthis.journal.transaction_type = EntityType.ADVANCE_SETTLEMENT;\n\t\t\tthis.journal.prefix_format = this.advanceSettlement.prefix_format;\n\t\t\tthis.journal.project_uuid = this.cashAdvance.project_uuid;\n\t\t\tthis.journal.segment_uuid = this.cashAdvance.segment_uuid;\n\t\t\tthis.journal.is_draft = this.advanceSettlement.is_draft;\n\t\t\tthis.journal.created_by = this.advanceSettlement.created_by;\n\t\t\tthis.journal.modified_by = this.advanceSettlement.modified_by;\n\t\t},\n\t\t// Validating\n\t\tvalidateForm() {\n\t\t\tlet result = true,\n\t\t\t\tmsg = \"\";\n\n\t\t\t// Employee\n\t\t\tif (this.employee.id === \"\") {\n\t\t\t\tmsg += `<p>${i18n.t(\"employee_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Cash Advance\n\t\t\tif (this.cashAdvance.uuid === \"\") {\n\t\t\t\tmsg += `<p>${i18n.t(\"please_select_cash_advance\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Cash Account\n\t\t\tif (\n\t\t\t\tthis.remaining !== 0 &&\n\t\t\t\tthis.advanceSettlement.cash_account.name === \"\"\n\t\t\t) {\n\t\t\t\tmsg += `<p>${i18n.t(\"please_select_cash_account\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t/* Secondary Account */\n\t\t\tlet secondaryAccountAmount = 0;\n\t\t\t// Advance Settlement Clearing Account (From Expense) on Dr\n\t\t\tthis.clearingTransactions.forEach((value) => {\n\t\t\t\tif (value.account.number === AccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE && value.secondary_acc_uuid !== \"\") {\n\t\t\t\t\tsecondaryAccountAmount += value.exchanged_amount * -1;\n\t\t\t\t}\n\t\t\t});\n\t\t\t// Cash Account on Dr/Cr\n\t\t\tif (this.remaining !== 0) {\n\t\t\t\tif(this.secondaryAccount.uuid !== \"\"){\n\t\t\t\t\tsecondaryAccountAmount += this.remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Cash Advance on Cr\n\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\tif(value.account.account_type.code === AccountTypeCode.CASH_ADVANCE && value.secondary_acc_uuid !== \"\"){\n\t\t\t\t\tsecondaryAccountAmount += value.exchanged_amount * -1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* Secondary Account Balance */\n\t\t\tif(secondaryAccountAmount !== 0){\n\t\t\t\tmsg += `<p>${i18n.t(\"secondary_account_unbalance\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Show Alert\n\t\t\tthis.errorMessage = msg;\n\t\t\tthis.alert = false;\n\t\t\tif (result === false) {\n\t\t\t\tthis.alert = true;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\t// All Saves\n\t\tasync onSaveOptionClick(mode) {\n\t\t\tif (this.$refs.form.validate() && this.validateForm()) {\n\t\t\t\tlet isValidClosingDate = await Helper.validateClosingDate(\n\t\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t\t);\n\t\t\t\tif (isValidClosingDate) {\n\t\t\t\t\tthis.saveMode = mode;\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcancel() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t(\"msg_title_warning\"),\n\t\t\t\ttext: i18n.t(\"msg_discard\"),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcancelButtonText: i18n.t(\"cancel\"),\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: i18n.t(\"discard\"),\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tclear() {\n\t\t\tthis.isEdit = false;\n\t\t\tthis.saveMode = \"\";\n\n\t\t\tthis.advancedAmount = 0;\n\t\t\tthis.advancedExchangeAmount = 0;\n\t\t\tthis.settledAmount = 0;\n\t\t\tthis.showExchangeAmount = false;\n\t\t\tthis.showCashAccount = true;\n\n\t\t\tthis.advanceSettlement = new AdvanceSettlementModel();\n\t\t\tthis.journal = new JournalModel();\n\t\t\tthis.journalEntries = [];\n\t\t\tthis.employee = new EmployeeModel();\n\t\t\tthis.cashAdvance = new CashAdvanceModel();\n\t\t\tthis.cashAdvances = [];\n\t\t\tthis.clearingTransactions = [];\n\n\t\t\t// Datasoure\n\t\t\tlet ds = this.$refs.clearingTransactionDS.kendoWidget();\n\t\t\tds.data([]);\n\n\t\t\tthis.setDefaultData();\n\t\t},\n\t\tconfirmDelete() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t(\"are_you_sure_you_want_to_delete_it\"),\n\t\t\t\ttext: i18n.t(\"you_wont_be_able_to_revert_this\"),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: \"Yes\",\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.saveMode = SaveOption.DELETE;\n\n\t\t\t\t\t/* Mark as deleted */\n\t\t\t\t\tthis.advanceSettlement.is_deleted = 1;\n\n\t\t\t\t\t/* Update Account */\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsave() {\n\t\t\tlet self = this;\n\n\t\t\t// Draft Mode\n\t\t\tif (this.saveMode === SaveOption.SAVEDRAFT) {\n\t\t\t\tthis.advanceSettlement.is_draft = 1;\n\t\t\t} else {\n\t\t\t\tthis.advanceSettlement.is_draft = 0;\n\t\t\t}\n\n\t\t\t// Shrink Data\n\t\t\tthis.shrinkData();\n\n\t\t\t// Add Journal\n\t\t\tthis.addJournal();\n\n\t\t\t// Sync Data\n\t\t\tthis.showLoading = true;\n\t\t\tadvanceSettlementHandler\n\t\t\t\t.save({\n\t\t\t\t\tadvance_settlement: new AdvanceSettlementModel(\n\t\t\t\t\t\tthis.advanceSettlement\n\t\t\t\t\t),\n\t\t\t\t\tcash_advance: new CashAdvanceModel(this.cashAdvance),\n\t\t\t\t\texpense: this.clearingTransactions,\n\t\t\t\t\tjournal: new JournalModel(this.journal),\n\t\t\t\t\tjournal_entries: this.journalEntries,\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tself.responseStatus(response);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\tHelper.alertErrorMsg(error);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tself.showLoading = false;\n\t\t\t\t});\n\t\t},\n\t\t// Response Status\n\t\tresponseStatus(response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\tif (\n\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t) {\n\t\t\t\t\t/* Save Close or Delete */\n\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.goBackToViewPage();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.clear();\n\n\t\t\t\t/* Alert Success */\n\t\t\t\tthis.$snotify.success(i18n.t(\"successful\"));\n\t\t\t} else {\n\t\t\t\t/* Alert Error */\n\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t}\n\t\t},\n\t\t// Go back to view page after edit mode\n\t\tgoBackToViewPage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: \"Advance Settlement View\",\n\t\t\t\tparams: { initAdvanceSettlement: Object.assign({}, new AdvanceSettlementModel(this.advanceSettlement)) },\n\t\t\t});\n\t\t},\n\t},\n\tcomputed: {\n\t\tremaining() {\n\t\t\treturn this.advancedExchangeAmount - this.settledAmount;\n\t\t},\n\t},\n\twatch: {\n\t\tinitAdvanceSettlement: \"initialData\"\n\t},\n\tmounted() {\n\t\t// Initial Data\n\t\tthis.initialData();\n\t},\n};\n</script>\n\n<style scoped>\n.function_content {\n\tpadding: 0 25px 25px;\n\tborder-bottom: 0;\n}\n\n.cash-balance.theme--light.v-data-table {\n\tbackground-color: transparent !important;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr\n\t> td {\n\tpadding: 5px 10px !important;\n\theight: 50px;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr\n\t> td:not(.v-data-table__mobile-row) {\n\tborder-top: thin solid rgba(0, 0, 0, 0.12);\n\tborder-bottom: 0 !important;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr:last-child\n\ttd {\n\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.k-link {\n\tcolor: aqua !important;\n}\n\n@media (min-width: 1264px) {\n\t.container {\n\t\t/* max-width: 1185px; */\n\t\tmax-width: 1080px !important;\n\t}\n}\n\n@media (max-width: 576px) {\n\t.mb-6 {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n\tbackground-color: transparent !important;\n}\n</style>\n"]}]}
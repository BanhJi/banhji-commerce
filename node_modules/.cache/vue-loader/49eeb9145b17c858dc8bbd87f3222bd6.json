{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/suppliers/purchase/purchase_discounts/DiscountItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/suppliers/purchase/purchase_discounts/DiscountItem.vue","mtime":1638499443356},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEaXNjb3VudEl0ZW1Nb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvRGlzY291bnRJdGVtcyI7CmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgQWNjb3VudE1hcHBpbmdNb2RlbCBmcm9tICJAL3NjcmlwdHMvYWNjb3VudC1tYXAvQWNjb3VudCI7Cgpjb25zdCAkID0ga2VuZG8ualF1ZXJ5CmNvbnN0IGFjY291bnRIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2hhbmRsZXIvYWNjb3VudGluZy9hY2NvdW50Iik7CmNvbnN0IGRpc2NvdW50SXRlbUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGlzY291bnRJdGVtSGFuZGxlciIpOwpjb25zdCBkaXNjb3VudEl0ZW1Nb2RlbCA9IG5ldyBEaXNjb3VudEl0ZW1Nb2RlbCh7fSk7CmNvbnN0IFRZUEUgPSAiUHVyY2hhc2UiOwpjb25zdCBUWVBFX09QVElPTiA9ICI/dHlwZT0iICsgVFlQRTsKCmltcG9ydCBKU1ppcCBmcm9tICJqc3ppcCI7Cgp3aW5kb3cuSlNaaXAgPSBKU1ppcDsKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KGBAL2NvbXBvbmVudHMvTG9hZGluZ2ApLAogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgbmF0dXJlczogWyJBbW91bnQiLCAiUGVyY2VudGFnZSJdLAogICAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgICBkaWFsb2dNMzogZmFsc2UsCiAgICAgICAgZGlzY291bnRJdGVtTGlzdDogW10sCiAgICAgICAgYWNjb3VudDogW10sCiAgICAgICAgbUFjY291bnQ6IHt9LAogICAgICAgIGRpc2NvdW50SXRlbTogZGlzY291bnRJdGVtTW9kZWwsCiAgICAgICAgc2NoZW1hRGVmaW5pdGlvbjogewogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgIH0pLAogICAgcHJvcHM6IHt9LAogICAgbWV0aG9kczogewogICAgICAgIHJvd051bWJlclRtcGwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5kaXNjb3VudEl0ZW1EUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRBY2NvdW50KCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBhY2NvdW50SGFuZGxlci5nZXRBbGwoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY291bnQgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigobSkgPT4gbS5hY2NvdW50X3R5cGUubnVtYmVyID09PSAzMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGl0bSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdG0udXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogaXRtLnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0bS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lOiBpdG0ubG9jYWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBpdG0ubnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc190YXhhYmxlOiBpdG0uaXNfdGF4YWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFuaGppQWNjQ29kZTogaXRtLmJhbmhqaUFjY0NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX2NvZGU6IGl0bS5ncm91cF9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRfYWNjb3VudDogaXRtLnBhcmVudF9hY2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX2NvZGU6IGl0bS50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfdHlwZTogaXRtLmFjY291bnRfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjY291bnQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQWNjb3VudCA9IHRoaXMuYWNjb3VudFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGNhbmNlbCgpIHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dNMyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgY2xvc2UoKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nTTMgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIG5ld0NsaWNrKCkgewogICAgICAgICAgICB0aGlzLmRpc2NvdW50SXRlbSA9IHt9OwogICAgICAgICAgICB0aGlzLm1BY2NvdW50ID0ge307CiAgICAgICAgICAgIHRoaXMuZGlhbG9nTTMgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgZ29FZGl0KGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBsZXQgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWREaXNjb3VudEl0ZW0iKS5kYXRhKCJrZW5kb0dyaWQiKTsKICAgICAgICAgICAgbGV0IGRhdGFJdGVtID0gZ3JpZC5kYXRhSXRlbSgkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgidHIiKSk7CiAgICAgICAgICAgIHRoaXMuZGlzY291bnRJdGVtID0gZGF0YUl0ZW07CiAgICAgICAgICAgIHRoaXMubUFjY291bnQgPSBkYXRhSXRlbS5hY2NvdW50OwogICAgICAgICAgICB0aGlzLmRpYWxvZ00zID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uU2F2ZUNsb3NlKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuZGlzY291bnRJdGVtLmlkID8gdGhpcy5kaXNjb3VudEl0ZW0uaWQgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNjb3VudEl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogdGhpcy5kaXNjb3VudEl0ZW0uY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGlzY291bnRJdGVtLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBuZXcgQWNjb3VudE1hcHBpbmdNb2RlbCh0aGlzLm1BY2NvdW50KSwKICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB0aGlzLmRpc2NvdW50SXRlbS5hbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFRZUEUsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hdHVyZTogdGhpcy5kaXNjb3VudEl0ZW0ubmF0dXJlLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZGlzY291bnRJdGVtSGFuZGxlcgogICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kaXNjb3VudEl0ZW1MaXN0LmZpbmRJbmRleCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmlkID09PSBpdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNjb3VudEl0ZW1MaXN0LnB1c2gocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2NvdW50SXRlbUxpc3Quc3BsaWNlKGluZGV4LCAxLCByZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ2luZGV4ICcsIGluZGV4LCAnLS0nLCB0aGlzLmRpc2NvdW50SXRlbUxpc3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5zdWNjZXNzKCJTdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWREaXNjb3VudEl0ZW1zKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2NvdW50SXRlbUxpc3QgPSBbXQogICAgICAgICAgICAgICAgICAgIGRpc2NvdW50SXRlbUhhbmRsZXIubGlzdChUWVBFX09QVElPTikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY291bnRJdGVtTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaW5pdFRvb2xiYXIodGhhdCkgewogICAgICAgICAgICBsZXQgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWREaXNjb3VudEl0ZW0iKS5kYXRhKCJrZW5kb0dyaWQiKTsKICAgICAgICAgICAgbGV0IGdyaWRFbGVtZW50ID0gZ3JpZC5lbGVtZW50OwogICAgICAgICAgICBsZXQgdG9vbGJhckVsZW1lbnQgPSBncmlkRWxlbWVudC5maW5kKCIuay1ncmlkLXRvb2xiYXIiKTsKICAgICAgICAgICAgdG9vbGJhckVsZW1lbnQub24oImNsaWNrIiwgIi5rLXBhZ2VyLXJlZnJlc2giLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgb25SZWxvYWREYXRhKHRoYXQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdG9vbGJhckVsZW1lbnQub24oImNsaWNrIiwgIi5rLXBhZ2VyLWV4Y2VsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIG9uRXhwb3J0RXhjZWwodGhhdCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gb25SZWxvYWREYXRhKHRoYXQpIHsKICAgICAgICAgICAgICAgIHRoYXQubG9hZERpc2NvdW50SXRlbXMoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gb25FeHBvcnRFeGNlbCh0aGF0KSB7CiAgICAgICAgICAgICAgICB0aGF0LmV4cG9ydFRvRXhjZWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9vbGJhclRlbXBsYXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlSHRtbCA9CiAgICAgICAgICAgICAgICAnPHNwYW4+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9ImstcGFnZXItZXhjZWwgay1saW5rIGstYnV0dG9uIGV4Y2VsIiB0aXRsZT0iRXhwb3J0IHRvIEV4Y2VsIj4gPHNwYW4gY2xhc3M9ImstaWNvbiBrLWktZXhjZWwiPjwvc3Bhbj5FeHBvcnQgdG8gZXhjZWwgPC9hPicgKwogICAgICAgICAgICAgICAgJzwvc3Bhbj48c3Bhbj4mbmJzcDsmbmJzcDs8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4gc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyByaWdodDo1cHgiPicgKwogICAgICAgICAgICAgICAgJzwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICc8c3Bhbj4nICsKICAgICAgICAgICAgICAgICc8YSBjbGFzcz0iay1wYWdlci1yZWZyZXNoIGstbGluayBrLWJ1dHRvbiByZWxvYWQiIHRpdGxlPSJSZWZyZXNoIj48c3BhbiBjbGFzcz0iay1pY29uIGstaS1yZWxvYWQiPjwvc3Bhbj4gUmVmcmVzaCA8L2E+JyArCiAgICAgICAgICAgICAgICAnPC9zcGFuPicKCiAgICAgICAgICAgIHJldHVybiBrZW5kby50ZW1wbGF0ZSh0ZW1wbGF0ZUh0bWwpCiAgICAgICAgfSwKICAgICAgICBleHBvcnRUb0V4Y2VsKCkgewogICAgICAgICAgICBjb25zdCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZERpc2NvdW50SXRlbSIpLmRhdGEoImtlbmRvR3JpZCIpCiAgICAgICAgICAgIGdyaWQuc2F2ZUFzRXhjZWwoKQogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZDogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGF3YWl0IHRoaXMubG9hZERpc2NvdW50SXRlbXMoKTsKICAgICAgICBhd2FpdCB0aGlzLmluaXRUb29sYmFyKHRoaXMpCiAgICB9LAogICAgY3JlYXRlZDogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGF3YWl0IHRoaXMubG9hZEFjY291bnQoKTsKICAgIH0sCn07Cg=="},{"version":3,"sources":["DiscountItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6PA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DiscountItem.vue","sourceRoot":"src/views/suppliers/purchase/purchase_discounts","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"grayBg px-6\">\n            <v-card color=\"white\" class=\"pa-3 no_border\" elevation=\"0\">\n                <v-row>\n                    <v-col sm=\"9\" class=\"pb-0 pt-0\">\n                        <h2 class=\"mb-0 font_20\">{{ $t(\"discount_item\") }}</h2>\n                        <p class=\"mb-0\">{{ $t(\"discount_item_payable_report_desc\") }}</p>\n                    </v-col>\n                    <v-col sm=\"3\" class=\"pb-0\">\n                        <v-btn\n                            @click=\"newClick\"\n                            color=\"primary\"\n                            class=\"white--text float-right text-capitalize\"\n                        >\n                            {{ $t(\"new_discount_item\") }}\n                        </v-btn>\n                    </v-col>\n                </v-row>\n                <v-dialog v-model=\"dialogM3\" max-width=\"600px\">\n                    <v-card>\n                        <div class=\"modal_header\">\n                            <v-card-title>{{ $t(\"discount_item\") }}</v-card-title>\n                            <v-icon class=\"\" @click=\"dialogM3 = false\">close</v-icon>\n                        </div>\n                        <v-card-text class=\"modal_text_content\">\n                            <v-row>\n                                <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                    <label>{{ $t(\"code\") }}</label>\n                                    <v-text-field\n                                        class=\"mt-1\"\n                                        v-model=\"discountItem.code\"\n                                        outlined\n                                        clearable\n                                    />\n                                </v-col>\n                                <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                    <label class=\"label\">{{ $t(\"nature\") }}</label>\n                                    <v-select\n                                        tag=\"natureSelector\"\n                                        v-model=\"discountItem.nature\"\n                                        :items=\"natures\"\n                                        class=\"mt-1\"\n                                        outlined\n                                        clearable\n                                    />\n                                </v-col>\n                                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                    <label>{{ $t(\"name\") }}</label>\n                                    <v-text-field\n                                        class=\"mt-1\"\n                                        v-model=\"discountItem.name\"\n                                        outlined\n                                        clearable\n                                    />\n                                </v-col>\n                                <!-- for amount -->\n                                <v-col\n                                    sm=\"6\"\n                                    cols=\"12\"\n                                    class=\"py-0\"\n                                    v-if=\"discountItem.nature === 'Amount'\"\n                                >\n                                    <v-row class=\"mt-5\">\n                                        <v-col sm=\"7\" cols=\"12\" class=\"py-0\">\n                                            <v-text-field\n                                                class=\"mt-1\"\n                                                v-model=\"discountItem.amount\"\n                                                outlined\n                                                clearable\n                                            />\n                                        </v-col>\n                                        <v-col sm=\"5\" cols=\"12\" class=\"pl-0\">\n                                            <label>{{ $t(\"amount\") }}</label>\n                                        </v-col>\n                                    </v-row>\n                                </v-col>\n                                <!-- for percentage -->\n                                <v-col\n                                    sm=\"6\"\n                                    cols=\"12\"\n                                    class=\"py-0\"\n                                    v-else-if=\"discountItem.nature !== 'Amount'\"\n                                >\n                                    <v-row class=\"mt-5\">\n                                        <v-col sm=\"7\" cols=\"12\" class=\"py-0\">\n                                            <v-text-field\n                                                class=\"mt-1\"\n                                                v-model=\"discountItem.amount\"\n                                                outlined\n                                                clearable\n                                            />\n                                        </v-col>\n                                        <v-col sm=\"5\" cols=\"12\" class=\"pl-0\">\n                                            <label>%</label>\n                                        </v-col>\n                                    </v-row>\n                                </v-col>\n                                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                    <label class=\"label\">{{ $t(\"account\") }}</label>\n                                    <v-select\n                                        class=\"mt-1\"\n                                        outlined\n                                        tage=\"amountSelector\"\n                                        v-model=\"mAccount\"\n                                        :items=\"account\"\n                                        item-value=\"id\"\n                                        :item-text=\"(item) => `${item.number} - ${item.name}`\"\n                                        return-object\n                                        clearable\n                                    />\n                                </v-col>\n                                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                    <label>{{ $t(\"description\") }}</label>\n                                    <v-textarea\n                                        rows=\"4\"\n                                        no-resize\n                                        height=\"70px\"\n                                        class=\"mt-1\"\n                                        v-model=\"discountItem.description\"\n                                        outlined\n                                        clearable\n                                    />\n                                </v-col>\n                            </v-row>\n                        </v-card-text>\n                        <v-card-actions class=\"modal_footer\">\n                            <v-row>\n                                <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-left\">\n                                    <v-btn\n                                        color=\"black\"\n                                        outlined\n                                        class=\" text-capitalize black--text float-left\"\n                                        @click=\"dialogM3 = false\"\n                                    >{{ $t(\"cancel\") }}\n                                    </v-btn>\n                                </v-col>\n                                <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-right\">\n                                    <v-btn\n                                        @click=\"onSaveClose\"\n                                        color=\"primary\"\n                                        class=\"white--text text-capitalize\"\n                                    >{{ $t(\"save_close\") }}\n                                    </v-btn>\n                                </v-col>\n                            </v-row>\n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n\n                <v-row class=\"\">\n                    <v-col sm=\"12\" cols=\"12\">\n                        <LoadingMe\n                            :isLoading=\"showLoading\"\n                            :fullPage=\"false\"\n                            type=\"loading\"\n                            :myLoading=\"true\"\n                        />\n                        <template>\n                            <kendo-datasource ref=\"discountItemDS\" :data=\"discountItemList\"/>\n                            <kendo-grid\n                                id=\"gridDiscountItem\"\n                                class=\"grid-function\"\n                                :column-menu=\"true\"\n                                :filterable=\"true\"\n                                :noRecords=\"true\"\n                                :toolbar=\"toolbarTemplate\"\n                                :excel-file-name=\"'Discount-item-Export.xlsx'\"\n                                :excel-filterable=\"true\"\n                                :data-source-ref=\"'discountItemDS'\"\n                                :editable=\"false\"\n                                :scrollable-virtual=\"true\"\n                            >\n                                <kendo-grid-column\n                                    :field=\"'no'\"\n                                    :title=\"$t('no')\"\n                                    :template=\"rowNumberTmpl\"\n                                    :width=\"63\"\n                                    :column-menu=\"false\"\n                                    :headerAttributes=\"{\n                    style: 'background-color: #EDF1F5;',\n                    class: 'text-center',\n                  }\"\n                                    :attributes=\"{ style: 'text-align: center' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"'code'\"\n                                    :title=\"$t('code')\"\n                                    :width=\"100\"\n                                    :template=\"'<span>#=code#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"'name'\"\n                                    :attributes=\"{ class: 'tb_name_td' }\"\n                                    :title=\"$t('name')\"\n                                    :width=\"200\"\n                                    :template=\"'<span>#=name#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"'amount'\"\n                                    :title=\"$t('amount')\"\n                                    :width=\"100\"\n                                    :template=\"'<span>#=amount#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"'account'\"\n                                    :title=\"$t('account')\"\n                                    :width=\"200\"\n                                    :hidden=\"true\"\n                                    :template=\"'<span>#=account.name#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"'nature'\"\n                                    :title=\"$t('nature')\"\n                                    :width=\"100\"\n                                    :template=\"'<span>#=nature#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"'description'\"\n                                    :title=\"$t('description')\"\n                                    :width=\"150\"\n                                    :template=\"'<span>#=description#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                />\n                                <kendo-grid-column\n                                    :field=\"''\"\n                                    :title=\"$t('')\"\n                                    :width=\"63\"\n                                    :command=\"[\n                    {\n                      iconClass: 'k-icon k-i-edit',\n                      text: ' ',\n                      click: goEdit,\n                    },\n                  ]\"\n                                    :headerAttributes=\"{\n                    style: 'text-align: right; background-color: #EDF1F5',\n                  }\"\n                                />\n                            </kendo-grid>\n                        </template>\n                    </v-col>\n                </v-row>\n            </v-card>\n        </v-col>\n    </v-row>\n</template>\n<script>\nimport DiscountItemModel from \"@/scripts/model/DiscountItems\";\nimport kendo from \"@progress/kendo-ui\";\nimport AccountMappingModel from \"@/scripts/account-map/Account\";\n\nconst $ = kendo.jQuery\nconst accountHandler = require(\"@/scripts/handler/accounting/account\");\nconst discountItemHandler = require(\"@/scripts/discountItemHandler\");\nconst discountItemModel = new DiscountItemModel({});\nconst TYPE = \"Purchase\";\nconst TYPE_OPTION = \"?type=\" + TYPE;\n\nimport JSZip from \"jszip\";\n\nwindow.JSZip = JSZip;\nexport default {\n    components: {\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    data: () => ({\n        natures: [\"Amount\", \"Percentage\"],\n        showLoading: false,\n        dialogM3: false,\n        discountItemList: [],\n        account: [],\n        mAccount: {},\n        discountItem: discountItemModel,\n        schemaDefinition: {\n            model: {\n                id: \"id\",\n            },\n        },\n    }),\n    props: {},\n    methods: {\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.discountItemDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        async loadAccount() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    accountHandler.getAll().then((res) => {\n                        this.showLoading = false;\n                        this.account = res.data\n                            .filter((m) => m.account_type.number === 33)\n                            .map((itm) => {\n                                return {\n                                    id: itm.uuid,\n                                    uuid: itm.uuid,\n                                    name: itm.name,\n                                    local_name: itm.local_name,\n                                    number: itm.number,\n                                    is_taxable: itm.is_taxable,\n                                    banhjiAccCode: itm.banhjiAccCode,\n                                    group_code: itm.group_code,\n                                    parent_account: itm.parent_account,\n                                    type_code: itm.type_code,\n                                    account_type: itm.account_type,\n                                };\n                            });\n                        if (this.account.length > 0) {\n                            this.mAccount = this.account[0];\n                        }\n                    });\n                }, 10);\n            });\n        },\n        cancel() {\n            this.dialogM3 = false;\n        },\n        close() {\n            this.dialogM3 = false;\n        },\n        newClick() {\n            this.discountItem = {};\n            this.mAccount = {};\n            this.dialogM3 = true;\n        },\n        goEdit(e) {\n            e.preventDefault();\n            let grid = kendo.jQuery(\"#gridDiscountItem\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            this.discountItem = dataItem;\n            this.mAccount = dataItem.account;\n            this.dialogM3 = true;\n        },\n        async onSaveClose() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    let data = {\n                        id: this.discountItem.id ? this.discountItem.id : \"\",\n                        name: this.discountItem.name,\n                        code: this.discountItem.code,\n                        description: this.discountItem.description,\n                        account: new AccountMappingModel(this.mAccount),\n                        amount: this.discountItem.amount,\n                        type: TYPE,\n                        nature: this.discountItem.nature,\n                        status: 1,\n                    };\n\n                    discountItemHandler\n                        .create(data)\n                        .then((response) => {\n                            if (response.data.statusCode === 201) {\n                                const res = response.data.data;\n                                const index = this.discountItemList.findIndex((item) => {\n                                    return res.id === item.id;\n                                });\n                                if (index < 0) {\n                                    this.discountItemList.push(res);\n                                } else {\n                                    this.discountItemList.splice(index, 1, res);\n                                }\n                                // window.console.log('index ', index, '--', this.discountItemList)\n                                this.$snotify.success(\"Success\");\n                                this.close();\n                            }\n                        })\n                        .catch((e) => {\n                            this.$snotify.error(\"Something went wrong\");\n                            this.errors.push(e);\n                        });\n                });\n            });\n        },\n        async loadDiscountItems() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.showLoading = true;\n                    this.discountItemList = []\n                    discountItemHandler.list(TYPE_OPTION).then((res) => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false;\n                            this.discountItemList = res.data.data;\n                        } else {\n                            this.showLoading = false;\n                        }\n\n                    });\n                }, 10);\n            });\n        },\n        initToolbar(that) {\n            let grid = kendo.jQuery(\"#gridDiscountItem\").data(\"kendoGrid\");\n            let gridElement = grid.element;\n            let toolbarElement = gridElement.find(\".k-grid-toolbar\");\n            toolbarElement.on(\"click\", \".k-pager-refresh\", function (e) {\n                e.preventDefault();\n                onReloadData(that);\n            });\n            toolbarElement.on(\"click\", \".k-pager-excel\", function (e) {\n                e.preventDefault();\n                onExportExcel(that);\n            });\n\n            function onReloadData(that) {\n                that.loadDiscountItems();\n            }\n\n            function onExportExcel(that) {\n                that.exportToExcel();\n            }\n        },\n        toolbarTemplate: function () {\n            const templateHtml =\n                '<span>' +\n                '<a class=\"k-pager-excel k-link k-button excel\" title=\"Export to Excel\"> <span class=\"k-icon k-i-excel\"></span>Export to excel </a>' +\n                '</span><span>&nbsp;&nbsp;</span>' +\n                '<span style=\"position:absolute; right:5px\">' +\n                '</span>' +\n                '<span>' +\n                '<a class=\"k-pager-refresh k-link k-button reload\" title=\"Refresh\"><span class=\"k-icon k-i-reload\"></span> Refresh </a>' +\n                '</span>'\n\n            return kendo.template(templateHtml)\n        },\n        exportToExcel() {\n            const grid = kendo.jQuery(\"#gridDiscountItem\").data(\"kendoGrid\")\n            grid.saveAsExcel()\n        },\n    },\n    mounted: async function () {\n        await this.loadDiscountItems();\n        await this.initToolbar(this)\n    },\n    created: async function () {\n        await this.loadAccount();\n    },\n};\n</script>\n\n<style scoped>\n.function_footer {\n    padding: 15px;\n    display: inline-block;\n}\n\np {\n    color: rgba(0, 0, 0, 0.87);\n}\n\n.actionBtn {\n    height: 47.2px !important;\n}\n\n.text_tip {\n    font-size: 9px;\n    line-height: 10px;\n}\n\n@media (max-width: 576px) {\n}\n</style>\n"]}]}
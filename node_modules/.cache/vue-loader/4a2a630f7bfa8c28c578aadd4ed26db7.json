{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/share_funding/FundReceipt.vue?vue&type=style&index=0&id=16990412&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/share_funding/FundReceipt.vue","mtime":1638499443326},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaGlkZV9zbWFsbF9iYXJfY2xhc3MgewogIG1heC13aWR0aDogMDsKICB0cmFuc2l0aW9uOiAwLjVzIGVhc2UtaW47CiAgZmxleDogMCAwIDA7CiAgcGFkZGluZzogMDsKfQoKLmhpZGVfYmlnX2Jhcl9jbGFzcyB7CiAgbWF4LXdpZHRoOiAxMDAlOwogIHRyYW5zaXRpb246IDAuNXMgZWFzZS1pbjsKICBmbGV4OiAwIDAgMTAwJTsKfQoKLmluZm9fYWRkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwp9Cgouc21hbGxfc2lkZWJhciB7CiAgaGVpZ2h0OiA5OCU7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHBhZGRpbmc6IDEycHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VkZjFmNTsKfQoKLmljb25BcnJvdyB7CiAgcmlnaHQ6IC0zNXB4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IC0xMHB4Owp9CgouaWNvbkFycm93SGlkZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHJpZ2h0OiAtN3B4OwogIGJvdHRvbTogLTEwcHg7Cn0KCkBtZWRpYSAobWluLXdpZHRoOiAxMjY0cHgpIHsKICAuY29udGFpbmVyIHsKICAgIG1heC13aWR0aDogMTE4NXB4OwogICAgLyogbWF4LXdpZHRoOiAxMDgwcHggIWltcG9ydGFudDsgKi8KICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA1NzZweCkgewogIC5tYi02IHsKICAgIG1hcmdpbi1ib3R0b206IDAgIWltcG9ydGFudDsKICB9Cn0K"},{"version":3,"sources":["FundReceipt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0hDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"FundReceipt.vue","sourceRoot":"src/views/share_funding","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col cols=\"12\" sm=\"12\">\n          <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n            <v-card\n              outlined\n              dense\n              class=\"pa-4 no_border rounded-sm\"\n              color=\"white\"\n            >\n              <v-row>\n                <v-col\n                  class=\"bigSide pr-2 py-0\"\n                  sm=\"8\"\n                  cols=\"12\"\n                  style=\"transition: 0.3s ease-in\"\n                  :class=\"{ hide_big_bar_class: isHideBar }\"\n                >\n                  <v-card outlined dense class=\"no_border\">\n                    <h2 class=\"mb-0\">{{ $t(\"fund_receipt\") }}</h2>\n                    <v-icon\n                      v-if=\"isHideBar\"\n                      onclick=\"window.history.go(-1); return false;\"\n                      style=\"cursor: pointer; color: #333; font-size: 40px\"\n                      class=\"float-right\"\n                      >close\n                    </v-icon>\n                    <span\n                      style=\"transition: 0.3s ease-in; z-index: 10\"\n                      :class=\"{\n                        iconArrow: !isHideBar,\n                        iconArrowHide: isHideBar,\n                      }\"\n                    >\n                      <v-icon\n                        size=\"22\"\n                        class=\"arr_icon\"\n                        @click=\"HideSmallSideBar\"\n                        v-if=\"isHideBar\"\n                        >mdi-chevron-left-circle\n                      </v-icon>\n                      <v-icon\n                        size=\"22\"\n                        class=\"arr_icon\"\n                        @click=\"HideSmallSideBar\"\n                        v-if=\"!isHideBar\"\n                        >mdi-chevron-right-circle\n                      </v-icon>\n                    </span>\n                  </v-card>\n                  <v-card outlined dense class=\"px-3 no_border\" color=\"grayBg\">\n                    <v-row class=\"\">\n                      <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label\">{{ $t(\"donor\") }}</label>\n                        <app-donor-dropdownlist\n                          :initDonor=\"donor\"\n                          @emitDonor=\"donor = $event\"\n                          @onChanged=\"getExchangeRate\"\n                        />\n\n                        <label class=\"label\">{{ $t(\"date\") }}</label>\n                        <app-datepicker\n                          :initialDate=\"journal.journal_date\"\n                          @emitDate=\"journal.journal_date = $event\"\n                          @onChanged=\"onDateChanges\"\n                        />\n                        <label class=\"label\">{{ $t(\"number\") }}</label>\n                        <v-row>\n                          <v-col sm=\"10\" cols=\"10\" class=\"pb-0 pr-0 pt-1\">\n                            <v-text-field\n                              v-model=\"journal.number\"\n                              outlined\n                              :rules=\"[(v) => !!v || 'Number is required']\"\n                              readonly\n                              required\n                            />\n                          </v-col>\n                          <v-col sm=\"2\" cols=\"2\" class=\"pb-0 pl-1 pt-1\">\n                            <v-icon\n                              color=\"black\"\n                              size=\"30\"\n                              class=\"border_qrcode\"\n                              @click=\"generateNumber\"\n                              >mdi-qrcode</v-icon\n                            >\n                          </v-col>\n                        </v-row>\n                        <label class=\"label\">{{ $t(\"currency\") }}</label>\n                        <app-currency-dropdownlist\n                          :initCurrency=\"currency\"\n                          @emitCurrency=\"currency = $event\"\n                          @onChanged=\"getExchangeRate\"\n                        />\n                      </v-col>\n\n                      <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label\">{{ $t(\"fund_categories\") }}</label>\n                        <app-fund-category-dropdownlist\n                          :initFundCategory=\"fundCategory\"\n                          @emitFundCategory=\"fundCategory = $event\"\n                        />\n\n                        <label class=\"label\">{{ $t(\"contract\") }}</label>\n                        <v-text-field outlined class=\"mt-1\" />\n\n                        <label class=\"label\">{{ $t(\"description\") }}</label>\n                        <v-textarea\n                          class=\"mt-1\"\n                          height=\"120px\"\n                          no-resize\n                          v-model=\"journal.description\"\n                          outlined\n                          rows=\"4\"\n                          :placeholder=\"$t('transaction_purpose')\"\n                        />\n                      </v-col>\n                    </v-row>\n                  </v-card>\n\n                  <v-card outlined dense class=\"no_border\" color=\"white\">\n                    <!-- Grid 1 -->\n                    <v-row\n                      style=\"\n                        background-color: rgb(255, 255, 255);\n                        width: 100%;\n                        margin: 0 auto 0px;\n                      \"\n                    >\n                      <v-col sm=\"12\" cols=\"12\" class=\"pb-3 pa-0\">\n                        <h2 class=\"mb-0 font_18\">{{ $t(\"cash_receipt\") }}</h2>\n                        <kendo-datasource\n                          ref=\"cashReceiptDS\"\n                          :data=\"cashReceiptEntries\"\n                          :change=\"onChangeCashReceiptDS\"\n                        />\n\n                        <kendo-grid\n                          id=\"cashReceiptGrid\"\n                          ref=\"cashReceiptGrid\"\n                          class=\"grid-function\"\n                          :data-source-ref=\"'cashReceiptDS'\"\n                          :sortable=\"false\"\n                          :filterable=\"false\"\n                          :column-menu=\"true\"\n                          :editable=\"true\"\n                          :scrollable-virtual=\"true\"\n                        >\n                          <kendo-grid-column\n                            :title=\"$t('no.')\"\n                            :template=\"rowNumberCashReceipt\"\n                            :width=\"45\"\n                            :column-menu=\"false\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5;',\n                              class: 'text-products',\n                            }\"\n                            :attributes=\"{\n                              style: 'text-align: products',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'account'\"\n                            :title=\"$t('account')\"\n                            :width=\"200\"\n                            :template=\"'<span>#=account.name#</span>'\"\n                            :editor=\"CashReceiptAccountEditor\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"''\"\n                            :hidden=\"\n                              !this.$store.state.accounting.secondaryAccount\n                            \"\n                            :title=\"$t('s_account')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'description'\"\n                            :title=\"$t('description')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'ref_number'\"\n                            :title=\"$t('reference_no')\"\n                            :width=\"160\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'amount'\"\n                            :title=\"$t('amount')\"\n                            :format=\"'{0:n}'\"\n                            :width=\"150\"\n                            :headerAttributes=\"{\n                              style:\n                                'text-align: right; background-color: #EDF1F5',\n                            }\"\n                            :attributes=\"{ style: 'text-align: right; ' }\"\n                          />\n                          <kendo-grid-column\n                            :command=\"{\n                              iconClass: 'k-icon k-i-trash',\n                              text: 'Delete',\n                              click: removeRowCashReceipt,\n                              class: 'btn-plus',\n                            }\"\n                            :title=\"'&nbsp;'\"\n                            :width=\"100\"\n                            :headerAttributes=\"{\n                              style:\n                                'text-align: right; background-color: #EDF1F5',\n                            }\"\n                          />\n                        </kendo-grid>\n                        <v-row style=\"background-color: #fff\">\n                          <v-col sm=\"1\" cols=\"12\" class=\"pb-0\">\n                            <v-btn\n                              class=\"float-left ml-0 rounded-0 btn_plus\"\n                              @click=\"addRowCashReceipt\"\n                            >\n                              <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                            </v-btn>\n                          </v-col>\n                        </v-row>\n                      </v-col>\n                    </v-row>\n                    <!-- Grid 2 -->\n                    <v-row>\n                      <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                        <h2 class=\"mb-0 font_18\">\n                          {{ $t(\"related_expense\") }}\n                        </h2>\n                        <kendo-datasource\n                          ref=\"relatedExpenseDS\"\n                          :data=\"relatedExpenseEntries\"\n                          :change=\"onChangeRelatedExpenseDS\"\n                        />\n\n                        <kendo-grid\n                          id=\"relatedExpenseGrid\"\n                          ref=\"relatedExpenseGrid\"\n                          class=\"grid-function\"\n                          :data-source-ref=\"'relatedExpenseDS'\"\n                          :sortable=\"false\"\n                          :filterable=\"false\"\n                          :column-menu=\"true\"\n                          :editable=\"true\"\n                          :scrollable-virtual=\"true\"\n                        >\n                          <kendo-grid-column\n                            :title=\"$t('no.')\"\n                            :template=\"rowNumberRelatedExpense\"\n                            :width=\"45\"\n                            :column-menu=\"false\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5;',\n                              class: 'text-products',\n                            }\"\n                            :attributes=\"{\n                              style: 'text-align: products',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'account'\"\n                            :title=\"$t('account')\"\n                            :width=\"200\"\n                            :template=\"'<span>#=account.name#</span>'\"\n                            :editor=\"RelatedExpenseAccountEditor\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"''\"\n                            :hidden=\"\n                              !this.$store.state.accounting.secondaryAccount\n                            \"\n                            :title=\"$t('s_account')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'description'\"\n                            :title=\"$t('description')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'ref_number'\"\n                            :title=\"$t('reference_no')\"\n                            :width=\"160\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'amount'\"\n                            :title=\"$t('amount')\"\n                            :format=\"'{0:n}'\"\n                            :width=\"150\"\n                            :headerAttributes=\"{\n                              style:\n                                'text-align: right; background-color: #EDF1F5',\n                            }\"\n                            :attributes=\"{ style: 'text-align: right; ' }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'class1'\"\n                            :title=\"$t('class_1')\"\n                            :template=\"'<span>#=class1.name#</span>'\"\n                            :width=\"200\"\n                            :editor=\"ClassEditor.class1\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'class2'\"\n                            :title=\"$t('class_2')\"\n                            :template=\"'<span>#=class2.name#</span>'\"\n                            :width=\"200\"\n                            :hidden=\"true\"\n                            :editor=\"ClassEditor.class2\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'class3'\"\n                            :title=\"$t('class_3')\"\n                            :template=\"'<span>#=class3.name#</span>'\"\n                            :hidden=\"true\"\n                            :width=\"200\"\n                            :editor=\"ClassEditor.class3\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'class4'\"\n                            :title=\"$t('class_4')\"\n                            :template=\"'<span>#=class4.name#</span>'\"\n                            :hidden=\"true\"\n                            :width=\"200\"\n                            :editor=\"ClassEditor.class4\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'class5'\"\n                            :title=\"$t('class_5')\"\n                            :template=\"'<span>#=class5.name#</span>'\"\n                            :hidden=\"true\"\n                            :width=\"200\"\n                            :editor=\"ClassEditor.class5\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :command=\"{\n                              iconClass: 'k-icon k-i-trash',\n                              text: 'Delete',\n                              click: removeRowRelatedExpense,\n                              class: 'btn-plus',\n                            }\"\n                            :title=\"'&nbsp;'\"\n                            :width=\"100\"\n                            :headerAttributes=\"{\n                              style:\n                                'text-align: right; background-color: #EDF1F5',\n                            }\"\n                          />\n                        </kendo-grid>\n                        <v-row style=\"background-color: #fff\">\n                          <v-col sm=\"1\" cols=\"12\" class=\"pb-0\">\n                            <v-btn\n                              class=\"float-left ml-0 rounded-0 btn_plus\"\n                              @click=\"addRowRelatedExpense\"\n                            >\n                              <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                            </v-btn>\n                          </v-col>\n                        </v-row>\n                      </v-col>\n                    </v-row>\n                    <!-- Grid 3 -->\n                    <v-row>\n                      <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                        <h2 class=\"mb-0 font_18\">\n                          {{ $t(\"revenue_deferred_grant\") }}\n                        </h2>\n                        <kendo-datasource\n                          ref=\"revenueDefferedGrantDS\"\n                          :data=\"revenueDefferedGrantEntries\"\n                          :change=\"onChangeRevenueDefferedGrantDS\"\n                        />\n\n                        <kendo-grid\n                          id=\"revenueDefferedGrantGrid\"\n                          ref=\"revenueDefferedGrantGrid\"\n                          class=\"grid-function\"\n                          :data-source-ref=\"'revenueDefferedGrantDS'\"\n                          :sortable=\"false\"\n                          :filterable=\"false\"\n                          :column-menu=\"true\"\n                          :editable=\"true\"\n                          :scrollable-virtual=\"true\"\n                        >\n                          <kendo-grid-column\n                            :title=\"$t('no.')\"\n                            :template=\"rowNumberRevenueDefferedGrant\"\n                            :width=\"45\"\n                            :column-menu=\"false\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5;',\n                              class: 'text-products',\n                            }\"\n                            :attributes=\"{\n                              style: 'text-align: products',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'account'\"\n                            :title=\"$t('account')\"\n                            :width=\"200\"\n                            :template=\"'<span>#=account.name#</span>'\"\n                            :editor=\"RevenueDefferedGrantAccountEditor\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"''\"\n                            :hidden=\"\n                              !this.$store.state.accounting.secondaryAccount\n                            \"\n                            :title=\"$t('s_account')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'description'\"\n                            :title=\"$t('description')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'ref_number'\"\n                            :title=\"$t('reference_no')\"\n                            :width=\"160\"\n                            :headerAttributes=\"{\n                              style: 'background-color: #EDF1F5',\n                            }\"\n                          />\n                          <kendo-grid-column\n                            :field=\"'amount'\"\n                            :title=\"$t('amount')\"\n                            :format=\"'{0:n}'\"\n                            :width=\"150\"\n                            :headerAttributes=\"{\n                              style:\n                                'text-align: right; background-color: #EDF1F5',\n                            }\"\n                            :attributes=\"{ style: 'text-align: right; ' }\"\n                          />\n                          <kendo-grid-column\n                            :command=\"{\n                              iconClass: 'k-icon k-i-trash',\n                              text: 'Delete',\n                              click: removeRowRevenueDefferedGrant,\n                              class: 'btn-plus',\n                            }\"\n                            :title=\"'&nbsp;'\"\n                            :width=\"100\"\n                            :headerAttributes=\"{\n                              style:\n                                'text-align: right; background-color: #EDF1F5',\n                            }\"\n                          />\n                        </kendo-grid>\n                        <v-row style=\"background-color: #fff\">\n                          <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                            <v-btn\n                              class=\"float-left ml-0 rounded-0 btn_plus\"\n                              @click=\"addRowRevenueDefferedGrant\"\n                            >\n                              <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                            </v-btn>\n                          </v-col>\n                          <v-col sm=\"4\" cols=\"12\" class=\"pb-0 pt-5\">\n                            <p>\n                              <span class=\"float-left\">{{\n                                $t(\"cash_receipt_and_related_expense\")\n                              }}</span>\n                              <span class=\"float-right text-bold\">{{\n                                Number(totalDr).toLocaleString()\n                              }}</span>\n                            </p>\n                          </v-col>\n                          <v-col sm=\"4\" cols=\"12\" class=\"pb-0 pt-5\">\n                            <p>\n                              <span class=\"float-left\">{{\n                                $t(\"revenue_deffered_grant\")\n                              }}</span>\n                              <span class=\"float-right text-bold\">{{\n                                Number(totalCr).toLocaleString()\n                              }}</span>\n                            </p>\n                          </v-col>\n                        </v-row>\n                      </v-col>\n                    </v-row>\n\n                    <v-divider />\n\n                    <v-card outlined dense class=\"no_border function_footer\">\n                      <!-- Warning Message -->\n                      <v-alert type=\"warning\" v-model=\"alert\" dismissible>\n                        <span v-html=\"errorMessage\" />\n                      </v-alert>\n\n                      <v-menu>\n                        <template v-slot:activator=\"{ on }\">\n                          <v-btn\n                            color=\"black\"\n                            outlined\n                            class=\"mr-2 text-capitalize black--text float-left\"\n                            v-on=\"on\"\n                          >\n                            {{ $t(\"select_template\") }}\n                            <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                          </v-btn>\n                        </template>\n                        <v-list>\n                          <v-list-item\n                            v-for=\"(item, index) in templates\"\n                            :key=\"index\"\n                          >\n                            <v-list-item-title>{{\n                              item.title\n                            }}</v-list-item-title>\n                          </v-list-item>\n                        </v-list>\n                      </v-menu>\n                      <v-btn\n                        color=\"black\"\n                        class=\"text-capitalize white--text float-left\"\n                        @click=\"cancel\"\n                        >{{ $t(\"cancel\") }}</v-btn\n                      >\n                      <v-btn\n                        color=\"primary\"\n                        class=\"ml-2 text-capitalize white--text\"\n                        v-if=\"isEdit\"\n                        @click=\"confirmDelete\"\n                        >{{ $t(\"delete\") }}\n                      </v-btn>\n                      <v-menu>\n                        <template v-slot:activator=\"{ on }\">\n                          <v-btn\n                            color=\"primary\"\n                            class=\"ml-2 float-right text-capitalize white--text\"\n                            v-on=\"on\"\n                          >\n                            {{ $t(\"save_option\") }}\n                            <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                          </v-btn>\n                        </template>\n                        <v-list rounded>\n                          <v-list-item-group>\n                            <v-list-item v-if=\"!isEdit\">\n                              <v-list-item-content>\n                                <v-list-item-title\n                                  @click=\"onSaveOptionClick(SaveOption.SAVENEW)\"\n                                  >{{ $t(\"save_new\") }}</v-list-item-title\n                                >\n                              </v-list-item-content>\n                            </v-list-item>\n                            <v-list-item>\n                              <v-list-item-content>\n                                <v-list-item-title\n                                  @click=\"\n                                    onSaveOptionClick(SaveOption.SAVEPRINT)\n                                  \"\n                                  >{{ $t(\"save_print\") }}</v-list-item-title\n                                >\n                              </v-list-item-content>\n                            </v-list-item>\n                            <v-list-item>\n                              <v-list-item-content>\n                                <v-list-item-title\n                                  @click=\"\n                                    onSaveOptionClick(SaveOption.SAVEDRAFT)\n                                  \"\n                                  >{{ $t(\"save_draft\") }}</v-list-item-title\n                                >\n                              </v-list-item-content>\n                            </v-list-item>\n                          </v-list-item-group>\n                        </v-list>\n                      </v-menu>\n                      <v-btn\n                        color=\"secondary\"\n                        class=\"float-right white--text text-capitalize\"\n                        @click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n                        >{{ $t(\"save_close\") }}</v-btn\n                      >\n                    </v-card>\n                  </v-card>\n                </v-col>\n                <v-col\n                  class=\"smallSide pl-2\"\n                  sm=\"4\"\n                  style=\"transition: 0.3s ease-in\"\n                  :class=\"{ hide_small_bar_class: isHideBar }\"\n                >\n                  <h3\n                    style=\"color: #b3b5bc; font-size: 20px\"\n                    v-if=\"!isHideBar\"\n                    class=\"text-uppercase float-right mt-n3\"\n                  >\n                    <span class=\"pointer\" @click=\"Help('fund receipt')\">\n                      {{ $t(\"help\") }}\n                    </span>\n                    <v-icon\n                      @click=\"cancel()\"\n                      style=\"cursor: pointer; color: #333; font-size: 40px\"\n                      class=\"float-right mt-n1\"\n                      >close\n                    </v-icon>\n                  </h3>\n\n                  <div v-if=\"!isHideBar\" class=\"small_sidebar mt-8 px-4 grayBg\">\n                    <v-card\n                      class=\"pa-3 no-boxshadow d-flex flex-column\"\n                      color=\"primary\"\n                      size=\"60px\"\n                      style=\"margin-bottom: 2px\"\n                    >\n                      <h3\n                        class=\"text-white text-uppercase justify-start font_13\"\n                      >\n                        {{ $t(\"amount\") }}\n                      </h3>\n                      <h3\n                        class=\"\n                          text-bold\n                          justify-end\n                          niradei_heavy\n                          font_22\n                          text-white\n                        \"\n                      >\n                        {{ Number(totalDr).toLocaleString() }}\n                      </h3>\n                    </v-card>\n                    <!-- content -->\n                    <v-row>\n                      <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label\">{{ $t(\"segment\") }}</label>\n                        <app-segment-dropdownlist\n                          :initSegment=\"segment\"\n                          @emitSegment=\"segment = $event\"\n                        />\n\n                        <label class=\"label\">{{ $t(\"location\") }}</label>\n                        <app-location-dropdownlist\n                          :initLocation=\"location\"\n                          @emitLocation=\"location = $event\"\n                        />\n                        <label class=\"label\">{{ $t(\"project\") }}</label>\n                        <app-project-dropdownlist\n                          :initProject=\"project\"\n                          @emitProject=\"project = $event\"\n                        />\n                      </v-col>\n                    </v-row>\n                  </div>\n                </v-col>\n              </v-row>\n            </v-card>\n          </v-form>\n        </v-col>\n      </v-row>\n      <LoadingMe\n        type=\"loading\"\n        :isLoading=\"showLoading\"\n        :fullPage=\"true\"\n        :myLoading=\"true\"\n      />\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport { i18n } from \"@/i18n\";\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\nimport {\n  JournalModel,\n  JournalEntryModel,\n  AccountModel,\n  ClassModel,\n  CurrencyModel,\n  ExchangeRateModel,\n  LocationModel,\n  ProjectModel,\n  SegmentModel,\n  ContactModel,\n} from \"@/scripts/model/AppModels\";\nimport CustomerModel from \"@/scripts/model/Customer\";\n\n/* Editors */\nimport CashReceiptAccountEditor from \"@/scripts/kendo_editor/CashAccount\";\nimport RelatedExpenseAccountEditor from \"@/scripts/kendo_editor/RelatedExpenseAccount\";\nimport RevenueDefferedGrantAccountEditor from \"@/scripts/kendo_editor/RevenueDefferedGrantAccount\";\nimport ClassEditor from \"@/scripts/kendo_editor/Clazz\";\n\n/* Store */\nimport store from \"@/store\";\nconst institute = store.state.institute.institute;\n\nconst journalHandler = require(\"@/scripts/journalHandler\");\nconst AccountTypeCode = require(\"@/scripts/default_setup/AccountTypeCode\");\nimport { ShowResource } from \"@/observable/store\";\n\nconst {\n  EntityType,\n  SaveOption,\n} = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n  name: \"FundReceipt\",\n  components: {\n    LoadingMe: () => import(\"@/components/Loading\"),\n    \"app-datepicker\": () =>\n      import(\"@/components/custom_templates/DatePickerComponent\"),\n    \"app-currency-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/Currency\"),\n    \"app-donor-dropdownlist\": () => import(\"@/components/dropdownlist/Donor\"),\n    \"app-fund-category-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/FundCategory\"),\n    \"app-segment-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/Segment\"),\n    \"app-project-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/Project\"),\n    \"app-location-dropdownlist\": () =>\n      import(\"@/components/dropdownlist/Location\"),\n  },\n  props: {\n    initJournal: {\n      type: JournalModel,\n    },\n  },\n  data: () => ({\n    /* Obj */\n    fundCategory: null,\n    journal: new JournalModel(),\n    currency: new CurrencyModel(institute.baseCurrency),\n    exchangeRate: new ExchangeRateModel(institute.baseCurrency),\n    journalEntries: [],\n    cashReceiptEntries: [],\n    relatedExpenseEntries: [],\n    revenueDefferedGrantEntries: [],\n    donor: new ContactModel(),\n    location: new LocationModel(),\n    project: new ProjectModel(),\n    segment: new SegmentModel(),\n    // Accounts\n    accounts: [],\n    cashRecieptAccounts: [],\n    relatedExpenseAccounts: [],\n    revenueDefferedGrantAccounts: [],\n    // Editors\n    CashReceiptAccountEditor: CashReceiptAccountEditor,\n    RelatedExpenseAccountEditor: RelatedExpenseAccountEditor,\n    RevenueDefferedGrantAccountEditor: RevenueDefferedGrantAccountEditor,\n    ClassEditor: ClassEditor,\n    // Other\n    totalDr: 0,\n    totalCr: 0,\n    templates: [],\n    user: Helper.getUser(),\n    // Form validation\n    valid: true,\n    isEdit: false,\n    alert: false,\n    errorMessage: \"\",\n    saveMode: \"\",\n    SaveOption: SaveOption,\n    // LoadingMe\n    showLoading: false,\n    // funcion\n    isHideBar: false,\n  }),\n  methods: {\n    HideSmallSideBar() {\n      this.isHideBar = !this.isHideBar;\n    },\n    Help(key_search) {\n      ShowResource(key_search);\n    },\n    // Initial Data\n    initialData() {\n      if (this.initJournal) {\n        // Edit Mode\n        this.journal = this.initJournal;\n        this.bindData();\n      } else {\n        // Brand New Mode\n        this.setDefaultData();\n      }\n    },\n    // Set default data\n    async setDefaultData() {\n      // Brand New Mode\n      this.isEdit = false;\n\n      this.journal = new JournalModel({\n        transaction_type: EntityType.FUND_RECEIPT,\n        journal_date: new Date().toISOString().substr(0, 10),\n      });\n\n      /* Default Sidebar */\n      let locations = await this.$store.dispatch(\"locations/getList\");\n      this.location = new LocationModel(locations[0]);\n\n      let segments = await this.$store.dispatch(\"segments/getList\");\n      this.segment = new SegmentModel(segments.find((i) => i.isSystem === 1));\n\n      // Generate Number\n      this.generateNumber();\n\n      // Add two default rows\n      for (let index = 0; index < 2; index++) {\n        this.addRowCashReceipt();\n        this.addRowRelatedExpense();\n        this.addRowRevenueDefferedGrant();\n      }\n    },\n    // Bind data from prop for edit mode\n    async bindData() {\n      // Edit Mode\n      this.isEdit = true;\n\n      let totalDr = 0,\n        totalCr = 0,\n        cashReceiptEntries = [],\n        relatedExpenseEntries = [],\n        revenueDefferedGrantEntries = [];\n\n      // Donor\n      this.donor = new CustomerModel(\n        this.journal.journal_entries[0].primary_contact\n      );\n\n      /* Classes */\n      let classes = await this.$store.dispatch(\"classes/getList\");\n\n      // Currency\n      this.currency = new CurrencyModel(\n        this.journal.journal_entries[0].currency\n      );\n      this.exchangeRate = new ExchangeRateModel(\n        this.journal.journal_entries[0].currency\n      );\n      this.exchangeRate.id = this.journal.journal_entries[0].exchange_rate_uuid;\n      this.exchangeRate.rate = this.journal.journal_entries[0].exchange_rate;\n\n      this.journal.journal_entries.forEach((value) => {\n        let je = new JournalEntryModel(value);\n\n        if (value.amount > 0) {\n          // Dr side\n          if (\n            ~AccountTypeCode.CASH_ACCOUNTS.indexOf(\n              value.account.account_type.number\n            )\n          ) {\n            cashReceiptEntries.push(je);\n          } else {\n            // Classes\n            je.class1 = new ClassModel(\n              classes.find((item) => item.id === value.class_1_uuid)\n            );\n            je.class2 = new ClassModel(\n              classes.find((item) => item.id === value.class_2_uuid)\n            );\n            je.class3 = new ClassModel(\n              classes.find((item) => item.id === value.class_3_uuid)\n            );\n            je.class4 = new ClassModel(\n              classes.find((item) => item.id === value.class_4_uuid)\n            );\n            je.class5 = new ClassModel(\n              classes.find((item) => item.id === value.class_5_uuid)\n            );\n\n            relatedExpenseEntries.push(je);\n          }\n          totalDr += value.amount;\n        } else {\n          // Cr side\n          je.amount = value.amount * -1;\n          revenueDefferedGrantEntries.push(je);\n          totalCr += je.amount;\n        }\n      });\n\n      // Sidebar\n      let locations = await this.$store.dispatch(\"locations/getList\");\n      this.location = new LocationModel(\n        locations.find((i) => i.id === this.journal.location_uuid)\n      );\n\n      let segments = await this.$store.dispatch(\"segments/getList\");\n      this.segment = new SegmentModel(\n        segments.find((i) => i.id === this.journal.segment_uuid)\n      );\n\n      let projects = await this.$store.dispatch(\"projects/getList\");\n      this.project = new ProjectModel(\n        projects.find((i) => i.id === this.journal.project_uuid)\n      );\n\n      this.totalDr = totalDr;\n      this.totalCr = totalCr;\n\n      this.cashReceiptEntries = cashReceiptEntries;\n      this.relatedExpenseEntries = relatedExpenseEntries;\n      this.revenueDefferedGrantEntries = revenueDefferedGrantEntries;\n    },\n    // Number\n    async generateNumber() {\n      if (!this.isEdit) {\n        let num = await Helper.generateAccountingNumber(\n          this.journal.transaction_type,\n          this.journal.journal_date\n        );\n\n        this.journal.number = num.number;\n        this.journal.prefix_format = num.prefix_format;\n      }\n    },\n    // Get Exchange Rate\n    async getExchangeRate() {\n      if (this.journal.journal_date && this.currency.code !== \"\") {\n        this.exchangeRate = await Helper.getLastExchangeRateByDate(\n          this.journal.journal_date,\n          this.currency.code\n        );\n      } else {\n        this.exchangeRate = new ExchangeRateModel(institute.baseCurrency);\n      }\n    },\n    /* On Date Chanes */\n    onDateChanges() {\n      this.getExchangeRate();\n      this.generateNumber();\n    },\n    /* Kendo */\n    // DataSource Changes\n    onChangeCashReceiptDS(e) {\n      if (e.field) {\n        let dataRow = e.items[0];\n\n        if (e.field === \"account\") {\n          this.addExtraRowCashReceipt(dataRow.uid);\n        }\n\n        this.dataSourceAutoCalculate();\n      }\n    },\n    onChangeRelatedExpenseDS(e) {\n      if (e.field) {\n        let dataRow = e.items[0];\n\n        if (e.field === \"account\") {\n          this.addExtraRowRelatedExpense(dataRow.uid);\n        } else if (e.field === \"class1\") {\n          if (dataRow.class1 !== null) {\n            dataRow.set(\"class_1_uuid\", dataRow.class1.id);\n          } else {\n            // Set default when deselect\n            dataRow.set(\"class_1_uuid\", \"\");\n            dataRow.set(\"class1\", new ClassModel());\n          }\n        } else if (e.field === \"class2\") {\n          if (dataRow.class2 !== null) {\n            dataRow.set(\"class_2_uuid\", dataRow.class2.id);\n          } else {\n            // Set default when deselect\n            dataRow.set(\"class_2_uuid\", \"\");\n            dataRow.set(\"class2\", new ClassModel());\n          }\n        } else if (e.field === \"class3\") {\n          if (dataRow.class3 !== null) {\n            dataRow.set(\"class_3_uuid\", dataRow.class3.id);\n          } else {\n            // Set default when deselect\n            dataRow.set(\"class_3_uuid\", \"\");\n            dataRow.set(\"class3\", new ClassModel());\n          }\n        } else if (e.field === \"class4\") {\n          if (dataRow.class4 !== null) {\n            dataRow.set(\"class_4_uuid\", dataRow.class4.id);\n          } else {\n            // Set default when deselect\n            dataRow.set(\"class_4_uuid\", \"\");\n            dataRow.set(\"class4\", new ClassModel());\n          }\n        } else if (e.field === \"class5\") {\n          if (dataRow.class5 !== null) {\n            dataRow.set(\"class_5_uuid\", dataRow.class5.id);\n          } else {\n            // Set default when deselect\n            dataRow.set(\"class_5_uuid\", \"\");\n            dataRow.set(\"class5\", new ClassModel());\n          }\n        }\n\n        this.dataSourceAutoCalculate();\n      }\n    },\n    onChangeRevenueDefferedGrantDS(e) {\n      if (e.field) {\n        let dataRow = e.items[0];\n\n        if (e.field === \"account\") {\n          this.addExtraRowRevenueDefferedGrant(dataRow.uid);\n        }\n\n        this.dataSourceAutoCalculate();\n      }\n    },\n    // Auto Calculate In DataSource\n    dataSourceAutoCalculate() {\n      let cashReceiptDS = this.$refs.cashReceiptDS.kendoWidget(),\n        relatedExpenseDS = this.$refs.relatedExpenseDS.kendoWidget(),\n        revenueDefferedGrantDS =\n          this.$refs.revenueDefferedGrantDS.kendoWidget(),\n        totalDr = 0,\n        totalCr = 0;\n\n      // Sum\n      cashReceiptDS.data().forEach((value) => {\n        totalDr += kendo.parseFloat(value.amount);\n      });\n      relatedExpenseDS.data().forEach((value) => {\n        totalDr += kendo.parseFloat(value.amount);\n      });\n      revenueDefferedGrantDS.data().forEach((value) => {\n        totalCr += kendo.parseFloat(value.amount);\n      });\n\n      this.totalDr = totalDr;\n      this.totalCr = totalCr;\n    },\n    // Row Number Template\n    rowNumberCashReceipt(dataItem) {\n      let ds = this.$refs.cashReceiptDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n\n      return index + 1;\n    },\n    rowNumberRelatedExpense(dataItem) {\n      let ds = this.$refs.relatedExpenseDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n\n      return index + 1;\n    },\n    rowNumberRevenueDefferedGrant(dataItem) {\n      let ds = this.$refs.revenueDefferedGrantDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n\n      return index + 1;\n    },\n    // Add New Row\n    addRowCashReceipt() {\n      let ds = this.$refs.cashReceiptDS.kendoWidget(),\n        last = ds.total(),\n        je = new JournalEntryModel();\n\n      ds.insert(last, je);\n    },\n    addRowRelatedExpense() {\n      let ds = this.$refs.relatedExpenseDS.kendoWidget(),\n        last = ds.total(),\n        je = new JournalEntryModel();\n\n      // Classes\n      je.class1 = new ClassModel();\n      je.class2 = new ClassModel();\n      je.class3 = new ClassModel();\n      je.class4 = new ClassModel();\n      je.class5 = new ClassModel();\n\n      ds.insert(last, je);\n    },\n    addRowRevenueDefferedGrant() {\n      let ds = this.$refs.revenueDefferedGrantDS.kendoWidget(),\n        last = ds.total(),\n        je = new JournalEntryModel();\n\n      ds.insert(last, je);\n    },\n    // Add Extra Row\n    addExtraRowCashReceipt(uid) {\n      let ds = this.$refs.cashReceiptDS.kendoWidget(),\n        total = ds.total(),\n        row = ds.getByUid(uid),\n        index = ds.indexOf(row);\n\n      if (index == total - 1) {\n        this.addRowCashReceipt();\n      }\n    },\n    addExtraRowRelatedExpense(uid) {\n      let ds = this.$refs.relatedExpenseDS.kendoWidget(),\n        total = ds.total(),\n        row = ds.getByUid(uid),\n        index = ds.indexOf(row);\n\n      if (index == total - 1) {\n        this.addRowRelatedExpense();\n      }\n    },\n    addExtraRowRevenueDefferedGrant(uid) {\n      let ds = this.$refs.revenueDefferedGrantDS.kendoWidget(),\n        total = ds.total(),\n        row = ds.getByUid(uid),\n        index = ds.indexOf(row);\n\n      if (index == total - 1) {\n        this.addRowRevenueDefferedGrant();\n      }\n    },\n    // Remove Row\n    removeRowCashReceipt(e) {\n      e.preventDefault();\n\n      let grid = this.$refs.cashReceiptGrid.kendoWidget(),\n        ds = grid.dataSource,\n        dataItem = grid.dataItem(kendo.jQuery(e.currentTarget).closest(\"tr\"));\n\n      if (ds.data().length > 2) {\n        ds.remove(dataItem);\n      }\n    },\n    removeRowRelatedExpense(e) {\n      e.preventDefault();\n\n      let grid = this.$refs.relatedExpenseGrid.kendoWidget(),\n        ds = grid.dataSource,\n        dataItem = grid.dataItem(kendo.jQuery(e.currentTarget).closest(\"tr\"));\n\n      if (ds.total() > 2) {\n        ds.remove(dataItem);\n      }\n    },\n    removeRowRevenueDefferedGrant(e) {\n      e.preventDefault();\n\n      let grid = this.$refs.revenueDefferedGrantGrid.kendoWidget(),\n        ds = grid.dataSource,\n        dataItem = grid.dataItem(kendo.jQuery(e.currentTarget).closest(\"tr\"));\n\n      if (ds.total() > 2) {\n        ds.remove(dataItem);\n      }\n    },\n    // Shrink Data\n    shrinkData() {\n      // Journal Date\n      this.journal.journal_date = Helper.toISODate(this.journal.journal_date);\n\n      /* Journal Type */\n      this.journal.journal_type = this.fundCategory.name;\n\n      /* Project Segment Location */\n      this.journal.project_uuid = this.project.id;\n      this.journal.segment_uuid = this.segment.id;\n      this.journal.location_uuid = this.location.id;\n\n      // User\n      if (this.isEdit) {\n        this.journal.modified_by = this.user;\n      } else {\n        this.journal.created_by = this.user;\n      }\n\n      let entries = [],\n        cashReceiptDS = this.$refs.cashReceiptDS.kendoWidget(),\n        relatedExpenseDS = this.$refs.relatedExpenseDS.kendoWidget(),\n        revenueDefferedGrantDS =\n          this.$refs.revenueDefferedGrantDS.kendoWidget();\n\n      // Cash Receipt Accounts on Dr\n      cashReceiptDS.data().forEach((value) => {\n        // Filter selected account\n        if (value.account.number !== \"\" && value.amount > 0) {\n          // Account\n          value.set(\"account\", new AccountModel(value.account));\n          value.set(\"account_uuid\", value.account.uuid);\n\n          // Contact\n          value.set(\"primary_contact\", new ContactModel(this.donor));\n\n          // Currency\n          value.set(\"currency\", new CurrencyModel(this.currency));\n          value.set(\"exchange_rate_uuid\", this.exchangeRate.id);\n          value.set(\"exchange_rate\", this.exchangeRate.rate);\n\n          entries.push(new JournalEntryModel(value));\n        }\n      });\n\n      // Related Expense Accounts on Dr\n      relatedExpenseDS.data().forEach((value) => {\n        // Filter selected account\n        if (value.account.number !== \"\" && value.amount > 0) {\n          // Account\n          value.set(\"account\", new AccountModel(value.account));\n          value.set(\"account_uuid\", value.account.uuid);\n\n          // Contact\n          value.set(\"primary_contact\", new ContactModel(this.donor));\n\n          // Currency\n          value.set(\"currency\", new CurrencyModel(this.currency));\n          value.set(\"exchange_rate_uuid\", this.exchangeRate.id);\n          value.set(\"exchange_rate\", this.exchangeRate.rate);\n\n          entries.push(new JournalEntryModel(value));\n        }\n      });\n\n      // Revenue Deffered Grant Account on Cr\n      revenueDefferedGrantDS.data().forEach((value) => {\n        // Filter selected account\n        if (value.account.number !== \"\" && value.amount > 0) {\n          // Account\n          value.set(\"account\", new AccountModel(value.account));\n          value.set(\"account_uuid\", value.account.uuid);\n\n          // Contact\n          value.set(\"primary_contact\", new ContactModel(this.donor));\n\n          // Currency\n          value.set(\"currency\", new CurrencyModel(this.currency));\n          value.set(\"amount\", value.amount * -1); // Credit side is negative\n          value.set(\"exchange_rate_uuid\", this.exchangeRate.id);\n          value.set(\"exchange_rate\", this.exchangeRate.rate);\n\n          entries.push(new JournalEntryModel(value));\n        }\n      });\n\n      // Journal Entries\n      this.journal.journal_entries = entries;\n    },\n    // Validating\n    validateForm() {\n      let result = true,\n        msg = \"\",\n        cashReceiptDS = this.$refs.cashReceiptDS.kendoWidget(),\n        relatedExpenseDS = this.$refs.relatedExpenseDS.kendoWidget(),\n        revenueDefferedGrantDS =\n          this.$refs.revenueDefferedGrantDS.kendoWidget(),\n        countEmptyCashReceipt = 0,\n        countEmptyRevenueDefferedGrant = 0;\n\n      // Donor\n      if (this.donor.id === \"\") {\n        msg += `<p>${i18n.t(\"donor_is_required\")}</p>`;\n        result = false;\n      }\n\n      // Project\n      if (this.project.id === \"\") {\n        msg += `<p>${i18n.t(\"project_is_required\")}</p>`;\n        result = false;\n      }\n\n      // Segment\n      if (this.segment.id === \"\") {\n        msg += `<p>${i18n.t(\"segment_is_required\")}</p>`;\n        result = false;\n      }\n\n      // Location\n      if (this.location.id === \"\") {\n        msg += `<p>${i18n.t(\"location_is_required\")}</p>`;\n        result = false;\n      }\n\n      // Cash Receipt\n      cashReceiptDS.data().forEach((value, index) => {\n        // No account\n        if (value.account.name === \"\" && value.amount > 0) {\n          result = false;\n          msg += `<p>${i18n.t(\n            \"please_select_cash_receipt_account_at_row_number\"\n          )} ${index + 1}</p>`;\n        }\n\n        // No amount\n        if (value.account.name !== \"\" && value.amount === 0) {\n          result = false;\n          msg += `<p>${value.account.name} ${i18n.t(\"has_no_amount\")}</p>`;\n        }\n\n        // Count From Accounts\n        if (value.account.name !== \"\" && value.amount > 0) {\n          countEmptyCashReceipt++;\n        }\n      });\n\n      // Empty Row From Accounts\n      if (countEmptyCashReceipt === 0) {\n        msg += `<p>${i18n.t(\"please_select_cash_receipt_account\")}</p>`;\n        result = false;\n      }\n\n      // Related Expense\n      relatedExpenseDS.data().forEach((value, index) => {\n        // No account\n        if (value.account.name === \"\" && value.amount > 0) {\n          result = false;\n          msg += `<p>${i18n.t(\n            \"please_select_related_expense_account_at_row_number\"\n          )} ${index + 1}</p>`;\n        }\n\n        // No amount\n        if (value.account.name !== \"\" && value.amount === 0) {\n          result = false;\n          msg += `<p>${value.account.name} ${i18n.t(\"has_no_amount\")}</p>`;\n        }\n      });\n\n      // Related Expense\n      revenueDefferedGrantDS.data().forEach((value, index) => {\n        // No account\n        if (value.account.name === \"\" && value.amount > 0) {\n          result = false;\n          msg += `<p>${i18n.t(\n            \"please_select_revenue_deffered_grant_account_at_row_number\"\n          )} ${index + 1}</p>`;\n        }\n\n        // No amount\n        if (value.account.name !== \"\" && value.amount === 0) {\n          result = false;\n          msg += `<p>${value.account.name} ${i18n.t(\"has_no_amount\")}</p>`;\n        }\n\n        // Count To Accounts\n        if (value.account.name !== \"\" && value.amount > 0) {\n          countEmptyRevenueDefferedGrant++;\n        }\n      });\n\n      // Empty Row To\n      if (countEmptyRevenueDefferedGrant === 0) {\n        msg += `<p>${i18n.t(\n          \"please_select_revenue_deffered_grant_account\"\n        )}</p>`;\n        result = false;\n      }\n\n      // All totals\n      if (kendo.parseFloat(this.totalDr) !== kendo.parseFloat(this.totalCr)) {\n        msg += `<p>${i18n.t(\"total_dr_and_total_cr_are_not_balance\")}</p>`;\n        result = false;\n      }\n\n      // Show Alert\n      this.errorMessage = msg;\n      this.alert = false;\n      if (result === false) {\n        this.alert = true;\n      }\n\n      return result;\n    },\n    // All Saves\n    async onSaveOptionClick(mode) {\n      if (this.$refs.form.validate() && this.validateForm()) {\n        let isValidClosingDate = await Helper.validateClosingDate(\n          this.journal.journal_date\n        );\n        if (isValidClosingDate) {\n          this.saveMode = mode;\n          this.save();\n        }\n      }\n    },\n    cancel() {\n      this.$swal({\n        title: i18n.t(\"msg_title_warning\"),\n        text: i18n.t(\"msg_discard\"),\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: i18n.t(\"cancel\"),\n        confirmButtonColor: \"#4d4848\",\n        cancelButtonColor: \"#ED1A3A\",\n        confirmButtonText: i18n.t(\"discard\"),\n      }).then((result) => {\n        if (result.value) {\n          this.clear();\n          this.setDefaultData();\n          this.$router.go(-1);\n        }\n      });\n    },\n    clear() {\n      this.isEdit = false;\n      this.saveMode = \"\";\n\n      this.currency = new CurrencyModel(institute.baseCurrency);\n      this.exchangeRate = new ExchangeRateModel(institute.baseCurrency);\n\n      this.donor = new ContactModel();\n      this.segment = new SegmentModel();\n      this.project = new ProjectModel();\n      this.location = new LocationModel();\n\n      let cashReceiptDS = this.$refs.cashReceiptDS.kendoWidget();\n      cashReceiptDS.data([]);\n      let relatedExpenseDS = this.$refs.relatedExpenseDS.kendoWidget();\n      relatedExpenseDS.data([]);\n      let revenueDefferedGrantDS =\n        this.$refs.revenueDefferedGrantDS.kendoWidget();\n      revenueDefferedGrantDS.data([]);\n    },\n    confirmDelete() {\n      this.$swal({\n        title: i18n.t(\"are_you_sure_you_want_to_delete_it\"),\n        text: i18n.t(\"you_wont_be_able_to_revert_this\"),\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#4d4848\",\n        cancelButtonColor: \"#ED1A3A\",\n        confirmButtonText: \"Yes\",\n      }).then((result) => {\n        if (result.value) {\n          this.saveMode = SaveOption.DELETE;\n\n          /* Mark as deleted */\n          this.journal.is_deleted = 1;\n\n          /* Update Journal Status */\n          this.save();\n        }\n      });\n    },\n    save() {\n      let self = this;\n\n      // Draft Mode\n      if (this.saveMode === SaveOption.SAVEDRAFT) {\n        this.journal.is_draft = 1;\n      } else {\n        this.journal.is_draft = 0;\n      }\n\n      // Shrink Data\n      this.shrinkData();\n\n      // Sync Data\n      this.showLoading = true;\n      journalHandler\n        .save(new JournalModel(this.journal))\n        .then((response) => {\n          if (response) {\n            self.responseStatus(response);\n          }\n        })\n        .catch((error) => {\n          self.showLoading = false;\n          Helper.alertErrorMsg(error);\n        })\n        .finally(() => {\n          self.showLoading = false;\n        });\n    },\n    // Response Status\n    responseStatus(response) {\n      if (response.status === 200) {\n        if (\n          this.saveMode === SaveOption.SAVECLOSE ||\n          this.saveMode === SaveOption.DELETE\n        ) {\n          /* Save Close or Delete */\n          if (this.isEdit) {\n            this.goBackToViewPage();\n          } else {\n            this.$router.go(-1);\n          }\n\n          this.clear();\n          this.setDefaultData();\n        } else {\n          /* Save New */\n          this.clear();\n          this.setDefaultData();\n        }\n\n        /* Alert Success */\n        this.$snotify.success(i18n.t(\"successful\"));\n      } else {\n        /* Alert Error */\n        this.$snotify.error(i18n.t(\"error_something_wrong\"));\n      }\n    },\n    // Go back to view page after edit mode\n    getJournal() {\n      return this.journal;\n    },\n    goBackToViewPage() {\n      this.$router.replace({\n        name: \"Fund Receipt View\",\n        params: { initJournal: this.getJournal() },\n      });\n    },\n  },\n  watch: {\n    initJournal() {\n      this.initialData();\n    },\n  },\n  created() {},\n  mounted() {\n    // Initial Data\n    this.initialData();\n  },\n};\n</script>\n\n<style scoped>\n.hide_small_bar_class {\n  max-width: 0;\n  transition: 0.5s ease-in;\n  flex: 0 0 0;\n  padding: 0;\n}\n\n.hide_big_bar_class {\n  max-width: 100%;\n  transition: 0.5s ease-in;\n  flex: 0 0 100%;\n}\n\n.info_add {\n  background-color: #ffffff;\n}\n\n.small_sidebar {\n  height: 98%;\n  position: relative;\n  padding: 12px;\n  background-color: #edf1f5;\n}\n\n.iconArrow {\n  right: -35px;\n  position: absolute;\n  bottom: -10px;\n}\n\n.iconArrowHide {\n  position: absolute;\n  right: -7px;\n  bottom: -10px;\n}\n\n@media (min-width: 1264px) {\n  .container {\n    max-width: 1185px;\n    /* max-width: 1080px !important; */\n  }\n}\n\n@media (max-width: 576px) {\n  .mb-6 {\n    margin-bottom: 0 !important;\n  }\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/settings/currency/TaxExchangeRate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/settings/currency/TaxExchangeRate.vue","mtime":1638499443317},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVGF4RXhjaGFuZ2VDdXJyZW5jeU1vZGVsIGZyb20gIkAvc2NyaXB0cy9jdXJyZW5jeS9tb2RlbC9UYXhFeGNoYW5nZUN1cnJlbmN5IjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIiOwoKY29uc3QgaW5zdGl0dXRlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9pbnN0aXR1dGVIYW5kbGVyIikKY29uc3QgY3VycmVuY3lIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2N1cnJlbmN5L2hhbmRsZXIvY3VycmVuY3lIYW5kbGVyIikKY29uc3QgdGF4RXhjaGFuZ2VDdXJyZW5jeU1vZGVsID0gbmV3IFRheEV4Y2hhbmdlQ3VycmVuY3lNb2RlbCh7fSkKY29uc3QgJCA9IGtlbmRvLmpRdWVyeTsKCmNvbnN0IGN1cnJlbmN5VHlwZSA9IHsKICAgIFRBWF9FWENIQU5HRV9DVVJSRU5DWTogJ3RheC1jJywKfQovKiBDb29raWUgKi8KY29uc3QgY29va2llSlMgPSByZXF1aXJlKCJAL2Nvb2tpZS5qcyIpOwpjb25zdCB7aW5zdGl0dXRlSWR9ID0gY29va2llSlMuZ2V0Q29va2llKCk7CmltcG9ydCBKU1ppcCBmcm9tICJqc3ppcCI7Cgp3aW5kb3cuSlNaaXAgPSBKU1ppcDsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlRheEV4Y2hhbmdlQ3VycmVuY3kiLAogICAgY29tcG9uZW50czogewogICAgICAgICdhcHAtZGF0ZXBpY2tlcic6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvRGF0ZVBpY2tlckNvbXBvbmVudGApLAogICAgICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KGBAL2NvbXBvbmVudHMvTG9hZGluZ2ApLAogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgY29tcGFueToge30sCiAgICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgICAgY3VycmVuY3lMaXN0OiBbXSwKICAgICAgICBmdW5jQ3VycmVuY3lMaXN0OiBbXSwKICAgICAgICB0eG5EYXRlOiBuZXcgRGF0ZSgpLAogICAgICAgIHR4blRheFBlcmlvZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApLAogICAgICAgIHRheEV4Y2hhbmdlQ3VycmVuY3k6IHRheEV4Y2hhbmdlQ3VycmVuY3lNb2RlbCwKICAgICAgICBkYXRlRm9ybWF0OiB0YXhFeGNoYW5nZUN1cnJlbmN5TW9kZWwuZGF0ZUZvcm1hdCwKICAgICAgICBidG5EaXNhYmxlZDogZmFsc2UKICAgIH0pLAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIGxvYWRJbnN0aXR1dGVJbmZvKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGluc3RpdHV0ZUhhbmRsZXIuZ2V0T25lQ29tcGFueShpbnN0aXR1dGVJZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBhbnkgPSByZXMKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuY29tcGFueSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRDdXJyZW5jeURhdGEodHlwZSkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5SGFuZGxlci5saXN0KHR5cGUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBjdXJyZW5jeVR5cGUuVEFYX0VYQ0hBTkdFX0NVUlJFTkNZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW5jeUxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMTApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblNhdmVDbG9zZSgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGF4RXhjaGFuZ2VDdXJyZW5jeS5yYXRlICYmIHRoaXMuY29tcGFueS50YXhDdXJyZW5jeS5jb2RlICYmIHRoaXMudHhuRGF0ZSAmJiB0aGlzLnR4blRheFBlcmlvZERhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaWQiOiB0aGlzLnRheEV4Y2hhbmdlQ3VycmVuY3kuaWQgPyB0aGlzLnRheEV4Y2hhbmdlQ3VycmVuY3kuaWQgOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogY3VycmVuY3lUeXBlLlRBWF9FWENIQU5HRV9DVVJSRU5DWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogdGhpcy5jb21wYW55LnRheEN1cnJlbmN5Lm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY29kZSI6IHRoaXMuY29tcGFueS50YXhDdXJyZW5jeS5jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInN5bWJvbCI6IHRoaXMuY29tcGFueS50YXhDdXJyZW5jeS5zeW1ib2wsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicmVjb3JkRGF0ZSI6IHRoaXMudHhuRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJlZmZlY3RpdmVEYXRlIjogdGhpcy50eG5UYXhQZXJpb2REYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImVmZmVjdGl2ZURhdGVUWiI6IEhlbHBlci50b0lTT0RhdGUodGhpcy50eG5UYXhQZXJpb2REYXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb3VyY2UiOiB0aGlzLnRheEV4Y2hhbmdlQ3VycmVuY3kuc291cmNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1ldGhvZCI6ICdNYW51YWwnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiB0aGlzLnRheEV4Y2hhbmdlQ3VycmVuY3kucmF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzeW1ib2xOYXRpdmUiOiB0aGlzLmNvbXBhbnkudGF4Q3VycmVuY3kuc3ltYm9sTmF0aXZlID8gdGhpcy5jb21wYW55LnRheEN1cnJlbmN5LnN5bWJvbE5hdGl2ZSA6ICcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKDEsIGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5SGFuZGxlci5jcmVhdGUoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LnN1Y2Nlc3MoJ1N1Y2Nlc3NmdWxseScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWwoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jdXJyZW5jeUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJlcy5pZCA9PT0gaXRlbS5pZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbmN5TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQ3VycmVuY3lEYXRhKGN1cnJlbmN5VHlwZS5UQVhfRVhDSEFOR0VfQ1VSUkVOQ1kpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW5jeUxpc3QucHVzaChyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW5jeUxpc3Quc3BsaWNlKGluZGV4LCAxLCByZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjYW5jZWwoKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIGNsZWFyKCkgewogICAgICAgICAgICB0aGlzLnRheEV4Y2hhbmdlQ3VycmVuY3kgPSB7fQogICAgICAgIH0sCiAgICAgICAgZ29FZGl0KGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgIHRoaXMuYnRuRGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgICBsZXQgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRUYXhFeGNoYW5nZVJhdGUiKS5kYXRhKCJrZW5kb0dyaWQiKQogICAgICAgICAgICBsZXQgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKQogICAgICAgICAgICB0aGlzLnRheEV4Y2hhbmdlQ3VycmVuY3kgPSBkYXRhSXRlbQogICAgICAgICAgICB0aGlzLm1DdXJyZW5jeSA9IGRhdGFJdGVtCiAgICAgICAgICAgIHRoaXMudHhuRGF0ZSA9IGRhdGFJdGVtLnJlY29yZERhdGUKICAgICAgICAgICAgdGhpcy50eG5UYXhQZXJpb2REYXRlID0gZGF0YUl0ZW0uZWZmZWN0aXZlRGF0ZQogICAgICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgICB9LAogICAgICAgIGZvcm1hdEVmZmVjdGl2ZURhdGUoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgaWYgKGRhdGFJdGVtLmhhc093blByb3BlcnR5KCdlZmZlY3RpdmVEYXRlJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShkYXRhSXRlbS5lZmZlY3RpdmVEYXRlKSwgYCR7dGhpcy5kYXRlRm9ybWF0fWApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSwKICAgICAgICBmb3JtYXRSZWNvcmREYXRlKGRhdGFJdGVtKSB7CiAgICAgICAgICAgIGlmIChkYXRhSXRlbS5oYXNPd25Qcm9wZXJ0eSgncmVjb3JkRGF0ZScpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcobmV3IERhdGUoZGF0YUl0ZW0ucmVjb3JkRGF0ZSksIGAke3RoaXMuZGF0ZUZvcm1hdH1gKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgIH0sCgogICAgICAgIGV4Y2VsRXhwb3J0OiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAvLyBjb25zdCBwaXZvdCA9IHRoaXMuJHJlZnMuZ3JpZFRyYW5zYWN0aW9uRFMua2VuZG9XaWRnZXQoKQogICAgICAgICAgICAvLyBwaXZvdC5zYXZlQXNFeGNlbCgpCiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhlLmRhdGEpOwogICAgICAgIH0sCiAgICAgICAgaW5pdFRvb2xiYXIodGhhdCkgewogICAgICAgICAgICBsZXQgZ3JpZCA9ICQoIiNncmlkVGF4RXhjaGFuZ2VSYXRlIikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgIGxldCBncmlkRWxlbWVudCA9IGdyaWQuZWxlbWVudDsKICAgICAgICAgICAgbGV0IHRvb2xiYXJFbGVtZW50ID0gZ3JpZEVsZW1lbnQuZmluZCgiLmstZ3JpZC10b29sYmFyIik7CiAgICAgICAgICAgIHRvb2xiYXJFbGVtZW50Lm9uKCJjbGljayIsICIuay1wYWdlci1yZWZyZXNoIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIG9uUmVsb2FkRGF0YSh0aGF0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRvb2xiYXJFbGVtZW50Lm9uKCJjbGljayIsICIuay1wYWdlci1leGNlbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBvbkV4cG9ydEV4Y2VsKHRoYXQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVsb2FkRGF0YSh0aGF0KSB7CiAgICAgICAgICAgICAgICB0aGF0LmxvYWRDdXJyZW5jeURhdGEoY3VycmVuY3lUeXBlLlRBWF9FWENIQU5HRV9DVVJSRU5DWSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXhwb3J0RXhjZWwodGhhdCkgewogICAgICAgICAgICAgICAgdGhhdC5leHBvcnRUb0V4Y2VsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRvb2xiYXJUZW1wbGF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUh0bWwgPQogICAgICAgICAgICAgICAgJzxzcGFuPicgKwogICAgICAgICAgICAgICAgJzxhIGNsYXNzPSJrLXBhZ2VyLWV4Y2VsIGstbGluayBrLWJ1dHRvbiBleGNlbCIgdGl0bGU9IkV4cG9ydCB0byBFeGNlbCI+IDxzcGFuIGNsYXNzPSJrLWljb24gay1pLWV4Y2VsIj48L3NwYW4+RXhwb3J0IHRvIGV4Y2VsIDwvYT4nICsKICAgICAgICAgICAgICAgICc8L3NwYW4+PHNwYW4+Jm5ic3A7Jm5ic3A7PC9zcGFuPicgKwogICAgICAgICAgICAgICAgJzxzcGFuIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6NXB4Ij4nICsKICAgICAgICAgICAgICAgICc8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9ImstcGFnZXItcmVmcmVzaCBrLWxpbmsgay1idXR0b24gcmVsb2FkIiB0aXRsZT0iUmVmcmVzaCI+PHNwYW4gY2xhc3M9ImstaWNvbiBrLWktcmVsb2FkIj48L3NwYW4+IFJlZnJlc2ggPC9hPicgKwogICAgICAgICAgICAgICAgJzwvc3Bhbj4nCgogICAgICAgICAgICByZXR1cm4ga2VuZG8udGVtcGxhdGUodGVtcGxhdGVIdG1sKQogICAgICAgIH0sCiAgICAgICAgZXhwb3J0VG9FeGNlbCgpIHsKICAgICAgICAgICAgY29uc3QgZ3JpZCA9ICQoIiNncmlkVGF4RXhjaGFuZ2VSYXRlIikuZGF0YSgia2VuZG9HcmlkIikKICAgICAgICAgICAgZ3JpZC5zYXZlQXNFeGNlbCgpCiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkSW5zdGl0dXRlSW5mbygpCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQ3VycmVuY3lEYXRhKGN1cnJlbmN5VHlwZS5UQVhfRVhDSEFOR0VfQ1VSUkVOQ1kpCiAgICAgICAgYXdhaXQgdGhpcy5pbml0VG9vbGJhcih0aGlzKQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgQ3VycmVuY3koKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhbnkpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhbnkuaGFzT3duUHJvcGVydHkoJ3RheEN1cnJlbmN5JykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXIgPSB0aGlzLmNvbXBhbnkudGF4Q3VycmVuY3kKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW5jeSA9IGN1ci5jb2RlICsgJyAtICcgKyBjdXIubmFtZQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW5jeQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["TaxExchangeRate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaxExchangeRate.vue","sourceRoot":"src/views/settings/currency","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"grayBg px-3\">\n            <v-card color=\"white\" class=\"pa-3 no_border\" elevation=\"0\">\n                <v-row class=\"\">\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                        <template>\n                            <v-dialog v-model=\"dialog\" max-width=\"500px\">\n\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <!--                                    <div v-if=\"baseCurrency==='USD'\">-->\n                                    <v-btn color=\"primary\" class=\" text-capitalize white--text float-right\"\n                                           @click=\"clear\"\n                                           v-bind=\"attrs\"\n                                           v-on=\"on\">\n                                        <v-icon size=\"15\" class=\"ma-1 mr-2\">mdi-plus\n                                        </v-icon>\n                                        {{ $t('new') }}\n                                    </v-btn>\n                                    <!--                                    </div>-->\n                                </template>\n\n                                <v-card>\n                                    <div class=\"modal_header\">\n                                        <v-card-title>{{ $t('tax_exchange_rate') }}</v-card-title>\n                                        <v-icon @click=\"dialog = false\">close</v-icon>\n                                    </div>\n                                    <v-card-text class=\"modal_text_content\">\n                                        <v-row>\n                                            <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{\n                                                        $t('record_date')\n                                                    }}</label>\n                                                <app-datepicker :initialDate=\"txnDate\"\n                                                                @emitDate=\"txnDate = $event\"/>\n                                            </v-col>\n                                            <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{\n                                                        $t('currency')\n                                                    }}</label>\n                                                <!-- <v-select class=\"mt-1\"\n                                                        :items=\"currencyList\"\n                                                        v-model=\"mCurrency\"\n                                                        item-value=\"code\"\n                                                        :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                        return-object\n                                                        outlined>\n                                                </v-select> -->\n                                                <v-text-field ref=\"field\"\n                                                              v-model=\"Currency\"\n                                                              tage=\"Rate\"\n                                                              class=\"col-sm-6\"\n                                                              outlined readonly/>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                                <label class=\"label\">{{\n                                                        $t('rate')\n                                                    }}</label>\n                                                <v-text-field ref=\"field\"\n                                                              v-model=\"taxExchangeCurrency.rate\"\n                                                              tage=\"Rate\"\n                                                              class=\"col-sm-6\"\n                                                              outlined/>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                                <label class=\"label\">{{\n                                                        $t('source')\n                                                    }}</label>\n                                                <v-text-field\n                                                    class=\" col-sm-6\"\n                                                    v-model=\"taxExchangeCurrency.source\"\n                                                    tage=\"Source\"\n                                                    outlined\n                                                    placeholder=\"\"/>\n                                            </v-col>\n\n                                            <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                                <label class=\"label\">{{\n                                                        $t('for_report_period')\n                                                    }}</label>\n                                                <app-datepicker :initialDate=\"taxExchangeCurrency.effectiveDate\"\n                                                                @emitDate=\"txnTaxPeriodDate = $event\"/>\n                                            </v-col>\n                                            <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                                <p>{{ $t('note_exc_rate') }}</p>\n                                            </v-col>\n                                        </v-row>\n                                    </v-card-text>\n                                    <v-card-actions class=\"modal_footer\">\n                                        <v-row>\n                                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-left\">\n                                                <v-btn color=\"primary\" outlined\n                                                       class=\" text-capitalize  black--text float-left\"\n                                                       @click=\"dialog = false\">{{\n                                                        $t('cancel')\n                                                    }}\n                                                </v-btn>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-right\">\n                                                <v-btn color=\"primary\" class=\"px-3  white--text text-capitalize\"\n                                                       :disabled=\"btnDisabled\"\n                                                       @click=\"onSaveClose\">\n                                                    {{ $t('save_close') }}\n                                                </v-btn>\n                                            </v-col>\n                                        </v-row>\n                                    </v-card-actions>\n\n                                </v-card>\n                            </v-dialog>\n                        </template>\n                    </v-col>\n\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                        <LoadingMe\n                            :isLoading=\"showLoading\"\n                            :fullPage=\"false\"\n                            :myLoading=\"true\"\n                            type=\"loading\"/>\n                        <kendo-datasource ref=\"TaxDS\" :data=\"currencyList\"/>\n\n                        <kendo-grid id=\"gridTaxExchangeRate\" class=\"grid-function\"\n                                    :data-source-ref=\"'TaxDS'\"\n                                    :sortable=\"false\"\n                                    :filterable=\"false\"\n                                    :column-menu=\"true\"\n                                    :editable=\"false\"\n                                    :resizable=\"true\"\n                                    :toolbar=\"toolbarTemplate\"\n                                    :excel-export=\"excelExport\"\n                                    :excel-file-name=\"'TaxCurrency.xlsx'\"\n                                    :excel-filterable=\"true\"\n                                    :scrollable-virtual=\"true\">\n                            <kendo-grid-column\n                                :title=\"$t('date')\"\n                                :column-menu=\"false\"\n                                :template=\"formatRecordDate\"\n                                :headerAttributes=\"{\n                                        style: 'background-color: #EDF1F5;',\n                                        class: 'text-products'\n                                    }\"\n                                :attributes=\"{\n                                        style: 'text-align: products'\n                                    }\"/>\n                            <kendo-grid-column\n                                :title=\"$t('effective_date')\"\n                                :column-menu=\"false\"\n                                :template=\"formatEffectiveDate\"\n                                :headerAttributes=\"{\n                                        style: 'background-color: #EDF1F5;',\n                                        class: 'text-products'\n                                    }\"\n                                :attributes=\"{\n                                        style: 'text-align: products'\n                                    }\"/>\n                            <kendo-grid-column\n                                :field=\"'code'\"\n                                :title=\"$t('code')\"\n                                :headerAttributes=\"{\n                                        style: 'background-color: #EDF1F5'\n                                    }\"/>\n                            <kendo-grid-column\n                                :field=\"'name'\"\n                                :attributes=\"{class:'tb_name_td'}\"\n                                :title=\"$t('name')\"\n                                :headerAttributes=\"{\n                                        style: 'background-color: #EDF1F5'\n                                    }\"/>\n                            <kendo-grid-column\n                                :field=\"'rate'\"\n                                :title=\"$t('rate')\"\n                                :headerAttributes=\"{style: ' background-color: #EDF1F5'}\"\n                                :attributes=\"{style: ''}\"/>\n                            <kendo-grid-column\n                                :field=\"'source'\"\n                                :title=\"$t('sources')\"\n                                :headerAttributes=\"{\n                                        style: 'background-color: #EDF1F5'\n                                    }\"/>\n                            <kendo-grid-column\n                                :command=\"{ iconClass: 'k-icon k-i-edit', text: ' ', class: 'btn-plus' , click: goEdit}\"\n                                :title=\"$t('action')\"\n                                :headerAttributes=\"{\n                                        style: 'text-align: right; background-color: #EDF1F5'\n                                    }\"\n                            />\n                        </kendo-grid>\n                    </v-col>\n                </v-row>\n            </v-card>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\n\nimport TaxExchangeCurrencyModel from \"@/scripts/currency/model/TaxExchangeCurrency\";\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper\";\n\nconst instituteHandler = require(\"@/scripts/instituteHandler\")\nconst currencyHandler = require(\"@/scripts/currency/handler/currencyHandler\")\nconst taxExchangeCurrencyModel = new TaxExchangeCurrencyModel({})\nconst $ = kendo.jQuery;\n\nconst currencyType = {\n    TAX_EXCHANGE_CURRENCY: 'tax-c',\n}\n/* Cookie */\nconst cookieJS = require(\"@/cookie.js\");\nconst {instituteId} = cookieJS.getCookie();\nimport JSZip from \"jszip\";\n\nwindow.JSZip = JSZip;\nexport default {\n    name: \"TaxExchangeCurrency\",\n    components: {\n        'app-datepicker': () => import(`@/components/custom_templates/DatePickerComponent`),\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    data: () => ({\n        company: {},\n        dialog: false,\n        showLoading: false,\n        currencyList: [],\n        funcCurrencyList: [],\n        txnDate: new Date(),\n        txnTaxPeriodDate: new Date().toISOString().substr(0, 10),\n        taxExchangeCurrency: taxExchangeCurrencyModel,\n        dateFormat: taxExchangeCurrencyModel.dateFormat,\n        btnDisabled: false\n    }),\n    methods: {\n        async loadInstituteInfo() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    instituteHandler.getOneCompany(instituteId).then(res => {\n                        this.company = res\n                        window.console.log(this.company)\n                    })\n                    resolve('resolved');\n                }, 200);\n            });\n        },\n        async loadCurrencyData(type) {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.showLoading = true\n                    currencyHandler.list(type).then(response => {\n                        if (response.data.statusCode === 200) {\n                            if (type === currencyType.TAX_EXCHANGE_CURRENCY) {\n                                this.currencyList = response.data.data\n                            }\n                            this.showLoading = false\n                        } else {\n                            this.showLoading = false\n                        }\n                    })\n                }, 10)\n            })\n        },\n        async onSaveClose() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    if (this.taxExchangeCurrency.rate && this.company.taxCurrency.code && this.txnDate && this.txnTaxPeriodDate) {\n                        let data = {\n                            \"id\": this.taxExchangeCurrency.id ? this.taxExchangeCurrency.id : '',\n                            \"type\": currencyType.TAX_EXCHANGE_CURRENCY,\n                            \"name\": this.company.taxCurrency.name,\n                            \"code\": this.company.taxCurrency.code,\n                            \"symbol\": this.company.taxCurrency.symbol,\n                            \"recordDate\": this.txnDate,\n                            \"effectiveDate\": this.txnTaxPeriodDate,\n                            \"effectiveDateTZ\": Helper.toISODate(this.txnTaxPeriodDate),\n                            \"source\": this.taxExchangeCurrency.source,\n                            \"method\": 'Manual',\n                            \"rate\": this.taxExchangeCurrency.rate,\n                            \"symbolNative\": this.company.taxCurrency.symbolNative ? this.company.taxCurrency.symbolNative : ''\n                        }\n                        window.console.log(1, data)\n                        currencyHandler.create(data).then(response => {\n                            if (response.data.statusCode === 201) {\n                                this.$snotify.success('Successfully')\n                                this.cancel()\n                                const res = response.data.data\n                                const index = this.currencyList.findIndex(item => {\n                                    return (res.id === item.id)\n                                })\n                                if (this.currencyList.length === 0) {\n                                    this.loadCurrencyData(currencyType.TAX_EXCHANGE_CURRENCY)\n                                }\n                                if (index < 0) {\n                                    this.currencyList.push(res)\n                                } else {\n                                    this.currencyList.splice(index, 1, res)\n                                }\n                            }\n                        }).catch(e => {\n                            this.$snotify.error('Something went wrong')\n                            this.errors.push(e)\n                        })\n                    }\n                }, 10);\n            })\n        },\n        cancel() {\n            this.dialog = false\n        },\n        clear() {\n            this.taxExchangeCurrency = {}\n        },\n        goEdit(e) {\n            e.preventDefault()\n            this.btnDisabled = false\n            let grid = kendo.jQuery(\"#gridTaxExchangeRate\").data(\"kendoGrid\")\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"))\n            this.taxExchangeCurrency = dataItem\n            this.mCurrency = dataItem\n            this.txnDate = dataItem.recordDate\n            this.txnTaxPeriodDate = dataItem.effectiveDate\n            this.dialog = true\n        },\n        formatEffectiveDate(dataItem) {\n            if (dataItem.hasOwnProperty('effectiveDate')) {\n                return kendo.toString(new Date(dataItem.effectiveDate), `${this.dateFormat}`)\n            }\n            return ''\n        },\n        formatRecordDate(dataItem) {\n            if (dataItem.hasOwnProperty('recordDate')) {\n                return kendo.toString(new Date(dataItem.recordDate), `${this.dateFormat}`)\n            }\n            return ''\n        },\n\n        excelExport: function (e) {\n            // const pivot = this.$refs.gridTransactionDS.kendoWidget()\n            // pivot.saveAsExcel()\n            window.console.log(e.data);\n        },\n        initToolbar(that) {\n            let grid = $(\"#gridTaxExchangeRate\").data(\"kendoGrid\");\n            let gridElement = grid.element;\n            let toolbarElement = gridElement.find(\".k-grid-toolbar\");\n            toolbarElement.on(\"click\", \".k-pager-refresh\", function (e) {\n                e.preventDefault();\n                onReloadData(that);\n            });\n            toolbarElement.on(\"click\", \".k-pager-excel\", function (e) {\n                e.preventDefault();\n                onExportExcel(that);\n            });\n\n            function onReloadData(that) {\n                that.loadCurrencyData(currencyType.TAX_EXCHANGE_CURRENCY);\n            }\n\n            function onExportExcel(that) {\n                that.exportToExcel();\n            }\n        },\n        toolbarTemplate: function () {\n            const templateHtml =\n                '<span>' +\n                '<a class=\"k-pager-excel k-link k-button excel\" title=\"Export to Excel\"> <span class=\"k-icon k-i-excel\"></span>Export to excel </a>' +\n                '</span><span>&nbsp;&nbsp;</span>' +\n                '<span style=\"position:absolute; right:5px\">' +\n                '</span>' +\n                '<span>' +\n                '<a class=\"k-pager-refresh k-link k-button reload\" title=\"Refresh\"><span class=\"k-icon k-i-reload\"></span> Refresh </a>' +\n                '</span>'\n\n            return kendo.template(templateHtml)\n        },\n        exportToExcel() {\n            const grid = $(\"#gridTaxExchangeRate\").data(\"kendoGrid\")\n            grid.saveAsExcel()\n        },\n    },\n    mounted: async function () {\n        await this.loadInstituteInfo()\n        await this.loadCurrencyData(currencyType.TAX_EXCHANGE_CURRENCY)\n        await this.initToolbar(this)\n    },\n    computed: {\n        Currency() {\n            if (this.company) {\n                if (this.company.hasOwnProperty('taxCurrency')) {\n                    const cur = this.company.taxCurrency\n                    const currency = cur.code + ' - ' + cur.name\n                    return currency\n                }\n            }\n            return ''\n        },\n    }\n}\n</script>\n<style scoped>\n</style>\n\t"]}]}
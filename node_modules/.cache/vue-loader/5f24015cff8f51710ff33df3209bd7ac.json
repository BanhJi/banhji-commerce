{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/compliance/monthly_tax/MonthlyFilling.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/compliance/monthly_tax/MonthlyFilling.vue","mtime":1638499443158},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkaW5nTWUgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRpbmciOwppbXBvcnQgTW9udGhQaWNrZXIgZnJvbSAiQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvTW9udGhQaWNrZXIiOwppbXBvcnQgRGF0ZVBpY2tlckNvbXBvbmVudCBmcm9tICJAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9EYXRlUGlja2VyQ29tcG9uZW50IjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBNb250aGx5UmV0dXJuIGZyb20gIkAvc2NyaXB0cy9jb21wbGlhbmNlL21vZGVsL01vbnRobHlSZXR1cm4iOwppbXBvcnQge0FjY291bnRNb2RlbCwgQ3VycmVuY3lNb2RlbCwgSm91cm5hbEVudHJ5TW9kZWwsIEpvdXJuYWxNb2RlbH0gZnJvbSAiQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyI7CmltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIiOwovLyBpbXBvcnQgTGlua1RlbXBsYXRlIGZyb20gIkAvY29tcG9uZW50cy9rZW5kb190ZW1wbGF0ZXMvTGlua1RlbXBsYXRlIjsKY29uc3QgeyBFbnRpdHlUeXBlLCB9ID0gcmVxdWlyZSgiQC9zY3JpcHRzL2RlZmF1bHRfc2V0dXAvQ29sbGVjdGlvbnMiKTsKY29uc3QgbW9udGhseVJldHVybkhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY29tcGxpYW5jZS9oYW5kbGVyL21vbnRobHlSZXR1cm5IYW5kbGVyIik7CmNvbnN0IHNhbGVIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2NvbXBsaWFuY2UvaGFuZGxlci9zYWxlSGFuZGxlciIpCmNvbnN0IHB1cmNoYXNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jb21wbGlhbmNlL2hhbmRsZXIvcHVyY2hhc2VIYW5kbGVyIikKY29uc3Qgd2l0aGhvbGRpbmdUYXhIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2NvbXBsaWFuY2UvaGFuZGxlci93aXRoaG9sZGluZ1RheEhhbmRsZXIiKQpjb25zdCBzYWxhcnlIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2NvbXBsaWFuY2UvaGFuZGxlci9zYWxhcnlIYW5kbGVyIikKY29uc3QgbW9udGhseVJldHVybiA9IG5ldyBNb250aGx5UmV0dXJuKHt9KQpjb25zdCB0YXhBZ2VudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY29tcGxpYW5jZS9oYW5kbGVyL3RheEFnZW50SGFuZGxlciIpCmNvbnN0IHBheW1lbnRPcHRpb25IYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3BheW1lbnRPcHRpb25IYW5kbGVyIikKY29uc3QgT1BUSU9OX1RZUEUgPSAnQ3VzdG9tZXInCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICIiLAogICAgY29tcG9uZW50czogewogICAgICAgIExvYWRpbmdNZSwKICAgICAgICAibW9udGgtcGlja2VyIjogTW9udGhQaWNrZXIsCiAgICAgICAgImRhdGUtcGlja2VyIjogRGF0ZVBpY2tlckNvbXBvbmVudCwKICAgIH0sCiAgICBkYXRhOiAoKSA9PiAoewogICAgICAgIG1vbnRoOiAiMjAyMS0wNCIsCiAgICAgICAgY29tcGVsZXRMb2FkaW5nOiBmYWxzZSwKICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgICAgc2hvd0xvYWRpbmcxOiBmYWxzZSwKICAgICAgICBtb250aGx5UmV0dXJuczogW10sCiAgICAgICAgbW9udGhseVJldHVybjogbW9udGhseVJldHVybiwKICAgICAgICBkaWFsb2dNOiBmYWxzZSwKICAgICAgICBkaWFsb2dQOiBmYWxzZSwKICAgICAgICBkYXRlOiAiIiwKICAgICAgICBtb250aGx5OiB7fSwKICAgICAgICBzdWJtaXRGaWxlOiB7fSwKICAgICAgICBtZXRob2Q6IFt7aWQ6IDEsIG5hbWU6ICdHRFQgRGVza3RvcCBBcHBsaWNhdGlvbid9XSwKICAgICAgICB0YXhBZ2VudHM6IFtdLAogICAgICAgIG51bURyYWZ0OiAwLAogICAgICAgIG51bVN1Ym1pdHRlZDogMCwKICAgICAgICBudW1QYWlkOiAwLAoKICAgICAgICBzYWxlczogW10sCiAgICAgICAgcHVyY2hhc2VzOiBbXSwKICAgICAgICBzYWxhcmllczogW10sCiAgICAgICAgd2h0czogW10sCiAgICAgICAgcGF5bWVudE9wdGlvbnM6IFtdLAogICAgICAgIG1vbnRobHlKb3VybmFsOiBbXSwKICAgIH0pLAogICAgbWV0aG9kczogewogICAgICAgIG9uTmV3UmV0dXJuKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiAnTmV3IFRheCBSZXR1cm4nLAogICAgICAgICAgICAgICAgcGF0aDogJ25ld190YXhfcmV0dXJuJywKICAgICAgICAgICAgICAgIHBhcmFtczoge21vbnRobHlSZXR1cm5zOiB0aGlzLm1vbnRobHlSZXR1cm5zfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb25sb2FkVGF4QWdlbnQoKSB7CiAgICAgICAgICAgIHRheEFnZW50SGFuZGxlci5nZXQoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnRheEFnZW50cyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIG9uQ3JlYXRlU3VibWl0KCkgewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nMSA9IHRydWUKICAgICAgICAgICAgdGhpcy5tb250aGx5UmV0dXJuLnN0YXR1cyA9IHtpZDogMiwgbmFtZTogJ1N1Ym1pdHRlZCd9CiAgICAgICAgICAgIG1vbnRobHlSZXR1cm5IYW5kbGVyLmNyZWF0ZSh0aGlzLm1vbnRobHlSZXR1cm4pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMsICdzdWJtaXQnKQogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZzEgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlU3VibWl0KCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIG9uU3VibWl0KGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy5tb250aGx5UmV0dXJuID0gaXRlbQogICAgICAgICAgICB0aGlzLmRpYWxvZ00gPSB0cnVlCiAgICAgICAgfSwKICAgICAgICBvbkNsb3NlU3VibWl0KCkgewogICAgICAgICAgICB0aGlzLm1vbnRobHlSZXR1cm4gPSB7fQogICAgICAgICAgICB0aGlzLm9ubG9hZE1vbnRobHlSZXR1cm4oKQogICAgICAgICAgICB0aGlzLmRpYWxvZ00gPSBmYWxzZQogICAgICAgIH0sCiAgICAgICAgb25DbG9zZVBheW1lbnQoKSB7CiAgICAgICAgICAgIHRoaXMubW9udGhseSA9IHt9CiAgICAgICAgICAgIHRoaXMubW9udGhseVJldHVybiA9IHt9CiAgICAgICAgICAgIHRoaXMuZGF0ZSA9ICcnCiAgICAgICAgICAgIHRoaXMuZGlhbG9nUCA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbmxvYWRNb250aGx5Sm91cm5hbCgpIHsKICAgICAgICAgICAgYXdhaXQgbW9udGhseVJldHVybkhhbmRsZXIuZ2V0Sm91cm5hbCgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMubW9udGhseUpvdXJuYWwgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblBheW1lbnQoKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIGxldCBqb3VybmFscyA9IFtdLCBqb3VybmFsXyA9IHt9LCBjdXJyZW5jeSA9IHt9LCBleGNoYW5nZV9yYXRlID0gMQogICAgICAgICAgICBjdXJyZW5jeSA9IHRoaXMubW9udGhseUpvdXJuYWxbMF0uY3VycmVuY3kKICAgICAgICAgICAgZXhjaGFuZ2VfcmF0ZSA9IHRoaXMubW9udGhseUpvdXJuYWxbMF0uZXhjaGFuZ2VfcmF0ZQogICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5tb250aGx5Lm1ldGhvZC5hY2NvdW50CiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhhY2NvdW50KS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoYFRoaXMgcGF5bWVudCBtZXRob2QgZG9lc24ndCBoYXZlIGFjY291bnRgKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgam91cm5hbHMucHVzaCggbmV3IEpvdXJuYWxFbnRyeU1vZGVsKHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAgICAgICAgICB0aGlzLm1vbnRobHkubWV0aG9kLmFjY291bnQubmFtZSwKICAgICAgICAgICAgICAgIGFjY291bnQ6ICAgICAgICAgICAgICBuZXcgQWNjb3VudE1vZGVsKHRoaXMubW9udGhseS5tZXRob2QuYWNjb3VudCksCiAgICAgICAgICAgICAgICBleGNoYW5nZV9yYXRlOiAgICAgICAgMS9leGNoYW5nZV9yYXRlLAogICAgICAgICAgICAgICAgY3VycmVuY3k6ICAgICAgICAgICAgIG5ldyBDdXJyZW5jeU1vZGVsKGN1cnJlbmN5KSwKICAgICAgICAgICAgICAgIGFtb3VudDogICAgICAgICAgICAgICBrZW5kby5wYXJzZUZsb2F0KHRoaXMubW9udGhseVJldHVybi5hbW91bnRQYWlkKSAqICgtMSksIC8vY3IKICAgICAgICAgICAgfSkpCiAgICAgICAgICAgIHRoaXMubW9udGhseUpvdXJuYWwuZm9yRWFjaChpID0+IHsKICAgICAgICAgICAgICAgIGpvdXJuYWxzLnB1c2goCiAgICAgICAgICAgICAgICAgICAgbmV3IEpvdXJuYWxFbnRyeU1vZGVsKHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgICAgICAgIGkuYWNjb3VudC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiAgICAgICAgICAgICAgbmV3IEFjY291bnRNb2RlbChpLmFjY291bnQpLAogICAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZV9yYXRlOiAgICAgICAgMS9pLmV4Y2hhbmdlX3JhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiAgICAgICAgICAgICBuZXcgQ3VycmVuY3lNb2RlbChpLmN1cnJlbmN5KSwKICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAgICAgICAgICAgICAgIGkuYW1vdW50LCAvLyBkciAmIGNyCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGpvdXJuYWxfID0gKG5ldyBKb3VybmFsTW9kZWwoewogICAgICAgICAgICAgICAgbnVtYmVyOiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb250aGx5UmV0dXJuLm51bWJlciwKICAgICAgICAgICAgICAgIGpvdXJuYWxfZGF0ZTogICAgICAgICAgICAgICAgIEhlbHBlci50b0lTT0RhdGUobmV3IERhdGUoKSksCiAgICAgICAgICAgICAgICBtb250aF9vZjogICAgICAgICAgICAgICAgICAgICBIZWxwZXIudG9JU09EYXRlKG5ldyBEYXRlKHRoaXMubW9udGhseVJldHVybi5tb250aE9mKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCA3KSksLy8nMjAyMS0wMi0wMScsCiAgICAgICAgICAgICAgICBqb3VybmFsX3R5cGU6ICAgICAgICAgICAgICAgICBFbnRpdHlUeXBlLkFVVE9fSk9VUk5BTCwKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uX3R5cGU6ICAgICAgICAgICAgICdNb250aGx5IFJldHVybicsCiAgICAgICAgICAgICAgICByZWZlcnJhbF90cmFuc2FjdGlvbl91dWlkOiAgICB0aGlzLm1vbnRobHlSZXR1cm4uaWQsCiAgICAgICAgICAgICAgICBqb3VybmFsX2VudHJpZXM6ICAgICAgICAgICAgICBqb3VybmFscywKICAgICAgICAgICAgfSkpCiAgICAgICAgICAgIGlmICh0aGlzLm1vbnRobHkuYW1vdW50VG9QYWlkICE9PSB0aGlzLm1vbnRobHkuYW1vdW50KSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCdQbGVhc2UgbWFrZSBzdXJlIGFtb3VudCBwYWlkIHRoZSBzYW1lIGFtb3VudCB0byBwYWlkJykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLmRhdGUsCiAgICAgICAgICAgICAgICBhbW91bnRQYWlkOiB0aGlzLm1vbnRobHkuYW1vdW50LAogICAgICAgICAgICAgICAgYW1vdW50VG9QYWlkOiB0aGlzLm1vbnRobHkuYW1vdW50VG9QYWlkLAogICAgICAgICAgICAgICAgbW9udGhPZjogdGhpcy5tb250aGx5UmV0dXJuLm1vbnRoT2YsCiAgICAgICAgICAgICAgICBzdWJtaXNzaW9uSWQ6IHRoaXMubW9udGhseVJldHVybi5hYmJyICsgJy0nICsgdGhpcy5tb250aGx5UmV0dXJuLm51bWJlciwKICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogdGhpcy5tb250aGx5LnJlZmVyZW5jZSwKICAgICAgICAgICAgICAgIG1ldGhvZDogdGhpcy5tb250aGx5Lm1ldGhvZCwKICAgICAgICAgICAgICAgIG5vdGU6IHRoaXMubW9udGhseS5ub3RlLAogICAgICAgICAgICAgICAgam91cm5hbDogam91cm5hbF8sCiAgICAgICAgICAgICAgICBtb250aGx5UmV0dXJuSWQ6IHRoaXMubW9udGhseS5pZAogICAgICAgICAgICB9CiAgICAgICAgICAgIGF3YWl0IG1vbnRobHlSZXR1cm5IYW5kbGVyLmNyZWF0ZVRheFBheW1lbnQoZGF0YSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcywgJ25ldyB0YXggcGF5bWVudCcpCiAgICAgICAgICAgICAgICB0aGlzLm1vbnRobHlSZXR1cm4uc3RhdHVzID0ge2lkOiAzLCBuYW1lOiAnUGFpZCd9CiAgICAgICAgICAgICAgICBhd2FpdCBtb250aGx5UmV0dXJuSGFuZGxlci5jcmVhdGUodGhpcy5tb250aGx5UmV0dXJuKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcywgJ3BhaWQnKQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZVBheW1lbnQoKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb25NYWtlUGF5bWVudChpdGVtKSB7CiAgICAgICAgICAgIHRoaXMubW9udGhseVJldHVybiA9IGl0ZW0KICAgICAgICAgICAgdGhpcy5tb250aGx5LmFtb3VudFRvUGFpZCA9IGtlbmRvLnRvU3RyaW5nKGl0ZW0uYW1vdW50UGFpZCwgJ24yJykKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGl0ZW0sICdpdGVtMjE0JykKICAgICAgICAgICAgdGhpcy5vbmxvYWRTYWxlKGl0ZW0uaWQpCiAgICAgICAgICAgIHRoaXMub25sb2FkUHVyY2hhc2UoaXRlbS5pZCkKICAgICAgICAgICAgdGhpcy5vbmxvYWRXaHQoaXRlbS5pZCkKICAgICAgICAgICAgdGhpcy5sb2FkUGF5bWVudE9wdGlvbigpCiAgICAgICAgICAgIHRoaXMub25sb2FkTW9udGhseUpvdXJuYWwoKQogICAgICAgICAgICB0aGlzLmRpYWxvZ1AgPSB0cnVlCiAgICAgICAgfSwKICAgICAgICBwYWdlQ2hhbmdlSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGFsZXJ0KCJjaGFuZ2UiLCBldmVudCk7CiAgICAgICAgfSwKICAgICAgICBkYXRlRm9ybWF0KGRhdGFJdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShkYXRhSXRlbS5lZGl0RGF0ZSksIGAyYCkKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9ubG9hZFNhbGUoaWQpIHsKICAgICAgICAgICAgYXdhaXQgc2FsZUhhbmRsZXIuZ2V0QnlNcklkKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNhbGVzID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25sb2FkUHVyY2hhc2UoaWQpIHsKICAgICAgICAgICAgYXdhaXQgcHVyY2hhc2VIYW5kbGVyLmdldEJ5TXJJZChpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5wdXJjaGFzZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbmxvYWRTYWxhcnkoaWQpIHsKICAgICAgICAgICAgYXdhaXQgc2FsYXJ5SGFuZGxlci5nZXRCeU1ySWQoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2FsYXJpZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbmxvYWRXaHQoaWQpIHsKICAgICAgICAgICAgYXdhaXQgIHdpdGhob2xkaW5nVGF4SGFuZGxlci5nZXRCeU1ySWQoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMud2h0cyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICBhc3luYyBsb2FkUGF5bWVudE9wdGlvbigpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXltZW50T3B0aW9ucyA9IFtdCiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE9wdGlvbkhhbmRsZXIubGlzdCgnP29wdGlvblR5cGU9JyArIE9QVElPTl9UWVBFKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXltZW50T3B0aW9ucyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDMwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9ubG9hZE1vbnRobHlSZXR1cm4oKSB7CiAgICAgICAgICAgIHRoaXMuY29tcGVsZXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgYXdhaXQgbW9udGhseVJldHVybkhhbmRsZXIuZ2V0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm1vbnRobHlSZXR1cm5zID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMubnVtRHJhZnQgPSAwCiAgICAgICAgICAgICAgICB0aGlzLm51bVN1Ym1pdHRlZCA9IDAKICAgICAgICAgICAgICAgIHRoaXMubnVtUGFpZCA9IDAKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vbnRobHlSZXR1cm5zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vbnRobHlSZXR1cm5zLmZvckVhY2goaSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpLnN0YXR1cy5pZCA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1EcmFmdCArPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaS5zdGF0dXMuaWQgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubnVtU3VibWl0dGVkICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpLnN0YXR1cy5pZCA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1QYWlkICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNvbXBlbGV0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHZpZXdSZXR1cm4oZGF0YSkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiAiVmlldyBUYXggUmV0dXJuIiwKICAgICAgICAgICAgICAgIHBhdGg6ICJtb250aGx5X3JldHVybi92aWV3LyIgKyBkYXRhLmlkLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7aWQ6IGRhdGEuaWQsIG1vbnRobHlSZXR1cm46IGRhdGF9LAogICAgICAgICAgICAgICAgcXVlcnk6IHt0eXBlOiAidmlldyJ9LAogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGVkaXRSZXR1cm4oZGF0YSkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiAiTmV3IFRheCBSZXR1cm4iLAogICAgICAgICAgICAgICAgcGF0aDogIm5ld190YXhfcmV0dXJuIiwKICAgICAgICAgICAgICAgIHBhcmFtczoge2lkOiBkYXRhLmlkLCBtb250aGx5UmV0dXJuOiBkYXRhfSwKICAgICAgICAgICAgICAgIHF1ZXJ5OiB7dHlwZTogImVkaXQifSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBudW1iZXJGb3JtYXQodmFsdWUpIHsKICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMuc2FsZUZvcm1Db250ZW50LmRlY2ltYWwsJ25pbW9sJykKICAgICAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKHZhbHVlLCBgbjJgKQogICAgICAgIH0sCiAgICB9LAogICAgY29tcHV0ZWQ6IHt9LAogICAgYWN0aXZhdGVkKCkgewogICAgICAgIHRoaXMub25sb2FkTW9udGhseVJldHVybigpOwogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5vbmxvYWRUYXhBZ2VudCgpCiAgICAgICAgYXdhaXQgdGhpcy5vbmxvYWRNb250aGx5UmV0dXJuKCk7CiAgICB9LAp9Owo="},{"version":3,"sources":["MonthlyFilling.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MonthlyFilling.vue","sourceRoot":"src/views/compliance/monthly_tax","sourcesContent":["<template>\n    <v-row>\n        <v-col cols=\"12\" sm=\"12\" class=\"py-0\">\n            <!-- loading -->\n            <LoadingMe\n                :isLoading=\"compeletLoading\"\n                :fullPage=\"false\"\n                :myLoading=\"true\"\n                type=\"loading\"\n            />\n            <v-row>\n                <v-col class=\"pt-0\" sm=\"3\" cols=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border \"\n                        color=\"grayBg\"\n                        height=\"90px\"\n                    >\n                        <h3 class=\"primary--text font_26 mb-5 text-right \">0</h3>\n                        <p class=\"mb-0 text-uppercase  text-right\">\n                            {{ $t(\"total_filled\") }}\n                        </p>\n                    </v-card>\n                </v-col>\n                <v-col class=\"pt-0\" sm=\"3\" cols=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border\"\n                        color=\"grayBg\"\n                        height=\"90px\"\n                    >\n                        <h3 class=\"primary--text font_26 mb-5 text-right \">{{ numDraft }}</h3>\n                        <p class=\"mb-0 text-uppercase  text-right\">{{ $t(\"draft\") }}</p>\n                    </v-card>\n                </v-col>\n                <v-col class=\"pt-0\" sm=\"3\" cols=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border\"\n                        color=\"grayBg\"\n                        height=\"90px\"\n                    >\n                        <h3 class=\"primary--text font_26 mb-5 text-right \">{{ numSubmitted }}</h3>\n                        <p class=\"mb-0 text-uppercase  text-right\">{{ $t(\"submitted\") }}</p>\n                    </v-card>\n                </v-col>\n                <v-col class=\"pt-0\" sm=\"3\" cols=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border\"\n                        color=\"grayBg\"\n                        height=\"90px\"\n                    >\n                        <h3 class=\"primary--text font_26 mb-5 text-right \">{{ numPaid }}</h3>\n                        <p class=\"mb-0 text-uppercase  text-right\">{{ $t(\"paid\") }}</p>\n                    </v-card>\n                </v-col>\n            </v-row>\n\n            <v-row class=\"\">\n                <v-col sm=\"2\" cols=\"12\" class=\"pb-0\">\n                    <p class=\"mb-0 mt-2\">{{ $t(\"search_by_month\") }}</p>\n                </v-col>\n                <v-col sm=\"3\" cols=\"12\" class=\"pb-0 px-0\">\n                    <month-picker\n                        :initialMonth=\"month\"\n                        @emitMonth=\"month = $event\"\n                        top=\"mt-0\"\n                    />\n                </v-col>\n                <v-col sm=\"1\" cols=\"1\" class=\"\">\n                    <v-btn class=\"white--text text-capitalize\" color=\"primary\">\n                       {{$t('view')}}\n                    </v-btn>\n                </v-col>\n                <v-col sm=\"3\" cols=\"3\" class=\"pb-0\">\n                    <v-btn @click=\"onNewReturn\" class=\"white--text text-capitalize\" color=\"primary\">\n                        {{ $t(\"new_return\") }}\n                    </v-btn>\n                </v-col>\n            </v-row>\n        </v-col>\n        <v-col cols=\"12\" sm=\"12\" class=\"pb-0\">\n            <template>\n                <v-simple-table class=\"attachment_table\">\n                    <template v-slot:default>\n                        <thead>\n                        <tr>\n                            <th>{{ $t(\"id\") }}</th>\n                            <th>{{ $t(\"date\") }}</th>\n                            <th>{{ $t(\"month_of\") }}</th>\n                            <th>{{ $t(\"tax_amount\") }}</th>\n                            <th>{{ $t(\"progress\") }}</th>\n                            <th>{{ $t(\"status\") }}</th>\n                            <th>{{ $t(\"action\") }}</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr v-for=\"mr in monthlyReturns\" v-bind:key=\"mr.id\">\n                            <td>\n                                <router-link :to=\"'monthly_return/view/'+ mr.id + '?type=view'\" class=\"lightBlue1\">\n                                    {{ mr.number }}\n                                </router-link>\n                            </td>\n                            <td>{{ mr.editDate }}</td>\n                            <td>{{ mr.monthOf }}</td>\n                            <td class=\"text-right\">{{ numberFormat(mr.amountPaid) }}</td>\n                            <td class=\"text-center\">{{ mr.progress }}</td>\n                            <td>{{ mr.status.name }}</td>\n                            <td class=\"text-center\">\n\n                                <v-btn v-if=\"mr.status.id === 2\" @click=\"onMakePayment(mr)\" class=\"btn_edit_setting\">\n                                    <v-icon class=\"white--text\" size=\"14\">mdi-pen</v-icon>\n                                    <span class=\"capitalize ml-1 white--text font_14\">{{$t('make_payment')}}</span>\n                                </v-btn>\n                                <v-btn v-if=\"mr.progress === 'Finalize' && mr.status.id === 1\" @click=\"onSubmit(mr)\" class=\"mr-1 btn_edit_setting\">\n                                    <v-icon class=\"white--text\" size=\"14\">mdi-pen</v-icon>\n                                    <span class=\"capitalize ml-1 white--text font_14\">{{$t('submit')}}</span>\n                                </v-btn>\n                                <v-btn v-if=\"mr.status.id === 1\" @click=\"editReturn(mr)\" class=\"btn_edit_setting\">\n                                    <v-icon class=\"white--text\" size=\"14\">mdi-pen</v-icon>\n                                    <span class=\"capitalize ml-1 white--text font_14\">{{$t('edit')}}</span>\n                                </v-btn>\n                                <v-btn v-if=\"mr.status.id === 3\" @click=\"viewReturn(mr)\" class=\"btn_edit_setting\">\n<!--                                    <v-icon class=\"white&#45;&#45;text\" size=\"14\">mdi-pen</v-icon>-->\n                                    <span class=\"capitalize ml-1 white--text font_14\">{{$t('view')}}</span>\n                                </v-btn>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </template>\n                </v-simple-table>\n            </template>\n        </v-col>\n        <v-col cols=\"12\">\n            <v-dialog v-model=\"dialogM\" max-width=\"500px\">\n                <v-card>\n                    <LoadingMe\n                        :isLoading=\"showLoading1\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"\n                        type=\"loading\"\n                    />\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"summit_monthly_filling\") }}</v-card-title>\n                        <v-icon  @click=\"onCloseSubmit\">close</v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_content\">\n                        <v-row>\n                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                <label class=\"label\">{{ $t(\"date\") }}</label>\n                                <date-picker :initialDate=\"monthlyReturn.dateSubmit\" @emitDate=\"monthlyReturn.dateSubmit = $event\"/>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                <label class=\"label\">{{ $t(\"number\") }}</label>\n                                <v-text-field v-model=\"monthlyReturn.numSubmit\" class=\"mt-1\" outlined/>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                <label class=\"label\">{{ $t(\"method\") }}</label>\n                                <v-select v-model=\"monthlyReturn.methodSubmit\" :items=\"method\" item-text=\"name\" item-value=\"id\" class=\"mt-1\" outlined/>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                <label class=\"label\">{{ $t(\"note\") }}</label>\n                                <v-text-field v-model=\"monthlyReturn.noteSubmit\" class=\"mt-1\" outlined/>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                <label class=\"label\">{{ $t(\"tax_agents\") }}</label>\n                                <v-select v-model=\"monthlyReturn.taxAgentSubmit\" :items=\"taxAgents\" item-value=\"id\" item-text=\"name\" class=\"mt-1\" outlined/>\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                    <v-divider/>\n                    <v-card-actions class=\"modal_footer\">\n                        <v-btn @click=\"onCloseSubmit\" class=\"btn_cancel\">{{ $t(\"cancel\") }}</v-btn>\n                        <v-btn @click=\"onCreateSubmit\" class=\"btn_save_close\"\n                        >{{ $t(\"save_close\") }}\n                        </v-btn>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n            <v-dialog v-model=\"dialogP\" max-width=\"560px\">\n                <v-card>\n                    <LoadingMe\n                        :isLoading=\"showLoading\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"\n                        type=\"loading\"\n                    />\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"tax_payment\") }}</v-card-title>\n                        <v-icon  @click=\"dialogP = false\">close</v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_content\" >\n                        <v-row>\n                            <v-col sm=\"6\" cols=\"12\" class=\"py-0 mt-2\">\n                                <label class=\"label\">{{ $t(\"date\") }}</label>\n                                <date-picker :initialDate=\"date\" @emitDate=\"date = $event\"/>\n                                <label class=\"label\">{{ $t(\"reference\") }}</label>\n                                <v-text-field v-model=\"monthly.reference\" class=\"mt-1\" outlined/>\n                                <label class=\"label\">{{ $t(\"amount_to_be_paid\") }}</label>\n                                <v-text-field class=\"mt-1\" disabled v-model=\"monthly.amountToPaid\" outlined/>\n                                <label class=\"label\">{{ $t(\"method\") }}</label>\n                                <v-select :items=\"paymentOptions\" v-model=\"monthly.method\" :item-text=\"item => `${item.code} - ${item.name}`\" item-value=\"id\" class=\"mt-1\" return-object outlined/>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"12\" class=\"py-0 mt-2\">\n                                <label class=\"label mb-0\">{{ $t(\"number\") }}</label>\n                                <v-text-field\n                                    class=\"mt-1\"\n                                    outlined\n                                    :rules=\"[(v) => !!v || 'Number is required']\"\n                                    required\n                                />\n\n                                <label class=\"label\">{{ $t(\"submission_id\") }}</label>\n                                <v-row class=\"pt-1 pb-0\">\n                                    <v-col sm=\"3\" cols=\"3\" class=\"py-0 pr-0\">\n                                        <div class=\"code_text text-uppercase\">\n                                            {{ monthlyReturn.abbr }}\n                                        </div>\n                                    </v-col>\n                                    <v-col sm=\"9\" cols=\"8\" class=\"py-0 pl-0 pr-1\">\n                                        <v-text-field\n                                            v-model=\"monthlyReturn.number\"\n                                            disabled\n                                            class=\"custom-border \"\n                                            outlined\n                                            :rules=\"[(v) => !!v || 'Number is required']\"\n                                            required\n                                        />\n                                    </v-col>\n                                </v-row>\n                                <label class=\"label\">{{ $t(\"amount_paid\") }}</label>\n                                <v-text-field class=\"mt-1\" v-model=\"monthly.amount\" outlined/>\n                                <label class=\"label\">{{ $t(\"note\") }}</label>\n                                <v-text-field class=\"mt-1\" outlined/>\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                    <v-divider/>\n                    <v-card-actions class=\"modal_footer\">\n                        <v-btn @click=\"onClosePayment\" class=\"btn_cancel\">{{ $t(\"cancel\") }}</v-btn>\n                        <v-btn @click=\"onPayment\" class=\"btn_save_close\"\n                        >{{ $t(\"save_close\") }}\n                        </v-btn>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\nimport LoadingMe from \"@/components/Loading\";\nimport MonthPicker from \"@/components/custom_templates/MonthPicker\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport kendo from \"@progress/kendo-ui\";\nimport MonthlyReturn from \"@/scripts/compliance/model/MonthlyReturn\";\nimport {AccountModel, CurrencyModel, JournalEntryModel, JournalModel} from \"@/scripts/model/AppModels\";\nimport Helper from \"@/helper\";\n// import LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\nconst { EntityType, } = require(\"@/scripts/default_setup/Collections\");\nconst monthlyReturnHandler = require(\"@/scripts/compliance/handler/monthlyReturnHandler\");\nconst saleHandler = require(\"@/scripts/compliance/handler/saleHandler\")\nconst purchaseHandler = require(\"@/scripts/compliance/handler/purchaseHandler\")\nconst withholdingTaxHandler = require(\"@/scripts/compliance/handler/withholdingTaxHandler\")\nconst salaryHandler = require(\"@/scripts/compliance/handler/salaryHandler\")\nconst monthlyReturn = new MonthlyReturn({})\nconst taxAgentHandler = require(\"@/scripts/compliance/handler/taxAgentHandler\")\nconst paymentOptionHandler = require(\"@/scripts/paymentOptionHandler\")\nconst OPTION_TYPE = 'Customer'\nexport default {\n    name: \"\",\n    components: {\n        LoadingMe,\n        \"month-picker\": MonthPicker,\n        \"date-picker\": DatePickerComponent,\n    },\n    data: () => ({\n        month: \"2021-04\",\n        compeletLoading: false,\n        showLoading: false,\n        showLoading1: false,\n        monthlyReturns: [],\n        monthlyReturn: monthlyReturn,\n        dialogM: false,\n        dialogP: false,\n        date: \"\",\n        monthly: {},\n        submitFile: {},\n        method: [{id: 1, name: 'GDT Desktop Application'}],\n        taxAgents: [],\n        numDraft: 0,\n        numSubmitted: 0,\n        numPaid: 0,\n\n        sales: [],\n        purchases: [],\n        salaries: [],\n        whts: [],\n        paymentOptions: [],\n        monthlyJournal: [],\n    }),\n    methods: {\n        onNewReturn() {\n            this.$router.push({\n                name: 'New Tax Return',\n                path: 'new_tax_return',\n                params: {monthlyReturns: this.monthlyReturns}\n            })\n        },\n        onloadTaxAgent() {\n            taxAgentHandler.get().then(res => {\n                this.taxAgents = res.data.data\n            })\n        },\n        onCreateSubmit() {\n            this.showLoading1 = true\n            this.monthlyReturn.status = {id: 2, name: 'Submitted'}\n            monthlyReturnHandler.create(this.monthlyReturn).then(res => {\n                window.console.log(res, 'submit')\n                this.showLoading1 = false\n                this.onCloseSubmit()\n            })\n        },\n        onSubmit(item) {\n            this.monthlyReturn = item\n            this.dialogM = true\n        },\n        onCloseSubmit() {\n            this.monthlyReturn = {}\n            this.onloadMonthlyReturn()\n            this.dialogM = false\n        },\n        onClosePayment() {\n            this.monthly = {}\n            this.monthlyReturn = {}\n            this.date = ''\n            this.dialogP = false\n        },\n        async onloadMonthlyJournal() {\n            await monthlyReturnHandler.getJournal().then(res => {\n                this.monthlyJournal = res.data.data\n            })\n        },\n        async onPayment() {\n            this.showLoading = true\n            let journals = [], journal_ = {}, currency = {}, exchange_rate = 1\n            currency = this.monthlyJournal[0].currency\n            exchange_rate = this.monthlyJournal[0].exchange_rate\n            const account = this.monthly.method.account\n            if (Object.keys(account).length === 0) {\n                this.$snotify.error(`This payment method doesn't have account`)\n                return\n            }\n            journals.push( new JournalEntryModel({\n                description:          this.monthly.method.account.name,\n                account:              new AccountModel(this.monthly.method.account),\n                exchange_rate:        1/exchange_rate,\n                currency:             new CurrencyModel(currency),\n                amount:               kendo.parseFloat(this.monthlyReturn.amountPaid) * (-1), //cr\n            }))\n            this.monthlyJournal.forEach(i => {\n                journals.push(\n                    new JournalEntryModel({\n                        description:          i.account.name,\n                        account:              new AccountModel(i.account),\n                        exchange_rate:        1/i.exchange_rate,\n                        currency:             new CurrencyModel(i.currency),\n                        amount:               i.amount, // dr & cr\n                    }),\n                )\n            })\n            journal_ = (new JournalModel({\n                number:                       this.monthlyReturn.number,\n                journal_date:                 Helper.toISODate(new Date()),\n                month_of:                     Helper.toISODate(new Date(this.monthlyReturn.monthOf).toISOString().substr(0, 7)),//'2021-02-01',\n                journal_type:                 EntityType.AUTO_JOURNAL,\n                transaction_type:             'Monthly Return',\n                referral_transaction_uuid:    this.monthlyReturn.id,\n                journal_entries:              journals,\n            }))\n            if (this.monthly.amountToPaid !== this.monthly.amount) {\n                this.$snotify.error('Please make sure amount paid the same amount to paid')\n                return\n            }\n            const data = {\n                date: this.date,\n                amountPaid: this.monthly.amount,\n                amountToPaid: this.monthly.amountToPaid,\n                monthOf: this.monthlyReturn.monthOf,\n                submissionId: this.monthlyReturn.abbr + '-' + this.monthlyReturn.number,\n                reference: this.monthly.reference,\n                method: this.monthly.method,\n                note: this.monthly.note,\n                journal: journal_,\n                monthlyReturnId: this.monthly.id\n            }\n            await monthlyReturnHandler.createTaxPayment(data).then(async res => {\n                window.console.log(res, 'new tax payment')\n                this.monthlyReturn.status = {id: 3, name: 'Paid'}\n                await monthlyReturnHandler.create(this.monthlyReturn).then(res => {\n                    window.console.log(res, 'paid')\n                    this.showLoading = false\n                })\n                this.onClosePayment()\n            })\n        },\n        onMakePayment(item) {\n            this.monthlyReturn = item\n            this.monthly.amountToPaid = kendo.toString(item.amountPaid, 'n2')\n            window.console.log(item, 'item214')\n            this.onloadSale(item.id)\n            this.onloadPurchase(item.id)\n            this.onloadWht(item.id)\n            this.loadPaymentOption()\n            this.onloadMonthlyJournal()\n            this.dialogP = true\n        },\n        pageChangeHandler: function (event) {\n            alert(\"change\", event);\n        },\n        dateFormat(dataItem) {\n            return kendo.toString(new Date(dataItem.editDate), `2`)\n        },\n        async onloadSale(id) {\n            await saleHandler.getByMrId(id).then(res => {\n                this.sales = res.data.data\n            })\n        },\n        async onloadPurchase(id) {\n            await purchaseHandler.getByMrId(id).then(res => {\n                this.purchases = res.data.data\n            })\n        },\n        async onloadSalary(id) {\n            await salaryHandler.getByMrId(id).then(res => {\n                this.salaries = res.data.data\n            })\n        },\n        async onloadWht(id) {\n            await  withholdingTaxHandler.getByMrId(id).then(res => {\n                this.whts = res.data.data\n            })\n        },\n\n        async loadPaymentOption() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.paymentOptions = []\n                    paymentOptionHandler.list('?optionType=' + OPTION_TYPE).then(res => {\n                        this.showLoading = true\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            this.paymentOptions = res.data.data\n                        }\n                    }).catch()\n                    {\n                        this.showLoading = false\n                    }\n                }, 300)\n            })\n        },\n        async onloadMonthlyReturn() {\n            this.compeletLoading = true;\n            await monthlyReturnHandler.get().then((res) => {\n                this.monthlyReturns = res.data.data;\n                this.numDraft = 0\n                this.numSubmitted = 0\n                this.numPaid = 0\n                if (this.monthlyReturns.length > 0) {\n                    this.monthlyReturns.forEach(i => {\n                        if (i.status.id === 1) {\n                            this.numDraft += 1\n                        } else if (i.status.id === 2) {\n                            this.numSubmitted += 1\n                        } else if (i.status.id === 3) {\n                            this.numPaid += 1\n                        }\n                    })\n                }\n                this.compeletLoading = false;\n            });\n        },\n        viewReturn(data) {\n            this.$router.push({\n                name: \"View Tax Return\",\n                path: \"monthly_return/view/\" + data.id,\n                params: {id: data.id, monthlyReturn: data},\n                query: {type: \"view\"},\n            });\n        },\n        editReturn(data) {\n            this.$router.push({\n                name: \"New Tax Return\",\n                path: \"new_tax_return\",\n                params: {id: data.id, monthlyReturn: data},\n                query: {type: \"edit\"},\n            });\n        },\n        numberFormat(value) {\n            // window.console.log(this.saleFormContent.decimal,'nimol')\n            return kendo.toString(value, `n2`)\n        },\n    },\n    computed: {},\n    activated() {\n        this.onloadMonthlyReturn();\n    },\n    async mounted() {\n        await this.onloadTaxAgent()\n        await this.onloadMonthlyReturn();\n    },\n};\n</script>\n<style scoped></style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/budgets/BudgetPerformance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/budgets/BudgetPerformance.vue","mtime":1642478961301},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQga2VuZG8gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXVpJzsKICAgIGltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJzsKICAgIGltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiOwogICAgLyogTW9kZWxzICovCiAgICBpbXBvcnQgQWNjb3VudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BY2NvdW50IjsKICAgIGltcG9ydCBGaXNjYWxEYXRlTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0Zpc2NhbERhdGUiOwogICAgaW1wb3J0IEJ1ZGdldE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9CdWRnZXQiOwogICAgaW1wb3J0IEJ1ZGdldFBlcmZvcm1hbmNlTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0J1ZGdldFBlcmZvcm1hbmNlIjsKICAgIGltcG9ydCBTZWdtZW50TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1NlZ21lbnQiOwogICAgCiAgICAvKiBUcmVlTGlzdCAqLwogICAgaW1wb3J0IHsgVHJlZUxpc3QgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdHJlZWxpc3QtdnVlLXdyYXBwZXInOwogICAgaW1wb3J0IHsgVHJlZUxpc3REYXRhU291cmNlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWRhdGFzb3VyY2UtdnVlLXdyYXBwZXInOwogICAgCiAgICAvKiBWdWV4ICovCiAgICBpbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwoKICAgIGNvbnN0IGluY29tZVN0YXRlbWVudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaGFuZGxlci9hY2NvdW50aW5nL2luY29tZVN0YXRlbWVudEhhbmRsZXIiKTsKICAgIGNvbnN0IE9yZGVyTnVtYmVyUEwgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9PcmRlck51bWJlclBMLmpzIik7CiAgICBjb25zdCBOdW1iZXJJbldvcmQgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9OdW1iZXJJbldvcmQuanMiKTsKICAgIGNvbnN0IEFjY291bnRUeXBlQ29kZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0FjY291bnRUeXBlQ29kZS5qcyIpOwoKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBjb21wb25lbnRzOnsKICAgICAgICAgICAgIkxvYWRpbmdNZSI6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL0xvYWRpbmcnKSwKICAgICAgICAgICAgImFwcC1maXNjYWwtZGF0ZS1kcm9wZG93bmxpc3QiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9rZW5kb190ZW1wbGF0ZXMvRmlzY2FsRGF0ZURyb3BEb3duTGlzdCcpLAogICAgICAgICAgICAiYXBwLW1vbnRoLW9mLXBpY2tlciI6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9Nb250aE9mUGlja2VyJyksCiAgICAgICAgICAgICdhcHAtcmVwb3J0aW5nLWxhbmd1YWdlJzogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL1JlcG9ydGluZ0xhbmd1YWdlRHJvcERvd25MaXN0JyksCiAgICAgICAgICAgICd0cmVlbGlzdCc6IFRyZWVMaXN0LAogICAgICAgICAgICAndHJlZWxpc3RkYXRhc291cmNlJzogVHJlZUxpc3REYXRhU291cmNlLAogICAgICAgIH0sCiAgICAgICAgZGF0YTogKCkgPT4gKHsKICAgICAgICAgICAgbW9udGhPZiA6ICcnLAogICAgICAgICAgICBidWRnZXQgOiBuZXcgQnVkZ2V0TW9kZWwoKSwKICAgICAgICAgICAgYnVkZ2V0TGlzdCA6IFtdLAogICAgICAgICAgICBzdGF0ZW1lbnRzIDogW10sCiAgICAgICAgICAgIHN0YXRlbWVudExpc3QgOiBbXSwKICAgICAgICAgICAgZmlzY2FsRGF0ZTogbmV3IEZpc2NhbERhdGVNb2RlbCgpLAogICAgICAgICAgICBIZWxwZXIgOiBIZWxwZXIsCiAgICAgICAgICAgIC8qIEtlbmRvICovCiAgICAgICAgICAgIGNvbHVtbnMgOiBbXSwKICAgICAgICAgICAgc29ydERlZmluaXRpb24gOiBbCiAgICAgICAgICAgICAgICB7IGZpZWxkOiAib3JkZXIiLCBkaXI6ICJhc2MiIH0sCiAgICAgICAgICAgICAgICB7IGZpZWxkOiAibnVtYmVyIiwgZGlyOiAiYXNjIiB9LAogICAgICAgICAgICBdLAoJCQltb2RlbDogewogICAgICAgICAgICAgICAgaWQ6ICJ1dWlkIiwKICAgICAgICAgICAgICAgIGV4cGFuZGVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFJlcG9ydGluZyBMYW5ndWFnZQoJCQlyZXBvcnRpbmdMYW5ndWFnZTogJ2VuZ2xpc2gnLAoJCQlmaWVsZE5hbWUgOiAnbmFtZScsCiAgICAgICAgICAgIC8vIExvYWRpbmdNZQogICAgICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIGxvYWRpbmdCdWRnZXQ6IGZhbHNlLAogICAgICAgIH0pLAogICAgICAgIG1ldGhvZHM6ewogICAgICAgICAgICBmb3JtYXREYXRlVGltZSh2YWx1ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHZhbHVlKSwgYGRkLU1NTS15eXl5IGg6bW0gdHRgKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25GaXNjYWxEYXRlQ2hhbmdlcygpewogICAgICAgICAgICAgICAgdGhpcy5tb250aE9mID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLmJ1ZGdldCA9IG5ldyBCdWRnZXRNb2RlbCgpOwoKICAgICAgICAgICAgICAgIGlmKHRoaXMuZmlzY2FsRGF0ZSAhPT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgLyogTG9hZCBCdWRnZXQgKi8KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRCdWRnZXQoKTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uTW9udGhPZkNoYW5nZXMgKCkgewogICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZW1lbnRMaXN0Lmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgIC8qIEJpbmQgRGF0YSAqLwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgbG9hZEJ1ZGdldCgpewogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQnVkZ2V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGxldCBidWRnZXRzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2J1ZGdldHMvZ2V0TGlzdCcpLAogICAgICAgICAgICAgICAgICAgIHNlZ21lbnRzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlZ21lbnRzL2dldExpc3QnKTsKCiAgICAgICAgICAgICAgICBsZXQgYnVkZ2V0TGlzdCA9IFtdOwogICAgICAgICAgICAgICAgYnVkZ2V0cy5mb3JFYWNoKHZhbHVlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS5maXNjYWxfeWVhci51dWlkID09PSB0aGlzLmZpc2NhbERhdGUudXVpZCAKICAgICAgICAgICAgICAgICAgICAgICAgJiYgdmFsdWUuc2VnbWVudF91dWlkICE9PSAnJyAKICAgICAgICAgICAgICAgICAgICAgICAgJiYgdmFsdWUuYnVkZ2V0X3R5cGUgPT09ICdzdGFuZGFyZCcpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYnVkZ2V0ID0gbmV3IEJ1ZGdldE1vZGVsKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnVkZ2V0LnNlZ21lbnQgPSBuZXcgU2VnbWVudE1vZGVsKHNlZ21lbnRzLmZpbmQoaSA9PiBpLmlkID09PSB2YWx1ZS5zZWdtZW50X3V1aWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnVkZ2V0TGlzdC5wdXNoKGJ1ZGdldCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmJ1ZGdldExpc3QgPSBidWRnZXRMaXN0OwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQnVkZ2V0ID0gZmFsc2U7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qIFNlYXJjaCAqLwogICAgICAgICAgICBzZWFyY2ggKCkgewogICAgICAgICAgICAgICAgaWYodGhpcy5idWRnZXQudXVpZCAhPT0gJycpewogICAgICAgICAgICAgICAgICAgIGxldCBzZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRoaXMuZmlzY2FsRGF0ZS5zdGFydF9kYXRlKSwgJ3l5eXktTU0tZGQnKSArICdUMDA6MDA6MDAuMDAwWicsCiAgICAgICAgICAgICAgICAgICAgICAgIGVkYXRlID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhpcy5maXNjYWxEYXRlLmVuZF9kYXRlKSwgJ3l5eXktTU0tZGQnKSArICdUMjM6NTk6NTkuOTk5Wic7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRW1wdHkgc3RhdGVtZW50RFMKICAgICAgICAgICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLnN0YXRlbWVudERTLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgICAgICAgICAgICAgZHMuZGF0YShbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFF1ZXJ5IEluY29tZSBTdGF0ZW1lbnQKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpbmNvbWVTdGF0ZW1lbnRIYW5kbGVyLmdldEluY29tZVN0YXRlbWVudCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X2RhdGUgCQk6IHNkYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGUgCQk6IGVkYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBfYnkgCQk6ICIxMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50X3V1aWQgICAgOiB0aGlzLmJ1ZGdldC5zZWdtZW50X3V1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlbWVudHMgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKGkxOG4udCgiZXJyb3Jfc29tZXRoaW5nX3dyb25nIikpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAvKiBBbGVydCBXYXJuaW5nICovCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS53YXJuaW5nKGkxOG4udCgicGxlYXNlX3NlbGVjdF9idWRnZXQiKSk7CiAgICAgICAgICAgICAgICB9CgkJCX0sCiAgICAgICAgICAgIGFzeW5jIGJpbmREYXRhICgpIHsKICAgICAgICAgICAgICAgIGxldCBnID0ge30sIGNoaWxkSWRzID0gW107CgogICAgICAgICAgICAgICAgLy8gTG9hZCBBY2NvdW50IExpc3QKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhY2NvdW50aW5nL2dldEFjY291bnRzJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8qIEdlbmVyYXRlIE1vbnRocyAqLwogICAgICAgICAgICAgICAgbGV0IGZpc2NhbE1vbnRocyA9IEhlbHBlci5nZW5lcmF0ZUZpc2NhbE1vbnRocyh0aGlzLmZpc2NhbERhdGUuc3RhcnRfZGF0ZSwgdGhpcy5maXNjYWxEYXRlLmVuZF9kYXRlLCAiMTIiLCAieXl5eS1NTSIpOwogICAgICAgICAgICAgICAgbGV0IG1vbnRoT2ZJbmRleCA9IGZpc2NhbE1vbnRocy5pbmRleE9mKHRoaXMubW9udGhPZik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8qIEdhdGhlcmluZyBmcm9tIGJ1ZGdldCBsaW5lcyAqLwogICAgICAgICAgICAgICAgdGhpcy5idWRnZXQubGluZXMuZm9yRWFjaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLyogR2V0IEFjY291bnQgSW5mb3JtYXRpb24gKi8KICAgICAgICAgICAgICAgICAgICBsZXQgYWNjb3VudCA9IHRoaXMuYWNjb3VudHMuZmluZChpdGVtID0+IGl0ZW0udXVpZCA9PT0gdmFsdWUuYWNjb3VudF91dWlkKTsKICAgICAgICAgICAgICAgICAgICBpZihhY2NvdW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgLyogT3JkZXIgKi8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVyID0gYWNjb3VudC50eXBlX2NvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFjY291bnQudHlwZV9jb2RlID09PSBBY2NvdW50VHlwZUNvZGUuT1RIRVJfUkVWRU5VRSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlciA9IE9yZGVyTnVtYmVyUExbYWNjb3VudC50eXBlX2NvZGVdOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvKiBHUk9VUElORyAqLwogICAgICAgICAgICAgICAgICAgICAgICAvKiBUb3AgTGV2ZWwgQWNjb3VudCBUeXBlICovCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFnW2FjY291bnQudHlwZV9jb2RlXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2FjY291bnQudHlwZV9jb2RlXSA9IG5ldyBCdWRnZXRQZXJmb3JtYW5jZU1vZGVsKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkIDogYWNjb3VudC50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyIDogYWNjb3VudC50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IGFjY291bnQuYWNjb3VudF90eXBlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxfbmFtZSA6IGFjY291bnQuYWNjb3VudF90eXBlLmxvY2FsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgOiBvcmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXJlbnQgTGV2ZWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRoaXNBY2NvdW50UGFyZW50SWQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWNjb3VudC5oYXNPd25Qcm9wZXJ0eSgicGFyZW50X2FjY291bnQiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFBhcmVudEFjY291bnQgPSBuZXcgQWNjb3VudE1vZGVsKGFjY291bnQucGFyZW50X2FjY291bnQpLCBjb3VudGVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50UGFyZW50QWNjb3VudC5udW1iZXIgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogR2V0IGFjY291bnQgYnkgdXVpZCBvciBiYW5oamlfYWNjb3VudF9udW1iZXIgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50UGFyZW50QWNjb3VudC51dWlkICE9PSAiIil7LyogR2V0IGJ5IHV1aWQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwodGhpcy5hY2NvdW50cy5maW5kKChpdGVtKSA9PiBpdGVtLnV1aWQgPT09IGN1cnJlbnRQYXJlbnRBY2NvdW50LnV1aWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvKiBHZXQgYnkgYmFuaGppX2FjY291bnRfbnVtYmVyIGJlY2F1c2UgZGVmYXVsdCBkYXRhIGhhcyBubyB1dWlkICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYXJlbnRBY2NvdW50LmJhbmhqaV9hY2NvdW50X251bWJlciAhPT0gIiIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFBhcmVudCA9IG5ldyBBY2NvdW50TW9kZWwodGhpcy5hY2NvdW50cy5maW5kKChpdGVtKSA9PiBpdGVtLmJhbmhqaV9hY2NvdW50X251bWJlciA9PT0gY3VycmVudFBhcmVudEFjY291bnQuYmFuaGppX2FjY291bnRfbnVtYmVyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNldCBUaGlzIEFjY291bnQgUGFyZW50IElkICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291bnRlciA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNBY2NvdW50UGFyZW50SWQgPSBhY2NvdW50UGFyZW50LnV1aWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGaW5kIE5leHQgUGFyZW50ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRQYXJlbnQgPSBuZXcgQWNjb3VudE1vZGVsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWNjb3VudFBhcmVudC5oYXNPd25Qcm9wZXJ0eSgicGFyZW50X2FjY291bnQiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRPZkFjY291bnRQYXJlbnQgPSBuZXcgQWNjb3VudE1vZGVsKGFjY291bnRQYXJlbnQucGFyZW50X2FjY291bnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYXJlbnRPZkFjY291bnRQYXJlbnQubnVtYmVyICE9PSAiIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYXJlbnRPZkFjY291bnRQYXJlbnQudXVpZCAhPT0gIiIpey8qIEdldCBieSB1dWlkICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFBhcmVudCA9IHRoaXMuYWNjb3VudHMuZmluZCgoaXRlbSkgPT4gaXRlbS51dWlkID09PSBwYXJlbnRPZkFjY291bnRQYXJlbnQudXVpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvKiBHZXQgYnkgYmFuaGppX2FjY291bnRfbnVtYmVyIGJlY2F1c2UgZGVmYXVsdCBkYXRhIGhhcyBubyB1dWlkICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50T2ZBY2NvdW50UGFyZW50LmJhbmhqaV9hY2NvdW50X251bWJlciAhPT0gIiIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0UGFyZW50ID0gdGhpcy5hY2NvdW50cy5maW5kKChpdGVtKSA9PiBpdGVtLmJhbmhqaV9hY2NvdW50X251bWJlciA9PT0gcGFyZW50T2ZBY2NvdW50UGFyZW50LmJhbmhqaV9hY2NvdW50X251bWJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgUGFyZW50IElkICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudElkID0gYWNjb3VudFBhcmVudC50eXBlX2NvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV4dFBhcmVudC5udW1iZXIgIT09ICIiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SWQgPSBuZXh0UGFyZW50LnV1aWQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgbmV4dCBwYXJlbnQgYWNjb3VudCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRQYXJlbnRBY2NvdW50LCBuZXh0UGFyZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IGxvb3AgdG8gZW5kICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJlbnRBY2NvdW50Lm51bWJlciA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQWRkIFBhcmVudCBMZXZlbCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudFBhcmVudC51dWlkXSA9IG5ldyBCdWRnZXRQZXJmb3JtYW5jZU1vZGVsKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA6IGFjY291bnRQYXJlbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyIDogYWNjb3VudFBhcmVudC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBhY2NvdW50UGFyZW50Lm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX25hbWUgOiBhY2NvdW50UGFyZW50LmxvY2FsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkIDogcGFyZW50SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgOiBhY2NvdW50UGFyZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlciA6IG9yZGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJbmNyZWFzZSBDb3VudGVyIEJ5IDEgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LyogRW5kIFdoaWxlIExvb3AgKi8KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2hpbGQgTGV2ZWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWdbYWNjb3VudC51dWlkXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2FjY291bnQudXVpZF0gPSBuZXcgQnVkZ2V0UGVyZm9ybWFuY2VNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA6IGFjY291bnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXIgOiBhY2NvdW50Lm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogYWNjb3VudC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX25hbWUgOiBhY2NvdW50LmxvY2FsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA6IGFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgOiBvcmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgUGFyZW50IElkIE9yIFNlbGYgUGFyZW50ICovCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY2N0S2V5ID0gYWNjb3VudC51dWlkOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzQWNjb3VudFBhcmVudElkICE9PSAiIil7LyogQ2hpbGQgTGV2ZWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC51dWlkXS5wYXJlbnRJZCA9IHRoaXNBY2NvdW50UGFyZW50SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8qIENoaWxkIEFzIFBhcmVudCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnV1aWRdLnBhcmVudElkID0gYWNjb3VudC50eXBlX2NvZGU7IC8qIFNlbGYgQXMgUGFyZW50ICovCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuYW1vdW50ICE9PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0S2V5ID0gYWNjb3VudC5udW1iZXI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNlbGYgQXMgQ2hpbGQgV2l0aCBCYWxhbmNlICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWdbYWNjb3VudC5udW1iZXJdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50Lm51bWJlcl0gPSBuZXcgQnVkZ2V0UGVyZm9ybWFuY2VNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkIDogYWNjb3VudC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXIgOiBhY2NvdW50Lm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBhY2NvdW50Lm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lIDogYWNjb3VudC5sb2NhbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SWQgOiBhY2NvdW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50IDogYWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyIDogb3JkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2hpbGQgSWQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRJZHMucHVzaChhY2N0S2V5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJldmVyc2UgTmF0dXJlICovCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYXR1cmUgPSAxOyAvKiBEZWZhdWx0IE5hdXJlIGlzIERyID0gMSAqLwogICAgICAgICAgICAgICAgICAgICAgICBpZihhY2NvdW50LmFjY291bnRfdHlwZS5uYXR1cmUudG9Mb3dlckNhc2UoKSA9PT0gImNyIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXR1cmUgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogQlVER0VUICovCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEJ1ZGdldCBXaG9sZSAqLwogICAgICAgICAgICAgICAgICAgICAgICBnW2FjY3RLZXldLmJ1ZGdldF93aG9sZSA9IHZhbHVlLmFtb3VudCAqIG5hdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLm1vbnRobHlfYW1vdW50LmZvckVhY2gobWxpbmUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQnVkZ2V0IE1vbnRoICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtbGluZS5tb250aF9vZiA9PT0gdGhpcy5tb250aE9mKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2FjY3RLZXldLmJ1ZGdldF9tb250aCA9IG1saW5lLmFtb3VudCAqIG5hdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBCdWRnZXQgWVREICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2VuZG8udG9TdHJpbmcobmV3IERhdGUobWxpbmUubW9udGhfb2YpLCJ5eXl5LU1NLWRkIikgPD0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhpcy5tb250aE9mKSwieXl5eS1NTS1kZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2N0S2V5XS5idWRnZXRfeXRkICs9IG1saW5lLmFtb3VudCAqIG5hdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvKiBBQ1RVQUwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjdHVhbCA9IHRoaXMuc3RhdGVtZW50cy5maW5kKChpdGVtKSA9PiBpdGVtLmFjY291bnRVVUlEID09PSB2YWx1ZS5hY2NvdW50X3V1aWQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihhY3R1YWwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQWN0dWFsIE1vbnRoICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJvcGVydHlNb250aCA9IE51bWJlckluV29yZFttb250aE9mSW5kZXhdOy8vIFsnemVybycsJ29uZScsJ3R3bycsLi4uXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2N0S2V5XS5hY3R1YWxfbW9udGggPSBhY3R1YWxbcHJvcGVydHlNb250aF07Ly8gYWN0dWFsWyd6ZXJvJ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IE51bWJlckluV29yZFtpXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQWN0dWFsIFlURCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPD0gbW9udGhPZkluZGV4KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2N0S2V5XS5hY3R1YWxfeXRkICs9IGFjdHVhbFtwcm9wZXJ0eV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBY3R1YWwgV2hvbGUgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2FjY3RLZXldLmFjdHVhbF93aG9sZSArPSBhY3R1YWxbcHJvcGVydHldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLyogQnVkZ2V0IEVzdGltYXRpb25zICovCiAgICAgICAgICAgICAgICB0aGlzLmJ1ZGdldC5idWRnZXRfZXN0aW1hdGlvbnMuZm9yRWFjaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuYWNjb3VudF90eXBlX251bWJlciA+PSAxMDAgJiYgdmFsdWUuYWNjb3VudF90eXBlX251bWJlciA8PSAxMDUpewogICAgICAgICAgICAgICAgICAgICAgICBnW3ZhbHVlLmFjY291bnRfdHlwZV9udW1iZXJdID0gbmV3IEJ1ZGdldFBlcmZvcm1hbmNlTW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogdmFsdWUuYWNjb3VudF90eXBlX251bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lOiB2YWx1ZS5sb2NhbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IE9yZGVyTnVtYmVyUExbdmFsdWUuYWNjb3VudF90eXBlX251bWJlcl0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8qIFBhcnNlIE9iamVjdCBBcnJheSAqLwogICAgICAgICAgICAgICAgbGV0IGVudHJpZXMgPSBPYmplY3QudmFsdWVzKGcpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvKiBQYXJlbnQgYWdncmVnYXRlIHN1bSAqLwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGVudHJ5ID0gZW50cmllc1tpXTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZih+Y2hpbGRJZHMuaW5kZXhPZihlbnRyeS51dWlkKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRJZCA9IGVudHJ5LnBhcmVudElkOwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZShwYXJlbnRJZCAhPT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYXJlbnRJZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGVudHJpZXMuZmluZCgoaXRlbSkgPT4gaXRlbS51dWlkID09PSBwYXJlbnRJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQnVkZ2V0ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5idWRnZXRfbW9udGggKz0gZW50cnkuYnVkZ2V0X21vbnRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYnVkZ2V0X3l0ZCArPSBlbnRyeS5idWRnZXRfeXRkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYnVkZ2V0X3dob2xlICs9IGVudHJ5LmJ1ZGdldF93aG9sZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFjdHVhbCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYWN0dWFsX21vbnRoICs9IGVudHJ5LmFjdHVhbF9tb250aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFjdHVhbF95dGQgKz0gZW50cnkuYWN0dWFsX3l0ZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFjdHVhbF93aG9sZSArPSBlbnRyeS5hY3R1YWxfd2hvbGU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgbmV3IHBhcmVudCBpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IHBhcmVudC5wYXJlbnRJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IGxvb3AgdG8gZW5kICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgbG9vcCB0byBlbmQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLyogT3RoZXIgR3JvdXBzICovCiAgICAgICAgICAgICAgICAvKiBHcm9zcyBQcm9maXQgKi8KICAgICAgICAgICAgICAgIGxldCByZXZlbnVlID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuUkVWRU5VRSksCiAgICAgICAgICAgICAgICAgICAgY29zdE9mU2FsZSA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLkNPR1MpLAogICAgICAgICAgICAgICAgICAgIGdyb3NzUHJvZml0ID0gZW50cmllcy5maW5kKChpKT0+aS51dWlkID09PSBBY2NvdW50VHlwZUNvZGUuR1JPU1NfUFJPRklUKTsKCiAgICAgICAgICAgICAgICAvKiBFQklUREEgKi8KICAgICAgICAgICAgICAgIGxldCBzYWxhcnlCZW5lZml0ID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuU0FMQVJZX0JFTkVGSVQpLAogICAgICAgICAgICAgICAgICAgIHNhbGVNYXJrZXRpbmcgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5TQUxFX01BUktFVElORyksCiAgICAgICAgICAgICAgICAgICAgcmVzZWFyY2hQcm9kdWN0RGV2ZWxvcG1lbnQgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5SRVNFQVJDSF9QUk9EVUNUX0RFVkVMT1BNRU5UKSwKICAgICAgICAgICAgICAgICAgICBsZWdhbFByb2Zlc3Npb25hbEZlZSA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLkxFR0FMX1BST0ZFU1NJT05BTF9GRUUpLAogICAgICAgICAgICAgICAgICAgIGdlbmVyYWxBZG1pbkV4cGVuc2VzID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuR0VORVJBTF9BRE1JTl9FWFBFTlNFKSwKICAgICAgICAgICAgICAgICAgICBvcGVyYXRpbmdFeHBlbnNlcyA9IGVudHJpZXMuZmluZCgoaSk9PmkudXVpZCA9PT0gQWNjb3VudFR5cGVDb2RlLk9QRVJBVElOR19FWFBFTlNFKSwKICAgICAgICAgICAgICAgICAgICBvdGhlclJldmVudWUgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5PVEhFUl9SRVZFTlVFKSwKICAgICAgICAgICAgICAgICAgICBvcGVyYXRpbmdJbmNvbWVFQklUREEgPSBlbnRyaWVzLmZpbmQoKGkpPT5pLnV1aWQgPT09IEFjY291bnRUeXBlQ29kZS5PUEVSQVRJTkdfSU5DT01FX0VCSVREQSk7CgogICAgICAgICAgICAgICAgLyogRUJJVCAqLwogICAgICAgICAgICAgICAgbGV0IGRlcHJlY2lhdGlvbiA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLkRFUFJFQ0lBVElPTiksCiAgICAgICAgICAgICAgICAgICAgb3RoZXJFeHBlbnNlcyA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLk9USEVSX0VYUEVOU0UpLAogICAgICAgICAgICAgICAgICAgIGVhcm5pbmdCZWZvcmVJbnRlcmVzdEFuZFRheEVCSVQgPSBlbnRyaWVzLmZpbmQoKGkpPT5pLnV1aWQgPT09IEFjY291bnRUeXBlQ29kZS5FQVJOSU5HX0JFRk9SRV9JTlRFUkVTVF9BTkRfVEFYX0VCSVQpOwoKICAgICAgICAgICAgICAgIC8qIFByb2ZpdCBCZWZvcmUgVGF4ICovCiAgICAgICAgICAgICAgICBsZXQgZmluYW5jaW5nQ29zdCA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLkZJTkFOQ0lOR19DT1NUKSwKICAgICAgICAgICAgICAgICAgICBwcm9maXRCZWZvcmVUYXggPSBlbnRyaWVzLmZpbmQoKGkpPT5pLnV1aWQgPT09IEFjY291bnRUeXBlQ29kZS5QUk9GSVRfQkVGT1JFX1RBWCk7CgogICAgICAgICAgICAgICAgLyogUHJvZml0IEZvciBUaGUgUGVyaW9kICovCiAgICAgICAgICAgICAgICBsZXQgdGF4UmVsYXRlZEV4cGVuc2VzID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuVEFYKSwKICAgICAgICAgICAgICAgICAgICBwcm9maXRGb3JUaGVQZXJpb2QgPSBlbnRyaWVzLmZpbmQoKGkpPT5pLnV1aWQgPT09IEFjY291bnRUeXBlQ29kZS5QUk9GSVRfRk9SX1RIRV9QRVJJT0QpOwoKICAgICAgICAgICAgICAgIC8qIEJVREdFVCAqLwogICAgICAgICAgICAgICAgLyogQnVkZ2V0IE1vbnRoICovCiAgICAgICAgICAgICAgICBncm9zc1Byb2ZpdC5idWRnZXRfbW9udGggPSByZXZlbnVlLmJ1ZGdldF9tb250aCAtIGNvc3RPZlNhbGUuYnVkZ2V0X21vbnRoOwogICAgICAgICAgICAgICAgb3BlcmF0aW5nRXhwZW5zZXMuYnVkZ2V0X21vbnRoID0gc2FsYXJ5QmVuZWZpdC5idWRnZXRfbW9udGggKyBzYWxlTWFya2V0aW5nLmJ1ZGdldF9tb250aCArIHJlc2VhcmNoUHJvZHVjdERldmVsb3BtZW50LmJ1ZGdldF9tb250aCArIGxlZ2FsUHJvZmVzc2lvbmFsRmVlLmJ1ZGdldF9tb250aCArIGdlbmVyYWxBZG1pbkV4cGVuc2VzLmJ1ZGdldF9tb250aDsKICAgICAgICAgICAgICAgIG9wZXJhdGluZ0luY29tZUVCSVREQS5idWRnZXRfbW9udGggPSAoZ3Jvc3NQcm9maXQuYnVkZ2V0X21vbnRoICsgb3RoZXJSZXZlbnVlLmJ1ZGdldF9tb250aCkgLSBvcGVyYXRpbmdFeHBlbnNlcy5idWRnZXRfbW9udGg7CiAgICAgICAgICAgICAgICBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULmJ1ZGdldF9tb250aCA9IG9wZXJhdGluZ0luY29tZUVCSVREQS5idWRnZXRfbW9udGggLSBkZXByZWNpYXRpb24uYnVkZ2V0X21vbnRoIC0gb3RoZXJFeHBlbnNlcy5idWRnZXRfbW9udGg7CiAgICAgICAgICAgICAgICBwcm9maXRCZWZvcmVUYXguYnVkZ2V0X21vbnRoID0gZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5idWRnZXRfbW9udGggLSBmaW5hbmNpbmdDb3N0LmJ1ZGdldF9tb250aDsKICAgICAgICAgICAgICAgIHByb2ZpdEZvclRoZVBlcmlvZC5idWRnZXRfbW9udGggPSBwcm9maXRCZWZvcmVUYXguYnVkZ2V0X21vbnRoIC0gdGF4UmVsYXRlZEV4cGVuc2VzLmJ1ZGdldF9tb250aDsKCiAgICAgICAgICAgICAgICAvKiBCdWRnZXQgWVREICovCiAgICAgICAgICAgICAgICBncm9zc1Byb2ZpdC5idWRnZXRfeXRkID0gcmV2ZW51ZS5idWRnZXRfeXRkIC0gY29zdE9mU2FsZS5idWRnZXRfeXRkOwogICAgICAgICAgICAgICAgb3BlcmF0aW5nRXhwZW5zZXMuYnVkZ2V0X3l0ZCA9IHNhbGFyeUJlbmVmaXQuYnVkZ2V0X3l0ZCArIHNhbGVNYXJrZXRpbmcuYnVkZ2V0X3l0ZCArIHJlc2VhcmNoUHJvZHVjdERldmVsb3BtZW50LmJ1ZGdldF95dGQgKyBsZWdhbFByb2Zlc3Npb25hbEZlZS5idWRnZXRfeXRkICsgZ2VuZXJhbEFkbWluRXhwZW5zZXMuYnVkZ2V0X3l0ZDsKICAgICAgICAgICAgICAgIG9wZXJhdGluZ0luY29tZUVCSVREQS5idWRnZXRfeXRkID0gKGdyb3NzUHJvZml0LmJ1ZGdldF95dGQgKyBvdGhlclJldmVudWUuYnVkZ2V0X3l0ZCkgLSBvcGVyYXRpbmdFeHBlbnNlcy5idWRnZXRfeXRkOwogICAgICAgICAgICAgICAgZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5idWRnZXRfeXRkID0gb3BlcmF0aW5nSW5jb21lRUJJVERBLmJ1ZGdldF95dGQgLSBkZXByZWNpYXRpb24uYnVkZ2V0X3l0ZCAtIG90aGVyRXhwZW5zZXMuYnVkZ2V0X3l0ZDsKICAgICAgICAgICAgICAgIHByb2ZpdEJlZm9yZVRheC5idWRnZXRfeXRkID0gZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5idWRnZXRfeXRkIC0gZmluYW5jaW5nQ29zdC5idWRnZXRfeXRkOwogICAgICAgICAgICAgICAgcHJvZml0Rm9yVGhlUGVyaW9kLmJ1ZGdldF95dGQgPSBwcm9maXRCZWZvcmVUYXguYnVkZ2V0X3l0ZCAtIHRheFJlbGF0ZWRFeHBlbnNlcy5idWRnZXRfeXRkOwoKICAgICAgICAgICAgICAgIC8qIEJ1ZGdldCBXaG9sZSAqLwogICAgICAgICAgICAgICAgZ3Jvc3NQcm9maXQuYnVkZ2V0X3dob2xlID0gcmV2ZW51ZS5idWRnZXRfd2hvbGUgLSBjb3N0T2ZTYWxlLmJ1ZGdldF93aG9sZTsKICAgICAgICAgICAgICAgIG9wZXJhdGluZ0V4cGVuc2VzLmJ1ZGdldF93aG9sZSA9IHNhbGFyeUJlbmVmaXQuYnVkZ2V0X3dob2xlICsgc2FsZU1hcmtldGluZy5idWRnZXRfd2hvbGUgKyByZXNlYXJjaFByb2R1Y3REZXZlbG9wbWVudC5idWRnZXRfd2hvbGUgKyBsZWdhbFByb2Zlc3Npb25hbEZlZS5idWRnZXRfd2hvbGUgKyBnZW5lcmFsQWRtaW5FeHBlbnNlcy5idWRnZXRfd2hvbGU7CiAgICAgICAgICAgICAgICBvcGVyYXRpbmdJbmNvbWVFQklUREEuYnVkZ2V0X3dob2xlID0gKGdyb3NzUHJvZml0LmJ1ZGdldF93aG9sZSArIG90aGVyUmV2ZW51ZS5idWRnZXRfd2hvbGUpIC0gb3BlcmF0aW5nRXhwZW5zZXMuYnVkZ2V0X3dob2xlOwogICAgICAgICAgICAgICAgZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5idWRnZXRfd2hvbGUgPSBvcGVyYXRpbmdJbmNvbWVFQklUREEuYnVkZ2V0X3dob2xlIC0gZGVwcmVjaWF0aW9uLmJ1ZGdldF93aG9sZSAtIG90aGVyRXhwZW5zZXMuYnVkZ2V0X3dob2xlOwogICAgICAgICAgICAgICAgcHJvZml0QmVmb3JlVGF4LmJ1ZGdldF93aG9sZSA9IGVhcm5pbmdCZWZvcmVJbnRlcmVzdEFuZFRheEVCSVQuYnVkZ2V0X3dob2xlIC0gZmluYW5jaW5nQ29zdC5idWRnZXRfd2hvbGU7CiAgICAgICAgICAgICAgICBwcm9maXRGb3JUaGVQZXJpb2QuYnVkZ2V0X3dob2xlID0gcHJvZml0QmVmb3JlVGF4LmJ1ZGdldF93aG9sZSAtIHRheFJlbGF0ZWRFeHBlbnNlcy5idWRnZXRfd2hvbGU7CgogICAgICAgICAgICAgICAgLyogQUNUVUFMICovCiAgICAgICAgICAgICAgICAvKiBBY3R1YWwgTW9udGggKi8KICAgICAgICAgICAgICAgIGdyb3NzUHJvZml0LmFjdHVhbF9tb250aCA9IHJldmVudWUuYWN0dWFsX21vbnRoIC0gY29zdE9mU2FsZS5hY3R1YWxfbW9udGg7CiAgICAgICAgICAgICAgICBvcGVyYXRpbmdFeHBlbnNlcy5hY3R1YWxfbW9udGggPSBzYWxhcnlCZW5lZml0LmFjdHVhbF9tb250aCArIHNhbGVNYXJrZXRpbmcuYWN0dWFsX21vbnRoICsgcmVzZWFyY2hQcm9kdWN0RGV2ZWxvcG1lbnQuYWN0dWFsX21vbnRoICsgbGVnYWxQcm9mZXNzaW9uYWxGZWUuYWN0dWFsX21vbnRoICsgZ2VuZXJhbEFkbWluRXhwZW5zZXMuYWN0dWFsX21vbnRoOwogICAgICAgICAgICAgICAgb3BlcmF0aW5nSW5jb21lRUJJVERBLmFjdHVhbF9tb250aCA9IChncm9zc1Byb2ZpdC5hY3R1YWxfbW9udGggKyBvdGhlclJldmVudWUuYWN0dWFsX21vbnRoKSAtIG9wZXJhdGluZ0V4cGVuc2VzLmFjdHVhbF9tb250aDsKICAgICAgICAgICAgICAgIGVhcm5pbmdCZWZvcmVJbnRlcmVzdEFuZFRheEVCSVQuYWN0dWFsX21vbnRoID0gb3BlcmF0aW5nSW5jb21lRUJJVERBLmFjdHVhbF9tb250aCAtIGRlcHJlY2lhdGlvbi5hY3R1YWxfbW9udGggLSBvdGhlckV4cGVuc2VzLmFjdHVhbF9tb250aDsKICAgICAgICAgICAgICAgIHByb2ZpdEJlZm9yZVRheC5hY3R1YWxfbW9udGggPSBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULmFjdHVhbF9tb250aCAtIGZpbmFuY2luZ0Nvc3QuYWN0dWFsX21vbnRoOwogICAgICAgICAgICAgICAgcHJvZml0Rm9yVGhlUGVyaW9kLmFjdHVhbF9tb250aCA9IHByb2ZpdEJlZm9yZVRheC5hY3R1YWxfbW9udGggLSB0YXhSZWxhdGVkRXhwZW5zZXMuYWN0dWFsX21vbnRoOwoKICAgICAgICAgICAgICAgIC8qIEFjdHVhbCBZVEQgKi8KICAgICAgICAgICAgICAgIGdyb3NzUHJvZml0LmFjdHVhbF95dGQgPSByZXZlbnVlLmFjdHVhbF95dGQgLSBjb3N0T2ZTYWxlLmFjdHVhbF95dGQ7CiAgICAgICAgICAgICAgICBvcGVyYXRpbmdFeHBlbnNlcy5hY3R1YWxfeXRkID0gc2FsYXJ5QmVuZWZpdC5hY3R1YWxfeXRkICsgc2FsZU1hcmtldGluZy5hY3R1YWxfeXRkICsgcmVzZWFyY2hQcm9kdWN0RGV2ZWxvcG1lbnQuYWN0dWFsX3l0ZCArIGxlZ2FsUHJvZmVzc2lvbmFsRmVlLmFjdHVhbF95dGQgKyBnZW5lcmFsQWRtaW5FeHBlbnNlcy5hY3R1YWxfeXRkOwogICAgICAgICAgICAgICAgb3BlcmF0aW5nSW5jb21lRUJJVERBLmFjdHVhbF95dGQgPSAoZ3Jvc3NQcm9maXQuYWN0dWFsX3l0ZCArIG90aGVyUmV2ZW51ZS5hY3R1YWxfeXRkKSAtIG9wZXJhdGluZ0V4cGVuc2VzLmFjdHVhbF95dGQ7CiAgICAgICAgICAgICAgICBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULmFjdHVhbF95dGQgPSBvcGVyYXRpbmdJbmNvbWVFQklUREEuYWN0dWFsX3l0ZCAtIGRlcHJlY2lhdGlvbi5hY3R1YWxfeXRkIC0gb3RoZXJFeHBlbnNlcy5hY3R1YWxfeXRkOwogICAgICAgICAgICAgICAgcHJvZml0QmVmb3JlVGF4LmFjdHVhbF95dGQgPSBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULmFjdHVhbF95dGQgLSBmaW5hbmNpbmdDb3N0LmFjdHVhbF95dGQ7CiAgICAgICAgICAgICAgICBwcm9maXRGb3JUaGVQZXJpb2QuYWN0dWFsX3l0ZCA9IHByb2ZpdEJlZm9yZVRheC5hY3R1YWxfeXRkIC0gdGF4UmVsYXRlZEV4cGVuc2VzLmFjdHVhbF95dGQ7CgogICAgICAgICAgICAgICAgLyogQWN0dWFsIFdob2xlICovCiAgICAgICAgICAgICAgICBncm9zc1Byb2ZpdC5hY3R1YWxfd2hvbGUgPSByZXZlbnVlLmFjdHVhbF93aG9sZSAtIGNvc3RPZlNhbGUuYWN0dWFsX3dob2xlOwogICAgICAgICAgICAgICAgb3BlcmF0aW5nRXhwZW5zZXMuYWN0dWFsX3dob2xlID0gc2FsYXJ5QmVuZWZpdC5hY3R1YWxfd2hvbGUgKyBzYWxlTWFya2V0aW5nLmFjdHVhbF93aG9sZSArIHJlc2VhcmNoUHJvZHVjdERldmVsb3BtZW50LmFjdHVhbF93aG9sZSArIGxlZ2FsUHJvZmVzc2lvbmFsRmVlLmFjdHVhbF93aG9sZSArIGdlbmVyYWxBZG1pbkV4cGVuc2VzLmFjdHVhbF93aG9sZTsKICAgICAgICAgICAgICAgIG9wZXJhdGluZ0luY29tZUVCSVREQS5hY3R1YWxfd2hvbGUgPSAoZ3Jvc3NQcm9maXQuYWN0dWFsX3dob2xlICsgb3RoZXJSZXZlbnVlLmFjdHVhbF93aG9sZSkgLSBvcGVyYXRpbmdFeHBlbnNlcy5hY3R1YWxfd2hvbGU7CiAgICAgICAgICAgICAgICBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULmFjdHVhbF93aG9sZSA9IG9wZXJhdGluZ0luY29tZUVCSVREQS5hY3R1YWxfd2hvbGUgLSBkZXByZWNpYXRpb24uYWN0dWFsX3dob2xlIC0gb3RoZXJFeHBlbnNlcy5hY3R1YWxfd2hvbGU7CiAgICAgICAgICAgICAgICBwcm9maXRCZWZvcmVUYXguYWN0dWFsX3dob2xlID0gZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5hY3R1YWxfd2hvbGUgLSBmaW5hbmNpbmdDb3N0LmFjdHVhbF93aG9sZTsKICAgICAgICAgICAgICAgIHByb2ZpdEZvclRoZVBlcmlvZC5hY3R1YWxfd2hvbGUgPSBwcm9maXRCZWZvcmVUYXguYWN0dWFsX3dob2xlIC0gdGF4UmVsYXRlZEV4cGVuc2VzLmFjdHVhbF93aG9sZTsKCiAgICAgICAgICAgICAgICAvKiBGaW5kIFBlcmNlbnRhZ2UgPSBBY3R1YWwgLyBCdWRnZXQgKi8KICAgICAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWUubW9udGhfcGVyY2VudGFnZSA9IHRoaXMuZmluZFBlcmNlbnRhZ2UodmFsdWUuYWN0dWFsX21vbnRoLCB2YWx1ZS5idWRnZXRfbW9udGgpOwogICAgICAgICAgICAgICAgICAgIHZhbHVlLnl0ZF9wZXJjZW50YWdlID0gdGhpcy5maW5kUGVyY2VudGFnZSh2YWx1ZS5hY3R1YWxfeXRkLCB2YWx1ZS5idWRnZXRfeXRkKTsKICAgICAgICAgICAgICAgICAgICB2YWx1ZS53aG9sZV9wZXJjZW50YWdlID0gdGhpcy5maW5kUGVyY2VudGFnZSh2YWx1ZS5hY3R1YWxfd2hvbGUsIHZhbHVlLmJ1ZGdldF93aG9sZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvKiBCSU5EIFNUQVRNRU5UICovCiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlbWVudExpc3QgPSBlbnRyaWVzOwogICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbHVtbigpOwoKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJfSwKICAgICAgICAgICAgZ2V0RW50cnkoZW50cmllcywgaWQpewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWRnZXRQZXJmb3JtYW5jZU1vZGVsKGVudHJpZXMuZmluZChpPT5pLnV1aWQgPT09IGlkKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbmRQZXJjZW50YWdlICh2YWx1ZTEsIHZhbHVlMikgewogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IDA7CiAgICAgICAgICAgICAgICBpZih2YWx1ZTIgIT09IDApewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlMSAvIHZhbHVlMjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKiBPbiBkYXRhYm91bmQgKi8KICAgICAgICAgICAgb25EYXRhQm91bmQgKGUpIHsKICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gZS5zZW5kZXIudGhlYWQuY2hpbGRyZW4oKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciB0aCA9IGtlbmRvLmpRdWVyeShoZWFkZXJzW2ldKTsKICAgICAgICAgICAgICAgICAgICB0aC5jc3MoImZvbnQtd2VpZ2h0IiwgImJvbGQiKTsKICAgICAgICAgICAgICAgICAgICB0aC5jc3MoInRleHQtYWxpZ24iLCAiY2VudGVyIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBlLnNlbmRlci50Ym9keS5jaGlsZHJlbigpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IGtlbmRvLmpRdWVyeShyb3dzW2pdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUl0ZW0gPSBlLnNlbmRlci5kYXRhSXRlbShyb3cpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8qIEFtb3VudCBhbGlnbiByaWdodCAqLwogICAgICAgICAgICAgICAgICAgIHJvdy5jc3MoInRleHQtYWxpZ24iLCAicmlnaHQiKTsKCiAgICAgICAgICAgICAgICAgICAgLyogUGFyZW50IGluIGJvbGQgKi8KICAgICAgICAgICAgICAgICAgICBpZihkYXRhSXRlbS5nZXQoImhhc0NoaWxkcmVuIikgfHwgZGF0YUl0ZW0udXVpZCA+PSAxMDApewogICAgICAgICAgICAgICAgICAgICAgICByb3cuY3NzKCJmb250LXdlaWdodCIsICJib2xkIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBHZW5lcmF0ZSBDb2x1bW5zCgkJCWdlbmVyYXRlQ29sdW1uICgpIHsKICAgICAgICAgICAgICAgIGxldCBoZWFkZXJBdHRyaWJ1dGVzID0gewogICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MiOiAidGFibGUtaGVhZGVyLWNlbGwiLAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNHB4IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3ViSGVhZGVyQXR0cmlidXRlcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzIjogInRhYmxlLWhlYWRlci1jZWxsIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICJ0ZXh0LWFsaWduOiByaWdodDsgZm9udC1zaXplOiAxNHB4IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzIjogInRhYmxlLWNlbGwiLAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogInRleHQtYWxpZ246IHJpZ2h0OyBmb250LXNpemU6IDE0cHgiCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvKiBDb2x1bW5zICovCgkJCQlsZXQgY29sdW1ucyA9IFsKCQkJCQl7IAoJCQkJCQlmaWVsZDogdGhpcy5maWVsZE5hbWUsIAoJCQkJCQl0aXRsZTogaTE4bi50KCdhY2NvdW50JyksCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLm5hbWVUbXBsLAoJCQkJCQlsb2NrZWQ6IHRydWUsCgkJCQkJCXdpZHRoOjMwMAoJCQkJCX0sCiAgICAgICAgICAgICAgICAgICAgLyogU2VsZWN0ZWQgTW9udGggKi8KICAgICAgICAgICAgICAgICAgICB7IAoJCQkJCQl0aXRsZToga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhpcy5tb250aE9mKSwgJ01NTU0geXl5eScpLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzIDogaGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogImJ1ZGdldF9tb250aCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgnYnVkZ2V0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogImFjdHVhbF9tb250aCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgnYWN0dWFsJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogIm1vbnRoX3BlcmNlbnRhZ2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiJSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6cH0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KCQkJCQl9LAogICAgICAgICAgICAgICAgICAgIC8qIFlURCh1cCB0byBzZWxlY3RlZCBtb250aCkgKi8KICAgICAgICAgICAgICAgICAgICB7IAoJCQkJCQl0aXRsZTogaTE4bi50KCd5dGRfdXBfdG9fc2VsZWN0ZWRfbW9udGgnKSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlcyA6IGhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6ICJidWRnZXRfeXRkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bi50KCdidWRnZXQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICJ7MDpufSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IHN1YkhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiAiYWN0dWFsX3l0ZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgnYWN0dWFsJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogInl0ZF9wZXJjZW50YWdlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogInswOnB9IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDoxNTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogc3ViSGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBdCgkJCQkJfSwKICAgICAgICAgICAgICAgICAgICAvKiBXaG9sZSBZZWFyICovCiAgICAgICAgICAgICAgICAgICAgeyAKCQkJCQkJdGl0bGU6IGkxOG4udCgnd2hvbGVfeWVhcicpLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzIDogaGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogImJ1ZGdldF93aG9sZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgnYnVkZ2V0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogImFjdHVhbF93aG9sZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgnYWN0dWFsJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogIndob2xlX3BlcmNlbnRhZ2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiJSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAiezA6cH0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KCQkJCQl9LAogICAgICAgICAgICAgICAgXQoKICAgICAgICAgICAgICAgIC8qIFNldCBDb2x1bW5zICovCiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zOwoJCQl9LAoJCQkvLyBPbiBSZXBvcmludCBMYW5ndWFnZSBDaGFuZ2VzCgkJCW9uUmVwb3J0aW5nTGFuZ3VhZ2VDaGFuZ2VzICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gIm5hbWUiOwogICAgICAgICAgICAgICAgaWYodGhpcy5yZXBvcnRpbmdMYW5ndWFnZSA9PT0gImxvY2FsIil7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZE5hbWUgPSAibG9jYWxfbmFtZSI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgY29sdW1uIHdpdGggbmV3IGxhbmd1YWdlCiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ29sdW1uKCk7CgkJCX0sCiAgICAgICAgICAgIC8qIFRlbXBsYXRlcyAqLwogICAgICAgICAgICBuYW1lVG1wbChkYXRhSXRlbSl7CiAgICAgICAgICAgICAgICAvKiBOYW1lIGluIGxhbmd1YWdlICovCiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGRhdGFJdGVtLm5hbWU7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlcG9ydGluZ0xhbmd1YWdlID09PSAibG9jYWwiKXsKICAgICAgICAgICAgICAgICAgICBuYW1lID0gZGF0YUl0ZW0ubG9jYWxfbmFtZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvKiBEZWZpbmUgcmVzdWx0ICovCiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYDxzcGFuPiR7ZGF0YUl0ZW0ubnVtYmVyfSAtICR7bmFtZX08L3NwYW4+YDsKCiAgICAgICAgICAgICAgICAvKiBUb3AgTGV2ZWwgKi8KICAgICAgICAgICAgICAgIGlmKGRhdGFJdGVtLnBhcmVudElkID09PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBgPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OiBib2xkZXI7Jz4ke25hbWV9PC9zcGFuPmA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLyogUGFyZW50IExldmVsICovCiAgICAgICAgICAgICAgICBpZihkYXRhSXRlbS5oYXNDaGlsZHJlbiAmJiBkYXRhSXRlbS5udW1iZXIubGVuZ3RoID4gMyl7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYDxzcGFuIHN0eWxlPSdmb250LXdlaWdodDogYm9sZGVyOyc+JHtkYXRhSXRlbS5udW1iZXJ9IC0gJHtuYW1lfTwvc3Bhbj5gOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBjb21wdXRlZDogbWFwU3RhdGUoewogICAgICAgICAgICBhY2NvdW50czogc3RhdGUgPT4gc3RhdGUuYWNjb3VudGluZy5hY2NvdW50cwogICAgICAgIH0pLAogICAgICAgIG1vdW50ZWQgKCkgewoJCX0sCiAgICB9Owo="},{"version":3,"sources":["BudgetPerformance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BudgetPerformance.vue","sourceRoot":"src/views/budgeting/budgets","sourcesContent":["<template>\n    <v-card color=\"white\" class=\"pl-2 no_border\" elevation=\"0\">\n        <!-- Title -->\n        <v-row>\n            <v-col sm=\"5\" cols=\"12\" class=\"py-0\">\n                <h3 class=\"text-left mb-1 font_20 line_24\">{{$t('budget_performance_report')}}</h3>\n                <p class=\"mb-0\">{{$t('a_detail_breakdown_of_budget_by_months')}}</p>\n            </v-col>\n             <v-col sm=\"7\" cols=\"12\" class=\"pb-1\">\n                <app-reporting-language \n                    :initLanguage=\"reportingLanguage\" \n                    @emitLanguage=\"reportingLanguage = $event\" \n                    @onChanged=\"onReportingLanguageChanges\" />\n            </v-col>\n        </v-row>\n\n        <!-- Search -->\n        <v-row class=\"mt-0\">\n            <v-col sm=\"4\" cols=\"12\" class=\"py-0 pt-0\">\n                <app-fiscal-date-dropdownlist\n                    :initFiscalDate=\"fiscalDate\"\n                    @emitFiscalDate=\"fiscalDate = $event\"\n                    @onChanged=\"onFiscalDateChanges\"\n                />\n            </v-col>\n            <v-col sm=\"3\" cols=\"12\" class=\"py-0 pt-0\">\n                <app-month-of-picker \n                    :initMonthOf=\"monthOf\" \n                    @emitMonthOf=\"monthOf = $event\"\n                    @onChanged=\"onMonthOfChanges\"\n                    :initMin=\"fiscalDate.start_date\"\n                    :initMax=\"fiscalDate.end_date\" />\n            </v-col>\n            <v-col sm=\"3\" cols=\"12\" class=\"py-0 pt-0\">\n                <v-select class=\"mt-1\"\n                    :disabled=\"monthOf === ''\"\n                    placeholder=\"Select Budget\"\n                    v-model=\"budget\"\n                    :loading=\"loadingBudget\"\n                    :items=\"budgetList\"\n                    item-text=\"name\"\n                    item-value=\"uuid\"\n                    return-object\n                    clearable\n                    outlined />\n            </v-col>\n            <v-col sm=\"2\" cols=\"12\" class=\"py-1\">\n                <v-btn\n                    class=\"white--text\"\n                    color=\"primary\"\n                    @click=\"search\"\n                >\n                    <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n                </v-btn>\n            </v-col>\n           \n        </v-row>\n\n        <!-- Summary -->\n        <v-row>\n            <v-col class=\"pt-0\" sm=\"6\" cols=\"12\">\n                <template>\n                    <v-simple-table class=\"table_list nomal_table\">\n                        <template>\n                            <tbody>\n                            <tr>\n                                <td style=\"width: 45%;font-weight: 900\">{{$t('budget_name')}}:</td>\n                                <td class=\"\">{{ budget.name }}</td>\n                            </tr>\n                            <tr>\n                                <td style=\"font-weight: 900\">{{ $t(\"segment\") }}:</td>\n                                <td class=\"\" v-if=\"budget.segment\">{{ budget.segment.name }}</td>\n                            </tr>\n                            <tr>\n                                <td style=\"font-weight: 900\">{{ $t(\"fiscal_year\") }}:</td>\n                                <td class=\"\" v-if=\"budget.fiscal_year\">{{ Helper.formatFiscalDate(budget.fiscal_year.start_date) }}</td>\n                            </tr>\n                            <tr>\n                                <td style=\"font-weight: 900\">{{$t('used_for_consolidation')}}</td>\n                                <td class=\"\">{{ budget.use_consolidation === 1 ? 'Yes' : 'No' }}</td>\n                            </tr>\n                            </tbody>\n                        </template>\n                    </v-simple-table>\n                </template>\n            </v-col>\n            <v-col class=\"pt-0\" sm=\"6\" cols=\"12\">\n                <template>\n                    <v-simple-table class=\"table_list nomal_table\">\n                        <template>\n                            <tbody>\n                               <tr>\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"font-weight: 900\">{{ $t(\"created_by\") }}:</td>\n\t\t\t\t\t\t\t\t\t\t\t<td v-if=\"budget.created_by.email\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{budget.created_by.email}}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"font-weight: 900\">{{ $t(\"created_at\") }}:</td>\n\t\t\t\t\t\t\t\t\t\t\t<td v-if=\"budget.created_date\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ formatDateTime(budget.created_date) }}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"font-weight: 900\">{{ $t(\"last_edited_at\") }}:</td>\n                                            <td v-if=\"budget.modified_date\">\n\t\t\t\t\t\t\t\t\t\t\t{{ formatDateTime(budget.modified_date) }}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"font-weight: 900\">{{ $t(\"last_edited_by\") }}:</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"\" v-if=\"budget.modified_by.email\">{{budget.modified_by.email}}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n                            </tbody>\n                        </template>\n                    </v-simple-table>\n                </template>\n            </v-col>\n        </v-row>\n        \n        <!-- Table -->\n        <v-row>\n            <v-col sm=\"12\" cols=\"12\" class=\"pt-1\">\n                <template>\n                    <treelistdatasource \n                        ref=\"statementDS\"\n                        :data=\"statementList\"\n                        :sort=\"sortDefinition\"\n                        :schema-model=\"model\" />\n\n                    <treelist \n                        ref=\"statementTreeList\"\n                        data-source-ref=\"statementDS\"\n                        :resizable=\"true\"\n                        :columns=\"columns\"\n                        :dataBound=\"onDataBound\" />\n\n                    <LoadingMe\n                        type=\"loading\"\n                        :isLoading=\"showLoading\"\n                        :myLoading=\"true\"\n                        :fullPage=\"false\" />\n                </template>\n            </v-col>\n        </v-row>\n    </v-card>\n</template>\n\n<script>\n    import kendo from '@progress/kendo-ui';\n    import {i18n} from '@/i18n';\n    import Helper from \"@/helper.js\";\n    /* Models */\n    import AccountModel from \"@/scripts/model/Account\";\n    import FiscalDateModel from \"@/scripts/model/FiscalDate\";\n    import BudgetModel from \"@/scripts/model/Budget\";\n    import BudgetPerformanceModel from \"@/scripts/model/BudgetPerformance\";\n    import SegmentModel from \"@/scripts/model/Segment\";\n    \n    /* TreeList */\n    import { TreeList } from '@progress/kendo-treelist-vue-wrapper';\n    import { TreeListDataSource } from '@progress/kendo-datasource-vue-wrapper';\n    \n    /* Vuex */\n    import { mapState } from 'vuex';\n\n    const incomeStatementHandler = require(\"@/scripts/handler/accounting/incomeStatementHandler\");\n    const OrderNumberPL = require(\"@/scripts/default_setup/OrderNumberPL.js\");\n    const NumberInWord = require(\"@/scripts/default_setup/NumberInWord.js\");\n    const AccountTypeCode = require(\"@/scripts/default_setup/AccountTypeCode.js\");\n\n    export default {\n        components:{\n            \"LoadingMe\": () => import('@/components/Loading'),\n            \"app-fiscal-date-dropdownlist\": () => import('@/components/kendo_templates/FiscalDateDropDownList'),\n            \"app-month-of-picker\": () => import('@/components/kendo_templates/MonthOfPicker'),\n            'app-reporting-language': () => import('@/components/kendo_templates/ReportingLanguageDropDownList'),\n            'treelist': TreeList,\n            'treelistdatasource': TreeListDataSource,\n        },\n        data: () => ({\n            monthOf : '',\n            budget : new BudgetModel(),\n            budgetList : [],\n            statements : [],\n            statementList : [],\n            fiscalDate: new FiscalDateModel(),\n            Helper : Helper,\n            /* Kendo */\n            columns : [],\n            sortDefinition : [\n                { field: \"order\", dir: \"asc\" },\n                { field: \"number\", dir: \"asc\" },\n            ],\n\t\t\tmodel: {\n                id: \"uuid\",\n                expanded: true\n            },\n            // Reporting Language\n\t\t\treportingLanguage: 'english',\n\t\t\tfieldName : 'name',\n            // LoadingMe\n            showLoading: false,\n            loadingBudget: false,\n        }),\n        methods:{\n            formatDateTime(value) {\n                return kendo.toString(new Date(value), `dd-MMM-yyyy h:mm tt`);\n            },\n            onFiscalDateChanges(){\n                this.monthOf = '';\n                this.budget = new BudgetModel();\n\n                if(this.fiscalDate !== null){\n                    /* Load Budget */\n                    this.loadBudget();\n\n                }\n            },\n            onMonthOfChanges () {\n                if(this.statementList.length > 0){\n                    /* Bind Data */\n                    this.bindData();\n                }\n            },\n            async loadBudget(){\n                this.loadingBudget = true;\n                let budgets = await this.$store.dispatch('budgets/getList'),\n                    segments = await this.$store.dispatch('segments/getList');\n\n                let budgetList = [];\n                budgets.forEach(value => {\n                    if(value.fiscal_year.uuid === this.fiscalDate.uuid \n                        && value.segment_uuid !== '' \n                        && value.budget_type === 'standard'){\n                        let budget = new BudgetModel(value);\n                        budget.segment = new SegmentModel(segments.find(i => i.id === value.segment_uuid));\n                        budgetList.push(budget);\n                    }\n                });\n                this.budgetList = budgetList;\n                this.loadingBudget = false;\n            },\n            /* Search */\n            search () {\n                if(this.budget.uuid !== ''){\n                    let sdate = kendo.toString(new Date(this.fiscalDate.start_date), 'yyyy-MM-dd') + 'T00:00:00.000Z',\n                        edate = kendo.toString(new Date(this.fiscalDate.end_date), 'yyyy-MM-dd') + 'T23:59:59.999Z';\n                    \n                    // Empty statementDS\n                    let ds = this.$refs.statementDS.kendoWidget();\n                    ds.data([]);\n                        \n                    // Query Income Statement\n                    this.showLoading = true;\n                    incomeStatementHandler.getIncomeStatement({\n                        params : {\n                            start_date \t\t: sdate,\n                            end_date \t\t: edate,\n                            group_by \t\t: \"12\",\n                            segment_uuid    : this.budget.segment_uuid,\n                        }\n                    })\n                    .then(res => {\n                        if(res){\n                            this.statements = res.data;\n                            this.bindData();\n                        }else{\n                            this.$snotify.error(i18n.t(\"error_something_wrong\"));\n                        }\n                    })\n                    .finally(()=>{\n                        // this.showLoading = false;\n                    });\n                }else{\n                    /* Alert Warning */\n                    this.$snotify.warning(i18n.t(\"please_select_budget\"));\n                }\n\t\t\t},\n            async bindData () {\n                let g = {}, childIds = [];\n\n                // Load Account List\n                await this.$store.dispatch('accounting/getAccounts');\n                \n                /* Generate Months */\n                let fiscalMonths = Helper.generateFiscalMonths(this.fiscalDate.start_date, this.fiscalDate.end_date, \"12\", \"yyyy-MM\");\n                let monthOfIndex = fiscalMonths.indexOf(this.monthOf);\n                \n                /* Gathering from budget lines */\n                this.budget.lines.forEach(value => {\n                    /* Get Account Information */\n                    let account = this.accounts.find(item => item.uuid === value.account_uuid);\n                    if(account){\n                        /* Order */\n                        let order = account.type_code;\n                        if(account.type_code === AccountTypeCode.OTHER_REVENUE){\n                            order = OrderNumberPL[account.type_code];\n                        }\n\n                        /* GROUPING */\n                        /* Top Level Account Type */\n                        if(!g[account.type_code]){\n                            g[account.type_code] = new BudgetPerformanceModel({\n                                uuid : account.type_code,\n                                number : account.type_code,\n                                name : account.account_type.name,\n                                local_name : account.account_type.local_name,\n                                order : order,\n                            });\n                        }\n                        \n                        /* Parent Level */\n                        let thisAccountParentId = \"\";\n                        if(account.hasOwnProperty(\"parent_account\")){\n                            let currentParentAccount = new AccountModel(account.parent_account), counter = 0;\n                            while (currentParentAccount.number !== \"\") {\n                                /* Get account by uuid or banhji_account_number */\n                                let accountParent = new AccountModel();\n                                if(currentParentAccount.uuid !== \"\"){/* Get by uuid */\n                                    accountParent = new AccountModel(this.accounts.find((item) => item.uuid === currentParentAccount.uuid));\n                                }else{/* Get by banhji_account_number because default data has no uuid */\n                                    if(currentParentAccount.banhji_account_number !== \"\"){\n                                        accountParent = new AccountModel(this.accounts.find((item) => item.banhji_account_number === currentParentAccount.banhji_account_number));\n                                    }\n                                }\n\n                                /* Set This Account Parent Id */\n                                if(counter === 0){\n                                    thisAccountParentId = accountParent.uuid;\n                                }\n\n                                /* Find Next Parent */\n                                let nextParent = new AccountModel();\n                                if(accountParent.hasOwnProperty(\"parent_account\")){\n                                    let parentOfAccountParent = new AccountModel(accountParent.parent_account);\n                                    if(parentOfAccountParent.number !== \"\"){\n                                        if(parentOfAccountParent.uuid !== \"\"){/* Get by uuid */\n                                            nextParent = this.accounts.find((item) => item.uuid === parentOfAccountParent.uuid);\n                                        }else{/* Get by banhji_account_number because default data has no uuid */\n                                            if(parentOfAccountParent.banhji_account_number !== \"\"){\n                                                nextParent = this.accounts.find((item) => item.banhji_account_number === parentOfAccountParent.banhji_account_number);\n                                            }\n                                        }\n                                    }\n                                }\n\n                                /* Set Parent Id */\n                                let parentId = accountParent.type_code;\n                                if(nextParent.number !== \"\"){\n                                    parentId = nextParent.uuid;\n\n                                    /* Set next parent account */\n                                    Object.assign(currentParentAccount, nextParent);\n                                }else{\n                                    /* Set loop to end */\n                                    currentParentAccount.number = \"\";\n                                }\n\n                                /* Add Parent Level */\n                                g[accountParent.uuid] = new BudgetPerformanceModel({\n                                    uuid : accountParent.uuid,\n                                    number : accountParent.number,\n                                    name : accountParent.name,\n                                    local_name : accountParent.local_name,\n                                    parentId : parentId,\n                                    account : accountParent,\n                                    order : order,\n                                });\n\n                                /* Increase Counter By 1 */\n                                counter++;\n                            }/* End While Loop */\n                        }\n\n                        /* Child Level */\n                        if(!g[account.uuid]){\n                            g[account.uuid] = new BudgetPerformanceModel({\n                                uuid : account.uuid,\n                                number : account.number,\n                                name : account.name,\n                                local_name : account.local_name,\n                                account : account,\n                                order : order,\n                            });\n                        }\n\n                        /* Set Parent Id Or Self Parent */\n                        let acctKey = account.uuid;\n                        if(thisAccountParentId !== \"\"){/* Child Level */\n                            g[account.uuid].parentId = thisAccountParentId;\n                        }else{/* Child As Parent */\n                            g[account.uuid].parentId = account.type_code; /* Self As Parent */\n\n                            if(value.amount !== 0){\n                                acctKey = account.number;\n\n                                /* Self As Child With Balance */\n                                if(!g[account.number]){\n                                    g[account.number] = new BudgetPerformanceModel({\n                                        uuid : account.number,\n                                        number : account.number,\n                                        name : account.name,\n                                        local_name : account.local_name,\n                                        parentId : account.uuid,\n                                        account : account,\n                                        order : order,\n                                    });\n                                }\n                            }\n                        }\n\n                        /* Child Id */\n                        childIds.push(acctKey);\n\n                        /* Reverse Nature */\n                        let nature = 1; /* Default Naure is Dr = 1 */\n                        if(account.account_type.nature.toLowerCase() === \"cr\"){\n                            nature = -1;\n                        }\n\n                        /* BUDGET */\n                        /* Budget Whole */\n                        g[acctKey].budget_whole = value.amount * nature;\n                        \n                        value.monthly_amount.forEach(mline => {\n                            /* Budget Month */\n                            if(mline.month_of === this.monthOf){\n                                g[acctKey].budget_month = mline.amount * nature;\n                            }\n\n                            /* Budget YTD */\n                            if (kendo.toString(new Date(mline.month_of),\"yyyy-MM-dd\") <= kendo.toString(new Date(this.monthOf),\"yyyy-MM-dd\")) {\n                                g[acctKey].budget_ytd += mline.amount * nature;\n                            }\n                        });\n\n                        /* ACTUAL */\n                        let actual = this.statements.find((item) => item.accountUUID === value.account_uuid);\n                        if(actual){\n                            /* Actual Month */\n                            let propertyMonth = NumberInWord[monthOfIndex];// ['zero','one','two',...]\n                            g[acctKey].actual_month = actual[propertyMonth];// actual['zero']\n                            for (let i = 0; i < 12; i++) {\n                                let property = NumberInWord[i];\n\n                                /* Actual YTD */\n                                if(i <= monthOfIndex){\n                                    g[acctKey].actual_ytd += actual[property];\n                                }\n\n                                /* Actual Whole */\n                                g[acctKey].actual_whole += actual[property];\n                            }\n                        }\n                    }\n                });\n\n                /* Budget Estimations */\n                this.budget.budget_estimations.forEach(value => {\n                    if(value.account_type_number >= 100 && value.account_type_number <= 105){\n                        g[value.account_type_number] = new BudgetPerformanceModel({\n                            uuid: value.account_type_number,\n                            name: value.name,\n                            local_name: value.local_name,\n                            order: OrderNumberPL[value.account_type_number],\n                        });\n                    }\n                });\n\n                /* Parse Object Array */\n                let entries = Object.values(g);\n                \n                /* Parent aggregate sum */\n                for (let i = 0; i < entries.length; i++) {\n                    let entry = entries[i];\n                    \n                    if(~childIds.indexOf(entry.uuid)){\n                        let parentId = entry.parentId;\n                        while(parentId !== null){\n                            if(parentId){\n                                let parent = entries.find((item) => item.uuid === parentId);\n                                if(parent){\n                                    /* Budget */\n                                    parent.budget_month += entry.budget_month;\n                                    parent.budget_ytd += entry.budget_ytd;\n                                    parent.budget_whole += entry.budget_whole;\n\n                                    /* Actual */\n                                    parent.actual_month += entry.actual_month;\n                                    parent.actual_ytd += entry.actual_ytd;\n                                    parent.actual_whole += entry.actual_whole;\n\n                                    /* Set new parent id */\n                                    parentId = parent.parentId;\n                                }else{\n                                    /* Set loop to end */\n                                    parentId = null;\n                                }\n                            }else{\n                                /* Set loop to end */\n                                parentId = null;\n                            }\n                        }\n                    }\n                }\n\n                /* Other Groups */\n                /* Gross Profit */\n                let revenue = this.getEntry(entries, AccountTypeCode.REVENUE),\n                    costOfSale = this.getEntry(entries, AccountTypeCode.COGS),\n                    grossProfit = entries.find((i)=>i.uuid === AccountTypeCode.GROSS_PROFIT);\n\n                /* EBITDA */\n                let salaryBenefit = this.getEntry(entries, AccountTypeCode.SALARY_BENEFIT),\n                    saleMarketing = this.getEntry(entries, AccountTypeCode.SALE_MARKETING),\n                    researchProductDevelopment = this.getEntry(entries, AccountTypeCode.RESEARCH_PRODUCT_DEVELOPMENT),\n                    legalProfessionalFee = this.getEntry(entries, AccountTypeCode.LEGAL_PROFESSIONAL_FEE),\n                    generalAdminExpenses = this.getEntry(entries, AccountTypeCode.GENERAL_ADMIN_EXPENSE),\n                    operatingExpenses = entries.find((i)=>i.uuid === AccountTypeCode.OPERATING_EXPENSE),\n                    otherRevenue = this.getEntry(entries, AccountTypeCode.OTHER_REVENUE),\n                    operatingIncomeEBITDA = entries.find((i)=>i.uuid === AccountTypeCode.OPERATING_INCOME_EBITDA);\n\n                /* EBIT */\n                let depreciation = this.getEntry(entries, AccountTypeCode.DEPRECIATION),\n                    otherExpenses = this.getEntry(entries, AccountTypeCode.OTHER_EXPENSE),\n                    earningBeforeInterestAndTaxEBIT = entries.find((i)=>i.uuid === AccountTypeCode.EARNING_BEFORE_INTEREST_AND_TAX_EBIT);\n\n                /* Profit Before Tax */\n                let financingCost = this.getEntry(entries, AccountTypeCode.FINANCING_COST),\n                    profitBeforeTax = entries.find((i)=>i.uuid === AccountTypeCode.PROFIT_BEFORE_TAX);\n\n                /* Profit For The Period */\n                let taxRelatedExpenses = this.getEntry(entries, AccountTypeCode.TAX),\n                    profitForThePeriod = entries.find((i)=>i.uuid === AccountTypeCode.PROFIT_FOR_THE_PERIOD);\n\n                /* BUDGET */\n                /* Budget Month */\n                grossProfit.budget_month = revenue.budget_month - costOfSale.budget_month;\n                operatingExpenses.budget_month = salaryBenefit.budget_month + saleMarketing.budget_month + researchProductDevelopment.budget_month + legalProfessionalFee.budget_month + generalAdminExpenses.budget_month;\n                operatingIncomeEBITDA.budget_month = (grossProfit.budget_month + otherRevenue.budget_month) - operatingExpenses.budget_month;\n                earningBeforeInterestAndTaxEBIT.budget_month = operatingIncomeEBITDA.budget_month - depreciation.budget_month - otherExpenses.budget_month;\n                profitBeforeTax.budget_month = earningBeforeInterestAndTaxEBIT.budget_month - financingCost.budget_month;\n                profitForThePeriod.budget_month = profitBeforeTax.budget_month - taxRelatedExpenses.budget_month;\n\n                /* Budget YTD */\n                grossProfit.budget_ytd = revenue.budget_ytd - costOfSale.budget_ytd;\n                operatingExpenses.budget_ytd = salaryBenefit.budget_ytd + saleMarketing.budget_ytd + researchProductDevelopment.budget_ytd + legalProfessionalFee.budget_ytd + generalAdminExpenses.budget_ytd;\n                operatingIncomeEBITDA.budget_ytd = (grossProfit.budget_ytd + otherRevenue.budget_ytd) - operatingExpenses.budget_ytd;\n                earningBeforeInterestAndTaxEBIT.budget_ytd = operatingIncomeEBITDA.budget_ytd - depreciation.budget_ytd - otherExpenses.budget_ytd;\n                profitBeforeTax.budget_ytd = earningBeforeInterestAndTaxEBIT.budget_ytd - financingCost.budget_ytd;\n                profitForThePeriod.budget_ytd = profitBeforeTax.budget_ytd - taxRelatedExpenses.budget_ytd;\n\n                /* Budget Whole */\n                grossProfit.budget_whole = revenue.budget_whole - costOfSale.budget_whole;\n                operatingExpenses.budget_whole = salaryBenefit.budget_whole + saleMarketing.budget_whole + researchProductDevelopment.budget_whole + legalProfessionalFee.budget_whole + generalAdminExpenses.budget_whole;\n                operatingIncomeEBITDA.budget_whole = (grossProfit.budget_whole + otherRevenue.budget_whole) - operatingExpenses.budget_whole;\n                earningBeforeInterestAndTaxEBIT.budget_whole = operatingIncomeEBITDA.budget_whole - depreciation.budget_whole - otherExpenses.budget_whole;\n                profitBeforeTax.budget_whole = earningBeforeInterestAndTaxEBIT.budget_whole - financingCost.budget_whole;\n                profitForThePeriod.budget_whole = profitBeforeTax.budget_whole - taxRelatedExpenses.budget_whole;\n\n                /* ACTUAL */\n                /* Actual Month */\n                grossProfit.actual_month = revenue.actual_month - costOfSale.actual_month;\n                operatingExpenses.actual_month = salaryBenefit.actual_month + saleMarketing.actual_month + researchProductDevelopment.actual_month + legalProfessionalFee.actual_month + generalAdminExpenses.actual_month;\n                operatingIncomeEBITDA.actual_month = (grossProfit.actual_month + otherRevenue.actual_month) - operatingExpenses.actual_month;\n                earningBeforeInterestAndTaxEBIT.actual_month = operatingIncomeEBITDA.actual_month - depreciation.actual_month - otherExpenses.actual_month;\n                profitBeforeTax.actual_month = earningBeforeInterestAndTaxEBIT.actual_month - financingCost.actual_month;\n                profitForThePeriod.actual_month = profitBeforeTax.actual_month - taxRelatedExpenses.actual_month;\n\n                /* Actual YTD */\n                grossProfit.actual_ytd = revenue.actual_ytd - costOfSale.actual_ytd;\n                operatingExpenses.actual_ytd = salaryBenefit.actual_ytd + saleMarketing.actual_ytd + researchProductDevelopment.actual_ytd + legalProfessionalFee.actual_ytd + generalAdminExpenses.actual_ytd;\n                operatingIncomeEBITDA.actual_ytd = (grossProfit.actual_ytd + otherRevenue.actual_ytd) - operatingExpenses.actual_ytd;\n                earningBeforeInterestAndTaxEBIT.actual_ytd = operatingIncomeEBITDA.actual_ytd - depreciation.actual_ytd - otherExpenses.actual_ytd;\n                profitBeforeTax.actual_ytd = earningBeforeInterestAndTaxEBIT.actual_ytd - financingCost.actual_ytd;\n                profitForThePeriod.actual_ytd = profitBeforeTax.actual_ytd - taxRelatedExpenses.actual_ytd;\n\n                /* Actual Whole */\n                grossProfit.actual_whole = revenue.actual_whole - costOfSale.actual_whole;\n                operatingExpenses.actual_whole = salaryBenefit.actual_whole + saleMarketing.actual_whole + researchProductDevelopment.actual_whole + legalProfessionalFee.actual_whole + generalAdminExpenses.actual_whole;\n                operatingIncomeEBITDA.actual_whole = (grossProfit.actual_whole + otherRevenue.actual_whole) - operatingExpenses.actual_whole;\n                earningBeforeInterestAndTaxEBIT.actual_whole = operatingIncomeEBITDA.actual_whole - depreciation.actual_whole - otherExpenses.actual_whole;\n                profitBeforeTax.actual_whole = earningBeforeInterestAndTaxEBIT.actual_whole - financingCost.actual_whole;\n                profitForThePeriod.actual_whole = profitBeforeTax.actual_whole - taxRelatedExpenses.actual_whole;\n\n                /* Find Percentage = Actual / Budget */\n                entries.forEach(value => {\n                    value.month_percentage = this.findPercentage(value.actual_month, value.budget_month);\n                    value.ytd_percentage = this.findPercentage(value.actual_ytd, value.budget_ytd);\n                    value.whole_percentage = this.findPercentage(value.actual_whole, value.budget_whole);\n                });\n\n                /* BIND STATMENT */\n                this.statementList = entries;\n                this.generateColumn();\n\n                this.showLoading = false;\n\t\t\t},\n            getEntry(entries, id){\n                return new BudgetPerformanceModel(entries.find(i=>i.uuid === id));\n            },\n            findPercentage (value1, value2) {\n                let result = 0;\n                if(value2 !== 0){\n                    result = value1 / value2;\n                }\n\n                return result;\n            },\n            /* On databound */\n            onDataBound (e) {\n                var headers = e.sender.thead.children();\n                for (var i = 0; i < headers.length; i++) {\n                    var th = kendo.jQuery(headers[i]);\n                    th.css(\"font-weight\", \"bold\");\n                    th.css(\"text-align\", \"center\");\n                }\n\n                var rows = e.sender.tbody.children();\n                for (var j = 0; j < rows.length; j++) {\n                    var row = kendo.jQuery(rows[j]);\n                    var dataItem = e.sender.dataItem(row);\n                    \n                    /* Amount align right */\n                    row.css(\"text-align\", \"right\");\n\n                    /* Parent in bold */\n                    if(dataItem.get(\"hasChildren\") || dataItem.uuid >= 100){\n                        row.css(\"font-weight\", \"bold\");\n                    }\n                }\n            },\n            // Generate Columns\n\t\t\tgenerateColumn () {\n                let headerAttributes = {\n                        \"class\": \"table-header-cell\",\n                        style: \"text-align: center; font-size: 14px\"\n                    },\n                    subHeaderAttributes = {\n                        \"class\": \"table-header-cell\",\n                        style: \"text-align: right; font-size: 14px\"\n                    },\n                    attributes = {\n                        \"class\": \"table-cell\",\n                        style: \"text-align: right; font-size: 14px\"\n                    };\n\n                /* Columns */\n\t\t\t\tlet columns = [\n\t\t\t\t\t{ \n\t\t\t\t\t\tfield: this.fieldName, \n\t\t\t\t\t\ttitle: i18n.t('account'),\n                        template: this.nameTmpl,\n\t\t\t\t\t\tlocked: true,\n\t\t\t\t\t\twidth:300\n\t\t\t\t\t},\n                    /* Selected Month */\n                    { \n\t\t\t\t\t\ttitle: kendo.toString(new Date(this.monthOf), 'MMMM yyyy'),\n                        headerAttributes : headerAttributes,\n                        columns: [\n                            { \n                                field: \"budget_month\",\n                                title: i18n.t('budget'),\n                                format: \"{0:n}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            },\n                            { \n                                field: \"actual_month\",\n                                title: i18n.t('actual'),\n                                format: \"{0:n}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            },\n                            { \n                                field: \"month_percentage\",\n                                title: \"%\",\n                                format: \"{0:p}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            }\n                        ]\n\t\t\t\t\t},\n                    /* YTD(up to selected month) */\n                    { \n\t\t\t\t\t\ttitle: i18n.t('ytd_up_to_selected_month'),\n                        headerAttributes : headerAttributes,\n                        columns: [\n                            { \n                                field: \"budget_ytd\",\n                                title: i18n.t('budget'),\n                                format: \"{0:n}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            },\n                            { \n                                field: \"actual_ytd\",\n                                title: i18n.t('actual'),\n                                format: \"{0:n}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            },\n                            { \n                                field: \"ytd_percentage\",\n                                title: \"%\",\n                                format: \"{0:p}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            }\n                        ]\n\t\t\t\t\t},\n                    /* Whole Year */\n                    { \n\t\t\t\t\t\ttitle: i18n.t('whole_year'),\n                        headerAttributes : headerAttributes,\n                        columns: [\n                            { \n                                field: \"budget_whole\",\n                                title: i18n.t('budget'),\n                                format: \"{0:n}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            },\n                            { \n                                field: \"actual_whole\",\n                                title: i18n.t('actual'),\n                                format: \"{0:n}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            },\n                            { \n                                field: \"whole_percentage\",\n                                title: \"%\",\n                                format: \"{0:p}\",\n                                width:150,\n                                headerAttributes: subHeaderAttributes,\n                                attributes: attributes,\n                            }\n                        ]\n\t\t\t\t\t},\n                ]\n\n                /* Set Columns */\n                this.columns = columns;\n\t\t\t},\n\t\t\t// On Reporint Language Changes\n\t\t\tonReportingLanguageChanges () {\n                this.fieldName = \"name\";\n                if(this.reportingLanguage === \"local\"){\n                    this.fieldName = \"local_name\";\n                }\n\n                // Generate column with new language\n                this.generateColumn();\n\t\t\t},\n            /* Templates */\n            nameTmpl(dataItem){\n                /* Name in language */\n                let name = dataItem.name;\n                if(this.reportingLanguage === \"local\"){\n                    name = dataItem.local_name;\n                }\n\n                /* Define result */\n                let result = `<span>${dataItem.number} - ${name}</span>`;\n\n                /* Top Level */\n                if(dataItem.parentId === null){\n                    result = `<span style='font-weight: bolder;'>${name}</span>`;\n                }\n\n                /* Parent Level */\n                if(dataItem.hasChildren && dataItem.number.length > 3){\n                    result = `<span style='font-weight: bolder;'>${dataItem.number} - ${name}</span>`;\n                }\n\n                return result;\n            },\n        },\n        computed: mapState({\n            accounts: state => state.accounting.accounts\n        }),\n        mounted () {\n\t\t},\n    };\n</script>\n\n<style scoped>\n    .theme--light.v-data-table {\n        background-color: transparent !important;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .v-data-table.simple1_table.theme--light,\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .v-data-table.simple_table.theme--light{\n        border-left: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .theme--light.v-data-table.simple1_table > .v-data-table__wrapper > table > thead > tr:last-child > th:last-child{\n        border-right: none !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: transparent !important;\n    }\n\n    .border-bottom {\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .font-small {\n        font-size: 12px;\n        line-height: 15px;\n    }\n\n    .font-26 {\n        font-size: 26px !important;\n    }\n    .v-data-table.simple_table.theme--light{\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n        border-bottom: none !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th{\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n        border-right: none !important;\n    }\n\n\n    .v-data-table.table_list > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: none !important;\n    }\n    .v-data-table.table_list.theme--light > .v-data-table__wrapper > table > tbody > tr:first-child > td{\n        border-top: none !important;\n    }\n\n    @media (max-width: 576px) {\n\n    }\n</style>"]}]}
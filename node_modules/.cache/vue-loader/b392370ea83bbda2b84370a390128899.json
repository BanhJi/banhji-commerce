{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/payroll_run/Finalize.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/payroll_run/Finalize.vue","mtime":1641438291873},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIgogICAgaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7CiAgICBpbXBvcnQge0pvdXJuYWxNb2RlbCwKICAgIEpvdXJuYWxFbnRyeU1vZGVsLAogICAgQWNjb3VudE1vZGVsLAoJQ3VycmVuY3lNb2RlbCx9IGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BcHBNb2RlbHMiOwogICAgaW1wb3J0ICBqc1BERiAgZnJvbSAianNwZGYiOwogICAgY29uc3QgJCA9IHJlcXVpcmUoImpxdWVyeSIpCiAgICBjb25zdCB7IEVudGl0eVR5cGUsIH0gPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9Db2xsZWN0aW9ucyIpOwogICAgY29uc3Qgc2V0dGluZ3NIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NldHRpbmdzSGFuZGxlciIpCiAgICBjb25zdCBwYXlyb2xsSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wYXlyb2xsSGFuZGxlciIpCiAgICBjb25zdCBhY2NvdW50SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL2FjY291bnRpbmcvYWNjb3VudCIpOwogICAgY29uc3QgY29va2llSlMgPSByZXF1aXJlKCJAL2Nvb2tpZS5qcyIpOwogICAgY29uc3QgY29va2llID0gY29va2llSlMuZ2V0Q29va2llKCk7CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgcHJvcHM6Wydwcm9wRmluYWxpemUnXSwKICAgICAgICBkYXRhOiAoKSA9Pih7CiAgICAgICAgICAgIGpvdXJuYWw6IG5ldyBKb3VybmFsTW9kZWwoKSwKICAgICAgICAgICAgam91cm5hbF9kYXRlOiAiIiwKICAgICAgICAgICAgZGlhbG9nbTogZmFsc2UsCiAgICAgICAgICAgIHNob3dMb2FkaW5nOiB0cnVlLAogICAgICAgICAgICBwYXlyb2xsRmluYWw6IHsKICAgICAgICAgICAgICAgIG1vbnRoT2Y6ICcnLAogICAgICAgICAgICAgICAgdG90YWxFbXBsb3llZTogMCwKICAgICAgICAgICAgICAgIHRvdGFsR3Jvc3M6IDAsCiAgICAgICAgICAgICAgICB0b3RhbERlZHVjdGlvbjogMCwKICAgICAgICAgICAgICAgIHRvdGFsQmVuZWZpdHM6IDAsCiAgICAgICAgICAgICAgICB0b3RhbFRheFBheW1lbnRVUzogMCwKICAgICAgICAgICAgICAgIHRvdGFsVGF4QmVuZWZpdDogMCwKICAgICAgICAgICAgICAgIHRvdGFsTmV0U2FsYXJ5OiAwLAogICAgICAgICAgICAgICAgdG90YWxOZXRQYXk6IDAsCiAgICAgICAgICAgICAgICB0YXhCZW5lZml0OiAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXlyb2xsUHJldmlvdXM6IHsKICAgICAgICAgICAgICAgIG1vbnRoT2Y6ICcnLAogICAgICAgICAgICAgICAgdG90YWxFbXBsb3llZTogMCwKICAgICAgICAgICAgICAgIHRvdGFsR3Jvc3M6IDAsCiAgICAgICAgICAgICAgICB0b3RhbERlZHVjdGlvbjogMCwKICAgICAgICAgICAgICAgIHRvdGFsQmVuZWZpdHM6IDAsCiAgICAgICAgICAgICAgICB0b3RhbFRheEJlbmVmaXQ6IDAsCiAgICAgICAgICAgICAgICB0b3RhbFRheFBheW1lbnRVUzogMCwKICAgICAgICAgICAgICAgIHRvdGFsTmV0U2FsYXJ5OiAwLAogICAgICAgICAgICAgICAgdG90YWxOZXRQYXk6IDAsCiAgICAgICAgICAgICAgICB0YXhCZW5lZml0OiAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICBhY2NvdW50OiB7fSwKICAgICAgICAgICAgam91cm5hbF9kYXRhOiBbXSwKICAgICAgICAgICAgcGF5cm9sbF9kYXRhOiB7fSwKICAgICAgICAgICAgam91cm5hbExpbmU6IFtdLAogICAgICAgICAgICB0YXhQYXlibGU6IHt9LAogICAgICAgICAgICBhY2NvdW50QmVuZWZpdDoge30sCiAgICAgICAgICAgIGFjY0JlbmVmaXQ6IHt9LAogICAgICAgICAgICByZXN1bHRKb3VybmFsczoge30sCiAgICAgICAgICAgIGxvZ2dlZFVzZXI6IHsKICAgICAgICAgICAgICAgIGlkOiBjb29raWUuY3JlYXRvciwKICAgICAgICAgICAgICAgIG5hbWU6IGNvb2tpZS5lbWFpbAogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXlEYXRlczogW10sCiAgICAgICAgICAgIHN1ZmZpeDoge30sCiAgICAgICAgICAgIHByZWZpeF9mb3JtYXQ6ICcnCiAgICAgICAgfSksCiAgICAgICAgY29tcG9uZW50czogewogICAgICAgICAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKQogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczp7CiAgICAgICAgICAgIG51bWJlckZvcm1hdCh2YWx1ZSl7CiAgICAgICAgICAgICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcoIGtlbmRvLnBhcnNlRmxvYXQodmFsdWUpLCJuMiIpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRQYXlyb2xsTGlzdCgpewogICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBwYXlyb2xsSGFuZGxlci5nZXRQYXlyb2xsKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0UGF5ID0gcmVzLmRhdGEuZGF0YVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHJlc3VsdFBheS5wYXlOdW1iZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ3Jlc3VsdFBheScsIHJlc3VsdFBheSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TnVtYmVyID0gdGhpcy56ZXJvUGFkKHBhcnNlSW50KDApLCBwcmVmaXguZm9ybWF0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZml4X2Zvcm1hdCA9IChwcmVmaXguYWJiciArIHByZWZpeC5udW1iZXJTZXBhcmF0b3IgKyBwcmVmaXguc3RydWN0dXJlICsgcHJlZml4Lm51bWJlclNlcGFyYXRvciArIGxhc3ROdW1iZXIgKyAnQCcgKyBwcmVmaXguc2VxdWNlbmNpbmcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vbnRoT0YgPSAga2VuZG8udG9TdHJpbmcobmV3IERhdGUobmV3IERhdGUocmVzdWx0UGF5Lm1vbnRoT2YpLnNldE1vbnRoKG5ldyBEYXRlKHJlc3VsdFBheS5tb250aE9mKS5nZXRNb250aCgpIC0gMSkpLCd5eXl5LU1NLWRkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRQYXlyb2xsUHJldmlvdXMobW9udGhPRikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRQYXlyb2xsSXRlbShyZXN1bHRQYXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRQYXlyb2xsSXRlbShyZXN1bHQpewogICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbXBsb3llZSA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIHBheXJvbGxIYW5kbGVyLmdldFBheXJvbGxJdGVtKHJlc3VsdC5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdXRsX2l0ZW0gPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlyb2xsRmluYWwgPSByZXN1bHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXJvbGxzID0gcmVzdXRsX2l0ZW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzKHJlcy5kYXRhLnN0YXR1c0NvZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQWNjb3VudCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAzMDApCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2FkUGF5cm9sbFByZXZpb3VzKG1vbnRoT0YpewogICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICAgICAgcGF5cm9sbEhhbmRsZXIuZ2V0UGF5cm9sbFByZXZpb3VzKG1vbnRoT0YpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cm9sbFByZXZpb3VzID0gcmVzdWx0WzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdNb250aE9mID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDMwMCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRQcmVmaXhlcygpIHsKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0hhbmRsZXIuZ2V0UHJlZml4ZXMoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZml4TGlzdCA9IHJlc3VsdC5maWx0ZXIocCA9PiBwLnR5cGUgPT0ncGF5X3NsaXAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWZpeCA9IHRoaXMucHJlZml4TGlzdFswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheU51bWJlciA9IHRoaXMucHJlZml4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sIDMwMCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHplcm9QYWQobnVtLCBwbGFjZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICcwJykKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzdWx0KCl7CiAgICAgICAgICAgICAgICBsZXQgZGF0YVJlc3VsdCA9ICAgIHRoaXMucGF5cm9sbHM7CiAgICAgICAgICAgICAgICBsZXQgY3VycmVuY3kgICA9ICAgIHRoaXMucGF5cm9sbEZpbmFsLmN1cnJlbmN5OwogICAgICAgICAgICAgICAgbGV0IG1vbnRoT2YgICAgPSAgICB0aGlzLnBheXJvbGxGaW5hbC5tb250aE9mOwogICAgICAgICAgICAgICAgbGV0IG1vbnRoX29mICAgPSAgICBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShtb250aE9mKSwgInkiKQogICAgICAgICAgICAgICAgbGV0IHNlZ21lbnRBUiA9IFtdCiAgICAgICAgICAgICAgICBkYXRhUmVzdWx0LmZvckVhY2gobz0+ewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnQgICAgICAgICAgID0gby5zZWdtZW50CiAgICAgICAgICAgICAgICAgICAgc2VnbWVudC5mb3JFYWNoKG49PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5bJ2N1cnJlbmN5J10gICAgICAgICAgICAgICA9IGN1cnJlbmN5LAogICAgICAgICAgICAgICAgICAgICAgICBuWyduZXRQYXknXSAgICAgICAgICAgICAgICAgPSAoby5uZXRQYXkgKiBuLnBlcmNlbnRhZ2UpLzEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgblsndGF4QmVuZWZpdCddICAgICAgICAgICAgID0gKG8udGF4QmVuZWZpdCAqIG4ucGVyY2VudGFnZSkvMTAwLAogICAgICAgICAgICAgICAgICAgICAgICBuWyd0YXhTYWxhcnlVUyddICAgICAgICAgICAgPSAoby50YXhTYWxhcnlVUyAqIG4ucGVyY2VudGFnZSkvMTAwLAogICAgICAgICAgICAgICAgICAgICAgICBuWyd0b3RhbEJlbmVmaXQnXSAgICAgICAgICAgPSAoby50b3RhbEJlbmVmaXQgKiBuLnBlcmNlbnRhZ2UpLzEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgblsncGF5cm9sbExpYWJpbGl0aWUnXSAgICAgID0gby5wYXlyb2xsTGlhYmlsaXRpZSwKICAgICAgICAgICAgICAgICAgICAgICAgblsndGF4QmVuZWZpdEV4Y2hhbmdlJ10gICAgID0gKG8udGF4QmVuZWZpdEV4Y2hhbmdlICogbi5wZXJjZW50YWdlKS8xMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG5bJ3NhbGFyeUV4Y2hhbmdlJ10gICAgICAgICA9IChvLnNhbGFyeUV4Y2hhbmdlICogbi5wZXJjZW50YWdlKS8xMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG5bJ3RheFNhbGFyeSddICAgICAgICAgICAgICA9IChvLnRheFNhbGFyeSAqIG4ucGVyY2VudGFnZSkvMTAwLAogICAgICAgICAgICAgICAgICAgICAgICBuWydiZW5lZml0RXhjaGFuZ2UnXSAgICAgICAgPSAoby5iZW5lZml0RXhjaGFuZ2UgKiBuLnBlcmNlbnRhZ2UpLzEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudEFSLnB1c2gobikKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGxldCBjYWxjdWxhdGVTYWxhcnkgICAgID0gc2VnbWVudEFSLm1hcChpPT57CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2FsYXJ5OiAgICAgICAgICAgICBpLlNhbGFyeSwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogICAgICAgICBpLnBlcmNlbnRhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldFBheSA6ICAgICAgICAgICAgaS5uZXRQYXksCiAgICAgICAgICAgICAgICAgICAgICAgIHRheEJlbmVmaXQ6ICAgICAgICAgaS50YXhCZW5lZml0LAogICAgICAgICAgICAgICAgICAgICAgICB0YXhTYWxhcnk6ICAgICAgICAgIGkudGF4U2FsYXJ5VVMsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQmVuZWZpdDogICAgICAgaS50b3RhbEJlbmVmaXQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRheEJlbmVmaXRFeGNoYW5nZTogaS50YXhCZW5lZml0RXhjaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHNhbGFyeUV4Y2hhbmdlOiAgICAgaS5zYWxhcnlFeGNoYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICAgYmVuZWZpdEV4Y2hhbmdlOiAgICBpLnRheEJlbmVmaXRFeGNoYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiAgICAgICAgICBpLmNvbXBvbmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgc2FsYXJ5QWNjb3VudDogICAgICBpLnNhbGFyeUFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiAgICAgICAgICAgaS5jdXJyZW5jeSwKICAgICAgICAgICAgICAgICAgICAgICAgcGF5cm9sbExpYWJpbGl0aWU6ICBpLnBheXJvbGxMaWFiaWxpdGllLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBsZXQgaGVscGVyID0ge30KICAgICAgICAgICAgICAgIGxldCByZXN1bHRTZWdtZW50ICAgPSBjYWxjdWxhdGVTYWxhcnkucmVkdWNlKGZ1bmN0aW9uKHIsIG8pewogICAgICAgICAgICAgICAgICAgIGxldCBrZXkgPSBvLmNvbXBvbmVudC5pZCArICctJyArIG8uY29tcG9uZW50Lm5hbWU7CiAgICAgICAgICAgICAgICAgICAgaWYoIWhlbHBlcltrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcltrZXldID0gT2JqZWN0LmFzc2lnbih7fSwgbyk7IC8vIGNyZWF0ZSBhIGNvcHkgb2YgbwogICAgICAgICAgICAgICAgICAgICAgICByLnB1c2goaGVscGVyW2tleV0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcltrZXldLnBlcmNlbnRhZ2UgICAgICAgICAgKz0gcGFyc2VGbG9hdChvLnBlcmNlbnRhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS5zYWxhcnkgICAgICAgICAgICAgICs9IHBhcnNlRmxvYXQoby5zYWxhcnkpOwogICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS5uZXRQYXkgICAgICAgICAgICAgICs9IHBhcnNlRmxvYXQoby5uZXRQYXkpOwogICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS50YXhCZW5lZml0ICAgICAgICAgICs9IHBhcnNlRmxvYXQoby50YXhCZW5lZml0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0udGF4U2FsYXJ5ICAgICAgICAgICArPSBwYXJzZUZsb2F0KG8udGF4U2FsYXJ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0udG90YWxCZW5lZml0ICAgICAgICArPSBwYXJzZUZsb2F0KG8udG90YWxCZW5lZml0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0udGF4QmVuZWZpdEV4Y2hhbmdlICArPSBwYXJzZUZsb2F0KG8udGF4QmVuZWZpdEV4Y2hhbmdlKSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0uc2FsYXJ5RXhjaGFuZ2UgICAgICArPSBwYXJzZUZsb2F0KG8uc2FsYXJ5RXhjaGFuZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS5iZW5lZml0RXhjaGFuZ2UgICAgICs9IHBhcnNlRmxvYXQoby5iZW5lZml0RXhjaGFuZ2UpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgfSxbXSk7CiAgICAgICAgICAgICAgICBsZXQgam91cm5hbHMgICAgICAgID1bXTsKICAgICAgICAgICAgICAgIGxldCB0YXhQYXlibGUgICAgICAgPSB0aGlzLnRheFBheWJsZQogICAgICAgICAgICAgICAgbGV0IGFjY291bnRCZW5lZml0ICA9IHRoaXMuYWNjb3VudEJlbmVmaXQKICAgICAgICAgICAgICAgIGxldCBhY2NCZW5lZml0ICAgICAgPSB0aGlzLmFjY0JlbmVmaXQKICAgICAgICAgICAgICAgIHJlc3VsdFNlZ21lbnQuZm9yRWFjaChmdW5jdGlvbihwKXsKICAgICAgICAgICAgICAgICAgICBqb3VybmFscy5wdXNoKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgSm91cm5hbEVudHJ5TW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgICAgICAgIHAuc2FsYXJ5QWNjb3VudC5uYW1lICsgJyBmb3IgJysgbW9udGhfb2YsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiAgICAgICAgICAgICAgbmV3IEFjY291bnRNb2RlbChwLnNhbGFyeUFjY291bnQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VfcmF0ZTogICAgICAgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogICAgICAgICAgICAgbmV3IEN1cnJlbmN5TW9kZWwocC5jdXJyZW5jeSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICAgICAgICAgICAgICAgcC5zYWxhcnksIC8vIGRyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc18xX3V1aWQ6ICAgICAgICAgcC5jb21wb25lbnQuaWQgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgSm91cm5hbEVudHJ5TW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgICAgICAgIHAucGF5cm9sbExpYWJpbGl0aWUubmFtZSArICcgZm9yICcrIG1vbnRoX29mLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogICAgICAgICAgICAgIG5ldyBBY2NvdW50TW9kZWwocC5wYXlyb2xsTGlhYmlsaXRpZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZV9yYXRlOiAgICAgICAgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiAgICAgICAgICAgICBuZXcgQ3VycmVuY3lNb2RlbChwLmN1cnJlbmN5KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogICAgICAgICAgICAgICBwLm5ldFBheSAqIC0xLCAvLyBjcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NfMV91dWlkOiAgICAgICAgIHAuY29tcG9uZW50LmlkCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgSm91cm5hbEVudHJ5TW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgICAgICAgIHRheFBheWJsZS5uYW1lICsgJyBmb3IgJysgbW9udGhfb2YsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiAgICAgICAgICAgICAgbmV3IEFjY291bnRNb2RlbCh0YXhQYXlibGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VfcmF0ZTogICAgICAgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogICAgICAgICAgICAgbmV3IEN1cnJlbmN5TW9kZWwocC5jdXJyZW5jeSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICAgICAgICAgICAgICAgcC50YXhTYWxhcnkgKiAtMSwgLy8gY3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc18xX3V1aWQ6ICAgICAgICAgcC5jb21wb25lbnQuaWQKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGlmKHAudGF4QmVuZWZpdCA+IDAgJiYgcC50b3RhbEJlbmVmaXQgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbHMucHVzaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBKb3VybmFsRW50cnlNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgICAgICAgIGFjY291bnRCZW5lZml0Lm5hbWUgKyAnIGZvciAnKyBtb250aF9vZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiAgICAgICAgICAgICAgbmV3IEFjY291bnRNb2RlbChhY2NvdW50QmVuZWZpdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6ICAgICAgICAgICAgIG5ldyBDdXJyZW5jeU1vZGVsKHAuY3VycmVuY3kpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlX3JhdGU6ICAgICAgICAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogICAgICAgICAgICAgICBwLnRvdGFsQmVuZWZpdCwgLy8gZHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NfMV91dWlkOiAgICAgICAgIHAuY29tcG9uZW50LmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBKb3VybmFsRW50cnlNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgICAgICAgIGFjY0JlbmVmaXQubmFtZSArICcgZm9yICcrIG1vbnRoX29mLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ6ICAgICAgICAgICAgICBuZXcgQWNjb3VudE1vZGVsKGFjY0JlbmVmaXQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlX3JhdGU6ICAgICAgICAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiAgICAgICAgICAgICBuZXcgQ3VycmVuY3lNb2RlbChwLmN1cnJlbmN5KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICAgICAgICAgICAgICAgcC50YXhCZW5lZml0ICogLTEsIC8vIGNyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzXzFfdXVpZDogICAgICAgICBwLmNvbXBvbmVudC5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdGhpcy5wYXlyb2xsQWNjb3VudCA9IHJlc3VsdFNlZ21lbnQKICAgICAgICAgICAgICAgIHRoaXMuam91cm5hbExpbmUgPSBqb3VybmFscwogICAgICAgICAgICAgICAgaWYodGhpcy5wYXlyb2xsQWNjb3VudCAmJiB0aGlzLmpvdXJuYWxMaW5lKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUpvdXJuYWwoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzYXZlRmluYWxpemUoKXsKICAgICAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuZGF0YVNvdXJjZVBheURheS5rZW5kb1dpZGdldCgpOwogICAgICAgICAgICAgICAgbGV0IGRhdGFTb3VyY2UgPSBkcy5kYXRhKCkubWFwKGluZGV4PT57CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF5RGF0ZTogICAgICAgICAgIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKGluZGV4LnBheURhdGUpLCJ5eXl5LU1NLWRkIikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgaWYodGhpcy5qb3VybmFsX2RhdGEubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID17CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAgICAgICAgICAgICAgICAgICAxLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbDogICAgICAgICAgICAgICAgICAgICdkb25lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aE9mOiAgICAgICAgICAgICAgICAgIHRoaXMucGF5cm9sbEZpbmFsLm1vbnRoT2YsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogICAgICAgICAgICAgICAgICAgICBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh0aGlzLnBheXJvbGxGaW5hbC5tb250aE9mKSwneXl5eScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6ICAgICAgICAgICAgICAgICAgdGhpcy5wYXlyb2xsRmluYWwuY3JlYXRlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cm9sbEZpbmFsLmRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXJvbGxGaW5hbC50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiAgICAgICAgICAgICAgICAgdGhpcy5wYXlyb2xsRmluYWwuY3VycmVuY3ksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VSYXRlOiAgICAgICAgICAgICB0aGlzLnBheXJvbGxGaW5hbC5leGNoYW5nZVJhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5cm9sbFJlZmVyZW5jZU51bWJlcjogICB0aGlzLnBheXJvbGxGaW5hbC5yZWZlcmVuY2VOdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5cm9sbExpc3Q6ICAgICAgICAgICAgICB0aGlzLnBheXJvbGxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROdW1iZXI6ICAgICAgICAgICAgICAgdGhpcy5sYXN0TnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheXNsaXA6ICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYmJyOiAgICAgICAgICAgICAgICAgdGhpcy5wcmVmaXguYWJiciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0dXJlOiAgICAgICAgICAgIHRoaXMucHJlZml4LnN0cnVjdHVyZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogICAgICAgICAgICAgICAgIHRoaXMucGF5cm9sbEZpbmFsLm1vbnRoT2YsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAgICAgICAgICB0aGlzLnByZWZpeC50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICAgICAgICAgICAgICAgdGhpcy5wcmVmaXguZm9ybWF0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXJTZXBhcmF0b3I6ICAgICAgdGhpcy5wcmVmaXgubnVtYmVyU2VwYXJhdG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa0lkOiAgICAgICAgICAgICAgICAgInBhci0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXg6ICAgICAgICAgICAgICAgdGhpcy5wcmVmaXguc3VmZml4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50U2NoZWR1bGU6ICAgICAgICAgIGRhdGFTb3VyY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VkVXNlcjogICAgICAgICAgICAgICB0aGlzLmxvZ2dlZFVzZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2pvdXJuYWw6ICAgICAgICAgICAgICB0aGlzLmpvdXJuYWxfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coMTExLGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlyb2xsSGFuZGxlci5jcmVhdGVQYXlyb2xsKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygnU3VjY2VzcycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFN1Y2Nlc3MocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5nbygtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgICAgICB9KSAgIAogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2FkU3VjY2VzcyhkYXRhKXsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2hlYWRsaW5lJyxkYXRhKQogICAgICAgICAgICB9LAogICAgICAgICAgICBkb3dubG9hZFBheXNsaXAoKXsKICAgICAgICAgICAgICAgIHZhciBkb2MgPSBuZXcganNQREYoKTsKICAgICAgICAgICAgICAgIHZhciBzcGVjaWFsRWxlbWVudEhhbmRsZXJzID0gewogICAgICAgICAgICAgICAgICAgICcjcGRmUGF5JzogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICcuY29udHJvbHMnOiBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBkb2MuZnJvbUhUTUwoJCgnLnBkZlBheScpLmdldCgwKSwgMTUsIDE1LCB7CiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogMTcwLCAKICAgICAgICAgICAgICAgICAgICAnZWxlbWVudEhhbmRsZXJzJzogc3BlY2lhbEVsZW1lbnRIYW5kbGVycwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZG9jLnNhdmUoJ0dlbmVyYXRlZC5wZGYnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2FsY3VsYXRlSm91cm5hbCgpewogICAgICAgICAgICAgICAgbGV0IHBheXJvbGxBY2MgICAgICA9ICB0aGlzLnBheXJvbGxBY2NvdW50CiAgICAgICAgICAgICAgICBsZXQgam91cm5hbHMgICAgICAgID0gdGhpcy5qb3VybmFsTGluZQogICAgICAgICAgICAgICAgbGV0IHBheXJvbGxGaW5hbCAgICA9IHRoaXMucGF5cm9sbEZpbmFsCiAgICAgICAgICAgICAgICBsZXQgcHJlZml4X2Zvcm1hdCAgID0gdGhpcy5wcmVmaXhfZm9ybWF0CiAgICAgICAgICAgICAgICBsZXQgam91cm5hbF8gICAgICAgID0gW10KICAgICAgICAgICAgICAgIGxldCBqb3VybmFsUmUgICAgICAgPSBbXQogICAgICAgICAgICAgICAgcGF5cm9sbEFjYy5mb3JFYWNoKGZ1bmN0aW9uKHBhKXsKICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGpvdXJuYWxzLmZpbHRlcihyID0+IHIuY2xhc3NfMV91dWlkID09PSBwYS5jb21wb25lbnQuaWQgKSAKICAgICAgICAgICAgICAgICAgICBqb3VybmFsXy5wdXNoKG5ldyBKb3VybmFsTW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogICAgICAgICAgICAgICAgICBwYS5wYXlyb2xsTGlhYmlsaXRpZS5uYW1lID8gcGEucGF5cm9sbExpYWJpbGl0aWUubmFtZTogJ1BheXJvbGwgJiBFbXBsb3llZSBCZW5lZml0IExpYWJpbGl0aWVzJywKICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAgICAgICAgICAgICAgICAgICAgICAgcGF5cm9sbEZpbmFsLnJlZmVyZW5jZU51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbF9kYXRlOiAgICAgICAgICAgICAgICAgSGVscGVyLnRvSVNPRGF0ZShuZXcgRGF0ZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhfb2Y6ICAgICAgICAgICAgICAgICAgICAgSGVscGVyLnRvSVNPRGF0ZShuZXcgRGF0ZShwYXlyb2xsRmluYWwubW9udGhPZikudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgNykpLC8vJzIwMjEtMDItMDEnLCAgIAogICAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsX3R5cGU6ICAgICAgICAgICAgICAgICBFbnRpdHlUeXBlLkFVVE9fSk9VUk5BTCwKICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9jdXJyZW5jeTogICAgICAgICAgICAgICAgcGF5cm9sbEZpbmFsLmN1cnJlbmN5LAogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAgICAgICAgICAgICAnUGF5cm9sbCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmFsX3RyYW5zYWN0aW9uX3V1aWQ6ICAgIHBheXJvbGxGaW5hbC5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbF9lbnRyaWVzOiAgICAgICAgICAgICAgbGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudF91dWlkOiAgICAgICAgICAgICAgICAgcGEuY29tcG9uZW50LmlkID8gcGEuY29tcG9uZW50LmlkOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25fdXVpZDogICAgICAgICAgICAgICAgcGF5cm9sbEZpbmFsLmxvY2F0aW9uLmlkID8gcGF5cm9sbEZpbmFsLmxvY2F0aW9uLmlkOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4X2Zvcm1hdDogICAgICAgICAgICAgICAgcHJlZml4X2Zvcm1hdCAvLyJQQS0yMTExLTAwMDAwQFllYXIiCiAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbGV0IGpvdXJuYWxVdWlkICAgICA9ICcnCiAgICAgICAgICAgICAgICBsZXQgY3JlYXRlZF9kYXRlICAgID0gJycKICAgICAgICAgICAgICAgIGxldCBvbGRKb3VybmFsICAgICAgPSBbXQogICAgICAgICAgICAgICAgam91cm5hbF8uZm9yRWFjaChpbmRleCA9PnsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnJlc3VsdEpvdXJuYWxzLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0Sm91cm5hbHMgPSB0aGlzLnJlc3VsdEpvdXJuYWxzCiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEpvdXJuYWwgPSByZXN1bHRKb3VybmFscy5maWx0ZXIoaSA9PiBpLnNlZ21lbnRfdXVpZCA9PT0gaW5kZXguc2VnbWVudF91dWlkKQogICAgICAgICAgICAgICAgICAgICAgICBpZihvbGRKb3VybmFsLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbFV1aWQgICAgID0gb2xkSm91cm5hbFswXS51dWlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2RhdGUgICAgPSBvbGRKb3VybmFsWzBdLmNyZWF0ZWRfZGF0ZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGpvdXJuYWxSZS5wdXNoKG5ldyBKb3VybmFsTW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogICAgICAgICAgICAgICAgaW5kZXguZGVzY3JpcHRpb24sICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAgICAgICAgICAgICAgICAgICAgIGluZGV4Lm51bWJlciwgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsX2RhdGU6ICAgICAgICAgICAgICAgaW5kZXguam91cm5hbF9kYXRlLCAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoX29mOiAgICAgICAgICAgICAgICAgICBpbmRleC5tb250aF9vZiwgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsX3R5cGU6ICAgICAgICAgICAgICAgaW5kZXguam91cm5hbF90eXBlLCAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAgICAgICAgICAgaW5kZXgudHJhbnNhY3Rpb25fdHlwZSwgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJyYWxfdHJhbnNhY3Rpb25fdXVpZDogIGluZGV4LnJlZmVycmFsX3RyYW5zYWN0aW9uX3V1aWQsICAKICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbF9lbnRyaWVzOiAgICAgICAgICAgIGluZGV4LmpvdXJuYWxfZW50cmllcywgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50X3V1aWQ6ICAgICAgICAgICAgICAgaW5kZXguc2VnbWVudF91dWlkLCAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uX3V1aWQ6ICAgICAgICAgICAgICBpbmRleC5sb2NhdGlvbl91dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXhfZm9ybWF0OiAgICAgICAgICAgICAgaW5kZXgucHJlZml4X2Zvcm1hdCwKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9kYXRlOiAgICAgICAgICAgICAgIGNyZWF0ZWRfZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9jdXJyZW5jeTogICAgICAgICAgICAgIGluZGV4LmN1cnJlbmN5LAogICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbFV1aWQKICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLmpvdXJuYWxfZGF0YSA9IGpvdXJuYWxSZQogICAgICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCdqb3VybmFsX2RhdGEnLCB0aGlzLmpvdXJuYWxfZGF0YSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbG9hZEFjY291bnQoKXsKICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SGFuZGxlci5nZXRBbGwoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY291bnRMaXN0ID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2FsYXJ5RXhwZW5jZSA9IGFjb3VudExpc3QuZmlsdGVyKHQgPT4gdC5udW1iZXIgPT0gJzYzNDAxMCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FsYXJ5RXhwZW5jZSA9IHNhbGFyeUV4cGVuY2VbMF0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRheFBheWJsZSA9IGFjb3VudExpc3QuZmlsdGVyKHQgPT4gdC5udW1iZXIgPT0gJzIyMTAyMCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGF4UGF5YmxlID0gdGF4UGF5YmxlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjY291bnRCZW5lZml0ID0gYWNvdW50TGlzdC5maWx0ZXIodCA9PiB0Lm51bWJlciA9PSAnNjM0MDIwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50QmVuZWZpdCA9IGFjY291bnRCZW5lZml0WzBdCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY2NCZW5lZml0ID0gYWNvdW50TGlzdC5maWx0ZXIodCA9PiB0Lm51bWJlciA9PSAnMjIxMDQwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NCZW5lZml0ID0gYWNjQmVuZWZpdFswXQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmVuZWZpdFBheWJsZSA9IGFjb3VudExpc3QuZmlsdGVyKHQgPT4gdC5udW1iZXIgPT0gJzIyMTA0MCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVuZWZpdFBheWJsZSA9IGJlbmVmaXRQYXlibGVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jIGdvQmFjaygpewogICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuZ28oLTEpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jIGxvYWRKb3VybmFsKCl7CiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGF5cm9sbEhhbmRsZXIuZ2V0UGF5cm9sbEpvdXJuYWwodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0Sm91cm5hbHMgPSAgcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LCAzMDApCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICBTZXJ2aWNlRGF0ZUVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAgICAgICAgICAgIGtlbmRvLmpRdWVyeSgnPGlucHV0IHJlcXVpcmVkIG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGNvbnRhaW5lcikKICAgICAgICAgICAgICAgICAgICAua2VuZG9EYXRlUGlja2VyKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJvd051bWJlclRtcGwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgICAgIHZhciBkcyA9IHRoaXMuJHJlZnMuZGF0YVNvdXJjZVBheURheS5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRSb3coKSB7CiAgICAgICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2VQYXlEYXkua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IGRzLnRvdGFsKCk7CiAgICAgICAgICAgICAgICBkcy5pbnNlcnQodG90YWwsewogICAgICAgICAgICAgICAgICAgIHBheURhdGU6IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVSb3coZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgY29uc3QgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRQYXlEYXkiKS5kYXRhKCJrZW5kb0dyaWQiKSwKICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gZ3JpZC5kYXRhU291cmNlLAogICAgICAgICAgICAgICAgICAgIGRhdGFJdGVtID0gZ3JpZC5kYXRhSXRlbSgkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgidHIiKSk7CiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS50b3RhbCgpID4gMSkgewogICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UucmVtb3ZlKGRhdGFJdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbW91bnRlZCgpewogICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFJvdygpCiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheXJvbGxMaXN0KCkKICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUHJlZml4ZXMoKQogICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRKb3VybmFsKCkKICAgICAgICB9LAogICAgICAgIHdhdGNoOiB7CiAgICAgICAgICAgIHByb3BGaW5hbGl6ZSgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BGaW5hbGl6ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUGF5cm9sbExpc3QoKQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFByZWZpeGVzKCkKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRBY2NvdW50KCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["Finalize.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Finalize.vue","sourceRoot":"src/views/payroll/payroll_run","sourcesContent":["<template>\n    <v-row>\n        <v-col cols=\"12\" class=\"pt-0\">\n            <v-row>\n                <v-col sm=\"8\" cols=\"12\" class=\"pb-0\">\n                    <h3 class=\"text-uppercase\">{{$t('finalize')}}</h3>\n                    <p>{{$t('finalize_payroll_desc')}}</p>\n                </v-col>\n                <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                \n                    <kendo-datasource ref=\"dataSourcePayDay\"\n                        :data=\"payDates\"/>\n                    <kendo-grid id=\"gridPayDay\" class=\"grid-function\"\n                        :data-source-ref=\"'dataSourcePayDay'\"\n                        :editable=\"true\"\n                        :scrollable-virtual=\"true\">\n                        <kendo-grid-column\n                            :title=\"$t('No.')\"\n                            :width=\"70\"\n                            readonly\n                            :template=\"rowNumberTmpl\"\n                            :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                        <kendo-grid-column\n                            :field=\"'payDate'\"\n                            :title=\"$t('pay_date')\"\n                            :width=\"120\"\n                            :template=\"'<span>#= kendo.toString(new Date(payDate), `dd-MM-yyyy`)#</span>'\"\n                            :editor=\"ServiceDateEditor\"\n                            :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                         <kendo-grid-column\n                            :width=\"100\"\n                            :command=\"{ iconClass: 'k-icon k-i-trash', text: ' ', click: removeRow, class: 'btn-plus' }\"\n                            :title=\"$t('action')\"\n                            :headerAttributes=\"{style: 'text-align: center; background-color: #EDF1F5'}\"\n                            :attributes=\"{style: 'text-align: center'}\"/>\n                    </kendo-grid>\n                    <v-row>\n                        <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                            <v-btn\n                                color=\"primary\"\n                                class=\"float-left btn_plus mr-2\"\n                                @click=\"addRow\">\n                                <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n                </v-col>\n            </v-row>\n        </v-col>\n        <v-col cols=\"12\" class=\"mt-1\">\n            <v-simple-table class=\"attachment_table\">\n                <template v-slot:default>\n                    <thead>\n                        <tr>\n                            <th>{{$t('sl_no')}} </th>\n                            <th>{{$t('current_month')}} </th>\n                            <th>{{$t('previous_month')}} </th>\n                            <th>{{$t('variance')}} </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>Month</td>\n                            <td style=\"text-align: right;\">{{ payrollFinal.monthOf }}</td>\n                            <td style=\"text-align: right;\">{{ payrollPrevious.monthOf}}</td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td>Number of Employee</td>\n                            <td style=\"text-align: right;\">{{ payrollFinal.totalEmployee }}</td>\n                            <td style=\"text-align: right;\">{{ payrollPrevious.totalEmployee }}</td>\n                            <td style=\"text-align: right;\">{{ payrollFinal.totalEmployee - payrollPrevious.totalEmployee }}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Gross Salary</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalGross)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollPrevious.totalGross)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalGross - payrollPrevious.totalGross)}}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Deduction</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalDeduction)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollPrevious.totalDeduction)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalDeduction - payrollPrevious.totalDeduction)}}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Benefits</td>\n                            <td style=\"text-align: right;\">{{ numberFormat(payrollFinal.totalBenefits) }}</td>\n                            <td style=\"text-align: right;\">{{ numberFormat(payrollPrevious.totalBenefits) }}</td>\n                            <td style=\"text-align: right;\">{{ numberFormat(payrollFinal.totalBenefits - payrollPrevious.totalBenefits) }}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Tax Payment</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalTaxPaymentUS)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollPrevious.totalTaxPaymentUS)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalTaxPaymentUS - payrollPrevious.totalTaxPaymentUS)}}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Tax Benefit</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalTaxBenefit)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollPrevious.totalTaxBenefit)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalTaxBenefit - payrollPrevious.totalTaxBenefit)}}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Net Salary</td>\n                            <td style=\"text-align: right;\">{{ numberFormat(payrollFinal.totalNetSalary)}}</td>\n                            <td style=\"text-align: right;\">{{ numberFormat(payrollPrevious.totalNetSalary)}}</td>\n                            <td style=\"text-align: right;\">{{ numberFormat(payrollFinal.totalNetSalary - payrollPrevious.totalNetSalary)}}</td>\n                        </tr>\n                        <tr>\n                            <td>Total Net Pay</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalNetPay)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollPrevious.totalNetPay)}}</td>\n                            <td style=\"text-align: right;\">{{numberFormat(payrollFinal.totalNetPay - payrollPrevious.totalNetPay)}}</td>\n                        </tr>\n                        <!-- <tr>\n                            <td></td>\n                            <td>Download Salary Register</td>\n                            <td>Download Salary Register</td>\n                            <td>\n                                <v-btn width=\"160\" color=\"primary\" @click=\"downloadPayslip\"\n                                    class=\" white--text float-right text-capitalize ml-5\">\n                                    {{ $t('download_payslip') }}\n                                </v-btn>\n                            </td>\n                        </tr> -->\n                    </tbody>\n                </template>\n            </v-simple-table>\n        </v-col>\n        <LoadingMe :isLoading=\"showLoading\" :fullPage=\"true\" :myLoading=\"true\" type=\"loading\"/>\n    </v-row>\n</template>\n<script>\n    import kendo from \"@progress/kendo-ui\"\n    import Helper from \"@/helper.js\";\n    import {JournalModel,\n    JournalEntryModel,\n    AccountModel,\n\tCurrencyModel,} from \"@/scripts/model/AppModels\";\n    import  jsPDF  from \"jspdf\";\n    const $ = require(\"jquery\")\n    const { EntityType, } = require(\"@/scripts/default_setup/Collections\");\n    const settingsHandler = require(\"@/scripts/settingsHandler\")\n    const payrollHandler = require(\"@/scripts/payrollHandler\")\n    const accountHandler = require(\"@/scripts/handler/accounting/account\");\n    const cookieJS = require(\"@/cookie.js\");\n    const cookie = cookieJS.getCookie();\n    export default {\n        props:['propFinalize'],\n        data: () =>({\n            journal: new JournalModel(),\n            journal_date: \"\",\n            dialogm: false,\n            showLoading: true,\n            payrollFinal: {\n                monthOf: '',\n                totalEmployee: 0,\n                totalGross: 0,\n                totalDeduction: 0,\n                totalBenefits: 0,\n                totalTaxPaymentUS: 0,\n                totalTaxBenefit: 0,\n                totalNetSalary: 0,\n                totalNetPay: 0,\n                taxBenefit: 0,\n            },\n            payrollPrevious: {\n                monthOf: '',\n                totalEmployee: 0,\n                totalGross: 0,\n                totalDeduction: 0,\n                totalBenefits: 0,\n                totalTaxBenefit: 0,\n                totalTaxPaymentUS: 0,\n                totalNetSalary: 0,\n                totalNetPay: 0,\n                taxBenefit: 0,\n            },\n            account: {},\n            journal_data: [],\n            payroll_data: {},\n            journalLine: [],\n            taxPayble: {},\n            accountBenefit: {},\n            accBenefit: {},\n            resultJournals: {},\n            loggedUser: {\n                id: cookie.creator,\n                name: cookie.email\n            },\n            payDates: [],\n            suffix: {},\n            prefix_format: ''\n        }),\n        components: {\n            LoadingMe: () => import(`@/components/Loading`)\n        },\n        methods:{\n            numberFormat(value){\n                return kendo.toString( kendo.parseFloat(value),\"n2\")\n            },\n            loadPayrollList(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        this.showLoading = true;\n                        payrollHandler.getPayroll(this.$route.params.id).then(res => {\n                            this.showLoading = true;\n                            if(res.data.statusCode === 200){\n                                this.showLoading = true\n                                const resultPay = res.data.data[0]\n                                const prefix = resultPay.payNumber\n                                // window.console.log('resultPay', resultPay)\n                                const lastNumber = this.zeroPad(parseInt(0), prefix.format)\n                                this.prefix_format = (prefix.abbr + prefix.numberSeparator + prefix.structure + prefix.numberSeparator + lastNumber + '@' + prefix.sequcencing)\n                                let monthOF =  kendo.toString(new Date(new Date(resultPay.monthOf).setMonth(new Date(resultPay.monthOf).getMonth() - 1)),'yyyy-MM-dd')\n                                this.loadPayrollPrevious(monthOF)\n                                this.loadPayrollItem(resultPay)\n                            }\n                        })\n                    }, 300);\n                })\n            },\n            loadPayrollItem(result){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        this.employee = []\n                        payrollHandler.getPayrollItem(result.id).then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                let resutl_item = res.data.data\n                                this.payrollFinal = result\n                                this.payrolls = resutl_item\n                                this.loadSuccess(res.data.statusCode)\n                                this.loadAccount()\n                                this.showLoading = false\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            loadPayrollPrevious(monthOF){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        payrollHandler.getPayrollPrevious(monthOF).then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                let result = res.data.data\n                                if(result.length > 0){\n                                    this.payrollPrevious = result[0]\n                                }\n                                this.changMonthOf = false\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            loadPrefixes() {\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        settingsHandler.getPrefixes().then(res => {\n                            if (res.data.statusCode === 200) {\n                                let result = res.data.data\n                                if(result.length > 0){\n                                    this.prefixList = result.filter(p => p.type =='pay_slip')\n                                    this.prefix = this.prefixList[0]\n                                    this.payNumber = this.prefix\n                                }\n                            }\n                        })\n                    }, 300)\n                })\n            },\n            zeroPad(num, places) {\n                return String(num).padStart(places, '0')\n            },\n            result(){\n                let dataResult =    this.payrolls;\n                let currency   =    this.payrollFinal.currency;\n                let monthOf    =    this.payrollFinal.monthOf;\n                let month_of   =    kendo.toString(new Date(monthOf), \"y\")\n                let segmentAR = []\n                dataResult.forEach(o=>{\n                    const segment           = o.segment\n                    segment.forEach(n=> {\n                        n['currency']               = currency,\n                        n['netPay']                 = (o.netPay * n.percentage)/100,\n                        n['taxBenefit']             = (o.taxBenefit * n.percentage)/100,\n                        n['taxSalaryUS']            = (o.taxSalaryUS * n.percentage)/100,\n                        n['totalBenefit']           = (o.totalBenefit * n.percentage)/100,\n                        n['payrollLiabilitie']      = o.payrollLiabilitie,\n                        n['taxBenefitExchange']     = (o.taxBenefitExchange * n.percentage)/100,\n                        n['salaryExchange']         = (o.salaryExchange * n.percentage)/100,\n                        n['taxSalary']              = (o.taxSalary * n.percentage)/100,\n                        n['benefitExchange']        = (o.benefitExchange * n.percentage)/100,\n                        segmentAR.push(n)\n                    })\n                })\n                let calculateSalary     = segmentAR.map(i=>{\n                    return {\n                        salary:             i.Salary,\n                        percentage:         i.percentage,\n                        netPay :            i.netPay,\n                        taxBenefit:         i.taxBenefit,\n                        taxSalary:          i.taxSalaryUS,\n                        totalBenefit:       i.totalBenefit,\n                        taxBenefitExchange: i.taxBenefitExchange,\n                        salaryExchange:     i.salaryExchange,\n                        benefitExchange:    i.taxBenefitExchange,\n                        component:          i.component,\n                        salaryAccount:      i.salaryAccount,\n                        currency:           i.currency,\n                        payrollLiabilitie:  i.payrollLiabilitie,\n                    }\n                })\n                let helper = {}\n                let resultSegment   = calculateSalary.reduce(function(r, o){\n                    let key = o.component.id + '-' + o.component.name;\n                    if(!helper[key]) {\n                        helper[key] = Object.assign({}, o); // create a copy of o\n                        r.push(helper[key]);\n                    } else {\n                        helper[key].percentage          += parseFloat(o.percentage);\n                        helper[key].salary              += parseFloat(o.salary);\n                        helper[key].netPay              += parseFloat(o.netPay);\n                        helper[key].taxBenefit          += parseFloat(o.taxBenefit);\n                        helper[key].taxSalary           += parseFloat(o.taxSalary);\n                        helper[key].totalBenefit        += parseFloat(o.totalBenefit);\n                        helper[key].taxBenefitExchange  += parseFloat(o.taxBenefitExchange),\n                        helper[key].salaryExchange      += parseFloat(o.salaryExchange),\n                        helper[key].benefitExchange     += parseFloat(o.benefitExchange)\n                    }\n                    return r;\n                },[]);\n                let journals        =[];\n                let taxPayble       = this.taxPayble\n                let accountBenefit  = this.accountBenefit\n                let accBenefit      = this.accBenefit\n                resultSegment.forEach(function(p){\n                    journals.push(\n                        new JournalEntryModel({\n                            description:          p.salaryAccount.name + ' for '+ month_of,\n                            account:              new AccountModel(p.salaryAccount),\n                            exchange_rate:        1,\n                            currency:             new CurrencyModel(p.currency),\n                            amount:               p.salary, // dr\n                            class_1_uuid:         p.component.id          \n                        }),\n                        new JournalEntryModel({\n                            description:          p.payrollLiabilitie.name + ' for '+ month_of,\n                            account:              new AccountModel(p.payrollLiabilitie),\n                            exchange_rate:        1,\n                            currency:             new CurrencyModel(p.currency),\n                            amount:               p.netPay * -1, // cr\n                            class_1_uuid:         p.component.id\n                        }),\n                        new JournalEntryModel({\n                            description:          taxPayble.name + ' for '+ month_of,\n                            account:              new AccountModel(taxPayble),\n                            exchange_rate:        1,\n                            currency:             new CurrencyModel(p.currency),\n                            amount:               p.taxSalary * -1, // cr,\n                            class_1_uuid:         p.component.id\n                        }),\n                    )\n                    if(p.taxBenefit > 0 && p.totalBenefit > 0){\n                        journals.push(\n                            new JournalEntryModel({\n                                description:          accountBenefit.name + ' for '+ month_of,\n                                account:              new AccountModel(accountBenefit),\n                                currency:             new CurrencyModel(p.currency),\n                                exchange_rate:        1,\n                                amount:               p.totalBenefit, // dr,\n                                class_1_uuid:         p.component.id\n                            }),\n                            new JournalEntryModel({\n                                description:          accBenefit.name + ' for '+ month_of,\n                                account:              new AccountModel(accBenefit),\n                                exchange_rate:        1,\n                                currency:             new CurrencyModel(p.currency),\n                                amount:               p.taxBenefit * -1, // cr,\n                                class_1_uuid:         p.component.id\n                            }),\n                        )\n                    }\n                })\n                this.payrollAccount = resultSegment\n                this.journalLine = journals\n                if(this.payrollAccount && this.journalLine){\n                    this.calculateJournal()\n                }\n            },\n            saveFinalize(){\n                let ds = this.$refs.dataSourcePayDay.kendoWidget();\n                let dataSource = ds.data().map(index=>{\n                    return {\n                        payDate:           kendo.toString(new Date(index.payDate),\"yyyy-MM-dd\")\n                    }\n                })\n                if(this.journal_data.length > 0){\n                    new Promise(resolve => {\n                        setTimeout(() => {\n                            resolve('resolved');\n                            let data ={\n                                id:                       this.$route.params.id,\n                                status:                   1, \n                                final:                    'done',\n                                monthOf:                  this.payrollFinal.monthOf,\n                                year:                     kendo.toString(new Date(this.payrollFinal.monthOf),'yyyy'),\n                                created:                  this.payrollFinal.created,\n                                date:                     this.payrollFinal.date,\n                                type:                     this.payrollFinal.type,\n                                currency:                 this.payrollFinal.currency,\n                                exchangeRate:             this.payrollFinal.exchangeRate,\n                                payrollReferenceNumber:   this.payrollFinal.referenceNumber,\n                                payrollList:              this.payrolls,\n                                lastNumber:               this.lastNumber,\n                                payslip:                  {\n                                    abbr:                 this.prefix.abbr,\n                                    structure:            this.prefix.structure,\n                                    date:                 this.payrollFinal.monthOf,\n                                    type:                 this.prefix.type,\n                                    format:               this.prefix.format,\n                                    numberSeparator:      this.prefix.numberSeparator,\n                                    pkId:                 \"par-\",\n                                    suffix:               this.prefix.suffix\n                                },\n                                paymentSchedule:          dataSource,\n                                loggedUser:               this.loggedUser,\n                                raw_journal:              this.journal_data\n                            }\n                            this.showLoading = true;\n                            // window.console.log(111,data)\n                            payrollHandler.createPayroll(data).then(response => {\n                                this.showLoading = true\n                                if (response.data.statusCode === 201) {\n                                    this.$snotify.success('Success')\n                                    this.loadSuccess(response.data.statusCode)\n                                    window.history.go(-1)\n                                }\n                            }).catch(e => {\n                                this.$snotify.error('Something went wrong')\n                                this.errors.push(e)\n                            })\n                        }, 300);\n                    })   \n                }else{\n                    this.$snotify.error('Something went wrong')\n                }\n            },\n            loadSuccess(data){\n                this.$emit('headline',data)\n            },\n            downloadPayslip(){\n                var doc = new jsPDF();\n                var specialElementHandlers = {\n                    '#pdfPay': function(){\n                    return true;\n                    },\n                    '.controls': function(){\n                    return true;\n                    }\n                };\n                doc.fromHTML($('.pdfPay').get(0), 15, 15, {\n                    'width': 170, \n                    'elementHandlers': specialElementHandlers\n                });\n\n                doc.save('Generated.pdf');\n            },\n            calculateJournal(){\n                let payrollAcc      =  this.payrollAccount\n                let journals        = this.journalLine\n                let payrollFinal    = this.payrollFinal\n                let prefix_format   = this.prefix_format\n                let journal_        = []\n                let journalRe       = []\n                payrollAcc.forEach(function(pa){\n                    let line = journals.filter(r => r.class_1_uuid === pa.component.id ) \n                    journal_.push(new JournalModel({\n                        description:                  pa.payrollLiabilitie.name ? pa.payrollLiabilitie.name: 'Payroll & Employee Benefit Liabilities',\n                        number:                       payrollFinal.referenceNumber,\n                        journal_date:                 Helper.toISODate(new Date()),\n                        month_of:                     Helper.toISODate(new Date(payrollFinal.monthOf).toISOString().substr(0, 7)),//'2021-02-01',   \n                        journal_type:                 EntityType.AUTO_JOURNAL,\n                        base_currency:                payrollFinal.currency,\n                        transaction_type:             'Payroll',\n                        referral_transaction_uuid:    payrollFinal.id,\n                        journal_entries:              line,\n                        segment_uuid:                 pa.component.id ? pa.component.id: '',\n                        location_uuid:                payrollFinal.location.id ? payrollFinal.location.id: '',\n                        prefix_format:                prefix_format //\"PA-2111-00000@Year\"\n                    }))\n                })\n                let journalUuid     = ''\n                let created_date    = ''\n                let oldJournal      = []\n                journal_.forEach(index =>{\n                    if(this.resultJournals.length > 0){\n                        let resultJournals = this.resultJournals\n                        oldJournal = resultJournals.filter(i => i.segment_uuid === index.segment_uuid)\n                        if(oldJournal.length > 0){\n                            journalUuid     = oldJournal[0].uuid\n                            created_date    = oldJournal[0].created_date\n                        }\n                    }\n                    journalRe.push(new JournalModel({\n                        description:                index.description,                 \n                        number:                     index.number,     \n                        journal_date:               index.journal_date,        \n                        month_of:                   index.month_of,                    \n                        journal_type:               index.journal_type,               \n                        transaction_type:           index.transaction_type,            \n                        referral_transaction_uuid:  index.referral_transaction_uuid,  \n                        journal_entries:            index.journal_entries,     \n                        segment_uuid:               index.segment_uuid,  \n                        location_uuid:              index.location_uuid,\n                        prefix_format:              index.prefix_format,\n                        created_date:               created_date,\n                        base_currency:              index.currency,\n                        uuid:                       journalUuid\n                    }))\n                })\n                this.journal_data = journalRe\n                // window.console.log('journal_data', this.journal_data)\n            },\n            loadAccount(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        accountHandler.getAll().then(res => {\n                            this.showLoading = true;\n                            if(res){\n                                this.showLoading = false;\n                                let acountList = res.data\n                                let salaryExpence = acountList.filter(t => t.number == '634010');\n                                this.salaryExpence = salaryExpence[0]\n\n                                let taxPayble = acountList.filter(t => t.number == '221020');\n                                this.taxPayble = taxPayble[0]\n                                let accountBenefit = acountList.filter(t => t.number == '634020');\n                                this.accountBenefit = accountBenefit[0]\n\n                                let accBenefit = acountList.filter(t => t.number == '221040');\n                                this.accBenefit = accBenefit[0]\n\n                                let benefitPayble = acountList.filter(t => t.number == '221040');\n                                this.benefitPayble = benefitPayble[0]\n                                this.result()\n                            }\n                        })\n                    }, 300);\n                })\n            },\n            async goBack(){\n                window.history.go(-1)\n            },\n            async loadJournal(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        payrollHandler.getPayrollJournal(this.$route.params.id).then(res => {\n                            if (res.statusCode === 200) {\n                                this.resultJournals =  res.data\n                            }\n                        })\n                    }, 300)\n                })\n            },\n            ServiceDateEditor(container, options) {\n                kendo.jQuery('<input required name=\"' + options.field + '\"/>')\n                    .appendTo(container)\n                    .kendoDatePicker();\n            },\n            rowNumberTmpl(dataItem) {\n                var ds = this.$refs.dataSourcePayDay.kendoWidget(),\n                    index = ds.indexOf(dataItem);\n                return index + 1;\n            },\n            addRow() {\n                let ds = this.$refs.dataSourcePayDay.kendoWidget(),\n                    total = ds.total();\n                ds.insert(total,{\n                    payDate: new Date()\n                });\n            },\n            removeRow(e) {\n                e.preventDefault();\n                const grid = kendo.jQuery(\"#gridPayDay\").data(\"kendoGrid\"),\n                    dataSource = grid.dataSource,\n                    dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n                if (dataSource.total() > 1) {\n                    dataSource.remove(dataItem);\n                }\n            }\n        },\n        async mounted(){\n            await this.addRow()\n            await this.loadPayrollList()\n            await this.loadPrefixes()\n            await this.loadJournal()\n        },\n        watch: {\n            propFinalize() {\n                if (this.propFinalize !== undefined) {\n                    this.loadPayrollList()\n                    this.loadPrefixes()\n                    this.loadAccount()\n                }\n            }\n        }\n    }\n</script>\n<style scoped>\n    .grayBg{\n        background-color: #F8F8F9;\n    }\n    .my_table_darkv .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n        color: rgba(0, 0, 0, 0.6);\n        background: #222a35;\n        color: #fff !important;\n    }"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/budgeting/budgets/BudgetChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/budgeting/budgets/BudgetChart.vue","mtime":1638499443140},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQga2VuZG8gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXVpJzsKICAgIGltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJwogICAgaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7CiAgICBpbXBvcnQgeyBDaGFydCB9IGZyb20gIkBwcm9ncmVzcy9rZW5kby1jaGFydHMtdnVlLXdyYXBwZXIiOwogICAgLyogTW9kZWxzICovCiAgICBpbXBvcnQgQnVkZ2V0TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0J1ZGdldC5qcyI7CiAgICBpbXBvcnQgQWNjb3VudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BY2NvdW50LmpzIjsKCiAgICBjb25zdCBhY2NvdW50SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL2FjY291bnRpbmcvYWNjb3VudC5qcyIpOwogICAgY29uc3QgYnVkZ2V0SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL3dvcmtpbmdjYXBpdGFsL2J1ZGdldEhhbmRsZXIuanMiKTsKICAgIGNvbnN0IE51bWJlckluV29yZCA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL051bWJlckluV29yZC5qcyIpOwoKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBuYW1lOiAiQnVkZ2V0Q2hhcnQiLAogICAgICAgIGNvbXBvbmVudHM6ewogICAgICAgICAgICAnY2hhcnQnIDogQ2hhcnQsCiAgICAgICAgfSwKICAgICAgICBwcm9wczogewogICAgICAgICAgICBpbml0QnVkZ2V0OiB7CiAgICAgICAgICAgICAgICB0eXBlOiBCdWRnZXRNb2RlbCwKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgICAgIGJ1ZGdldCA6IG5ldyBCdWRnZXRNb2RlbCgpLAogICAgICAgICAgICBzZXJpZXM6IFtdLAogICAgICAgICAgICBjYXRlZ29yeUF4aXM6IFtdLAogICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6ICIjPSBzZXJpZXMubmFtZSAjOiAjPSB2YWx1ZSAjIgogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGFydEFyZWE6IHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI4MCwKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGFzeW5jIGxvYWREYXRhICgpIHsKICAgICAgICAgICAgICAgIC8qIEJpbmQgQnVkZ2V0ICovCiAgICAgICAgICAgICAgICB0aGlzLmJ1ZGdldCA9IHRoaXMuaW5pdEJ1ZGdldDsKCiAgICAgICAgICAgICAgICAvKiBTZXQgQ3VycmVudCBGaXNjYWwgRGF0ZSAqLwogICAgICAgICAgICAgICAgbGV0IGN1cnJlbmN5RmlzY2FsRGF0ZSA9IEhlbHBlci5nZXRGaXNjYWxEYXRlQnlEYXRlKG5ldyBEYXRlKCkpOwogICAgICAgICAgICAgICAgbGV0IGZpc2NhbE1vbnRocyA9IEhlbHBlci5nZW5lcmF0ZUZpc2NhbE1vbnRocyhjdXJyZW5jeUZpc2NhbERhdGUuc3RhcnRfZGF0ZSwgY3VycmVuY3lGaXNjYWxEYXRlLmVuZF9kYXRlLCAiMTIiKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLyogQ2F0ZWdvcmllcyAqLwogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUF4aXMgPSBmaXNjYWxNb250aHM7CgogICAgICAgICAgICAgICAgLy8gTG9hZCBBY2NvdW50IExpc3QKICAgICAgICAgICAgICAgIGxldCBhY2NvdW50cyA9IGF3YWl0IGFjY291bnRIYW5kbGVyLmdldEFsbCgpOwoKICAgICAgICAgICAgICAgIC8qIEJ1ZGdldCBTZXJpZXMgKi8KICAgICAgICAgICAgICAgIGxldCBidWRnZXRTZXJpZXMgPSBbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDBdOy8vIERlZmF1bHQgMTIgbW9udGhzCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8qIEdhdGhlcmluZyBmcm9tIGxpbmUgKi8KICAgICAgICAgICAgICAgIHRoaXMuYnVkZ2V0LmxpbmVzLmZvckVhY2godmFsdWUgPT4gewogICAgICAgICAgICAgICAgICAgIC8qIFNldCBBY2NvdW50IEluZm9ybWF0aW9uICovCiAgICAgICAgICAgICAgICAgICAgbGV0IGFjY291bnQgPSBuZXcgQWNjb3VudE1vZGVsKGFjY291bnRzLmRhdGEuZmluZChpdGVtID0+IGl0ZW0udXVpZCA9PT0gdmFsdWUuYWNjb3VudF91dWlkKSk7CgogICAgICAgICAgICAgICAgICAgIC8qIFJldmVyc2UgTmF0dXJlICovCiAgICAgICAgICAgICAgICAgICAgbGV0IG5hdHVyZSA9IDE7IC8qIERlZmF1bHQgTmF1cmUgaXMgRHIgPSAxICovCiAgICAgICAgICAgICAgICAgICAgaWYoYWNjb3VudC5hY2NvdW50X3R5cGUubmF0dXJlLnRvTG93ZXJDYXNlKCkgPT09ICJjciIpewogICAgICAgICAgICAgICAgICAgICAgICBuYXR1cmUgPSAtMTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8qIE1vbnRobHkgQW1vdW50ICovCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZGdldFNlcmllc1tpXSArPSB2YWx1ZS5tb250aGx5X2Ftb3VudFtpXS5hbW91bnQgKiBuYXR1cmU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLyogR2F0aGVyaW5nIGZyb20gYnVkZ2V0IGVzdGltYXRpb25zICovCiAgICAgICAgICAgICAgICB0aGlzLmJ1ZGdldC5idWRnZXRfZXN0aW1hdGlvbnMuZm9yRWFjaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4TmFtZSA9IE51bWJlckluV29yZFtpXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZGdldFNlcmllc1tpXSArPSB2YWx1ZVtpbmRleE5hbWVdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLyogRW5kIEJ1ZGdldCBTZXJpZXMgKi8KCiAgICAgICAgICAgICAgICAvKiBBY3R1YWwgU2VyaWVzICovCiAgICAgICAgICAgICAgICBsZXQgYWN0dWFsU2VyaWVzID0gWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXTsvLyBEZWZhdWx0IDEyIG1vbnRocwoKICAgICAgICAgICAgICAgIGxldCBhY3R1YWxzID0gYXdhaXQgYnVkZ2V0SGFuZGxlci5nZXRBY3R1YWxCdWRnZXRGb3JDb25zb2xpZGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zIDogewogICAgICAgICAgICAgICAgICAgICAgICBhc19vZl9kYXRlIAkJOiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSgpLCAneXl5eS1NTS1kZCcpICsgJ1QyMzo1OTo1OS45OTlaJywvLyBBcyBPZiBEYXRlIGlzIFRvZGF5CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX2J5IAkJOiAiMTIiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgYWN0dWFscy5kYXRhLmZvckVhY2godmFsdWUgPT4gewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleE5hbWUgPSBOdW1iZXJJbldvcmRbaV07CgogICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxTZXJpZXNbaV0gKz0gdmFsdWVbaW5kZXhOYW1lXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8qIEVuZCBBY3R1YWwgU2VyaWVzICovCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8qIEJpbmQgU2VyaWVzICovCiAgICAgICAgICAgICAgICB0aGlzLnNlcmllcyA9IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGkxOG4udCgiYnVkZ2V0IiksCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJ1ZGdldFNlcmllcywKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjNGQ0ODQ4IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBpMThuLnQoImFjdHVhbCIpLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBhY3R1YWxTZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiI2M4MDAwMCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIC8qIFJlZnJlc2ggQ2hhcnQgKi8KICAgICAgICAgICAgICAgIGxldCBidWRnZXRDaGFydCA9IHRoaXMuJHJlZnMuYnVkZ2V0Q2hhcnQua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgICAgIGJ1ZGdldENoYXJ0LnJlZnJlc2goKTsKCQkJfSwKICAgICAgICB9LAogICAgICAgIHdhdGNoOiB7CiAgICAgICAgICAgIGluaXRCdWRnZXQgKCkgewogICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICB9Owo="},{"version":3,"sources":["BudgetChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BudgetChart.vue","sourceRoot":"src/views/budgeting/budgets","sourcesContent":["<template>\n    <chart ref=\"budgetChart\"\n        :legend-position=\"'bottom'\"\n        :legend-visible=\"false\"\n        :tooltip=\"tooltip\"\n        :series=\"series\"\n        :series-defaults-type=\"'line'\"\n        :series-defaults-style=\"'smooth'\"\n        :category-axis-categories=\"categoryAxis\"\n        :value-axis-labels-format=\"'{0}'\"\n        :chartArea=\"chartArea\"\n        :theme=\"'sass'\"\n    />\n</template>\n\n<script>\n    import kendo from '@progress/kendo-ui';\n    import {i18n} from '@/i18n'\n    import Helper from \"@/helper.js\";\n    import { Chart } from \"@progress/kendo-charts-vue-wrapper\";\n    /* Models */\n    import BudgetModel from \"@/scripts/model/Budget.js\";\n    import AccountModel from \"@/scripts/model/Account.js\";\n\n    const accountHandler = require(\"@/scripts/handler/accounting/account.js\");\n    const budgetHandler = require(\"@/scripts/handler/workingcapital/budgetHandler.js\");\n    const NumberInWord = require(\"@/scripts/default_setup/NumberInWord.js\");\n\n    export default {\n        name: \"BudgetChart\",\n        components:{\n            'chart' : Chart,\n        },\n        props: {\n            initBudget: {\n                type: BudgetModel,\n            },\n        },\n        data: () => ({\n            budget : new BudgetModel(),\n            series: [],\n            categoryAxis: [],\n            tooltip: {\n                visible: true,\n                template: \"#= series.name #: #= value #\"\n            },\n            chartArea: {\n                background: \"transparent\",\n                height: 280,\n            },\n        }),\n        methods: {\n            async loadData () {\n                /* Bind Budget */\n                this.budget = this.initBudget;\n\n                /* Set Current Fiscal Date */\n                let currencyFiscalDate = Helper.getFiscalDateByDate(new Date());\n                let fiscalMonths = Helper.generateFiscalMonths(currencyFiscalDate.start_date, currencyFiscalDate.end_date, \"12\");\n                \n                /* Categories */\n                this.categoryAxis = fiscalMonths;\n\n                // Load Account List\n                let accounts = await accountHandler.getAll();\n\n                /* Budget Series */\n                let budgetSeries = [0,0,0,0,0,0,0,0,0,0,0,0];// Default 12 months\n                \n                /* Gathering from line */\n                this.budget.lines.forEach(value => {\n                    /* Set Account Information */\n                    let account = new AccountModel(accounts.data.find(item => item.uuid === value.account_uuid));\n\n                    /* Reverse Nature */\n                    let nature = 1; /* Default Naure is Dr = 1 */\n                    if(account.account_type.nature.toLowerCase() === \"cr\"){\n                        nature = -1;\n                    }\n\n                    /* Monthly Amount */\n                    for (let i = 0; i < 12; i++) {\n                        budgetSeries[i] += value.monthly_amount[i].amount * nature;\n                    }\n                });\n\n                /* Gathering from budget estimations */\n                this.budget.budget_estimations.forEach(value => {\n                    for (let i = 0; i < 12; i++) {\n                        const indexName = NumberInWord[i];\n\n                        budgetSeries[i] += value[indexName];\n                    }\n                });\n                /* End Budget Series */\n\n                /* Actual Series */\n                let actualSeries = [0,0,0,0,0,0,0,0,0,0,0,0];// Default 12 months\n\n                let actuals = await budgetHandler.getActualBudgetForConsolidate({\n                    params : {\n                        as_of_date \t\t: kendo.toString(new Date(), 'yyyy-MM-dd') + 'T23:59:59.999Z',// As Of Date is Today\n                        group_by \t\t: \"12\"\n                    }\n                });\n\n                actuals.data.forEach(value => {\n                    for (let i = 0; i < 12; i++) {\n                        const indexName = NumberInWord[i];\n\n                        actualSeries[i] += value[indexName];\n                    }\n                });\n                /* End Actual Series */\n                \n                /* Bind Series */\n                this.series = [\n                    {\n                        name: i18n.t(\"budget\"),\n                        data: budgetSeries,\n                        color: \"#4d4848\"\n                    },\n                    {\n                        name: i18n.t(\"actual\"),\n                        data: actualSeries,\n                        color: \"#c80000\"\n                    }\n                ];\n\n                /* Refresh Chart */\n                let budgetChart = this.$refs.budgetChart.kendoWidget();\n                budgetChart.refresh();\n\t\t\t},\n        },\n        watch: {\n            initBudget () {\n                this.loadData();\n            },\n        },\n    };\n</script>\n\n<style scoped>\n    .theme--light.v-data-table {\n        background-color: transparent !important;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .v-data-table.simple1_table.theme--light,\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .theme--light.v-data-table.simple1_table > .v-data-table__wrapper > table > thead > tr:last-child > th:last-child{\n        border-right: none !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: transparent !important;\n    }\n\n    .border-bottom {\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .font-small {\n        font-size: 12px;\n        line-height: 15px;\n    }\n\n    .font-26 {\n        font-size: 26px !important;\n    }\n    .v-data-table.simple_table.theme--light{\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n        border-bottom: none !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n        border-right: none !important;\n    }\n\n    @media (max-width: 576px) {\n\n    }\n</style>"]}]}
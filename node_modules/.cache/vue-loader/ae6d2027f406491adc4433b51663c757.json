{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/product/product_variants/variants/Info.vue?vue&type=style&index=0&id=6e11c882&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/product/product_variants/variants/Info.vue","mtime":1638499443277},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0cjpob3Zlcjpub3QoLnYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX2NvbnRlbnQpOm5vdCgudi1kYXRhLXRhYmxlX19lbXB0eS13cmFwcGVyKSB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKfQoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyLnRoaXJkOmhvdmVyOm5vdCgudi1kYXRhLXRhYmxlX19leHBhbmRlZF9fY29udGVudCk6bm90KC52LWRhdGEtdGFibGVfX2VtcHR5LXdyYXBwZXIpIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGQ0ODQ4ICFpbXBvcnRhbnQ7Cn0KCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogIGJvcmRlci10b3A6IHRoaW4gc29saWQgI2RkZDsKICBib3JkZXItYm90dG9tOiB0aGluIHNvbGlkICNkZGQ7CiAgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50Owp9CgoudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHI6bm90KDpsYXN0LWNoaWxkKSA+IHRkOm5vdCgudi1kYXRhLXRhYmxlX19tb2JpbGUtcm93KSwKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyOm5vdCg6bGFzdC1jaGlsZCkgPiB0aDpub3QoLnYtZGF0YS10YWJsZV9fbW9iaWxlLXJvdykgewogIGJvcmRlci1ib3R0b206IHRoaW4gc29saWQgI2RkZDsKfQoKLnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCB7CiAgaGVpZ2h0OiAzMnB4ICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8OA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Info.vue","sourceRoot":"src/views/products/product/product_variants/variants","sourcesContent":["<template>\n  <v-row>\n    <v-col sm=\"12\" cols=\"12\">\n      <v-row>\n        <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n          <v-card>\n            <!--            <v-img class=\"\" height=\"100\" width=\"100\" :src=\"require(`@/assets/images/${pic}`)\"/>-->\n            <v-img style=\"margin: auto;display: block;\"\n                   :src=\"imgURL\"/>\n          </v-card>\n        </v-col>\n        <v-col sm=\"9\" cols=\"12\" class=\"py-0\">\n          <v-simple-table>\n            <template v-slot:default>\n              <tbody>\n              <tr>\n                <td class=\"text-uppercase\">{{ $t('name') }}</td>\n                <td class=\"text-left text-bold\">{{ product.name }}</td>\n              </tr>\n              <tr>\n                <td class=\"text-uppercase\">{{ $t('sku') }}</td>\n                <td class=\"text-left text-bold\">{{ product.sku }}</td>\n              </tr>\n              <tr>\n                <td class=\"text-uppercase\">{{ $t('uom') }}</td>\n                <div v-if=\"product.uom!==undefined\">\n                  <td class=\"text-left text-bold\">{{ itemUOM }}</td>\n                </div>\n              </tr>\n              </tbody>\n            </template>\n          </v-simple-table>\n        </v-col>\n      </v-row>\n    </v-col>\n\n    <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n      <LoadingMe\n          :isLoading=\"showLoading\"\n          :fullPage=\"false\"\n          type=\"loading\"\n          :myLoading=\"true\"/>\n      <v-simple-table>\n        <template v-slot:default>\n          <tbody>\n          <tr class=\"third text-bold\">\n            <td class=\"text-uppercase  white--text\">{{ $t('weighted_average_cost') }}</td>\n            <td class=\"white--text text-right\">{{ wac }}</td>\n          </tr>\n          <tr class=\"third text-bold\">\n            <td class=\"text-uppercase  white--text\">{{ $t('last_purchase_cost') }}</td>\n            <td class=\"white--text text-right\">{{ itemCost }}</td>\n          </tr>\n          <tr>\n            <td class=\"text-uppercase text-bold\">{{ $t('value') }}</td>\n            <td class=\"primary--text text-right text-bold\">{{ balance }}</td>\n          </tr>\n          <tr>\n            <td class=\"text-uppercase\">{{ $t('on_hand') }}</td>\n            <td class=\"primary--text text-right text-bold\">{{ qoh }}</td>\n          </tr>\n          <tr>\n            <td class=\"text-uppercase\">{{ $t('committed_stock') }}</td>\n            <td class=\"primary--text text-right text-bold\">0</td>\n          </tr>\n          <tr>\n            <td class=\"text-uppercase\">{{ $t('available_stock') }}</td>\n            <td class=\"primary--text text-right text-bold\">92</td>\n          </tr>\n          <tr>\n            <td class=\"text-uppercase\">{{ $t('incoming_stock') }}</td>\n            <td class=\"primary--text text-right text-bold\">0</td>\n          </tr>\n          </tbody>\n        </template>\n      </v-simple-table>\n    </v-col>\n    <v-col sm=\"12\" cols=\"12\" class=\"pb-3\">\n      <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n          <router-link\n              :to=\"{path: 'product_variant'+`/${this.product.id?this.product.id:''}`, query: { p: `${this.product.productId}` ,type: 'edit'} }\">\n            <v-btn width=\"120\" color=\"primary\" :disabled=\"btnEnabled\"\n                   class=\" white--text float-right text-capitalize ml-5\">\n              {{ $t('edit_variant') }}\n            </v-btn>\n          </router-link>\n        </v-col>\n      </v-row>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport kendo from \"@progress/kendo-ui\";\n\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\")\nexport default {\n  name: \"ItemInfo\",\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n  },\n  props: {\n    product: {}\n  },\n  mounted: async function () {\n    await this.lastPurchaseCost()\n  },\n  computed: {\n    imgURL() {\n      if (this.product.images) {\n        let img = this.product.images\n        let imgDefault = img.default\n        if (imgDefault) {\n          return this.url + imgDefault.thumb\n        } else {\n          return ''\n        }\n      } else {\n        return ''\n      }\n    },\n    itemUOM() {\n      if (this.product) {\n        const uom = this.product.uom\n        if (uom.hasOwnProperty('toUOM')) {\n          return uom.toUOM.name || ``\n        } else {\n          return uom.name || ``\n        }\n      } else {\n        return ''\n      }\n    },\n    btnEnabled() {\n      return !this.product.images;\n    },\n    id() {\n      if (this.product) {\n        return this.product.id\n      } else {\n        return ''\n      }\n    }\n  },\n  data: () => ({\n    pic: \"amret.png\",\n    url: 'https://s3-ap-southeast-1.amazonaws.com/images.banhji/',\n    showLoading: false,\n    itemCost: 0,\n    balance: 0,\n    qoh: 0,\n    wac: 0,\n    transactionDate: new Date().toISOString().substr(0, 10),\n  }),\n  watch: {\n    // '$route': 'callback',\n    product() {\n      if (this.product !== undefined) {\n        this.showLoading = true\n        this.lastPurchaseCost()\n        this.inventoryBalance()\n        this.callback()\n        this.showLoading = false\n      }\n    }\n  },\n  methods: {\n    numberFormat(value, decimal) {\n      return kendo.toString(value, decimal)\n    },\n    onUpdate() {\n      this.$emit('onUpdate', this.product)\n    },\n    callback() {\n      if (this.$route.params !== null && this.$route.params.hasOwnProperty('data')) {\n        // this.service = this.$route.params.data\n        this.showLoading = true\n        this.$emit('onUpdate', this.$route.params.data)\n        this.showLoading = false\n      }\n      // window.console.log('im changed', this.product)\n    },\n    async lastPurchaseCost() {\n      new Promise(resolve => {\n        setTimeout(() => {\n          resolve('resolved')\n          this.showLoading = true\n          const startDate = this.transactionDate\n          let strFilter = '?date=' + startDate + '&id=' + this.id\n          if (this.id !== undefined || this.id !== null) {\n            strFilter = '?date=' + startDate + '&id=' + this.id + '&item='+ true\n            this.itemCost = 0\n            billingHandler.inventoryItemPurchaseCost(strFilter).then(res => {\n              if (res.data.statusCode === 200) {\n                this.showLoading = false\n                const response = res.data.data\n                this.itemCost = 0\n                if (response) {\n                    window.console.log(response,'--')\n                  if (Object.keys(response).length > 0) {\n                    this.itemCost = this.numberFormat(response.exchangeCost, response.decimalFormat)\n                  }\n                }\n              }\n            })\n          }\n        }, 10)\n      })\n    },\n    async inventoryBalance() {\n      new Promise(resolve => {\n        setTimeout(() => {\n          resolve('resolved')\n          this.showLoading = true\n          const startDate = new Date().toISOString().substr(0, 10)\n          let strFilter = '?asOf=' + startDate + '&id=' + this.id\n          if (this.id !== undefined || this.id !== null) {\n            strFilter = '?asOf=' + startDate + '&id=' + this.id + '&item='+ true\n            billingHandler.inventoryBalance(strFilter).then(res => {\n              if (res.data.statusCode === 200) {\n                this.showLoading = false\n                const response = res.data.data\n                this.qoh = this.balance = this.wac = 0\n                if (response.length > 0) {\n                  this.qoh = this.numberFormat(response[0].qoh, response[0].decimalFormat)\n                  this.balance = this.numberFormat(response[0].bValue, response[0].decimalFormat)\n                  this.wac = this.numberFormat(response[0].wac, response[0].decimalFormat)\n                }\n              }\n            })\n          }\n        }, 10)\n      })\n    },\n  }\n}\n</script>\n<style scoped>\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: transparent !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr.third:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: #4d4848 !important;\n}\n\n.theme--light.v-data-table {\n  background-color: transparent !important;\n  border-top: thin solid #ddd;\n  border-bottom: thin solid #ddd;\n  border-radius: 0 !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:not(.v-data-table__mobile-row),\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:not(.v-data-table__mobile-row) {\n  border-bottom: thin solid #ddd;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n  height: 32px !important;\n}\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/product/inventory_adjustment/InventoryAdjustment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/product/inventory_adjustment/InventoryAdjustment.vue","mtime":1638499443271},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBrZW5kbyBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdWknCmltcG9ydCB7IGkxOG4gfSBmcm9tICJAL2kxOG4iOwppbXBvcnQgRGF0ZVBpY2tlckNvbXBvbmVudCBmcm9tICJAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9EYXRlUGlja2VyQ29tcG9uZW50IjsKaW1wb3J0IEludmVudG9yeUFkanVzdG1lbnQgZnJvbSAiQC9zY3JpcHRzL21vZGVsL2ludmVudG9yeUFkanVzdG1lbnQiOwppbXBvcnQgTW9udGhPZlBpY2tlciBmcm9tICJAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL01vbnRoT2ZQaWNrZXIiOwppbXBvcnQgeyBTaG93UmVzb3VyY2UgfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOwppbXBvcnQgeyB1dWlkIH0gZnJvbSAidnVlLXV1aWQiOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IFNhbGVGb3JtQ29udGVudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9TYWxlRm9ybUNvbnRlbnQiOwppbXBvcnQgSXRlbUxpbmVNb2RlbCBmcm9tICJAL3NjcmlwdHMvaW52ZW50b3J5LWFkanVzdG1lbnQvbW9kZWwvSXRlbUxpbmUiOwovLyBpbXBvcnQgeyBEcm9wRG93bkxpc3QgfSBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdnVlLWRyb3Bkb3ducyI7Cgpjb25zdCBhY2NvdW50SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL2FjY291bnRpbmcvYWNjb3VudCIpOwpjb25zdCBiaWxsaW5nSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9pbnZvaWNlL2hhbmRsZXIvYmlsbGluZ0hhbmRsZXIiKTsKY29uc3QgcHJlZml4SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcmVmaXhIYW5kbGVyIik7CmNvbnN0IHdhcmVob3VzZUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvd2FyZWhvdXNlSGFuZGxlciIpOwpjb25zdCBzZXR0aW5nc0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2V0dGluZ3NIYW5kbGVyIik7CmNvbnN0IGxvY2F0aW9uSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9sb2NhdGlvbkhhbmRsZXIiKTsKY29uc3QgcHJvamVjdEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcHJvamVjdEhhbmRsZXIiKTsKY29uc3QgcHJvZHVjdFZhcmlhbnRIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2R1Y3RWYXJpYW50SGFuZGxlciIpOwpjb25zdCBlbXBsb3llZUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZW1wbG95ZWVIYW5kbGVyIik7CmNvbnN0IHNhbGVGb3JtQ29udGVudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2FsZUZvcm1Db250ZW50SGFuZGxlciIpOwpjb25zdCBzYWxlRm9ybUNvbnRlbnRNb2RlbCA9IG5ldyBTYWxlRm9ybUNvbnRlbnRNb2RlbCh7fSk7CmNvbnN0IGN1cnJlbmN5SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jdXJyZW5jeS9oYW5kbGVyL2N1cnJlbmN5SGFuZGxlciIpOwoKY29uc3QgaXRlbUxpbmVNb2RlbCA9IG5ldyBJdGVtTGluZU1vZGVsKHt9KTsKY29uc3QgcHJlZml4ID0gImludmVudG9yeSBhZGp1c3RtZW50IjsKY29uc3QgdHhuVHlwZSA9ICJJbnZlbnRvcnkgQWRqdXN0bWVudCI7CmNvbnN0IGl0ZW1MaW5lUHJlZml4ID0gImxpbi0iOwpjb25zdCAkID0gcmVxdWlyZSgianF1ZXJ5Iik7Cgpjb25zdCB0ZXh0RmllbGQgPSAibnVtYmVyTmFtZSI7CmNvbnN0IGtleUZpZWxkID0gImlkIjsKY29uc3QgZW1wdHlJdGVtID0geyBbdGV4dEZpZWxkXTogImxvYWRpbmcgLi4uIiB9Owpjb25zdCBkZWZhdWx0SXRlbSA9IHsgW3RleHRGaWVsZF06ICJTZWxlY3QgZW1wbG95ZWUuLi4iLCBba2V5RmllbGRdOiBudWxsIH07CmNvbnN0IGNvb2tpZUpTID0gcmVxdWlyZSgiQC9jb29raWUuanMiKTsKY29uc3QgY29va2llID0gY29va2llSlMuZ2V0Q29va2llKCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkludmVudG9yeUFkanVzdG1lbnQiLAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KGBAL2NvbXBvbmVudHMvTG9hZGluZ2ApLAogICAgImFwcC1kYXRlcGlja2VyIjogRGF0ZVBpY2tlckNvbXBvbmVudCwKICAgICJhcHAtbW9udGhwaWNrZXIiOiBNb250aE9mUGlja2VyLAogICAgLy8gZHJvcGRvd25saXN0OiBEcm9wRG93bkxpc3QsCiAgfSwKICBwcm9wczogWyJpZCJdLAogIGRhdGE6ICgpID0+ICh7CiAgICBpc0VkaXQ6IGZhbHNlLAogICAgLy8gTG9hZGluZ01lCiAgICBzaG93TG9hZGluZzogdHJ1ZSwKICAgIGxvYWRpbmdBbGVydDogZmFsc2UsCiAgICBsb2FkaW5nQ29sb3JBbGVydDogIiIsCiAgICBsb2FkaW5nVGV4dEFsZXJ0OiAiIiwKICAgIGZpbHRlcl86ICIiLAogICAgcmVxdWVzdFN0YXJ0ZWQ6IGZhbHNlLAogICAgYWxlcnQ6IGZhbHNlLAogICAgdmFsaWQ6IHRydWUsCiAgICB0ZW1wbGF0ZXM6IFsKICAgICAgeyB0aXRsZTogIkRyYWZ0IiB9LAogICAgICB7IHRpdGxlOiAiT3BlbiIgfSwKICAgICAgeyB0aXRsZTogIlBhcnRpYWxseSBDbG9zZWQiIH0sCiAgICAgIHsgdGl0bGU6ICJDbG9zZWQiIH0sCiAgICBdLAogICAgaXNIaWRlQmFyOiBmYWxzZSwKICAgIGFjY291bnRzOiBbXSwKICAgIHNlZ21lbnRzOiBbXSwKICAgIGxvY2F0aW9uczogW10sCiAgICBwcm9qZWN0czogW10sCiAgICB3YXJlaG91c2VzOiBbXSwKICAgIGJ1b206IFtdLAogICAgaXRlbUxpbmVzOiBbXSwKICAgIGVtcGxveWVlczogW10sCiAgICBtRW1wbG95ZWU6IHt9LAogICAgYmFzZUN1cnJlbmN5OiB7fSwKICAgIGV4Y2hhbmdlUmF0ZToge30sCiAgICBzYWxlRm9ybUNvbnRlbnQ6IHNhbGVGb3JtQ29udGVudE1vZGVsLAogICAgZW1wQmFzZVVybDogZW1wbG95ZWVIYW5kbGVyLnNlYXJjaCgpLAogICAgaW52ZW50b3J5QWRqdXN0bWVudDogbmV3IEludmVudG9yeUFkanVzdG1lbnQoe30pLAogICAgaXRlbUxpbmU6IGl0ZW1MaW5lTW9kZWwsCiAgICBkZWZhdWx0SXRlbTogZGVmYXVsdEl0ZW0sCiAgICB0cmFuc2FjdGlvbkRhdGU6ICIiLAogICAgalJhdzogW10sCiAgICBkcjogMCwKICAgIGNyOiAwLAogICAgbG9nZ2VkVXNlcjogewogICAgICBpZDogY29va2llLmNyZWF0b3IsCiAgICAgIG5hbWU6IGNvb2tpZS5lbWFpbCwKICAgIH0sCiAgfSksCiAgbWV0aG9kczogewogICAgbnVtYmVyRm9ybWF0KHZhbHVlKSB7CiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyh2YWx1ZSwgYG4ke3RoaXMuc2FsZUZvcm1Db250ZW50LmRlY2ltYWx9YCk7CiAgICB9LAogICAgcmVzZXREYXRhV2hlblR4bkRhdGVDaGFuZ2VkKCkgewogICAgICB0cnkgewogICAgICAgIGxldCBpdGVtTGluZURTID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgY29uc3Qgcm93RGF0YSA9IGl0ZW1MaW5lRFMuZGF0YSgpOwogICAgICAgIHRoaXMuaXRlbUxpbmVzID0gW107CiAgICAgICAgcm93RGF0YS5tYXAoKG8pID0+IHsKICAgICAgICAgIG8uYnVvbSA9IHt9OwogICAgICAgICAgby5jb3N0ID0gMDsKICAgICAgICAgIG8uYW1vdW50ID0gMDsKICAgICAgICAgIG8ucW9oID0gMDsKICAgICAgICAgIG8uY291bnQgPSAwOwogICAgICAgICAgby5kaWZmZXJlbnQgPSAwOwogICAgICAgICAgdGhpcy5pdGVtTGluZXMucHVzaChuZXcgSXRlbUxpbmVNb2RlbChvKSk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coImVycm9yIiwgZSk7CiAgICAgIH0KICAgIH0sCiAgICBvblRyYW5zYWN0aW9uRGF0ZUNoYW5nZWQoKSB7CiAgICAgIC8vIHRoaXMucmVzZXREYXRhV2hlblR4bkRhdGVDaGFuZ2VkKCkKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5nZW5lcmF0ZU51bWJlcigpOwogICAgICB9CiAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5tb250aE9mID0gbmV3IERhdGUoCiAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnRyYW5zYWN0aW9uRGF0ZQogICAgICApCiAgICAgICAgLnRvSVNPU3RyaW5nKCkKICAgICAgICAuc3Vic3RyKDAsIDcpOwogICAgfSwKICAgIGFmdGVyRmV0Y2hfKGpzb24pIHsKICAgICAgdGhpcy5lbXBsb3llZXMgPSBqc29uLmRhdGE7CiAgICB9LAogICAgcmVxdWVzdERhdGFfKHNraXAsIGZpbHRlciwgYmFzZVVybCkgewogICAgICBjb25zdCB1cmwgPSBiYXNlVXJsICsgYC8ke2ZpbHRlcn1gOwogICAgICB0aGlzLnJlcXVlc3RTdGFydGVkID0gdHJ1ZTsKICAgICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB9KQogICAgICAgIC50aGVuKHRoaXMuYWZ0ZXJGZXRjaF8pOwogICAgfSwKICAgIG9uRW1wbG95ZWVGaWx0ZXJDaGFuZ2VkKGV2ZW50KSB7CiAgICAgIGNvbnN0IGZpbHRlciA9IGV2ZW50LmZpbHRlci52YWx1ZTsKICAgICAgdGhpcy5yZXF1ZXN0RGF0YV8oMCwgZmlsdGVyLCB0aGlzLmVtcEJhc2VVcmwpOwogICAgICB0aGlzLmZpbHRlcl8gPSBmaWx0ZXI7CiAgICB9LAogICAgYXN5bmMgaW5pdERhdGEoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGF3YWl0IHRoaXMubG9hZFZpZXdBZGp1c3RtZW50KCk7CiAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCcxJywgdGhpcy4kcm91dGUucGFyYW1zKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkUm93KCk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBsb2FkU2FsZUZvcm1Db250ZW50KCkgewogICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgIHNhbGVGb3JtQ29udGVudEhhbmRsZXIubGlzdCgpLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5zYWxlRm9ybUNvbnRlbnQgPSBkYXRhWzBdOwogICAgICAgICAgICAgICAgdGhpcy5iYXNlQ3VycmVuY3kgPSBkYXRhWzBdLmJhc2VDdXJyZW5jeTsKICAgICAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5jdXJyZW5jeSA9IHRoaXMuYmFzZUN1cnJlbmN5OwogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0RGF0YSgpOwogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkVHJhbnNhY3Rpb25SYXRlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LCAxMCk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGxvYWRUcmFuc2FjdGlvblJhdGUoKSB7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRoaXMudHJhbnNhY3Rpb25EYXRlKQogICAgICAgICAgICAudG9JU09TdHJpbmcoKQogICAgICAgICAgICAuc3Vic3RyKDAsIDEwKTsKICAgICAgICAgIGNvbnN0IGN1cnJlbmN5ID0gdGhpcy5iYXNlQ3VycmVuY3k7CiAgICAgICAgICBsZXQgY29kZSA9ICIiOwogICAgICAgICAgaWYgKGN1cnJlbmN5Lmhhc093blByb3BlcnR5KCJjb2RlIikpIHsKICAgICAgICAgICAgY29kZSA9IGN1cnJlbmN5LmNvZGU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29kZSAhPT0gdW5kZWZpbmVkIHx8IGNvZGUgIT09ICIiKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBjdXJyZW5jeUhhbmRsZXIKICAgICAgICAgICAgICAuZ2V0TGFzdEV4Y2hhbmdlUmF0ZUJ5RGF0ZShkYXRlLCBjb2RlKQogICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLmV4Y2hhbmdlUmF0ZSA9IHJlcy5kYXRhLmRhdGFbMF07CiAgICAgICAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC50eG5SYXRlID0gdGhpcy5leGNoYW5nZVJhdGUucmF0ZTsKICAgICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmV4Y2hhbmdlUmF0ZSA9IHRoaXMuZXhjaGFuZ2VSYXRlOwogICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCiAgICBvbkVtcGxveWVlQ2hhbmdlZChldmVudCkgewogICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnZhbHVlOwogICAgICBpZiAodmFsdWUgJiYgdmFsdWVbdGV4dEZpZWxkXSA9PT0gZW1wdHlJdGVtW3RleHRGaWVsZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5tRW1wbG95ZWUgPSB2YWx1ZTsKICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmVtcGxveWVlID0gdmFsdWU7CiAgICB9LAogICAgYWZ0ZXJGZXRjaChqc29uKSB7CiAgICAgIHRoaXMuZW1wbG95ZWVzID0ganNvbi5kYXRhOwogICAgfSwKICAgIGFzeW5jIGxvYWRFbXBsb3llZUNlbnRlcigpIHsKICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICB0aGlzLmVtcGxveWVlcyA9IFtdOwogICAgICAgICAgZW1wbG95ZWVIYW5kbGVyCiAgICAgICAgICAgIC5jZW50ZXIodW5kZWZpbmVkKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5lbXBsb3llZXMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuZW1wbG95ZWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5tRW1wbG95ZWUgPSB0aGlzLmVtcGxveWVlc1swXTsKICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuZW1wbG95ZWVzWzBdLCAidGhpcy5lbXBsb3llZXNbMF0iKTsKICAgICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmVtcGxveWVlID0gdGhpcy5lbXBsb3llZXNbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKTsKICAgICAgICAgIHsKICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgaXRlbVRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIGNvbnN0IGl0ZW0gPSBkYXRhSXRlbS5pdGVtOwogICAgICBpZiAoaXRlbSkgewogICAgICAgIHJldHVybiBgPHNwYW4+JHtpdGVtLm5hbWUgPyBpdGVtLm5hbWUgOiBgYH08L3NwYW4+YDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGA7CiAgICAgIH0KICAgIH0sCiAgICBJdGVtRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgIGtlbmRvCiAgICAgICAgLmpRdWVyeSgnPGlucHV0IG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgLmFwcGVuZFRvKGNvbnRhaW5lcikKICAgICAgICAua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICAgIGZpbHRlcjogImNvbnRhaW5zIiwKICAgICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgICAgaGVhZGVyVGVtcGxhdGU6CiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJkcm9wZG93bi1oZWFkZXIgay13aWRnZXQgay1oZWFkZXIiPicgKwogICAgICAgICAgICAiPHNwYW4+SXRlbXMgPC9zcGFuPiIgKwogICAgICAgICAgICAiPHNwYW4+PC9zcGFuPiIgKwogICAgICAgICAgICAiPC9kaXY+IiwKICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1uYW1lIzwvc3Bhbj4iLAogICAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgICAgc2VydmVyRmlsdGVyaW5nOiB0cnVlLAogICAgICAgICAgICB0cmFuc3BvcnQ6IHsKICAgICAgICAgICAgICByZWFkOiB7CiAgICAgICAgICAgICAgICB1cmw6IHByb2R1Y3RWYXJpYW50SGFuZGxlci5pdGVtVmFyaWFudFNlYXJjaFVSTCgpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2NoZW1hOiB7CiAgICAgICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgICAgIGlkOiAiaWQiLAogICAgICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiB7IHR5cGU6ICJzdHJpbmciIH0sCiAgICAgICAgICAgICAgICAgIG5hbWU6IHsgdHlwZTogInN0cmluZyIgfSwKICAgICAgICAgICAgICAgICAgc2t1OiB7IHR5cGU6ICJzdHJpbmciIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHRvdGFsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KSwKICAgICAgICB9KTsKICAgIH0sCiAgICBxb2hUZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICAvLyBjb25zdCBidW9tID0gZGF0YUl0ZW0uYnVvbSB8fCB7fQogICAgICBjb25zdCBxb2ggPSBkYXRhSXRlbS5xb2ggfHwgMDsKICAgICAgLy8gaWYgKGJ1b20uaGFzT3duUHJvcGVydHkoJ25hbWUnKSkgewogICAgICByZXR1cm4gcW9oOwogICAgICAvLyB9CiAgICAgIC8vIHJldHVybiBgYAogICAgfSwKICAgIFVPTVRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIGNvbnN0IHVvbSA9IGRhdGFJdGVtLmJ1b207CiAgICAgIGlmICh1b20pIHsKICAgICAgICByZXR1cm4gYDxzcGFuPiR7dW9tLm5hbWUgPyB1b20ubmFtZSA6IGBgfTwvc3Bhbj5gOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBgYDsKICAgICAgfQogICAgfSwKICAgIG51bWJlckVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8KICAgICAgICAualF1ZXJ5KCc8aW5wdXQgZGF0YS1iaW5kPSJ2YWx1ZTonICsgb3B0aW9ucy5maWVsZCArICciLz4nKQogICAgICAgIC5hcHBlbmRUbyhjb250YWluZXIpCiAgICAgICAgLmtlbmRvTnVtZXJpY1RleHRCb3goewogICAgICAgICAgZGVjaW1hbHM6IDMwLAogICAgICAgICAgbWluOiAwLAogICAgICAgICAgZm9ybWF0OiBgJHt0aGlzLnNhbGVGb3JtQ29udGVudC5kZWNpbWFsfWAsCiAgICAgICAgfSk7CiAgICB9LAogICAgcm93TnVtYmVyVG1wbChkYXRhSXRlbSkgewogICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgfSwKICAgIGFkZFJvdygpIHsKICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5pdGVtTGluZURTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgdG90YWwgPSBkcy50b3RhbCgpOwogICAgICB0aGlzLml0ZW1MaW5lLmlkID0gaXRlbUxpbmVQcmVmaXggKyB1dWlkLnYxKCk7CiAgICAgIHRoaXMuaXRlbUxpbmUuZGVjaW1hbEZvcm1hdCA9ICJuIiArIHRoaXMuc2FsZUZvcm1Db250ZW50LmRlY2ltYWw7CiAgICAgIGRzLmluc2VydCh0b3RhbCwgdGhpcy5pdGVtTGluZSk7CiAgICB9LAogICAgYXN5bmMgZGF0YVNvdXJjZUNoYW5nZWQoZSkgewogICAgICBpZiAoZS5maWVsZCkgewogICAgICAgIGxldCBkYXRhUm93ID0gZS5pdGVtc1swXSwKICAgICAgICAgIGJ1b20gPSB7fSwKICAgICAgICAgIGNvdW50ID0gMCwKICAgICAgICAgIGRpZmYgPSAwLAogICAgICAgICAgcW9oID0gMDsKICAgICAgICBzd2l0Y2ggKGUuZmllbGQpIHsKICAgICAgICAgIGNhc2UgIml0ZW0iOgogICAgICAgICAgICBkYXRhUm93LnNldCgiZGVzY3JpcHRpb24iLCBkYXRhUm93Lml0ZW0uZGVzY3JpcHRpb24pOwogICAgICAgICAgICBidW9tID0gZGF0YVJvdy5pdGVtLnVvbTsKICAgICAgICAgICAgZGF0YVJvdy5zZXQoImJ1b20iLCBidW9tKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5zZWFyY2hUcmFuc2FjdGlvbihkYXRhUm93LCBkYXRhUm93Lml0ZW0uaWQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImNvdW50IjoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb3VudCA9IHBhcnNlRmxvYXQoZGF0YVJvdy5jb3VudCB8fCAwKTsKICAgICAgICAgICAgICBxb2ggPSBwYXJzZUZsb2F0KGRhdGFSb3cucW9oIHx8IDApOwogICAgICAgICAgICAgIGRpZmYgPSBjb3VudCAtIHFvaDsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZGlmZmVyZW50IiwgcGFyc2VGbG9hdChkaWZmKSk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoCiAgICAgICAgICAgICAgICAiYW1vdW50IiwKICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZGF0YVJvdy5jb3N0KSAqIHBhcnNlRmxvYXQoZGlmZikKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiZGlmZmVyZW50IiwgMCk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoImFtb3VudCIsIDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiY29zdCI6CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZGlmZiA9IHBhcnNlRmxvYXQoZGF0YVJvdy5kaWZmZXJlbnQgfHwgMCk7CiAgICAgICAgICAgICAgZGF0YVJvdy5zZXQoCiAgICAgICAgICAgICAgICAiYW1vdW50IiwKICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZGF0YVJvdy5jb3N0KSAqIHBhcnNlRmxvYXQoZGlmZikKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICBkYXRhUm93LnNldCgiYW1vdW50IiwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKGUuZmllbGQpIHsKICAgICAgICAgIHRoaXMuYXV0b0NhbGN1bGF0ZSgpOwogICAgICAgICAgLy8gdGhpcy5yYXdGb3JKb3VybmFsKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhdXRvQ2FsY3VsYXRlKCkgewogICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKTsKICAgICAgbGV0IG5hdHVyZSA9ICIiLAogICAgICAgIGFtb3VudCA9IDAsCiAgICAgICAgcXR5ID0gMDsKICAgICAgdGhpcy5qUmF3ID0gW107CiAgICAgIGNvbnN0IHJvd3MgPSBkcy5kYXRhKCk7CiAgICAgIHJvd3MuZm9yRWFjaCgodmFsdWUpID0+IHsKICAgICAgICBjb25zdCBhbXQgPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmFtb3VudCk7CiAgICAgICAgY29uc3QgZGlmZiA9IGtlbmRvLnBhcnNlRmxvYXQodmFsdWUuZGlmZmVyZW50KTsKICAgICAgICBhbW91bnQgKz0gYW10OwogICAgICAgIHF0eSArPSBkaWZmOwogICAgICAgIGNvbnN0IGl0ZW0gPSB2YWx1ZS5pdGVtOwogICAgICAgIGlmIChhbXQgPiAwKSB7CiAgICAgICAgICBuYXR1cmUgPSAiZHIiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuYXR1cmUgPSAiY3IiOwogICAgICAgIH0KICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gIlZhcmlhbnQiKSB7CiAgICAgICAgICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCJpbnZlbnRvcnlBY2MiKSkgewogICAgICAgICAgICAgIGlmIChpdGVtLmludmVudG9yeUFjYy5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICAgICAgbGV0IGludmVudG9yeUFjYyA9IGl0ZW0uaW52ZW50b3J5QWNjOwogICAgICAgICAgICAgICAgdGhpcy5qUmF3LnB1c2goewogICAgICAgICAgICAgICAgICBpZDogaW52ZW50b3J5QWNjLmlkICsgIi0iICsgbmF0dXJlLAogICAgICAgICAgICAgICAgICBsaW5lOiBuZXcgSXRlbUxpbmVNb2RlbCh2YWx1ZSksCiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uIHx8ICIiLAogICAgICAgICAgICAgICAgICBhY2NvdW50OiBpdGVtLmludmVudG9yeUFjYywKICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBpdGVtLmludmVudG9yeUFjYy5pZCwKICAgICAgICAgICAgICAgICAgYW1vdW50OiBhbXQsIC8vIHF0eSphdmdfY29zdCAsCiAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlQW1vdW50OiBhbXQsIC8veEFtb3VudCwKICAgICAgICAgICAgICAgICAgdHlwZTogbmF0dXJlLAogICAgICAgICAgICAgICAgICB0eXBlQXM6ICJpdGVtIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5hbW91bnQgPSBhbW91bnQ7CiAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5leGNoYW5nZUFtb3VudCA9IGFtb3VudDsKICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnF0eSA9IHF0eTsKICAgICAgLy8gYWRqdXN0bWVudCBhY2NvdW50CiAgICAgIGlmICh0aGlzLmludmVudG9yeUFkanVzdG1lbnQuYWNjb3VudCkgewogICAgICAgIGNvbnN0IGFkanVzdEFjYyA9IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5hY2NvdW50OwogICAgICAgIGlmIChhbW91bnQgKiAtMSA+IDApIHsKICAgICAgICAgIG5hdHVyZSA9ICJkciI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5hdHVyZSA9ICJjciI7CiAgICAgICAgfQogICAgICAgIHRoaXMualJhdy5wdXNoKHsKICAgICAgICAgIGlkOiBhZGp1c3RBY2MuaWQgKyAiLSIgKyBuYXR1cmUsCiAgICAgICAgICBsaW5lOiBuZXcgSXRlbUxpbmVNb2RlbCh7fSksCiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmpvdXJuYWxOb3RlLAogICAgICAgICAgYWNjb3VudDogYWRqdXN0QWNjLAogICAgICAgICAgYWNjb3VudElkOiBhZGp1c3RBY2MuaWQsCiAgICAgICAgICBhbW91bnQ6IGFtb3VudCAqIC0xLCAvLyBxdHkqYXZnX2Nvc3QgLAogICAgICAgICAgZXhjaGFuZ2VBbW91bnQ6IGFtb3VudCAqIC0xLCAvL3hBbW91bnQsCiAgICAgICAgICB0eXBlOiBuYXR1cmUsCiAgICAgICAgICB0eXBlQXM6ICJhZGp1c3RtZW50IGFjYyIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gdG9kbzogcmF3IEpvdXJuYWwKICAgICAgLy8gY29uc3QgYWNjb3VudCA9IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5hY2NvdW50IHx8IHt9CiAgICAgIC8vIGlmICh0aGlzLmludmVudG9yeUFkanVzdG1lbnQuYW1vdW50RHVlID4gMCkgewogICAgICAvLyAgIG5hdHVyZSA9ICdkcicKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICBuYXR1cmUgPSAnY3InCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKGFjY291bnQpIHsKICAgICAgLy8gICBpZiAoYWNjb3VudC5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAvLyAgICAgdGhpcy5qUmF3LnB1c2goewogICAgICAvLyAgICAgICBpZDogYWNjb3VudC5pZCArICctJyArIG5hdHVyZSwKICAgICAgLy8gICAgICAgbGluZTogbmV3IEl0ZW1MaW5lTW9kZWwoe30pLAogICAgICAvLyAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5pbnZvaWNlLmpvdXJuYWxOb3RlLAogICAgICAvLyAgICAgICBhY2NvdW50OiBhY2NvdW50LAogICAgICAvLyAgICAgICBhY2NvdW50SWQ6IGFjY291bnQuaWQsCiAgICAgIC8vICAgICAgIGV4Y2hhbmdlQW1vdW50OiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuZXhjaGFuZ2VBbW91bnQsCiAgICAgIC8vICAgICAgIGFtb3VudDogdGhpcy5pbnZvaWNlLmFtb3VudER1ZSwKICAgICAgLy8gICAgICAgdHlwZTogbmF0dXJlLAogICAgICAvLyAgICAgICB0eXBlQXM6ICdhcicKICAgICAgLy8gICAgIH0pCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIC8vIHRvZG86IGVuZCByYXcgSm91cm5hbAogICAgICB0aGlzLnNocmlua0RhdGEodGhpcy5qUmF3KTsKICAgICAgLy8gY29uc3QgdW5pcXVlID0gdGhpcy5yZW1vdmVEdXBsaWNhdGUodGhpcy5hY2NvdW50cykKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHVuaXF1ZSwgJ3VuaXF1ZScpCiAgICB9LAogICAgcmVtb3ZlRHVwbGljYXRlKGFycmF5KSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnJheSkgewogICAgICAgIGlmICghbWFwLmhhcyhpdGVtLmlkKSkgewogICAgICAgICAgbWFwLnNldChpdGVtLmlkLCB0cnVlKTsgLy8gc2V0IGFueSB2YWx1ZSB0byBNYXAKICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHNocmlua0RhdGEob2JqKSB7CiAgICAgIGNvbnN0IHVuaXF1ZXMgPQogICAgICAgIHRoaXMucmVtb3ZlRHVwbGljYXRlKG9iaik7IC8qWy4uLm5ldyBTZXQoYWNjb3VudElkLm1hcChpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgaWRfOiBpLmlkXywKICAgICAgICAgICAgICAgICAgICBpZDogaS5pZCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiBpLnR5cGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpXSovCiAgICAgIHVuaXF1ZXMuZm9yRWFjaCgobikgPT4gewogICAgICAgIGNvbnN0IGZvdW5kID0gb2JqLmZpbHRlcigobSkgPT4gbS5pZCA9PT0gbi5pZCk7CiAgICAgICAgbGV0IGFtb3VudCA9IDAsCiAgICAgICAgICB4QW1vdW50ID0gMDsKICAgICAgICBmb3VuZC5mb3JFYWNoKCh6KSA9PiB7CiAgICAgICAgICBhbW91bnQgKz0gcGFyc2VGbG9hdCh6LmFtb3VudCB8fCAwKTsKICAgICAgICAgIHhBbW91bnQgKz0gcGFyc2VGbG9hdCh6LmV4Y2hhbmdlQW1vdW50IHx8IDApOwogICAgICAgIH0pOwogICAgICAgIG4uYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnQpOyAvL3RoaXMubnVtYmVyRm9ybWF0KGFtb3VudCkKICAgICAgICBuLmV4Y2hhbmdlQW1vdW50ID0gcGFyc2VGbG9hdCh4QW1vdW50KTsgLy9wYXJzZUZsb2F0KHBhcnNlRmxvYXQoYW1vdW50ICogcGFyc2VGbG9hdCh0aGlzLmludm9pY2UudHhuUmF0ZSkpKSAvL3RoaXMubnVtYmVyRm9ybWF0KGFtb3VudCAqIHBhcnNlRmxvYXQodGhpcy5pbnZvaWNlLnR4blJhdGUpKSAvLy50b0ZpeGVkKHRoaXMuc2FsZUZvcm1Db250ZW50LmRlY2ltYWwpCiAgICAgIH0pOwogICAgICB0aGlzLmpSYXcgPSB1bmlxdWVzOwogICAgICBsZXQgZHIgPSAwLAogICAgICAgIGNyID0gMDsKICAgICAgdGhpcy5qUmF3LmZvckVhY2goKGopID0+IHsKICAgICAgICBzd2l0Y2ggKGoudHlwZSkgewogICAgICAgICAgY2FzZSAiY3IiOgogICAgICAgICAgICBjciArPSBwYXJzZUZsb2F0KGouYW1vdW50KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJkciI6CiAgICAgICAgICAgIGRyICs9IHBhcnNlRmxvYXQoai5hbW91bnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZHIgPSBkcjsKICAgICAgdGhpcy5jciA9IGNyOwogICAgICB3aW5kb3cuY29uc29sZS5sb2coImRyPSIsIGRyLCAiY3I9IiwgY3IsICJkcitjciA9ICIsIGRyICsgY3IpOwogICAgICB3aW5kb3cuY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodW5pcXVlcyksICJ1bmlxdWVzIik7CiAgICB9LAogICAgSGVscChrZXl3b3JkX3NlYXJjaCkgewogICAgICBTaG93UmVzb3VyY2Uoa2V5d29yZF9zZWFyY2gpOwogICAgfSwKICAgIGFzeW5jIHNlYXJjaFRyYW5zYWN0aW9uKGRhdGFSb3csIGl0ZW1JZCkgewogICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy50cmFuc2FjdGlvbkRhdGU7CiAgICAgICAgICBsZXQgc3RyRmlsdGVyID0gIj9hc09mPSIgKyBzdGFydERhdGUgKyAiJmlkPSIgKyBpdGVtSWQ7CiAgICAgICAgICBiaWxsaW5nSGFuZGxlci5pbnZlbnRvcnlCYWxhbmNlKHN0ckZpbHRlcikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICBjb25zdCBiYWxhbmNlID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICBpZiAoYmFsYW5jZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgiY29zdCIsIGJhbGFuY2VbMF0ud2FjKTsKICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJxb2giLCBiYWxhbmNlWzBdLnFvaCk7CiAgICAgICAgICAgICAgICBkYXRhUm93LnNldCgKICAgICAgICAgICAgICAgICAgImFtb3VudCIsCiAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoYmFsYW5jZVswXS53YWMpICogcGFyc2VGbG9hdChkYXRhUm93LmRpZmZlcmVudCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRhdGFSb3cuc2V0KCJjb3N0IiwgMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiYmFsYW5jZSIsIHJlcy5kYXRhLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZEFjY291bnQoKSB7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgYWNjb3VudEhhbmRsZXIuZ2V0QWxsKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5hY2NvdW50cyA9IHJlcy5kYXRhLm1hcCgoaXRtKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlkOiBpdG0udXVpZCwKICAgICAgICAgICAgICAgIHV1aWQ6IGl0bS51dWlkLAogICAgICAgICAgICAgICAgbmFtZTogaXRtLm5hbWUsCiAgICAgICAgICAgICAgICBsb2NhbF9uYW1lOiBpdG0ubG9jYWxfbmFtZSwKICAgICAgICAgICAgICAgIG51bWJlcjogaXRtLm51bWJlciwKICAgICAgICAgICAgICAgIGlzX3RheGFibGU6IGl0bS5pc190YXhhYmxlLAogICAgICAgICAgICAgICAgYmFuaGppQWNjQ29kZTogaXRtLmJhbmhqaUFjY0NvZGUsCiAgICAgICAgICAgICAgICBncm91cF9jb2RlOiBpdG0uZ3JvdXBfY29kZSwKICAgICAgICAgICAgICAgIHBhcmVudF9hY2NvdW50OiBpdG0ucGFyZW50X2FjY291bnQsCiAgICAgICAgICAgICAgICB0eXBlX2NvZGU6IGl0bS50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICBhY2NvdW50X3R5cGU6IGl0bS5hY2NvdW50X3R5cGUsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICh0aGlzLmFjY291bnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuYWNjb3VudCA9IHRoaXMuYWNjb3VudHNbMF07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZFByb2plY3RzKCkgewogICAgICBhd2FpdCBwcm9qZWN0SGFuZGxlci5saXN0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgaWYgKHRoaXMucHJvamVjdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnByb2plY3QgPSB0aGlzLnByb2plY3RzWzBdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZFNlZ21lbnQoKSB7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgdGhpcy5zZWdtZW50cyA9IFtdOwogICAgICAgICAgc2V0dGluZ3NIYW5kbGVyCiAgICAgICAgICAgIC5nZXRTZWcoKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50cyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWdtZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5zZWdtZW50ID0gdGhpcy5zZWdtZW50c1swXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VnbWVudExpc3QgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKTsKICAgICAgICAgIHsKICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZExvY2F0aW9uKCkgewogICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgIHRoaXMubG9jYXRpb25zID0gW107CiAgICAgICAgICBsb2NhdGlvbkhhbmRsZXIKICAgICAgICAgICAgLmxpc3QoKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgaWYgKHRoaXMubG9jYXRpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnNbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKTsKICAgICAgICAgIHsKICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZFdhcmVob3VzZXMoKSB7CiAgICAgIHdhcmVob3VzZUhhbmRsZXIuZ2V0V2FyZWhvdXNlU2V0dGluZ0FsbCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMud2FyZWhvdXNlcyA9IHJlczsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZFByZWZpeCgpIHsKICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICBhd2FpdCBwcmVmaXhIYW5kbGVyLmdldChwcmVmaXgpLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25UeXBlcyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25UeXBlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25UeXBlID0KICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblR5cGVzWzBdOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVOdW1iZXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZ2VuZXJhdGVOdW1iZXIoKSB7CiAgICAgIGlmICh0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25EYXRlICE9PSAiIikgewogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgYWJicjogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgICAgc3RydWN0dXJlOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25UeXBlLnN0cnVjdHVyZSwKICAgICAgICAgIHRyYW5zYWN0aW9uRGF0ZTogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnRyYW5zYWN0aW9uRGF0ZSwKICAgICAgICAgIHNlcXVjZW5jaW5nOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25UeXBlLnNlcXVjZW5jaW5nLAogICAgICAgICAgdHlwZTogIkludmVudG9yeSBBZGp1c3RtZW50IiwKICAgICAgICB9OwogICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5hYmJyID0gZGF0YS5hYmJyOwogICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5zdHJ1Y3R1cmUgPSBkYXRhLnN0cnVjdHVyZTsKICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuc2VxdWNlbmNpbmcgPSBkYXRhLnNlcXVjZW5jaW5nOwogICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC50cmFuc2FjdGlvbkRhdGUgPSBkYXRhLnRyYW5zYWN0aW9uRGF0ZTsKICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHlwZSA9IGRhdGEudHlwZTsKICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICBhd2FpdCBiaWxsaW5nSGFuZGxlcgogICAgICAgICAgLmxhc3ROdW1iZXIoZGF0YSkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgIGNvbnN0IGxhc3ROdW1iZXIgPSB0aGlzLnplcm9QYWQoCiAgICAgICAgICAgICAgICBwYXJzZUludChyZXMubGFzdE51bWJlciksCiAgICAgICAgICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25UeXBlLmZvcm1hdAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50Lm51bWJlciA9CiAgICAgICAgICAgICAgICByZXMuc3VmZml4ICsKICAgICAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC50cmFuc2FjdGlvblR5cGUubnVtYmVyU2VwYXJhdG9yICsKICAgICAgICAgICAgICAgIGxhc3ROdW1iZXI7CiAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50Lmxhc3ROdW1iZXIgPSByZXMuc3VmZml4ICsgbGFzdE51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB6ZXJvUGFkKG51bSwgcGxhY2VzKSB7CiAgICAgIHJldHVybiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICIwIik7CiAgICB9LAogICAgc2F2ZVByaW50KCkge30sCiAgICBzYXZlTmV3KCkge30sCiAgICBhc3luYyBvblNhdmVDbG9zZShpc1NhdmUpIHsKICAgICAgaWYgKCF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB3aW5kb3cuY29uc29sZS5sb2coIm1FbXBsb3llZSIsIHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5lbXBsb3llZSk7CiAgICAgIGlmICh0aGlzLm1FbXBsb3llZS5pZCAhPT0gbnVsbCkgewogICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgbGV0IGlzQXV0b0dlbmVyYXRlID0gMTsKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgICAgICAgIGNvbnN0IHRyYW5EYXRlID0gbmV3IERhdGUodGhpcy50cmFuc2FjdGlvbkRhdGUpOwogICAgICAgICAgICAgIGNvbnN0IHRyYW5EYXRlQWRqdXN0bWVudCA9IG5ldyBEYXRlKAogICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnRyYW5zYWN0aW9uRGF0ZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgY29uc3QgdHJhbkRhdGVNID0gdHJhbkRhdGUuZ2V0RnVsbFllYXIoKSArIHRyYW5EYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICAgICAgY29uc3QgdHJhbkRhdGVUeG5NID0KICAgICAgICAgICAgICAgIHRyYW5EYXRlQWRqdXN0bWVudC5nZXRGdWxsWWVhcigpICsKICAgICAgICAgICAgICAgIHRyYW5EYXRlQWRqdXN0bWVudC5nZXRNb250aCgpOwogICAgICAgICAgICAgIGlmICh0cmFuRGF0ZU0gPT09IHRyYW5EYXRlVHhuTSkgewogICAgICAgICAgICAgICAgaXNBdXRvR2VuZXJhdGUgPSAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmF1dG9DYWxjdWxhdGUoKTsKICAgICAgICAgICAgbGV0IGl0ZW1MaW5lRFMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgY29uc3QgZGF0YVJvdyA9IGl0ZW1MaW5lRFMKICAgICAgICAgICAgICAuZGF0YSgpCiAgICAgICAgICAgICAgLmZpbHRlcigobykgPT4gby5idW9tICE9PSB7fSB8fCBvLmJ1b20gIT09IG51bGwpCiAgICAgICAgICAgICAgLm1hcCgobykgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVtTGluZU1vZGVsKG8pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoZGF0YVJvdy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBpZDogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmlkCiAgICAgICAgICAgICAgICAgID8gdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmlkCiAgICAgICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICAgICAgICB1dWlkOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudXVpZAogICAgICAgICAgICAgICAgICA/IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC51dWlkCiAgICAgICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICAgICAgICBqb3VybmFsX3V1aWQ6IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5qb3VybmFsX3V1aWQKICAgICAgICAgICAgICAgICAgPyB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuam91cm5hbF91dWlkCiAgICAgICAgICAgICAgICAgIDogIiIsCiAgICAgICAgICAgICAgICB0eXBlOiB0eG5UeXBlLAogICAgICAgICAgICAgICAgbnVtYmVyOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQubnVtYmVyLAogICAgICAgICAgICAgICAgYWJicjogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25EYXRlOiB0aGlzLnRyYW5zYWN0aW9uRGF0ZSwKICAgICAgICAgICAgICAgIG1vbnRoT2Y6IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5tb250aE9mLAogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25UeXBlLAogICAgICAgICAgICAgICAgdHhuUmF0ZTogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LnR4blJhdGUsCiAgICAgICAgICAgICAgICBleGNoYW5nZVJhdGU6IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5leGNoYW5nZVJhdGUsCiAgICAgICAgICAgICAgICBjdXJyZW5jeTogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmN1cnJlbmN5LAogICAgICAgICAgICAgICAgaXRlbUxpbmU6IGRhdGFSb3csCiAgICAgICAgICAgICAgICBzZWdtZW50OiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuc2VnbWVudCwKICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQubG9jYXRpb24sCiAgICAgICAgICAgICAgICBwcm9qZWN0OiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQucHJvamVjdCwKICAgICAgICAgICAgICAgIGVtcGxveWVlOiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuZW1wbG95ZWUsCiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbk5vdGU6IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC50cmFuc2FjdGlvbk5vdGUsCiAgICAgICAgICAgICAgICBqb3VybmFsTm90ZTogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmpvdXJuYWxOb3RlLAogICAgICAgICAgICAgICAgYWNjb3VudDogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmFjY291bnQsCiAgICAgICAgICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5jcmVhdGVkQXQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5hbW91bnQsCiAgICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmV4Y2hhbmdlQW1vdW50LAogICAgICAgICAgICAgICAgcXR5OiB0aGlzLmludmVudG9yeUFkanVzdG1lbnQucXR5LAogICAgICAgICAgICAgICAgbG9nZ2VkVXNlcjogdGhpcy5sb2dnZWRVc2VyLAogICAgICAgICAgICAgICAgaXNBdXRvR2VuZXJhdGU6IGlzQXV0b0dlbmVyYXRlLAogICAgICAgICAgICAgICAgalJhdzogdGhpcy5qUmF3LAogICAgICAgICAgICAgICAgYWN0aW9uVHlwZTogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgICAgICAgID8gdGhpcy4kcm91dGUucXVlcnkudHlwZQogICAgICAgICAgICAgICAgICA6ICJuZXciLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgYmlsbGluZ0hhbmRsZXIKICAgICAgICAgICAgICAgIC5pbnZlbnRvcnlBZGp1c3RtZW50KGRhdGEpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygiU3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2F2ZSA9PSAibmV3IikgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNTYXZlID09ICJjbG9zZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCJTb21ldGhpbmcgd2VudCB3cm9uZyIpOwogICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDEwKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB3aW5kb3cuaGlzdG9yeS5nbygtMSk7CiAgICB9LAogICAgY2xlYXIoKSB7CiAgICAgIHRoaXMubG9hZFByZWZpeCgpOwogICAgICB0aGlzLmxvYWRBY2NvdW50KCk7CiAgICAgIHRoaXMubG9hZFNlZ21lbnQoKTsKICAgICAgdGhpcy5sb2FkTG9jYXRpb24oKTsKICAgICAgdGhpcy5sb2FkUHJvamVjdHMoKTsKICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50ID0gbmV3IEludmVudG9yeUFkanVzdG1lbnQoe30pOwogICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLml0ZW1MaW5lRFMua2VuZG9XaWRnZXQoKTsKICAgICAgZHMuZGF0YShbXSk7CiAgICAgIHRoaXMuYWRkUm93KCk7CiAgICB9LAogICAgcmVtb3ZlUm93KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZEl0ZW1MaW5lIikuZGF0YSgia2VuZG9HcmlkIiksCiAgICAgICAgZGF0YVNvdXJjZSA9IGdyaWQuZGF0YVNvdXJjZSwKICAgICAgICBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwoKICAgICAgaWYgKGRhdGFTb3VyY2UudG90YWwoKSA+IDEpIHsKICAgICAgICBkYXRhU291cmNlLnJlbW92ZShkYXRhSXRlbSk7CiAgICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICBlcnJvck1lc3NhZ2UoKSB7fSwKICAgIGFjY291bnREcm9wRG93bkVkaXRvcigpIHt9LAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLiRzd2FsKHsKICAgICAgICB0aXRsZTogaTE4bi50KCJtc2dfdGl0bGVfd2FybmluZyIpLAogICAgICAgIHRleHQ6IGkxOG4udCgibXNnX2Rpc2NhcmQiKSwKICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBpMThuLnQoImNhbmNlbCIpLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiM0ZDQ4NDgiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI0VEMUEzQSIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IGkxOG4udCgiZGlzY2FyZCIpLAogICAgICB9KS50aGVuKChyZXN1bHRDZW4pID0+IHsKICAgICAgICBpZiAocmVzdWx0Q2VuLnZhbHVlKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGlkZVNtYWxsU2lkZWJhcigpIHsKICAgICAgdGhpcy5pc0hpZGVCYXIgPSAhdGhpcy5pc0hpZGVCYXI7CiAgICB9LAogICAgYXN5bmMgbG9hZFZpZXdBZGp1c3RtZW50KCkgewogICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsICdpZCcpCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gIiIKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgYmlsbGluZ0hhbmRsZXIKICAgICAgICAgICAgICAuaW52ZW50b3J5QWRqdXN0bWVudExpc3QoIj9pZD0iICsgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQgPSByZXMuZGF0YS5kYXRhWzBdOwogICAgICAgICAgICAgICAgICB0aGlzLml0ZW1MaW5lcyA9IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5pdGVtTGluZTsKICAgICAgICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMuaXRlbUxpbmVzLCAnLScpCiAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25EYXRlID0KICAgICAgICAgICAgICAgICAgICB0aGlzLmludmVudG9yeUFkanVzdG1lbnQudHJhbnNhY3Rpb25EYXRlOwogICAgICAgICAgICAgICAgICB0aGlzLm1FbXBsb3llZSA9IHRoaXMuaW52ZW50b3J5QWRqdXN0bWVudC5lbXBsb3llZTsKICAgICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudF8gPSB0aGlzLmludmVudG9yeUFkanVzdG1lbnQuYWNjb3VudDsKICAgICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlBZGp1c3RtZW50LmFjY291bnQgPSBhY2NvdW50XzsKICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgaWQoKSB7CiAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZygnaWQtLScsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5pbml0RGF0YSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgIHRoaXMubG9hZFZpZXdBZGp1c3RtZW50KCk7CiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIGZldGNoIHRoZSBkYXRhIHdoZW4gdGhlIHZpZXcgaXMgY3JlYXRlZCBhbmQgdGhlIGRhdGEgaXMKICAgIC8vIGFscmVhZHkgYmVpbmcgb2JzZXJ2ZWQKICAgIC8vIHRoaXMubG9hZE9iaigpCiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgYXdhaXQgdGhpcy5sb2FkU2FsZUZvcm1Db250ZW50KCk7CiAgICBhd2FpdCB0aGlzLmxvYWRBY2NvdW50KCk7CiAgICBhd2FpdCB0aGlzLmxvYWRMb2NhdGlvbigpOwogICAgYXdhaXQgdGhpcy5sb2FkUHJlZml4KCk7CiAgICBhd2FpdCB0aGlzLmxvYWRTZWdtZW50KCk7CiAgICBhd2FpdCB0aGlzLmxvYWRQcm9qZWN0cygpOwogICAgLy8gYXdhaXQgdGhpcy5sb2FkV2FyZWhvdXNlcygpCiAgICBhd2FpdCB0aGlzLmxvYWRFbXBsb3llZUNlbnRlcigpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhpZGRlbkJ1dHRvbigpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUgPT0gImVkaXQiKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["InventoryAdjustment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InventoryAdjustment.vue","sourceRoot":"src/views/products/product/inventory_adjustment","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col sm=\"12\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border rounded-sm\"\n            color=\"white\"\n          >\n            <v-row>\n              <v-col\n                class=\"bigSide py-0\"\n                sm=\"8\"\n                cols=\"12\"\n                style=\"transition: 0.3s ease-in\"\n                :class=\"{ hide_big_bar_class: isHideBar }\"\n              >\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                  <v-card outlined dense class=\"no_border\">\n                    <h2 class=\"mb-0\">{{ $t(\"inventory_adjustment\") }}</h2>\n                    <v-icon\n                      v-if=\"isHideBar\"\n                      @click=\"cancel()\"\n                      style=\"cursor: pointer; color: #333; font-size: 40px\"\n                      class=\"float-right\"\n                      >close\n                    </v-icon>\n                    <span\n                      style=\"transition: 0.3s ease-in; z-index: 10\"\n                      :class=\"{\n                        iconArrow: !isHideBar,\n                        iconArrowHide: isHideBar,\n                      }\"\n                    >\n                      <v-icon\n                        size=\"22\"\n                        class=\"arr_icon\"\n                        @click=\"hideSmallSidebar\"\n                        v-if=\"isHideBar\"\n                      >\n                        mdi-chevron-left-circle\n                      </v-icon>\n                      <v-icon\n                        size=\"22\"\n                        class=\"arr_icon\"\n                        @click=\"hideSmallSidebar\"\n                        v-if=\"!isHideBar\"\n                      >\n                        mdi-chevron-right-circle\n                      </v-icon>\n                    </span>\n                  </v-card>\n\n                  <v-card\n                    outlined\n                    dense\n                    class=\"px-3 no_border\"\n                    color=\"grayBg\"\n                    height=\" 172px\"\n                  >\n                    <v-row>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label\">{{ $t(\"date\") }}</label>\n                        <app-datepicker\n                          :initialDate=\"inventoryAdjustment.transactionDate\"\n                          @onChanged=\"onTransactionDateChanged\"\n                          @emitDate=\"\n                            inventoryAdjustment.transactionDate = $event\n                          \"\n                        />\n                        <label class=\"label\">{{ $t(\"stock_count_ref\") }}</label>\n                        <v-text-field class=\"mt-1\" outlined required />\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\">\n                        <label class=\"label\">{{\n                          $t(\"adjustment_number\")\n                        }}</label>\n                        <div class=\"d-flex mt-1\">\n                          <div class=\"code_text flex-1 text-bold\">\n                            {{ inventoryAdjustment.abbr }}\n                          </div>\n                          <v-text-field\n                            class=\"flex-2 custom-border\"\n                            v-model=\"inventoryAdjustment.number\"\n                            outlined\n                            :rules=\"[(v) => !!v || $t('is_required')]\"\n                            required\n                          />\n                          <v-icon\n                            color=\"black\"\n                            size=\"30\"\n                            style=\"height: 40px\"\n                            class=\"border_qrcode ml-2\"\n                            @click=\"generateNumber\"\n                            >mdi-qrcode\n                          </v-icon>\n                        </div>\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\">\n                        <label class=\"label\">{{\n                          $t(\"adjustment_account\")\n                        }}</label>\n                        <v-select\n                          class=\"mt-1\"\n                          :items=\"accounts\"\n                          tage=\"account\"\n                          item-value=\"id\"\n                          :item-text=\"(item) => `${item.number} - ${item.name}`\"\n                          v-model=\"inventoryAdjustment.account\"\n                          :rules=\"[(v) => !!v || $t('is_required')]\"\n                          return-object\n                          outlined\n                        />\n                        <!-- <label class=\"label\">{{ $t(\"adjustment_memo\") }}</label>\n                        <v-text-field\n                          class=\"mt-1\"\n                          v-model=\"inventoryAdjustment.transactionNote\"\n                          outlined\n                          tage=\"memo\"\n                          required\n                        /> -->\n                        <!-- <label class=\"label\">{{\n                          $t(\"message_for_journal\")\n                        }}</label>\n                        <v-text-field\n                          class=\"mt-1\"\n                          v-model=\"inventoryAdjustment.journalNote\"\n                          outlined\n                          tage=\"Message for Journal\"\n                          required\n                        /> -->\n                      </v-col>\n                    </v-row>\n                  </v-card>\n\n                  <v-row style=\"background-color: #fff\">\n                    <v-col sm=\"12\" cols=\"12\">\n                      <kendo-datasource\n                        ref=\"itemLineDS\"\n                        :data=\"itemLines\"\n                        :change=\"dataSourceChanged\"\n                      />\n                      <kendo-grid\n                        id=\"gridItemLine\"\n                        class=\"grid-function\"\n                        :data-source-ref=\"'itemLineDS'\"\n                        :sortable=\"false\"\n                        :column-menu=\"true\"\n                        :editable=\"true\"\n                        :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                          :command=\"{\n                            iconClass: 'k-icon k-i-trash',\n                            text: ' ',\n                            click: removeRow,\n                            class: 'btn-plus',\n                          }\"\n                          :title=\"''\"\n                          :width=\"63\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :title=\"$t('no.')\"\n                          :width=\"53\"\n                          :column-menu=\"false\"\n                          :template=\"rowNumberTmpl\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5;',\n                            class: 'text-products',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: products',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'item'\"\n                          :title=\"$t('product')\"\n                          :template=\"itemTemplate\"\n                          :editor=\"ItemDropDownEditor\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'description'\"\n                          :title=\"$t('description')\"\n                          :template=\"'<span>#=description#</span>'\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n\n                        <kendo-grid-column\n                          :field=\"'buom'\"\n                          :title=\"$t('uom')\"\n                          :width=\"170\"\n                          :template=\"UOMTemplate\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: left',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'cost'\"\n                          :title=\"$t('cost')\"\n                          :editor=\"numberEditor\"\n                          :template=\"'<span>#=kendo.toString(cost || 0, decimalFormat) || 0#</span>'\"\n                          :width=\"170\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'qoh'\"\n                          :title=\"$t('on_hand')\"\n                          :template=\"'<span>#=kendo.toString(qoh || 0, decimalFormat) || 0#</span>'\"\n                          :width=\"170\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'count'\"\n                          :title=\"$t('counted')\"\n                          :editor=\"numberEditor\"\n                          :template=\"'<span>#=kendo.toString(count || 0, decimalFormat)#</span>'\"\n                          :width=\"170\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'different'\"\n                          :title=\"$t('different')\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :width=\"170\"\n                          :template=\"'<span>#=kendo.toString(different || 0, decimalFormat)#</span>'\"\n                          :editor=\"numberEditor\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amount'\"\n                          :title=\"$t('amount')\"\n                          :width=\"170\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"'<span>#=kendo.toString(amount || 0, decimalFormat)#</span>'\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: left; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                      </kendo-grid>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                      <v-btn\n                        color=\"primary\"\n                        class=\"float-left ml-0 btn_plus rounded-4 white--text mr-2\"\n                        @click=\"addRow\"\n                      >\n                        <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                      </v-btn>\n                    </v-col>\n                    <v-col sm=\"6\" cols=\"12\">\n                      <label>{{ $t(\"message_these_adjustment\") }}</label>\n                      <v-textarea\n                        class=\"mt-1\"\n                        outlined\n                        no-resize\n                        height=\"70px\"\n                        tage=\"Message on Invoice\"\n                        placeholder=\"This will appear on the invoice\"\n                      />\n                      <label>{{ $t(\"message_on_journal\") }}</label>\n                      <v-textarea\n                        class=\"mt-1\"\n                        outlined\n                        no-resize\n                        height=\"70px\"\n                        tage=\"Message on Order\"\n                        placeholder=\"This will appear on the journal\"\n                      />\n                    </v-col>\n                    <v-col class=\"pt-5\" sm=\"6\" cols=\"12\">\n                      <v-simple-table>\n                        <template v-slot:default>\n                          <tbody>\n                            <tr>\n                              <td class=\"text-left\">{{ $t(\"dr\") }}</td>\n                              <td class=\"text-center\">:</td>\n                              <td class=\"text-right color_green text-bold\">\n                                {{ numberFormat(dr) }}\n                              </td>\n                            </tr>\n                            <tr>\n                              <td class=\"text-left\">{{ $t(\"cr\") }}</td>\n                              <td class=\"text-center\">:</td>\n                              <td class=\"text-right color_green text-bold\">\n                                {{ numberFormat(cr) }}\n                              </td>\n                            </tr>\n                          </tbody>\n                        </template>\n                      </v-simple-table>\n                    </v-col>\n                  </v-row>\n                  <v-divider />\n                  <v-card elevation=\"0\" class=\"no_border function_footer\">\n                    <v-alert type=\"warning\" v-model=\"alert\" dismissible>\n                      <span v-html=\"errorMessage\" />\n                    </v-alert>\n                    <v-menu>\n                      <v-list>\n                        <v-list-item\n                          v-for=\"(item, index) in templates\"\n                          :key=\"index\"\n                        >\n                          <v-list-item-title>{{\n                            item.title\n                          }}</v-list-item-title>\n                        </v-list-item>\n                      </v-list>\n                    </v-menu>\n                    <v-btn\n                      color=\"primary\"\n                      outlined\n                      class=\"text-capitalize black--text float-left\"\n                      @click=\"cancel\"\n                      >{{ $t(\"cancel\") }}\n                    </v-btn>\n                    <v-btn\n                      color=\"primary\"\n                      @click=\"onSaveClose('close')\"\n                      class=\"float-right white--text text-capitalize\"\n                    >\n                      {{ $t(\"save_close\") }}\n                    </v-btn>\n                    <v-btn\n                      color=\"secondary\"\n                      style=\"margin-right: 10px !important\"\n                      class=\"white--text float-right text-capitalize\"\n                      @click=\"onSaveClose('new')\"\n                      :hidden=\"hiddenButton\"\n                      >{{ $t(\"save_new\") }}\n                    </v-btn>\n                  </v-card>\n                </v-form>\n              </v-col>\n              <v-col\n                class=\"smallSide\"\n                sm=\"4\"\n                style=\"transition: 0.3s ease-in\"\n                :class=\"{ hide_small_bar_class: isHideBar }\"\n              >\n                <h3\n                  style=\"color: #b3b5bc; font-size: 20px\"\n                  v-if=\"!isHideBar\"\n                  class=\"text-uppercase float-right mt-n3\"\n                >\n                  <span class=\"pointer\" @click=\"Help('inventory adjustment')\">\n                    {{ $t(\"help\") }}\n                  </span>\n                  <v-icon\n                    @click=\"cancel()\"\n                    style=\"cursor: pointer; color: #333; font-size: 40px\"\n                    class=\"float-right mt-n1\"\n                    >close\n                  </v-icon>\n                </h3>\n\n                <div v-if=\"!isHideBar\" class=\"small_sidebar mt-8 grayBg\">\n                  <v-row>\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                      <v-card\n                        outlined\n                        dense\n                        class=\"\n                          pa-3\n                          mb-2\n                          no_border\n                          my_card\n                          rounded-4\n                          white--text\n                        \"\n                        color=\"primary\"\n                        height=\"60px\"\n                      >\n                        <h3 class=\"text-left font_13 flex-1 text-uppercase\">\n                          {{ $t(\"adjustment_amount\") }}\n                        </h3>\n                        <h3 class=\"text-right flex-1 font_20 niradei_heavy\">\n                          0000\n                        </h3>\n                      </v-card>\n                      <label class=\"label mb-0\">{{ $t(\"segment\") }}</label>\n                      <v-select\n                        class=\"mt-1\"\n                        v-model=\"inventoryAdjustment.segment\"\n                        :items=\"segments\"\n                        item-value=\"id\"\n                        :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                        return-object\n                        tage=\"sub Of\"\n                        placeholder=\"Sub Of\"\n                        outlined=\"\"\n                      />\n                      <label class=\"label mb-0\">{{ $t(\"location\") }}</label>\n                      <v-select\n                        class=\"mt-1\"\n                        v-model=\"inventoryAdjustment.location\"\n                        :items=\"locations\"\n                        item-value=\"id\"\n                        :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                        return-object\n                        tage=\"Location\"\n                        placeholder=\"location\"\n                        outlined=\"\"\n                      />\n                      <label class=\"label\">{{ $t(\"project\") }}</label>\n                      <v-select\n                        class=\"mt-1\"\n                        v-model=\"inventoryAdjustment.project\"\n                        :items=\"projects\"\n                        :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                        item-value=\"id\"\n                        tage=\"Project\"\n                        outlined\n                      />\n                      <!-- <label class=\"label\">{{ $t(\"employee\") }}</label> -->\n                      <!-- <v-col\n                        sm=\"12\"\n                        cols=\"12\"\n                        class=\"kendo_dropdown_custom pl-0 pr-0 pb-3 pt-0\"\n                      >\n                        <dropdownlist\n                          :data-items=\"employees\"\n                          @change=\"onEmployeeChanged\"\n                          :value=\"mEmployee\"\n                          :data-item-key=\"'id'\"\n                          :text-field=\"'name'\"\n                          :default-item=\"defaultItem\"\n                          :filterable=\"true\"\n                          :rules=\"[(v) => !!v || 'Employee is required']\"\n                          @filterchange=\"onEmployeeFilterChanged\"\n                        >\n                        </dropdownlist>\n                      </v-col> -->\n                      <label class=\"label\">{{ $t(\"for_month_of\") }}</label>\n                      <app-monthpicker\n                        :initMonthOf=\"inventoryAdjustment.monthOf\"\n                        @emitMonthOf=\"inventoryAdjustment.monthOf = $event\"\n                      />\n                      <p class=\"detial_smallside_p font_14\">\n                        {{ $t(\"inventory_adjustment_func_desc\") }}\n                      </p>\n                    </v-col>\n                  </v-row>\n                </div>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n      <LoadingMe\n        :isLoading=\"showLoading\"\n        :fullPage=\"false\"\n        type=\"loading\"\n        :myLoading=\"true\"\n        :alertMessage=\"loadingAlert\"\n        :color=\"loadingColorAlert\"\n        :alertText=\"loadingTextAlert\"\n      />\n    </v-container>\n  </v-app>\n</template>\n\n<script>\n// import kendo from '@progress/kendo-ui'\nimport { i18n } from \"@/i18n\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport InventoryAdjustment from \"@/scripts/model/inventoryAdjustment\";\nimport MonthOfPicker from \"@/components/kendo_templates/MonthOfPicker\";\nimport { ShowResource } from \"@/observable/store\";\nimport { uuid } from \"vue-uuid\";\nimport kendo from \"@progress/kendo-ui\";\nimport SaleFormContentModel from \"@/scripts/model/SaleFormContent\";\nimport ItemLineModel from \"@/scripts/inventory-adjustment/model/ItemLine\";\n// import { DropDownList } from \"@progress/kendo-vue-dropdowns\";\n\nconst accountHandler = require(\"@/scripts/handler/accounting/account\");\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nconst prefixHandler = require(\"@/scripts/prefixHandler\");\nconst warehouseHandler = require(\"@/scripts/warehouseHandler\");\nconst settingsHandler = require(\"@/scripts/settingsHandler\");\nconst locationHandler = require(\"@/scripts/locationHandler\");\nconst projectHandler = require(\"@/scripts/projectHandler\");\nconst productVariantHandler = require(\"@/scripts/productVariantHandler\");\nconst employeeHandler = require(\"@/scripts/employeeHandler\");\nconst saleFormContentHandler = require(\"@/scripts/saleFormContentHandler\");\nconst saleFormContentModel = new SaleFormContentModel({});\nconst currencyHandler = require(\"@/scripts/currency/handler/currencyHandler\");\n\nconst itemLineModel = new ItemLineModel({});\nconst prefix = \"inventory adjustment\";\nconst txnType = \"Inventory Adjustment\";\nconst itemLinePrefix = \"lin-\";\nconst $ = require(\"jquery\");\n\nconst textField = \"numberName\";\nconst keyField = \"id\";\nconst emptyItem = { [textField]: \"loading ...\" };\nconst defaultItem = { [textField]: \"Select employee...\", [keyField]: null };\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\n\nexport default {\n  name: \"InventoryAdjustment\",\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    \"app-datepicker\": DatePickerComponent,\n    \"app-monthpicker\": MonthOfPicker,\n    // dropdownlist: DropDownList,\n  },\n  props: [\"id\"],\n  data: () => ({\n    isEdit: false,\n    // LoadingMe\n    showLoading: true,\n    loadingAlert: false,\n    loadingColorAlert: \"\",\n    loadingTextAlert: \"\",\n    filter_: \"\",\n    requestStarted: false,\n    alert: false,\n    valid: true,\n    templates: [\n      { title: \"Draft\" },\n      { title: \"Open\" },\n      { title: \"Partially Closed\" },\n      { title: \"Closed\" },\n    ],\n    isHideBar: false,\n    accounts: [],\n    segments: [],\n    locations: [],\n    projects: [],\n    warehouses: [],\n    buom: [],\n    itemLines: [],\n    employees: [],\n    mEmployee: {},\n    baseCurrency: {},\n    exchangeRate: {},\n    saleFormContent: saleFormContentModel,\n    empBaseUrl: employeeHandler.search(),\n    inventoryAdjustment: new InventoryAdjustment({}),\n    itemLine: itemLineModel,\n    defaultItem: defaultItem,\n    transactionDate: \"\",\n    jRaw: [],\n    dr: 0,\n    cr: 0,\n    loggedUser: {\n      id: cookie.creator,\n      name: cookie.email,\n    },\n  }),\n  methods: {\n    numberFormat(value) {\n      return kendo.toString(value, `n${this.saleFormContent.decimal}`);\n    },\n    resetDataWhenTxnDateChanged() {\n      try {\n        let itemLineDS = this.$refs.itemLineDS.kendoWidget();\n        const rowData = itemLineDS.data();\n        this.itemLines = [];\n        rowData.map((o) => {\n          o.buom = {};\n          o.cost = 0;\n          o.amount = 0;\n          o.qoh = 0;\n          o.count = 0;\n          o.different = 0;\n          this.itemLines.push(new ItemLineModel(o));\n        });\n      } catch (e) {\n        window.console.log(\"error\", e);\n      }\n    },\n    onTransactionDateChanged() {\n      // this.resetDataWhenTxnDateChanged()\n      if (this.$route.params.id === undefined) {\n        this.generateNumber();\n      }\n      this.inventoryAdjustment.monthOf = new Date(\n        this.inventoryAdjustment.transactionDate\n      )\n        .toISOString()\n        .substr(0, 7);\n    },\n    afterFetch_(json) {\n      this.employees = json.data;\n    },\n    requestData_(skip, filter, baseUrl) {\n      const url = baseUrl + `/${filter}`;\n      this.requestStarted = true;\n      fetch(url)\n        .then((response) => {\n          return response.json();\n        })\n        .then(this.afterFetch_);\n    },\n    onEmployeeFilterChanged(event) {\n      const filter = event.filter.value;\n      this.requestData_(0, filter, this.empBaseUrl);\n      this.filter_ = filter;\n    },\n    async initData() {\n      if (this.$route.params.id !== undefined) {\n        await this.loadViewAdjustment();\n        // window.console.log('1', this.$route.params)\n      } else {\n        this.addRow();\n      }\n    },\n    async loadSaleFormContent() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          saleFormContentHandler.list().then(async (res) => {\n            if (res.data.statusCode === 200) {\n              const data = res.data.data;\n              if (data.length > 0) {\n                this.saleFormContent = data[0];\n                this.baseCurrency = data[0].baseCurrency;\n                this.inventoryAdjustment.currency = this.baseCurrency;\n                await this.initData();\n                await this.loadTransactionRate();\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadTransactionRate() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          const date = new Date(this.transactionDate)\n            .toISOString()\n            .substr(0, 10);\n          const currency = this.baseCurrency;\n          let code = \"\";\n          if (currency.hasOwnProperty(\"code\")) {\n            code = currency.code;\n          }\n          if (code !== undefined || code !== \"\") {\n            this.showLoading = true;\n            currencyHandler\n              .getLastExchangeRateByDate(date, code)\n              .then((res) => {\n                if (res.data.statusCode === 200) {\n                  this.showLoading = false;\n                  this.exchangeRate = res.data.data[0];\n                  this.inventoryAdjustment.txnRate = this.exchangeRate.rate;\n                  this.inventoryAdjustment.exchangeRate = this.exchangeRate;\n                  this.showLoading = false;\n                }\n              });\n          }\n        }, 10);\n      });\n    },\n    onEmployeeChanged(event) {\n      const value = event.value;\n      if (value && value[textField] === emptyItem[textField]) {\n        return;\n      }\n      this.mEmployee = value;\n      this.inventoryAdjustment.employee = value;\n    },\n    afterFetch(json) {\n      this.employees = json.data;\n    },\n    async loadEmployeeCenter() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.employees = [];\n          employeeHandler\n            .center(undefined)\n            .then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.employees = res.data.data;\n                if (this.employees.length > 0) {\n                  this.mEmployee = this.employees[0];\n                  window.console.log(this.employees[0], \"this.employees[0]\");\n                  this.inventoryAdjustment.employee = this.employees[0];\n                }\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    itemTemplate(dataItem) {\n      const item = dataItem.item;\n      if (item) {\n        return `<span>${item.name ? item.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    ItemDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"contains\",\n          dataTextField: \"name\",\n          dataValueField: \"id\",\n          headerTemplate:\n            '<div class=\"dropdown-header k-widget k-header\">' +\n            \"<span>Items </span>\" +\n            \"<span></span>\" +\n            \"</div>\",\n          template: \"<span>#=name#</span>\",\n          optionLabel: \"--- Select ---\",\n          dataSource: new kendo.data.DataSource({\n            serverFiltering: true,\n            transport: {\n              read: {\n                url: productVariantHandler.itemVariantSearchURL(),\n              },\n              dataType: \"json\",\n            },\n            schema: {\n              model: {\n                id: \"id\",\n                fields: {\n                  id: { type: \"string\" },\n                  name: { type: \"string\" },\n                  sku: { type: \"string\" },\n                },\n              },\n              data: function (response) {\n                return response.data;\n              },\n              total: function (response) {\n                return response.data.count;\n              },\n            },\n          }),\n        });\n    },\n    qohTemplate(dataItem) {\n      // const buom = dataItem.buom || {}\n      const qoh = dataItem.qoh || 0;\n      // if (buom.hasOwnProperty('name')) {\n      return qoh;\n      // }\n      // return ``\n    },\n    UOMTemplate(dataItem) {\n      const uom = dataItem.buom;\n      if (uom) {\n        return `<span>${uom.name ? uom.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    numberEditor(container, options) {\n      kendo\n        .jQuery('<input data-bind=\"value:' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoNumericTextBox({\n          decimals: 30,\n          min: 0,\n          format: `${this.saleFormContent.decimal}`,\n        });\n    },\n    rowNumberTmpl(dataItem) {\n      let ds = this.$refs.itemLineDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    addRow() {\n      let ds = this.$refs.itemLineDS.kendoWidget(),\n        total = ds.total();\n      this.itemLine.id = itemLinePrefix + uuid.v1();\n      this.itemLine.decimalFormat = \"n\" + this.saleFormContent.decimal;\n      ds.insert(total, this.itemLine);\n    },\n    async dataSourceChanged(e) {\n      if (e.field) {\n        let dataRow = e.items[0],\n          buom = {},\n          count = 0,\n          diff = 0,\n          qoh = 0;\n        switch (e.field) {\n          case \"item\":\n            dataRow.set(\"description\", dataRow.item.description);\n            buom = dataRow.item.uom;\n            dataRow.set(\"buom\", buom);\n            await this.searchTransaction(dataRow, dataRow.item.id);\n            break;\n          case \"count\":\n            try {\n              count = parseFloat(dataRow.count || 0);\n              qoh = parseFloat(dataRow.qoh || 0);\n              diff = count - qoh;\n              dataRow.set(\"different\", parseFloat(diff));\n              dataRow.set(\n                \"amount\",\n                parseFloat(dataRow.cost) * parseFloat(diff)\n              );\n            } catch {\n              dataRow.set(\"different\", 0);\n              dataRow.set(\"amount\", 0);\n            }\n            break;\n          case \"cost\":\n            try {\n              diff = parseFloat(dataRow.different || 0);\n              dataRow.set(\n                \"amount\",\n                parseFloat(dataRow.cost) * parseFloat(diff)\n              );\n            } catch {\n              dataRow.set(\"amount\", 0);\n            }\n            break;\n          default:\n            break;\n        }\n        if (e.field) {\n          this.autoCalculate();\n          // this.rawForJournal()\n        }\n      }\n    },\n    autoCalculate() {\n      let ds = this.$refs.itemLineDS.kendoWidget();\n      let nature = \"\",\n        amount = 0,\n        qty = 0;\n      this.jRaw = [];\n      const rows = ds.data();\n      rows.forEach((value) => {\n        const amt = kendo.parseFloat(value.amount);\n        const diff = kendo.parseFloat(value.different);\n        amount += amt;\n        qty += diff;\n        const item = value.item;\n        if (amt > 0) {\n          nature = \"dr\";\n        } else {\n          nature = \"cr\";\n        }\n        if (item) {\n          if (item.type === \"Variant\") {\n            if (item.hasOwnProperty(\"inventoryAcc\")) {\n              if (item.inventoryAcc.hasOwnProperty(\"id\")) {\n                let inventoryAcc = item.inventoryAcc;\n                this.jRaw.push({\n                  id: inventoryAcc.id + \"-\" + nature,\n                  line: new ItemLineModel(value),\n                  description: item.description || \"\",\n                  account: item.inventoryAcc,\n                  accountId: item.inventoryAcc.id,\n                  amount: amt, // qty*avg_cost ,\n                  exchangeAmount: amt, //xAmount,\n                  type: nature,\n                  typeAs: \"item\",\n                });\n              }\n            }\n          }\n        }\n      });\n      this.inventoryAdjustment.amount = amount;\n      this.inventoryAdjustment.exchangeAmount = amount;\n      this.inventoryAdjustment.qty = qty;\n      // adjustment account\n      if (this.inventoryAdjustment.account) {\n        const adjustAcc = this.inventoryAdjustment.account;\n        if (amount * -1 > 0) {\n          nature = \"dr\";\n        } else {\n          nature = \"cr\";\n        }\n        this.jRaw.push({\n          id: adjustAcc.id + \"-\" + nature,\n          line: new ItemLineModel({}),\n          description: this.inventoryAdjustment.journalNote,\n          account: adjustAcc,\n          accountId: adjustAcc.id,\n          amount: amount * -1, // qty*avg_cost ,\n          exchangeAmount: amount * -1, //xAmount,\n          type: nature,\n          typeAs: \"adjustment acc\",\n        });\n      }\n      // todo: raw Journal\n      // const account = this.inventoryAdjustment.account || {}\n      // if (this.inventoryAdjustment.amountDue > 0) {\n      //   nature = 'dr'\n      // } else {\n      //   nature = 'cr'\n      // }\n      // if (account) {\n      //   if (account.hasOwnProperty('id')) {\n      //     this.jRaw.push({\n      //       id: account.id + '-' + nature,\n      //       line: new ItemLineModel({}),\n      //       description: this.invoice.journalNote,\n      //       account: account,\n      //       accountId: account.id,\n      //       exchangeAmount: this.inventoryAdjustment.exchangeAmount,\n      //       amount: this.invoice.amountDue,\n      //       type: nature,\n      //       typeAs: 'ar'\n      //     })\n      //   }\n      // }\n      // todo: end raw Journal\n      this.shrinkData(this.jRaw);\n      // const unique = this.removeDuplicate(this.accounts)\n      // window.console.log(unique, 'unique')\n    },\n    removeDuplicate(array) {\n      const result = [];\n      const map = new Map();\n      for (const item of array) {\n        if (!map.has(item.id)) {\n          map.set(item.id, true); // set any value to Map\n          result.push(item);\n        }\n      }\n      return result;\n    },\n    shrinkData(obj) {\n      const uniques =\n        this.removeDuplicate(obj); /*[...new Set(accountId.map(i => {\n                return {\n                    id_: i.id_,\n                    id: i.id,\n                    type: i.type\n                }\n            }))]*/\n      uniques.forEach((n) => {\n        const found = obj.filter((m) => m.id === n.id);\n        let amount = 0,\n          xAmount = 0;\n        found.forEach((z) => {\n          amount += parseFloat(z.amount || 0);\n          xAmount += parseFloat(z.exchangeAmount || 0);\n        });\n        n.amount = parseFloat(amount); //this.numberFormat(amount)\n        n.exchangeAmount = parseFloat(xAmount); //parseFloat(parseFloat(amount * parseFloat(this.invoice.txnRate))) //this.numberFormat(amount * parseFloat(this.invoice.txnRate)) //.toFixed(this.saleFormContent.decimal)\n      });\n      this.jRaw = uniques;\n      let dr = 0,\n        cr = 0;\n      this.jRaw.forEach((j) => {\n        switch (j.type) {\n          case \"cr\":\n            cr += parseFloat(j.amount);\n            break;\n          case \"dr\":\n            dr += parseFloat(j.amount);\n            break;\n          default:\n            break;\n        }\n      });\n      this.dr = dr;\n      this.cr = cr;\n      window.console.log(\"dr=\", dr, \"cr=\", cr, \"dr+cr = \", dr + cr);\n      window.console.log(JSON.stringify(uniques), \"uniques\");\n    },\n    Help(keyword_search) {\n      ShowResource(keyword_search);\n    },\n    async searchTransaction(dataRow, itemId) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          const startDate = this.transactionDate;\n          let strFilter = \"?asOf=\" + startDate + \"&id=\" + itemId;\n          billingHandler.inventoryBalance(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              const balance = res.data.data;\n              if (balance.length > 0) {\n                dataRow.set(\"cost\", balance[0].wac);\n                dataRow.set(\"qoh\", balance[0].qoh);\n                dataRow.set(\n                  \"amount\",\n                  parseFloat(balance[0].wac) * parseFloat(dataRow.different)\n                );\n              } else {\n                dataRow.set(\"cost\", 0);\n              }\n              window.console.log(\"balance\", res.data.data);\n            }\n            this.showLoading = false;\n          });\n        }, 10);\n      });\n    },\n    async loadAccount() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          accountHandler.getAll().then((res) => {\n            this.showLoading = false;\n            this.accounts = res.data.map((itm) => {\n              return {\n                id: itm.uuid,\n                uuid: itm.uuid,\n                name: itm.name,\n                local_name: itm.local_name,\n                number: itm.number,\n                is_taxable: itm.is_taxable,\n                banhjiAccCode: itm.banhjiAccCode,\n                group_code: itm.group_code,\n                parent_account: itm.parent_account,\n                type_code: itm.type_code,\n                account_type: itm.account_type,\n              };\n            });\n            if (this.accounts.length > 0) {\n              this.inventoryAdjustment.account = this.accounts[0];\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadProjects() {\n      await projectHandler.list().then((res) => {\n        this.projects = res.data.data;\n        if (this.projects.length > 0) {\n          this.inventoryAdjustment.project = this.projects[0];\n        }\n      });\n    },\n    async loadSegment() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.segments = [];\n          settingsHandler\n            .getSeg()\n            .then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.segments = res.data.data;\n                if (this.segments.length > 0) {\n                  this.inventoryAdjustment.segment = this.segments[0];\n                }\n                // this.segmentList = res.data.data\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    async loadLocation() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.locations = [];\n          locationHandler\n            .list()\n            .then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.locations = res.data.data;\n                if (this.locations.length > 0) {\n                  this.inventoryAdjustment.location = this.locations[0];\n                }\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    async loadWarehouses() {\n      warehouseHandler.getWarehouseSettingAll().then((res) => {\n        this.warehouses = res;\n      });\n    },\n    async loadPrefix() {\n      new Promise((resolve) => {\n        setTimeout(async () => {\n          resolve(\"resolved\");\n          await prefixHandler.get(prefix).then(async (res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoading = false;\n              this.transactionTypes = res.data.data;\n              if (this.transactionTypes.length > 0) {\n                this.inventoryAdjustment.transactionType =\n                  this.transactionTypes[0];\n                if (this.$route.params.id === undefined) {\n                  await this.generateNumber();\n                }\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async generateNumber() {\n      if (this.inventoryAdjustment.transactionDate !== \"\") {\n        let data = {\n          abbr: this.inventoryAdjustment.transactionType.abbr,\n          structure: this.inventoryAdjustment.transactionType.structure,\n          transactionDate: this.inventoryAdjustment.transactionDate,\n          sequcencing: this.inventoryAdjustment.transactionType.sequcencing,\n          type: \"Inventory Adjustment\",\n        };\n        this.inventoryAdjustment.abbr = data.abbr;\n        this.inventoryAdjustment.structure = data.structure;\n        this.inventoryAdjustment.sequcencing = data.sequcencing;\n        this.inventoryAdjustment.transactionDate = data.transactionDate;\n        this.inventoryAdjustment.type = data.type;\n        this.showLoading = true;\n        await billingHandler\n          .lastNumber(data)\n          .then((response) => {\n            if (response.data.statusCode === 200) {\n              this.showLoading = false;\n              const res = response.data.data;\n              const lastNumber = this.zeroPad(\n                parseInt(res.lastNumber),\n                this.inventoryAdjustment.transactionType.format\n              );\n              this.inventoryAdjustment.number =\n                res.suffix +\n                this.inventoryAdjustment.transactionType.numberSeparator +\n                lastNumber;\n              this.inventoryAdjustment.lastNumber = res.suffix + lastNumber;\n            }\n          })\n          .catch((e) => {\n            this.showLoading = false;\n            window.console.error(e);\n          });\n      }\n    },\n    zeroPad(num, places) {\n      return String(num).padStart(places, \"0\");\n    },\n    savePrint() {},\n    saveNew() {},\n    async onSaveClose(isSave) {\n      if (!this.$refs.form.validate()) {\n        this.$refs.form.validate();\n        return;\n      }\n      window.console.log(\"mEmployee\", this.inventoryAdjustment.employee);\n      if (this.mEmployee.id !== null) {\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(\"resolved\");\n            let isAutoGenerate = 1;\n            if (this.$route.params.id) {\n              const tranDate = new Date(this.transactionDate);\n              const tranDateAdjustment = new Date(\n                this.inventoryAdjustment.transactionDate\n              );\n              const tranDateM = tranDate.getFullYear() + tranDate.getMonth();\n              const tranDateTxnM =\n                tranDateAdjustment.getFullYear() +\n                tranDateAdjustment.getMonth();\n              if (tranDateM === tranDateTxnM) {\n                isAutoGenerate = 0;\n              }\n            }\n            this.autoCalculate();\n            let itemLineDS = this.$refs.itemLineDS.kendoWidget();\n            const dataRow = itemLineDS\n              .data()\n              .filter((o) => o.buom !== {} || o.buom !== null)\n              .map((o) => {\n                return new ItemLineModel(o);\n              });\n            if (dataRow.length > 0) {\n              let data = {\n                id: this.inventoryAdjustment.id\n                  ? this.inventoryAdjustment.id\n                  : \"\",\n                uuid: this.inventoryAdjustment.uuid\n                  ? this.inventoryAdjustment.uuid\n                  : \"\",\n                journal_uuid: this.inventoryAdjustment.journal_uuid\n                  ? this.inventoryAdjustment.journal_uuid\n                  : \"\",\n                type: txnType,\n                number: this.inventoryAdjustment.number,\n                abbr: this.inventoryAdjustment.transactionType.abbr,\n                transactionDate: this.transactionDate,\n                monthOf: this.inventoryAdjustment.monthOf,\n                transactionType: this.inventoryAdjustment.transactionType,\n                txnRate: this.inventoryAdjustment.txnRate,\n                exchangeRate: this.inventoryAdjustment.exchangeRate,\n                currency: this.inventoryAdjustment.currency,\n                itemLine: dataRow,\n                segment: this.inventoryAdjustment.segment,\n                location: this.inventoryAdjustment.location,\n                project: this.inventoryAdjustment.project,\n                employee: this.inventoryAdjustment.employee,\n                transactionNote: this.inventoryAdjustment.transactionNote,\n                journalNote: this.inventoryAdjustment.journalNote,\n                account: this.inventoryAdjustment.account,\n                status: 1,\n                createdAt: this.inventoryAdjustment.createdAt,\n                amount: this.inventoryAdjustment.amount,\n                exchangeAmount: this.inventoryAdjustment.exchangeAmount,\n                qty: this.inventoryAdjustment.qty,\n                loggedUser: this.loggedUser,\n                isAutoGenerate: isAutoGenerate,\n                jRaw: this.jRaw,\n                actionType: this.$route.params.id\n                  ? this.$route.query.type\n                  : \"new\",\n              };\n              this.showLoading = true;\n              billingHandler\n                .inventoryAdjustment(data)\n                .then((response) => {\n                  if (response.data.statusCode === 201) {\n                    this.showLoading = false;\n                    this.$snotify.success(\"Successfully\");\n                    if (isSave == \"new\") {\n                      this.clear();\n                    } else if (isSave == \"close\") {\n                      this.clear();\n                      this.close();\n                    }\n                  }\n                })\n                .catch((e) => {\n                  this.showLoading = false;\n                  this.$snotify.error(\"Something went wrong\");\n                  this.errors.push(e);\n                });\n            }\n          }, 10);\n        });\n      }\n    },\n    close() {\n      window.history.go(-1);\n    },\n    clear() {\n      this.loadPrefix();\n      this.loadAccount();\n      this.loadSegment();\n      this.loadLocation();\n      this.loadProjects();\n      this.inventoryAdjustment = new InventoryAdjustment({});\n      let ds = this.$refs.itemLineDS.kendoWidget();\n      ds.data([]);\n      this.addRow();\n    },\n    removeRow(e) {\n      e.preventDefault();\n      const grid = kendo.jQuery(\"#gridItemLine\").data(\"kendoGrid\"),\n        dataSource = grid.dataSource,\n        dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n      if (dataSource.total() > 1) {\n        dataSource.remove(dataItem);\n        this.autoCalculate();\n      }\n    },\n    errorMessage() {},\n    accountDropDownEditor() {},\n    cancel() {\n      this.$swal({\n        title: i18n.t(\"msg_title_warning\"),\n        text: i18n.t(\"msg_discard\"),\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: i18n.t(\"cancel\"),\n        confirmButtonColor: \"#4d4848\",\n        cancelButtonColor: \"#ED1A3A\",\n        confirmButtonText: i18n.t(\"discard\"),\n      }).then((resultCen) => {\n        if (resultCen.value) {\n          this.$router.go(-1);\n        }\n      });\n    },\n    hideSmallSidebar() {\n      this.isHideBar = !this.isHideBar;\n    },\n    async loadViewAdjustment() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          // window.console.log(this.$route.params.id, 'id')\n          if (\n            this.$route.params.id !== undefined ||\n            this.$route.params.id !== \"\"\n          ) {\n            this.showLoading = true;\n            billingHandler\n              .inventoryAdjustmentList(\"?id=\" + this.$route.params.id)\n              .then((res) => {\n                if (res.data.statusCode === 200) {\n                  this.showLoading = false;\n                  this.inventoryAdjustment = res.data.data[0];\n                  this.itemLines = this.inventoryAdjustment.itemLine;\n                  // window.console.log(this.itemLines, '-')\n                  this.transactionDate =\n                    this.inventoryAdjustment.transactionDate;\n                  this.mEmployee = this.inventoryAdjustment.employee;\n                  const account_ = this.inventoryAdjustment.account;\n                  this.inventoryAdjustment.account = account_;\n                  this.autoCalculate();\n                }\n              });\n          }\n        }, 10);\n      });\n    },\n  },\n  watch: {\n    id() {\n      // window.console.log('id--', this.$route.params.id)\n      if (this.$route.params.id === undefined) {\n        this.initData();\n      } else {\n        this.showLoading = true;\n        this.loadViewAdjustment();\n        this.showLoading = false;\n      }\n    },\n  },\n  created() {\n    // fetch the data when the view is created and the data is\n    // already being observed\n    // this.loadObj()\n  },\n  async mounted() {\n    await this.loadSaleFormContent();\n    await this.loadAccount();\n    await this.loadLocation();\n    await this.loadPrefix();\n    await this.loadSegment();\n    await this.loadProjects();\n    // await this.loadWarehouses()\n    await this.loadEmployeeCenter();\n  },\n  computed: {\n    hiddenButton() {\n      if (this.$route.query.type == \"edit\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.small_sidebar {\n  height: 95%;\n  position: relative;\n  padding: 12px;\n}\n\n.hide_small_bar_class {\n  max-width: 0;\n  transition: 0.5s ease-in;\n  flex: 0 0 0;\n  padding: 0;\n}\n\n.hide_big_bar_class {\n  max-width: 100%;\n  transition: 0.5s ease-in;\n  flex: 0 0 100%;\n}\n\n.iconArrow {\n  right: -35px;\n  position: absolute;\n  bottom: -10px;\n}\n\n.iconArrowHide {\n  position: absolute;\n  right: -7px;\n  bottom: -10px;\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: transparent !important;\n}\n\n.detial_smallside_p {\n  /*position: absolute;*/\n  bottom: 10px;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/reports/budget_financial/BudgetSegment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/reports/budget_financial/BudgetSegment.vue","mtime":1639468046390},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgeyBpMThuIH0gZnJvbSAiQC9pMThuIjsKaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7Ci8qIE1vZGVscyAqLwppbXBvcnQgU2VnbWVudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9TZWdtZW50LmpzIjsKaW1wb3J0IEJ1ZGdldE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9CdWRnZXQuanMiOwppbXBvcnQgQWNjb3VudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BY2NvdW50LmpzIjsKaW1wb3J0IHsgZGF0YVN0b3JlIH0gZnJvbSAiQC9vYnNlcnZhYmxlL3N0b3JlIjsKCmNvbnN0IGluY29tZVN0YXRlbWVudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaGFuZGxlci9hY2NvdW50aW5nL2luY29tZVN0YXRlbWVudEhhbmRsZXIiKTsKY29uc3QgT3JkZXJOdW1iZXJQTCA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL09yZGVyTnVtYmVyUEwuanMiKTsKY29uc3QgTnVtYmVySW5Xb3JkID0gcmVxdWlyZSgiQC9zY3JpcHRzL2RlZmF1bHRfc2V0dXAvTnVtYmVySW5Xb3JkLmpzIik7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTG9hZGluZ01lOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9Mb2FkaW5nIiksCiAgICAiYXBwLWZpc2NhbC1kYXRlLWRyb3Bkb3dubGlzdCI6ICgpID0+CiAgICAgIGltcG9ydCgiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9GaXNjYWxEYXRlRHJvcERvd25MaXN0IiksCiAgICAiYXBwLW1vbnRoLW9mLXBpY2tlciI6ICgpID0+CiAgICAgIGltcG9ydCgiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9Nb250aE9mUGlja2VyIiksCiAgICAiYXBwLXJlcG9ydGluZy1sYW5ndWFnZSI6ICgpID0+CiAgICAgIGltcG9ydCgiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9SZXBvcnRpbmdMYW5ndWFnZURyb3BEb3duTGlzdCIpLAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIG1vbnRoT2Y6ICIiLAogICAgYnVkZ2V0OiBuZXcgQnVkZ2V0TW9kZWwoKSwKICAgIGJ1ZGdldExpc3Q6IFtdLAogICAgaW5jb21lU3RhdGVtZW50czogW10sCiAgICBzdGF0ZW1lbnRQTExpc3Q6IFtdLAogICAgZmlzY2FsRGF0ZTogbnVsbCwKICAgIGZpc2NhbE1vbnRoczogW10sCiAgICBtaW5Nb250aDogIiIsCiAgICBtYXhNb250aDogIiIsCiAgICBIZWxwZXI6IEhlbHBlciwKICAgIGNvbHVtbnM6IFtdLAogICAgc29ydERlZmluaXRpb246IHsgZmllbGQ6ICJudW1iZXIiLCBkaXI6ICJhc2MiIH0sCiAgICBncm91cGFibGU6IHsKICAgICAgZW5hYmxlZDogZmFsc2UsCiAgICAgIHNob3dGb290ZXI6IHRydWUsCiAgICB9LAogICAgZ3JvdXBEZWZpbml0aW9uOiBbXSwKICAgIGFnZ3JlZ2F0ZURlZmluaXRpb246IFsKICAgICAgeyBmaWVsZDogImJ1ZGdldF9tb250aCIsIGFnZ3JlZ2F0ZTogInN1bSIgfSwKICAgICAgeyBmaWVsZDogImJ1ZGdldF95dGQiLCBhZ2dyZWdhdGU6ICJzdW0iIH0sCiAgICAgIHsgZmllbGQ6ICJidWRnZXRfd2hvbGUiLCBhZ2dyZWdhdGU6ICJzdW0iIH0sCiAgICAgIHsgZmllbGQ6ICJhY3R1YWxfbW9udGgiLCBhZ2dyZWdhdGU6ICJzdW0iIH0sCiAgICAgIHsgZmllbGQ6ICJhY3R1YWxfeXRkIiwgYWdncmVnYXRlOiAic3VtIiB9LAogICAgICB7IGZpZWxkOiAiYWN0dWFsX3dob2xlIiwgYWdncmVnYXRlOiAic3VtIiB9LAogICAgXSwKICAgIHNjaGVtYURlZmluaXRpb246IHsKICAgICAgbW9kZWw6IHsgaWQ6ICJ1dWlkIiB9LAogICAgfSwKICAgIC8vIFJlcG9ydGluZyBMYW5ndWFnZQogICAgcmVwb3J0aW5nTGFuZ3VhZ2U6ICJlbmdsaXNoIiwKICAgIGZpZWxkTmFtZTogIm5hbWUiLAogICAgZmllbGRUeXBlOiAidHlwZSIsCiAgICB0b3RhbFdvcmQ6ICJUb3RhbCIsCiAgICAvLyBMb2FkaW5nTWUKICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICB9KSwKICBtZXRob2RzOiB7CiAgICBvbkZpc2NhbERhdGVDaGFuZ2VzKCkgewogICAgICB0aGlzLm1vbnRoT2YgPSAiIjsKICAgICAgdGhpcy5idWRnZXQgPSBuZXcgQnVkZ2V0TW9kZWwoKTsKICAgICAgdGhpcy5maXNjYWxNb250aHMgPSBbXTsKCiAgICAgIGlmICh0aGlzLmZpc2NhbERhdGUgIT09IG51bGwpIHsKICAgICAgICAvKiBTZXQgTW9udGggUmFuZ2UgKi8KICAgICAgICB0aGlzLm1pbk1vbnRoID0gdGhpcy5maXNjYWxEYXRlLnN0YXJ0X2RhdGU7CiAgICAgICAgdGhpcy5tYXhNb250aCA9IHRoaXMuZmlzY2FsRGF0ZS5lbmRfZGF0ZTsKCiAgICAgICAgLyogR2VuZXJhdGUgTW9udGhzICovCiAgICAgICAgdGhpcy5maXNjYWxNb250aHMgPSBIZWxwZXIuZ2VuZXJhdGVGaXNjYWxNb250aHMoCiAgICAgICAgICB0aGlzLmZpc2NhbERhdGUuc3RhcnRfZGF0ZSwKICAgICAgICAgIHRoaXMuZmlzY2FsRGF0ZS5lbmRfZGF0ZSwKICAgICAgICAgICIxMiIKICAgICAgICApOwoKICAgICAgICAvKiBMb2FkIEJ1ZGdldCAqLwogICAgICAgIHRoaXMubG9hZEJ1ZGdldCgpOwogICAgICB9CiAgICB9LAogICAgb25Nb250aE9mQ2hhbmdlcygpIHsKICAgICAgaWYgKHRoaXMuaW5jb21lU3RhdGVtZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgLyogQmluZCBEYXRhICovCiAgICAgICAgdGhpcy5iaW5kRGF0YSgpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbG9hZEJ1ZGdldCgpIHsKICAgICAgbGV0IGJ1ZGdldHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYnVkZ2V0cy9nZXRMaXN0IiksCiAgICAgICAgc2VnbWVudHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2VnbWVudHMvZ2V0TGlzdCIpOwoKICAgICAgbGV0IGJ1ZGdldExpc3QgPSBbXTsKICAgICAgYnVkZ2V0cy5mb3JFYWNoKCh2YWx1ZSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIHZhbHVlLmZpc2NhbF95ZWFyLnV1aWQgPT09IHRoaXMuZmlzY2FsRGF0ZS51dWlkICYmCiAgICAgICAgICB2YWx1ZS5zZWdtZW50X3V1aWQgIT09ICIiCiAgICAgICAgKSB7CiAgICAgICAgICBsZXQgYnVkZ2V0ID0gbmV3IEJ1ZGdldE1vZGVsKHZhbHVlKTsKICAgICAgICAgIGJ1ZGdldC5zZWdtZW50ID0gbmV3IFNlZ21lbnRNb2RlbCgKICAgICAgICAgICAgc2VnbWVudHMuZmluZCgoaSkgPT4gaS5pZCA9PT0gdmFsdWUuc2VnbWVudF91dWlkKQogICAgICAgICAgKTsKICAgICAgICAgIGJ1ZGdldExpc3QucHVzaChidWRnZXQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYnVkZ2V0TGlzdCA9IGJ1ZGdldExpc3Q7CiAgICB9LAogICAgLyogT24gQnVkZ2V0IENoYW5nZXMgKi8KICAgIG9uQ2hhbmdlQnVkZ2V0KCkgewogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfSwKICAgIC8qIFNlYXJjaCAqLwogICAgc2VhcmNoKCkgewogICAgICBpZiAodGhpcy5idWRnZXQudXVpZCAhPT0gIiIpIHsKICAgICAgICBsZXQgc2RhdGUgPQogICAgICAgICAgICBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh0aGlzLmZpc2NhbERhdGUuc3RhcnRfZGF0ZSksICJ5eXl5LU1NLWRkIikgKwogICAgICAgICAgICAiVDAwOjAwOjAwLjAwMFoiLAogICAgICAgICAgZWRhdGUgPQogICAgICAgICAgICBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh0aGlzLmZpc2NhbERhdGUuZW5kX2RhdGUpLCAieXl5eS1NTS1kZCIpICsKICAgICAgICAgICAgIlQyMzo1OTo1OS45OTlaIjsKCiAgICAgICAgLy8gRW1wdHkgc3RhdGVtZW50UExEUwogICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuc3RhdGVtZW50UExEUy5rZW5kb1dpZGdldCgpOwogICAgICAgIGRzLmRhdGEoW10pOwoKICAgICAgICAvLyBRdWVyeSBJbmNvbWUgU3RhdGVtZW50CiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgaW5jb21lU3RhdGVtZW50SGFuZGxlcgogICAgICAgICAgLmdldEluY29tZVN0YXRlbWVudCh7CiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHN0YXJ0X2RhdGU6IHNkYXRlLAogICAgICAgICAgICAgIGVuZF9kYXRlOiBlZGF0ZSwKICAgICAgICAgICAgICBncm91cF9ieTogIjEyIiwKICAgICAgICAgICAgICBzZWdtZW50X3V1aWQ6IHRoaXMuYnVkZ2V0LnNlZ21lbnRfdXVpZCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICAgIHRoaXMuaW5jb21lU3RhdGVtZW50cyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogQWxlcnQgV2FybmluZyAqLwogICAgICAgIHRoaXMuJHNub3RpZnkud2FybmluZyhpMThuLnQoInBsZWFzZV9zZWxlY3RfYnVkZ2V0IikpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgYmluZERhdGEoKSB7CiAgICAgIGxldCBlbnRyaWVzID0gW107CiAgICAgIGxldCBFbnRyeSA9IGtlbmRvLmRhdGEuTW9kZWwuZGVmaW5lKHsKICAgICAgICBpZDogInV1aWQiLCAvLyB0aGUgaWRlbnRpZmllciBvZiB0aGUgbW9kZWwKICAgICAgICBmaWVsZHM6IHsKICAgICAgICAgIC8qIEJ1ZGdldCAqLwogICAgICAgICAgYnVkZ2V0X21vbnRoOiB7IHR5cGU6ICJudW1iZXIiLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgIGJ1ZGdldF95dGQ6IHsgdHlwZTogIm51bWJlciIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgYnVkZ2V0X3dob2xlOiB7IHR5cGU6ICJudW1iZXIiLCBkZWZhdWx0VmFsdWU6IDAgfSwKCiAgICAgICAgICAvKiBBY3R1YWwgKi8KICAgICAgICAgIGFjdHVhbF9tb250aDogeyB0eXBlOiAibnVtYmVyIiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICBhY3R1YWxfeXRkOiB7IHR5cGU6ICJudW1iZXIiLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgIGFjdHVhbF93aG9sZTogeyB0eXBlOiAibnVtYmVyIiwgZGVmYXVsdFZhbHVlOiAwIH0sCgogICAgICAgICAgLyogUGVyY2VudGFnZSAqLwogICAgICAgICAgbW9udGhfcGVyY2VudGFnZTogeyB0eXBlOiAibnVtYmVyIiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICB5dGRfcGVyY2VudGFnZTogeyB0eXBlOiAibnVtYmVyIiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICB3aG9sZV9wZXJjZW50YWdlOiB7IHR5cGU6ICJudW1iZXIiLCBkZWZhdWx0VmFsdWU6IDAgfSwKCiAgICAgICAgICAvKiBBY2NvdW50IEluZm9ybWF0aW9uICovCiAgICAgICAgICBuYW1lOiB7IHR5cGU6ICJzdHJpbmciLCBkZWZhdWx0VmFsdWU6ICIiIH0sCiAgICAgICAgICBsb2NhbF9uYW1lOiB7IHR5cGU6ICJzdHJpbmciLCBkZWZhdWx0VmFsdWU6ICIiIH0sCiAgICAgICAgICB0eXBlOiB7IHR5cGU6ICJzdHJpbmciLCBkZWZhdWx0VmFsdWU6ICIiIH0sCiAgICAgICAgICB0eXBlX2xvY2FsX25hbWU6IHsgdHlwZTogInN0cmluZyIsIGRlZmF1bHRWYWx1ZTogIiIgfSwKICAgICAgICAgIGFjY291bnRfdHlwZV9udW1iZXI6IHsgdHlwZTogIm51bWJlciIsIGRlZmF1bHRWYWx1ZTogMCB9LAoKICAgICAgICAgIC8qIE90aGVyICovCiAgICAgICAgICBvcmRlcjogeyB0eXBlOiAibnVtYmVyIiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgfSwKICAgICAgfSk7CgogICAgICAvLyBMb2FkIEFjY291bnQgTGlzdAogICAgICBsZXQgYWNjb3VudHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYWNjb3VudGluZy9nZXRBY2NvdW50cyIpOwoKICAgICAgLyogRmluZCBpbmRleCBvZiBzZWxlY3RlZCBtb250aCAqLwogICAgICBsZXQgbW9udGhPZkZvcm1hdGVkID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhpcy5tb250aE9mKSwgIk1NTSB5eXl5IiksCiAgICAgICAgYnVkZ2V0TW9udGhGb3JtYXRlZCA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRoaXMubW9udGhPZiksICJ5eXl5LU1NIik7CgogICAgICBsZXQgbW9udGhPZkluZGV4ID0gdGhpcy5maXNjYWxNb250aHMuaW5kZXhPZihtb250aE9mRm9ybWF0ZWQpOwoKICAgICAgLyogR2F0aGVyaW5nIGZyb20gYnVkZ2V0IGxpbmVzICovCiAgICAgIHRoaXMuYnVkZ2V0LmxpbmVzLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgbGV0IGVudHJ5ID0gbmV3IEVudHJ5KCksCiAgICAgICAgICBuYXR1cmUgPSAxOyAvKiBEZWZhdWx0IE5hdXJlIGlzIERyID0gMSAqLwoKICAgICAgICAvKiBTZXQgQWNjb3VudCBJbmZvcm1hdGlvbiAqLwogICAgICAgIGxldCBhY2NvdW50ID0gbmV3IEFjY291bnRNb2RlbCgKICAgICAgICAgIGFjY291bnRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udXVpZCA9PT0gdmFsdWUuYWNjb3VudF91dWlkKQogICAgICAgICk7CiAgICAgICAgZW50cnkudXVpZCA9IGFjY291bnQudXVpZDsKICAgICAgICBlbnRyeS5uYW1lID0gYWNjb3VudC5uYW1lOwogICAgICAgIGVudHJ5LmxvY2FsX25hbWUgPSBhY2NvdW50LmxvY2FsX25hbWU7CiAgICAgICAgZW50cnkudHlwZSA9IGFjY291bnQuYWNjb3VudF90eXBlLm5hbWU7CiAgICAgICAgZW50cnkudHlwZV9sb2NhbF9uYW1lID0gYWNjb3VudC5hY2NvdW50X3R5cGUubG9jYWxfbmFtZTsKICAgICAgICBlbnRyeS5hY2NvdW50X3R5cGVfbnVtYmVyID0gYWNjb3VudC5hY2NvdW50X3R5cGUubnVtYmVyOwoKICAgICAgICAvKiBSZXZlcnNlIE5hdHVyZSAqLwogICAgICAgIGlmIChhY2NvdW50LmFjY291bnRfdHlwZS5uYXR1cmUudG9Mb3dlckNhc2UoKSA9PT0gImNyIikgewogICAgICAgICAgbmF0dXJlID0gLTE7CiAgICAgICAgfQoKICAgICAgICAvKiBPcmRlciAqLwogICAgICAgIGlmIChhY2NvdW50LmFjY291bnRfdHlwZS5udW1iZXIgPT09IE9yZGVyTnVtYmVyUEwuT3RoZXJSZXZlbnVlLm51bWJlcikgewogICAgICAgICAgLy9PdGhlciBSZXZlbnVlCiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuT3RoZXJSZXZlbnVlLm9yZGVyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbnRyeS5vcmRlciA9IGFjY291bnQuYWNjb3VudF90eXBlLm51bWJlcjsKICAgICAgICB9CgogICAgICAgIC8qIEJVREdFVCAqLwogICAgICAgIC8qIEJ1ZGdldCBXaG9sZSAqLwogICAgICAgIGVudHJ5LmJ1ZGdldF93aG9sZSA9IHZhbHVlLmFtb3VudCAqIG5hdHVyZTsKCiAgICAgICAgdmFsdWUubW9udGhseV9hbW91bnQuZm9yRWFjaCgobWxpbmUpID0+IHsKICAgICAgICAgIC8qIEJ1ZGdldCBNb250aCAqLwogICAgICAgICAgaWYgKG1saW5lLm1vbnRoX29mID09PSBidWRnZXRNb250aEZvcm1hdGVkKSB7CiAgICAgICAgICAgIGVudHJ5LmJ1ZGdldF9tb250aCA9IG1saW5lLmFtb3VudCAqIG5hdHVyZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvKiBCdWRnZXQgWVREICovCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKG1saW5lLm1vbnRoX29mKSwgInl5eXktTU0tZGQiKSA8PQogICAgICAgICAgICBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh0aGlzLm1vbnRoT2YpLCAieXl5eS1NTS1kZCIpCiAgICAgICAgICApIHsKICAgICAgICAgICAgZW50cnkuYnVkZ2V0X3l0ZCArPSBtbGluZS5hbW91bnQgKiBuYXR1cmU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8qIEFDVFVBTCAqLwogICAgICAgIHRoaXMuaW5jb21lU3RhdGVtZW50cy5mb3JFYWNoKChwbGxpbmUpID0+IHsKICAgICAgICAgIGlmIChwbGxpbmUuYWNjb3VudFVVSUQgPT09IHZhbHVlLmFjY291bnRfdXVpZCkgewogICAgICAgICAgICAvKiBBY3R1YWwgTW9udGggKi8KICAgICAgICAgICAgbGV0IHByb3BlcnR5TW9udGggPSBOdW1iZXJJbldvcmRbbW9udGhPZkluZGV4XTsgLy8gWyd6ZXJvJywnb25lJywndHdvJywuLi5dCiAgICAgICAgICAgIGVudHJ5LmFjdHVhbF9tb250aCA9IHBsbGluZVtwcm9wZXJ0eU1vbnRoXTsgLy8gcGxsaW5lWyd6ZXJvJ10KCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IE51bWJlckluV29yZFtpXTsKCiAgICAgICAgICAgICAgLyogQWN0dWFsIFlURCAqLwogICAgICAgICAgICAgIGlmIChpIDw9IG1vbnRoT2ZJbmRleCkgewogICAgICAgICAgICAgICAgZW50cnkuYWN0dWFsX3l0ZCArPSBwbGxpbmVbcHJvcGVydHldOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLyogQWN0dWFsIFdob2xlICovCiAgICAgICAgICAgICAgZW50cnkuYWN0dWFsX3dob2xlICs9IHBsbGluZVtwcm9wZXJ0eV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLyogUGVyY2VudGFnZSA9IEFjdHVhbCAvIEJ1ZGdldCAqLwogICAgICAgIGlmIChlbnRyeS5idWRnZXRfbW9udGggIT09IDApIHsKICAgICAgICAgIGVudHJ5Lm1vbnRoX3BlcmNlbnRhZ2UgPSBlbnRyeS5hY3R1YWxfbW9udGggLyBlbnRyeS5idWRnZXRfbW9udGg7CiAgICAgICAgfQogICAgICAgIGlmIChlbnRyeS5idWRnZXRfeXRkICE9PSAwKSB7CiAgICAgICAgICBlbnRyeS55dGRfcGVyY2VudGFnZSA9IGVudHJ5LmFjdHVhbF95dGQgLyBlbnRyeS5idWRnZXRfeXRkOwogICAgICAgIH0KICAgICAgICBpZiAoZW50cnkuYnVkZ2V0X3dob2xlICE9PSAwKSB7CiAgICAgICAgICBlbnRyeS53aG9sZV9wZXJjZW50YWdlID0gZW50cnkuYWN0dWFsX3dob2xlIC8gZW50cnkuYnVkZ2V0X3dob2xlOwogICAgICAgIH0KCiAgICAgICAgLyogQWRkIGVudHJ5ICovCiAgICAgICAgZW50cmllcy5wdXNoKGVudHJ5KTsKICAgICAgfSk7CgogICAgICAvKiBHYXRoZXJpbmcgZnJvbSBidWRnZXQgZXN0aW1hdGlvbnMgKi8KICAgICAgdGhpcy5idWRnZXQuYnVkZ2V0X2VzdGltYXRpb25zLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgbGV0IGVudHJ5ID0gbmV3IEVudHJ5KCk7CgogICAgICAgIC8qIFNldCBBY2NvdW50IEluZm9ybWF0aW9uICovCiAgICAgICAgZW50cnkudXVpZCA9IHZhbHVlLmFjY291bnRVVUlEOwogICAgICAgIGVudHJ5Lm5hbWUgPSB2YWx1ZS5uYW1lOwogICAgICAgIGVudHJ5LmxvY2FsX25hbWUgPSB2YWx1ZS5sb2NhbF9uYW1lOwogICAgICAgIGVudHJ5LnR5cGUgPSB2YWx1ZS50eXBlOwogICAgICAgIGVudHJ5LnR5cGVfbG9jYWxfbmFtZSA9IHZhbHVlLnR5cGVfbG9jYWxfbmFtZTsKICAgICAgICBlbnRyeS5hY2NvdW50X3R5cGVfbnVtYmVyID0gdmFsdWUuYWNjb3VudF90eXBlX251bWJlcjsKCiAgICAgICAgLy8gT3JkZXIKICAgICAgICBpZiAodmFsdWUuYWNjb3VudF90eXBlX251bWJlciA9PSBPcmRlck51bWJlclBMLkdyb3NzUHJvZml0Lm51bWJlcikgewogICAgICAgICAgLy8gR3Jvc3MgUHJvZml0CiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuR3Jvc3NQcm9maXQub3JkZXI7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXIgPT0gT3JkZXJOdW1iZXJQTC5PdGhlclJldmVudWUubnVtYmVyCiAgICAgICAgKSB7CiAgICAgICAgICAvLyBPdGhlciBSZXZlbnVlCiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuT3RoZXJSZXZlbnVlLm9yZGVyOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyID09IE9yZGVyTnVtYmVyUEwuT3BlcmF0aW5nRXhwZW5zZS5udW1iZXIKICAgICAgICApIHsKICAgICAgICAgIC8vIE9wZXJhdGluZyBFeHBlbnNlCiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuT3BlcmF0aW5nRXhwZW5zZS5vcmRlcjsKICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgdmFsdWUuYWNjb3VudF90eXBlX251bWJlciA9PQogICAgICAgICAgT3JkZXJOdW1iZXJQTC5PcGVyYXRpbmdJbmNvbWVFQklUREEubnVtYmVyCiAgICAgICAgKSB7CiAgICAgICAgICAvLyBPcGVyYXRpbmcgSW5jb21lIChFQklUREEpCiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuT3BlcmF0aW5nSW5jb21lRUJJVERBLm9yZGVyOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyID09CiAgICAgICAgICBPcmRlck51bWJlclBMLkVhcm5pbmdCZWZvcmVJbnRlcmVzdEFuZFRheEVCSVQubnVtYmVyCiAgICAgICAgKSB7CiAgICAgICAgICAvLyBFYXJuaW5nIEJlZm9yZSBJbnRlcmVzdCBBbmQgVGF4KEVCSVQpCiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuRWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5vcmRlcjsKICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgdmFsdWUuYWNjb3VudF90eXBlX251bWJlciA9PSBPcmRlck51bWJlclBMLlByb2ZpdEJlZm9yZVRheC5udW1iZXIKICAgICAgICApIHsKICAgICAgICAgIC8vIFByb2ZpdCBCZWZvcmUgVGF4CiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuUHJvZml0QmVmb3JlVGF4Lm9yZGVyOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyID09IE9yZGVyTnVtYmVyUEwuUHJvZml0Rm9yVGhlUGVyaW9kLm51bWJlcgogICAgICAgICkgewogICAgICAgICAgLy8gUHJvZml0IEZvciBUaGUgUGVyaW9kCiAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuUHJvZml0Rm9yVGhlUGVyaW9kLm9yZGVyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbnRyeS5vcmRlciA9IHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBCVURHRVQgKi8KCiAgICAgICAgLyogQnVkZ2V0IE1vbnRoICovCiAgICAgICAgbGV0IHByb3BlcnR5QnVkZ2V0TW9udGggPSBOdW1iZXJJbldvcmRbbW9udGhPZkluZGV4XTsgLy8gWyd6ZXJvJywnb25lJywndHdvJywuLi5dCiAgICAgICAgZW50cnkuYnVkZ2V0X21vbnRoID0gdmFsdWVbcHJvcGVydHlCdWRnZXRNb250aF07IC8vIHZhbHVlWyd6ZXJvJ10KCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CiAgICAgICAgICBsZXQgcHJvcGVydHkgPSBOdW1iZXJJbldvcmRbaV07CgogICAgICAgICAgLyogQnVkZ2V0IFlURCAqLwogICAgICAgICAgaWYgKGkgPD0gbW9udGhPZkluZGV4KSB7CiAgICAgICAgICAgIGVudHJ5LmJ1ZGdldF95dGQgKz0gdmFsdWVbcHJvcGVydHldOwogICAgICAgICAgfQoKICAgICAgICAgIC8qIEJ1ZGdldCBXaG9sZSAqLwogICAgICAgICAgZW50cnkuYnVkZ2V0X3dob2xlICs9IHZhbHVlW3Byb3BlcnR5XTsKICAgICAgICB9CgogICAgICAgIC8qIEFDVFVBTCAqLwogICAgICAgIHRoaXMuaW5jb21lU3RhdGVtZW50cy5mb3JFYWNoKChwbGxpbmUpID0+IHsKICAgICAgICAgIGlmIChwbGxpbmUuYWNjb3VudF90eXBlX251bWJlciA9PT0gdmFsdWUuYWNjb3VudF90eXBlX251bWJlcikgewogICAgICAgICAgICAvKiBBY3R1YWwgTW9udGggKi8KICAgICAgICAgICAgbGV0IHByb3BlcnR5QWN0dWFsTW9udGggPSBOdW1iZXJJbldvcmRbbW9udGhPZkluZGV4XTsgLy8gWyd6ZXJvJywnb25lJywndHdvJywuLi5dCiAgICAgICAgICAgIGVudHJ5LmFjdHVhbF9tb250aCA9IHBsbGluZVtwcm9wZXJ0eUFjdHVhbE1vbnRoXTsgLy8gcGxsaW5lWyd6ZXJvJ10KCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IE51bWJlckluV29yZFtpXTsKCiAgICAgICAgICAgICAgLyogQWN0dWFsIFlURCAqLwogICAgICAgICAgICAgIGlmIChpIDw9IG1vbnRoT2ZJbmRleCkgewogICAgICAgICAgICAgICAgZW50cnkuYWN0dWFsX3l0ZCArPSBwbGxpbmVbcHJvcGVydHldOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLyogQWN0dWFsIFdob2xlICovCiAgICAgICAgICAgICAgZW50cnkuYWN0dWFsX3dob2xlICs9IHBsbGluZVtwcm9wZXJ0eV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLyogUGVyY2VudGFnZSA9IEFjdHVhbCAvIEJ1ZGdldCAqLwogICAgICAgIGlmIChlbnRyeS5idWRnZXRfbW9udGggIT09IDApIHsKICAgICAgICAgIGVudHJ5Lm1vbnRoX3BlcmNlbnRhZ2UgPSBlbnRyeS5hY3R1YWxfbW9udGggLyBlbnRyeS5idWRnZXRfbW9udGg7CiAgICAgICAgfQogICAgICAgIGlmIChlbnRyeS5idWRnZXRfeXRkICE9PSAwKSB7CiAgICAgICAgICBlbnRyeS55dGRfcGVyY2VudGFnZSA9IGVudHJ5LmFjdHVhbF95dGQgLyBlbnRyeS5idWRnZXRfeXRkOwogICAgICAgIH0KICAgICAgICBpZiAoZW50cnkuYnVkZ2V0X3dob2xlICE9PSAwKSB7CiAgICAgICAgICBlbnRyeS53aG9sZV9wZXJjZW50YWdlID0gZW50cnkuYWN0dWFsX3dob2xlIC8gZW50cnkuYnVkZ2V0X3dob2xlOwogICAgICAgIH0KCiAgICAgICAgLyogQWRkIGVudHJ5ICovCiAgICAgICAgZW50cmllcy5wdXNoKGVudHJ5KTsKICAgICAgfSk7CgogICAgICAvKiBCSU5EIFNUQVRNRU5UICovCiAgICAgIHRoaXMuc3RhdGVtZW50UExMaXN0ID0gZW50cmllczsKICAgICAgdGhpcy5nZW5lcmF0ZUNvbHVtbigpOwogICAgfSwKICAgIC8qIERhdGFib3VuZCAqLwogICAgZGF0YUJvdW5kKGUpIHsKICAgICAgbGV0IGdyaWQgPSBlLnNlbmRlcjsKCiAgICAgIGdyaWQuZGF0YVNvdXJjZS5kYXRhKCkuZm9yRWFjaCgodmFsdWUpID0+IHsKICAgICAgICBpZiAodmFsdWUuYWNjb3VudF90eXBlX251bWJlciA+PSAxMDApIHsKICAgICAgICAgIGxldCByb3cgPSBncmlkLnRib2R5CiAgICAgICAgICAgIC5maW5kKCJ0cltkYXRhLXVpZD0nIiArIHZhbHVlLnVpZCArICInXSIpCiAgICAgICAgICAgIC5wcmV2KCIuay1ncm91cGluZy1yb3ciKTsKICAgICAgICAgIGdyaWQuY29sbGFwc2VHcm91cChyb3cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gR2VuZXJhdGUgQ29sdW1ucwogICAgZ2VuZXJhdGVDb2x1bW4oKSB7CiAgICAgIGxldCBoZWFkZXJBdHRyaWJ1dGVzID0gewogICAgICAgICAgY2xhc3M6ICJ0YWJsZS1oZWFkZXItY2VsbCIsCiAgICAgICAgICBzdHlsZTogInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNHB4IiwKICAgICAgICB9LAogICAgICAgIHN1YkhlYWRlckF0dHJpYnV0ZXMgPSB7CiAgICAgICAgICBjbGFzczogInRhYmxlLWhlYWRlci1jZWxsIiwKICAgICAgICAgIHN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMTRweCIsCiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzID0gewogICAgICAgICAgY2xhc3M6ICJ0YWJsZS1jZWxsIiwKICAgICAgICAgIHN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMTRweCIsCiAgICAgICAgfTsKCiAgICAgIC8qIENvbHVtbnMgKi8KICAgICAgbGV0IGNvbHVtbnMgPSBbCiAgICAgICAgewogICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGROYW1lLAogICAgICAgICAgdGl0bGU6IGkxOG4udCgiYWNjb3VudCIpLAogICAgICAgICAgZ3JvdXBGb290ZXJUZW1wbGF0ZTogdGhpcy50b3RhbFdvcmQgKyAiICM9dmFsdWUjIiwKICAgICAgICAgIGxvY2tlZDogdHJ1ZSwKICAgICAgICAgIHdpZHRoOiAzMDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZFR5cGUsCiAgICAgICAgICB0aXRsZTogIlRZUEUiLAogICAgICAgICAgaGlkZGVuOiB0cnVlLAogICAgICAgICAgZ3JvdXBIZWFkZXJUZW1wbGF0ZTogdGhpcy50eXBlR3JvdXBIZWFkZXJUbXBsLAogICAgICAgICAgd2lkdGg6IDMwMCwKICAgICAgICB9LAogICAgICAgIC8qIFNlbGVjdGVkIE1vbnRoICovCiAgICAgICAgewogICAgICAgICAgdGl0bGU6IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRoaXMubW9udGhPZiksICJNTU1NIHl5eXkiKSwKICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IGhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICBjb2x1bW5zOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBmaWVsZDogImJ1ZGdldF9tb250aCIsCiAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgiYnVkZ2V0IiksCiAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgIGFnZ3JlZ2F0ZXM6ICJbJ3N1bSddIiwKICAgICAgICAgICAgICBncm91cEZvb3RlclRlbXBsYXRlOgogICAgICAgICAgICAgICAgIjxkaXYgY2xhc3M9J3RleHQtcmlnaHQgdGV4dC1ib2xkIHRleHQtYmxhY2snPiM9a2VuZG8udG9TdHJpbmcoc3VtLCAnbicpIzwvZGl2PiIsCiAgICAgICAgICAgICAgd2lkdGg6IDE1MCwKICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBmaWVsZDogImFjdHVhbF9tb250aCIsCiAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgiYWN0dWFsIiksCiAgICAgICAgICAgICAgZm9ybWF0OiAiezA6bn0iLAogICAgICAgICAgICAgIGFnZ3JlZ2F0ZXM6ICJbJ3N1bSddIiwKICAgICAgICAgICAgICBncm91cEZvb3RlclRlbXBsYXRlOgogICAgICAgICAgICAgICAgIjxkaXYgY2xhc3M9J3RleHQtcmlnaHQgdGV4dC1ib2xkIHRleHQtYmxhY2snPiM9a2VuZG8udG9TdHJpbmcoc3VtLCAnbicpIzwvZGl2PiIsCiAgICAgICAgICAgICAgd2lkdGg6IDE1MCwKICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBzdWJIZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBmaWVsZDogIm1vbnRoX3BlcmNlbnRhZ2UiLAogICAgICAgICAgICAgIHRpdGxlOiAiJSIsCiAgICAgICAgICAgICAgZm9ybWF0OiAiezA6cH0iLAogICAgICAgICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogc3ViSGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIC8qIFlURCh1cCB0byBzZWxlY3RlZCBtb250aCkgKi8KICAgICAgICB7CiAgICAgICAgICB0aXRsZTogaTE4bi50KCJ5dGRfdXBfdG9fc2VsZWN0ZWRfbW9udGgiKSwKICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IGhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICBjb2x1bW5zOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBmaWVsZDogImJ1ZGdldF95dGQiLAogICAgICAgICAgICAgIHRpdGxlOiBpMThuLnQoImJ1ZGdldCIpLAogICAgICAgICAgICAgIGZvcm1hdDogInswOm59IiwKICAgICAgICAgICAgICBhZ2dyZWdhdGVzOiAiWydzdW0nXSIsCiAgICAgICAgICAgICAgZ3JvdXBGb290ZXJUZW1wbGF0ZToKICAgICAgICAgICAgICAgICI8ZGl2IGNsYXNzPSd0ZXh0LXJpZ2h0IHRleHQtYm9sZCB0ZXh0LWJsYWNrJz4jPWtlbmRvLnRvU3RyaW5nKHN1bSwgJ24nKSM8L2Rpdj4iLAogICAgICAgICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogc3ViSGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZmllbGQ6ICJhY3R1YWxfeXRkIiwKICAgICAgICAgICAgICB0aXRsZTogaTE4bi50KCJhY3R1YWwiKSwKICAgICAgICAgICAgICBmb3JtYXQ6ICJ7MDpufSIsCiAgICAgICAgICAgICAgYWdncmVnYXRlczogIlsnc3VtJ10iLAogICAgICAgICAgICAgIGdyb3VwRm9vdGVyVGVtcGxhdGU6CiAgICAgICAgICAgICAgICAiPGRpdiBjbGFzcz0ndGV4dC1yaWdodCB0ZXh0LWJvbGQgdGV4dC1ibGFjayc+Iz1rZW5kby50b1N0cmluZyhzdW0sICduJykjPC9kaXY+IiwKICAgICAgICAgICAgICB3aWR0aDogMTUwLAogICAgICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IHN1YkhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGZpZWxkOiAieXRkX3BlcmNlbnRhZ2UiLAogICAgICAgICAgICAgIHRpdGxlOiAiJSIsCiAgICAgICAgICAgICAgZm9ybWF0OiAiezA6cH0iLAogICAgICAgICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogc3ViSGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIC8qIFdob2xlIFllYXIgKi8KICAgICAgICB7CiAgICAgICAgICB0aXRsZTogaTE4bi50KCJ3aG9sZV95ZWFyIiksCiAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBoZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgY29sdW1uczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZmllbGQ6ICJidWRnZXRfd2hvbGUiLAogICAgICAgICAgICAgIHRpdGxlOiBpMThuLnQoImJ1ZGdldCIpLAogICAgICAgICAgICAgIGZvcm1hdDogInswOm59IiwKICAgICAgICAgICAgICBhZ2dyZWdhdGVzOiAiWydzdW0nXSIsCiAgICAgICAgICAgICAgZ3JvdXBGb290ZXJUZW1wbGF0ZToKICAgICAgICAgICAgICAgICI8ZGl2IGNsYXNzPSd0ZXh0LXJpZ2h0IHRleHQtYm9sZCB0ZXh0LWJsYWNrJz4jPWtlbmRvLnRvU3RyaW5nKHN1bSwgJ24nKSM8L2Rpdj4iLAogICAgICAgICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogc3ViSGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZmllbGQ6ICJhY3R1YWxfd2hvbGUiLAogICAgICAgICAgICAgIHRpdGxlOiBpMThuLnQoImFjdHVhbCIpLAogICAgICAgICAgICAgIGZvcm1hdDogInswOm59IiwKICAgICAgICAgICAgICBhZ2dyZWdhdGVzOiAiWydzdW0nXSIsCiAgICAgICAgICAgICAgZ3JvdXBGb290ZXJUZW1wbGF0ZToKICAgICAgICAgICAgICAgICI8ZGl2IGNsYXNzPSd0ZXh0LXJpZ2h0IHRleHQtYm9sZCB0ZXh0LWJsYWNrJz4jPWtlbmRvLnRvU3RyaW5nKHN1bSwgJ24nKSM8L2Rpdj4iLAogICAgICAgICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogc3ViSGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZmllbGQ6ICJ3aG9sZV9wZXJjZW50YWdlIiwKICAgICAgICAgICAgICB0aXRsZTogIiUiLAogICAgICAgICAgICAgIGZvcm1hdDogInswOnB9IiwKICAgICAgICAgICAgICB3aWR0aDogMTUwLAogICAgICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IHN1YkhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcywKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXTsKCiAgICAgIC8qIFNldCBDb2x1bW5zICovCiAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7CiAgICB9LAogICAgLy8gT24gUmVwb3JpbnQgTGFuZ3VhZ2UgQ2hhbmdlcwogICAgb25SZXBvcnRpbmdMYW5ndWFnZUNoYW5nZXMoKSB7CiAgICAgIHRoaXMuZmllbGROYW1lID0gIm5hbWUiOwogICAgICB0aGlzLmZpZWxkVHlwZSA9ICJ0eXBlIjsKICAgICAgdGhpcy50b3RhbFdvcmQgPSAiVG90YWwiOwogICAgICBpZiAodGhpcy5yZXBvcnRpbmdMYW5ndWFnZSA9PT0gImxvY2FsIikgewogICAgICAgIHRoaXMuZmllbGROYW1lID0gImxvY2FsX25hbWUiOwogICAgICAgIHRoaXMuZmllbGRUeXBlID0gInR5cGVfbG9jYWxfbmFtZSI7CiAgICAgICAgdGhpcy50b3RhbFdvcmQgPSAi4Z6f4Z6a4Z674Z6UIjsKICAgICAgfQoKICAgICAgLy8gR2VuZXJhdGUgR3JvdXAgQnkKICAgICAgdGhpcy5nZW5lcmF0ZUdyb3VwQnkoKTsKCiAgICAgIC8vIEdlbmVyYXRlIGNvbHVtbiB3aXRoIG5ldyBsYW5ndWFnZQogICAgICB0aGlzLmdlbmVyYXRlQ29sdW1uKCk7CiAgICB9LAogICAgLyogVGVtcGxhdGVzICovCiAgICB0eXBlR3JvdXBIZWFkZXJUbXBsKGRhdGFJdGVtKSB7CiAgICAgIGxldCBuYW1lID0gZGF0YUl0ZW0uaXRlbXNbMF0udHlwZTsKCiAgICAgIGlmICh0aGlzLnJlcG9ydGluZ0xhbmd1YWdlID09PSAibG9jYWwiKSB7CiAgICAgICAgbmFtZSA9IGRhdGFJdGVtLml0ZW1zWzBdLnR5cGVfbG9jYWxfbmFtZTsKICAgICAgfQoKICAgICAgcmV0dXJuICI8c3BhbiBjbGFzcz0ndGV4dC1ib2xkIHRleHQtYmxhY2snPiIgKyBuYW1lICsgIjwvc3Bhbj4iOwogICAgfSwKICAgIC8vIEdlbmVyYXRlIEdyb3VwIEJ5CiAgICBnZW5lcmF0ZUdyb3VwQnkoKSB7CiAgICAgIHRoaXMuZ3JvdXBEZWZpbml0aW9uID0gewogICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkVHlwZSwKICAgICAgICBhZ2dyZWdhdGVzOiB0aGlzLmFnZ3JlZ2F0ZURlZmluaXRpb24sCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24oYSwgYikgewogICAgICAgICAgaWYgKGEuaXRlbXNbMF0ub3JkZXIgPT09IGIuaXRlbXNbMF0ub3JkZXIpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9IGVsc2UgaWYgKGEuaXRlbXNbMF0ub3JkZXIgPiBiLml0ZW1zWzBdLm9yZGVyKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH07CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGJ1ZGdldCgpIHsKICAgICAgLy8gUHJldmVudCBudWxsIGVycm9yCiAgICAgIGlmICh0aGlzLmJ1ZGdldCA9PT0gbnVsbCkgewogICAgICAgIHRoaXMuYnVkZ2V0ID0gbmV3IEJ1ZGdldE1vZGVsKCk7CiAgICAgIH0KICAgIH0sCiAgICByZXBvcnRpbmdMYW5ndWFnZSgpIHsKICAgICAgdGhpcy5vblJlcG9ydGluZ0xhbmd1YWdlQ2hhbmdlcygpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CgkJYXBwVHlwZSgpewoJCQlyZXR1cm4gZGF0YVN0b3JlLnByb2R1Y3RUeXBlOwoJCX0sCgl9LAogIG1vdW50ZWQoKSB7CiAgICAvLyBHZW5lcmF0ZSBHcm91cCBCeQogICAgdGhpcy5nZW5lcmF0ZUdyb3VwQnkoKTsKCiAgICAvLyBJbml0aWFsIEdyaWQgQ29sdW1ucwogICAgLy8gdGhpcy5nZW5lcmF0ZUNvbHVtbigpOwogIH0sCn07Cg=="},{"version":3,"sources":["BudgetSegment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"BudgetSegment.vue","sourceRoot":"src/views/accounting/reports/budget_financial","sourcesContent":["<template>\n  <v-row>\n\t\t<v-col sm=\"12\" cols=\"12\" :class=\" appType != 'npo' &&  appType != 'Public Sectors' ? 'grayBg px-6' : '' \" >\n\t\t\t<v-card color=\"white\" :class=\" appType != 'npo' &&  appType != 'Public Sectors' ? 'pa-3 no_border' : '' \"  elevation=\"0\">\n        <!-- Search -->\n        <v-row class=\"mt-0\">\n          <v-col sm=\"3\" cols=\"12\" class=\"py-0 pt-6\">\n            <app-fiscal-date-dropdownlist\n              :initFiscalDate=\"fiscalDate\"\n              @emitFiscalDate=\"fiscalDate = $event\"\n              @onChanged=\"onFiscalDateChanges\"\n            />\n          </v-col>\n          <v-col sm=\"3\" cols=\"12\" class=\"py-0 pt-6\">\n            <app-month-of-picker\n              :initMonthOf=\"monthOf\"\n              @emitMonthOf=\"monthOf = $event\"\n              @onChanged=\"onMonthOfChanges\"\n              :initMin=\"minMonth\"\n              :initMax=\"maxMonth\"\n            />\n          </v-col>\n          <v-col sm=\"3\" cols=\"12\" class=\"py-0 pt-6\">\n            <v-select\n              class=\"mt-1\"\n              :disabled=\"monthOf === ''\"\n              placeholder=\"Select Budget\"\n              @change=\"onChangeBudget\"\n              v-model=\"budget\"\n              :items=\"budgetList\"\n              item-text=\"name\"\n              item-value=\"uuid\"\n              return-object\n              clearable\n              outlined\n            />\n          </v-col>\n          <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n            <!-- Reporting Language -->\n            <label class=\"mb-1\">{{ $t(\"language\") }}:</label>\n            <app-reporting-language\n              :initLanguage=\"reportingLanguage\"\n              @emitLanguage=\"reportingLanguage = $event\"\n            />\n          </v-col>\n        </v-row>\n\n        <!-- Summary -->\n        <v-row>\n          <v-col class=\"pt-0\" sm=\"6\" cols=\"12\">\n            <template>\n              <v-simple-table class=\"table_list nomal_table\">\n                <template>\n                  <tbody>\n                    <tr>\n                      <td style=\"width: 45%\" class=\"\">\n                        {{ $t(\"budget_name\") }}\n                      </td>\n                      <td class=\"\">{{ budget.name }}</td>\n                    </tr>\n                    <tr>\n                      <td class=\"\">{{ $t(\"segment\") }}</td>\n                      <td class=\"\" v-if=\"budget.segment\">\n                        {{ budget.segment.name }}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td class=\"\">{{ $t(\"fiscal_year\") }}</td>\n                      <td class=\"\" v-if=\"budget.fiscal_year\">\n                        {{\n                          Helper.formatFiscalDate(budget.fiscal_year.start_date)\n                        }}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td class=\"\">{{ $t(\"used_for_consolidation\") }}</td>\n                      <td class=\"\">\n                        {{ budget.use_consolidation === 1 ? \"Yes\" : \"No\" }}\n                      </td>\n                    </tr>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </template>\n          </v-col>\n          <v-col class=\"pt-0\" sm=\"6\" cols=\"12\">\n            <template>\n              <v-simple-table class=\"table_list nomal_table\">\n                <template>\n                  <tbody>\n                    <tr>\n                      <td class=\"\">{{ $t(\"created_on\") }}</td>\n                      <!-- <td class=\"\">{{ budget.created_date }}</td> by rothny -->\n                      <td class=\"\" v-if=\"budget.created_date\">\n                        {{ Helper.dateFormat(budget.created_date) }}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td class=\"\">{{ $t(\"last_edited_on\") }}</td>\n                      <td class=\"\">{{ budget.modified_date }}</td>\n                    </tr>\n                    <tr>\n                      <td class=\"\">{{ $t(\"last_edited_by\") }}</td>\n                      <td class=\"\">\n                        {{\n                          budget.modified_by.first_name === \"\"\n                            ? budget.created_by.first_name +\n                              \" \" +\n                              budget.created_by.last_name\n                            : budget.modified_by.first_name +\n                              \" \" +\n                              budget.modified_by.last_name\n                        }}\n                      </td>\n                    </tr>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </template>\n          </v-col>\n        </v-row>\n\n        <!-- Grid -->\n        <v-row>\n          <v-col sm=\"12\" cols=\"12\" class=\"pt-1\">\n            <template>\n              <kendo-datasource\n                ref=\"statementPLDS\"\n                :data=\"statementPLList\"\n                :schema=\"schemaDefinition\"\n                :sort=\"sortDefinition\"\n                :group=\"groupDefinition\"\n                :aggregate=\"aggregateDefinition\"\n              />\n\n              <kendo-grid\n                id=\"incomeStatementGrid\"\n                class=\"custom_grid\"\n                :data-source-ref=\"'statementPLDS'\"\n                :dataBound=\"dataBound\"\n                :sortable=\"true\"\n                :column-menu=\"false\"\n                :reorderable=\"true\"\n                :resizable=\"true\"\n                :noRecords=\"true\"\n                :groupable=\"groupable\"\n                :columns=\"columns\"\n              />\n\n              <LoadingMe\n                type=\"loading\"\n                :isLoading=\"showLoading\"\n                :myLoading=\"true\"\n                :fullPage=\"false\"\n              />\n            </template>\n          </v-col>\n        </v-row>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport kendo from \"@progress/kendo-ui\";\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\n/* Models */\nimport SegmentModel from \"@/scripts/model/Segment.js\";\nimport BudgetModel from \"@/scripts/model/Budget.js\";\nimport AccountModel from \"@/scripts/model/Account.js\";\nimport { dataStore } from \"@/observable/store\";\n\nconst incomeStatementHandler = require(\"@/scripts/handler/accounting/incomeStatementHandler\");\nconst OrderNumberPL = require(\"@/scripts/default_setup/OrderNumberPL.js\");\nconst NumberInWord = require(\"@/scripts/default_setup/NumberInWord.js\");\n\nexport default {\n  components: {\n    LoadingMe: () => import(\"@/components/Loading\"),\n    \"app-fiscal-date-dropdownlist\": () =>\n      import(\"@/components/kendo_templates/FiscalDateDropDownList\"),\n    \"app-month-of-picker\": () =>\n      import(\"@/components/kendo_templates/MonthOfPicker\"),\n    \"app-reporting-language\": () =>\n      import(\"@/components/kendo_templates/ReportingLanguageDropDownList\"),\n  },\n  data: () => ({\n    monthOf: \"\",\n    budget: new BudgetModel(),\n    budgetList: [],\n    incomeStatements: [],\n    statementPLList: [],\n    fiscalDate: null,\n    fiscalMonths: [],\n    minMonth: \"\",\n    maxMonth: \"\",\n    Helper: Helper,\n    columns: [],\n    sortDefinition: { field: \"number\", dir: \"asc\" },\n    groupable: {\n      enabled: false,\n      showFooter: true,\n    },\n    groupDefinition: [],\n    aggregateDefinition: [\n      { field: \"budget_month\", aggregate: \"sum\" },\n      { field: \"budget_ytd\", aggregate: \"sum\" },\n      { field: \"budget_whole\", aggregate: \"sum\" },\n      { field: \"actual_month\", aggregate: \"sum\" },\n      { field: \"actual_ytd\", aggregate: \"sum\" },\n      { field: \"actual_whole\", aggregate: \"sum\" },\n    ],\n    schemaDefinition: {\n      model: { id: \"uuid\" },\n    },\n    // Reporting Language\n    reportingLanguage: \"english\",\n    fieldName: \"name\",\n    fieldType: \"type\",\n    totalWord: \"Total\",\n    // LoadingMe\n    showLoading: false,\n  }),\n  methods: {\n    onFiscalDateChanges() {\n      this.monthOf = \"\";\n      this.budget = new BudgetModel();\n      this.fiscalMonths = [];\n\n      if (this.fiscalDate !== null) {\n        /* Set Month Range */\n        this.minMonth = this.fiscalDate.start_date;\n        this.maxMonth = this.fiscalDate.end_date;\n\n        /* Generate Months */\n        this.fiscalMonths = Helper.generateFiscalMonths(\n          this.fiscalDate.start_date,\n          this.fiscalDate.end_date,\n          \"12\"\n        );\n\n        /* Load Budget */\n        this.loadBudget();\n      }\n    },\n    onMonthOfChanges() {\n      if (this.incomeStatements.length > 0) {\n        /* Bind Data */\n        this.bindData();\n      }\n    },\n    async loadBudget() {\n      let budgets = await this.$store.dispatch(\"budgets/getList\"),\n        segments = await this.$store.dispatch(\"segments/getList\");\n\n      let budgetList = [];\n      budgets.forEach((value) => {\n        if (\n          value.fiscal_year.uuid === this.fiscalDate.uuid &&\n          value.segment_uuid !== \"\"\n        ) {\n          let budget = new BudgetModel(value);\n          budget.segment = new SegmentModel(\n            segments.find((i) => i.id === value.segment_uuid)\n          );\n          budgetList.push(budget);\n        }\n      });\n      this.budgetList = budgetList;\n    },\n    /* On Budget Changes */\n    onChangeBudget() {\n      this.search();\n    },\n    /* Search */\n    search() {\n      if (this.budget.uuid !== \"\") {\n        let sdate =\n            kendo.toString(new Date(this.fiscalDate.start_date), \"yyyy-MM-dd\") +\n            \"T00:00:00.000Z\",\n          edate =\n            kendo.toString(new Date(this.fiscalDate.end_date), \"yyyy-MM-dd\") +\n            \"T23:59:59.999Z\";\n\n        // Empty statementPLDS\n        let ds = this.$refs.statementPLDS.kendoWidget();\n        ds.data([]);\n\n        // Query Income Statement\n        this.showLoading = true;\n        incomeStatementHandler\n          .getIncomeStatement({\n            params: {\n              start_date: sdate,\n              end_date: edate,\n              group_by: \"12\",\n              segment_uuid: this.budget.segment_uuid,\n            },\n          })\n          .then((res) => {\n            if (res.data) {\n              this.incomeStatements = res.data;\n              this.bindData();\n            }\n          })\n          .finally(() => {\n            this.showLoading = false;\n          });\n      } else {\n        /* Alert Warning */\n        this.$snotify.warning(i18n.t(\"please_select_budget\"));\n      }\n    },\n    async bindData() {\n      let entries = [];\n      let Entry = kendo.data.Model.define({\n        id: \"uuid\", // the identifier of the model\n        fields: {\n          /* Budget */\n          budget_month: { type: \"number\", defaultValue: 0 },\n          budget_ytd: { type: \"number\", defaultValue: 0 },\n          budget_whole: { type: \"number\", defaultValue: 0 },\n\n          /* Actual */\n          actual_month: { type: \"number\", defaultValue: 0 },\n          actual_ytd: { type: \"number\", defaultValue: 0 },\n          actual_whole: { type: \"number\", defaultValue: 0 },\n\n          /* Percentage */\n          month_percentage: { type: \"number\", defaultValue: 0 },\n          ytd_percentage: { type: \"number\", defaultValue: 0 },\n          whole_percentage: { type: \"number\", defaultValue: 0 },\n\n          /* Account Information */\n          name: { type: \"string\", defaultValue: \"\" },\n          local_name: { type: \"string\", defaultValue: \"\" },\n          type: { type: \"string\", defaultValue: \"\" },\n          type_local_name: { type: \"string\", defaultValue: \"\" },\n          account_type_number: { type: \"number\", defaultValue: 0 },\n\n          /* Other */\n          order: { type: \"number\", defaultValue: 0 },\n        },\n      });\n\n      // Load Account List\n      let accounts = await this.$store.dispatch(\"accounting/getAccounts\");\n\n      /* Find index of selected month */\n      let monthOfFormated = kendo.toString(new Date(this.monthOf), \"MMM yyyy\"),\n        budgetMonthFormated = kendo.toString(new Date(this.monthOf), \"yyyy-MM\");\n\n      let monthOfIndex = this.fiscalMonths.indexOf(monthOfFormated);\n\n      /* Gathering from budget lines */\n      this.budget.lines.forEach((value) => {\n        let entry = new Entry(),\n          nature = 1; /* Default Naure is Dr = 1 */\n\n        /* Set Account Information */\n        let account = new AccountModel(\n          accounts.find((item) => item.uuid === value.account_uuid)\n        );\n        entry.uuid = account.uuid;\n        entry.name = account.name;\n        entry.local_name = account.local_name;\n        entry.type = account.account_type.name;\n        entry.type_local_name = account.account_type.local_name;\n        entry.account_type_number = account.account_type.number;\n\n        /* Reverse Nature */\n        if (account.account_type.nature.toLowerCase() === \"cr\") {\n          nature = -1;\n        }\n\n        /* Order */\n        if (account.account_type.number === OrderNumberPL.OtherRevenue.number) {\n          //Other Revenue\n          entry.order = OrderNumberPL.OtherRevenue.order;\n        } else {\n          entry.order = account.account_type.number;\n        }\n\n        /* BUDGET */\n        /* Budget Whole */\n        entry.budget_whole = value.amount * nature;\n\n        value.monthly_amount.forEach((mline) => {\n          /* Budget Month */\n          if (mline.month_of === budgetMonthFormated) {\n            entry.budget_month = mline.amount * nature;\n          }\n\n          /* Budget YTD */\n          if (\n            kendo.toString(new Date(mline.month_of), \"yyyy-MM-dd\") <=\n            kendo.toString(new Date(this.monthOf), \"yyyy-MM-dd\")\n          ) {\n            entry.budget_ytd += mline.amount * nature;\n          }\n        });\n\n        /* ACTUAL */\n        this.incomeStatements.forEach((plline) => {\n          if (plline.accountUUID === value.account_uuid) {\n            /* Actual Month */\n            let propertyMonth = NumberInWord[monthOfIndex]; // ['zero','one','two',...]\n            entry.actual_month = plline[propertyMonth]; // plline['zero']\n\n            for (let i = 0; i < 12; i++) {\n              let property = NumberInWord[i];\n\n              /* Actual YTD */\n              if (i <= monthOfIndex) {\n                entry.actual_ytd += plline[property];\n              }\n\n              /* Actual Whole */\n              entry.actual_whole += plline[property];\n            }\n          }\n        });\n\n        /* Percentage = Actual / Budget */\n        if (entry.budget_month !== 0) {\n          entry.month_percentage = entry.actual_month / entry.budget_month;\n        }\n        if (entry.budget_ytd !== 0) {\n          entry.ytd_percentage = entry.actual_ytd / entry.budget_ytd;\n        }\n        if (entry.budget_whole !== 0) {\n          entry.whole_percentage = entry.actual_whole / entry.budget_whole;\n        }\n\n        /* Add entry */\n        entries.push(entry);\n      });\n\n      /* Gathering from budget estimations */\n      this.budget.budget_estimations.forEach((value) => {\n        let entry = new Entry();\n\n        /* Set Account Information */\n        entry.uuid = value.accountUUID;\n        entry.name = value.name;\n        entry.local_name = value.local_name;\n        entry.type = value.type;\n        entry.type_local_name = value.type_local_name;\n        entry.account_type_number = value.account_type_number;\n\n        // Order\n        if (value.account_type_number == OrderNumberPL.GrossProfit.number) {\n          // Gross Profit\n          entry.order = OrderNumberPL.GrossProfit.order;\n        } else if (\n          value.account_type_number == OrderNumberPL.OtherRevenue.number\n        ) {\n          // Other Revenue\n          entry.order = OrderNumberPL.OtherRevenue.order;\n        } else if (\n          value.account_type_number == OrderNumberPL.OperatingExpense.number\n        ) {\n          // Operating Expense\n          entry.order = OrderNumberPL.OperatingExpense.order;\n        } else if (\n          value.account_type_number ==\n          OrderNumberPL.OperatingIncomeEBITDA.number\n        ) {\n          // Operating Income (EBITDA)\n          entry.order = OrderNumberPL.OperatingIncomeEBITDA.order;\n        } else if (\n          value.account_type_number ==\n          OrderNumberPL.EarningBeforeInterestAndTaxEBIT.number\n        ) {\n          // Earning Before Interest And Tax(EBIT)\n          entry.order = OrderNumberPL.EarningBeforeInterestAndTaxEBIT.order;\n        } else if (\n          value.account_type_number == OrderNumberPL.ProfitBeforeTax.number\n        ) {\n          // Profit Before Tax\n          entry.order = OrderNumberPL.ProfitBeforeTax.order;\n        } else if (\n          value.account_type_number == OrderNumberPL.ProfitForThePeriod.number\n        ) {\n          // Profit For The Period\n          entry.order = OrderNumberPL.ProfitForThePeriod.order;\n        } else {\n          entry.order = value.account_type_number;\n        }\n\n        /* BUDGET */\n\n        /* Budget Month */\n        let propertyBudgetMonth = NumberInWord[monthOfIndex]; // ['zero','one','two',...]\n        entry.budget_month = value[propertyBudgetMonth]; // value['zero']\n\n        for (let i = 0; i < 12; i++) {\n          let property = NumberInWord[i];\n\n          /* Budget YTD */\n          if (i <= monthOfIndex) {\n            entry.budget_ytd += value[property];\n          }\n\n          /* Budget Whole */\n          entry.budget_whole += value[property];\n        }\n\n        /* ACTUAL */\n        this.incomeStatements.forEach((plline) => {\n          if (plline.account_type_number === value.account_type_number) {\n            /* Actual Month */\n            let propertyActualMonth = NumberInWord[monthOfIndex]; // ['zero','one','two',...]\n            entry.actual_month = plline[propertyActualMonth]; // plline['zero']\n\n            for (let i = 0; i < 12; i++) {\n              let property = NumberInWord[i];\n\n              /* Actual YTD */\n              if (i <= monthOfIndex) {\n                entry.actual_ytd += plline[property];\n              }\n\n              /* Actual Whole */\n              entry.actual_whole += plline[property];\n            }\n          }\n        });\n\n        /* Percentage = Actual / Budget */\n        if (entry.budget_month !== 0) {\n          entry.month_percentage = entry.actual_month / entry.budget_month;\n        }\n        if (entry.budget_ytd !== 0) {\n          entry.ytd_percentage = entry.actual_ytd / entry.budget_ytd;\n        }\n        if (entry.budget_whole !== 0) {\n          entry.whole_percentage = entry.actual_whole / entry.budget_whole;\n        }\n\n        /* Add entry */\n        entries.push(entry);\n      });\n\n      /* BIND STATMENT */\n      this.statementPLList = entries;\n      this.generateColumn();\n    },\n    /* Databound */\n    dataBound(e) {\n      let grid = e.sender;\n\n      grid.dataSource.data().forEach((value) => {\n        if (value.account_type_number >= 100) {\n          let row = grid.tbody\n            .find(\"tr[data-uid='\" + value.uid + \"']\")\n            .prev(\".k-grouping-row\");\n          grid.collapseGroup(row);\n        }\n      });\n    },\n    // Generate Columns\n    generateColumn() {\n      let headerAttributes = {\n          class: \"table-header-cell\",\n          style: \"text-align: center; font-size: 14px\",\n        },\n        subHeaderAttributes = {\n          class: \"table-header-cell\",\n          style: \"text-align: right; font-size: 14px\",\n        },\n        attributes = {\n          class: \"table-cell\",\n          style: \"text-align: right; font-size: 14px\",\n        };\n\n      /* Columns */\n      let columns = [\n        {\n          field: this.fieldName,\n          title: i18n.t(\"account\"),\n          groupFooterTemplate: this.totalWord + \" #=value#\",\n          locked: true,\n          width: 300,\n        },\n        {\n          field: this.fieldType,\n          title: \"TYPE\",\n          hidden: true,\n          groupHeaderTemplate: this.typeGroupHeaderTmpl,\n          width: 300,\n        },\n        /* Selected Month */\n        {\n          title: kendo.toString(new Date(this.monthOf), \"MMMM yyyy\"),\n          headerAttributes: headerAttributes,\n          columns: [\n            {\n              field: \"budget_month\",\n              title: i18n.t(\"budget\"),\n              format: \"{0:n}\",\n              aggregates: \"['sum']\",\n              groupFooterTemplate:\n                \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n            {\n              field: \"actual_month\",\n              title: i18n.t(\"actual\"),\n              format: \"{0:n}\",\n              aggregates: \"['sum']\",\n              groupFooterTemplate:\n                \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n            {\n              field: \"month_percentage\",\n              title: \"%\",\n              format: \"{0:p}\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n          ],\n        },\n        /* YTD(up to selected month) */\n        {\n          title: i18n.t(\"ytd_up_to_selected_month\"),\n          headerAttributes: headerAttributes,\n          columns: [\n            {\n              field: \"budget_ytd\",\n              title: i18n.t(\"budget\"),\n              format: \"{0:n}\",\n              aggregates: \"['sum']\",\n              groupFooterTemplate:\n                \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n            {\n              field: \"actual_ytd\",\n              title: i18n.t(\"actual\"),\n              format: \"{0:n}\",\n              aggregates: \"['sum']\",\n              groupFooterTemplate:\n                \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n            {\n              field: \"ytd_percentage\",\n              title: \"%\",\n              format: \"{0:p}\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n          ],\n        },\n        /* Whole Year */\n        {\n          title: i18n.t(\"whole_year\"),\n          headerAttributes: headerAttributes,\n          columns: [\n            {\n              field: \"budget_whole\",\n              title: i18n.t(\"budget\"),\n              format: \"{0:n}\",\n              aggregates: \"['sum']\",\n              groupFooterTemplate:\n                \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n            {\n              field: \"actual_whole\",\n              title: i18n.t(\"actual\"),\n              format: \"{0:n}\",\n              aggregates: \"['sum']\",\n              groupFooterTemplate:\n                \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n            {\n              field: \"whole_percentage\",\n              title: \"%\",\n              format: \"{0:p}\",\n              width: 150,\n              headerAttributes: subHeaderAttributes,\n              attributes: attributes,\n            },\n          ],\n        },\n      ];\n\n      /* Set Columns */\n      this.columns = columns;\n    },\n    // On Reporint Language Changes\n    onReportingLanguageChanges() {\n      this.fieldName = \"name\";\n      this.fieldType = \"type\";\n      this.totalWord = \"Total\";\n      if (this.reportingLanguage === \"local\") {\n        this.fieldName = \"local_name\";\n        this.fieldType = \"type_local_name\";\n        this.totalWord = \"\";\n      }\n\n      // Generate Group By\n      this.generateGroupBy();\n\n      // Generate column with new language\n      this.generateColumn();\n    },\n    /* Templates */\n    typeGroupHeaderTmpl(dataItem) {\n      let name = dataItem.items[0].type;\n\n      if (this.reportingLanguage === \"local\") {\n        name = dataItem.items[0].type_local_name;\n      }\n\n      return \"<span class='text-bold text-black'>\" + name + \"</span>\";\n    },\n    // Generate Group By\n    generateGroupBy() {\n      this.groupDefinition = {\n        field: this.fieldType,\n        aggregates: this.aggregateDefinition,\n        compare: function(a, b) {\n          if (a.items[0].order === b.items[0].order) {\n            return 0;\n          } else if (a.items[0].order > b.items[0].order) {\n            return 1;\n          } else {\n            return -1;\n          }\n        },\n      };\n    },\n  },\n  watch: {\n    budget() {\n      // Prevent null error\n      if (this.budget === null) {\n        this.budget = new BudgetModel();\n      }\n    },\n    reportingLanguage() {\n      this.onReportingLanguageChanges();\n    },\n  },\n  computed: {\n\t\tappType(){\n\t\t\treturn dataStore.productType;\n\t\t},\n\t},\n  mounted() {\n    // Generate Group By\n    this.generateGroupBy();\n\n    // Initial Grid Columns\n    // this.generateColumn();\n  },\n};\n</script>\n\n<style scoped>\n.theme--light.v-data-table {\n  background-color: transparent !important;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n  height: 32px !important;\n  border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n  border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.v-data-table.simple1_table.theme--light,\n.v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n  border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.v-data-table.simple_table.theme--light {\n  border-left: thin solid rgba(0, 0, 0, 0.12) !important;\n  border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.theme--light.v-data-table.simple1_table\n  > .v-data-table__wrapper\n  > table\n  > thead\n  > tr:last-child\n  > th:last-child {\n  border-right: none !important;\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: transparent !important;\n}\n\n.border-bottom {\n  border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.font-small {\n  font-size: 12px;\n  line-height: 15px;\n}\n\n.font-26 {\n  font-size: 26px !important;\n}\n.v-data-table.simple_table.theme--light {\n  border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > thead\n  > tr:last-child\n  > th {\n  border-bottom: none !important;\n  border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n  border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n  border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:not(:last-child)\n  > td:last-child,\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:not(:last-child)\n  > th:last-child,\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr\n  > td:last-child {\n  border-right: none !important;\n}\n\n.v-data-table.table_list > .v-data-table__wrapper > table > tbody > tr > td {\n  height: 32px !important;\n  border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n  border-right: none !important;\n}\n.v-data-table.table_list.theme--light\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:first-child\n  > td {\n  border-top: none !important;\n}\n\n@media (max-width: 576px) {\n}\n</style>\n"]}]}
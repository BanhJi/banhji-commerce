{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/closing/ClosingDate.vue?vue&type=style&index=0&id=871eebae&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/closing/ClosingDate.vue","mtime":1638499443090},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5leGNoYW5nZS10YWJsZS50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGhlYWQgPiB0ciA+IHRoIHsKICAgIGZvbnQtZmFtaWx5OiAnTmlyYWRlaS1Cb2xkJywgc2VyaWY7CiAgICBjb2xvcjogIzAwMCAhaW1wb3J0YW50OwogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMwMDAgIWltcG9ydGFudDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwICFpbXBvcnRhbnQ7CiAgICBmb250LXNpemU6IDE1cHggIWltcG9ydGFudDsKfQoKLmV4Y2hhbmdlLXRhYmxlLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0aGVhZCA+IHRyID4gdGQgewogICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsKICAgIHBhZGRpbmc6IDVweCAhaW1wb3J0YW50Owp9CgouZXhjaGFuZ2UtdGFibGUudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHI6bGFzdC1jaGlsZCB0ZCB7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMCAhaW1wb3J0YW50Owp9Cgoudi1jYXJkX19hY3Rpb25zIC52LWJ0bi52LWJ0biB7CiAgICBwYWRkaW5nOiAwIDE2cHg7Cn0KCi5mdW5jdGlvbl9mb290ZXIgewogICAgcGFkZGluZzogMTVweDsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQoKQG1lZGlhIChtYXgtd2lkdGg6IDU3NnB4KSB7Cn0K"},{"version":3,"sources":["ClosingDate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8OA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"ClosingDate.vue","sourceRoot":"src/views/accounting/closing","sourcesContent":["<template>\n    <v-row class=\"\">\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <h2 class=\"font_20\">{{ $t(\"closing_date\") }}</h2>\n            <v-dialog v-model=\"dialogM2\" max-width=\"400px\">\n                <template v-slot:activator=\"{ on }\">\n                    <v-btn class=\"white--text float-right text-capitalize\" color=\"primary\" v-on=\"on\">\n                        {{ $t(\"create_new\") }}\n                    </v-btn>\n                </template>\n                <v-card>\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"closing_date\") }}</v-card-title>\n                        <v-icon class=\"btn_close\" @click=\"dialogM2 = false\">close</v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_content\">\n                        <v-row>\n                            <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                <label class=\"label\">{{ $t(\"closing_date\") }}</label>\n                                <p class=\"text_tip mb-0\">{{ $t('closing_date_form_tips') }}</p>\n                                <app-datepicker :initialDate=\"closingDateM.closingDate\"\n                                                @emitDate=\"closingDate = $event\"/>\n                            </v-col>\n                            <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                <label class=\"label\">{{ $t(\"password\") }}</label>\n                                <p class=\"text_tip\">{{ $t('closing_date_form_tips1') }}</p>\n                                <v-text-field class=\" pt-2\" v-model=\"closingDateM.password\" outlined placeholder=\"\" />\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                    <v-card-actions class=\"modal_footer\">\n                        <v-btn class=\"btn_cancel\">{{ $t(\"cancel\") }}</v-btn>\n                        <v-btn class=\"btn_save_close\" @click=\"onSaveClose\"\n                        >{{ $t(\"save_close\") }}\n                        </v-btn>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n\n            <p class=\"mb-3\">{{ $t(\"closing_date_desc\") }}</p>\n            <v-row>\n                <v-col sm=\"12\" cols=\"12\">\n                    <template>\n                        <LoadingMe :isLoading=\"showLoading\" :fullPage=\"true\" :myLoading=\"true\"/>\n                        <kendo-datasource ref=\"gridSaleChannelDS\"\n                                          :data=\"closingDateList\"/>\n                        <kendo-grid id=\"gridClosingDate\" class=\"grid-function\"\n                                    :data-source-ref=\"'gridSaleChannelDS'\"\n                                    :editable=\"false\"\n                                    :scrollable-virtual=\"true\">\n                            <kendo-grid-column\n                                :field=\"'no'\"\n                                :title=\"$t('no')\"\n                                :template=\"rowNumberTmpl\"\n                                :width=\"30\"\n                                :column-menu=\"false\"\n                                :headerAttributes=\"{ style: 'background-color: #EDF1F5;', class: 'text-center'\t}\"\n                                :attributes=\"{style: 'text-align: center'}\"/>\n                            <kendo-grid-column\n                                :field=\"'closingDate'\"\n                                :title=\"$t('closing_date')\"\n                                :width=\"80\"\n                                :attributes=\"{class:'tb_name_td'}\"\n                                :template=\"loadClosingDate\"\n                                :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                            <kendo-grid-column\n                                :field=\"'createdAt'\"\n                                :title=\"$t('created_on')\"\n                                :width=\"80\"\n                                :template=\"loadCreatedAt\"\n                                :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                            <kendo-grid-column\n                                :field=\"'password'\"\n                                :title=\"$t('password')\"\n                                :width=\"90\"\n                                :template=\"'<span>#=password#</span>'\"\n                                :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                            <kendo-grid-column\n                                :field=\"'createdBy.email'\"\n                                :title=\"$t('created_by')\"\n                                :width=\"120\"\n                                :template=\"'<span>#=createdBy.email#</span>'\"\n                                :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                            <kendo-grid-column\n                                :field=\"''\"\n                                :title=\"$t('action')\"\n                                :width=\"70\"\n                                :command=\"[{ iconClass: 'k-icon k-i-edit', text: 'Edit', click: goEdit }]\"\n                                :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                        </kendo-grid>\n                    </template>\n                </v-col>\n            </v-row>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\nimport ClosingDateModel from \"@/scripts/model/ClosingDate\";\nimport kendo from \"@progress/kendo-ui\"\n\nconst $ = require(\"jquery\")\n\n/* Cookie */\nconst cookieJS = require(\"@/cookie.js\");\nconst { instituteId } = cookieJS.getCookie();\n\nconst CryptoJS = require(\"crypto-js\");\nimport DatePickerComponent from '@/components/custom_templates/DatePickerComponent'\n\nconst closingDateHandler = require(\"@/scripts/closingDateHandler\")\nconst closingDateModel = new ClosingDateModel({})\nexport default {\n    components: {\n        'app-datepicker': DatePickerComponent,\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    data: () => ({\n        dialogM2: false,\n        showLoading: true,\n        closingDate: new Date().toISOString().substr(0, 10),\n        closingDateM: closingDateModel,\n        closingDateList: []\n\n    }),\n    methods: {\n        loadClosingDate(dataItem) {\n            return kendo.toString((new Date(dataItem.closingDate)), this.closingDateM.dateFormat)\n        },\n        loadCreatedAt(dataItem) {\n            return kendo.toString((new Date(dataItem.createdAt)), this.closingDateM.dateFormat)\n        },\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.gridSaleChannelDS.kendoWidget(),\n                index = ds.indexOf(dataItem)\n            return index + 1\n        },\n        onNewClick() {\n            this.closingDateM = {}\n            this.closingDateM.id = undefined\n        },\n        goEdit(e) {\n            e.preventDefault()\n            let grid = kendo.jQuery(\"#gridClosingDate\").data(\"kendoGrid\")\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"))\n            window.console.log(dataItem, '-')\n            this.closingDateM = dataItem\n            this.dialogM2 = true\n        },\n        close() {\n            this.dialogM2 = false\n        },\n        async onSaveClose() {\n            // if (!this.$refs.form.validate()) {\n            //   this.$refs.form.validate()\n            //   return\n            // }\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    let data = {\n                        id: this.closingDateM.id ? this.closingDateM.id : '',\n                        closingDate: this.closingDate,\n                        password: CryptoJS.AES.encrypt(this.closingDateM.password, instituteId).toString(),\n                        createdBy: this.closingDateM.createdBy\n                    }\n                    closingDateHandler.create(data).then(response => {\n                        if (response.data.statusCode === 201) {\n                            this.loadClosingDateList()\n                            // const res = response.data.data\n                            // const index = this.closingDateList.findIndex(item => {\n                            //     return (res.id === item.id)\n                            // })\n                            // // res.closingDate = kendo.toString((new Date(res.closingDate)), this.closingDateM.dateFormat)\n                            // // res.createdAt = kendo.toString((new Date(res.createdAt)), this.closingDateM.dateFormat)\n                            // if (this.closingDateList.length === 0) {\n                            //     this.loadClosingDateList()\n                            // } else {\n                            //     if (index < 0) {\n                            //         this.closingDateList.push(res)\n                            //     } else {\n                            //         this.closingDateList.splice(index, 1, res)\n                            //     }\n                            // }\n\n                            this.$snotify.success('Success')\n                            this.close()\n                            // this.$refs.form.reset()\n                        }\n                    }).catch(e => {\n                        this.$snotify.error('Something went wrong')\n                        this.errors.push(e)\n                    })\n\n                }, 300);\n            })\n        },\n        async loadClosingDateList() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    this.showLoading = true\n                    closingDateHandler.get().then(res => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            // const cld = res.data.data\n                            this.closingDateList = res.data.data\n                            this.closingDateList.forEach(element => {\n                                element.password = CryptoJS.AES.decrypt(element.password, instituteId).toString(CryptoJS.enc.Utf8);\n                            });\n                            \n                            // this.closingDateList.dateFormat = this.closingDateM.dateFormat\n                            // this.closingDateList = cld.map(m => {\n                            //     return {\n                            //         id: m.id,\n                            //         closingDate: m.closingDate,\n                            //         password: m.password,\n                            //         dateFormat: this.closingDateM.dateFormat,\n                            //         createdAt: m.createdAt,\n                            //         createdBy: m.createdBy\n                            //     }\n                            // })\n                            window.console.log(this.closingDateList)\n                        } else {\n                            this.showLoading = false\n                        }\n                    })\n                }, 300);\n            })\n        },\n    },\n    mounted: async function () {\n        window.console.log(this.closingDateList)\n        await this.loadClosingDateList()\n    }\n};\n</script>\n<style scoped>\n.exchange-table.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n    font-family: 'Niradei-Bold', serif;\n    color: #000 !important;\n    border-top: 1px solid #000 !important;\n    border-bottom: 1px solid #000 !important;\n    font-size: 15px !important;\n}\n\n.exchange-table.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > td {\n    color: #000 !important;\n    padding: 5px !important;\n}\n\n.exchange-table.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:last-child td {\n    border-bottom: 1px solid #000 !important;\n}\n\n.v-card__actions .v-btn.v-btn {\n    padding: 0 16px;\n}\n\n.function_footer {\n    padding: 15px;\n    display: inline-block;\n}\n\n@media (max-width: 576px) {\n}\n</style>\n"]}]}
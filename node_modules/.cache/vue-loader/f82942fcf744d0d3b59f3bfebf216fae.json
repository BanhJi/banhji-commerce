{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products/product/warranty/Warranty.vue?vue&type=style&index=0&id=7d0f105e&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products/product/warranty/Warranty.vue","mtime":1638499443281},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zbWFsbF9zaWRlYmFyIHsKICAgIGhlaWdodDogOTUlOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgcGFkZGluZzogMTJweDsKfQoKLmhpZGVfc21hbGxfYmFyX2NsYXNzIHsKICAgIG1heC13aWR0aDogMDsKICAgIHRyYW5zaXRpb246IC41cyBlYXNlLWluOwogICAgZmxleDogMCAwIDA7CiAgICBwYWRkaW5nOiAwOwp9CgouaGlkZV9iaWdfYmFyX2NsYXNzIHsKICAgIG1heC13aWR0aDogMTAwJTsKICAgIHRyYW5zaXRpb246IC41cyBlYXNlLWluOwogICAgZmxleDogMCAwIDEwMCU7Cn0KCi5pY29uQXJyb3cgewogICAgcmlnaHQ6IC0zNXB4OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAtMTBweDsKfQoKLmljb25BcnJvd0hpZGUgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IC03cHg7CiAgICBib3R0b206IC0xMHB4Owp9CgoudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHI6aG92ZXI6bm90KC52LWRhdGEtdGFibGVfX2V4cGFuZGVkX19jb250ZW50KTpub3QoLnYtZGF0YS10YWJsZV9fZW1wdHktd3JhcHBlcikgewogICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKfQoKLmRldGlhbF9zbWFsbHNpZGVfcCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBib3R0b206IDEwcHg7Cn0KCg=="},{"version":3,"sources":["Warranty.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6nBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Warranty.vue","sourceRoot":"src/views/products/product/warranty","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col sm=\"12\" cols=\"12\">\n                    <v-card outlined dense class=\"pa-4 no_border rounded-sm\" color=\"white\">\n                        <v-row>\n                            <v-col class=\"bigSide py-0\" sm=\"8\" cols=\"12\" style=\"transition: .3s ease-in;\"\n                                   :class=\"{'hide_big_bar_class':isHideBar}\">\n                                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                                    <v-card outlined dense class=\"no_border\">\n                                        <h2 class=\"mb-0\">{{ $t('warranty') }}</h2>\n                                        <v-icon v-if=\"isHideBar\" @click=\"cancel()\"\n                                                style=\"cursor: pointer;font-size: 40px;\"\n                                                color=\"grey\"\n                                                class=\"float-right\">close\n                                        </v-icon>\n                                        <span style=\"transition: .3s ease-in; z-index:10;\"\n                                              :class=\"{'iconArrow': !isHideBar,'iconArrowHide': isHideBar }\">\n                                        <v-icon size=\"22\" class=\"arr_icon\" @click=\"hide_smallsitebar\" v-if=\"isHideBar\"> mdi-chevron-left-circle\n                                        </v-icon>\n                                        <v-icon size=\"22\" class=\"arr_icon\" @click=\"hide_smallsitebar\" v-if=\"!isHideBar\"> mdi-chevron-right-circle\n                                        </v-icon>\n                                    </span>\n                                    </v-card>\n                                    <v-card outlined dense class=\"px-3 no_border\" color=\"grayBg\" height=\"169px\">\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label  mb-0\">{{ $t('customer') }}</label>\n                                                <v-col sm=\"12\" cols=\"12\"\n                                                       class=\"kendo_dropdown_custom pl-0 pb-3 pt-0\">\n                                                    <dropdownlist\n                                                        :data-items=\"customerList\"\n                                                        @change=\"onChange\"\n                                                        :value=\"customer\"\n                                                        :data-item-key=\"dataItemKey\"\n                                                        :text-field=\"textField\"\n                                                        :default-item=\"defaultItem\"\n                                                        :filterable=\"true\"\n                                                        @filterchange=\"onFilterChange\">\n                                                    </dropdownlist>\n                                                </v-col>\n                                                <label class=\"label\">{{ $t('invoice_number') }}</label>\n                                                <v-col sm=\"12\" cols=\"12\"\n                                                       class=\"kendo_dropdown_custom pl-0 pb-3 pt-0\">\n                                                    <dropdownlist\n                                                        :data-items=\"invoices\"\n                                                        @change=\"onChangeInvoice\"\n                                                        :value=\"invoice\"\n                                                        :data-item-key=\"dataItemKey\"\n                                                        :text-field=\"textFieldInvoice\"\n                                                        :default-item=\"defaultItem\"\n                                                        :filterable=\"true\"\n                                                        @filterchange=\"onFilterChangeInvoice\">\n                                                    </dropdownlist>\n                                                </v-col>\n                                            </v-col>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <!--                                            <label class=\"label\">{{$t('packing_list')}}</label>-->\n                                                <!--                                            <v-text-field class=\"mt-1\"-->\n                                                <!--                                                          v-model=\"bill_date\"-->\n                                                <!--                                                          outlined-->\n                                                <!--                                                          tage=\"Packing List\"-->\n                                                <!--                                                          :rules=\"[v => !!v || 'Number is required']\"-->\n                                                <!--                                                          required/>-->\n                                                <label class=\"label  mb-0\">{{ $t('date') }}</label>\n                                                <app-datepicker :initialDate=\"date\"\n                                                                @emitDate=\"date = $event\"/>\n                                                <label class=\"label\">{{ $t('warranty_start_date') }}</label>\n                                                <app-datepicker :initialDate=\"startDate\"\n                                                                @emitDate=\"startDate = $event\"/>\n                                            </v-col>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label\">{{ $t('warranty_number') }}</label>\n                                                <v-row class=\"mt-1 mr-0\">\n                                                    <v-col sm=\"3\" cols=\"3\" class=\"pt-0 pr-0 py-0\">\n                                                        <div class=\"code_text\">Bil</div>\n                                                    </v-col>\n                                                    <v-col sm=\"7\" cols=\"7\" class=\"pt-0 pl-0 pr-1 py-0\">\n                                                        <v-text-field class=\" custom-border \"\n                                                                      v-model=\"warrantyNo\"\n                                                                      outlined\n                                                                      tage=\"Warranty Number\"\n                                                                      :rules=\"[v => !!v || 'Number is required']\"\n                                                                      required/>\n                                                    </v-col>\n                                                    <v-col sm=\"2\" cols=\"2\" class=\"pt-0 px-0 py-0\">\n                                                        <v-icon color=\"black\" style=\"background: #fff;\" size=\"30\"\n                                                                class=\"border_qrcode\"\n                                                                @click=\"generateNumber\">mdi-qrcode\n                                                        </v-icon>\n                                                    </v-col>\n                                                </v-row>\n\n                                            </v-col>\n\n                                        </v-row>\n                                    </v-card>\n\n                                    <v-row class=\"\" style=\"background-color: #fff;\">\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pt-3\">\n                                            <kendo-datasource ref=\"itemLineDS\" :data=\"itemLines\"/>\n                                            <kendo-grid id=\"grid\" class=\"grid-function\" :data-source-ref=\"'itemLineDS'\"\n                                                        :sortable=\"false\" :filterable=\"false\" :column-menu=\"true\"\n                                                        :editable=\"true\" :scrollable-virtual=\"true\">\n                                                <kendo-grid-column :title=\"$t('no.')\" :template=\"rowNumberTmpl\"\n                                                                   :width=\"55\" :column-menu=\"false\" :headerAttributes=\"{\n                                                                    style: 'background-color: #EDF1F5;',\n                                                                    class: 'text-variants'\n                                                                }\" :attributes=\"{\n                                                                    style: 'text-align: variants'\n                                                                }\"/>\n                                                <kendo-grid-column :field=\"'item'\" :title=\"$t('item')\" :width=\"200\"\n                                                                   :editable=\"disableEdit\"\n                                                                   :template=\"'<span>#=item.name#</span>'\"\n                                                                   :editor=\"accountDropDownEditor\" :headerAttributes=\"{\n                                                                    style: 'background-color: #EDF1F5'\n                                                                }\"/>\n                                                <kendo-grid-column :field=\"'qty'\" :title=\"$t('qty')\" :width=\"200\"\n                                                                   :editable=\"disableEdit\"\n                                                                   :headerAttributes=\"{\n                                                                    style: 'background-color: #EDF1F5'\n                                                                }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'uom'\"\n                                                    :title=\"$t('uom')\"\n                                                    :width=\"100\"\n                                                    :editable=\"disableEdit\"\n                                                    :template=\"UOMTemplate\"\n                                                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"\n                                                    :attributes=\"{style: 'text-align: left'}\"/>\n                                                <kendo-grid-column :field=\"'serial_ime_no'\" :title=\"$t('serial_ime_no')\"\n                                                                   :format=\"'{0:n}'\" :width=\"150\"\n                                                                   :headerAttributes=\"{style: 'text-align: right; background-color: #EDF1F5'}\"\n                                                                   :attributes=\"{style: 'text-align: right; '}\"/>\n                                                <kendo-grid-column :field=\"'conditions'\"\n                                                                   :title=\"$t('conditions')\"\n                                                                   :template=\"WarrantyCondition\"\n                                                                   :editor=\"ConditionDropDownEditor\"\n                                                                   :width=\"150\" :headerAttributes=\"{\n                                                                        style: 'text-align: left; background-color: #EDF1F5'\n                                                                    }\" :attributes=\"{\n                                                                        style: 'text-align: left'\n                                                                    }\"/>\n                                                <kendo-grid-column\n                                                    :field=\"'months'\"\n                                                    :title=\"$t('months')\"\n                                                    :width=\"120\"\n                                                    :format=\"'{0:n}'\"\n                                                    :headerAttributes=\"{\n                                                        style: 'text-align: right; background-color: #EDF1F5'\n                                                    }\" :attributes=\"{style: 'text-align: right'}\"/>\n                                                <!--                                                <kendo-grid-column-->\n                                                <!--                                                    :command=\"{ iconClass: 'k-icon k-i-trash', text: 'Delete', click: removeRow, class: 'btn-plus' }\"-->\n                                                <!--                                                    :title=\"'&nbsp;'\" :width=\"100\" :headerAttributes=\"{-->\n                                                <!--                                                                    style: 'text-align: right; background-color: #EDF1F5'-->\n                                                <!--                                                                }\"/>-->\n                                            </kendo-grid>\n\n                                        </v-col>\n                                        <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                            <v-row>\n                                                <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                    <template>\n                                                        <v-file-input class=\"mt-0 pt-0 \" sm=\"3\" cols=\"6\" v-model=\"files\"\n                                                                      :placeholder=\"$t('attachment')\" multiple\n                                                                      prepend-icon=\"mdi-paperclip\">\n                                                            <template v-slot:selection=\"{ text }\">\n                                                                <v-chip small label color=\"primary\">\n                                                                    {{ text }}\n                                                                </v-chip>\n                                                            </template>\n                                                        </v-file-input>\n                                                    </template>\n                                                </v-col>\n                                            </v-row>\n                                        </v-col>\n                                    </v-row>\n                                    <v-divider/>\n                                    <v-card outlined dense class=\"no_border function_footer\">\n                                        <v-alert type=\"warning\"\n                                                 v-model=\"alert\"\n                                                 dismissible>\n                                            <span v-html=\"errorMessage\"/>\n                                        </v-alert>\n                                        <v-menu>\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-btn color=\"black\" outlined\n                                                       class=\"mr-2 text-capitalize  black--text float-left\"\n                                                       v-on=\"on\">\n                                                    {{ $t('select_template') }}\n                                                    <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                                </v-btn>\n                                            </template>\n                                            <v-list>\n                                                <v-list-item v-for=\"(item, index) in templates\" :key=\"index\">\n                                                    <v-list-item-title>{{ item.title }}</v-list-item-title>\n                                                </v-list-item>\n                                            </v-list>\n                                        </v-menu>\n                                        <v-btn color=\"black\"\n                                               class=\"text-capitalize  white--text float-left\"\n                                               @click=\"cancel\">{{ $t('cancel') }}\n                                        </v-btn>\n                                        <v-menu>\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-btn color=\"primary\"\n                                                       class=\"ml-2 float-right text-capitalize  white--text\"\n                                                       v-on=\"on\">\n                                                    {{ $t('save_option') }}\n                                                    <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                                </v-btn>\n                                            </template>\n                                            <v-list rounded>\n                                                <v-list-item-group>\n                                                    <v-list-item>\n                                                        <v-list-item-content>\n                                                            <v-list-item-title v-if=\"!isEdit\" @click=\"saveNew\">\n                                                                {{ $t('save_new') }}\n                                                            </v-list-item-title>\n                                                        </v-list-item-content>\n                                                    </v-list-item>\n                                                    <v-list-item>\n                                                        <v-list-item-content>\n                                                            <v-list-item-title @click=\"savePrint\">{{ $t('save_print') }}\n                                                            </v-list-item-title>\n                                                        </v-list-item-content>\n                                                    </v-list-item>\n                                                </v-list-item-group>\n                                            </v-list>\n                                        </v-menu>\n                                        <v-btn color=\"secondary\"\n                                               class=\"float-right white--text text-capitalize \">\n                                            {{ $t('save_draft') }}\n                                        </v-btn>\n                                    </v-card>\n                                </v-form>\n                            </v-col>\n\n                            <v-col class=\"smallSide\" sm=\"4\" style=\"transition: .3s ease-in;\"\n                                   :class=\"{'hide_small_bar_class':isHideBar}\">\n                                <h3 style=\"color: #b3b5bc; font-size:20px;\" v-if=\"!isHideBar\"\n                                    class=\"text-uppercase float-right mt-n3\">\n                                    <span class=\"pointer\" @click=\"Help('warranty')\">\n                                        {{ $t('help') }}\n                                    </span>\n                                    <v-icon @click=\"cancel()\"\n                                            style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                            class=\"float-right mt-n1\">close\n                                    </v-icon>\n                                </h3>\n\n                                <div v-if=\"!isHideBar\" class=\"small_sidebar mt-9 grayBg\">\n                                    <v-row>\n                                        <v-col sm=\"12\" cols=\"12\">\n                                            <h4 class=\"mb-2 text-uppercase\">{{ $t('analysis') }}</h4>\n                                            <label class=\"label font_14\">{{ $t('segment') }}</label>\n                                            <v-select class=\"mt-1\"\n                                                      :items=\"segments\"\n                                                      item-value=\"id\"\n                                                      disabled\n                                                      :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                      v-model=\"invoice.segment\"\n                                                      placeholder=\"Segment\"\n                                                      tage=\"Segment\"\n                                                      outlined/>\n                                            <label class=\"label mb-0\">{{ $t('location') }}</label>\n                                            <v-select class=\"mt-2\"\n                                                      v-model=\"invoice.location\"\n                                                      :items=\"locations\"\n                                                      disabled\n                                                      item-value=\"id\"\n                                                      :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                      return-object\n                                                      tage=\"Location\"\n                                                      placeholder=\"bu/location\"\n                                                      outlined=\"\"/>\n                                            <label class=\"label font_14\">{{ $t('project') }}</label>\n                                            <v-select class=\"mt-1\"\n                                                      :items=\"projects\"\n                                                      item-value=\"id\"\n                                                      disabled\n                                                      :item-text=\"item =>`${item.code} - ${item.name}`\"\n                                                      v-model=\"invoice.project\"\n                                                      placeholder=\"ABA\"\n                                                      tage=\"Project\"\n                                                      outlined/>\n                                            <label class=\"label font_14\">{{ $t('sale_channel') }}</label>\n                                            <v-select class=\" my-2\"\n                                                      v-model=\"invoice.saleChannel\"\n                                                      :items=\"saleChannelList\"\n                                                      item-value=\"id\"\n                                                      item-text=\"name\"\n                                                      return-object\n                                                      disabled\n                                                      tage=\"Sale Channel\"\n                                                      placeholder=\"Channel\"\n                                                      outlined\n                                            />\n                                            <label class=\"label font_14\">{{ $t('employee') }}</label>\n                                            <v-select class=\"mt-1\"\n                                                      :items=\"employees\"\n                                                      item-value=\"id\"\n                                                      disabled\n                                                      item-text=\"name\"\n                                                      v-model=\"invoice.employee\"\n                                                      tage=\"Employee\"\n                                                      outlined/>\n                                            <label class=\"label font_14\">{{ $t('for_the_month_of') }}</label>\n                                            <app-datepicker :initialDate=\"invoice.monthOf\"\n                                                            @emitDate=\"monthOf = $event\"/>\n                                        </v-col>\n                                    </v-row>\n                                    <p class=\"pt-1 mb-0 detial_smallside_p font_14\">{{ $t('warranty_desc') }}</p>\n                                </div>\n                            </v-col>\n                        </v-row>\n\n                    </v-card>\n                </v-col>\n            </v-row>\n            <LoadingMe :isLoading=\"showLoading\" :fullPage=\"true\" :myLoading=\"true\" :alertMessage=\"loadingAlert\"\n                       :color=\"loadingColorAlert\" :alertText=\"loadingTextAlert\"/>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport {i18n} from '@/i18n';\nimport LoadingMe from '@/components/Loading'\nimport DatePickerComponent from '@/components/custom_templates/DatePickerComponent'\nimport {DropDownList} from \"@progress/kendo-vue-dropdowns\";\nimport InvoiceModel from \"@/scripts/invoice/model/Invoice\";\nimport Warranty from '@/scripts/model/Warranty';\nimport { ShowResource } from '@/observable/store'\nimport kendo from \"@progress/kendo-ui\";\nconst keyField = 'id'\nconst textField = 'numberName'\nconst emptyItem = {[textField]: 'loading ...'}\nconst customerHandler = require(\"@/scripts/customerHandler\")\nconst invoiceModel = new InvoiceModel({})\nconst warrantyModel = new Warranty({})\nconst billingHandler = require('@/scripts/invoice/handler/billingHandler')\nconst warrantyConditionHandler = require('@/scripts/warrantyConditionHandler')\nconst warrantyHandler = require('@/scripts/warrantyHandler')\n// const $ = require('jquery')\nexport default {\n    name: \"CreditPurchase\",\n    components: {\n        'LoadingMe': LoadingMe,\n        'app-datepicker': DatePickerComponent,\n        'dropdownlist': DropDownList,\n    },\n    data: () => ({\n        isEdit: false,\n        // LoadingMe\n        showLoading: false,\n        loadingAlert: false,\n        loadingColorAlert: '',\n        loadingTextAlert: '',\n        warrantyNo: '',\n        alert: false,\n        deposite: 1000,\n        files: [],\n        // Form validation\n        valid: true,\n\n        itemLines: [],\n        itemLine: [],\n        date: new Date().toISOString().substr(0, 10),\n        startDate: new Date().toISOString().substr(0, 10),\n        templates: [{\n            title: 'Draft'\n        },\n            {\n                title: 'Open'\n            },\n            {\n                title: 'Partially Closed'\n            },\n            {\n                title: 'Closed'\n            },\n        ],\n        col_expand: 9,\n        col_hide: 3,\n        isHideBar: false,\n\n        customerList: [],\n        customer: {},\n        dataItemKey: 'id',\n        textField: 'numberName',\n        textFieldInvoice: 'referenceNo',\n        defaultItem: {[textField]: 'Select customer...', [keyField]: null},\n        cusBaseUrl: customerHandler.search(),\n        filter: '',\n        invoice: invoiceModel,\n        months: new Date().toISOString().substr(0, 10),\n        customerProjects: [],\n        invoices: [],\n        warrantyCondition: [],\n        mEmployee: {},\n        employees: [],\n        requestStarted: false,\n        projects: [],\n        segments: [],\n        locations: [],\n        saleChannelList: [],\n        warranty: warrantyModel\n    }),\n    methods: {\n        Help(key_search){\n            ShowResource(key_search)\n        },\n        disableEdit() {\n            return false\n        },\n        onChange(event) {\n            const value = event.value\n            if (value && value[textField] === emptyItem[textField]) {\n                return;\n            }\n            this.customer = value\n            this.invoice.customer = value\n            window.console.log(value)\n            // window.console.log(this.invoice.customer, 'Changed')\n            // // this.invoice = value\n            // this.invoice.accReceivable = value.hasOwnProperty('accReceivable') ? value.accReceivable : {}\n            // this.invoice.paymentTerm = value.hasOwnProperty('paymentTerm') ? value.paymentTerm : {}\n            // this.invoice.priceLevel = value.hasOwnProperty('defaultPriceLevel') ? value.defaultPriceLevel : {}\n            //\n            // this.billingAddress = value.hasOwnProperty('billingAddress') ? value.billingAddress : []\n            // this.deliveryAddress = value.hasOwnProperty('deliveryAddress') ? value.deliveryAddress : []\n            // if (this.billingAddress.length > 0) {\n            //     this.invoice.billingAddress = this.billingAddress[0]\n            // }\n            // if (this.deliveryAddress.length > 0) {\n            //     this.invoice.deliveryAddress = this.deliveryAddress[0]\n            // }\n            this.onLoadInvoice(value.id)\n            // this.loadProjectByCustomer()\n            // const creditLimit = value.hasOwnProperty('creditLimit') ? value.creditLimit : 0\n            // this.invoice.creditLimit = kendo.parseFloat(creditLimit)\n            // window.console.log(value, 'value')\n        },\n        onLoadWarrantyCondition() {\n            warrantyConditionHandler.getAll().then(res => {\n                this.warrantyCondition = res.data.data\n            })\n        },\n        async onLoadInvoice(id) {\n            await billingHandler.byCustomer(id).then(res => {\n                this.invoices = res.data.data\n                window.console.log(this.invoices, 'invoice')\n            })\n        },\n        onFilterChange(event) {\n            const filter = event.filter.value\n            this.requestData(0, filter, this.cusBaseUrl)\n            this.filter = filter\n        },\n        onFilterChangeInvoice() {\n            this.onLoadInvoice(this.customer.id)\n        },\n        afterFetch(json) {\n            this.customerList = json.data\n        },\n        requestData(skip, filter, baseUrl) {\n            const url = baseUrl +\n                `?filter=${filter}`\n            this.requestStarted = true;\n            fetch(url)\n                .then((response) => {\n                    return response.json()\n                })\n                .then(this.afterFetch)\n        },\n        onChangeInvoice(event) {\n            const value = event.value\n            if (value && value[textField] === emptyItem[textField]) {\n                return;\n            }\n            this.invoice = value\n            const il = value.itemLines\n            il.forEach(i => {\n                this.itemLines.push({\n                    id: i.id,\n                    dateFormat: i.dateFormat,\n                    uom: i.uom,\n                    qty: i.qty,\n                    item: i.item,\n                    serialIME: '',\n                    conditions: {name: ''},\n                    months: 0\n                })\n            })\n            this.onLoadWarrantyCondition()\n            this.projects.push(value.project)\n            this.employees.push(value.employee)\n            this.segments.push(value.segment)\n            this.locations.push(value.location)\n            this.saleChannelList.push(value.saleChannel)\n            window.console.log(this.itemLines, 'il')\n            window.console.log(this.invoice)\n        },\n        UOMTemplate(dataItem) {\n            const uom = dataItem.uom\n            if (uom) {\n                return `<span>${uom.uom ? uom.uom.toUOM.name : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        WarrantyCondition(dataItem) {\n            const wtc = dataItem.conditions\n            if (wtc) {\n                return `<span>${wtc ? wtc.name : ``}</span>`\n            } else {\n                return ``\n            }\n        },\n        TimesheetDateEditor(container, options) {\n            kendo.jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDatePicker()\n        },\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.itemLineDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        ConditionDropDownEditor(container, options) {\n            kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    cascadeFrom: \"item\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: {data: this.warrantyCondition}\n                })\n        },\n        async getDataSource() {\n            let ds = this.$refs.itemLineDS.kendoWidget()\n            let dataRow = ds.data()\n            this.itemLine = []\n            dataRow.forEach(i => {\n                this.itemLine.push({\n                    id: i.id,\n                    dateFormat: i.dateFormat,\n                    uom: i.uom,\n                    qty: i.qty,\n                    item: i.item,\n                    serialIME: i.serialIME,\n                    conditions: i.conditions,\n                    months: i.months\n                })\n            })\n        },\n        savePrint() {\n\n        },\n        async saveNew() {\n            await this.getDataSource()\n            this.warranty.customer = this.customer\n            this.warranty.warrantyNo = this.warrantyNo\n            this.warranty.itemLines = this.itemLine\n            this.warranty.date = this.date\n            this.warranty.warrantyStartDate = this.startDate\n            this.warranty.invoice = this.invoice\n            window.console.log(this.itemLine)\n            warrantyHandler.save(this.warranty).then(res => {\n                window.console.log(res)\n            })\n        },\n        saveClose() {\n\n        },\n        removeRow() {\n        },\n        generateNumber() {\n\n        },\n        errorMessage() {\n\n        },\n        addRow() {\n        },\n        accountDropDownEditor() {\n        },\n        cancel() {\n            this.$swal({\n                title: i18n.t('msg_title_warning'),\n                text: i18n.t('msg_discard'),\n                icon: \"warning\",\n                showCancelButton: true,\n                cancelButtonText: i18n.t('cancel'),\n                confirmButtonColor: \"#4d4848\",\n                cancelButtonColor: \"#ED1A3A\",\n                confirmButtonText: i18n.t('discard'),\n            }).then((resultCen) => {\n                if (resultCen.value) {\n                    this.$router.go(-1);\n                }\n            });\n        },\n        hide_smallsitebar() {\n            if (!this.isHideBar) {\n                // this.col_expand = 12\n                // this.col_hide = 0\n                this.isHideBar = true\n            } else {\n                // this.col_expand = 9\n                // this.col_hide = 3\n                this.isHideBar = false\n            }\n        }\n    },\n    watch: {\n        // call again the method if the route changes\n\n    },\n    created() {\n        // fetch the data when the view is created and the data is\n        // already being observed\n        // this.loadObj()\n    },\n    mounted() {\n        this.requestData(0, this.filter, this.cusBaseUrl)\n    },\n};\n</script>\n<style scoped>\n.small_sidebar {\n    height: 95%;\n    position: relative;\n    padding: 12px;\n}\n\n.hide_small_bar_class {\n    max-width: 0;\n    transition: .5s ease-in;\n    flex: 0 0 0;\n    padding: 0;\n}\n\n.hide_big_bar_class {\n    max-width: 100%;\n    transition: .5s ease-in;\n    flex: 0 0 100%;\n}\n\n.iconArrow {\n    right: -35px;\n    position: absolute;\n    bottom: -10px;\n}\n\n.iconArrowHide {\n    position: absolute;\n    right: -7px;\n    bottom: -10px;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n\n.detial_smallside_p {\n    position: absolute;\n    bottom: 10px;\n}\n\n</style>\n"]}]}
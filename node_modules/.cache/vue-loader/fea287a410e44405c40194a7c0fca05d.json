{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/services_projects/items/services_items/Price.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/services_projects/items/services_items/Price.vue","mtime":1639966363966},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVT01TZXJ2aWNlUHJpY2UgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1VPTVNlcnZpY2VQcmljZSI7CmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgRGF0ZVBpY2tlckNvbXBvbmVudCBmcm9tICJAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9EYXRlUGlja2VyQ29tcG9uZW50IjsKaW1wb3J0IFNlcnZpY2VJdGVtIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9TZXJ2aWNlSXRlbSI7CmltcG9ydCBQcmljZUxldmVsTW9kZWwgZnJvbSAiQC9zY3JpcHRzL3ByaWNlTGV2ZWwvUHJpY2VMZXZlbCI7CmltcG9ydCBVT01Db252ZXJzaW9uIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9VT01Db252ZXJzaW9uIjsKaW1wb3J0IHtpMThufSBmcm9tICJAL2kxOG4iOwoKY29uc3QgdW9tU2VydmljZUNvbnZlcnNpb25IYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3VvbVNlcnZpY2VDb252ZXJzaW9uSGFuZGxlciIpOwpjb25zdCBwcmljZUxldmVsSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcmljZUxldmVsSGFuZGxlciIpOwpjb25zdCB1b21TZXJ2aWNlUHJpY2VIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3VvbVNlcnZpY2VQcmljZUhhbmRsZXIiKTsKY29uc3QgJCA9IHJlcXVpcmUoImpxdWVyeSIpOwpjb25zdCB1b21TZXJ2aWNlUHJpY2VNb2RlbCA9IG5ldyBVT01TZXJ2aWNlUHJpY2Uoe30pOwoKY29uc3QgTkFUVVJFID0gInNhbGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBwcm9wczogewogICAgICAgIHNlcnZpY2U6IHt9LAogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAiYXBwLWRhdGVwaWNrZXIiOiBEYXRlUGlja2VyQ29tcG9uZW50LAogICAgICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KGBAL2NvbXBvbmVudHMvTG9hZGluZ2ApLAogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgZGlhbG9nbTI6IGZhbHNlLAogICAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgICB1b21Db252ZXJzaW9uOiBbXSwKICAgICAgICBwcmljZUxpc3Q6IFtdLAogICAgICAgIHByaWNlTGV2ZWw6IFtdLAogICAgICAgIG1QcmljZUxldmVsOiBbXSwKICAgICAgICBtVU9NOiB7fSwKICAgICAgICBtZW51RGF0ZTogZmFsc2UsCiAgICAgICAgYXBwbGllZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApLAogICAgICAgIHVvbVByaWNlOiB1b21TZXJ2aWNlUHJpY2VNb2RlbCwKICAgICAgICBncmlkU2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgICBpZDogImlkIiwKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGRhdGVGb3JtYXQ6ICJkZC1NTS15eXl5IiwKICAgICAgICAvLyB7aWQ6IDIsIG5hbWU6ICdWb2x1bWUgUHJpY2luZyd9LAogICAgICAgIHR5cGVzOiBbCiAgICAgICAgICAgIHtpZDogMSwgbmFtZTogIlN0YW5kYXJkIn0sCiAgICAgICAgICAgIHtpZDogMywgbmFtZTogIlBlcmZvcm1hbmNlIEJhc2VkIn0sCiAgICAgICAgXSwKICAgICAgICB0eXBlOiAiU3RhbmRhcmQiLAogICAgICAgIG1vZGVzOiBbCiAgICAgICAgICAgIHtpZDogMSwgbmFtZTogIiUifSwKICAgICAgICAgICAge2lkOiAyLCBuYW1lOiAiQW1vdW50In0sCiAgICAgICAgXSwKICAgICAgICBkYXRhOiB7YW1vdW50OiAiIiwgdHlwZTogIiJ9LAogICAgICAgIHZvbHVtZXM6IFtdLAogICAgICAgIG1pbk51bTogMCwKICAgICAgICBwcmljZTogMCwKICAgIH0pLAogICAgbWV0aG9kczogewogICAgICAgIGV4Y2VsRXhwb3J0OiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAvLyBjb25zdCBwaXZvdCA9IHRoaXMuJHJlZnMuZ3JpZFRyYW5zYWN0aW9uRFMua2VuZG9XaWRnZXQoKQogICAgICAgICAgICAvLyBwaXZvdC5zYXZlQXNFeGNlbCgpCiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhlLmRhdGEpOwogICAgICAgIH0sCiAgICAgICAgaW5pdFRvb2xiYXIodGhhdCkgewogICAgICAgICAgICBsZXQgZ3JpZCA9ICQoIiNncmlkU2VydmljZVByaWNlIikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgIGxldCBncmlkRWxlbWVudCA9IGdyaWQuZWxlbWVudDsKICAgICAgICAgICAgbGV0IHRvb2xiYXJFbGVtZW50ID0gZ3JpZEVsZW1lbnQuZmluZCgiLmstZ3JpZC10b29sYmFyIik7CiAgICAgICAgICAgIHRvb2xiYXJFbGVtZW50Lm9uKCJjbGljayIsICIuay1wYWdlci1yZWZyZXNoIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIG9uUmVsb2FkRGF0YSh0aGF0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRvb2xiYXJFbGVtZW50Lm9uKCJjbGljayIsICIuay1wYWdlci1leGNlbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBvbkV4cG9ydEV4Y2VsKHRoYXQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVsb2FkRGF0YSh0aGF0KSB7CiAgICAgICAgICAgICAgICB0aGF0LmxvYWRVT01QcmljZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBvbkV4cG9ydEV4Y2VsKHRoYXQpIHsKICAgICAgICAgICAgICAgIHRoYXQuZXhwb3J0VG9FeGNlbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBleHBvcnRUb0V4Y2VsKCkgewogICAgICAgICAgICBjb25zdCBncmlkID0gJCgiI2dyaWRTZXJ2aWNlUHJpY2UiKS5kYXRhKCJrZW5kb0dyaWQiKQogICAgICAgICAgICBncmlkLnNhdmVBc0V4Y2VsKCkKICAgICAgICB9LAogICAgICAgIHRvb2xiYXJUZW1wbGF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUh0bWwgPQogICAgICAgICAgICAgICAgJzxzcGFuPicgKwogICAgICAgICAgICAgICAgJzxhIGNsYXNzPSJrLXBhZ2VyLWV4Y2VsIGstbGluayBrLWJ1dHRvbiBleGNlbCIgdGl0bGU9IkV4cG9ydCB0byBFeGNlbCI+IDxzcGFuIGNsYXNzPSJrLWljb24gay1pLWV4Y2VsIj48L3NwYW4+RXhwb3J0IHRvIGV4Y2VsIDwvYT4nICsKICAgICAgICAgICAgICAgICc8L3NwYW4+PHNwYW4+Jm5ic3A7Jm5ic3A7PC9zcGFuPicgKwogICAgICAgICAgICAgICAgJzxzcGFuIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6NXB4Ij4nICsKICAgICAgICAgICAgICAgICc8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9ImstcGFnZXItcmVmcmVzaCBrLWxpbmsgay1idXR0b24gcmVsb2FkIiB0aXRsZT0iUmVmcmVzaCI+PHNwYW4gY2xhc3M9ImstaWNvbiBrLWktcmVsb2FkIj48L3NwYW4+IFJlZnJlc2ggPC9hPicgKwogICAgICAgICAgICAgICAgJzwvc3Bhbj4nCgogICAgICAgICAgICByZXR1cm4ga2VuZG8udGVtcGxhdGUodGVtcGxhdGVIdG1sKQogICAgICAgIH0sCiAgICAgICAgY3VycmVuY3koZGF0YUl0ZW0pIHsKICAgICAgICAgICAgY29uc3QgcHJpY2VMZXZlbCA9IGRhdGFJdGVtLnByaWNlTGV2ZWwgfHwge30KICAgICAgICAgICAgY29uc3QgY3VycmVuY3kgPSBwcmljZUxldmVsLmN1cnJlbmN5IHx8IHt9CiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBjdXJyZW5jeS5jb2RlIHx8ICcnCiAgICAgICAgICAgIHJldHVybiBjb2RlCiAgICAgICAgfSwKICAgICAgICBhdXRvUHJpY2UoKSB7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy51b21QcmljZS52YWx1ZSB8fCAwOwogICAgICAgICAgICBsZXQgYmFzZSA9IHRoaXMudW9tUHJpY2UuYmFzZSB8fCAwOwogICAgICAgICAgICBsZXQgcHJpY2VfID0gKHZhbHVlICogYmFzZSkgLyAxMDA7CiAgICAgICAgICAgIGlmIChiYXNlID4gMTAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVvbVByaWNlLmJhc2UgPSAxMDA7CiAgICAgICAgICAgICAgICBiYXNlID0gMTAwOwogICAgICAgICAgICAgICAgcHJpY2VfID0gKHZhbHVlICogYmFzZSkgLyAxMDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlXzsKICAgICAgICAgICAgdGhpcy51b21QcmljZS5wcmljZSA9IHByaWNlXzsKICAgICAgICAgICAgcmV0dXJuIHByaWNlXzsKICAgICAgICB9LAogICAgICAgIHVvbShkYXRhSXRlbSkgewogICAgICAgICAgICBpZiAoZGF0YUl0ZW0uaGFzT3duUHJvcGVydHkoInVvbSIpKSB7CiAgICAgICAgICAgICAgICBpZiAoZGF0YUl0ZW0udW9tLmhhc093blByb3BlcnR5KCJ0b1VPTSIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFJdGVtLnVvbS50b1VPTS5uYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBkYXRhU291cmNlQ2hhbmdlZChlKSB7CiAgICAgICAgICAgIGlmIChlLmZpZWxkKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YVJvdyA9IGUuaXRlbXNbMF07CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuZmllbGQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJsYXN0VW5pdCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluTnVtID0gZGF0YVJvdy5sYXN0VW5pdDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIExhc3RVbml0RWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLnZvbHVtZURTLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgICAgIGlmIChkcy5hdCgwKS51aWQgPT09IG9wdGlvbnMubW9kZWwudWlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLm1pbk51bSA9IC0xOwogICAgICAgICAgICB9CgogICAgICAgICAgICBrZW5kbwogICAgICAgICAgICAgICAgLmpRdWVyeSgnPGlucHV0IHJlcXVpcmVkIG5hbWU9IicgKyBvcHRpb25zLmZpZWxkICsgJyIvPicpCiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgICAgICAgICAgLmtlbmRvTnVtZXJpY1RleHRCb3goe21pbjogdGhpcy5taW5OdW0gKyAxfSk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVSb3coZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGNvbnN0IGdyaWQgPSBrZW5kby5qUXVlcnkoIiNncmlkVm9sdW1lRFMiKS5kYXRhKCJrZW5kb0dyaWQiKSwKICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UgPSBncmlkLmRhdGFTb3VyY2UsCiAgICAgICAgICAgICAgICBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwogICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS50b3RhbCgpID4gMSkgewogICAgICAgICAgICAgICAgZGF0YVNvdXJjZS5yZW1vdmUoZGF0YUl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhZGRSb3coKSB7CiAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMudm9sdW1lRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKICAgICAgICAgICAgaWYgKHRvdGFsID09PSAwKSB7CiAgICAgICAgICAgICAgICBkcy5pbnNlcnQodG90YWwsIHsKICAgICAgICAgICAgICAgICAgICBsYXN0VW5pdDogMCwKICAgICAgICAgICAgICAgICAgICBwcmljZTogIiIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRzLmluc2VydCh0b3RhbCwgewogICAgICAgICAgICAgICAgICAgIGxhc3RVbml0OiAiIiwKICAgICAgICAgICAgICAgICAgICBwcmljZTogIiIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGVhZGVyVGVtcGxhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiAnPGlucHV0IHR5cGU9ImNoZWNrYm94Ii8+IGlzIE1pbic7CiAgICAgICAgfSwKICAgICAgICBkeW5hbWljSGVhZGVyVGVtcGxhdGUoKSB7CiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gInByaWNlICgiICsgdGhpcy5zeW1ib2wgKyAiKSI7CiAgICAgICAgICAgIGtlbmRvLmpRdWVyeSgiI2dyaWRWb2x1bWVEUyB0aFtkYXRhLWZpZWxkPXByaWNlXSIpLmh0bWwodGl0bGUpOwogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGl0bGUpOwogICAgICAgIH0sCiAgICAgICAgaGVhZGVyUHJpY2VUZW1wbGF0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICJwcmljZSAoIiArIHRoaXMuc3ltYm9sICsgIikiOwogICAgICAgIH0sCiAgICAgICAgc2VsZWN0VGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgaWYgKGRhdGFJdGVtLmlzTWluKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJzxpbnB1dCBjaGVja2VkIHR5cGU9ImNoZWNrYm94Ii8+JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGlucHV0IHR5cGU9ImNoZWNrYm94Ii8+JzsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcm93VGl0bGUoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMudm9sdW1lRFMua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgaWYgKGRzLmF0KDApLnVpZCA9PT0gb3B0aW9ucy5tb2RlbC51aWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBrZW5kbwogICAgICAgICAgICAgICAgICAgIC5qUXVlcnkoJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25EYXRlQ2hhbmdlKCkgewogICAgICAgICAgICB0aGlzLm1lbnVEYXRlID0gZmFsc2U7CiAgICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnVvbVByaWNlLmFwcGxpZWREYXRlKQogICAgICAgIH0sCiAgICAgICAgY2xvc2UoKSB7CiAgICAgICAgICAgIC8vIHdpbmRvdy5oaXN0b3J5LmdvKC0xKQogICAgICAgICAgICB0aGlzLmRpYWxvZ20yID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBuZXdDbGljaygpIHsKICAgICAgICAgICAgdGhpcy51b21QcmljZSA9IHt9OwogICAgICAgICAgICB0aGlzLnVvbVByaWNlLmJhc2UgPSAxMDA7CiAgICAgICAgICAgIHRoaXMucHJpY2UgPSAwOwogICAgICAgICAgICB0aGlzLnVvbVByaWNlLnByaWNlID0gMTsKICAgICAgICAgICAgdGhpcy5tVU9NID0ge307CiAgICAgICAgICAgIHRoaXMudm9sdW1lcyA9IFtdOwogICAgICAgICAgICB0aGlzLmRhdGEgPSB7YW1vdW50OiAiIiwgdHlwZTogIiJ9OwogICAgICAgICAgICB0aGlzLnVvbVByaWNlLmFwcGxpZWREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7CiAgICAgICAgICAgIHRoaXMubVByaWNlTGV2ZWwgPSB7fTsKICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDb252ZXJzaW9uTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkQ29udmVyc2lvbkxpc3QoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZS5oYXNPd25Qcm9wZXJ0eSgidW9tIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVvbVNlcnZpY2VDb252ZXJzaW9uSGFuZGxlci5nZXQodGhpcy5zZXJ2aWNlSWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbiA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRVT01QcmljZSgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXJ2aWNlLmhhc093blByb3BlcnR5KCJ1b20iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1b21TZXJ2aWNlUHJpY2VIYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldCh0aGlzLnNlcnZpY2VJZCwgIj90eXBlPVNlcnZpY2UiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaWNlTGlzdCA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkUHJpY2VMZXZlbCgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy5wcm9kdWN0KQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXJ2aWNlLmhhc093blByb3BlcnR5KCJ1b20iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyRmlsdGVyID0gIj8mbmF0dXJlPSIgKyBOQVRVUkU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUxldmVsSGFuZGxlci5nZXQoc3RyRmlsdGVyKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaWNlTGV2ZWwgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnb0VkaXQoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGxldCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZFNlcnZpY2VQcmljZSIpLmRhdGEoImtlbmRvR3JpZCIpOwogICAgICAgICAgICBsZXQgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKTsKICAgICAgICAgICAgdGhpcy51b21QcmljZSA9IG5ldyBVT01TZXJ2aWNlUHJpY2UoZGF0YUl0ZW0pOwogICAgICAgICAgICB0aGlzLnByaWNlID0gZGF0YUl0ZW0ucHJpY2U7CiAgICAgICAgICAgIC8vIHRoaXMudHlwZSA9IGRhdGFJdGVtLnByaWNlVHlwZQogICAgICAgICAgICAvLyBpZiAoZGF0YUl0ZW0uZGF0YS5oYXNPd25Qcm9wZXJ0eSgncHJpY2UnKSkgewogICAgICAgICAgICAvLyAgICAgdGhpcy5kYXRhID0gZGF0YUl0ZW0uZGF0YQogICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAvLyAgICAgdGhpcy52b2x1bWVzID0gZGF0YUl0ZW0uZGF0YQogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIC8vIHRoaXMubVByaWNlTGV2ZWwgPSBkYXRhSXRlbS5wcmljZUxldmVsCiAgICAgICAgICAgIHRoaXMuZGlhbG9nbTIgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25TYXZlQ2xvc2UoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy50eXBlLmlkICE9PSAxKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKHRoaXMuJHJlZnMudm9sdW1lRFMgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLnZvbHVtZURTLmtlbmRvV2lkZ2V0KCkKICAgICAgICAgICAgICAgIC8vICAgICAgICAgbGV0IGRhdGFSb3cgPSBkcy5kYXRhKCkKICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKGRhdGFSb3cubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YVJvdwogICAgICAgICAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMudW9tUHJpY2UucHJpY2UgPSAwCiAgICAgICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuZGF0YSA9IHt9CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICBjb25zdCB1b20gPSB0aGlzLnVvbVByaWNlLnVvbSB8fCB7fTsKICAgICAgICAgICAgICAgIGNvbnN0IHVvbUlkID0gdW9tLmlkIHx8ICIiOwogICAgICAgICAgICAgICAgaWYgKHVvbUlkID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJ1b21fcmVxdWlyZWQiKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgcHJpY2VMZXZlbCA9IHRoaXMudW9tUHJpY2UucHJpY2VMZXZlbCB8fCB7fTsKICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlTGV2ZWxJZCA9IHByaWNlTGV2ZWwuaWQgfHwgIiI7CiAgICAgICAgICAgICAgICBpZiAocHJpY2VMZXZlbElkID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJwcmljZV9sZXZlbF9yZXF1aXJlZCIpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudW9tUHJpY2UudmFsdWUgfHwgMDsKICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHZhbHVlKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJwcmljZV9tdXN0X2JlX2dyZWF0ZXJfdGhhbl96ZXJvIikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2UgPSB0aGlzLnVvbVByaWNlLmJhc2UgfHwgMDsKICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhiYXNlLCAiYmFzZSIpOwogICAgICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQoYmFzZSkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKGkxOG4udCgiYmFzZV9tdXN0X2JlX2dyZWF0ZXJfdGhhbl96ZXJvIikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1b21JZCAhPT0gIiIgJiYgcHJpY2VMZXZlbElkICE9PSAiIiAmJiB2YWx1ZSA+IDAgJiYgYmFzZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZV8gPSBuZXcgU2VydmljZUl0ZW0odGhpcy5zZXJ2aWNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmF0VGF4ID0gdW9tLnZhdFRheCB8fCB7fQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwdXJjaGFzZVRheCA9IHVvbS5wdXJjaGFzZVRheCB8fCB7fQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVjaWZpY1RheCA9IHVvbS5zcGVjaWZpY1RheCB8fCB7fQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdGhlclRheCA9IHVvbS5vdGhlclRheCB8fCB7fQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwdWJsaWNMaWdodGluZ1RheCA9IHVvbS5wdWJsaWNMaWdodGluZ1RheCB8fCB7fQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnVvbVByaWNlLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlkOiB0aGlzLnNlcnZpY2VJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVvbTogbmV3IFVPTUNvbnZlcnNpb24odGhpcy51b21QcmljZS51b20pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmF0VGF4OiB2YXRUYXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZVRheDogcHVyY2hhc2VUYXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWZpY1RheDogc3BlY2lmaWNUYXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdGhlclRheDogb3RoZXJUYXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNMaWdodGluZ1RheDogcHVibGljTGlnaHRpbmdUYXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUxldmVsOiBuZXcgUHJpY2VMZXZlbE1vZGVsKHRoaXMudW9tUHJpY2UucHJpY2VMZXZlbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiU2VydmljZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZVR5cGU6IHRoaXMudHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnByaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogdGhpcy51b21QcmljZS5iYXNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudW9tUHJpY2UudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBzZXJ2aWNlXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWREYXRlOiB0aGlzLnVvbVByaWNlLmFwcGxpZWREYXRlLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdW9tU2VydmljZVByaWNlSGFuZGxlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZSh0aGlzLnNlcnZpY2VJZCwgZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCByZXMgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgaW5kZXggPSB0aGlzLnByaWNlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmV0dXJuIChyZXMuaWQgPT09IGl0ZW0uaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBpZiAodGhpcy5wcmljZUxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnByaWNlTGlzdCA9IFtyZXNdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMucHJpY2VMaXN0LnB1c2gocmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZFByaWNlIikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZ3JpZC5yZWZyZXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMucHJpY2VMaXN0LnNwbGljZShpbmRleCwgMSwgcmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygiU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFVPTVByaWNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkUHJpY2VMZXZlbCgpOwogICAgICAgIGF3YWl0IHRoaXMubG9hZENvbnZlcnNpb25MaXN0KCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkVU9NUHJpY2UoKTsKICAgICAgICBhd2FpdCB0aGlzLmluaXRUb29sYmFyKHRoaXMpOwogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgc2VydmljZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDb252ZXJzaW9uTGlzdCgpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkVU9NUHJpY2UoKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZFByaWNlTGV2ZWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBjb2RlKCkgewogICAgICAgICAgICBjb25zdCBwcmljZUxldmVsID0gdGhpcy51b21QcmljZS5wcmljZUxldmVsIHx8IHt9OwogICAgICAgICAgICBpZiAocHJpY2VMZXZlbCkgewogICAgICAgICAgICAgICAgY29uc3QgY3VycmVuY3kgPSBwcmljZUxldmVsLmN1cnJlbmN5IHx8IHt9OwogICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGN1cnJlbmN5LmNvZGUgfHwgIiI7CiAgICAgICAgICAgICAgICBpZiAoY29kZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiKCIgKyBjb2RlICsgIikiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFtb3VudFR5cGUoKSB7CiAgICAgICAgICAgIGNvbnN0IHByaWNlTGV2ZWwgPSB0aGlzLnVvbVByaWNlLnByaWNlTGV2ZWwgfHwge307CiAgICAgICAgICAgIGlmIChwcmljZUxldmVsKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW5jeSA9IHByaWNlTGV2ZWwuY3VycmVuY3kgfHwge307CiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gcHJpY2VMZXZlbC50eXBlIHx8IHt9OwogICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHR5cGUubmFtZSB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBjdXJyZW5jeS5jb2RlIHx8ICIiOwogICAgICAgICAgICAgICAgbGV0IHN0clZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gIlBlcmNlbnRhZ2UgQmFzZSIpIHsKICAgICAgICAgICAgICAgICAgICBzdHJWYWx1ZSA9ICIlIjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gIlN0YW5kYXJkIikgewogICAgICAgICAgICAgICAgICAgIHN0clZhbHVlID0gY29kZSB8fCAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBzdHJWYWx1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudW9tUHJpY2UuYXBwbGllZERhdGUKICAgICAgICAgICAgICAgID8ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhpcy51b21QcmljZS5hcHBsaWVkRGF0ZSksIHRoaXMuZGF0ZUZvcm1hdCkKICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgfSwKICAgICAgICBiYXNlVU9NTmFtZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VydmljZS5oYXNPd25Qcm9wZXJ0eSgidW9tIikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLnVvbS5uYW1lOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGJhc2VVT00oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnNlcnZpY2UpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcnZpY2UuaGFzT3duUHJvcGVydHkoInVvbSIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS51b207CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2VydmljZUlkKCkgewogICAgICAgICAgICBpZiAodGhpcy5zZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXJ2aWNlLmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5pZDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["Price.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+TA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Price.vue","sourceRoot":"src/views/services_projects/items/services_items","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <h2 class=\"float-left font_18\">{{ $t(\"service_price\") }}</h2>\n            <v-dialog v-model=\"dialogm2\" max-width=\"600px\">\n                <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                        color=\"primary\"\n                        class=\"btn_create_new float-right \"\n                        v-on=\"on\"\n                        @click=\"newClick\"\n                    >\n                        {{ $t(\"new_price\") }}\n                    </v-btn>\n                </template>\n                <v-card>\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"service_price\") }}</v-card-title>\n                        <v-icon @click=\"(dialogm2 = false), close\">close</v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_content\">\n                        <v-row>\n                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                <label>{{ $t(\"applied_date\") }}</label>\n                                <app-datepicker\n                                    :initialDate=\"uomPrice.appliedDate\"\n                                    @emitDate=\"uomPrice.appliedDate = $event\"\n                                />\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                <label class=\"label\">{{ $t(\"uom\") }}</label>\n                                <v-select\n                                    class=\"mt-1\"\n                                    tage=\"UOM\"\n                                    v-model=\"uomPrice.uom\"\n                                    :items=\"uomConversion\"\n                                    item-value=\"id\"\n                                    item-text=\"code\"\n                                    return-object\n                                    outlined\n                                />\n                            </v-col>\n                            <!--                            <v-col sm=\"12\" cols=\"12\" class=\"py-0\"><p class=\"font_24 mb-0\">{{ $t('price_model') }}</p></v-col>-->\n                            <v-col sm=\"6\" cols=\"12\">\n                                <label class=\"label\">{{ $t(\"price_level\") }}</label>\n                                <v-select\n                                    class=\"mt-1\"\n                                    tage=\"Price Level\"\n                                    v-model=\"uomPrice.priceLevel\"\n                                    :items=\"priceLevel\"\n                                    :placeholder=\"$t('price_level')\"\n                                    item-value=\"id\"\n                                    @change=\"autoPrice\"\n                                    item-text=\"name\"\n                                    return-object\n                                    outlined\n                                />\n                            </v-col>\n                            <v-col sm=\"4\" cols=\"12\">\n                                <label>{{ $t(\"price\") }} {{ code }}</label>\n                                <v-row>\n                                    <v-col sm=\"4\" cols=\"3\" class=\"mt-1 pt-0 pr-0\">\n                                        <div class=\"code_text text-bold\">{{ amountType }}</div>\n                                    </v-col>\n                                    <v-col sm=\"8\" cols=\"9\" class=\"mt-1 py-0 pl-0 pr-1\">\n                                        <v-text-field\n                                            class=\"custom-border\"\n                                            outlined\n                                            type=\"number\"\n                                            tage=\"Price\"\n                                            @change=\"autoPrice\"\n                                            v-model=\"uomPrice.value\"\n                                        />\n                                    </v-col>\n                                </v-row>\n                                <v-text-field\n                                    outlined\n                                    :disabled=\"true\"\n                                    type=\"number\"\n                                    tage=\"Price\"\n                                    v-model=\"price\"\n                                />\n                            </v-col>\n                            <v-col sm=\"2\" cols=\"12\" class=\"pl-1\">\n                                <label>{{ $t(\"base\") }} (%)</label>\n\n                                <v-text-field\n                                    class=\"mt-1\"\n                                    outlined\n                                    type=\"number\"\n                                    min=\"1\"\n                                    @change=\"autoPrice\"\n                                    max=\"100\"\n                                    tage=\"Base\"\n                                    v-model=\"uomPrice.base\"\n                                />\n                            </v-col>\n                            <!--                            <v-col sm=\"6\" cols=\"12\">-->\n                            <!--                                <label class=\"label\">{{ $t('type') }}</label>-->\n                            <!--                                <v-select :items=\"types\" item-text=\"name\" item-value=\"id\" v-model=\"type\" class=\"mt-1\"-->\n                            <!--                                          :placeholder=\"$t('type')\"-->\n                            <!--                                          :disabled=\"mPriceLevel.id === undefined\"-->\n                            <!--                                          return-object-->\n                            <!--                                          outlined/>-->\n                            <!--                            </v-col>-->\n                            <v-col v-if=\"type.id === 3\" sm=\"12\" cols=\"12\" class=\"py-0\">\n                                <label>{{ $t(\"price\") }}</label>\n                            </v-col>\n                            <v-col v-if=\"type.id === 3\" sm=\"4\" cols=\"4\" class=\"pb-1 py-0\">\n                                <v-select\n                                    v-model=\"data.type\"\n                                    return-object\n                                    outlined\n                                    item-value=\"id\"\n                                    item-text=\"name\"\n                                    :items=\"modes\"\n                                    class=\"\"\n                                />\n                            </v-col>\n                            <v-col v-if=\"type.id === 3\" sm=\"6\" cols=\"12\" class=\"py-0\">\n                                <v-text-field\n                                    class=\"\"\n                                    v-if=\"type.id === 3\"\n                                    outlined\n                                    tage=\"Price\"\n                                    v-model=\"data.amount\"\n                                    clearable\n                                />\n                            </v-col>\n                            <v-col v-if=\"type.id === 2\" sm=\"12\" cols=\"12\" class=\"py-0\">\n                                <kendo-datasource\n                                    ref=\"volumeDS\"\n                                    :change=\"dataSourceChanged\"\n                                    :data=\"volumes\"\n                                />\n                                <kendo-grid\n                                    id=\"gridVolumeDS\"\n                                    class=\"grid-function\"\n                                    :data-source-ref=\"'volumeDS'\"\n                                    :editable=\"true\"\n                                    :scrollable-virtual=\"true\"\n                                >\n                                    <kendo-grid-column\n                                        :field=\"'isMin'\"\n                                        :title=\"''\"\n                                        :editor=\"rowTitle\"\n                                        :width=\"80\"\n                                        :column-menu=\"false\"\n                                        :headerTemplate=\"headerTemplate\"\n                                        :headerAttributes=\"{\n                      style: 'background-color: #EDF1F5;',\n                      class: 'text-center',\n                    }\"\n                                        :attributes=\"{ style: 'text-align: center' }\"\n                                    />\n                                    <!--                                    <kendo-grid-column-->\n                                    <!--                                        :field=\"'firstUnit'\"-->\n                                    <!--                                        :title=\"$t('first_unit')\"-->\n                                    <!--                                        :width=\"100\"-->\n                                    <!--                                        :template=\"'<span>#=firstUnit#</span>'\"-->\n                                    <!--                                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>-->\n                                    <kendo-grid-column\n                                        :field=\"'lastUnit'\"\n                                        :title=\"$t('last_unit')\"\n                                        :width=\"100\"\n                                        :editor=\"LastUnitEditor\"\n                                        :template=\"'<span>#=lastUnit#</span>'\"\n                                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                    />\n                                    <kendo-grid-column\n                                        :field=\"'price'\"\n                                        :title=\"$t('price')\"\n                                        :width=\"100\"\n                                        :template=\"'<span>#=price#</span>'\"\n                                        :headerTemplate=\"headerPriceTemplate\"\n                                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                                    />\n                                    <kendo-grid-column\n                                        :field=\"''\"\n                                        :title=\"$t('action')\"\n                                        :width=\"70\"\n                                        :command=\"[\n                      {\n                        iconClass: 'k-icon k-i-trash',\n                        text: 'Delete',\n                        click: removeRow,\n                      },\n                    ]\"\n                                        :headerAttributes=\"{\n                      style: 'text-align: right; background-color: #EDF1F5',\n                    }\"\n                                    />\n                                </kendo-grid>\n                                <v-btn\n                                    @click=\"addRow\"\n                                    class=\"float-left btn_plus mt-2 rounded-0\"\n                                >\n                                    <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                                </v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                    <v-card-actions class=\"modal_footer\">\n                        <v-row>\n                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-left\">\n                                <v-btn\n                                    color=\"black\"\n                                    outlined\n                                    class=\" text-capitalize  black--text float-left\"\n                                    @click=\"dialogm2 = false\"\n                                >{{ $t(\"cancel\") }}\n                                </v-btn>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-right\">\n                                <v-btn\n                                    color=\"primary\"\n                                    class=\"px-3  white--text text-capitalize\"\n                                    @click=\"onSaveClose\"\n                                >\n                                    {{ $t(\"save_close\") }}\n                                </v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </v-col>\n        <v-col sm=\"12\" clos=\"12\" class=\"pt-0\">\n            <div>\n                <LoadingMe\n                    :isLoading=\"showLoading\"\n                    :fullPage=\"false\"\n                    type=\"loading\"\n                    :myLoading=\"true\"\n                />\n            </div>\n            <kendo-datasource\n                ref=\"servicePriceDS\"\n                :data=\"priceList\"\n                :schema=\"gridSchema\"\n            />\n            <kendo-grid\n                id=\"gridServicePrice\"\n                class=\"grid-function\"\n                :data-source-ref=\"'servicePriceDS'\"\n                :style=\"{ width: '100%' }\"\n                :noRecords=\"true\"\n                :toolbar=\"toolbarTemplate\"\n                :excel-export=\"excelExport\"\n                :excel-file-name=\"'ServicePriceConversionList.xlsx'\"\n                :excel-filterable=\"true\"\n                :scrollable-virtual=\"true\">\n                <kendo-grid-column\n                    :field=\"'uom'\"\n                    :title=\"$t('uom')\"\n                    :width=\"100\"\n                    :template=\"uom\"\n                    :groupHeaderColumnTemplate=\"'#=value#'\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                    :field=\"'uom'\"\n                    :title=\"$t('code')\"\n                    :width=\"120\"\n                    :template=\"'<span>#=uom.code#</span>'\"\n                    :groupHeaderColumnTemplate=\"'#=value#'\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                <kendo-grid-column\n                    :field=\"'priceLevel'\"\n                    :title=\"$t('price_level')\"\n                    :width=\"150\"\n                    :template=\"'<span>#=priceLevel.name#</span>'\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                    :field=\"'priceLevel.currency'\"\n                    :title=\"$t('currency')\"\n                    :width=\"120\"\n                    :template=\"currency\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                <!--                <kendo-grid-column-->\n                <!--                    :field=\"'types'\"-->\n                <!--                    :title=\"$t('price_model')\"-->\n                <!--                    :width=\"90\"-->\n                <!--                    :template=\"'<span>#=types.name#</span>'\"-->\n                <!--                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>-->\n                <kendo-grid-column\n                    :field=\"'price'\"\n                    :title=\"$t('price')\"\n                    :template=\"'<span>#=price#</span>'\"\n                    :width=\"120\"\n                    :attributes=\"{ style: 'text-align: right; ' }\"\n                    :headerAttributes=\"{\n            style: 'text-align: left; background-color: #EDF1F5',\n          }\"\n                />\n                <kendo-grid-column\n                    :field=\"'appliedDate'\"\n                    :title=\"$t('applied_date')\"\n                    :template=\"'<span>#=appliedDate#</span>'\"\n                    :width=\"150\"\n                    :headerAttributes=\"{\n            style: 'text-align: left; background-color: #EDF1F5',\n          }\"\n                />\n                <kendo-grid-column\n                    :field=\"''\"\n                    :title=\"$t(' ')\"\n                    :width=\"60\"\n                    :command=\"[{ iconClass: 'k-icon k-i-edit', text: ' ', click: goEdit }]\"\n                    :headerAttributes=\"{\n            style: 'text-align: left; background-color: #EDF1F5',\n          }\"\n                />\n            </kendo-grid>\n        </v-col>\n    </v-row>\n</template>\n<script>\nimport UOMServicePrice from \"@/scripts/model/UOMServicePrice\";\nimport kendo from \"@progress/kendo-ui\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport ServiceItem from \"@/scripts/model/ServiceItem\";\nimport PriceLevelModel from \"@/scripts/priceLevel/PriceLevel\";\nimport UOMConversion from \"@/scripts/model/UOMConversion\";\nimport {i18n} from \"@/i18n\";\n\nconst uomServiceConversionHandler = require(\"@/scripts/uomServiceConversionHandler\");\nconst priceLevelHandler = require(\"@/scripts/priceLevelHandler\");\nconst uomServicePriceHandler = require(\"@/scripts/uomServicePriceHandler\");\nconst $ = require(\"jquery\");\nconst uomServicePriceModel = new UOMServicePrice({});\n\nconst NATURE = \"sale\";\nexport default {\n    props: {\n        service: {},\n    },\n    components: {\n        \"app-datepicker\": DatePickerComponent,\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    data: () => ({\n        dialogm2: false,\n        showLoading: false,\n        uomConversion: [],\n        priceList: [],\n        priceLevel: [],\n        mPriceLevel: [],\n        mUOM: {},\n        menuDate: false,\n        appliedDate: new Date().toISOString().substr(0, 10),\n        uomPrice: uomServicePriceModel,\n        gridSchema: {\n            model: {\n                id: \"id\",\n            },\n        },\n        dateFormat: \"dd-MM-yyyy\",\n        // {id: 2, name: 'Volume Pricing'},\n        types: [\n            {id: 1, name: \"Standard\"},\n            {id: 3, name: \"Performance Based\"},\n        ],\n        type: \"Standard\",\n        modes: [\n            {id: 1, name: \"%\"},\n            {id: 2, name: \"Amount\"},\n        ],\n        data: {amount: \"\", type: \"\"},\n        volumes: [],\n        minNum: 0,\n        price: 0,\n    }),\n    methods: {\n        excelExport: function (e) {\n            // const pivot = this.$refs.gridTransactionDS.kendoWidget()\n            // pivot.saveAsExcel()\n            window.console.log(e.data);\n        },\n        initToolbar(that) {\n            let grid = $(\"#gridServicePrice\").data(\"kendoGrid\");\n            let gridElement = grid.element;\n            let toolbarElement = gridElement.find(\".k-grid-toolbar\");\n            toolbarElement.on(\"click\", \".k-pager-refresh\", function (e) {\n                e.preventDefault();\n                onReloadData(that);\n            });\n            toolbarElement.on(\"click\", \".k-pager-excel\", function (e) {\n                e.preventDefault();\n                onExportExcel(that);\n            });\n\n            function onReloadData(that) {\n                that.loadUOMPrice();\n            }\n\n            function onExportExcel(that) {\n                that.exportToExcel();\n            }\n        },\n        exportToExcel() {\n            const grid = $(\"#gridServicePrice\").data(\"kendoGrid\")\n            grid.saveAsExcel()\n        },\n        toolbarTemplate: function () {\n            const templateHtml =\n                '<span>' +\n                '<a class=\"k-pager-excel k-link k-button excel\" title=\"Export to Excel\"> <span class=\"k-icon k-i-excel\"></span>Export to excel </a>' +\n                '</span><span>&nbsp;&nbsp;</span>' +\n                '<span style=\"position:absolute; right:5px\">' +\n                '</span>' +\n                '<span>' +\n                '<a class=\"k-pager-refresh k-link k-button reload\" title=\"Refresh\"><span class=\"k-icon k-i-reload\"></span> Refresh </a>' +\n                '</span>'\n\n            return kendo.template(templateHtml)\n        },\n        currency(dataItem) {\n            const priceLevel = dataItem.priceLevel || {}\n            const currency = priceLevel.currency || {}\n            const code = currency.code || ''\n            return code\n        },\n        autoPrice() {\n            const value = this.uomPrice.value || 0;\n            let base = this.uomPrice.base || 0;\n            let price_ = (value * base) / 100;\n            if (base > 100) {\n                this.uomPrice.base = 100;\n                base = 100;\n                price_ = (value * base) / 100;\n            }\n            this.price = price_;\n            this.uomPrice.price = price_;\n            return price_;\n        },\n        uom(dataItem) {\n            if (dataItem.hasOwnProperty(\"uom\")) {\n                if (dataItem.uom.hasOwnProperty(\"toUOM\")) {\n                    return dataItem.uom.toUOM.name;\n                }\n            } else {\n                return \"\";\n            }\n        },\n        dataSourceChanged(e) {\n            if (e.field) {\n                let dataRow = e.items[0];\n                switch (e.field) {\n                    case \"lastUnit\":\n                        this.minNum = dataRow.lastUnit;\n                        break;\n                    default:\n                        break;\n                }\n            }\n        },\n        LastUnitEditor(container, options) {\n            let ds = this.$refs.volumeDS.kendoWidget();\n            if (ds.at(0).uid === options.model.uid) {\n                this.minNum = -1;\n            }\n\n            kendo\n                .jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoNumericTextBox({min: this.minNum + 1});\n        },\n        removeRow(e) {\n            e.preventDefault();\n            const grid = kendo.jQuery(\"#gridVolumeDS\").data(\"kendoGrid\"),\n                dataSource = grid.dataSource,\n                dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            if (dataSource.total() > 1) {\n                dataSource.remove(dataItem);\n            }\n        },\n        addRow() {\n            let ds = this.$refs.volumeDS.kendoWidget(),\n                total = ds.total();\n            if (total === 0) {\n                ds.insert(total, {\n                    lastUnit: 0,\n                    price: \"\",\n                });\n            } else {\n                ds.insert(total, {\n                    lastUnit: \"\",\n                    price: \"\",\n                });\n            }\n        },\n        headerTemplate() {\n            return '<input type=\"checkbox\"/> is Min';\n        },\n        dynamicHeaderTemplate() {\n            const title = \"price (\" + this.symbol + \")\";\n            kendo.jQuery(\"#gridVolumeDS th[data-field=price]\").html(title);\n            window.console.log(title);\n        },\n        headerPriceTemplate() {\n            return \"price (\" + this.symbol + \")\";\n        },\n        selectTemplate(dataItem) {\n            if (dataItem.isMin) {\n                return '<input checked type=\"checkbox\"/>';\n            } else {\n                return '<input type=\"checkbox\"/>';\n            }\n        },\n        rowTitle(container, options) {\n            let ds = this.$refs.volumeDS.kendoWidget();\n            if (ds.at(0).uid === options.model.uid) {\n                return kendo\n                    .jQuery('<input type=\"checkbox\" name=\"' + options.field + '\"/>')\n                    .appendTo(container);\n            } else {\n                return \"\";\n            }\n        },\n        onDateChange() {\n            this.menuDate = false;\n            // window.console.log(this.uomPrice.appliedDate)\n        },\n        close() {\n            // window.history.go(-1)\n            this.dialogm2 = false;\n        },\n        newClick() {\n            this.uomPrice = {};\n            this.uomPrice.base = 100;\n            this.price = 0;\n            this.uomPrice.price = 1;\n            this.mUOM = {};\n            this.volumes = [];\n            this.data = {amount: \"\", type: \"\"};\n            this.uomPrice.appliedDate = new Date().toISOString().substr(0, 10);\n            this.mPriceLevel = {};\n            if (this.service !== undefined) {\n                this.loadConversionList();\n            }\n        },\n        async loadConversionList() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.service) {\n                        if (this.service.hasOwnProperty(\"uom\")) {\n                            uomServiceConversionHandler.get(this.serviceId).then((res) => {\n                                this.uomConversion = res;\n                            });\n                        }\n                    }\n                }, 10);\n            });\n        },\n        async loadUOMPrice() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.service) {\n                        if (this.service.hasOwnProperty(\"uom\")) {\n                            this.showLoading = true;\n                            uomServicePriceHandler\n                                .get(this.serviceId, \"?type=Service\")\n                                .then((res) => {\n                                    this.showLoading = false;\n                                    this.priceList = res;\n                                });\n                        }\n                    }\n                }, 10);\n            });\n        },\n        async loadPriceLevel() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.service) {\n                        // window.console.log(this.product)\n                        if (this.service.hasOwnProperty(\"uom\")) {\n                            const strFilter = \"?&nature=\" + NATURE;\n                            priceLevelHandler.get(strFilter).then((res) => {\n                                this.priceLevel = res;\n                            });\n                        }\n                    }\n                }, 10);\n            });\n        },\n        async goEdit(e) {\n            e.preventDefault();\n            let grid = kendo.jQuery(\"#gridServicePrice\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            this.uomPrice = new UOMServicePrice(dataItem);\n            this.price = dataItem.price;\n            // this.type = dataItem.priceType\n            // if (dataItem.data.hasOwnProperty('price')) {\n            //     this.data = dataItem.data\n            // } else {\n            //     this.volumes = dataItem.data\n            // }\n            // this.mPriceLevel = dataItem.priceLevel\n            this.dialogm2 = true;\n        },\n        async onSaveClose() {\n            new Promise((resolve) => {\n                // if (this.type.id !== 1) {\n                //     if (this.$refs.volumeDS !== undefined) {\n                //         let ds = this.$refs.volumeDS.kendoWidget()\n                //         let dataRow = ds.data()\n                //         if (dataRow.length > 0) {\n                //             this.data = dataRow\n                //         }\n                //     }\n                //     this.uomPrice.price = 0\n                // } else {\n                //     this.data = {}\n                // }\n                const uom = this.uomPrice.uom || {};\n                const uomId = uom.id || \"\";\n                if (uomId === \"\") {\n                    this.$snotify.error(i18n.t(\"uom_required\"));\n                    return;\n                }\n                const priceLevel = this.uomPrice.priceLevel || {};\n                const priceLevelId = priceLevel.id || \"\";\n                if (priceLevelId === \"\") {\n                    this.$snotify.error(i18n.t(\"price_level_required\"));\n                    return;\n                }\n                const value = this.uomPrice.value || 0;\n                if (parseFloat(value) === 0) {\n                    this.$snotify.error(i18n.t(\"price_must_be_greater_than_zero\"));\n                    return;\n                }\n                const base = this.uomPrice.base || 0;\n                window.console.log(base, \"base\");\n                if (parseFloat(base) === 0) {\n                    this.$snotify.error(i18n.t(\"base_must_be_greater_than_zero\"));\n                    return;\n                }\n                if (uomId !== \"\" && priceLevelId !== \"\" && value > 0 && base > 0) {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        const service_ = new ServiceItem(this.service);\n                        const vatTax = uom.vatTax || {}\n                        const purchaseTax = uom.purchaseTax || {}\n                        const specificTax = uom.specificTax || {}\n                        const otherTax = uom.otherTax || {}\n                        const publicLightingTax = uom.publicLightingTax || {}\n                        let data = {\n                            id: this.uomPrice.id,\n                            serviceId: this.serviceId,\n                            uom: new UOMConversion(this.uomPrice.uom),\n                            vatTax: vatTax,\n                            purchaseTax: purchaseTax,\n                            specificTax: specificTax,\n                            otherTax: otherTax,\n                            publicLightingTax: publicLightingTax,\n                            priceLevel: new PriceLevelModel(this.uomPrice.priceLevel),\n                            type: \"Service\",\n                            priceType: this.type,\n                            price: this.price,\n                            base: this.uomPrice.base,\n                            value: this.uomPrice.value,\n                            item: service_,\n                            data: this.data,\n                            appliedDate: this.uomPrice.appliedDate,\n                        };\n                        this.showLoading = true;\n                        uomServicePriceHandler\n                            .create(this.serviceId, data)\n                            .then((response) => {\n                                if (response.data.statusCode === 201) {\n                                    this.showLoading = false;\n                                    // let res = response.data.data\n                                    // const index = this.priceList.findIndex(item => {\n                                    //   return (res.id === item.id)\n                                    // })\n                                    // if (index < 0) {\n                                    //   if (this.priceList.length === 0) {\n                                    //     this.priceList = [res]\n                                    //   } else {\n                                    //     this.priceList.push(res)\n                                    //   }\n                                    //   const grid = kendo.jQuery(\"#gridPrice\").data(\"kendoGrid\");\n                                    //   grid.refresh()\n                                    //   window.console.log(res)\n                                    // } else {\n                                    //   this.priceList.splice(index, 1, res)\n                                    // }\n                                    this.$snotify.success(\"Success\");\n                                    this.close();\n                                    this.loadUOMPrice();\n                                }\n                            })\n                            .catch((e) => {\n                                this.$snotify.error(\"Something went wrong\");\n                                this.errors.push(e);\n                            });\n                    }, 10);\n                }\n            });\n        },\n    },\n    mounted: async function () {\n        await this.loadPriceLevel();\n        await this.loadConversionList();\n        await this.loadUOMPrice();\n        await this.initToolbar(this);\n    },\n    watch: {\n        service() {\n            if (this.service !== undefined) {\n                this.loadConversionList();\n                this.loadUOMPrice();\n                this.loadPriceLevel();\n            }\n        },\n    },\n    computed: {\n        code() {\n            const priceLevel = this.uomPrice.priceLevel || {};\n            if (priceLevel) {\n                const currency = priceLevel.currency || {};\n                const code = currency.code || \"\";\n                if (code) {\n                    return \"(\" + code + \")\";\n                } else {\n                    return \"\";\n                }\n            } else {\n                return \"\";\n            }\n        },\n        amountType() {\n            const priceLevel = this.uomPrice.priceLevel || {};\n            if (priceLevel) {\n                const currency = priceLevel.currency || {};\n                const type = priceLevel.type || {};\n                const name = type.name || \"\";\n                const code = currency.code || \"\";\n                let strValue = \"\";\n                if (name === \"Percentage Base\") {\n                    strValue = \"%\";\n                } else if (name === \"Standard\") {\n                    strValue = code || \"\";\n                }\n                return strValue;\n            } else {\n                return \"\";\n            }\n        },\n        dateFormatted() {\n            return this.uomPrice.appliedDate\n                ? kendo.toString(new Date(this.uomPrice.appliedDate), this.dateFormat)\n                : \"\";\n        },\n        baseUOMName() {\n            if (this.service) {\n                if (this.service.hasOwnProperty(\"uom\")) {\n                    return this.service.uom.name;\n                } else {\n                    return \"\";\n                }\n            } else {\n                return \"\";\n            }\n        },\n        baseUOM() {\n            if (this.service) {\n                if (this.service.hasOwnProperty(\"uom\")) {\n                    return this.service.uom;\n                } else {\n                    return \"\";\n                }\n            } else {\n                return \"\";\n            }\n        },\n        serviceId() {\n            if (this.service) {\n                if (this.service.hasOwnProperty(\"id\")) {\n                    return this.service.id;\n                } else {\n                    return \"\";\n                }\n            } else {\n                return \"\";\n            }\n        },\n    },\n};\n</script>\n"]}]}
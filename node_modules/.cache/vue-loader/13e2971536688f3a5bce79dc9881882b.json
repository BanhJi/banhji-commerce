{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/CashTransactions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/CashTransactions.vue","mtime":1639364469135},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQge2kxOG59IGZyb20gJ0AvaTE4bic7CglpbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKCWltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiOwoJaW1wb3J0IHsKCQlKb3VybmFsTW9kZWwsCgkJSm91cm5hbEVudHJ5TW9kZWwsCgkJSm91cm5hbEVudHJ5RXh0ZW5kZWRNb2RlbCwKCQlDdXJyZW5jeU1vZGVsLAoJCUV4Y2hhbmdlUmF0ZU1vZGVsLAoJCUFjY291bnRNb2RlbCwKCX0gZnJvbSAiQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyI7CglpbXBvcnQgQWNjb3VudFNlY29uZGFyeUVkaXRvciBmcm9tICJAL3NjcmlwdHMva2VuZG9fZWRpdG9yL0FjY291bnRTZWNvbmRhcnkiOwoKCS8qIFN0b3JlICovCglpbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSIKCWNvbnN0IGluc3RpdHV0ZSA9IHN0b3JlLnN0YXRlLmluc3RpdHV0ZS5pbnN0aXR1dGUKCWltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CgoJY29uc3QgeyBqb3VybmFsSGFuZGxlciB9ID0gcmVxdWlyZSgiQC9zY3JpcHRzL0FwcEhhbmRsZXJzIik7Cgljb25zdCB7IEVudGl0eVR5cGUsIFNhdmVPcHRpb24gfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0NvbGxlY3Rpb25zIik7CgogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIG5hbWU6ICJDYXNoVHJhbnNhY3Rpb24iLAogICAgICAgIGNvbXBvbmVudHM6ewoJCQkiTG9hZGluZ01lIjogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvTG9hZGluZycpLAoJCQkiYXBwLWRhdGVwaWNrZXIiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9jdXN0b21fdGVtcGxhdGVzL0RhdGVQaWNrZXJDb21wb25lbnQnKSwKCQkJImFwcC1jdXJyZW5jeS1kcm9wZG93bmxpc3QiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9kcm9wZG93bmxpc3QvQ3VycmVuY3knKSwKCQl9LAoJCXByb3BzOiB7CgkJCWluaXRKb3VybmFsOiB7CgkJCQl0eXBlOiBKb3VybmFsTW9kZWwKCQkJfSwKCQl9LAoJCWRhdGE6ICgpID0+ICh7CgkJCS8qIE9iaiAqLwoJCQlqb3VybmFsOiBuZXcgSm91cm5hbE1vZGVsKCksCgkJCWN1cnJlbmN5CQk6IG5ldyBDdXJyZW5jeU1vZGVsKGluc3RpdHV0ZS5iYXNlQ3VycmVuY3kpLAoJCQlleGNoYW5nZVJhdGUJOiBuZXcgRXhjaGFuZ2VSYXRlTW9kZWwoaW5zdGl0dXRlLmJhc2VDdXJyZW5jeSksCgkJCWpvdXJuYWxFbnRyaWVzOiBbXSwKCQkJZnJvbUFjY291bnRFbnRyaWVzIDogW10sCgkJCXRvQWNjb3VudEVudHJpZXMgICA6IFtdLAoJCQkvLyBBY2NvdW50cwoJCQlmcm9tQWNjb3VudHM6IFtdLAoJCQl0b0FjY291bnRzOiBbXSwKCQkJLy8gQmFua3MKCQkJdXNlRnJvbUJhbmsgCTogZmFsc2UsCgkJCXVzZVRvQmFuayAJCTogZmFsc2UsCgkJCWZyb21CYW5rSWQgCQk6ICcnLAoJCQl0b0JhbmtJZCAJCTogJycsCgkJCWNhc2hUcmFuc2FjdGlvblR5cGVzOiBFbnRpdHlUeXBlLkNBU0hfVFJBTlNBQ1RJT05fVFlQRVMsCgkJCS8vIE90aGVyCgkJCXRvdGFsRnJvbSAgICAgICA6IDAsCgkJCXRvdGFsVG8gICAgICAgICA6IDAsCgkJCXRlbXBsYXRlczogW10sCgkJCXVzZXI6IEhlbHBlci5nZXRVc2VyKCksCgkJCS8qIEVkaXRvcnMgKi8KCQkJQWNjb3VudFNlY29uZGFyeUVkaXRvciA6IEFjY291bnRTZWNvbmRhcnlFZGl0b3IsCgkJCS8vIEZvcm0gdmFsaWRhdGlvbgoJCQl2YWxpZDogdHJ1ZSwKCQkJaXNFZGl0OiBmYWxzZSwKCQkJYWxlcnQ6IGZhbHNlLAoJCQllcnJvck1lc3NhZ2U6ICIiLAoJCQlzYXZlTW9kZTogIiIsCgkJCVNhdmVPcHRpb246IFNhdmVPcHRpb24sCgkJCS8vIExvYWRpbmdNZQoJCQlzaG93TG9hZGluZzogZmFsc2UsCgkJCWxvYWRpbmdBbGVydDogZmFsc2UsCgkJCWxvYWRpbmdDb2xvckFsZXJ0OiAiIiwKCQkJbG9hZGluZ1RleHRBbGVydDogIiIsCiAgICAgICAgfSksCiAgICAgICAgbWV0aG9kczogIHsKCQkJLy8gSW5pdGlhbGl6ZQoJCQlhc3luYyBpbml0aWFsaXplKCkgewoJCQkJdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CgkJCQkKCQkJCS8qIENhbGwgYWNjb3VudCAqLwoJCQkJYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2FjY291bnRpbmcvZ2V0QWNjb3VudHMnKTsKCQkJCWF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdiYW5raW5nL2dldEJhbmtBY2NvdW50cycpOwoKCQkJCXRoaXMuZnJvbUFjY291bnRzID0gdGhpcy5hY2NvdW50czsKCQkJCXRoaXMudG9BY2NvdW50cyA9IHRoaXMuYWNjb3VudHM7CgkJCQkKCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJfSwKCQkJLy8gSW5pdGlhbCBEYXRhCgkJCWluaXRpYWxEYXRhKCl7CgkJCQlpZih0aGlzLmluaXRKb3VybmFsKXsvLyBFZGl0IE1vZGUKCQkJCQl0aGlzLmpvdXJuYWwgPSB0aGlzLmluaXRKb3VybmFsOwoJCQkJCXRoaXMuYmluZERhdGEoKTsKCQkJCX1lbHNley8vIEJyYW5kIE5ldyBNb2RlCgkJCQkJdGhpcy5zZXREZWZhdWx0RGF0YSgpOwoJCQkJfQoJCQl9LAoJCQkvLyBTZXQgZGVmYXVsdCBkYXRhCgkJCXNldERlZmF1bHREYXRhICgpIHsKCQkJCS8vIEJyYW5kIE5ldyBNb2RlCgkJCQl0aGlzLmlzRWRpdCA9IGZhbHNlOwoKCQkJCXRoaXMuam91cm5hbCA9IG5ldyBKb3VybmFsTW9kZWwoewoJCQkJCWpvdXJuYWxfdHlwZTogRW50aXR5VHlwZS5BVVRPX0pPVVJOQUwsCgkJCQkJdHJhbnNhY3Rpb25fdHlwZTogRW50aXR5VHlwZS5DQVNIX1RSQU5TQUNUSU9OX1RZUEVTWzBdLnZhbHVlLAoJCQkJCWpvdXJuYWxfZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCgkJCQl9KTsKCgkJCQkvLyBHZW5lcmF0ZSBOdW1iZXIKCQkJCXRoaXMuZ2VuZXJhdGVOdW1iZXIoKTsKCgkJCQkvLyBBZGQgdHdvIGRlZmF1bHQgcm93cwoJCQkJZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDI7IGluZGV4KyspIHsKCQkJCQl0aGlzLmFkZFJvd0Zyb20oKTsKCQkJCQl0aGlzLmFkZFJvd1RvKCk7CgkJCQl9CgkJCX0sCgkJCS8vIEJpbmQgZGF0YSBmcm9tIHByb3AgZm9yIGVkaXQgbW9kZQoJCQlhc3luYyBiaW5kRGF0YSgpIHsKCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwoKCQkJCS8vIEVkaXQgTW9kZQoJCQkJdGhpcy5pc0VkaXQgPSB0cnVlOwoKCQkJCS8vIEN1cnJlbmN5CgkJCQl0aGlzLmN1cnJlbmN5ID0gbmV3IEN1cnJlbmN5TW9kZWwodGhpcy5qb3VybmFsLmpvdXJuYWxfZW50cmllc1swXS5jdXJyZW5jeSk7CgkJCQl0aGlzLmV4Y2hhbmdlUmF0ZSA9IG5ldyBFeGNoYW5nZVJhdGVNb2RlbCh0aGlzLmpvdXJuYWwuam91cm5hbF9lbnRyaWVzWzBdLmN1cnJlbmN5KTsKCQkJCXRoaXMuZXhjaGFuZ2VSYXRlLmlkID0gdGhpcy5qb3VybmFsLmpvdXJuYWxfZW50cmllc1swXS5leGNoYW5nZV9yYXRlX3V1aWQ7CgkJCQl0aGlzLmV4Y2hhbmdlUmF0ZS5yYXRlID0gdGhpcy5qb3VybmFsLmpvdXJuYWxfZW50cmllc1swXS5leGNoYW5nZV9yYXRlOwoKCQkJCWxldCB0b3RhbEZyb20gPSAwLAoJCQkJCXRvdGFsVG8gPSAwLAoJCQkJCWZyb21FbnRyaWVzID0gW10sCgkJCQkJdG9FbnRyaWVzID0gW10sCgkJCQkJc2Vjb25kYXJ5QWNjb3VudHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYWNjb3VudGluZy9nZXRTZWNvbmRhcnlBY2NvdW50cyIpOwoKCQkJCXRoaXMuam91cm5hbC5qb3VybmFsX2VudHJpZXMuZm9yRWFjaCh2YWx1ZSA9PiB7CgkJCQkJbGV0IGplID0gbmV3IEpvdXJuYWxFbnRyeUV4dGVuZGVkTW9kZWwodmFsdWUpOwoKCQkJCQkvKiBTZWNvbmRhcnkgQWNjb3VudCAqLwoJCQkJCWplLnNlY29uZGFyeV9hY2NvdW50ID0gbmV3IEFjY291bnRNb2RlbCgKCQkJCQkJc2Vjb25kYXJ5QWNjb3VudHMuZmluZCgoaSkgPT4gaS51dWlkID09PSB2YWx1ZS5zZWNvbmRhcnlfYWNjX3V1aWQpCgkJCQkJKTsKCgkJCQkJaWYodmFsdWUuYW1vdW50ID4gMCl7Ly8gRHIgc2lkZQoJCQkJCQlmcm9tRW50cmllcy5wdXNoKGplKTsKCQkJCQkJdG90YWxGcm9tICs9IHZhbHVlLmFtb3VudDsKCQkJCQl9ZWxzZXsvLyBDciBzaWRlCgkJCQkJCWplLmFtb3VudCA9IE1hdGguYWJzKHZhbHVlLmFtb3VudCk7CgkJCQkJCXRvRW50cmllcy5wdXNoKGplKTsKCQkJCQkJdG90YWxUbyArPSBqZS5hbW91bnQ7CgkJCQkJfQoJCQkJfSk7CgkJCQl0aGlzLnRvdGFsRnJvbSA9IHRvdGFsRnJvbTsKCQkJCXRoaXMudG90YWxUbyA9IHRvdGFsVG87CgkJCQl0aGlzLmZyb21BY2NvdW50RW50cmllcyA9IGZyb21FbnRyaWVzOwoJCQkJdGhpcy50b0FjY291bnRFbnRyaWVzID0gdG9FbnRyaWVzOwoKCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJfSwKCQkJLy8gTnVtYmVyCgkJCWFzeW5jIGdlbmVyYXRlTnVtYmVyKCkgewoJCQkJaWYoIXRoaXMuaXNFZGl0KXsKCQkJCQlsZXQgbnVtID0gYXdhaXQgSGVscGVyLmdlbmVyYXRlQWNjb3VudGluZ051bWJlcih0aGlzLmpvdXJuYWwudHJhbnNhY3Rpb25fdHlwZSwgdGhpcy5qb3VybmFsLmpvdXJuYWxfZGF0ZSk7CgkJCQkJCgkJCQkJdGhpcy5qb3VybmFsLm51bWJlciA9IG51bS5udW1iZXI7CgkJCQkJdGhpcy5qb3VybmFsLnByZWZpeF9mb3JtYXQgPSBudW0ucHJlZml4X2Zvcm1hdDsKCQkJCX0KICAgICAgICAgICAgfSwKCQkJLy8gR2V0IEV4Y2hhbmdlIFJhdGUKCQkJYXN5bmMgZ2V0RXhjaGFuZ2VSYXRlKCkgewoJCQkJaWYodGhpcy5qb3VybmFsLmpvdXJuYWxfZGF0ZSAmJiB0aGlzLmN1cnJlbmN5LmNvZGUgIT09ICcnKXsKCQkJCQl0aGlzLmV4Y2hhbmdlUmF0ZSA9IGF3YWl0IEhlbHBlci5nZXRMYXN0RXhjaGFuZ2VSYXRlQnlEYXRlKHRoaXMuam91cm5hbC5qb3VybmFsX2RhdGUsIHRoaXMuY3VycmVuY3kuY29kZSk7CgkJCQl9ZWxzZXsKCQkJCQl0aGlzLmV4Y2hhbmdlUmF0ZSA9IG5ldyBFeGNoYW5nZVJhdGVNb2RlbChpbnN0aXR1dGUuYmFzZUN1cnJlbmN5KTsKCQkJCX0KCQkJfSwKCQkJLyogS2VuZG8gKi8KCQkJLy8gRGF0YVNvdXJjZSBDaGFuZ2VzCgkJCW9uRnJvbURTQ2hhbmdlcyAoZSkgewoJCQkJaWYoZS5maWVsZCl7CgkJCQkJbGV0IGRhdGFSb3cgPSBlLml0ZW1zWzBdOwoKCQkJCQlpZiAoZS5maWVsZCA9PT0gImFjY291bnQiKSB7CgkJCQkJCWRhdGFSb3cuc2V0KCJhY2NvdW50X3V1aWQiLCBkYXRhUm93LmFjY291bnQudXVpZCk7CgkJCQkJCQoJCQkJCQl0aGlzLmFkZEV4dHJhUm93RnJvbShkYXRhUm93LnVpZCk7CgkJCQkJfSBlbHNlIGlmIChlLmZpZWxkID09PSAic2Vjb25kYXJ5X2FjY291bnQiKSB7CgkJCQkJCWlmIChkYXRhUm93LnNlY29uZGFyeV9hY2NvdW50ICE9PSBudWxsKSB7CgkJCQkJCQlkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY191dWlkIiwgZGF0YVJvdy5zZWNvbmRhcnlfYWNjb3VudC51dWlkKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCS8vIFNldCBkZWZhdWx0IHdoZW4gZGVzZWxlY3QKCQkJCQkJCWRhdGFSb3cuc2V0KCJzZWNvbmRhcnlfYWNjX3V1aWQiLCAiIik7CgkJCQkJCQlkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY291bnQiLCBuZXcgQWNjb3VudE1vZGVsKCkpOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQl0aGlzLmRhdGFTb3VyY2VBdXRvQ2FsY3VsYXRlKCk7CgkJCQl9CgkJCX0sCgkJCW9uVG9EU0NoYW5nZXMgKGUpIHsKCQkJCWlmKGUuZmllbGQpewoJCQkJCWxldCBkYXRhUm93ID0gZS5pdGVtc1swXTsKCQkJCQkKCQkJCQlpZiAoZS5maWVsZCA9PT0gImFjY291bnQiKSB7CgkJCQkJCWRhdGFSb3cuc2V0KCJhY2NvdW50X3V1aWQiLCBkYXRhUm93LmFjY291bnQudXVpZCk7CgkJCQkJCQoJCQkJCQl0aGlzLmFkZEV4dHJhUm93RnJvbShkYXRhUm93LnVpZCk7CgkJCQkJfSBlbHNlIGlmIChlLmZpZWxkID09PSAic2Vjb25kYXJ5X2FjY291bnQiKSB7CgkJCQkJCWlmIChkYXRhUm93LnNlY29uZGFyeV9hY2NvdW50ICE9PSBudWxsKSB7CgkJCQkJCQlkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY191dWlkIiwgZGF0YVJvdy5zZWNvbmRhcnlfYWNjb3VudC51dWlkKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCS8vIFNldCBkZWZhdWx0IHdoZW4gZGVzZWxlY3QKCQkJCQkJCWRhdGFSb3cuc2V0KCJzZWNvbmRhcnlfYWNjX3V1aWQiLCAiIik7CgkJCQkJCQlkYXRhUm93LnNldCgic2Vjb25kYXJ5X2FjY291bnQiLCBuZXcgQWNjb3VudE1vZGVsKCkpOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQl0aGlzLmRhdGFTb3VyY2VBdXRvQ2FsY3VsYXRlKCk7CgkJCQl9CgkJCX0sCgkJCS8vIEdyaWQgQ3VzdG9tIEVkaXRvcgoJCQlmcm9tQWNjb3VudEVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKCQkJCXJldHVybiBIZWxwZXIuYWNjb3VudEVkaXRvcihjb250YWluZXIsIG9wdGlvbnMsIHRoaXMuZnJvbUFjY291bnRzKTsKCQkJfSwKCQkJdG9BY2NvdW50RWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucykgewoJCQkJcmV0dXJuIEhlbHBlci5hY2NvdW50RWRpdG9yKGNvbnRhaW5lciwgb3B0aW9ucywgdGhpcy50b0FjY291bnRzKTsKCQkJfSwKCQkJLy8gQXV0byBDYWxjdWxhdGUgSW4gRGF0YVNvdXJjZQoJCQlkYXRhU291cmNlQXV0b0NhbGN1bGF0ZSAoKSB7CgkJCQlsZXQgZnJvbURTID0gdGhpcy4kcmVmcy5mcm9tRFMua2VuZG9XaWRnZXQoKSwKCQkJCQl0b0RTID0gdGhpcy4kcmVmcy50b0RTLmtlbmRvV2lkZ2V0KCksCgkJCQkJdG90YWxGcm9tID0gMCwgdG90YWxUbyA9IDA7CgkJCQkKCQkJCS8vIFN1bQoJCQkJZnJvbURTLmRhdGEoKS5mb3JFYWNoKHZhbHVlID0+IHsKCQkJCQl0b3RhbEZyb20gKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpCgkJCQl9KQoJCQkJdG9EUy5kYXRhKCkuZm9yRWFjaCh2YWx1ZSA9PiB7CgkJCQkJdG90YWxUbyArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLmFtb3VudCkKCQkJCX0pCgoJCQkJdGhpcy50b3RhbEZyb20gPSB0b3RhbEZyb207CgkJCQl0aGlzLnRvdGFsVG8gPSB0b3RhbFRvOwoJCQl9LAoJCQkvLyBSb3cgTnVtYmVyIFRlbXBsYXRlCgkJCXJvd051bWJlclRtcGxGcm9tIChkYXRhSXRlbSkgewoJCQkJbGV0IGRzID0gdGhpcy4kcmVmcy5mcm9tRFMua2VuZG9XaWRnZXQoKSwKCQkJCQlpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwoKCQkJCXJldHVybiBpbmRleCArIDE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJvd051bWJlclRtcGxUbyAoZGF0YUl0ZW0pIHsKCQkJCWxldCBkcyA9IHRoaXMuJHJlZnMudG9EUy5rZW5kb1dpZGdldCgpLAoJCQkJCWluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CgoJCQkJcmV0dXJuIGluZGV4ICsgMTsKCQkJfSwKCQkJLy8gQWRkIE5ldyBSb3cKCQkJYWRkUm93RnJvbSAoKSB7CgkJCQlsZXQgZHMgPSB0aGlzLiRyZWZzLmZyb21EUy5rZW5kb1dpZGdldCgpLAoJCQkJCWxhc3QgPSBkcy50b3RhbCgpLAoJCQkJCWplID0gbmV3IEpvdXJuYWxFbnRyeUV4dGVuZGVkTW9kZWwoKTsKCgkJCQlkcy5pbnNlcnQobGFzdCwgamUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRSb3dUbyAoKSB7CgkJCQlsZXQgZHMgPSB0aGlzLiRyZWZzLnRvRFMua2VuZG9XaWRnZXQoKSwKCQkJCQlsYXN0ID0gZHMudG90YWwoKSwKCQkJCQlqZSA9IG5ldyBKb3VybmFsRW50cnlFeHRlbmRlZE1vZGVsKCk7CgoJCQkJZHMuaW5zZXJ0KGxhc3QsIGplKTsKCQkJfSwKCQkJLy8gQWRkIEV4dHJhIFJvdwoJCQlhZGRFeHRyYVJvd0Zyb20gKHVpZCkgewoJCQkJbGV0IGRzID0gdGhpcy4kcmVmcy5mcm9tRFMua2VuZG9XaWRnZXQoKSwKCQkJCQl0b3RhbCA9IGRzLnRvdGFsKCksCgkJCQkJcm93ID0gZHMuZ2V0QnlVaWQodWlkKSwKCQkJCQlpbmRleCA9IGRzLmluZGV4T2Yocm93KTsKCgkJCQlpZihpbmRleCA9PSB0b3RhbCAtIDEpewoJCQkJCXRoaXMuYWRkUm93RnJvbSgpOwoJCQkJfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRFeHRyYVJvd1RvICh1aWQpIHsKCQkJCWxldCBkcyA9IHRoaXMuJHJlZnMudG9EUy5rZW5kb1dpZGdldCgpLAoJCQkJCXRvdGFsID0gZHMudG90YWwoKSwKCQkJCQlyb3cgPSBkcy5nZXRCeVVpZCh1aWQpLAoJCQkJCWluZGV4ID0gZHMuaW5kZXhPZihyb3cpOwoKCQkJCWlmKGluZGV4ID09IHRvdGFsIC0gMSl7CgkJCQkJdGhpcy5hZGRSb3dUbygpOwoJCQkJfQoJCQl9LAoJCQkvLyBSZW1vdmUgUm93CgkJCXJlbW92ZVJvd0Zyb20gKGUpIHsKCQkJCWUucHJldmVudERlZmF1bHQoKTsKCgkJCQlsZXQgZ3JpZCA9IHRoaXMuJHJlZnMuZnJvbUdyaWQua2VuZG9XaWRnZXQoKSwKCQkJCQlkcyA9IGdyaWQuZGF0YVNvdXJjZSwKCQkJCQlkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oa2VuZG8ualF1ZXJ5KGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgidHIiKSk7CgkJCQkKCQkJCWlmKGRzLmRhdGEoKS5sZW5ndGggPiAyKXsKCQkJCQlkcy5yZW1vdmUoZGF0YUl0ZW0pOwoJCQkJfQogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVSb3dUbyAoZSkgewoJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJCWxldCBncmlkID0gdGhpcy4kcmVmcy50b0dyaWQua2VuZG9XaWRnZXQoKSwKCQkJCQlkcyA9IGdyaWQuZGF0YVNvdXJjZSwKCQkJCQlkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oa2VuZG8ualF1ZXJ5KGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgidHIiKSk7CgkJCQkKCQkJCWlmKGRzLnRvdGFsKCkgPiAyKXsKCQkJCQlkcy5yZW1vdmUoZGF0YUl0ZW0pOwoJCQkJfQoJCQl9LAoJCQkvLyBTZXQgQWNjb3VudCBCeSBCYW5rCgkJCXNldEFjY291bnRCeUZyb21CYW5rKCl7CgkJCQlsZXQgZHMgPSB0aGlzLiRyZWZzLmZyb21EUy5rZW5kb1dpZGdldCgpOwoJCQkJZHMuZGF0YShbXSk7CgoJCQkJLy8gT24gdXNlIGJhbmsgY2hlY2tib3ggY2hhbmdlcwoJCQkJaWYoIXRoaXMudXNlRnJvbUJhbmspewoJCQkJCXRoaXMuZnJvbUJhbmtJZCA9ICcnOwoJCQkJfQoJCQkJCgkJCQkvLyBPbiBiYW5rIGRyb3Bkb3dubGlzdCBjaGFuZ2VzCgkJCQlpZih0aGlzLmZyb21CYW5rSWQgIT09ICcnKXsKCQkJCQl0aGlzLmZyb21BY2NvdW50cyA9IHRoaXMuZ2V0QWNjb3VudEJ5QmFua0lkKHRoaXMuZnJvbUJhbmtJZCk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuZnJvbUFjY291bnRzID0gdGhpcy5hY2NvdW50czsKCQkJCX0KCgkJCQl0aGlzLmFkZFJvd0Zyb20oKTsKCQkJCXRoaXMuYWRkUm93RnJvbSgpOwoJCQl9LAoJCQlzZXRBY2NvdW50QnlUb0JhbmsoKXsKCQkJCWxldCBkcyA9IHRoaXMuJHJlZnMudG9EUy5rZW5kb1dpZGdldCgpOwoJCQkJZHMuZGF0YShbXSk7CgoJCQkJLy8gT24gdXNlIGJhbmsgY2hlY2tib3ggY2hhbmdlcwoJCQkJaWYoIXRoaXMudXNlVG9CYW5rKXsKCQkJCQl0aGlzLnRvQmFua0lkID0gJyc7CgkJCQl9CgoJCQkJLy8gT24gYmFuayBkcm9wZG93bmxpc3QgY2hhbmdlcwoJCQkJaWYodGhpcy50b0JhbmtJZCAhPT0gJycpewoJCQkJCXRoaXMudG9BY2NvdW50cyA9IHRoaXMuZ2V0QWNjb3VudEJ5QmFua0lkKHRoaXMudG9CYW5rSWQpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLnRvQWNjb3VudHMgPSB0aGlzLmFjY291bnRzOwoJCQkJfQoKCQkJCXRoaXMuYWRkUm93VG8oKTsKCQkJCXRoaXMuYWRkUm93VG8oKTsKCQkJfSwKCQkJLy8gR2V0IGFjY291bnQgYnkgYmFuayBJZAoJCQlnZXRBY2NvdW50QnlCYW5rSWQoYmFua0lkKXsKCQkJCWxldCBhY2NvdW50cyA9IFtdOwoKCQkJCXRoaXMuYmFua0FjY291bnRzLmZvckVhY2godmFsdWUgPT4gewoJCQkJCWlmKHZhbHVlLmJhbmsudXVpZCA9PT0gYmFua0lkKXsKCQkJCQkJYWNjb3VudHMucHVzaChuZXcgQWNjb3VudE1vZGVsKHZhbHVlLmFjY291bnQpKTsKCQkJCQl9CgkJCQl9KTsKCgkJCQlyZXR1cm4gYWNjb3VudHM7CgkJCX0sCgkJCS8vIFNocmluayBEYXRhCgkJCXNocmlua0RhdGEgKCkgewoJCQkJLy8gSm91cm5hbCBEYXRlCgkJCQl0aGlzLmpvdXJuYWwuam91cm5hbF9kYXRlID0gSGVscGVyLnRvSVNPRGF0ZSh0aGlzLmpvdXJuYWwuam91cm5hbF9kYXRlKTsKCQkJCQoJCQkJLy8gVXNlcgoJCQkJaWYgKHRoaXMuaXNFZGl0KSB7CgkJCQkJdGhpcy5qb3VybmFsLm1vZGlmaWVkX2J5ID0gdGhpcy51c2VyOwoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLmpvdXJuYWwuY3JlYXRlZF9ieSA9IHRoaXMudXNlcjsKCQkJCX0KCQkJCQoJCQkJbGV0IGVudHJpZXMgPSBbXSwKCQkJCQlmcm9tRFMgPSB0aGlzLiRyZWZzLmZyb21EUy5rZW5kb1dpZGdldCgpLAoJCQkJCXRvRFMgPSB0aGlzLiRyZWZzLnRvRFMua2VuZG9XaWRnZXQoKTsKCgkJCQkvLyBGaWx0ZXIgRnJvbSBBY2NvdW50IG9uIERyCgkJCQl0b0RTLmRhdGEoKS5mb3JFYWNoKHZhbHVlID0+IHsKCQkJCQlpZih2YWx1ZS5hY2NvdW50Lm51bWJlciAhPT0gIiIgJiYgdmFsdWUuYW1vdW50ID4gMCl7Ly8gRmlsdGVyIHNlbGVjdGVkIGFjY291bnQKCQkJCQkJLy8gQ3VycmVuY3kKCQkJCQkJdmFsdWUuc2V0KCJjdXJyZW5jeSIsIG5ldyBDdXJyZW5jeU1vZGVsKHRoaXMuY3VycmVuY3kpKTsKCQkJCQkJdmFsdWUuc2V0KCJleGNoYW5nZV9yYXRlX3V1aWQiLCB0aGlzLmV4Y2hhbmdlUmF0ZS5pZCk7CgkJCQkJCXZhbHVlLnNldCgiZXhjaGFuZ2VfcmF0ZSIsIHRoaXMuZXhjaGFuZ2VSYXRlLnJhdGUpOwoJCQkJCQllbnRyaWVzLnB1c2gobmV3IEpvdXJuYWxFbnRyeU1vZGVsKHZhbHVlKSk7CgkJCQkJfQoJCQkJfSkKCQkJCS8vIEZpbHRlciBUbyBBY2NvdW50IG9uIENyCgkJCQlmcm9tRFMuZGF0YSgpLmZvckVhY2godmFsdWUgPT4gewoJCQkJCWlmKHZhbHVlLmFjY291bnQubnVtYmVyICE9PSAiIiAmJiB2YWx1ZS5hbW91bnQgPiAwKXsvLyBGaWx0ZXIgc2VsZWN0ZWQgYWNjb3VudAoJCQkJCQkvLyBDdXJyZW5jeQoJCQkJCQl2YWx1ZS5zZXQoImN1cnJlbmN5IiwgbmV3IEN1cnJlbmN5TW9kZWwodGhpcy5jdXJyZW5jeSkpOwoJCQkJCQl2YWx1ZS5zZXQoImFtb3VudCIsIHZhbHVlLmFtb3VudCAqIC0xKTsgLy8gQ3JlZGl0IFNpZGUgaXMgbmVnYXRpdmUKCQkJCQkJdmFsdWUuc2V0KCJleGNoYW5nZV9yYXRlX3V1aWQiLCB0aGlzLmV4Y2hhbmdlUmF0ZS5pZCk7CgkJCQkJCXZhbHVlLnNldCgiZXhjaGFuZ2VfcmF0ZSIsIHRoaXMuZXhjaGFuZ2VSYXRlLnJhdGUpOwoKCQkJCQkJZW50cmllcy5wdXNoKG5ldyBKb3VybmFsRW50cnlNb2RlbCh2YWx1ZSkpOwoJCQkJCX0KCQkJCX0pCgoJCQkJLy8gSm91cm5hbCBFbnRyaWVzCgkJCQl0aGlzLmpvdXJuYWwuam91cm5hbF9lbnRyaWVzID0gZW50cmllczsKCQkJfSwKCQkJLy8gVmFsaWRhdGluZwoJCQl2YWxpZGF0ZUZvcm0gKCkgewoJCQkJbGV0IHJlc3VsdCA9IHRydWUsCgkJCQkJZnJvbURTID0gdGhpcy4kcmVmcy5mcm9tRFMua2VuZG9XaWRnZXQoKSwKCQkJCQl0b0RTID0gdGhpcy4kcmVmcy50b0RTLmtlbmRvV2lkZ2V0KCksCgkJCQkJbXNnID0gJycsIGNvdW50RW1wdHlGcm9tID0gMCwgY291bnRFbXB0eVRvID0gMCwKCQkJCQlzZWNvbmRhcnlBY2NvdW50QW1vdW50ID0gMDsKCgkJCQkvL0ZST00KCQkJCWZyb21EUy5kYXRhKCkuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7CgkJCQkJLy8gTm8gYWNjb3VudAogICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlLmFjY291bnQubmFtZSA9PT0gJycgJiYgdmFsdWUuYW1vdW50ID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBtc2cgKz0gYDxwPiR7aTE4bi50KCJwbGVhc2Vfc2VsZWN0X2Zyb21fYWNjb3VudF9hdF9yb3dfbnVtYmVyIil9ICR7aW5kZXggKyAxfTwvcD5gOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gTm8gYW1vdW50CiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuYWNjb3VudC5uYW1lICE9PSAnJyAmJiB2YWx1ZS5hbW91bnQgPT09IDApewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgbXNnICs9IGA8cD4ke3ZhbHVlLmFjY291bnQubmFtZX0gJHtpMThuLnQoImhhc19ub19hbW91bnQiKX08L3A+YDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIENvdW50IEZyb20gQWNjb3VudHMKICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS5hY2NvdW50Lm5hbWUgIT09ICcnICYmIHZhbHVlLmFtb3VudCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudEVtcHR5RnJvbSsrOwogICAgICAgICAgICAgICAgICAgIH0KCgkJCQkJLyogU2Vjb25kYXJ5IFN1bSBBbW91bnQgKi8KCQkJCQlpZih2YWx1ZS5zZWNvbmRhcnlfYWNjb3VudC51dWlkICE9PSAiIil7CgkJCQkJCXNlY29uZGFyeUFjY291bnRBbW91bnQgKz0gdmFsdWUuYW1vdW50OwoJCQkJCX0KCQkJCX0pCgkJCQkKCQkJCS8vIEVtcHR5IFJvdyBGcm9tIEFjY291bnRzCgkJCQlpZihjb3VudEVtcHR5RnJvbSA9PT0gMCl7CgkJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgicGxlYXNlX3NlbGVjdF9mcm9tX2FjY291bnQiKX08L3A+YDsKCQkJCQlyZXN1bHQgPSBmYWxzZTsKCQkJCX0KCgkJCQkvL1RPCgkJCQl0b0RTLmRhdGEoKS5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHsKCQkJCQkvLyBObyBhY2NvdW50CiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuYWNjb3VudC5uYW1lID09PSAnJyAmJiB2YWx1ZS5hbW91bnQgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyArPSBgPHA+JHtpMThuLnQoInBsZWFzZV9zZWxlY3RfdG9fYWNjb3VudF9hdF9yb3dfbnVtYmVyIil9ICR7aW5kZXggKyAxfTwvcD5gOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gTm8gYW1vdW50CiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuYWNjb3VudC5uYW1lICE9PSAnJyAmJiB2YWx1ZS5hbW91bnQgPT09IDApewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgbXNnICs9IGA8cD4ke3ZhbHVlLmFjY291bnQubmFtZX0gJHtpMThuLnQoImhhc19ub19hbW91bnQiKX08L3A+YDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIENvdW50IFRvIEFjY291bnRzCiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuYWNjb3VudC5uYW1lICE9PSAnJyAmJiB2YWx1ZS5hbW91bnQgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgY291bnRFbXB0eVRvKys7CiAgICAgICAgICAgICAgICAgICAgfQoKCQkJCQkvKiBTZWNvbmRhcnkgU3VtIEFtb3VudCAqLwoJCQkJCWlmKHZhbHVlLnNlY29uZGFyeV9hY2NvdW50LnV1aWQgIT09ICIiKXsKCQkJCQkJc2Vjb25kYXJ5QWNjb3VudEFtb3VudCArPSB2YWx1ZS5hbW91bnQgKiAtMTsKCQkJCQl9CgkJCQl9KQoJCQkJCgkJCQkvLyBFbXB0eSBSb3cgVG8KCQkJCWlmKGNvdW50RW1wdHlUbyA9PT0gMCl7CgkJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgicGxlYXNlX3NlbGVjdF90b19hY2NvdW50Iil9PC9wPmA7CgkJCQkJcmVzdWx0ID0gZmFsc2U7CgkJCQl9CgoJCQkJLy8gQmFsYW5jZSBGcm9tIGFuZCBUbwoJCQkJaWYoa2VuZG8ucGFyc2VGbG9hdCh0aGlzLnRvdGFsRnJvbSkgIT09IGtlbmRvLnBhcnNlRmxvYXQodGhpcy50b3RhbFRvKSl7CgkJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgidG90YWxfZnJvbV9hbmRfdG90YWxfdG9faXNfbm90X2JhbGFuY2UiKX08L3A+YDsKCQkJCQlyZXN1bHQgPSBmYWxzZTsKCQkJCX0KCgkJCQkvKiBTZWNvbmRhcnkgQWNjb3VudCBCYWxhbmNlICovCgkJCQlpZihzZWNvbmRhcnlBY2NvdW50QW1vdW50ICE9PSAwKXsKCQkJCQltc2cgKz0gYDxwPiR7aTE4bi50KCJzZWNvbmRhcnlfYWNjb3VudF91bmJhbGFuY2UiKX08L3A+YDsKCQkJCQlyZXN1bHQgPSBmYWxzZTsKCQkJCX0KCgkJCQkvLyBTaG93IEFsZXJ0CgkJCQl0aGlzLmVycm9yTWVzc2FnZSA9IG1zZzsKCQkJCXRoaXMuYWxlcnQgPSBmYWxzZTsKCQkJCWlmKHJlc3VsdD09PWZhbHNlKXsKCQkJCQl0aGlzLmFsZXJ0ID0gdHJ1ZTsKCQkJCX0KCQkJCQoJCQkJcmV0dXJuIHJlc3VsdDsKCQkJfSwKCQkJLy8gQWxsIFNhdmVzCgkJCWFzeW5jIG9uU2F2ZU9wdGlvbkNsaWNrKG1vZGUpIHsKCQkJCWlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSAmJiB0aGlzLnZhbGlkYXRlRm9ybSgpKSB7CgkJCQkJbGV0IGlzVmFsaWRDbG9zaW5nRGF0ZSA9IGF3YWl0IEhlbHBlci52YWxpZGF0ZUNsb3NpbmdEYXRlKHRoaXMuam91cm5hbC5qb3VybmFsX2RhdGUpOwoJCQkJCWlmIChpc1ZhbGlkQ2xvc2luZ0RhdGUpIHsKCQkJCQkJdGhpcy5zYXZlTW9kZSA9IG1vZGU7CgkJCQkJCXRoaXMuc2F2ZSgpOwoJCQkJCX0KCQkJCX0KCQkJfSwKCQkJY2FuY2VsICgpIHsKCQkJCXRoaXMuJHN3YWwoewoJCQkJCXRpdGxlOiBpMThuLnQoJ21zZ190aXRsZV93YXJuaW5nJyksCgkJCQkJdGV4dDogaTE4bi50KCdtc2dfZGlzY2FyZCcpLAoJCQkJCWljb246ICJ3YXJuaW5nIiwKCQkJCQlzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6IGkxOG4udCgnY2FuY2VsJyksCgkJCQkJY29uZmlybUJ1dHRvbkNvbG9yOiAiIzRkNDg0OCIsCgkJCQkJY2FuY2VsQnV0dG9uQ29sb3I6ICIjRUQxQTNBIiwKCQkJCQljb25maXJtQnV0dG9uVGV4dDogaTE4bi50KCdkaXNjYXJkJyksCgkJCQl9KS50aGVuKChyZXN1bHQpID0+IHsKCQkJCQlpZiAocmVzdWx0LnZhbHVlKSB7CgkJCQkJCXRoaXMuY2xlYXIoKTsKCQkJCQkJdGhpcy4kcm91dGVyLmdvKC0xKTsKCQkJCQl9CgkJCQl9KTsKCQkJfSwKCQkJY2xlYXIgKCkgewoJCQkJdGhpcy5pc0VkaXQgPSBmYWxzZTsKCQkJCXRoaXMuc2F2ZU1vZGUgPSAnJzsKCQkJCQoJCQkJdGhpcy51c2VGcm9tQmFuayA9IGZhbHNlOwoJCQkJdGhpcy51c2VUb0JhbmsgPSBmYWxzZTsKCgkJCQl0aGlzLmN1cnJlbmN5ID0gbmV3IEN1cnJlbmN5TW9kZWwoaW5zdGl0dXRlLmJhc2VDdXJyZW5jeSk7CgkJCQl0aGlzLmV4Y2hhbmdlUmF0ZSA9IG5ldyBFeGNoYW5nZVJhdGVNb2RlbChpbnN0aXR1dGUuYmFzZUN1cnJlbmN5KTsKCgkJCQlsZXQgZnJvbURTID0gdGhpcy4kcmVmcy5mcm9tRFMua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgICAgIGZyb21EUy5kYXRhKFtdKTsKICAgICAgICAgICAgICAgIGxldCB0b0RTID0gdGhpcy4kcmVmcy50b0RTLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgICAgICAgICB0b0RTLmRhdGEoW10pOwoKCQkJCXRoaXMuc2V0RGVmYXVsdERhdGEoKTsKCQkJfSwKCQkJc2F2ZSAoKSB7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7CgkJCQkKCQkJCS8vIERyYWZ0IE1vZGUKCQkJCWlmICh0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLlNBVkVEUkFGVCkgewoJCQkJCXRoaXMuam91cm5hbC5pc19kcmFmdCA9IDE7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuam91cm5hbC5pc19kcmFmdCA9IDA7CgkJCQl9CgoJCQkJLy8gU2hyaW5rIERhdGEKCQkJCXRoaXMuc2hyaW5rRGF0YSgpOwoKCQkJCS8vIFN5bmMgRGF0YQoJCQkJdGhpcy5zaG93TG9hZGluZyA9IHRydWUKCQkJCWpvdXJuYWxIYW5kbGVyCgkJCQkJLnNhdmUobmV3IEpvdXJuYWxNb2RlbCh0aGlzLmpvdXJuYWwpKQoJCQkJCS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCQlpZiAocmVzcG9uc2UpIHsKCQkJCQkJCXNlbGYucmVzcG9uc2VTdGF0dXMocmVzcG9uc2UpOwoJCQkJCQl9ZWxzZXsKCQkJCQkJCXRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJlcnJvcl9zb21ldGhpbmdfd3JvbmciKSk7CgkJCQkJCX0KCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJCQlIZWxwZXIuYWxlcnRFcnJvck1zZyhlcnJvcik7CgkJCQkJfSkKCQkJCQkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKCQkJfSwKCQkJLy8gUmVzcG9uc2UgU3RhdHVzCgkJCXJlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKSB7CgkJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKCQkJCQkvKiBTYXZlIENsb3NlIG9yIERlbGV0ZSBBY3Rpb24gKi8KCQkJCQlpZiAoCgkJCQkJCXRoaXMuc2F2ZU1vZGUgPT09IFNhdmVPcHRpb24uU0FWRUNMT1NFIHx8CgkJCQkJCXRoaXMuc2F2ZU1vZGUgPT09IFNhdmVPcHRpb24uREVMRVRFCgkJCQkJKSB7CgkJCQkJCWlmICh0aGlzLmlzRWRpdCkgewoJCQkJCQkJdGhpcy5nb0JhY2tUb1ZpZXdQYWdlKCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl0aGlzLiRyb3V0ZXIuZ28oLTEpOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvKiBSZXNldCBEYXRhICovCgkJCQkJdGhpcy5jbGVhcigpOwoKCQkJCQkvKiBBbGVydCBTdWNjZXNzICovCgkJCQkJdGhpcy4kc25vdGlmeS5zdWNjZXNzKGkxOG4udCgic3VjY2Vzc2Z1bCIpKTsKCQkJCX0gZWxzZSB7CgkJCQkJLyogQWxlcnQgRXJyb3IgKi8KCQkJCQl0aGlzLiRzbm90aWZ5LmVycm9yKGkxOG4udCgiZXJyb3Jfc29tZXRoaW5nX3dyb25nIikpOwoJCQkJfQoJCQl9LAoJCQkvLyBHbyBiYWNrIHRvIHZpZXcgcGFnZSBhZnRlciBlZGl0IG1vZGUKCQkJZ2V0Sm91cm5hbCgpewoJCQkJcmV0dXJuIG5ldyBKb3VybmFsTW9kZWwodGhpcy5qb3VybmFsKTsKCQkJfSwKCQkJZ29CYWNrVG9WaWV3UGFnZSgpewoJCQkJdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBuYW1lOiAnQ2FzaCBUcmFuc2FjdGlvbiBWaWV3JywgcGFyYW1zOiB7IGluaXRKb3VybmFsOiB0aGlzLmdldEpvdXJuYWwoKSB9IH0pOwoJCQl9LAoJCX0sCgkJd2F0Y2g6IHsKCQkJaW5pdEpvdXJuYWwgKCkgewoJCQkJdGhpcy5pbml0aWFsRGF0YSgpOwoJCQl9LAoJCX0sCgkJY29tcHV0ZWQ6IG1hcFN0YXRlKHsKCQkJYWNjb3VudHM6IHN0YXRlID0+IHN0YXRlLmFjY291bnRpbmcuYWNjb3VudHMsCgkJCWJhbmtBY2NvdW50czogc3RhdGUgPT4gc3RhdGUuYmFua2luZy5iYW5rQWNjb3VudHMsCgkJfSksCgkJY3JlYXRlZCAoKSB7CgkJCXRoaXMuaW5pdGlhbGl6ZSgpOwoJCX0sCgkJbW91bnRlZCAoKSB7CgkJCS8vIEluaXRpYWwgRGF0YQoJCQl0aGlzLmluaXRpYWxEYXRhKCk7CgkJfQogICAgfTsK"},{"version":3,"sources":["CashTransactions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CashTransactions.vue","sourceRoot":"src/views/banking","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                    <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                        <v-card outlined dense class=\"pa-4 no_border rounded-sm\" color=\"white\">\n                            <v-card outlined dense class=\"no_border\">\n                                <h2 class=\"mb-0\">{{$t('cash_transaction')}}</h2>\n                                <v-icon\n                                        onclick=\"window.history.go(-1); return false;\"\n                                        style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                        class=\"float-right\"\n                                >close\n                                </v-icon>\n                            </v-card>\n                            <v-card outlined dense class=\"px-3 no_border\" color=\"grayBg\">\n                                <v-row class=\"\">\n                                    <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                        <label class=\"label\">{{$t('date')}}</label>\n                                        <app-datepicker \n\t\t\t\t\t\t\t\t\t\t\t:initialDate=\"journal.journal_date\" \n\t\t\t\t\t\t\t\t\t\t\t@emitDate=\"journal.journal_date = $event\" \n\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"getExchangeRate\" />\n\n                                        <label class=\"label\">{{$t('transaction_type')}}</label>\n                                        <v-select class=\"mt-1\"\n                                            @change=\"generateNumber\"\n                                            :items=\"cashTransactionTypes\"\n                                            v-model=\"journal.transaction_type\"\n                                            item-value=\"value\"\n                                            item-text=\"text\"\n                                            no-data-text=\"No data found.\"\n                                            required\n                                            outlined />\n\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                        <label class=\"label\">{{$t('number')}}</label>\n                                        <v-row>\n                                            <v-col sm=\"10\" cols=\"10\" class=\"pb-0 pr-0 pt-1\">\n                                                <v-text-field\n                                                    v-model=\"journal.number\"\n                                                    outlined\n                                                    :rules=\"[v => !!v || 'Number is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\t\treadonly\n                                                    required />\n                                            </v-col>\n                                            <v-col sm=\"2\" cols=\"2\" class=\"pb-0 pl-0 pt-1\">\n                                                <v-icon color=\"black\" size=\"30\" class=\"border_qrcode\" @click=\"generateNumber\">mdi-qrcode</v-icon>\n                                            </v-col>\n                                        </v-row>\n\n                                        <label class=\"label\">{{$t('txn_currency')}}</label>\n                                        <app-currency-dropdownlist\n                                            :initCurrency=\"currency\"\n                                            @emitCurrency=\"currency = $event\"\n                                            @onChanged=\"getExchangeRate\"\n                                        />\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                        <label class=\"label\">{{$t('description')}}</label>\n                                        <v-textarea class=\" mt-1\" height=\"120px\" no-resize\n                                            v-model=\"journal.description\"\n                                            outlined\n                                            rows=\"4\"\n                                            :placeholder=\"$t('transaction_purpose')\"\n                                        />\n\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n\n                            <v-card outlined dense class=\"no_border\" color=\"white\">\n                                <v-row style=\"background-color: rgb(255, 255, 255); width: 100%; margin: 0 auto 0px;\">\n                                    <v-col sm=\"12\" cols=\"12\" class=\"pb-3 pa-0\">\n                                        <v-row>\n                                            <v-col sm=\"1\" cols=\"12\" class=\"pt-0\">\n                                                <h2 class=\"mb-0\">{{$t('from_to')}}</h2>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"pt-0 pr-0\">\n                                                <v-checkbox class=\"ma-0 pt-3  float-left\"\n                                                    v-model=\"useFromBank\"\n                                                    @change=\"setAccountByFromBank\"\n                                                />\n                                                <p class=\"mb-0 mt-3\">{{$t('select_bank')}}</p>\n                                            </v-col>\n                                            <v-col sm=\"3\" cols=\"12\" class=\" pl-0\">\n                                                <v-select class=\"mt-1\"\n                                                    v-if=\"useFromBank\"\n                                                    placeholder=\"Select Bank\"\n                                                    v-model=\"fromBankId\"\n                                                    :items=\"bankAccounts\"\n                                                    item-text=\"bank.name\"\n                                                    item-value=\"bank.uuid\"\n                                                    @change=\"setAccountByFromBank\"\n                                                    outlined>\n                                                    <template slot=\"selection\" slot-scope=\"{ item }\">\n                                                        {{ item.bank.abbr }} - {{ item.bank.name }}\n                                                    </template>\n                                                    <template slot=\"item\" slot-scope=\"{ item }\">\n                                                        {{ item.bank.abbr }} - {{ item.bank.name }}\n                                                    </template>\n                                                </v-select>\n                                            </v-col>\n                                        </v-row>\n                                        <kendo-datasource ref=\"fromDS\"\n                                            :data=\"fromAccountEntries\"\n                                            :change=\"onFromDSChanges\" />\n\n                                        <kendo-grid id=\"fromGrid\"\n                                            ref=\"fromGrid\" \n                                            class=\"grid-function\"\n                                            :data-source-ref=\"'fromDS'\" \n                                            :sortable=\"false\" \n                                            :filterable=\"false\" \n                                            :column-menu=\"true\" \n                                            :editable=\"true\"\n                                            :scrollable-virtual=\"true\"\n                                        >\n                                            <kendo-grid-column\n                                                :title=\"$t('no.')\"\n                                                :template=\"rowNumberTmplFrom\"\n                                                :width=\"45\"\n                                                :column-menu=\"false\"\n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5;',\n                                                    class: 'text-products'\n                                                }\"\n                                                :attributes=\"{\n                                                    style: 'text-align: products'\n                                                }\"/>\n                                            <kendo-grid-column \n                                                :field=\"'account'\" \n                                                :title=\"$t('account')\"\n                                                :width=\"200\"\n                                                :template=\"this.$store.state.accounting.accountLanguage === 'English'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '<span>#=account.number#</span> <span>#=account.name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '<span>#=account.number#</span> <span>#=account.local_name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\"\n                                                :editor=\"fromAccountEditor\" \n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n\t\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t\t:field=\"'secondary_account'\"\n\t\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('s_account')\"\n\t\t\t\t\t\t\t\t\t\t\t\t:template=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.accounting.accountLanguage ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'English'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '<span>#=secondary_account.number#</span> <span>#=secondary_account.name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '<span>#=secondary_account.number#</span> <span>#=secondary_account.local_name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t:width=\"200\"\n\t\t\t\t\t\t\t\t\t\t\t\t:hidden=\"!this.$store.state.accounting.secondaryAccount\"\n\t\t\t\t\t\t\t\t\t\t\t\t:editor=\"AccountSecondaryEditor\"\n\t\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n                                            <kendo-grid-column\n                                                :field=\"'description'\"\n                                                :title=\"$t('description')\"\n                                                :width=\"200\"\n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n                                            <kendo-grid-column\n                                                :field=\"'ref_number'\"\n                                                :title=\"$t('reference_no')\"\n                                                :width=\"160\"\n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n                                            <kendo-grid-column\n                                                :field=\"'amount'\"\n                                                :title=\"$t('amount')\"\n                                                :format=\"'{0:n}'\"\n                                                :width=\"150\"\n                                                :headerAttributes=\"{style: 'text-align: right; background-color: #EDF1F5'}\"\n                                                :attributes=\"{style: 'text-align: right; '}\"/>\n                                            <kendo-grid-column\n                                                :command=\"{ iconClass: 'k-icon k-i-trash', text: 'Delete', click: removeRowFrom, class: 'btn-plus' }\"\n                                                :title=\"'&nbsp;'\"\n                                                :width=\"100\"\n                                                :headerAttributes=\"{\n                                                    style: 'text-align: right; background-color: #EDF1F5'\n                                                }\"\n                                            />\n                                        </kendo-grid>\n                                        <v-row style=\"background-color: #fff;\">\n                                            <v-col sm=\"1\" cols=\"12\" class=\"pb-0\">\n                                                <v-btn class=\"float-left rounded-0 btn_plus\" @click=\"addRowFrom\">\n                                                    <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                                                </v-btn>\n                                            </v-col>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                                <template>\n                                                    <v-file-input class=\"mt-0 pt-0 \" sm=\"3\" cols=\"6\"\n                                                                :placeholder=\"$t('attachment')\"\n                                                                multiple\n                                                                prepend-icon=\"mdi-paperclip\"\n                                                    >\n                                                        <template v-slot:selection=\"{ text }\">\n                                                            <v-chip\n                                                                    small\n                                                                    label\n                                                                    color=\"primary\"\n                                                            >\n                                                                {{ text }}\n                                                            </v-chip>\n                                                        </template>\n                                                    </v-file-input>\n                                                </template>\n                                            </v-col>\n\n                                        </v-row>\n                                    </v-col>\n                                </v-row>\n                                <v-row>\n                                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                        <v-row>\n                                            <v-col sm=\"1\" cols=\"12\" class=\"pt-0\">\n                                                <h2 class=\"mb-0\">{{$t('to_from')}}</h2>\n                                            </v-col>\n                                            <v-col sm=\"6\" cols=\"12\" class=\"pt-0 pr-0\">\n                                                <v-checkbox class=\"ma-0 pt-2  float-left\"\n                                                    v-model=\"useToBank\"\n                                                    @change=\"setAccountByToBank\"\n                                                />\n                                                <p class=\"mb-0 mt-2 \">{{$t('select_bank_to')}}</p>\n                                            </v-col>\n                                            <v-col sm=\"3\" cols=\"12\" class=\"pt-0 pl-0\">\n                                                <v-select class=\"mt-1\"\n                                                    v-if=\"useToBank\"\n                                                    placeholder=\"Select Bank\"\n                                                    v-model=\"toBankId\"\n                                                    :items=\"bankAccounts\"\n                                                    item-text=\"bank.name\"\n                                                    item-value=\"bank.uuid\"\n                                                    @change=\"setAccountByToBank\"\n                                                    outlined>\n                                                    <template slot=\"selection\" slot-scope=\"{ item }\">\n                                                        {{ item.bank.abbr }} - {{ item.bank.name }}\n                                                    </template>\n                                                    <template slot=\"item\" slot-scope=\"{ item }\">\n                                                        {{ item.bank.abbr }} - {{ item.bank.name }}\n                                                    </template>\n                                                </v-select>\n                                            </v-col>\n                                        </v-row>\n                                        <kendo-datasource ref=\"toDS\"\n                                            :data=\"toAccountEntries\"\n                                            :change=\"onToDSChanges\" />\n\n                                        <kendo-grid id=\"toGrid\"\n                                            ref=\"toGrid\" \n                                            class=\"grid-function\"\n                                            :data-source-ref=\"'toDS'\" \n                                            :sortable=\"false\" \n                                            :filterable=\"false\" \n                                            :column-menu=\"true\" \n                                            :editable=\"true\"\n                                            :scrollable-virtual=\"true\"\n                                        >\n                                            <kendo-grid-column\n                                                :title=\"$t('no.')\"\n                                                :template=\"rowNumberTmplTo\"\n                                                :width=\"45\"\n                                                :column-menu=\"false\"\n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5;',\n                                                    class: 'text-products'\n                                                }\"\n                                                :attributes=\"{\n                                                    style: 'text-align: products'\n                                                }\"/>\n                                            <kendo-grid-column \n                                                :field=\"'account'\" \n                                                :title=\"$t('account')\"\n                                                :width=\"200\"\n                                                :template=\"this.$store.state.accounting.accountLanguage === 'English'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '<span>#=account.number#</span> <span>#=account.name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '<span>#=account.number#</span> <span>#=account.local_name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\"\n                                                :editor=\"toAccountEditor\" \n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n\t\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t\t:field=\"'secondary_account'\"\n\t\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('s_account')\"\n\t\t\t\t\t\t\t\t\t\t\t\t:template=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.accounting.accountLanguage ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'English'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '<span>#=secondary_account.number#</span> <span>#=secondary_account.name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '<span>#=secondary_account.number#</span> <span>#=secondary_account.local_name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t:width=\"200\"\n\t\t\t\t\t\t\t\t\t\t\t\t:hidden=\"!this.$store.state.accounting.secondaryAccount\"\n\t\t\t\t\t\t\t\t\t\t\t\t:editor=\"AccountSecondaryEditor\"\n\t\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n                                            <kendo-grid-column\n                                                :field=\"'description'\"\n                                                :title=\"$t('description')\"\n                                                :width=\"200\"\n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n                                            <kendo-grid-column\n                                                :field=\"'ref_number'\"\n                                                :title=\"$t('reference_no')\"\n                                                :width=\"160\"\n                                                :headerAttributes=\"{\n                                                    style: 'background-color: #EDF1F5'\n                                                }\"/>\n                                            <kendo-grid-column\n                                                :field=\"'amount'\"\n                                                :title=\"$t('amount')\"\n                                                :format=\"'{0:n}'\"\n                                                :width=\"150\"\n                                                :headerAttributes=\"{style: 'text-align: right; background-color: #EDF1F5'}\"\n                                                :attributes=\"{style: 'text-align: right; '}\"/>\n                                            <kendo-grid-column\n                                                :command=\"{ iconClass: 'k-icon k-i-trash', text: 'Delete', click: removeRowTo, class: 'btn-plus' }\"\n                                                :title=\"'&nbsp;'\"\n                                                :width=\"100\"\n                                                :headerAttributes=\"{\n                                                    style: 'text-align: right; background-color: #EDF1F5'\n                                                }\"\n                                            />\n                                        </kendo-grid>\n                                        <v-row style=\"background-color: #fff;\">\n                                            <v-col sm=\"1\" cols=\"12\" class=\"pb-0\">\n                                                <v-btn class=\"float-left rounded-0 btn_plus\" @click=\"addRowTo\">\n                                                    <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                                                </v-btn>\n                                            </v-col>\n                                            <v-col sm=\"5\" cols=\"12\" class=\"pb-0\">\n                                                <template>\n                                                    <v-file-input class=\"mt-0 pt-0 \" sm=\"3\" cols=\"6\"\n                                                                :placeholder=\"$t('attachment')\"\n                                                                multiple\n                                                                prepend-icon=\"mdi-paperclip\"\n                                                    >\n                                                        <template v-slot:selection=\"{ text }\">\n                                                            <v-chip\n                                                                    small\n                                                                    label\n                                                                    color=\"primary\"\n                                                            >\n                                                                {{ text }}\n                                                            </v-chip>\n                                                        </template>\n                                                    </v-file-input>\n                                                </template>\n                                            </v-col>\n                                            <v-col sm=\"3\" cols=\"12\" class=\" pb-0 pt-5\">\n                                                <p>\n                                                    <span class=\"float-left\">{{$t('total_from')}}</span>\n                                                    <span class=\"float-right text-bold\" v-text=\"totalFrom\" />\n                                                </p>\n                                            </v-col>\n                                            <v-col sm=\"3\" cols=\"12\" class=\"pb-0  pt-5\">\n                                                <p>\n                                                    <span class=\"float-left\">{{$t('total_to')}}</span>\n                                                    <span class=\"float-right text-bold\" v-text=\"totalTo\" />\n                                                </p>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                </v-row>\n\n                                <v-divider/>\n                                <v-card outlined dense class=\"no_border function_footer\">\n                                    <!-- Warning Message -->\n                                    <v-alert type=\"warning\"\n                                        v-model=\"alert\"\n                                        dismissible>\n                                        <span v-html=\"errorMessage\"/>\n                                    </v-alert>\n                                    \n                                    <v-menu>\n                                        <template v-slot:activator=\"{ on }\">\n                                            <v-btn  class=\"mr-2 text-capitalize  black--text float-left\" v-on=\"on\" >\n                                                {{$t('select_template')}}\n                                                <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                            </v-btn>\n                                        </template>\n                                        <v-list>\n                                            <v-list-item v-for=\"(item, index) in templates\" :key=\"index\" >\n                                                <v-list-item-title>{{ item.title }}</v-list-item-title>\n                                            </v-list-item>\n                                        </v-list>\n                                    </v-menu>\n                                    <v-btn color=\"primary\" outlined class=\"text-capitalize  black--text float-left\" @click=\"cancel\">{{$t('cancel')}}</v-btn>\n                                    <v-menu>\n                                        <template v-slot:activator=\"{ on }\">\n                                            <v-btn   class=\"ml-2 float-right text-capitalize  black--text\" v-on=\"on\" >\n                                                {{$t('save_option')}}\n                                                <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                            </v-btn>\n                                        </template>\n                                        <v-list rounded>\n                                            <v-list-item-group >\n                                                <v-list-item v-if=\"!isEdit\">\n                                                    <v-list-item-content>\n                                                        <v-list-item-title @click=\"onSaveOptionClick(SaveOption.SAVENEW)\">{{$t('save_new')}}</v-list-item-title>\n                                                    </v-list-item-content>\n                                                </v-list-item>\n                                                <v-list-item>\n                                                    <v-list-item-content>\n                                                        <v-list-item-title @click=\"onSaveOptionClick(SaveOption.SAVEPRINT)\">{{$t('save_print')}}</v-list-item-title>\n                                                    </v-list-item-content>\n                                                </v-list-item>\n                                                <v-list-item>\n                                                    <v-list-item-content>\n                                                        <v-list-item-title @click=\"onSaveOptionClick(SaveOption.SAVEDRAFT)\">{{$t('save_draft')}}</v-list-item-title>\n                                                    </v-list-item-content>\n                                                </v-list-item>\n                                            </v-list-item-group>\n                                        </v-list>\n                                    </v-menu>\n                                    <v-btn color=\"primary\" class=\"float-right  white--text text-capitalize \" @click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\">{{$t('save_close')}}</v-btn>\n\n                                </v-card>\n                            </v-card>\n                        </v-card>\n                    </v-form>\n                </v-col>\n            </v-row>\n            <LoadingMe\n                    :isLoading=\"showLoading\"\n                    :fullPage=\"true\"\n                    :myLoading=\"true\"\n                    :alertMessage=\"loadingAlert\"\n                    :color=\"loadingColorAlert\"\n                    :alertText=\"loadingTextAlert\"/>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\n    import {i18n} from '@/i18n';\n\timport kendo from \"@progress/kendo-ui\";\n\timport Helper from \"@/helper.js\";\n\timport {\n\t\tJournalModel,\n\t\tJournalEntryModel,\n\t\tJournalEntryExtendedModel,\n\t\tCurrencyModel,\n\t\tExchangeRateModel,\n\t\tAccountModel,\n\t} from \"@/scripts/model/AppModels\";\n\timport AccountSecondaryEditor from \"@/scripts/kendo_editor/AccountSecondary\";\n\n\t/* Store */\n\timport store from \"@/store\"\n\tconst institute = store.state.institute.institute\n\timport { mapState } from 'vuex';\n\n\tconst { journalHandler } = require(\"@/scripts/AppHandlers\");\n\tconst { EntityType, SaveOption } = require(\"@/scripts/default_setup/Collections\");\n\n    export default {\n        name: \"CashTransaction\",\n        components:{\n\t\t\t\"LoadingMe\": () => import('@/components/Loading'),\n\t\t\t\"app-datepicker\": () => import('@/components/custom_templates/DatePickerComponent'),\n\t\t\t\"app-currency-dropdownlist\": () => import('@/components/dropdownlist/Currency'),\n\t\t},\n\t\tprops: {\n\t\t\tinitJournal: {\n\t\t\t\ttype: JournalModel\n\t\t\t},\n\t\t},\n\t\tdata: () => ({\n\t\t\t/* Obj */\n\t\t\tjournal: new JournalModel(),\n\t\t\tcurrency\t\t: new CurrencyModel(institute.baseCurrency),\n\t\t\texchangeRate\t: new ExchangeRateModel(institute.baseCurrency),\n\t\t\tjournalEntries: [],\n\t\t\tfromAccountEntries : [],\n\t\t\ttoAccountEntries   : [],\n\t\t\t// Accounts\n\t\t\tfromAccounts: [],\n\t\t\ttoAccounts: [],\n\t\t\t// Banks\n\t\t\tuseFromBank \t: false,\n\t\t\tuseToBank \t\t: false,\n\t\t\tfromBankId \t\t: '',\n\t\t\ttoBankId \t\t: '',\n\t\t\tcashTransactionTypes: EntityType.CASH_TRANSACTION_TYPES,\n\t\t\t// Other\n\t\t\ttotalFrom       : 0,\n\t\t\ttotalTo         : 0,\n\t\t\ttemplates: [],\n\t\t\tuser: Helper.getUser(),\n\t\t\t/* Editors */\n\t\t\tAccountSecondaryEditor : AccountSecondaryEditor,\n\t\t\t// Form validation\n\t\t\tvalid: true,\n\t\t\tisEdit: false,\n\t\t\talert: false,\n\t\t\terrorMessage: \"\",\n\t\t\tsaveMode: \"\",\n\t\t\tSaveOption: SaveOption,\n\t\t\t// LoadingMe\n\t\t\tshowLoading: false,\n\t\t\tloadingAlert: false,\n\t\t\tloadingColorAlert: \"\",\n\t\t\tloadingTextAlert: \"\",\n        }),\n        methods:  {\n\t\t\t// Initialize\n\t\t\tasync initialize() {\n\t\t\t\tthis.showLoading = true;\n\t\t\t\t\n\t\t\t\t/* Call account */\n\t\t\t\tawait this.$store.dispatch('accounting/getAccounts');\n\t\t\t\tawait this.$store.dispatch('banking/getBankAccounts');\n\n\t\t\t\tthis.fromAccounts = this.accounts;\n\t\t\t\tthis.toAccounts = this.accounts;\n\t\t\t\t\n\t\t\t\tthis.showLoading = false;\n\t\t\t},\n\t\t\t// Initial Data\n\t\t\tinitialData(){\n\t\t\t\tif(this.initJournal){// Edit Mode\n\t\t\t\t\tthis.journal = this.initJournal;\n\t\t\t\t\tthis.bindData();\n\t\t\t\t}else{// Brand New Mode\n\t\t\t\t\tthis.setDefaultData();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Set default data\n\t\t\tsetDefaultData () {\n\t\t\t\t// Brand New Mode\n\t\t\t\tthis.isEdit = false;\n\n\t\t\t\tthis.journal = new JournalModel({\n\t\t\t\t\tjournal_type: EntityType.AUTO_JOURNAL,\n\t\t\t\t\ttransaction_type: EntityType.CASH_TRANSACTION_TYPES[0].value,\n\t\t\t\t\tjournal_date: new Date().toISOString().substr(0, 10),\n\t\t\t\t});\n\n\t\t\t\t// Generate Number\n\t\t\t\tthis.generateNumber();\n\n\t\t\t\t// Add two default rows\n\t\t\t\tfor (let index = 0; index < 2; index++) {\n\t\t\t\t\tthis.addRowFrom();\n\t\t\t\t\tthis.addRowTo();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Bind data from prop for edit mode\n\t\t\tasync bindData() {\n\t\t\t\tthis.showLoading = true;\n\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.isEdit = true;\n\n\t\t\t\t// Currency\n\t\t\t\tthis.currency = new CurrencyModel(this.journal.journal_entries[0].currency);\n\t\t\t\tthis.exchangeRate = new ExchangeRateModel(this.journal.journal_entries[0].currency);\n\t\t\t\tthis.exchangeRate.id = this.journal.journal_entries[0].exchange_rate_uuid;\n\t\t\t\tthis.exchangeRate.rate = this.journal.journal_entries[0].exchange_rate;\n\n\t\t\t\tlet totalFrom = 0,\n\t\t\t\t\ttotalTo = 0,\n\t\t\t\t\tfromEntries = [],\n\t\t\t\t\ttoEntries = [],\n\t\t\t\t\tsecondaryAccounts = await this.$store.dispatch(\"accounting/getSecondaryAccounts\");\n\n\t\t\t\tthis.journal.journal_entries.forEach(value => {\n\t\t\t\t\tlet je = new JournalEntryExtendedModel(value);\n\n\t\t\t\t\t/* Secondary Account */\n\t\t\t\t\tje.secondary_account = new AccountModel(\n\t\t\t\t\t\tsecondaryAccounts.find((i) => i.uuid === value.secondary_acc_uuid)\n\t\t\t\t\t);\n\n\t\t\t\t\tif(value.amount > 0){// Dr side\n\t\t\t\t\t\tfromEntries.push(je);\n\t\t\t\t\t\ttotalFrom += value.amount;\n\t\t\t\t\t}else{// Cr side\n\t\t\t\t\t\tje.amount = Math.abs(value.amount);\n\t\t\t\t\t\ttoEntries.push(je);\n\t\t\t\t\t\ttotalTo += je.amount;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.totalFrom = totalFrom;\n\t\t\t\tthis.totalTo = totalTo;\n\t\t\t\tthis.fromAccountEntries = fromEntries;\n\t\t\t\tthis.toAccountEntries = toEntries;\n\n\t\t\t\tthis.showLoading = false;\n\t\t\t},\n\t\t\t// Number\n\t\t\tasync generateNumber() {\n\t\t\t\tif(!this.isEdit){\n\t\t\t\t\tlet num = await Helper.generateAccountingNumber(this.journal.transaction_type, this.journal.journal_date);\n\t\t\t\t\t\n\t\t\t\t\tthis.journal.number = num.number;\n\t\t\t\t\tthis.journal.prefix_format = num.prefix_format;\n\t\t\t\t}\n            },\n\t\t\t// Get Exchange Rate\n\t\t\tasync getExchangeRate() {\n\t\t\t\tif(this.journal.journal_date && this.currency.code !== ''){\n\t\t\t\t\tthis.exchangeRate = await Helper.getLastExchangeRateByDate(this.journal.journal_date, this.currency.code);\n\t\t\t\t}else{\n\t\t\t\t\tthis.exchangeRate = new ExchangeRateModel(institute.baseCurrency);\n\t\t\t\t}\n\t\t\t},\n\t\t\t/* Kendo */\n\t\t\t// DataSource Changes\n\t\t\tonFromDSChanges (e) {\n\t\t\t\tif(e.field){\n\t\t\t\t\tlet dataRow = e.items[0];\n\n\t\t\t\t\tif (e.field === \"account\") {\n\t\t\t\t\t\tdataRow.set(\"account_uuid\", dataRow.account.uuid);\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.addExtraRowFrom(dataRow.uid);\n\t\t\t\t\t} else if (e.field === \"secondary_account\") {\n\t\t\t\t\t\tif (dataRow.secondary_account !== null) {\n\t\t\t\t\t\t\tdataRow.set(\"secondary_acc_uuid\", dataRow.secondary_account.uuid);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Set default when deselect\n\t\t\t\t\t\t\tdataRow.set(\"secondary_acc_uuid\", \"\");\n\t\t\t\t\t\t\tdataRow.set(\"secondary_account\", new AccountModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dataSourceAutoCalculate();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonToDSChanges (e) {\n\t\t\t\tif(e.field){\n\t\t\t\t\tlet dataRow = e.items[0];\n\t\t\t\t\t\n\t\t\t\t\tif (e.field === \"account\") {\n\t\t\t\t\t\tdataRow.set(\"account_uuid\", dataRow.account.uuid);\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.addExtraRowFrom(dataRow.uid);\n\t\t\t\t\t} else if (e.field === \"secondary_account\") {\n\t\t\t\t\t\tif (dataRow.secondary_account !== null) {\n\t\t\t\t\t\t\tdataRow.set(\"secondary_acc_uuid\", dataRow.secondary_account.uuid);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Set default when deselect\n\t\t\t\t\t\t\tdataRow.set(\"secondary_acc_uuid\", \"\");\n\t\t\t\t\t\t\tdataRow.set(\"secondary_account\", new AccountModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dataSourceAutoCalculate();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Grid Custom Editor\n\t\t\tfromAccountEditor(container, options) {\n\t\t\t\treturn Helper.accountEditor(container, options, this.fromAccounts);\n\t\t\t},\n\t\t\ttoAccountEditor(container, options) {\n\t\t\t\treturn Helper.accountEditor(container, options, this.toAccounts);\n\t\t\t},\n\t\t\t// Auto Calculate In DataSource\n\t\t\tdataSourceAutoCalculate () {\n\t\t\t\tlet fromDS = this.$refs.fromDS.kendoWidget(),\n\t\t\t\t\ttoDS = this.$refs.toDS.kendoWidget(),\n\t\t\t\t\ttotalFrom = 0, totalTo = 0;\n\t\t\t\t\n\t\t\t\t// Sum\n\t\t\t\tfromDS.data().forEach(value => {\n\t\t\t\t\ttotalFrom += kendo.parseFloat(value.amount)\n\t\t\t\t})\n\t\t\t\ttoDS.data().forEach(value => {\n\t\t\t\t\ttotalTo += kendo.parseFloat(value.amount)\n\t\t\t\t})\n\n\t\t\t\tthis.totalFrom = totalFrom;\n\t\t\t\tthis.totalTo = totalTo;\n\t\t\t},\n\t\t\t// Row Number Template\n\t\t\trowNumberTmplFrom (dataItem) {\n\t\t\t\tlet ds = this.$refs.fromDS.kendoWidget(),\n\t\t\t\t\tindex = ds.indexOf(dataItem);\n\n\t\t\t\treturn index + 1;\n            },\n            rowNumberTmplTo (dataItem) {\n\t\t\t\tlet ds = this.$refs.toDS.kendoWidget(),\n\t\t\t\t\tindex = ds.indexOf(dataItem);\n\n\t\t\t\treturn index + 1;\n\t\t\t},\n\t\t\t// Add New Row\n\t\t\taddRowFrom () {\n\t\t\t\tlet ds = this.$refs.fromDS.kendoWidget(),\n\t\t\t\t\tlast = ds.total(),\n\t\t\t\t\tje = new JournalEntryExtendedModel();\n\n\t\t\t\tds.insert(last, je);\n            },\n            addRowTo () {\n\t\t\t\tlet ds = this.$refs.toDS.kendoWidget(),\n\t\t\t\t\tlast = ds.total(),\n\t\t\t\t\tje = new JournalEntryExtendedModel();\n\n\t\t\t\tds.insert(last, je);\n\t\t\t},\n\t\t\t// Add Extra Row\n\t\t\taddExtraRowFrom (uid) {\n\t\t\t\tlet ds = this.$refs.fromDS.kendoWidget(),\n\t\t\t\t\ttotal = ds.total(),\n\t\t\t\t\trow = ds.getByUid(uid),\n\t\t\t\t\tindex = ds.indexOf(row);\n\n\t\t\t\tif(index == total - 1){\n\t\t\t\t\tthis.addRowFrom();\n\t\t\t\t}\n            },\n            addExtraRowTo (uid) {\n\t\t\t\tlet ds = this.$refs.toDS.kendoWidget(),\n\t\t\t\t\ttotal = ds.total(),\n\t\t\t\t\trow = ds.getByUid(uid),\n\t\t\t\t\tindex = ds.indexOf(row);\n\n\t\t\t\tif(index == total - 1){\n\t\t\t\t\tthis.addRowTo();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Remove Row\n\t\t\tremoveRowFrom (e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tlet grid = this.$refs.fromGrid.kendoWidget(),\n\t\t\t\t\tds = grid.dataSource,\n\t\t\t\t\tdataItem = grid.dataItem(kendo.jQuery(e.currentTarget).closest(\"tr\"));\n\t\t\t\t\n\t\t\t\tif(ds.data().length > 2){\n\t\t\t\t\tds.remove(dataItem);\n\t\t\t\t}\n            },\n            removeRowTo (e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tlet grid = this.$refs.toGrid.kendoWidget(),\n\t\t\t\t\tds = grid.dataSource,\n\t\t\t\t\tdataItem = grid.dataItem(kendo.jQuery(e.currentTarget).closest(\"tr\"));\n\t\t\t\t\n\t\t\t\tif(ds.total() > 2){\n\t\t\t\t\tds.remove(dataItem);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Set Account By Bank\n\t\t\tsetAccountByFromBank(){\n\t\t\t\tlet ds = this.$refs.fromDS.kendoWidget();\n\t\t\t\tds.data([]);\n\n\t\t\t\t// On use bank checkbox changes\n\t\t\t\tif(!this.useFromBank){\n\t\t\t\t\tthis.fromBankId = '';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// On bank dropdownlist changes\n\t\t\t\tif(this.fromBankId !== ''){\n\t\t\t\t\tthis.fromAccounts = this.getAccountByBankId(this.fromBankId);\n\t\t\t\t} else {\n\t\t\t\t\tthis.fromAccounts = this.accounts;\n\t\t\t\t}\n\n\t\t\t\tthis.addRowFrom();\n\t\t\t\tthis.addRowFrom();\n\t\t\t},\n\t\t\tsetAccountByToBank(){\n\t\t\t\tlet ds = this.$refs.toDS.kendoWidget();\n\t\t\t\tds.data([]);\n\n\t\t\t\t// On use bank checkbox changes\n\t\t\t\tif(!this.useToBank){\n\t\t\t\t\tthis.toBankId = '';\n\t\t\t\t}\n\n\t\t\t\t// On bank dropdownlist changes\n\t\t\t\tif(this.toBankId !== ''){\n\t\t\t\t\tthis.toAccounts = this.getAccountByBankId(this.toBankId);\n\t\t\t\t} else {\n\t\t\t\t\tthis.toAccounts = this.accounts;\n\t\t\t\t}\n\n\t\t\t\tthis.addRowTo();\n\t\t\t\tthis.addRowTo();\n\t\t\t},\n\t\t\t// Get account by bank Id\n\t\t\tgetAccountByBankId(bankId){\n\t\t\t\tlet accounts = [];\n\n\t\t\t\tthis.bankAccounts.forEach(value => {\n\t\t\t\t\tif(value.bank.uuid === bankId){\n\t\t\t\t\t\taccounts.push(new AccountModel(value.account));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn accounts;\n\t\t\t},\n\t\t\t// Shrink Data\n\t\t\tshrinkData () {\n\t\t\t\t// Journal Date\n\t\t\t\tthis.journal.journal_date = Helper.toISODate(this.journal.journal_date);\n\t\t\t\t\n\t\t\t\t// User\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\tthis.journal.modified_by = this.user;\n\t\t\t\t} else {\n\t\t\t\t\tthis.journal.created_by = this.user;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet entries = [],\n\t\t\t\t\tfromDS = this.$refs.fromDS.kendoWidget(),\n\t\t\t\t\ttoDS = this.$refs.toDS.kendoWidget();\n\n\t\t\t\t// Filter From Account on Dr\n\t\t\t\ttoDS.data().forEach(value => {\n\t\t\t\t\tif(value.account.number !== \"\" && value.amount > 0){// Filter selected account\n\t\t\t\t\t\t// Currency\n\t\t\t\t\t\tvalue.set(\"currency\", new CurrencyModel(this.currency));\n\t\t\t\t\t\tvalue.set(\"exchange_rate_uuid\", this.exchangeRate.id);\n\t\t\t\t\t\tvalue.set(\"exchange_rate\", this.exchangeRate.rate);\n\t\t\t\t\t\tentries.push(new JournalEntryModel(value));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// Filter To Account on Cr\n\t\t\t\tfromDS.data().forEach(value => {\n\t\t\t\t\tif(value.account.number !== \"\" && value.amount > 0){// Filter selected account\n\t\t\t\t\t\t// Currency\n\t\t\t\t\t\tvalue.set(\"currency\", new CurrencyModel(this.currency));\n\t\t\t\t\t\tvalue.set(\"amount\", value.amount * -1); // Credit Side is negative\n\t\t\t\t\t\tvalue.set(\"exchange_rate_uuid\", this.exchangeRate.id);\n\t\t\t\t\t\tvalue.set(\"exchange_rate\", this.exchangeRate.rate);\n\n\t\t\t\t\t\tentries.push(new JournalEntryModel(value));\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// Journal Entries\n\t\t\t\tthis.journal.journal_entries = entries;\n\t\t\t},\n\t\t\t// Validating\n\t\t\tvalidateForm () {\n\t\t\t\tlet result = true,\n\t\t\t\t\tfromDS = this.$refs.fromDS.kendoWidget(),\n\t\t\t\t\ttoDS = this.$refs.toDS.kendoWidget(),\n\t\t\t\t\tmsg = '', countEmptyFrom = 0, countEmptyTo = 0,\n\t\t\t\t\tsecondaryAccountAmount = 0;\n\n\t\t\t\t//FROM\n\t\t\t\tfromDS.data().forEach((value, index) => {\n\t\t\t\t\t// No account\n                    if(value.account.name === '' && value.amount > 0){\n                        result = false;\n                        msg += `<p>${i18n.t(\"please_select_from_account_at_row_number\")} ${index + 1}</p>`;\n                    }\n\n                    // No amount\n                    if(value.account.name !== '' && value.amount === 0){\n                        result = false;\n                        msg += `<p>${value.account.name} ${i18n.t(\"has_no_amount\")}</p>`;\n                    }\n\n                    // Count From Accounts\n                    if(value.account.name !== '' && value.amount > 0){\n                        countEmptyFrom++;\n                    }\n\n\t\t\t\t\t/* Secondary Sum Amount */\n\t\t\t\t\tif(value.secondary_account.uuid !== \"\"){\n\t\t\t\t\t\tsecondaryAccountAmount += value.amount;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// Empty Row From Accounts\n\t\t\t\tif(countEmptyFrom === 0){\n\t\t\t\t\tmsg += `<p>${i18n.t(\"please_select_from_account\")}</p>`;\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\t//TO\n\t\t\t\ttoDS.data().forEach((value, index) => {\n\t\t\t\t\t// No account\n                    if(value.account.name === '' && value.amount > 0){\n                        result = false;\n                        msg += `<p>${i18n.t(\"please_select_to_account_at_row_number\")} ${index + 1}</p>`;\n                    }\n\n                    // No amount\n                    if(value.account.name !== '' && value.amount === 0){\n                        result = false;\n                        msg += `<p>${value.account.name} ${i18n.t(\"has_no_amount\")}</p>`;\n                    }\n\n                    // Count To Accounts\n                    if(value.account.name !== '' && value.amount > 0){\n                        countEmptyTo++;\n                    }\n\n\t\t\t\t\t/* Secondary Sum Amount */\n\t\t\t\t\tif(value.secondary_account.uuid !== \"\"){\n\t\t\t\t\t\tsecondaryAccountAmount += value.amount * -1;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// Empty Row To\n\t\t\t\tif(countEmptyTo === 0){\n\t\t\t\t\tmsg += `<p>${i18n.t(\"please_select_to_account\")}</p>`;\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\t// Balance From and To\n\t\t\t\tif(kendo.parseFloat(this.totalFrom) !== kendo.parseFloat(this.totalTo)){\n\t\t\t\t\tmsg += `<p>${i18n.t(\"total_from_and_total_to_is_not_balance\")}</p>`;\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\t/* Secondary Account Balance */\n\t\t\t\tif(secondaryAccountAmount !== 0){\n\t\t\t\t\tmsg += `<p>${i18n.t(\"secondary_account_unbalance\")}</p>`;\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\t// Show Alert\n\t\t\t\tthis.errorMessage = msg;\n\t\t\t\tthis.alert = false;\n\t\t\t\tif(result===false){\n\t\t\t\t\tthis.alert = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t// All Saves\n\t\t\tasync onSaveOptionClick(mode) {\n\t\t\t\tif (this.$refs.form.validate() && this.validateForm()) {\n\t\t\t\t\tlet isValidClosingDate = await Helper.validateClosingDate(this.journal.journal_date);\n\t\t\t\t\tif (isValidClosingDate) {\n\t\t\t\t\t\tthis.saveMode = mode;\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcancel () {\n\t\t\t\tthis.$swal({\n\t\t\t\t\ttitle: i18n.t('msg_title_warning'),\n\t\t\t\t\ttext: i18n.t('msg_discard'),\n\t\t\t\t\ticon: \"warning\",\n\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\tcancelButtonText: i18n.t('cancel'),\n\t\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\t\tconfirmButtonText: i18n.t('discard'),\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tif (result.value) {\n\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tclear () {\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.saveMode = '';\n\t\t\t\t\n\t\t\t\tthis.useFromBank = false;\n\t\t\t\tthis.useToBank = false;\n\n\t\t\t\tthis.currency = new CurrencyModel(institute.baseCurrency);\n\t\t\t\tthis.exchangeRate = new ExchangeRateModel(institute.baseCurrency);\n\n\t\t\t\tlet fromDS = this.$refs.fromDS.kendoWidget();\n                fromDS.data([]);\n                let toDS = this.$refs.toDS.kendoWidget();\n                toDS.data([]);\n\n\t\t\t\tthis.setDefaultData();\n\t\t\t},\n\t\t\tsave () {\n                let self = this;\n\t\t\t\t\n\t\t\t\t// Draft Mode\n\t\t\t\tif (this.saveMode === SaveOption.SAVEDRAFT) {\n\t\t\t\t\tthis.journal.is_draft = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.journal.is_draft = 0;\n\t\t\t\t}\n\n\t\t\t\t// Shrink Data\n\t\t\t\tthis.shrinkData();\n\n\t\t\t\t// Sync Data\n\t\t\t\tthis.showLoading = true\n\t\t\t\tjournalHandler\n\t\t\t\t\t.save(new JournalModel(this.journal))\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (response) {\n\t\t\t\t\t\t\tself.responseStatus(response);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\t\tHelper.alertErrorMsg(error);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n                        self.showLoading = false;\n                    });\n\t\t\t},\n\t\t\t// Response Status\n\t\t\tresponseStatus(response) {\n\t\t\t\tif (response.status === 200) {\n\t\t\t\t\t/* Save Close or Delete Action */\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\t\tthis.goBackToViewPage();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Reset Data */\n\t\t\t\t\tthis.clear();\n\n\t\t\t\t\t/* Alert Success */\n\t\t\t\t\tthis.$snotify.success(i18n.t(\"successful\"));\n\t\t\t\t} else {\n\t\t\t\t\t/* Alert Error */\n\t\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Go back to view page after edit mode\n\t\t\tgetJournal(){\n\t\t\t\treturn new JournalModel(this.journal);\n\t\t\t},\n\t\t\tgoBackToViewPage(){\n\t\t\t\tthis.$router.replace({ name: 'Cash Transaction View', params: { initJournal: this.getJournal() } });\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tinitJournal () {\n\t\t\t\tthis.initialData();\n\t\t\t},\n\t\t},\n\t\tcomputed: mapState({\n\t\t\taccounts: state => state.accounting.accounts,\n\t\t\tbankAccounts: state => state.banking.bankAccounts,\n\t\t}),\n\t\tcreated () {\n\t\t\tthis.initialize();\n\t\t},\n\t\tmounted () {\n\t\t\t// Initial Data\n\t\t\tthis.initialData();\n\t\t}\n    };\n</script>\n\n<style scoped>\n    .function_content {\n        padding: 0 25px 25px;\n        border-bottom: 0;\n    }\n    .attachment_table.theme--light.v-data-table{\n        background-color: transparent !important;\n    }\n    .from_to{\n        font-size: 26px !important;\n    }\n\n    @media (min-width: 1264px) {\n        .container {\n            /* max-width: 1185px; */\n            max-width: 1080px !important;\n        }\n    }\n\n    @media (max-width: 576px) {\n        .mb-6 {\n            margin-bottom: 0 !important;\n        }\n    }\n</style>"]}]}
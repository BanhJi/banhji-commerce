{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/components/Attachment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/components/Attachment.vue","mtime":1641438291801},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiCmltcG9ydCB7aTE4bn0gZnJvbSAiQC9pMThuIjsKY29uc3QgYmlsbGluZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaW52b2ljZS9oYW5kbGVyL2JpbGxpbmdIYW5kbGVyIik7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICIiLAogICAgcHJvcHM6IFsnaW5pdEFjY291bnQnXSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKSwKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgZmlsZXM6IFtdLAogICAgICAgICAgICBhdHRhY2htZW50czogW10sCiAgICAgICAgICAgIGF0dGFjaG1lbnQ6IHt9LAogICAgICAgICAgICBmaWxlRGVzYzogJycsCiAgICAgICAgICAgIGF0dGFjaG1lbnRMaXN0OiBbXQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25GaWxlQ2hhbmdlKGUpIHsKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCdlJyxlKQogICAgICAgICAgICB0aGlzLiRlbWl0KCdpbml0RGF0YScsIHRoaXMuYXR0YWNobWVudCk7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVEZXNjID0gZS5uYW1lOwogICAgICAgICAgICAgICAgdGhpcy5maWxlTmFtZSA9IGUubmFtZTsKICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNpemUgPSBlLnNpemU7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVUeXBlID0gZS50eXBlOwogICAgICAgICAgICAgICAgbGV0IGlucHV0ID0gdGhpcy5maWxlczsKICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IHlvdSBoYXZlIGEgZmlsZSBiZWZvcmUgYXR0ZW1wdGluZyB0byByZWFkIGl0CiAgICAgICAgICAgICAgICBpZiAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgICAgICAvLyBEZWZpbmUgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBydW4sIHdoZW4gRmlsZVJlYWRlciBmaW5pc2hlcyBpdHMgam9iCiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IGFycm93IGZ1bmN0aW9uIHVzZWQgaGVyZSwgc28gdGhhdCAidGhpcy5pbWFnZURhdGEiIHJlZmVycyB0byB0aGUgaW1hZ2VEYXRhIG9mIFZ1ZSBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBpbWFnZSBhcyBiYXNlNjQgYW5kIHNldCB0byBpbWFnZURhdGEKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdGaWxlID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIHJlYWRlciBqb2IgLSByZWFkIGZpbGUgYXMgYSBkYXRhIHVybCAoYmFzZTY0IGZvcm1hdCkKICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGlucHV0KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW5wdXQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1cGxvYWRGaWxlKCl7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltZ0ZpbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmF0dGFjaG1lbnQudXVpZCB8fCAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuYXR0YWNobWVudC5uYW1lIHx8ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IHRoaXMuaW1nRmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZpbGVOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmZpbGVEZXNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHRoaXMuZmlsZVNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy5maWxlVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiQWNjb3VudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWQgIT09JycpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0hhbmRsZXIuYXR0YWNobWVudChkYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdGaWxlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcmMgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlRGVzYyA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVOYW1lID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNpemUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVUeXBlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZXMgICAgICA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygiU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRBdHRhY2htZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vIHRoaXMudHhuTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vIHdpbmRvdy5jb25zb2xlLmxvZygndHJhbnNhY3Rpb25zJywgdGhpcy50eG5MaXN0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoIlBsZWFzZSBjaGVjayBhZ2FpbiEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5lcnJvcigiUGxlYXNlIGJyb3dzZSB0byB1cGxvYWQgaW1hZ2UiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZEF0dGFjaG1lbnQoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaGFzT3duUHJvcGVydHkoJ2lkJykpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nQXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyRmlsdGVyID0gIj9pZD0iICsgdGhpcy5hdHRhY2htZW50LnV1aWQ7CiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0hhbmRsZXIuYXR0YWNobWVudExpc3Qoc3RyRmlsdGVyKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZ0F0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudExpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZpbGVVcmwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgaWYgKGRhdGFJdGVtLmZpbGVVcmwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBgPGEgdGFyZ2V0PSJfYmxhbmsiIHN0eWxlPSJjb2xvcjojRUQxQTNBICFpbXBvcnRhbnQiIGhyZWY9IiR7ZGF0YUl0ZW0uZmlsZVVybH0iPjxzcGFuPk9wZW48L3NwYW4+PC9hPmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGBgOwogICAgICAgIH0sCiAgICAgICAgYnl0ZVRvTUIoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgY29uc3QgRmlsZVNpemUgPSBkYXRhSXRlbS5zaXplIHx8IDA7IC8vIGluIE1pQgogICAgICAgICAgICBjb25zdCBtYXJrZXIgPSAxMDI0OyAvLyBDaGFuZ2UgdG8gMTAwMCBpZiByZXF1aXJlZAogICAgICAgICAgICBjb25zdCBkZWNpbWFsID0gMzsgLy8gQ2hhbmdlIGFzIHJlcXVpcmVkCiAgICAgICAgICAgIGNvbnN0IGtpbG9CeXRlcyA9IG1hcmtlcjsgLy8gT25lIEtpbG9ieXRlIGlzIDEwMjQgYnl0ZXMKICAgICAgICAgICAgY29uc3QgbWVnYUJ5dGVzID0gbWFya2VyICogbWFya2VyOyAvLyBPbmUgTUIgaXMgMTAyNCBLQgogICAgICAgICAgICBjb25zdCBnaWdhQnl0ZXMgPSBtYXJrZXIgKiBtYXJrZXIgKiBtYXJrZXI7IC8vIE9uZSBHQiBpcyAxMDI0IE1CCiAgICAgICAgICAgIC8vIGNvbnN0IHRlcmFCeXRlcyA9IG1hcmtlciAqIG1hcmtlciAqIG1hcmtlciAqIG1hcmtlcjsgLy8gT25lIFRCIGlzIDEwMjQgR0IKCiAgICAgICAgICAgIC8vIHJldHVybiBieXRlcyBpZiBsZXNzIHRoYW4gYSBLQgogICAgICAgICAgICBpZiAoRmlsZVNpemUgPCBraWxvQnl0ZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBGaWxlU2l6ZSArICIgQnl0ZXMiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHJldHVybiBLQiBpZiBsZXNzIHRoYW4gYSBNQgogICAgICAgICAgICBlbHNlIGlmIChGaWxlU2l6ZSA8IG1lZ2FCeXRlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIChGaWxlU2l6ZSAvIGtpbG9CeXRlcykudG9GaXhlZChkZWNpbWFsKSArICIgS0IiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHJldHVybiBNQiBpZiBsZXNzIHRoYW4gYSBHQgogICAgICAgICAgICBlbHNlIGlmIChGaWxlU2l6ZSA8IGdpZ2FCeXRlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIChGaWxlU2l6ZSAvIG1lZ2FCeXRlcykudG9GaXhlZChkZWNpbWFsKSArICIgTUIiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHJldHVybiBHQiBpZiBsZXNzIHRoYW4gYSBUQgogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAoRmlsZVNpemUgLyBnaWdhQnl0ZXMpLnRvRml4ZWQoZGVjaW1hbCkgKyAiIEdCIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyogdmFyIEZpbGVTaXplID0gZmlsZS5maWxlc1swXS5zaXplIC8gMTAyNCAvIDEwMjQ7IC8vIGluIE1pQgogICAgICAgICAgICAgICAgaWYgKEZpbGVTaXplID4gMikgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGaWxlIHNpemUgZXhjZWVkcyAyIE1pQicpOwogICAgICAgICAgICAgICAgICAgIC8vICQoZmlsZSkudmFsKCcnKTsgLy9mb3IgY2xlYXJpbmcgd2l0aCBKcXVlcnkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnRmlsZSBzaXplJyArIEZpbGVTaXplKTsKICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICB9LAogICAgICAgIGRlbGV0ZWRGdW5jdGlvbihlKXsKICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogaTE4bi50KCJtc2dfdGl0bGVfd2FybmluZyIpLAogICAgICAgICAgICAgICAgdGV4dDogaTE4bi50KCJtc2dfZGVsZXRlZCIpLAogICAgICAgICAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IGkxOG4udCgiY2FuY2VsIiksCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI0VEMUEzQSIsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogaTE4bi50KCJkaXNjYXJkIiksCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBsZXQgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRBdHRhY2htZW50IikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFJdGVtID0gZ3JpZC5kYXRhSXRlbShrZW5kby5qUXVlcnkoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ2RhdGFJdGVtJywgZGF0YUl0ZW0pCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRhdGFJdGVtLmF0dGFjaElkLAogICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGRhdGFJdGVtLmtleQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nQXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWxsaW5nSGFuZGxlci5hdHRhY2htZW50RGVsZXRlKHBhcmFtcykudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nQXRjaCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRBdHRhY2htZW50KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBpbml0QWNjb3VudCAoKSB7CiAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudCA9IHRoaXMuaW5pdEFjY291bnQ7CiAgICAgICAgICAgIHRoaXMubG9hZEF0dGFjaG1lbnQoKQogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZCAoKSB7CiAgICAgICAgdGhpcy5sb2FkQXR0YWNobWVudCgpCiAgICAgICAgdGhpcy5hdHRhY2htZW50ID0gdGhpcy5pbml0QWNjb3VudDsKICAgIH0KfQo="},{"version":3,"sources":["Attachment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Attachment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-row class=\"white\">\n        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n            <p class=\"mb-2 grey--text font_14\">{{$t('file_type')}} [PDF, JPG, JPEG, TIFF, PNG, GIF]</p>\n            <template>\n                <v-file-input\n                    v-model=\"files\"\n                    @change=\"onFileChange\"\n                    accept=\"image/jpg, image/jpeg, application/pdf\"\n                    :placeholder=\"$t('attachments')\"\n                    single\n                    prepend-icon=\"mdi-paperclip\">\n                    <template v-slot:selection=\"{ text }\">\n                        <v-chip small label color=\"primary\">\n                            {{ text }}\n                        </v-chip>\n                    </template>\n                </v-file-input>\n                <v-text-field\n                    v-model=\"fileDesc\"\n                    outlined\n                    :placeholder=\"$t('description')\"\n                    clearable/>\n            </template>\n                <v-btn\n                    color=\"primary\"\n                    class=\"text-capitalize white--text\"\n                    @click=\"uploadFile\">\n                    <v-icon size=\"15\" class=\"mr-2\">fa-check</v-icon>{{ $t(\"upload\") }}\n                </v-btn> \n                <template>\n                    <LoadingMe\n                        :isLoading=\"showLoading\"\n                        :fullPage=\"false\"\n                        type=\"loading\"\n                        :myLoading=\"true\"/>\n                    <kendo-datasource\n                        ref=\"attachmentDS\"\n                        :data=\"attachmentList\"/>\n                        <kendo-grid\n                            id=\"gridAttachment\"\n                            class=\"grid-function\"\n                            :data-source-ref=\"'attachmentDS'\"\n                            :editable=\"false\"\n                            :scrollable-virtual=\"true\">\n                            <kendo-grid-column\n                                :field=\"''\"\n                                :title=\"$t('open')\"\n                                :width=\"70\"\n                                :template=\"fileUrl\"\n                                :attributes=\"{ style: 'text-align: center' }\"\n                                :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                            <kendo-grid-column\n                                :field=\"'fileName'\"\n                                :title=\"$t('file_name')\"\n                                :width=\"250\"\n                                :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                            <kendo-grid-column\n                                :field=\"'description'\"\n                                :title=\"$t('description')\"\n                                :width=\"250\"\n                                :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                            <kendo-grid-column\n                                :field=\"'fileType'\"\n                                :title=\"$t('file_type')\"\n                                :width=\"150\"\n                                :headerAttributes=\"{style:'background-color: #EDF1F5, color: green !important'}\"/>\n                            <kendo-grid-column\n                                :field=\"'size'\"\n                                :title=\"$t('size')\"\n                                :width=\"150\"\n                                :template=\"byteToMB\"\n                                :headerAttributes=\"{style:'background-color: #EDF1F5, color: green !important'}\"/>\n                            <kendo-grid-column\n                                :field=\"'createdAt'\"\n                                :title=\"$t('date')\"\n                                :width=\"120\"\n                                :template=\"'<span>#= kendo.toString(new Date(createdAt), dateFormat)#</span>'\"\n                                :headerAttributes=\"{style:'background-color: #EDF1F5, color: green !important'}\"/>\n                            <kendo-grid-column\n                                :field=\"''\"\n                                :title=\"$t('action')\"\n                                :width=\"100\"\n                                :visible=\"true\"\n                                :command=\"[{iconClass: 'k-icon k-i-delete', text: ' ', click: deletedFunction }]\"\n                                :headerAttributes=\"{style: 'text-align: center; background-color: #EDF1F5'}\"\n                                :attributes=\"{ style: 'text-align: center'}\"/>\n                        </kendo-grid>\n                </template>\n        </v-col>\n    </v-row>\n</template>\n<script>\n    import kendo from \"@progress/kendo-ui\"\n    import {i18n} from \"@/i18n\";\n    const billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\n    export default {\n        name: \"\",\n        props: ['initAccount'],\n        components: {\n            LoadingMe: () => import(`@/components/Loading`),\n        },\n        data() {\n            return {\n                showLoading: false,\n                files: [],\n                attachments: [],\n                attachment: {},\n                fileDesc: '',\n                attachmentList: []\n            }\n        },\n        methods: {\n            onFileChange(e) {\n                window.console.log('e',e)\n                this.$emit('initData', this.attachment);\n                if (e) {\n                    this.fileDesc = e.name;\n                    this.fileName = e.name;\n                    this.fileSize = e.size;\n                    this.fileType = e.type;\n                    let input = this.files;\n                    // Ensure that you have a file before attempting to read it\n                    if (input) {\n                        let reader = new FileReader();\n                        // Define a callback function to run, when FileReader finishes its job\n                        reader.onloadend = (e) => {\n                            // Note: arrow function used here, so that \"this.imageData\" refers to the imageData of Vue component\n                            // Read image as base64 and set to imageData\n                            this.imgFile = e.target.result;\n                        };\n                        // Start the reader job - read file as a data url (base64 format)\n                        reader.readAsBinaryString(input);\n                        this.src = URL.createObjectURL(input);\n                    }\n                }\n            },\n            uploadFile(){\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        if (this.imgFile) {\n                            const id = this.attachment.uuid || \"\";\n                            const name = this.attachment.name || \"\";\n                            let data = {\n                                file: this.imgFile,\n                                info: {\n                                    name: this.fileName,\n                                    description: this.fileDesc,\n                                    size: this.fileSize,\n                                    type: this.fileType,\n                                },\n                                type: \"Account\",\n                                id: id,\n                                name: name,\n                            };\n                            this.showLoading = true;\n                            if(id !==''){\n                                billingHandler.attachment(data).then((res) => {\n                                    if (res.data.statusCode === 201) {\n                                        this.showLoading = false;\n                                        this.imgFile = null;\n                                        this.src = \"\";\n                                        this.fileDesc = \"\";\n                                        this.fileName = \"\";\n                                        this.fileSize = 0;\n                                        this.fileType = \"\";\n                                        this.files      = []\n                                        this.$snotify.success(\"Success\");\n                                        this.loadAttachment();\n                                        // // this.txnList = JSON.parse(JSON.stringify(res.data.data))\n                                        // // window.console.log('transactions', this.txnList)\n                                    }\n                                });\n                            }else{\n                                this.showLoading = false;\n                                this.$snotify.error(\"Please check again!\");\n                            }\n                        } else {\n                            this.showLoading = false;\n                            this.$snotify.error(\"Please browse to upload image\");\n                        }\n                    }, 10);\n                });\n            },\n            async loadAttachment() {\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        // if (this.$route.params.hasOwnProperty('id')) {\n                        this.showLoadingAtch = true;\n                        const strFilter = \"?id=\" + this.attachment.uuid;\n                        billingHandler.attachmentList(strFilter).then((res) => {\n                            if (res.data.statusCode === 200) {\n                                this.showLoadingAtch = false;\n                                this.attachmentList = res.data.data;\n                            }\n                        });\n                        // }\n                    }, 10);\n                });\n            },\n            fileUrl(dataItem) {\n                if (dataItem.fileUrl) {\n                    return `<a target=\"_blank\" style=\"color:#ED1A3A !important\" href=\"${dataItem.fileUrl}\"><span>Open</span></a>`;\n                }\n                return ``;\n            },\n            byteToMB(dataItem) {\n                const FileSize = dataItem.size || 0; // in MiB\n                const marker = 1024; // Change to 1000 if required\n                const decimal = 3; // Change as required\n                const kiloBytes = marker; // One Kilobyte is 1024 bytes\n                const megaBytes = marker * marker; // One MB is 1024 KB\n                const gigaBytes = marker * marker * marker; // One GB is 1024 MB\n                // const teraBytes = marker * marker * marker * marker; // One TB is 1024 GB\n\n                // return bytes if less than a KB\n                if (FileSize < kiloBytes) {\n                    return FileSize + \" Bytes\";\n                }\n                // return KB if less than a MB\n                else if (FileSize < megaBytes) {\n                    return (FileSize / kiloBytes).toFixed(decimal) + \" KB\";\n                }\n                // return MB if less than a GB\n                else if (FileSize < gigaBytes) {\n                    return (FileSize / megaBytes).toFixed(decimal) + \" MB\";\n                }\n                // return GB if less than a TB\n                else {\n                    return (FileSize / gigaBytes).toFixed(decimal) + \" GB\";\n                }\n\n                /* var FileSize = file.files[0].size / 1024 / 1024; // in MiB\n                    if (FileSize > 2) {\n                        alert('File size exceeds 2 MiB');\n                        // $(file).val(''); //for clearing with Jquery\n                    } else {\n                                alert('File size' + FileSize);\n                    } */\n            },\n            deletedFunction(e){\n                this.$swal({\n                    title: i18n.t(\"msg_title_warning\"),\n                    text: i18n.t(\"msg_deleted\"),\n                    icon: \"warning\",\n                    showCancelButton: true,\n                    cancelButtonText: i18n.t(\"cancel\"),\n                    confirmButtonColor: \"#4d4848\",\n                    cancelButtonColor: \"#ED1A3A\",\n                    confirmButtonText: i18n.t(\"discard\"),\n                }).then((result) => {\n                    if (result.value) {\n                        e.preventDefault();\n                        let grid = kendo.jQuery(\"#gridAttachment\").data(\"kendoGrid\");\n                        let dataItem = grid.dataItem(kendo.jQuery(e.currentTarget).closest(\"tr\"));\n                        window.console.log('dataItem', dataItem)\n                        let params = {\n                            id: dataItem.attachId,\n                            key: dataItem.key\n                        }\n                        new Promise((resolve) => {\n                            setTimeout(() => {\n                                resolve(\"resolved\");\n                                this.showLoadingAtch = true;\n                                billingHandler.attachmentDelete(params).then((res) => {\n                                    if (res.data.statusCode === 200) {\n                                        this.showLoadingAtch = false;\n                                        this.loadAttachment()\n                                    }\n                                });\n                                // }\n                            }, 10);\n                        });\n                    }\n                });\n            }\n        },\n        watch: {\n            initAccount () {\n                this.attachment = this.initAccount;\n                this.loadAttachment()\n            },\n        },\n        mounted () {\n            this.loadAttachment()\n            this.attachment = this.initAccount;\n        }\n    }\n</script>\n<style scoped>\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/customers/sales/sale_discounts/Campaigns.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/customers/sales/sale_discounts/Campaigns.vue","mtime":1645152931176},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZGF0YVN0b3JlfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOwppbXBvcnQgRGF0ZVBpY2tlckNvbXBvbmVudCBmcm9tICJAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9EYXRlUGlja2VyQ29tcG9uZW50IjsKaW1wb3J0IEN1c3RvbWVyTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0N1c3RvbWVyIjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBMaW5rVGVtcGxhdGUgZnJvbSAiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9MaW5rVGVtcGxhdGUiOwoKY29uc3QgY3VzdG9tZXJNb2RlbCA9IG5ldyBDdXN0b21lck1vZGVsKHt9KTsKLy8gY29uc3QgJCA9IHJlcXVpcmUoImpxdWVyeSIpCmNvbnN0IGN1c3RvbWVyVHlwZUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY3VzdG9tZXJUeXBlSGFuZGxlciIpOwpjb25zdCBjdXN0b21lckdyb3VwSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jdXN0b21lckdyb3VwSGFuZGxlciIpOwpjb25zdCBjdXN0b21lckhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY3VzdG9tZXJIYW5kbGVyIik7CmNvbnN0IGJpbGxpbmdIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2ludm9pY2UvaGFuZGxlci9iaWxsaW5nSGFuZGxlciIpOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQ2FtcGFpZ25zIiwKICAgIHByb3BzOiBbImlkIl0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgTG9hZGluZ01lOiAoKSA9PiBpbXBvcnQoYEAvY29tcG9uZW50cy9Mb2FkaW5nYCksCiAgICAgICAgImFwcC1kYXRlcGlja2VyIjogRGF0ZVBpY2tlckNvbXBvbmVudCwKICAgICAgICBJbmZvOiAoKSA9PiBpbXBvcnQoIi4vSW5mbyIpLAogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgIHNob3dMb2FkaW5nVHhuOiBmYWxzZSwKICAgICAgICBzaG93TG9hZGluZ0F0Y2g6IGZhbHNlLAogICAgICAgIGluZm86IHt9LAogICAgICAgIGN1c3RvbWVyczogW10sCiAgICAgICAgc3RhcnRfZGF0ZTogIiIsCiAgICAgICAgZW5kX2RhdGU6ICIiLAogICAgICAgIGN1c3RvbWVyVHlwZXM6IFtdLAogICAgICAgIG1DdXN0b21lclR5cGU6IHt9LAogICAgICAgIGhlYWRlcnM6IFtdLAogICAgICAgIGN1c3RvbWVyR3JvdXBzOiBbXSwKICAgICAgICBtQ3VzdG9tZXJHcm91cDoge30sCiAgICAgICAgam91cm5hbF9lbnRyaWVzOiBbXSwKICAgICAgICBmb3J3YXJkZWQ6ICIiLAogICAgICAgIGZpbGVzOiBbXSwKICAgICAgICBzZWFyY2g6ICIiLAogICAgICAgIGN1c3RvbWVyOiBjdXN0b21lck1vZGVsLAogICAgICAgIHNjaGVtYURlZmluaXRpb246IHsKICAgICAgICAgICAgbW9kZWw6IHtpZDogImlkIn0sCiAgICAgICAgfSwKICAgICAgICBncm91cERlZmluaXRpb246IHsKICAgICAgICAgICAgZmllbGQ6ICJ0eXBlIiwKICAgICAgICB9LAogICAgICAgIHR4bkxpc3Q6IFtdLAogICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCiAgICAgICAgZW5kRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCiAgICAgICAgZGF0ZVNvcnRlcnM6IFsiVG9kYXkiLCAiVGhpcyBXZWVrIiwgIlRoaXMgTW9udGgiLCAiVGhpcyBZZWFyIl0sCiAgICAgICAgbURhdGVTb3J0ZXI6ICJUb2RheSIsCiAgICAgICAgcnVsZXM6IFsKICAgICAgICAgICAgKGZpbGVzKSA9PgogICAgICAgICAgICAgICAgIWZpbGVzIHx8CiAgICAgICAgICAgICAgICAhZmlsZXMuc29tZSgoZmlsZSkgPT4gZmlsZS5zaXplID4gNSAqIDEwMjQgKiAxMDI0KSB8fAogICAgICAgICAgICAgICAgIkF2YXRhciBzaXplIHNob3VsZCBiZSBsZXNzIHRoYW4gNSBNQiEiLAogICAgICAgIF0sCiAgICAgICAgYXR0YWNobWVudExpc3Q6IFtdLAogICAgICAgIGltZ0ZpbGU6ICIiLAogICAgICAgIHNyYzogIiIsCiAgICAgICAgZmlsZV86IHt9LAogICAgICAgIGZpbGVEZXNjOiAiIiwKICAgICAgICBmaWxlU2l6ZTogMCwKICAgICAgICBmaWxlVHlwZTogIiIsCiAgICAgICAgZmlsZU5hbWU6ICIiLAogICAgfSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgdHJhbnNhY3Rpb25EYXRlKGRhdGFJdGVtKSB7CiAgICAgICAgICAgIGNvbnN0IHR4bkRhdGUgPSBkYXRhSXRlbS50cmFuc2FjdGlvbkRhdGU7CiAgICAgICAgICAgIGNvbnN0IGRhdGVGb3JtYXQgPSBkYXRhSXRlbS5kYXRlRm9ybWF0OwogICAgICAgICAgICBpZiAodHhuRGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHR4bkRhdGUpLCBkYXRlRm9ybWF0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfSwKICAgICAgICBieXRlVG9NQihkYXRhSXRlbSkgewogICAgICAgICAgICBjb25zdCBGaWxlU2l6ZSA9IGRhdGFJdGVtLnNpemUgfHwgMDsgLy8gaW4gTWlCCiAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IDEwMjQ7IC8vIENoYW5nZSB0byAxMDAwIGlmIHJlcXVpcmVkCiAgICAgICAgICAgIGNvbnN0IGRlY2ltYWwgPSAzOyAvLyBDaGFuZ2UgYXMgcmVxdWlyZWQKICAgICAgICAgICAgY29uc3Qga2lsb0J5dGVzID0gbWFya2VyOyAvLyBPbmUgS2lsb2J5dGUgaXMgMTAyNCBieXRlcwogICAgICAgICAgICBjb25zdCBtZWdhQnl0ZXMgPSBtYXJrZXIgKiBtYXJrZXI7IC8vIE9uZSBNQiBpcyAxMDI0IEtCCiAgICAgICAgICAgIGNvbnN0IGdpZ2FCeXRlcyA9IG1hcmtlciAqIG1hcmtlciAqIG1hcmtlcjsgLy8gT25lIEdCIGlzIDEwMjQgTUIKICAgICAgICAgICAgLy8gY29uc3QgdGVyYUJ5dGVzID0gbWFya2VyICogbWFya2VyICogbWFya2VyICogbWFya2VyOyAvLyBPbmUgVEIgaXMgMTAyNCBHQgoKICAgICAgICAgICAgLy8gcmV0dXJuIGJ5dGVzIGlmIGxlc3MgdGhhbiBhIEtCCiAgICAgICAgICAgIGlmIChGaWxlU2l6ZSA8IGtpbG9CeXRlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIEZpbGVTaXplICsgIiBCeXRlcyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcmV0dXJuIEtCIGlmIGxlc3MgdGhhbiBhIE1CCiAgICAgICAgICAgIGVsc2UgaWYgKEZpbGVTaXplIDwgbWVnYUJ5dGVzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKEZpbGVTaXplIC8ga2lsb0J5dGVzKS50b0ZpeGVkKGRlY2ltYWwpICsgIiBLQiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcmV0dXJuIE1CIGlmIGxlc3MgdGhhbiBhIEdCCiAgICAgICAgICAgIGVsc2UgaWYgKEZpbGVTaXplIDwgZ2lnYUJ5dGVzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKEZpbGVTaXplIC8gbWVnYUJ5dGVzKS50b0ZpeGVkKGRlY2ltYWwpICsgIiBNQiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcmV0dXJuIEdCIGlmIGxlc3MgdGhhbiBhIFRCCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIChGaWxlU2l6ZSAvIGdpZ2FCeXRlcykudG9GaXhlZChkZWNpbWFsKSArICIgR0IiOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvKiB2YXIgRmlsZVNpemUgPSBmaWxlLmZpbGVzWzBdLnNpemUgLyAxMDI0IC8gMTAyNDsgLy8gaW4gTWlCCiAgICAgICAgICAgICAgICAgIGlmIChGaWxlU2l6ZSA+IDIpIHsKICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGaWxlIHNpemUgZXhjZWVkcyAyIE1pQicpOwogICAgICAgICAgICAgICAgICAgICAvLyAkKGZpbGUpLnZhbCgnJyk7IC8vZm9yIGNsZWFyaW5nIHdpdGggSnF1ZXJ5CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGaWxlIHNpemUnICsgRmlsZVNpemUpOwogICAgICAgICAgICAgICAgICB9ICovCiAgICAgICAgfSwKICAgICAgICBnb0VkaXQoKSB7CiAgICAgICAgfSwKICAgICAgICBvbkZpbGVDaGFuZ2UoZSkgewogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJzInLCBlKQogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgICAgdGhpcy5maWxlRGVzYyA9IGUubmFtZTsKICAgICAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSBlLm5hbWU7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVTaXplID0gZS5zaXplOwogICAgICAgICAgICAgICAgdGhpcy5maWxlVHlwZSA9IGUudHlwZTsKICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHRoaXMuZmlsZXM7CiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB5b3UgaGF2ZSBhIGZpbGUgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcmVhZCBpdAogICAgICAgICAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gRGVmaW5lIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcnVuLCB3aGVuIEZpbGVSZWFkZXIgZmluaXNoZXMgaXRzIGpvYgogICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBhcnJvdyBmdW5jdGlvbiB1c2VkIGhlcmUsIHNvIHRoYXQgInRoaXMuaW1hZ2VEYXRhIiByZWZlcnMgdG8gdGhlIGltYWdlRGF0YSBvZiBWdWUgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlYWQgaW1hZ2UgYXMgYmFzZTY0IGFuZCBzZXQgdG8gaW1hZ2VEYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nRmlsZSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSByZWFkZXIgam9iIC0gcmVhZCBmaWxlIGFzIGEgZGF0YSB1cmwgKGJhc2U2NCBmb3JtYXQpCiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhpbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGlucHV0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgdXBsb2FkRmlsZSgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW1nRmlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuY3VzdG9tZXIuaWQgfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuY3VzdG9tZXIubmFtZSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IHRoaXMuaW1nRmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmZpbGVEZXNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiB0aGlzLmZpbGVTaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLmZpbGVUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIkNvbnRhY3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0hhbmRsZXIuYXR0YWNobWVudChkYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdGaWxlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcmMgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlRGVzYyA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVOYW1lID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNpemUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVUeXBlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygiU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRBdHRhY2htZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudHhuTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZygndHJhbnNhY3Rpb25zJywgdGhpcy50eG5MaXN0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5lcnJvcigiUGxlYXNlIHNlbGVjdCBjdXN0b21lciIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCJQbGVhc2UgYnJvd3NlIHRvIHVwbG9hZCBpbWFnZSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBmaWxlVXJsKGRhdGFJdGVtKSB7CiAgICAgICAgICAgIGlmIChkYXRhSXRlbS5maWxlVXJsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYDxhIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6I0VEMUEzQSAhaW1wb3J0YW50IiBocmVmPSIke2RhdGFJdGVtLmZpbGVVcmx9Ij48c3Bhbj5PcGVuPC9zcGFuPjwvYT5gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBgYDsKICAgICAgICB9LAogICAgICAgIHJlZmVyZW5jZVRlbXBsYXRlKGRhdGEpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICIiOwogICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAiSW52b2ljZSIpIHsKICAgICAgICAgICAgICAgIHVybCA9IGBpbnZvaWNlX3ZpZXcvJHtkYXRhLnR4bklkfWA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAiU2FsZSBRdW90ZSIpIHsKICAgICAgICAgICAgICAgIHVybCA9IGBzYWxlX3F1b3RlX3ZpZXcvJHtkYXRhLnR4bklkfWA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAiRGVsYXllZCBJbnZvaWNlIikgewogICAgICAgICAgICAgICAgdXJsID0gYGRlbGF5ZWRfaW52b2ljZV92aWV3LyR7ZGF0YS50eG5JZH1gOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gIlNhbGUgT3JkZXIiKSB7CiAgICAgICAgICAgICAgICB1cmwgPSBgc2FsZV9vcmRlcl92aWV3LyR7ZGF0YS50eG5JZH1gOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gIlB1cmNoYXNlIE9yZGVyIikgewogICAgICAgICAgICAgICAgdXJsID0gYHB1cmNoYXNlX29yZGVyX3ZpZXcvJHtkYXRhLnR4bklkfWA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAiQ3JlZGl0IE1lbW8iKSB7CiAgICAgICAgICAgICAgICB1cmwgPSBgc2FsZV9yZXR1cm5fdmlldy8ke2RhdGEudHhuSWR9YDsKICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICJEZWJpdCBNZW1vIikgewogICAgICAgICAgICAgICAgdXJsID0gYHB1cmNoYXNlX3JldHVybl92aWV3LyR7ZGF0YS50eG5JZH1gOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gIkludmVudG9yeSBBZGp1c3RtZW50IikgewogICAgICAgICAgICAgICAgdXJsID0gYGludmVudG9yeV9hZGp1c3RtZW50X3ZpZXcvJHtkYXRhLnR4bklkfWA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAiUHVyY2hhc2UiKSB7CiAgICAgICAgICAgICAgICB1cmwgPSBgY3JlZGl0X3B1cmNoYXNlX3ZpZXcvJHtkYXRhLnR4bklkfWA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAiUHJvZHVjdGlvbiBPcmRlciIpIHsKICAgICAgICAgICAgICAgIHVybCA9IGBwcm9kdWN0aW9uX29yZGVyX3ZpZXcvJHtkYXRhLnR4bklkfWA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAiUHJvZHVjdGlvbiIpIHsKICAgICAgICAgICAgICAgIHVybCA9IGBwcm9kdWN0aW9uLyR7ZGF0YS50eG5JZH1gOwogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICJDYXNoIFJlY2VpcHQiKSB7CiAgICAgICAgICAgICAgICB1cmwgPSBgY2FzaF9yZWNlaXB0LyR7ZGF0YS50eG5JZH1gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBhcmdzID0gewogICAgICAgICAgICAgICAgdGV4dDogZGF0YS5yZWZlcmVuY2VObywKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBMaW5rVGVtcGxhdGUsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUFyZ3M6IGFyZ3MsCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICB0eG5TdGF0dXMoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZGF0YUl0ZW0uc3RhdHVzIHx8IDE7CiAgICAgICAgICAgIGxldCBzdGF0dXNUZXh0ID0gIiI7CiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9ICJPUEVOIjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gIlBBUlRJQUxMWSBQQUlEIjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gIlBBSUQiOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSAiVk9JRCI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN0YXR1c1RleHQ7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBzZWFyY2hUcmFuc2FjdGlvbigpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmN1c3RvbWVyLmlkIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGlmIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nVHhuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy5zdGFydERhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB0aGlzLmVuZERhdGU7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ckZpbHRlciA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIj9zdGFydD0iICsgc3RhcnREYXRlICsgIiZlbmQ9IiArIGVuZERhdGUgKyAiJmlkPSIgKyBpZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbGxpbmdIYW5kbGVyLmN1c3RvbWVyVHhuKHN0ckZpbHRlcikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nVHhuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHhuTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG9uU29ydGVyQ2hhbmdlcyh2YWwpIHsKICAgICAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgc3dpdGNoICh2YWwpIHsKICAgICAgICAgICAgICAgIGNhc2UgIlRvZGF5IjoKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IGtlbmRvLnRvU3RyaW5nKHRvZGF5LCAieXl5eS1NTS1kZCIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IGtlbmRvLnRvU3RyaW5nKHRvZGF5LCAieXl5eS1NTS1kZCIpOwoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIlRoaXMgV2VlayI6CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gdG9kYXkuZ2V0RGF0ZSgpIC0gdG9kYXkuZ2V0RGF5KCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBmaXJzdCArIDY7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0ga2VuZG8udG9TdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRvZGF5LnNldERhdGUoZmlyc3QpKSwKICAgICAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQiCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0ga2VuZG8udG9TdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRvZGF5LnNldERhdGUobGFzdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCIKICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIlRoaXMgTW9udGgiOgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0ga2VuZG8udG9TdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIHRvZGF5LmdldE1vbnRoKCksIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IGtlbmRvLnRvU3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCAzMSksCiAgICAgICAgICAgICAgICAgICAgICAgICJ5eXl5LU1NLWRkIgogICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiVGhpcyBZZWFyIjoKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IGtlbmRvLnRvU3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCAwLCAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQiCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBrZW5kby50b1N0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgMTEsIDMxKSwKICAgICAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQiCiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gIiI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJvd051bWJlclRtcGwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy50cmFuc2FjdGlvbkRTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICAgICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgICAgIH0sCiAgICAgICAgb25DdXN0b21lclR5cGVDaGFuZ2VkKHNlYXJjaCkgewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5sb2FkQ3VzdG9tZXJDZW50ZXIoc2VhcmNoKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRDdXN0b21lckdyb3VwKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBjdXN0b21lckdyb3VwSGFuZGxlci5nZXQoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWVyR3JvdXBzID0gcmVzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21lckdyb3Vwcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1DdXN0b21lckdyb3VwID0gdGhpcy5jdXN0b21lckdyb3Vwc1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEN1c3RvbWVyQ2VudGVyKHRoaXMuc2VhcmNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGN1c3RvbWVySW5mbygpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgib25VcGRhdGUiLCB0aGlzLmN1c3RvbWVyKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uQ2hhbmdlZCgpIHsKICAgICAgICAgICAgbGV0IGdyaWQgPSBrZW5kby5qUXVlcnkoIiNncmlkQ3VzdG9tZXIiKS5kYXRhKCJrZW5kb0dyaWQiKTsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkSXRlbSA9IGdyaWQuZGF0YUl0ZW0oZ3JpZC5zZWxlY3QoKSk7CiAgICAgICAgICAgIHRoaXMuY3VzdG9tZXIgPSBzZWxlY3RlZEl0ZW07CiAgICAgICAgICAgIHRoaXMuJGVtaXQoIm9uVXBkYXRlIiwgc2VsZWN0ZWRJdGVtKTsKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCItLSIsIHRoaXMuY3VzdG9tZXIuaWQpOwogICAgICAgICAgICBpZiAodGhpcy5jdXN0b21lci5oYXNPd25Qcm9wZXJ0eSgiaWQiKSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tZXIuaWQgIT09ICIiIHx8IHRoaXMuY3VzdG9tZXIuaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VhcmNoVHJhbnNhY3Rpb24oKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRBdHRhY2htZW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRDdXN0b21lclR5cGUoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyVHlwZUhhbmRsZXIuZ2V0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY3VzdG9tZXJUeXBlcyA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwVHlwZSA9PSAnbnBvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJUeXBlcyA9IHJlcy5maWx0ZXIobyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hdHVyZSA9IG8ubmF0dXJlIHx8IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBuYXR1cmUubmFtZSB8fCAnJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnSW5kaXZpZHVhbC0nKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJUeXBlcyA9IHJlcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbWVyVHlwZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQ3VzdG9tZXJUeXBlID0gdGhpcy5jdXN0b21lclR5cGVzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLm1DdXN0b21lckdyb3VwIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwLmlkICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEN1c3RvbWVyQ2VudGVyKHRoaXMuc2VhcmNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRDdXN0b21lckNlbnRlcihzZWFyY2gpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21lcnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBJZCA9ICcnOwogICAgICAgICAgICAgICAgICAgIGxldCBjdXN0b21lclR5cGVJZCA9ICcnOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1DdXN0b21lckdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSB0aGlzLm1DdXN0b21lckdyb3VwLmlkIHx8ICcnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1DdXN0b21lclR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJUeXBlSWQgPSB0aGlzLm1DdXN0b21lclR5cGUuaWQgfHwgJycKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ckZpbHRlciA9ICI/aXNfZG9ub3I9ZmFsc2UiOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcFR5cGUgPT09ICducG8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ckZpbHRlciA9ICI/aXNfZG9ub3I9dHJ1ZSI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0clNlYXJjaCA9IHNlYXJjaCB8fCAiIjsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ3N0ckZpbHRlcicsIHN0ckZpbHRlciwgc3RyU2VhcmNoKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ckZpbHRlclYxID0gJz9kb25vcj0wJmN0aWQ9JyArIGN1c3RvbWVyVHlwZUlkICsgJyZncnA9JyArIGdyb3VwSWQgKyAnJnNlYXJjaD0nICsgc3RyU2VhcmNoCiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJIYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC5jZW50ZXIoY3VzdG9tZXJUeXBlSWQsIGdyb3VwSWQsIHN0clNlYXJjaCwgc3RyRmlsdGVyKQogICAgICAgICAgICAgICAgICAgICAgICAuY2VudGVydjEoc3RyRmlsdGVyVjEpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWVycyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGNhbGxiYWNrKCkgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMgIT09IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgiZGF0YSIpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuZGF0YTsKICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jdXN0b21lcnMuZmluZEluZGV4KChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyLmlkID09PSBpdGVtLmlkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21lcnMucHVzaChjdXN0b21lcik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJzLnNwbGljZShpbmRleCwgMSwgY3VzdG9tZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiaW0gY2hhbmdlZCIsIHRoaXMuJHJvdXRlLnBhcmFtcyk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkQXR0YWNobWVudCgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmdBdGNoID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJGaWx0ZXIgPSAiP2lkPSIgKyB0aGlzLmN1c3RvbWVyLmlkOwogICAgICAgICAgICAgICAgICAgIGJpbGxpbmdIYW5kbGVyLmF0dGFjaG1lbnRMaXN0KHN0ckZpbHRlcikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmdBdGNoID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRMaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkRGF0YSgpIHsKICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkQ3VzdG9tZXJUeXBlKCk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEN1c3RvbWVyR3JvdXAoKTsKICAgICAgICB9LAogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQ3VzdG9tZXJUeXBlKCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQ3VzdG9tZXJHcm91cCgpOwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgYXBwVHlwZSgpIHsKICAgICAgICAgICAgcmV0dXJuIGRhdGFTdG9yZS5wcm9kdWN0VHlwZTsKICAgICAgICB9LAogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgJHJvdXRlOiAiY2FsbGJhY2siLAogICAgfSwKfTsK"},{"version":3,"sources":["Campaigns.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiSA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Campaigns.vue","sourceRoot":"src/views/customers/sales/sale_discounts","sourcesContent":["<template>\n    <v-row>\n        <v-col class=\"pt-0 pr-4 pb-0\" sm=\"4\" cols=\"12\">\n            <v-card\n                outlined\n                dense\n                class=\"pa-3 no_border mb-md-4 mb-xs-0\"\n                color=\"grayBg\"\n            >\n                <div class=\"d-flex\">\n                    <v-text-field\n                        v-model=\"search\"\n                        @change=\"onCustomerTypeChanged(search)\"\n                        outlined\n                        @click:clear=\"onCustomerTypeChanged(search)\"\n                        :placeholder=\"$t('search')\"\n                        append-icon=\"search\"\n                        clearable\n                    />\n                    <v-btn icon @click=\"loadData\">\n                        <v-icon>refresh</v-icon>\n                    </v-btn>\n                </div>\n                <v-select\n                    :items=\"customerTypes\"\n                    @change=\"onCustomerTypeChanged('')\"\n                    item-value=\"id\"\n                    item-text=\"name\"\n                    v-model=\"mCustomerType\"\n                    return-object\n                    :placeholder=\"$t('type')\"\n                    clearable\n                    outlined\n                />\n                <v-select\n                    v-if=\"appType != 'npo'\"\n                    :items=\"customerGroups\"\n                    @change=\"onCustomerTypeChanged('')\"\n                    item-value=\"id\"\n                    item-text=\"name\"\n                    return-object\n                    v-model=\"mCustomerGroup\"\n                    :placeholder=\"$t('customer_group')\"\n                    clearable\n                    outlined\n                />\n            </v-card>\n            <v-card\n                outlined\n                dense\n                class=\"pa-3 no_border hidden-sm-and-down\"\n                color=\"grayBg\"\n            >\n                <LoadingMe\n                    :isLoading=\"showLoading\"\n                    :fullPage=\"false\"\n                    type=\"loading\"\n                    :myLoading=\"true\"\n                />\n                <kendo-datasource\n                    ref=\"customerDS\"\n                    :data=\"customers\"\n                    :schema=\"schemaDefinition\"\n                />\n\n                <kendo-grid\n                    id=\"gridCustomer\"\n                    class=\"grid-center\"\n                    :change=\"onChanged\"\n                    :data-source-ref=\"'customerDS'\"\n                    :selectable=\"true\"\n                    :persistSelection=\"true\"\n                    :noRecords=\"true\"\n                    :scrollable=\"true\"\n                    :height=\"appType != 'npo' ? 412 : 466\"\n                    :pageable-numeric=\"false\"\n                    :pageable-previous-next=\"false\"\n                    :pageable-messages-display=\"'Showing {2} data items'\"\n                >\n                    <kendo-grid-column\n                        :field=\"'name'\"\n                        :attributes=\"{ class: 'tb_name_td' }\"\n                        :title=\"'name'\"\n                        :hidden=\"true\"\n                        :group-header-template=\"'#=value#'\"\n                    />\n                    <kendo-grid-column\n                        :field=\"'name'\"\n                        :title=\"'&nbsp;'\"\n                        :template=\"'<span>#= customerType.abbr#-#=number# - #=name#</span>'\"\n                    />\n                </kendo-grid>\n            </v-card>\n        </v-col>\n        <v-col class=\"pt-0 pb-0\" sm=\"8\" cols=\"12\">\n            <v-row>\n                <v-col sm=\"12\" cols=\"12\" class=\"tab_txn_att pt-0 pl-0\">\n                    <v-tabs>\n                        <v-tab>\n                          <span class=\"hidden-sm-and-up\">\n                            <v-icon left>mdi-information-variant</v-icon>\n                          </span>\n                            <span class=\"hidden-sm-and-down  text-upercase\">\n                            {{ $t(\"info\") }}\n                          </span>\n                        </v-tab>\n                        <v-tab>\n                          <span class=\"hidden-sm-and-up\">\n                            <v-icon left>mdi-pen</v-icon>\n                          </span>\n                            <span class=\"hidden-sm-and-down  text-upercase\">\n                            {{ $t(\"transactions\") }}\n                          </span>\n                        </v-tab>\n                        <v-btn\n                            to=\"campaign\"\n                            color=\"primary\"\n                            class=\"text-capitalize white--text absRight\"\n                        >{{ $t(\"add_campaign\") }}\n                        </v-btn>\n                        <v-tab-item>\n                            <v-row>\n                                <v-col sm=\"12\" cols=\"12\" class=\"pt-0 px-6\">\n                                    <v-row class=\"grayBg\" style=\"width: 104%;\">\n                                        <v-col sm=\"12\" cols=\"12\" class=\"\">\n                                            <v-card outlined color=\"white\" class=\"pa-3\">\n                                                <Info :customer=\"customer\"/>\n                                            </v-card>\n                                        </v-col>\n                                    </v-row>\n                                </v-col>\n                            </v-row>\n                        </v-tab-item>\n                        <!-- Transactions -->\n                        <v-tab-item>\n                            <v-row>\n                                <v-col sm=\"12\" cols=\"12\" class=\"pt-0 px-6\">\n                                    <v-row class=\"grayBg\" style=\"width: 104%;\">\n                                        <v-col sm=\"12\" cols=\"12\" class=\"\">\n                                            <v-card outlined color=\"white\" class=\"pa-3\">\n                                                <v-row class=\"\">\n                                                    <v-col sm=\"4\" cols=\"12\" class=\"pt-1 pb-0\">\n                                                        <v-select\n                                                            class=\"\"\n                                                            :items=\"dateSorters\"\n                                                            v-model=\"mDateSorter\"\n                                                            @change=\"onSorterChanges\"\n                                                            clearable\n                                                            outlined\n                                                            placeholder=\"ALL\"\n                                                        />\n                                                    </v-col>\n\n                                                    <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n                                                        <app-datepicker\n                                                            :initialDate=\"startDate\"\n                                                            @emitDate=\"startDate = $event\"\n                                                        />\n                                                    </v-col>\n\n                                                    <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n                                                        <app-datepicker\n                                                            :initialDate=\"endDate\"\n                                                            @emitDate=\"endDate = $event\"\n                                                        />\n                                                    </v-col>\n\n                                                    <v-col sm=\"1\" cols=\"1\" class=\"py-0 mt-1\">\n                                                        <v-btn\n                                                            color=\"primary white--text\"\n                                                            @click=\"searchTransaction\"\n                                                        >\n                                                            <i\n                                                                class=\"b-search\"\n                                                                style=\"font-size: 18px; color:#fff !important;\"\n                                                            />\n                                                        </v-btn>\n                                                    </v-col>\n                                                </v-row>\n\n                                                <v-row class=\"\">\n                                                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                                                        <LoadingMe\n                                                            :isLoading=\"showLoadingTxn\"\n                                                            :fullPage=\"false\"\n                                                            type=\"loading\"\n                                                            :myLoading=\"true\"\n                                                        >\n                                                        </LoadingMe>\n                                                        <kendo-datasource\n                                                            ref=\"transactionDS\"\n                                                            :data=\"txnList\"\n                                                            :server-paging=\"false\"\n                                                        />\n                                                        <kendo-grid\n                                                            id=\"gridTransactions\"\n                                                            class=\"grid-function\"\n                                                            :data-source-ref=\"'transactionDS'\"\n                                                            :editable=\"false\"\n                                                            :groupale=\"true\"\n                                                            :column-menu=\"true\"\n                                                            :noRecords=\"true\"\n                                                            :scrollable-virtual=\"true\"\n                                                        >\n                                                            <!--                              <kendo-grid-column-->\n                                                            <!--                                  :field=\"'no'\"-->\n                                                            <!--                                  :title=\"$t('no')\"-->\n                                                            <!--                                  :template=\"rowNumberTmpl\"-->\n                                                            <!--                                  :width=\"60\"-->\n                                                            <!--                                  :column-menu=\"false\"-->\n                                                            <!--                                  :headerAttributes=\"{ style: 'background-color: #EDF1F5;', class: 'text-center'\t}\"-->\n                                                            <!--                                  :attributes=\"{style: 'text-align: center'}\"/>-->\n                                                            <kendo-grid-column\n                                                                :field=\"'transactionDate'\"\n                                                                :title=\"$t('date')\"\n                                                                :width=\"120\"\n                                                                :template=\"transactionDate\"\n                                                                :headerAttributes=\"{\n                                  style: 'background-color: #EDF1F5',\n                                }\"\n                                                            />\n                                                            <kendo-grid-column\n                                                                :field=\"'type'\"\n                                                                :title=\"$t('type')\"\n                                                                :width=\"200\"\n                                                                :template=\"'<span>#=type#</span>'\"\n                                                                :headerAttributes=\"{\n                                  style: 'background-color: #EDF1F5',\n                                }\"\n                                                            />\n                                                            <kendo-grid-column\n                                                                :field=\"'referenceNo'\"\n                                                                :title=\"$t('reference_no')\"\n                                                                :width=\"200\"\n                                                                :template=\"referenceTemplate\"\n                                                                :headerAttributes=\"{\n                                  style:\n                                    'background-color: #EDF1F5, color: green !important',\n                                }\"\n                                                            />\n                                                            <kendo-grid-column\n                                                                :field=\"'paymentCode'\"\n                                                                :title=\"$t('payment_code')\"\n                                                                :width=\"200\"\n                                                                :template=\"'<span>#=paymentCode#</span>'\"\n                                                                :headerAttributes=\"{\n                                  style:\n                                    'background-color: #EDF1F5, color: green !important',\n                                }\"\n                                                            />\n                                                            <kendo-grid-column\n                                                                :field=\"'exchangeAmount'\"\n                                                                :title=\"$t('amount')\"\n                                                                :width=\"200\"\n                                                                :attributes=\"{ style: 'text-align: right' }\"\n                                                                :template=\"\n                                  '<span>#=kendo.toString(exchangeAmount, decimalFormat)#</span>'\n                                \"\n                                                                :headerAttributes=\"{\n                                  style: 'background-color: #EDF1F5',\n                                }\"\n                                                            />\n                                                            <kendo-grid-column\n                                                                :field=\"'status'\"\n                                                                :title=\"$t('status')\"\n                                                                :width=\"200\"\n                                                                :template=\"txnStatus\"\n                                                                :headerAttributes=\"{\n                                  style:\n                                    'text-align: left; background-color: #EDF1F5',\n                                }\"\n                                                            />\n                                                        </kendo-grid>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-card>\n                                        </v-col>\n                                    </v-row>\n                                </v-col>\n                            </v-row>\n                        </v-tab-item>\n                    </v-tabs>\n                </v-col>\n            </v-row>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\nimport {dataStore} from \"@/observable/store\";\nimport DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport CustomerModel from \"@/scripts/model/Customer\";\nimport kendo from \"@progress/kendo-ui\";\nimport LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\n\nconst customerModel = new CustomerModel({});\n// const $ = require(\"jquery\")\nconst customerTypeHandler = require(\"@/scripts/customerTypeHandler\");\nconst customerGroupHandler = require(\"@/scripts/customerGroupHandler\");\nconst customerHandler = require(\"@/scripts/customerHandler\");\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nexport default {\n    name: \"Campaigns\",\n    props: [\"id\"],\n    components: {\n        LoadingMe: () => import(`@/components/Loading`),\n        \"app-datepicker\": DatePickerComponent,\n        Info: () => import(\"./Info\"),\n    },\n    data: () => ({\n        showLoading: false,\n        showLoadingTxn: false,\n        showLoadingAtch: false,\n        info: {},\n        customers: [],\n        start_date: \"\",\n        end_date: \"\",\n        customerTypes: [],\n        mCustomerType: {},\n        headers: [],\n        customerGroups: [],\n        mCustomerGroup: {},\n        journal_entries: [],\n        forwarded: \"\",\n        files: [],\n        search: \"\",\n        customer: customerModel,\n        schemaDefinition: {\n            model: {id: \"id\"},\n        },\n        groupDefinition: {\n            field: \"type\",\n        },\n        txnList: [],\n        startDate: new Date().toISOString().substr(0, 10),\n        endDate: new Date().toISOString().substr(0, 10),\n        dateSorters: [\"Today\", \"This Week\", \"This Month\", \"This Year\"],\n        mDateSorter: \"Today\",\n        rules: [\n            (files) =>\n                !files ||\n                !files.some((file) => file.size > 5 * 1024 * 1024) ||\n                \"Avatar size should be less than 5 MB!\",\n        ],\n        attachmentList: [],\n        imgFile: \"\",\n        src: \"\",\n        file_: {},\n        fileDesc: \"\",\n        fileSize: 0,\n        fileType: \"\",\n        fileName: \"\",\n    }),\n    methods: {\n        transactionDate(dataItem) {\n            const txnDate = dataItem.transactionDate;\n            const dateFormat = dataItem.dateFormat;\n            if (txnDate) {\n                return kendo.toString(new Date(txnDate), dateFormat);\n            }\n            return \"\";\n        },\n        byteToMB(dataItem) {\n            const FileSize = dataItem.size || 0; // in MiB\n            const marker = 1024; // Change to 1000 if required\n            const decimal = 3; // Change as required\n            const kiloBytes = marker; // One Kilobyte is 1024 bytes\n            const megaBytes = marker * marker; // One MB is 1024 KB\n            const gigaBytes = marker * marker * marker; // One GB is 1024 MB\n            // const teraBytes = marker * marker * marker * marker; // One TB is 1024 GB\n\n            // return bytes if less than a KB\n            if (FileSize < kiloBytes) {\n                return FileSize + \" Bytes\";\n            }\n            // return KB if less than a MB\n            else if (FileSize < megaBytes) {\n                return (FileSize / kiloBytes).toFixed(decimal) + \" KB\";\n            }\n            // return MB if less than a GB\n            else if (FileSize < gigaBytes) {\n                return (FileSize / megaBytes).toFixed(decimal) + \" MB\";\n            }\n            // return GB if less than a TB\n            else {\n                return (FileSize / gigaBytes).toFixed(decimal) + \" GB\";\n            }\n\n            /* var FileSize = file.files[0].size / 1024 / 1024; // in MiB\n                  if (FileSize > 2) {\n                      alert('File size exceeds 2 MiB');\n                     // $(file).val(''); //for clearing with Jquery\n                  } else {\n                              alert('File size' + FileSize);\n                  } */\n        },\n        goEdit() {\n        },\n        onFileChange(e) {\n            window.console.log('2', e)\n            if (e) {\n                this.fileDesc = e.name;\n                this.fileName = e.name;\n                this.fileSize = e.size;\n                this.fileType = e.type;\n                let input = this.files;\n                // Ensure that you have a file before attempting to read it\n                if (input) {\n                    let reader = new FileReader();\n                    // Define a callback function to run, when FileReader finishes its job\n                    reader.onloadend = (e) => {\n                        // Note: arrow function used here, so that \"this.imageData\" refers to the imageData of Vue component\n                        // Read image as base64 and set to imageData\n                        this.imgFile = e.target.result;\n                    };\n                    // Start the reader job - read file as a data url (base64 format)\n                    reader.readAsBinaryString(input);\n                    this.src = URL.createObjectURL(input);\n                }\n            }\n        },\n        async uploadFile() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.imgFile) {\n                        const id = this.customer.id || \"\";\n                        if (id) {\n                            const name = this.customer.name || \"\";\n                            let data = {\n                                file: this.imgFile,\n                                info: {\n                                    name: this.fileName,\n                                    description: this.fileDesc,\n                                    size: this.fileSize,\n                                    type: this.fileType,\n                                },\n                                type: \"Contact\",\n                                id: id,\n                                name: name,\n                            };\n                            this.showLoading = true;\n                            billingHandler.attachment(data).then((res) => {\n                                if (res.data.statusCode === 201) {\n                                    this.showLoading = false;\n                                    this.imgFile = null;\n                                    this.src = \"\";\n                                    this.fileDesc = \"\";\n                                    this.fileName = \"\";\n                                    this.fileSize = 0;\n                                    this.fileType = \"\";\n                                    this.$snotify.success(\"Success\");\n                                    this.loadAttachment();\n                                    // this.txnList = JSON.parse(JSON.stringify(res.data.data))\n                                    // window.console.log('transactions', this.txnList)\n                                }\n                            });\n                        } else {\n                            this.showLoading = false;\n                            this.$snotify.error(\"Please select customer\");\n                        }\n                    } else {\n                        this.showLoading = false;\n                        this.$snotify.error(\"Please browse to upload image\");\n                    }\n                }, 10);\n            });\n        },\n        fileUrl(dataItem) {\n            if (dataItem.fileUrl) {\n                return `<a target=\"_blank\" style=\"color:#ED1A3A !important\" href=\"${dataItem.fileUrl}\"><span>Open</span></a>`;\n            }\n            return ``;\n        },\n        referenceTemplate(data) {\n            let url = \"\";\n            if (data.type === \"Invoice\") {\n                url = `invoice_view/${data.txnId}`;\n            } else if (data.type === \"Sale Quote\") {\n                url = `sale_quote_view/${data.txnId}`;\n            } else if (data.type === \"Delayed Invoice\") {\n                url = `delayed_invoice_view/${data.txnId}`;\n            } else if (data.type === \"Sale Order\") {\n                url = `sale_order_view/${data.txnId}`;\n            } else if (data.type === \"Purchase Order\") {\n                url = `purchase_order_view/${data.txnId}`;\n            } else if (data.type === \"Credit Memo\") {\n                url = `sale_return_view/${data.txnId}`;\n            } else if (data.type === \"Debit Memo\") {\n                url = `purchase_return_view/${data.txnId}`;\n            } else if (data.type === \"Inventory Adjustment\") {\n                url = `inventory_adjustment_view/${data.txnId}`;\n            } else if (data.type === \"Purchase\") {\n                url = `credit_purchase_view/${data.txnId}`;\n            } else if (data.type === \"Production Order\") {\n                url = `production_order_view/${data.txnId}`;\n            } else if (data.type === \"Production\") {\n                url = `production/${data.txnId}`;\n            } \n            else if (data.type === \"Cash Receipt\") {\n                url = `cash_receipt/${data.txnId}`;\n            }\n            let args = {\n                text: data.referenceNo,\n                url: url,\n                data: data,\n            };\n            return {\n                template: LinkTemplate,\n                templateArgs: args,\n            };\n        },\n        txnStatus(dataItem) {\n            const status = dataItem.status || 1;\n            let statusText = \"\";\n            switch (status) {\n                case 1:\n                    statusText = \"OPEN\";\n                    break;\n                case 2:\n                    statusText = \"PARTIALLY PAID\";\n                    break;\n                case 3:\n                    statusText = \"PAID\";\n                    break;\n                case 4:\n                    statusText = \"VOID\";\n                    break;\n            }\n            return statusText;\n        },\n        async searchTransaction() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const id = this.customer.id || \"\";\n                    if (id) {\n                        this.showLoadingTxn = true;\n                        const startDate = this.startDate;\n                        const endDate = this.endDate;\n\n                        if (id) {\n                            const strFilter =\n                                \"?start=\" + startDate + \"&end=\" + endDate + \"&id=\" + id;\n                            billingHandler.customerTxn(strFilter).then((res) => {\n                                if (res.data.statusCode === 200) {\n                                    this.showLoadingTxn = false;\n                                    this.txnList = JSON.parse(JSON.stringify(res.data.data));\n                                }\n                            });\n                        }\n                    }\n                }, 10);\n            });\n        },\n        onSorterChanges(val) {\n            let today = new Date();\n            switch (val) {\n                case \"Today\":\n                    this.startDate = kendo.toString(today, \"yyyy-MM-dd\");\n                    this.endDate = kendo.toString(today, \"yyyy-MM-dd\");\n\n                    break;\n                case \"This Week\":\n                    var first = today.getDate() - today.getDay(),\n                        last = first + 6;\n\n                    this.startDate = kendo.toString(\n                        new Date(today.setDate(first)),\n                        \"yyyy-MM-dd\"\n                    );\n                    today = new Date();\n                    this.endDate = kendo.toString(\n                        new Date(today.setDate(last)),\n                        \"yyyy-MM-dd\"\n                    );\n\n                    break;\n                case \"This Month\":\n                    this.startDate = kendo.toString(\n                        new Date(today.getFullYear(), today.getMonth(), 1),\n                        \"yyyy-MM-dd\"\n                    );\n                    this.endDate = kendo.toString(\n                        new Date(today.getFullYear(), today.getMonth(), 31),\n                        \"yyyy-MM-dd\"\n                    );\n\n                    break;\n                case \"This Year\":\n                    this.startDate = kendo.toString(\n                        new Date(today.getFullYear(), 0, 1),\n                        \"yyyy-MM-dd\"\n                    );\n                    this.endDate = kendo.toString(\n                        new Date(today.getFullYear(), 11, 31),\n                        \"yyyy-MM-dd\"\n                    );\n\n                    break;\n                default:\n                    this.startDate = \"\";\n                    this.endDate = \"\";\n            }\n        },\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.transactionDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        onCustomerTypeChanged(search) {\n            this.showLoading = true;\n            this.loadCustomerCenter(search);\n        },\n        async loadCustomerGroup() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    customerGroupHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.customerGroups = res;\n                        if (this.customerGroups.length > 0) {\n                            this.mCustomerGroup = this.customerGroups[0];\n                            this.loadCustomerCenter(this.search);\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async customerInfo() {\n            this.$emit(\"onUpdate\", this.customer);\n        },\n        async onChanged() {\n            let grid = kendo.jQuery(\"#gridCustomer\").data(\"kendoGrid\");\n            let selectedItem = grid.dataItem(grid.select());\n            this.customer = selectedItem;\n            this.$emit(\"onUpdate\", selectedItem);\n            window.console.log(\"--\", this.customer.id);\n            if (this.customer.hasOwnProperty(\"id\")) {\n                if (this.customer.id !== \"\" || this.customer.id !== undefined) {\n                    await this.searchTransaction();\n                    await this.loadAttachment();\n                }\n            }\n        },\n        async loadCustomerType() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    customerTypeHandler.get().then((res) => {\n                        // this.customerTypes = res;\n                        if (this.appType == 'npo') {\n                            if (res.length != 0) {\n                                this.customerTypes = res.filter(o => {\n                                    const nature = o.nature || {}\n                                    const name = nature.name || ''\n                                    if (name.includes('Individual-') === false) {\n                                        return o\n                                    }\n                                });\n                            }\n                        } else {\n                            this.customerTypes = res\n                        }\n                        if (this.customerTypes.length > 0) {\n                            this.mCustomerType = this.customerTypes[0];\n                            const group = this.mCustomerGroup || {};\n                            if (group.id !== \"\") {\n                                this.loadCustomerCenter(this.search);\n                            }\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadCustomerCenter(search) {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.customers = [];\n                    let groupId = '';\n                    let customerTypeId = '';\n                    if (this.mCustomerGroup) {\n                        groupId = this.mCustomerGroup.id || ''\n                    }\n                    if (this.mCustomerType) {\n                        customerTypeId = this.mCustomerType.id || ''\n                    }\n                    let strFilter = \"?is_donor=false\";\n                    if (this.appType === 'npo') {\n                        strFilter = \"?is_donor=true\";\n                    }\n                    const strSearch = search || \"\";\n                    window.console.log('strFilter', strFilter, strSearch)\n                    const strFilterV1 = '?donor=0&ctid=' + customerTypeId + '&grp=' + groupId + '&search=' + strSearch\n                    customerHandler\n                        // .center(customerTypeId, groupId, strSearch, strFilter)\n                        .centerv1(strFilterV1)\n                        .then((res) => {\n                            this.showLoading = true;\n                            if (res.data.statusCode === 200) {\n                                this.showLoading = false;\n                                this.customers = res.data.data;\n                            } else {\n                                this.showLoading = false;\n                            }\n                        });\n                }, 10);\n            });\n        },\n\n        callback() {\n            if (\n                this.$route.params !== null &&\n                this.$route.params.hasOwnProperty(\"data\")\n            ) {\n                const customer = this.$route.params.data;\n                const index = this.customers.findIndex((item) => {\n                    return customer.id === item.id;\n                });\n                if (index < 0) {\n                    this.customers.push(customer);\n                } else {\n                    this.customers.splice(index, 1, customer);\n                }\n            }\n            window.console.log(\"im changed\", this.$route.params);\n        },\n        async loadAttachment() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    // if (this.$route.params.hasOwnProperty('id')) {\n                    this.showLoadingAtch = true;\n                    const strFilter = \"?id=\" + this.customer.id;\n                    billingHandler.attachmentList(strFilter).then((res) => {\n                        if (res.data.statusCode === 200) {\n                            this.showLoadingAtch = false;\n                            this.attachmentList = res.data.data;\n                        }\n                    });\n                    // }\n                }, 10);\n            });\n        },\n        async loadData() {\n            await this.loadCustomerType();\n            await this.loadCustomerGroup();\n        },\n    },\n    async mounted() {\n        await this.loadCustomerType();\n        await this.loadCustomerGroup();\n    },\n    computed: {\n        appType() {\n            return dataStore.productType;\n        },\n    },\n    watch: {\n        $route: \"callback\",\n    },\n};\n</script>\n<style scoped>\n@media (max-width: 576px) {\n    .v-tab {\n        min-width: auto !important;\n    }\n\n    .grid-center.center_heigth_npo {\n        height: 466px !important;\n    }\n\n    .paddingLeft {\n        margin-left: 15px;\n    }\n}\n</style>\n"]}]}
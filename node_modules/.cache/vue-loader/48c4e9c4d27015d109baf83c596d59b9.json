{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/customer/customer_credit_term/credit_limit_term/CreditLimitTerm.vue?vue&type=style&index=0&id=94b7c8f8&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/customer/customer_credit_term/credit_limit_term/CreditLimitTerm.vue","mtime":1638499443202},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBtZWRpYSAobWF4LXdpZHRoOiA1NzZweCkgewogIC52LXRhYiB7CiAgICBtaW4td2lkdGg6IGF1dG8gIWltcG9ydGFudDsKICB9CgogIC5wYWRkaW5nTGVmdCB7CiAgICBtYXJnaW4tbGVmdDogMTVweDsKICB9Cn0KCi5ncmlkLWNlbnRlci5jZW50ZXJfaGVpZ3RoIHsKICBoZWlnaHQ6IDM1NnB4ICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["CreditLimitTerm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgcA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CreditLimitTerm.vue","sourceRoot":"src/views/customers/customer/customer_credit_term/credit_limit_term","sourcesContent":["<template>\n  <v-row>\n    <v-col class=\"pr-4 pb-0\" sm=\"4\" cols=\"12\">\n      <v-card\n          outlined\n          dense\n          class=\"pa-3 no_border mb-md-4 mb-xs-0\"\n          height=\"180px\"\n          color=\"grayBg\">\n        <v-text-field\n            v-model=\"search\"\n            @change=\"onCustomerTypeChanged(search)\"\n            outlined\n            @click:clear=\"onCustomerTypeChanged('')\"\n            :placeholder=\"$t('search')\"\n            append-icon=\"search\"\n            clearable\n        />\n        <v-select\n            :items=\"customerTypes\"\n            @change=\"onCustomerTypeChanged('')\"\n            item-value=\"id\"\n            item-text=\"name\"\n            v-model=\"mCustomerType\"\n            return-object\n            :placeholder=\"$t('customer_type')\"\n            clearable\n            outlined\n        />\n        <v-select\n            :items=\"customerGroups\"\n            @change=\"onCustomerTypeChanged('')\"\n            item-value=\"id\"\n            item-text=\"name\"\n            return-object\n            v-model=\"mCustomerGroup\"\n            :placeholder=\"$t('customer_group')\"\n            clearable\n            outlined\n        />\n      </v-card>\n      <v-card\n          outlined\n          dense\n          class=\"pa-3 no_border hidden-sm-and-down\"\n          color=\"grayBg\"\n      >\n        <LoadingMe\n            :isLoading=\"showLoading\"\n            :fullPage=\"false\"\n            type=\"loading\"\n            :myLoading=\"true\"\n        />\n        <kendo-datasource\n            ref=\"customerDS\"\n            :data=\"customers\"\n            :schema=\"schemaDefinition\"\n        />\n\n        <kendo-grid\n            id=\"gridCustomers\"\n            class=\"grid-center center_heigth\"\n            :change=\"onChanged\"\n            :data-source-ref=\"'customerDS'\"\n            :selectable=\"true\"\n            :persistSelection=\"true\"\n            :noRecords=\"true\"\n            :scrollable=\"true\"\n            :height=\"535\"\n            :pageable-numeric=\"false\"\n            :pageable-previous-next=\"false\"\n            :pageable-messages-display=\"'Showing {2} data items'\"\n        >\n          <kendo-grid-column\n              :field=\"'name'\"\n              :attributes=\"{ class: 'tb_name_td' }\"\n              :title=\"'name'\"\n              :hidden=\"true\"\n              :group-header-template=\"'#=value#'\"\n          />\n          <kendo-grid-column\n              :field=\"'name'\"\n              :title=\"'&nbsp;'\"\n              :template=\"'<span>#= customerType.abbr#-#=number# - #=name#</span>'\"\n          />\n        </kendo-grid>\n      </v-card>\n    </v-col>\n    <v-col class=\"pt-3 pb-0\" sm=\"8\" cols=\"12\">\n      <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"tab_txn_att pt-0 pl-0\">\n          <v-tabs>\n            <v-tab>\n              <span class=\"text-upercase\">\n                {{ $t(\"credit_limit\") }}\n              </span>\n            </v-tab>\n            <v-tab>\n              <span class=\"text-upercase\">\n                {{ $t(\"payment_term\") }}\n              </span>\n            </v-tab>\n\n            <!-- Credit Limit -->\n            <v-tab-item>\n              <CreditLimit :customer=\"customer\"/>\n            </v-tab-item>\n\n            <!-- Payment term -->\n            <v-tab-item>\n              <PaymentTerm :customer=\"customer\"/>\n            </v-tab-item>\n          </v-tabs>\n        </v-col>\n      </v-row>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\n// import DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\nimport CustomerModel from \"@/scripts/model/Customer\";\nimport kendo from \"@progress/kendo-ui\";\nimport LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\nimport { dataStore } from \"@/observable/store\";\n\nconst customerModel = new CustomerModel({});\n// const $ = require(\"jquery\")\nconst customerTypeHandler = require(\"@/scripts/customerTypeHandler\");\nconst customerGroupHandler = require(\"@/scripts/customerGroupHandler\");\nconst customerHandler = require(\"@/scripts/customerHandler\");\n// const billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\n\nexport default {\n  name: \"CustomerCenter\",\n  props: [\"id\"],\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    // \"app-datepicker\": DatePickerComponent,\n    CreditLimit: () => import('./CredtLimit'),\n    PaymentTerm: () => import('./PaymentTerm')\n  },\n  data: () => ({\n    creditLimititem: [],\n    paymentItem: [],\n    showLoading: false,\n    showLoadingTxn: false,\n    showLoadingAtch: false,\n    info: {},\n    customers: [],\n    start_date: \"\",\n    end_date: \"\",\n    customerTypes: [],\n    mCustomerType: {},\n    headers: [],\n    customerGroups: [],\n    mCustomerGroup: {},\n    journal_entries: [],\n    forwarded: \"\",\n    files: [],\n    search: \"\",\n    customer: customerModel,\n    schemaDefinition: {\n      model: {id: \"id\"},\n    },\n    groupDefinition: {\n      field: \"type\",\n    },\n    txnList: [],\n    startDate: new Date().toISOString().substr(0, 10),\n    endDate: new Date().toISOString().substr(0, 10),\n    dateSorters: [\"Today\", \"This Week\", \"This Month\", \"This Year\"],\n    mDateSorter: \"Today\",\n    rules: [\n      (files) =>\n          !files ||\n          !files.some((file) => file.size > 5 * 1024 * 1024) ||\n          \"Avatar size should be less than 5 MB!\",\n    ],\n    attachmentList: [],\n    imgFile: \"\",\n    src: \"\",\n    file_: {},\n    fileDesc: \"\",\n    fileSize: 0,\n    fileType: \"\",\n    fileName: \"\",\n  }),\n  methods: {\n    transactionDate(dataItem) {\n      const txnDate = dataItem.transactionDate;\n      const dateFormat = dataItem.dateFormat;\n      if (txnDate) {\n        return kendo.toString(new Date(txnDate), dateFormat);\n      }\n      return \"\";\n    },\n    referenceTemplate(data) {\n      let url = \"\";\n      if (data.type === \"Invoice\") {\n        url = `invoice_view/${data.txnId}`;\n      } else if (data.type === \"Sale Deposit\") {\n        url = `sale_deposit_view/${data.txnId}`;\n      } else if (data.type === \"Purchase\") {\n        url = `purchase_view/${data.txnId}`;\n      } else if (data.type === \"Sale Quote\") {\n        url = `sale_quote_view/${data.txnId}`;\n      } else if (data.type === \"Cash Receipt\") {\n        url = `cash_receipt_view/${data.txnId}`;\n      }\n      let args = {\n        text: data.referenceNo,\n        url: url,\n        data: data,\n      };\n      return {\n        template: LinkTemplate,\n        templateArgs: args,\n      };\n    },\n    txnStatus(dataItem) {\n      const status = dataItem.status || 1;\n      let statusText = \"\";\n      switch (status) {\n        case 1:\n          statusText = \"OPEN\";\n          break;\n        case 2:\n          statusText = \"PARTIALLY PAID\";\n          break;\n        case 3:\n          statusText = \"PAID\";\n          break;\n        case 4:\n          statusText = \"VOID\";\n          break;\n      }\n      return statusText;\n    },\n    // async searchTransaction() {\n    //   new Promise((resolve) => {\n    //     setTimeout(() => {\n    //       resolve(\"resolved\");\n    //       const id = this.customer.id || \"\";\n    //       if (id) {\n    //         this.showLoadingTxn = true;\n    //         const startDate = this.startDate;\n    //         const endDate = this.endDate;\n    //\n    //         if (id) {\n    //           const strFilter =\n    //               \"?start=\" + startDate + \"&end=\" + endDate + \"&id=\" + id;\n    //           billingHandler.customerTxn(strFilter).then((res) => {\n    //             if (res.data.statusCode === 200) {\n    //               this.showLoadingTxn = false;\n    //               this.txnList = JSON.parse(JSON.stringify(res.data.data));\n    //             }\n    //           });\n    //         }\n    //       }\n    //     }, 10);\n    //   });\n    // },\n    onSorterChanges(val) {\n      let today = new Date();\n      switch (val) {\n        case \"Today\":\n          this.startDate = kendo.toString(today, \"yyyy-MM-dd\");\n          this.endDate = kendo.toString(today, \"yyyy-MM-dd\");\n\n          break;\n        case \"This Week\":\n          var first = today.getDate() - today.getDay(),\n              last = first + 6;\n\n          this.startDate = kendo.toString(\n              new Date(today.setDate(first)),\n              \"yyyy-MM-dd\"\n          );\n            today = new Date()\n          this.endDate = kendo.toString(\n              new Date(today.setDate(last)),\n              \"yyyy-MM-dd\"\n          );\n\n          break;\n        case \"This Month\":\n          this.startDate = kendo.toString(\n              new Date(today.getFullYear(), today.getMonth(), 1),\n              \"yyyy-MM-dd\"\n          );\n          this.endDate = kendo.toString(\n              new Date(today.getFullYear(), today.getMonth(), 31),\n              \"yyyy-MM-dd\"\n          );\n\n          break;\n        case \"This Year\":\n          this.startDate = kendo.toString(\n              new Date(today.getFullYear(), 0, 1),\n              \"yyyy-MM-dd\"\n          );\n          this.endDate = kendo.toString(\n              new Date(today.getFullYear(), 11, 31),\n              \"yyyy-MM-dd\"\n          );\n\n          break;\n        default:\n          this.startDate = \"\";\n          this.endDate = \"\";\n      }\n    },\n    rowNumberTmpl(dataItem) {\n      let ds = this.$refs.transactionDS.kendoWidget(),\n          index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    onCustomerTypeChanged(search) {\n      this.showLoading = true;\n      this.loadCustomerCenter(search);\n    },\n    async loadCustomerGroup() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          customerGroupHandler.get().then((res) => {\n            this.showLoading = false;\n            this.customerGroups = res;\n            if (this.customerGroups.length > 0) {\n              this.mCustomerGroup = this.customerGroups[0];\n            }\n            this.loadCustomerCenter(\"\");\n          });\n        }, 10);\n      });\n    },\n    async customerInfo() {\n      this.$emit(\"onUpdate\", this.customer);\n    },\n    async onChanged() {\n      let grid = kendo.jQuery(\"#gridCustomers\").data(\"kendoGrid\");\n      let selectedItem = grid.dataItem(grid.select());\n      this.customer = selectedItem;\n      window.console.log(this.customer, \"mCustomer\");\n      this.$emit(\"onUpdate\", selectedItem);\n    },\n    async loadCustomerType() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          customerTypeHandler.get().then((res) => {\n            this.customerTypes = res;\n            if (this.customerTypes.length > 0) {\n              this.mCustomerType = this.customerTypes[0];\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadCustomerCenter(search) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.customers = [];\n          let groupId = undefined;\n          let customerTypeId = undefined;\n          if (this.mCustomerGroup) {\n            groupId = this.mCustomerGroup.hasOwnProperty(\"id\")\n                ? this.mCustomerGroup.id\n                : undefined;\n          }\n          if (this.mCustomerType) {\n            customerTypeId = this.mCustomerType.hasOwnProperty(\"id\")\n                ? this.mCustomerType.id\n                : undefined;\n          }\n          // window.console.log(\"this.mCustomerGroup\",this.mCustomerGroup)\n          // const strFilter = '?is_donor=true'\n          let strFilter = \"?is_donor=false\";\n          if(this.appType === 'npo'){\n            strFilter  = \"?is_donor=true\";\n          }\n          customerHandler\n              .center(customerTypeId, groupId, search, strFilter)\n              .then((res) => {\n                this.showLoading = true;\n                if (res.data.statusCode === 200) {\n                  this.showLoading = false;\n                  this.customers = res.data.data;\n                } else {\n                  this.showLoading = false;\n                }\n              });\n        }, 10);\n      });\n    },\n\n    callback() {\n      if (\n          this.$route.params !== null &&\n          this.$route.params.hasOwnProperty(\"data\")\n      ) {\n        const customer = this.$route.params.data;\n        const index = this.customers.findIndex((item) => {\n          return customer.id === item.id;\n        });\n        if (index < 0) {\n          this.customers.push(customer);\n        } else {\n          this.customers.splice(index, 1, customer);\n        }\n      }\n      window.console.log(\"im changed\", this.$route.params);\n    },\n    // async loadAttachment() {\n    //   new Promise((resolve) => {\n    //     setTimeout(() => {\n    //       resolve(\"resolved\");\n    //       if (this.$route.params.hasOwnProperty(\"id\")) {\n    //         this.showLoadingAtch = true;\n    //         const strFilter = \"?id=\" + this.$route.params.id;\n    //         billingHandler.attachmentList(strFilter).then((res) => {\n    //           if (res.data.statusCode === 200) {\n    //             this.showLoadingAtch = false;\n    //             this.attachmentList = res.data.data;\n    //           }\n    //         });\n    //       }\n    //     }, 10);\n    //   });\n    // },\n  },\n  async mounted() {\n    await this.loadCustomerType();\n    await this.loadCustomerGroup();\n  },\n  computed: {\n    appType() {\n      return dataStore.productType;\n    },\n  },\n  watch: {\n    $route: \"callback\",\n  },\n};\n</script>\n<style scoped>\n@media (max-width: 576px) {\n  .v-tab {\n    min-width: auto !important;\n  }\n\n  .paddingLeft {\n    margin-left: 15px;\n  }\n}\n\n.grid-center.center_heigth {\n  height: 356px !important;\n}\n</style>\n"]}]}
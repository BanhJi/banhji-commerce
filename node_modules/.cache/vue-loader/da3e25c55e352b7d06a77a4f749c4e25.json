{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/compliance/monthly_tax/new_tax_return/confirm/tax_credit/VAT.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/compliance/monthly_tax/new_tax_return/confirm/tax_credit/VAT.vue","mtime":1638499443162},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkaW5nTWUgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRpbmciOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKCmNvbnN0IHNhbGVIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2NvbXBsaWFuY2UvaGFuZGxlci9zYWxlSGFuZGxlciIpCmNvbnN0IHB1cmNoYXNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jb21wbGlhbmNlL2hhbmRsZXIvcHVyY2hhc2VIYW5kbGVyIikKY29uc3QgbW9udGhseVJldHVybkhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY29tcGxpYW5jZS9oYW5kbGVyL21vbnRobHlSZXR1cm5IYW5kbGVyIikKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgICAgaXNfbW9udGg6IGZhbHNlLAogICAgICAgIGlzX3N0YXJ0X2RhdGU6IGZhbHNlLAogICAgICAgIGlzX2VuZF9kYXRlOiBmYWxzZSwKICAgICAgICBzdGFydF9kYXRlOiAiIiwKICAgICAgICBlbmRfZGF0ZTogIiIsCgogICAgICAgIHNlYXJjaDogewogICAgICAgICAgICBzdGFydF9kYXRlOiAiIiwKICAgICAgICAgICAgZW5kX2RhdGU6ICIiCiAgICAgICAgfSwKICAgICAgICBiYWxhbmNlOiB7fSwKICAgICAgICBzYWxlczogW10sCiAgICAgICAgcHVyY2hhc2VzOiBbXSwKICAgICAgICBuZXdNb250aE9mOiAnJywKICAgICAgICB0b3RhbEFtb3VudFA6IDAsCiAgICAgICAgdG90YWxBbW91bnRTOiAwLAogICAgICAgIHRvdGFsQmFsYW5jZTogMCwKICAgICAgICB0QmFsYW5jZTogMCwKICAgICAgICB2YXRSZWZ1bmQ6IDAsCiAgICAgICAgc3RhdHVzU2FsZTogZmFsc2UsCiAgICAgICAgc3RhdHVzUHVyY2hhc2U6IGZhbHNlLAogICAgICAgIHZhdDoge30sCiAgICB9KSwKICAgIHByb3BzOiBbJ21vbnRobHlSZXR1cm4nLCAnYW1vdW50U2FsZScsICd0b3RhbEFtb3VudFB1cmNoYXNlJ10sCiAgICB3YXRjaDogewogICAgICAgICdhbW91bnRTYWxlcyc6ICdjYWxjdWxhdGUnLAogICAgICAgICd0b3RhbEFtb3VudFB1cmNoYXNlcyc6ICdjYWxjdWxhdGUnLAogICAgICAgICd0b3RhbEFtb3VudFAnOiAnY2FsY3VsYXRlJywKICAgICAgICAndG90YWxBbW91bnRTJzogJ2NhbGN1bGF0ZScsCiAgICAgICAgJ2JhbGFuY2VDcmVkaXQnOiAnY2FsY3VsYXRlJwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBvblVwZGF0ZUJhbGFuY2UoY3JlZGl0LCBwYXltZW50KSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldEJhbGFuY2VWQVQnLCB7Y3JlZGl0OiBjcmVkaXQsIHBheW1lbnQ6IHBheW1lbnR9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZEJhbGFuY2UoKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIGlmICh0aGlzLmJhbGFuY2UuYmFsYW5jZUNyZWRpdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9ubG9hZFNhbGUoKQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbmxvYWRQdXJjaGFzZSgpCiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxjdWxhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9LCA3MDApCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRCYWxhbmNlKCkgewogICAgICAgICAgICBjb25zdCBhZGRaZXJvID0gKG51bSwgcGxhY2VzKSA9PiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICcwJykKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLnZhdC5pZAogICAgICAgICAgICBjb25zdCBtb250aGx5ID0gbmV3IERhdGUodGhpcy5tb250aGx5UmV0dXJuLm1vbnRoT2YpLnNldE1vbnRoKG5ldyBEYXRlKHRoaXMubW9udGhseVJldHVybi5tb250aE9mKS5nZXRNb250aCgpKQogICAgICAgICAgICBjb25zdCBtb250aE9mID0gbmV3IERhdGUobW9udGhseSkuZ2V0RnVsbFllYXIoKSArICctJyArIGFkZFplcm8obmV3IERhdGUobW9udGhseSkuZ2V0TW9udGgoKSwgMikKICAgICAgICAgICAgdGhpcy5uZXdNb250aE9mID0gbW9udGhPZgogICAgICAgICAgICBtb250aGx5UmV0dXJuSGFuZGxlci5nZXRCYWxhbmNlVmF0KGlkLCBtb250aE9mLCAnbW9udGhseScpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2UgPSByZXMuZGF0YS5kYXRhWzBdCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsYW5jZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUNyZWRpdDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVBheW1lbnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25sb2FkVmF0KCkgewogICAgICAgICAgICBhd2FpdCBtb250aGx5UmV0dXJuSGFuZGxlci5nZXRWYXQoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnZhdCA9IHJlcy5kYXRhLmRhdGFbMF0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9ubG9hZFNhbGUoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzYWxlSGFuZGxlci5nZXRCeU1ySWQodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FsZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25DYWxjdWxhdGUoKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbmxvYWRQdXJjaGFzZSgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgIHB1cmNoYXNlSGFuZGxlci5nZXRCeU1ySWQodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVyY2hhc2VzID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uQ2FsY3VsYXRlKCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICB9KQoKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uQ2FsY3VsYXRlKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGFtb3VudFAgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRTID0gMAogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnB1cmNoYXNlcy5sZW5ndGggPiAwICYmIHRoaXMudG90YWxBbW91bnRQdXJjaGFzZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCcxMjMnKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHVyY2hhc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wdXJjaGFzZXNbaV0udHlwZVByb2R1Y3QuYmFzZUFtb3VudCAhPT0gIk5ldCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRQICs9IHRoaXMucHVyY2hhc2VzW2ldLnRvdGFsVkFUCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbEFtb3VudFAgPSBhbW91bnRQCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhhbW91bnRQKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1B1cmNoYXNlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy50b3RhbEFtb3VudFAsICdQJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2FsZXMubGVuZ3RoID4gMCAmJiB0aGlzLmFtb3VudFNhbGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCc5ODcnKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2FsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudFMgKz0gdGhpcy5zYWxlc1tpXS50b3RhbFZBVAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxBbW91bnRTID0gYW1vdW50UwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1NhbGUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnRvdGFsQW1vdW50UywgJ1MnKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGNhbGN1bGF0ZSgpIHsKICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRCYWxhbmNlKCkKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnRvdGFsQW1vdW50UywgdGhpcy50b3RhbEFtb3VudFAsICdzYWxlLCBwdXJjaGFzZScpCiAgICAgICAgICAgICAgICAgICAgbGV0IHRCYWxhbmNlID0gMCwgY3JlZGl0ID0gMCwgcGF5bWVudCA9IDAKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXNTYWxlICYmIHRoaXMuc3RhdHVzUHVyY2hhc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbEJhbGFuY2UgPSBrZW5kby5wYXJzZUZsb2F0KHRoaXMudG90YWxBbW91bnRQKSArIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5iYWxhbmNlLmJhbGFuY2VDcmVkaXQpIC0ga2VuZG8ucGFyc2VGbG9hdCh0aGlzLnRvdGFsQW1vdW50UykKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsQmFsYW5jZSA9IGtlbmRvLnBhcnNlRmxvYXQodGhpcy50b3RhbEFtb3VudFB1cmNoYXNlKSArIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5iYWxhbmNlLmJhbGFuY2VDcmVkaXQpIC0ga2VuZG8ucGFyc2VGbG9hdCh0aGlzLmFtb3VudFNhbGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMudEJhbGFuY2UgPSB0aGlzLnRvdGFsQmFsYW5jZQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvdGFsQmFsYW5jZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdEJhbGFuY2UgPSB0aGlzLnRvdGFsQmFsYW5jZSAqICgtMSkKICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudCA9IHRoaXMudG90YWxCYWxhbmNlICogKC0xKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsQmFsYW5jZSA9IGAoJHt0aGlzLm51bWJlckZvcm1hdCh0aGlzLnRvdGFsQmFsYW5jZSAqICgtMSkpfSlgCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGl0ID0gdGhpcy50b3RhbEJhbGFuY2UKICAgICAgICAgICAgICAgICAgICAgICAgdEJhbGFuY2UgPSB0aGlzLnRvdGFsQmFsYW5jZQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsQmFsYW5jZSA9IHRoaXMubnVtYmVyRm9ybWF0KHRoaXMudG90YWxCYWxhbmNlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy50b3RhbEJhbGFuY2UsIHRCYWxhbmNlLCAndG90YWwgYmFsYW5jZScpCiAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRUeG4oY3JlZGl0LCBwYXltZW50KQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25VcGRhdGVCYWxhbmNlKGNyZWRpdCwgcGF5bWVudCkKICAgICAgICAgICAgICAgIH0sIDUwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGFkZFR4bihjcmVkaXQsIHBheW1lbnQpIHsKICAgICAgICAgICAgaWYgKGNyZWRpdCA+PSAwIHx8IHBheW1lbnQgPj0gMCkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBjcmVkaXQ6IGNyZWRpdCwKICAgICAgICAgICAgICAgICAgICBwYXltZW50OiBwYXltZW50LAogICAgICAgICAgICAgICAgICAgIG1vbnRoT2Y6IHRoaXMubW9udGhseVJldHVybi5tb250aE9mLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YXQgbW9udGhseScsCiAgICAgICAgICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0pTT04oKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYXdhaXQgbW9udGhseVJldHVybkhhbmRsZXIuYWRkVHhuVkFUKGRhdGEsIHRoaXMubW9udGhseVJldHVybi5tb250aE9mLCAnbW9udGhseScpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbnVtYmVyRm9ybWF0KHZhbHVlKSB7CiAgICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnNhbGVGb3JtQ29udGVudC5kZWNpbWFsLCduaW1vbCcpCiAgICAgICAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyh2YWx1ZSwgYG4yYCkKICAgICAgICB9LAogICAgICAgIG9uU2VhcmNoKCkgewogICAgICAgICAgICB0aGlzLnNlYXJjaCA9IHsKICAgICAgICAgICAgICAgICdzdGFydF9kYXRlJzogdGhpcy5zdGFydF9kYXRlICsgJy0wMScsCiAgICAgICAgICAgICAgICAnZW5kX2RhdGUnOiB0aGlzLmVuZF9kYXRlICsgJy0wMScKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBhc3luYyBtb3VudGVkKCkgewogICAgICAgIGF3YWl0IHRoaXMub25sb2FkVmF0KCkKICAgICAgICBhd2FpdCB0aGlzLmxvYWRCYWxhbmNlKCkKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGJhbGFuY2VDcmVkaXQoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmJhbGFuY2UuYmFsYW5jZUNyZWRpdCA+IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2UuYmFsYW5jZUNyZWRpdAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbW9udGhPZigpIHsKICAgICAgICAgICAgaWYgKHRoaXMubW9udGhseVJldHVybi5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tb250aGx5UmV0dXJuLm1vbnRoT2YKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhbW91bnRTYWxlcygpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50U2FsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy5hbW91bnRTYWxlLCAnVkFUIFNhbGUnKQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW1vdW50U2FsZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG90YWxBbW91bnRQdXJjaGFzZXMoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmFtb3VudFB1cmNoYXNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLmFtb3VudFB1cmNoYXNlLCAnVkFUIHB1cmNoYXNlJykKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFtb3VudFB1cmNoYXNlCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhbW91bnRQdXJjaGFzZUV4Y3VscygpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50UHVyY2hhc2VFeGN1bCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbW91bnRQdXJjaGFzZUV4Y3VsCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAnTG9hZGluZ01lJzogTG9hZGluZ01lLAogICAgICAgIC8vICdtb250aC1waWNrZXInIDogKCk9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9jdXN0b21fdGVtcGxhdGVzL01vbnRoUGlja2VyJykKICAgIH0sCn07Cg=="},{"version":3,"sources":["VAT.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VAT.vue","sourceRoot":"src/views/compliance/monthly_tax/new_tax_return/confirm/tax_credit","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-2 px-6\">\n            <v-row class=\"\">\n                <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                    <v-row>\n                        <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                            <h2 class=\"mb-0 font_20\">{{ $t('value_added_tax') }}</h2>\n                        </v-col>\n                    </v-row>\n                </v-col>\n            </v-row>\n\n            <v-row class=\"\">\n                <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                    <v-simple-table>\n                        <template v-slot:default>\n                            <thead>\n                            <tr>\n                                <th class=\"text-bold text-uppercase\">{{ $t('description') }}</th>\n                                <th class=\"text-bold text-uppercase\">{{ $t('monthof') }}</th>\n                                <th class=\"text-bold text-uppercase\">{{ $t('code') }}</th>\n                                <th class=\"text-bold text-uppercase text-center\">{{ $t('amount') }}</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>{{ $t('tax_credit_carried_from_last_month') }}</td>\n                                <td class=\"\">{{ newMonthOf }}</td>\n                                <td class=\"\">{{ balance.code }}</td>\n                                <td class=\"text-center\">{{ numberFormat(balance.balanceCredit) }}</td>\n                            </tr>\n                            <tr>\n                                <td>{{ $t('total_amount_input_tax') }}</td>\n                                <td class=\"\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"text-center\">{{ totalAmountPurchases || numberFormat(totalAmountP) }}</td>\n                            </tr>\n                            <tr>\n                                <td>{{ $t('total_amount_output_tax') }}</td>\n                                <td class=\"\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"text-center\">{{ numberFormat(amountSale) || numberFormat(totalAmountS) }}\n                                </td>\n                            </tr>\n                            <tr v-if=\"tBalance <= 0\">\n                                <td class=\"text-bold\">VAT to be paid</td>\n                                <td class=\"text-bold\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"primary text-center white--text text-bold\">{{ totalBalance }}</td>\n                            </tr>\n                            <tr v-if=\"tBalance > 0\">\n                                <td class=\"text-bold\">(Credit Forward)</td>\n                                <td class=\"text-bold\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"primary text-center text-bold white--text\">{{ totalBalance }}</td>\n                            </tr>\n                            <tr>\n                                <td class=\"text-bold\">{{ $t('vat_refund') }}</td>\n                                <td class=\"text-bold\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"primary text-center white--text text-bold\">{{ numberFormat(vatRefund) }}</td>\n                            </tr>\n                            </tbody>\n                        </template>\n                    </v-simple-table>\n                    <LoadingMe\n                        :isLoading=\"showLoading\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"\n                    />\n                </v-col>\n            </v-row>\n        </v-col>\n\n    </v-row>\n</template>\n<script>\nimport LoadingMe from \"@/components/Loading\";\nimport kendo from \"@progress/kendo-ui\";\n\nconst saleHandler = require(\"@/scripts/compliance/handler/saleHandler\")\nconst purchaseHandler = require(\"@/scripts/compliance/handler/purchaseHandler\")\nconst monthlyReturnHandler = require(\"@/scripts/compliance/handler/monthlyReturnHandler\")\nexport default {\n    data: () => ({\n        showLoading: false,\n        is_month: false,\n        is_start_date: false,\n        is_end_date: false,\n        start_date: \"\",\n        end_date: \"\",\n\n        search: {\n            start_date: \"\",\n            end_date: \"\"\n        },\n        balance: {},\n        sales: [],\n        purchases: [],\n        newMonthOf: '',\n        totalAmountP: 0,\n        totalAmountS: 0,\n        totalBalance: 0,\n        tBalance: 0,\n        vatRefund: 0,\n        statusSale: false,\n        statusPurchase: false,\n        vat: {},\n    }),\n    props: ['monthlyReturn', 'amountSale', 'totalAmountPurchase'],\n    watch: {\n        'amountSales': 'calculate',\n        'totalAmountPurchases': 'calculate',\n        'totalAmountP': 'calculate',\n        'totalAmountS': 'calculate',\n        'balanceCredit': 'calculate'\n    },\n    methods: {\n        async onUpdateBalance(credit, payment) {\n            this.$emit('getBalanceVAT', {credit: credit, payment: payment})\n        },\n        async loadBalance() {\n            this.showLoading = true\n            if (this.balance.balanceCredit === undefined) {\n                await this.onloadSale()\n                await this.onloadPurchase()\n                new Promise(resolve => {\n                    setTimeout(async () => {\n                        resolve('resolved');\n                        await this.calculate()\n                        this.showLoading = false\n                    }, 700)\n                })\n            }\n        },\n        async getBalance() {\n            const addZero = (num, places) => String(num).padStart(places, '0')\n            const id = this.vat.id\n            const monthly = new Date(this.monthlyReturn.monthOf).setMonth(new Date(this.monthlyReturn.monthOf).getMonth())\n            const monthOf = new Date(monthly).getFullYear() + '-' + addZero(new Date(monthly).getMonth(), 2)\n            this.newMonthOf = monthOf\n            monthlyReturnHandler.getBalanceVat(id, monthOf, 'monthly').then(res => {\n                if (res.data.data.length > 0) {\n                    this.balance = res.data.data[0]\n                } else {\n                    this.balance = {\n                        balanceCredit: 0,\n                        balancePayment: 0,\n                    }\n                }\n            })\n        },\n        async onloadVat() {\n            await monthlyReturnHandler.getVat().then(res => {\n                this.vat = res.data.data[0]\n            })\n        },\n        async onloadSale() {\n            new Promise(resolve => {\n                setTimeout(async () => {\n                    resolve('resolved');\n                    await saleHandler.getByMrId(this.$route.params.id).then(async res => {\n                        this.sales = res.data.data\n                        await this.onCalculate()\n                    })\n                }, 100)\n            })\n        },\n        async onloadPurchase() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    purchaseHandler.getByMrId(this.$route.params.id).then(async res => {\n                        this.purchases = res.data.data\n                        await this.onCalculate()\n                    })\n                }, 100)\n            })\n\n        },\n        async onCalculate() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    let amountP = 0,\n                        amountS = 0\n                    if (this.purchases.length > 0 && this.totalAmountPurchases === 0) {\n                        window.console.log('123')\n                        for (let i = 0; i < this.purchases.length; i++) {\n                            if (this.purchases[i].typeProduct.baseAmount !== \"Net\") {\n                                amountP += this.purchases[i].totalVAT\n                            }\n                        }\n                        this.totalAmountP = amountP\n                        window.console.log(amountP)\n                        this.statusPurchase = true\n                        window.console.log(this.totalAmountP, 'P')\n                    }\n                    if (this.sales.length > 0 && this.amountSale === 0) {\n                        window.console.log('987')\n                        for (let i = 0; i < this.sales.length; i++) {\n                            amountS += this.sales[i].totalVAT\n                        }\n                        this.totalAmountS = amountS\n                        this.statusSale = true\n                        window.console.log(this.totalAmountS, 'S')\n                    }\n                }, 100)\n            })\n        },\n        async calculate() {\n            await this.getBalance()\n            new Promise(resolve => {\n                setTimeout(async () => {\n                    resolve('resolved');\n                    window.console.log(this.totalAmountS, this.totalAmountP, 'sale, purchase')\n                    let tBalance = 0, credit = 0, payment = 0\n                    if (this.statusSale && this.statusPurchase) {\n                        this.totalBalance = kendo.parseFloat(this.totalAmountP) + kendo.parseFloat(this.balance.balanceCredit) - kendo.parseFloat(this.totalAmountS)\n                    } else {\n                        this.totalBalance = kendo.parseFloat(this.totalAmountPurchase) + kendo.parseFloat(this.balance.balanceCredit) - kendo.parseFloat(this.amountSale)\n                    }\n                    this.tBalance = this.totalBalance\n                    if (this.totalBalance < 0) {\n                        tBalance = this.totalBalance * (-1)\n                        payment = this.totalBalance * (-1)\n                        this.totalBalance = `(${this.numberFormat(this.totalBalance * (-1))})`\n                    } else {\n                        credit = this.totalBalance\n                        tBalance = this.totalBalance\n                        this.totalBalance = this.numberFormat(this.totalBalance)\n                    }\n                    window.console.log(this.totalBalance, tBalance, 'total balance')\n                    // await this.addTxn(credit, payment)\n                    await this.onUpdateBalance(credit, payment)\n                }, 500)\n            })\n        },\n        async addTxn(credit, payment) {\n            if (credit >= 0 || payment >= 0) {\n                const data = {\n                    credit: credit,\n                    payment: payment,\n                    monthOf: this.monthlyReturn.monthOf,\n                    type: 'vat monthly',\n                    date: new Date().toJSON()\n                }\n                await monthlyReturnHandler.addTxnVAT(data, this.monthlyReturn.monthOf, 'monthly').then(res => {\n                    window.console.log(res)\n                })\n            }\n        },\n        numberFormat(value) {\n            // window.console.log(this.saleFormContent.decimal,'nimol')\n            return kendo.toString(value, `n2`)\n        },\n        onSearch() {\n            this.search = {\n                'start_date': this.start_date + '-01',\n                'end_date': this.end_date + '-01'\n            }\n        }\n    },\n    async mounted() {\n        await this.onloadVat()\n        await this.loadBalance()\n    },\n    computed: {\n        balanceCredit() {\n            if (this.balance.balanceCredit > 0) {\n                return this.balance.balanceCredit\n            } else {\n                return 0\n            }\n        },\n        monthOf() {\n            if (this.monthlyReturn.id !== undefined) {\n                return this.monthlyReturn.monthOf\n            } else {\n                return ''\n            }\n        },\n        amountSales() {\n            if (this.amountSale !== undefined) {\n                window.console.log(this.amountSale, 'VAT Sale')\n                return this.amountSale\n            } else {\n                return 0\n            }\n        },\n        totalAmountPurchases() {\n            if (this.amountPurchase !== undefined) {\n                window.console.log(this.amountPurchase, 'VAT purchase')\n                return this.amountPurchase\n            } else {\n                return 0\n            }\n        },\n        amountPurchaseExculs() {\n            if (this.amountPurchaseExcul !== undefined) {\n                return this.amountPurchaseExcul\n            } else {\n                return 0\n            }\n        }\n    },\n    components: {\n        'LoadingMe': LoadingMe,\n        // 'month-picker' : ()=> import('@/components/custom_templates/MonthPicker')\n    },\n};\n</script>\n<style scoped>\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr:last-child > th {\n    font-size: 14px;\n    border-bottom: thin solid rgba(0, 0, 0, 0.12);\n    height: 37px !important;\n    color: #000;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr.primary:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: #92d050 !important;\n}\n\n.theme--light.v-data-table {\n    background-color: transparent !important;\n    border-top: thin solid #ddd;\n    border-bottom: thin solid #ddd;\n    border-radius: 0 !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:not(.v-data-table__mobile-row),\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:not(.v-data-table__mobile-row) {\n    border-bottom: thin solid #ddd;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n    height: 32px !important;\n    border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.border_top {\n    border-top: thin solid #fff !important;\n}\n\n.v-application .primary,\n.v-application .third {\n    border-color: #fff !important;\n}\n\n.vat {\n    text-transform: uppercase;\n    color: #fff;\n    font-weight: bold;\n    font-family: 'Niradei-Bold' !important;\n}\n\n.amount {\n    text-align: right !important;\n}\n\n.head-summary {\n    text-align: right !important;\n}\n</style>\n"]}]}
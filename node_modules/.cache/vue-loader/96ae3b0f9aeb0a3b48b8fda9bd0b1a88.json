{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/Insight.vue?vue&type=style&index=0&id=7e0553e5&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/Insight.vue","mtime":1638499443120},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyID4gdGQgewogIGhlaWdodDogMzJweCAhaW1wb3J0YW50OwogIGJvcmRlci1ib3R0b206IHRoaW4gc29saWQgcmdiYSgwLCAwLCAwLCAwLjEyKTsKfQoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUKICA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIKICA+IHRhYmxlCiAgPiB0Ym9keQogID4gdHI6aG92ZXI6bm90KC52LWRhdGEtdGFibGVfX2V4cGFuZGVkX19jb250ZW50KTpub3QoLnYtZGF0YS10YWJsZV9fZW1wdHktd3JhcHBlcikgewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi5ib3JkZXJSYWRpdXMyMCB7CiAgYm9yZGVyLXJhZGl1czogMjAlICFpbXBvcnRhbnQ7Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA1NzZweCkgewp9Ci50aGVtZS0tZGFyay52LWJ0bi52LWJ0bi0taWNvbiB7CiAgY29sb3I6ICNlZDFhM2EgIWltcG9ydGFudDsKICBoZWlnaHQ6IDE3cHggIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["Insight.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyeA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Insight.vue","sourceRoot":"src/views/banking","sourcesContent":["<template>\n  <v-row>\n    <v-col class=\"pb-0 pt-4\" sm=\"12\" cols=\"12\">\n      <v-row>\n        <v-col class=\"py-0 pr-md-2\" sm=\"4\" cols=\"12\">\n          <div class=\"d-flex\">\n            <v-card\n              outlined\n              dense\n              color=\"primary\"\n              class=\"pa-2 mb-4 no_border flex-1 niradei_bold\"\n              min-height=\"62px\"\n            >\n              <v-row>\n                <h6 class=\"col-sm-12 col-md-4 font_34 white--text\">\n                  {{\n                    insight\n                      ? Number(\n                          insight.number_of_unreconcile_account\n                        ).toLocaleString()\n                      : \"00\"\n                  }}\n                </h6>\n                <h4\n                  class=\"text-right flex_right white--text py-0 col-sm-12 col-md-8 font_16 text-uppercase\"\n                >\n                  {{ $t(\"need_to_be_reconciled\") }}\n                </h4>\n              </v-row>\n            </v-card>\n            <v-btn style=\"height:62px !important;\" color=\"primary\" class=\"ml-1\">\n              <v-icon @click=\"loadDataAll\" size=\"30\" color=\"white\"\n                >mdi-reload</v-icon\n              >\n            </v-btn>\n          </div>\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border\"\n            min-height=\"234\"\n            color=\"grayBg\"\n          >\n            <h3 class=\"font_20\" :class=\"{ line_34: this.$i18n.locale == 'kh' }\">\n              {{ $t(\"bank_balance\") }}\n            </h3>\n            <p class=\"mb-0\">\n              {{ $t(\"as_of_today\") }}\n            </p>\n            <h2\n              class=\"primary--text mb-0 pa-0 niradei_black mb-0 col-sm-12 text-right\"\n            >\n              {{ Number(bankBalance).toLocaleString() }}\n            </h2>\n            <template>\n              <v-simple-table class=\"mb-3\">\n                <template>\n                  <tbody>\n                    <tr>\n                      <td class=\"text-left pl-0\" style=\"width: 69%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"balance_in_bank\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right pr-0\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          {{ Number(balanceInBank).toLocaleString() }} %\n                        </span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td style=\"width:60%\" class=\"text-left  pl-0\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"payment_in_transit\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right pr-0\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          {{ Number(paymentInTransit).toLocaleString() }} %\n                        </span>\n                      </td>\n                    </tr>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </template>\n            <v-row>\n              <v-col class=\"pl-0 py-0 text-right align-self-end\">\n                <router-link\n                  to=\"\"\n                  class=\"mb-0 niradei_bold font_16 primary--text text-right\"\n                  >{{ $t(\"view_report\") }}\n                </router-link>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n        <v-col class=\"py-md-0 px-md-2\" sm=\"8\" cols=\"12\">\n          <v-card\n            color=\"grayBg\"\n            outlined\n            dense\n            class=\"pa-4 no_border\"\n            min-height=\"282\"\n          >\n            <h3 class=\"font_20\" :class=\"{ line_34: this.$i18n.locale == 'kh' }\">\n              {{ $t(\"your_cash_position\") }}\n            </h3>\n            <p class=\"mb-0\">\n              {{ $t(\"cash_balance_its_reconciliation_as_of_today\") }}\n            </p>\n            <v-row>\n              <v-col sm=\"12\" class=\"py-0\" cols=\"12\">\n                <CashPosition height=\"200\" />\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n        <!-- col row 2 -->\n        <v-col class=\"py-0 pl-md-2\" sm=\"4\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border mt-4\"\n            min-height=\"278\"\n            color=\"grayBg\"\n          >\n            <h3 class=\"font_20\" :class=\"{ line_34: this.$i18n.locale == 'kh' }\">\n              {{ $t(\"account_connections\") }}\n            </h3>\n            <p class=\"mb-0\">\n              {{ $t(\"as_of_today\") }}\n            </p>\n            <h2\n              class=\"primary--text mb-0 pa-0 niradei_black mb-0 col-sm-12 text-right\"\n            >\n              {{ qr + bills }}\n            </h2>\n            <template>\n              <v-simple-table>\n                <LoadingMe\n                  :isLoading=\"loadingConnectedAccount\"\n                  :fullPage=\"false\"\n                  :myLoading=\"true\"\n                  :type=\"'loading'\"\n                >\n                </LoadingMe>\n                <template>\n                  <tbody>\n                    <tr>\n                      <td class=\"text-left pl-0\" style=\"width: 50%;\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"bill_payment\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right pr-0\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">{{\n                          bills\n                        }}</span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td class=\"text-left pl-0\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"qr_payment\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right pr-0\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">{{\n                          qr\n                        }}</span>\n                      </td>\n                    </tr>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </template>\n          </v-card>\n        </v-col>\n        <v-col class=\"py-0 pl-md-2\" sm=\"4\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border mt-4\"\n            min-height=\"201px\"\n            color=\"grayBg\"\n          >\n            <h3 class=\"font_20\" :class=\"{ line_34: this.$i18n.locale == 'kh' }\">\n              {{ $t(\"payment\") }}\n            </h3>\n            <p class=\"mb-0\">\n              {{ $t(\"from_the_beginning_year\") }}\n            </p>\n            <LoadingMe\n              :isLoading=\"showLoadingGraph\"\n              :fullPage=\"false\"\n              :myLoading=\"true\"\n              :type=\"'loading'\"\n            >\n            </LoadingMe>\n            <chart\n              ref=\"chart\"\n              :legend-visible=\"false\"\n              :series-defaults-labels-visible=\"true\"\n              :series-defaults-labels-template=\"'#= category # : #= value #%'\"\n              :series=\"series_chart\"\n              :tooltip-template=\"'#= category # : #= value #%'\"\n              :chartArea=\"chartAreaChart\"\n              :tooltip-visible=\"true\"\n              :theme=\"'sass'\"\n            />\n          </v-card>\n        </v-col>\n        <v-col class=\"py-0 pl-md-2 my_carousel\" sm=\"4\" cols=\"12\">\n          <v-carousel\n            cycle\n            height=\"294\"\n            hide-delimiter-background\n            show-arrows-on-hover\n          >\n            <v-carousel-item :key=\"1\">\n              <v-card\n                outlined\n                dense\n                class=\"pa-4 mt-4 no_border\"\n                min-height=\"277\"\n                color=\"grayBg\"\n              >\n                <h3 class=\"font_20 mb-3\" style=\"line-height: 30px;\">\n                  {{ $t(\"continuously_reconciling_bank\") }}\n                </h3>\n                <v-row>\n                  <v-col sm=\"5\" md=\"4\" class=\" pr-1 pb-4\">\n                    <v-img\n                      width=\"100%\"\n                      class=\"\"\n                      src=\"@/assets/images/aba1.png\"\n                    />\n                  </v-col>\n                  <v-col sm=\"7\" md=\"8\" class=\"pa-0 pl-0\">\n                    <p\n                      class=\"mb-0 text-left font_16 mx-auto\"\n                      style=\"width: 80%\"\n                    >\n                      {{ $t(\"if_you_have_aba\") }}\n                    </p>\n                  </v-col>\n                </v-row>\n              </v-card>\n            </v-carousel-item>\n            <v-carousel-item :key=\"2\">\n              <v-card\n                outlined\n                dense\n                class=\"pa-4 mt-4 no_border\"\n                min-height=\"277\"\n                color=\"grayBg\"\n              >\n                <h3 class=\"font_20 mb-3\" style=\"line-height: 30px;\">\n                  {{ $t(\"continuously_reconciling_bank\") }}\n                </h3>\n                <v-row>\n                  <v-col sm=\"5\" md=\"4\" class=\" pr-1 pb-4\">\n                    <v-img\n                      width=\"100%\"\n                      class=\"\"\n                      src=\"@/assets/images/amret.png\"\n                    />\n                  </v-col>\n                  <v-col sm=\"7\" md=\"8\" class=\"pa-0 pl-0\">\n                    <p\n                      class=\"mb-0 text-left font_16 mx-auto\"\n                      style=\"width: 80%\"\n                    >\n                      {{ $t(\"if_you_have_amret\") }}\n                    </p>\n                  </v-col>\n                </v-row>\n              </v-card>\n            </v-carousel-item>\n            <v-carousel-item :key=\"3\">\n              <v-card\n                outlined\n                dense\n                class=\"pa-4 mt-4 no_border\"\n                min-height=\"277\"\n                color=\"grayBg\"\n              >\n                <h3 class=\"font_20 mb-3\" style=\"line-height: 30px;\">\n                  {{ $t(\"continuously_reconciling_bank\") }}\n                </h3>\n                <v-row>\n                  <v-col sm=\"5\" md=\"4\" class=\" pr-1 pb-4\">\n                    <v-img\n                      width=\"100%\"\n                      class=\"\"\n                      src=\"@/assets/images/amk.png\"\n                    />\n                  </v-col>\n                  <v-col sm=\"7\" md=\"8\" class=\"pa-0 pl-0\">\n                    <p\n                      class=\"mb-0 text-left font_16 mx-auto\"\n                      style=\"width: 80%\"\n                    >\n                      {{ $t(\"if_you_have_amk\") }}\n                    </p>\n                  </v-col>\n                </v-row>\n              </v-card>\n            </v-carousel-item>\n          </v-carousel>\n        </v-col>\n      </v-row>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport JQuery from \"jquery\";\n\nconst {\n  workingCapitalInsightHandler,\n  accountingInsightHandler,\n} = require(\"@/scripts/AppHandlers\");\nimport { Chart } from \"@progress/kendo-charts-vue-wrapper\";\nimport { i18n } from \"@/i18n\";\nimport bankPaymentHandler from \"@/scripts/bankPaymentHandler\";\nimport dashboardHandler from \"@/scripts/dashboard/customer/handler/dashboardHandler\";\nimport kendo from \"@progress/kendo-ui\";\n\nexport default {\n  components: {\n    chart: Chart,\n    LoadingMe: () => import(`@/components/Loading`),\n    CashPosition: () => import(`@/components/overview/CashPosition`),\n  },\n  data: () => ({\n    insight: null,\n    loadingConnectedAccount: false,\n    bankBalance: 0,\n    balanceInBank: 0,\n    paymentInTransit: 0,\n    cashAndBankBalance: null,\n    slides: [\"First\", \"Second\", \"Third\"],\n    chartAreaChart: {\n      background: \"transparent\",\n      height: 201,\n    },\n    series_chart: [\n      {\n        type: \"pie\",\n        startAngle: 180,\n        data: [\n          {\n            category: i18n.t(\"card_payment\"),\n            value: 22,\n            color: \"#c80000\",\n          },\n          {\n            category: i18n.t(\"bill_payment\"),\n            value: 45,\n            color: \"#f44336\",\n          },\n          {\n            category: i18n.t(\"qr_code_payment\"),\n            value: 11,\n            color: \"#d85604\",\n          },\n          //   {\n          //     category: i18n.t(\"overdraft\"),\n          //     value: 22,\n          //     color: \"#e88d14\",\n          //   },\n        ],\n      },\n    ],\n    showLoadingGraph: false,\n    bills: 0,\n    qr: 0,\n    overCreditLimit: [],\n  }),\n  methods: {\n    loadData() {\n      // Cash And Bank Balance\n      workingCapitalInsightHandler.getCashAndBankBalance().then((res) => {\n        if (!JQuery.isEmptyObject(res.data)) {\n          // Bind data\n          this.cashAndBankBalance = res.data;\n          this.calculateBankBalance();\n        }\n      });\n      // Insight\n      accountingInsightHandler.getInsights().then((res) => {\n        if (!JQuery.isEmptyObject(res.data)) {\n          // Bind data\n          this.insight = res.data;\n        }\n      });\n    },\n    /* Calculate Bank Balance */\n    calculateBankBalance() {\n      this.bankBalance =\n        this.cashAndBankBalance.in_bank + this.cashAndBankBalance.in_trasit;\n\n      if (this.bankBalance > 0) {\n        this.balanceInBank = this.cashAndBankBalance.in_bank / this.bankBalance;\n        this.paymentInTransit =\n          this.cashAndBankBalance.in_trasit / this.bankBalance;\n      }\n    },\n    async loadConnectedBank() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.loadingConnectedAccount = true;\n          bankPaymentHandler.list().then(async (res) => {\n            const response = res.data;\n            this.bills = response.filter(\n              (b) => b.serviceType === \"billpayment\"\n            ).length;\n            this.qr = response.filter(\n              (b) => b.serviceType === \"qrpayment\"\n            ).length;\n            this.loadingConnectedAccount = false;\n          });\n        }, 10);\n      });\n    },\n    async dashboardBankingPaymentOptionGraph() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoadingGraph = true;\n          dashboardHandler.bankingGraphPaymentOption().then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoadingGraph = false;\n              const response = res.data.data;\n              let series = [];\n              const colors = [\n                \"#c80000\",\n                \"#642828\",\n                \"#f44336\",\n                \"#522D2DFF\",\n                \"#d85604\",\n                \"#ED1A3A\",\n                \"#7a4141\",\n                \"#e88d14\",\n                \"#f1aa45\",\n              ];\n              let index = 0;\n              response.forEach((j) => {\n                series.push({\n                  category: i18n.t(j.name),\n                  value: kendo.toString(j.amountPercentage, j.decimalFormat),\n                  color: colors[index],\n                });\n                index += 1;\n                if (index > colors.length) {\n                  index = 0;\n                }\n              });\n              this.series_chart = [\n                {\n                  type: \"pie\",\n                  autoFit: true,\n                  startAngle: 180,\n                  data: series,\n                },\n              ];\n            }\n          });\n        }, 10);\n      });\n    },\n    async loadDataAll() {\n      this.loadData();\n      await this.loadConnectedBank();\n      await this.dashboardBankingPaymentOptionGraph();\n    },\n  },\n  mounted: async function() {\n    this.loadData();\n    await this.loadConnectedBank();\n    await this.dashboardBankingPaymentOptionGraph();\n  },\n};\n</script>\n\n<style scoped>\n.theme--light.v-data-table {\n  background-color: transparent !important;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n  height: 32px !important;\n  border-bottom: thin solid rgba(0, 0, 0, 0.12);\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: transparent !important;\n}\n\n.borderRadius20 {\n  border-radius: 20% !important;\n}\n\n@media (max-width: 576px) {\n}\n.theme--dark.v-btn.v-btn--icon {\n  color: #ed1a3a !important;\n  height: 17px !important;\n}\n</style>\n"]}]}
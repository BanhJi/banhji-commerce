{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/customers/insightnpo/FundReceiptTypePieChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/customers/insightnpo/FundReceiptTypePieChart.vue","mtime":1639364469139},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBrZW5kbyBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdWknOwppbXBvcnQgeyBpMThuIH0gZnJvbSAiQC9pMThuIjsKaW1wb3J0IHsgQ2hhcnQgfSBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tY2hhcnRzLXZ1ZS13cmFwcGVyIjsKCmNvbnN0IEpvdXJuYWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2pvdXJuYWxIYW5kbGVyIik7CmNvbnN0IEVudGl0eVR5cGUgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9FbnRpdHlUeXBlIik7CmNvbnN0IEFjY291bnRUeXBlQ29kZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0FjY291bnRUeXBlQ29kZSIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGdW5kUmVjZWlwdEdyYXBoIiwKICBjb21wb25lbnRzOiB7CiAgICBjaGFydDogQ2hhcnQsCiAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKSwKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRyYW5zYWN0aW9uczogW10sCiAgICAgIHBpZURhdGE6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgc2VyaWVzOiBbCiAgICAgICAgewogICAgICAgICAgZmllbGQ6ICJ2YWx1ZSIsCiAgICAgICAgICBhdXRvRml0OiB0cnVlLAogICAgICAgICAgY2F0ZWdvcnlGaWVsZDogImNhdGVnb3J5IiwKICAgICAgICB9LAogICAgICBdLAogICAgICBsYWJlbFRlbXBsYXRlOiAiICM9IGtlbmRvLmZvcm1hdCgnezA6UH0nLCBwZXJjZW50YWdlKSMiLAogICAgICB0b29sdGlwVGVtcGxhdGU6CiAgICAgICAgIiM9IGNhdGVnb3J5ICMgOiAjPSBrZW5kby50b1N0cmluZyh2YWx1ZSwgJ24nKSAjICgjPSBrZW5kby5mb3JtYXQoJ3swOlB9JywgcGVyY2VudGFnZSkgIykiLAogICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgIGNoYXJ0QXJlYTogewogICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgbWFyZ2luOiAxMCwKICAgICAgICBoZWlnaHQ6IDIwMCwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0aWFsaXplKCkgewogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgSm91cm5hbEhhbmRsZXIuZ2V0Sm91cm5hbEJ5VHJhbnNhY3Rpb25UeXBlKEVudGl0eVR5cGUuRlVORF9SRUNFSVBULCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBhc19vZl9kYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSArICJUMjM6NTk6NTkuOTk5WiIsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zID0gcmVzLmRhdGE7CiAgICAgICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoaTE4bi50KCJlcnJvcl9zb21ldGhpbmdfd3JvbmciKSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgYmluZERhdGEoKSB7CiAgICAgIGxldCBnID0ge307CiAgICAgIGxldCB0b3RhbF8gPSAwOwogICAgICBjb25zdCBjb2xvcnMgPSBbCiAgICAgICAgIiNjODAwMDAiLAogICAgICAgICIjNjQyODI4IiwKICAgICAgICAiI2Y0NDMzNiIsCiAgICAgICAgIiM1MjJEMkRGRiIsCiAgICAgICAgIiNkODU2MDQiLAogICAgICAgICIjRUQxQTNBIiwKICAgICAgICAiIzdhNDE0MSIsCiAgICAgICAgIiNlODhkMTQiLAogICAgICAgICIjZjFhYTQ1IiwKICAgICAgXTsKICAgICAgbGV0IGluZGV4ID0gMDsKICAgICAgdGhpcy50cmFuc2FjdGlvbnMuZm9yRWFjaCgodmFsdWUpID0+IHsKICAgICAgICAvKiBGaWx0ZXIgUmV2ZW51ZSBBY2NvdW50cyAqLwogICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LnR5cGVfY29kZSA9PT0gQWNjb3VudFR5cGVDb2RlLlJFVkVOVUUpIHsKICAgICAgICAgIGlmIChnW3ZhbHVlLmpvdXJuYWwuam91cm5hbF90eXBlXSkgewogICAgICAgICAgICBnW3ZhbHVlLmpvdXJuYWwuam91cm5hbF90eXBlXS52YWx1ZSArPSB2YWx1ZS5hbW91bnQgKiAtMTsKICAgICAgICAgICAgdG90YWxfICs9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZ1t2YWx1ZS5qb3VybmFsLmpvdXJuYWxfdHlwZV0gPSB7CiAgICAgICAgICAgICAgY2F0ZWdvcnk6IHZhbHVlLmpvdXJuYWwuam91cm5hbF90eXBlLAogICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS5hbW91bnQgKiAtMSwKICAgICAgICAgICAgICBjb2xvcjogY29sb3JzW2luZGV4XSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdG90YWxfICs9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgICAgfQogICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICAgIGlmIChpbmRleCA+IGNvbG9ycy5sZW5ndGgpIHsKICAgICAgICAgICAgaW5kZXggPSAwOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMudG90YWwgPSB0b3RhbF87CgogICAgICB3aW5kb3cuY29uc29sZS5sb2coZyk7CiAgICAgIC8qIEJpbmQgZGF0YSAqLwogICAgICB0aGlzLnBpZURhdGEgPSBPYmplY3QudmFsdWVzKGcpOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRpYWxpemUoKTsKICB9LAp9Owo="},{"version":3,"sources":["FundReceiptTypePieChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FundReceiptTypePieChart.vue","sourceRoot":"src/views/customers/insightnpo","sourcesContent":["<template>\n  <div>\n    <LoadingMe\n      :isLoading=\"showLoading\"\n      :fullPage=\"false\"\n      :myLoading=\"true\"\n      :type=\"'loading'\"\n    />\n\n    <h2\n      style=\"line-height: 22px\"\n      class=\"primary--text niradei_black mb-1 pa-0 text-right col-sm-12\"\n    >\n      {{ Number(total).toLocaleString() }}\n    </h2>\n\n    <chart\n      ref=\"chart\"\n      :data-source=\"pieData\"\n      :chart-area-background=\"''\"\n      :legend-visible=\"false\"\n      :series-defaults-type=\"'pie'\"\n      :series=\"series\"\n      :series-defaults-labels-visible=\"true\"\n      :series-defaults-labels-position=\"'outsideEnd'\"\n      :series-defaults-labels-background=\"'transparent'\"\n      :series-defaults-labels-template=\"labelTemplate\"\n      :tooltip-visible=\"true\"\n      :tooltip-template=\"tooltipTemplate\"\n      :chartArea=\"chartArea\"\n      fit\n      :theme=\"'sass'\"\n    />\n  </div>\n</template>\n\n<script>\n// import kendo from '@progress/kendo-ui';\nimport { i18n } from \"@/i18n\";\nimport { Chart } from \"@progress/kendo-charts-vue-wrapper\";\n\nconst JournalHandler = require(\"@/scripts/journalHandler\");\nconst EntityType = require(\"@/scripts/default_setup/EntityType\");\nconst AccountTypeCode = require(\"@/scripts/default_setup/AccountTypeCode\");\n\nexport default {\n  name: \"FundReceiptGraph\",\n  components: {\n    chart: Chart,\n    LoadingMe: () => import(`@/components/Loading`),\n  },\n  data: function () {\n    return {\n      transactions: [],\n      pieData: [],\n      total: 0,\n      series: [\n        {\n          field: \"value\",\n          autoFit: true,\n          categoryField: \"category\",\n        },\n      ],\n      labelTemplate: \" #= kendo.format('{0:P}', percentage)#\",\n      tooltipTemplate:\n        \"#= category # : #= kendo.toString(value, 'n') # (#= kendo.format('{0:P}', percentage) #)\",\n      showLoading: false,\n      chartArea: {\n        background: \"transparent\",\n        margin: 10,\n        height: 200,\n      },\n    };\n  },\n  methods: {\n    initialize() {\n      this.showLoading = true;\n      JournalHandler.getJournalByTransactionType(EntityType.FUND_RECEIPT, {\n        params: {\n          as_of_date: new Date().toISOString().substr(0, 10) + \"T23:59:59.999Z\",\n        },\n      })\n        .then((res) => {\n          if (res) {\n            this.transactions = res.data;\n            this.bindData();\n          } else {\n            this.$snotify.error(i18n.t(\"error_something_wrong\"));\n          }\n        })\n        .finally(() => {\n          this.showLoading = false;\n        });\n    },\n    bindData() {\n      let g = {};\n      let total_ = 0;\n      const colors = [\n        \"#c80000\",\n        \"#642828\",\n        \"#f44336\",\n        \"#522D2DFF\",\n        \"#d85604\",\n        \"#ED1A3A\",\n        \"#7a4141\",\n        \"#e88d14\",\n        \"#f1aa45\",\n      ];\n      let index = 0;\n      this.transactions.forEach((value) => {\n        /* Filter Revenue Accounts */\n        if (value.account.type_code === AccountTypeCode.REVENUE) {\n          if (g[value.journal.journal_type]) {\n            g[value.journal.journal_type].value += value.amount * -1;\n            total_ += value.amount * -1;\n          } else {\n            g[value.journal.journal_type] = {\n              category: value.journal.journal_type,\n              value: value.amount * -1,\n              color: colors[index],\n            };\n            total_ += value.amount * -1;\n          }\n          index += 1;\n          if (index > colors.length) {\n            index = 0;\n          }\n        }\n      });\n      this.total = total_;\n\n      window.console.log(g);\n      /* Bind data */\n      this.pieData = Object.values(g);\n    },\n  },\n  mounted() {\n    this.initialize();\n  },\n};\n</script>"]}]}
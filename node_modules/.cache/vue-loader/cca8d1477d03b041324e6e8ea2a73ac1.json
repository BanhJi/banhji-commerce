{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/closing/VarianceRule.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/closing/VarianceRule.vue","mtime":1641438291843},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGkxOG4gfSBmcm9tICJAL2kxOG4iOwovLyBpbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7CmltcG9ydCB7IFZhcmlhbmNlUnVsZU1vZGVsIH0gZnJvbSAiQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyI7Cgpjb25zdCB7IHZhcmlhbmNlUnVsZUhhbmRsZXIgfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9BcHBIYW5kbGVycyIpOwpjb25zdCB7IFZhcmlhbmNlUnVsZSB9ID0gcmVxdWlyZSgiQC9zY3JpcHRzL2RlZmF1bHRfc2V0dXAvQ29sbGVjdGlvbnMiKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnRzL0xvYWRpbmciKSwKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICAvLyBPYmoKICAgIHZhcmlhbmNlUnVsZTogbmV3IFZhcmlhbmNlUnVsZU1vZGVsKCksCiAgICBzaG93RGlhbG9nOiBmYWxzZSwKICAgIHJ1bGVzOiBWYXJpYW5jZVJ1bGUsCiAgICBoZWFkZXJzOiBbCiAgICAgIHsgdGV4dDogaTE4bi50KCJuYW1lIiksIHZhbHVlOiAibmFtZSIgfSwKICAgICAgeyB0ZXh0OiBpMThuLnQoInZhbHVlIiksIHZhbHVlOiAidmFsdWUiIH0sCiAgICAgIHsgdGV4dDogaTE4bi50KCJydWxlIiksIHZhbHVlOiAicnVsZSIgfSwKICAgICAgeyB0ZXh0OiBpMThuLnQoImFjdGlvbiIpLCB2YWx1ZTogImFjdGlvbnMiLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgIF0sCiAgICB2YXJpYW5jZVJ1bGVzOiBbXSwKICAgIC8vIEZvcm0gdmFsaWRhdGlvbgogICAgdmFsaWQ6IHRydWUsCiAgICBlZGl0ZWRJbmRleDogLTEsCiAgICAvLyBMb2FkaW5nTWUKICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgIGxvYWRpbmdBbGVydDogZmFsc2UsCiAgICBsb2FkaW5nQ29sb3JBbGVydDogIiIsCiAgICBsb2FkaW5nVGV4dEFsZXJ0OiAiIiwKICB9KSwKICBtZXRob2RzOiB7CiAgICBlZGl0SXRlbShpdGVtKSB7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLnZhcmlhbmNlUnVsZXMuaW5kZXhPZihpdGVtKTsKICAgICAgdGhpcy52YXJpYW5jZVJ1bGUgPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKTsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBkZWxldGVJdGVtKGl0ZW0pIHsKICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMudmFyaWFuY2VSdWxlcy5pbmRleE9mKGl0ZW0pOwogICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKTsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSB0cnVlOwogICAgfSwKICAgIGRlbGV0ZUl0ZW1Db25maXJtKCkgewogICAgICB0aGlzLnZhcmlhbmNlUnVsZXMuc3BsaWNlKHRoaXMuZWRpdGVkSW5kZXgsIDEpOwogICAgICB0aGlzLmNsb3NlRGVsZXRlKCk7CiAgICB9LAogICAgY2xvc2VEZWxldGUoKSB7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBuZXcgVmFyaWFuY2VSdWxlTW9kZWwoKSk7CiAgICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBBbGwgU2F2ZXMKICAgIG9uU2F2ZUNsaWNrKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiWW91IHdvbid0IGJlIGFibGUgdG8gcmV2ZXJ0IHRoaXMhIiwKICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNFRDFBM0EiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkaXNjYXJkIGl0ISIsCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNsZWFyKCkgewogICAgICAvLyBSZXNldCBGb3JtCiAgICAgIC8vIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgIHRoaXMudmFyaWFuY2VSdWxlID0gbmV3IFZhcmlhbmNlUnVsZU1vZGVsKCk7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlKCl7CiAgICAgIHRoaXMuY2xlYXIoKQogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpczsKCiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAvLyBTeW5jIERhdGEKICAgICAgdmFyaWFuY2VSdWxlSGFuZGxlcgogICAgICAgIC5zYXZlKHRoaXMudmFyaWFuY2VSdWxlKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRlZEluZGV4ID4gLTEpIHsKICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKAogICAgICAgICAgICAgICAgdGhpcy52YXJpYW5jZVJ1bGVzW3RoaXMuZWRpdGVkSW5kZXhdLAogICAgICAgICAgICAgICAgdGhpcy52YXJpYW5jZVJ1bGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMudmFyaWFuY2VSdWxlcy5wdXNoKG5ldyBWYXJpYW5jZVJ1bGVNb2RlbChyZXNwb25zZS5kYXRhKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi5yZXNwb25zZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgSGVscGVyLmFsZXJ0RXJyb3JNc2coZXJyb3IpOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIFJlc3BvbnNlIFN0YXR1cwogICAgcmVzcG9uc2VTdGF0dXMoc3RhdHVzKSB7CiAgICAgIHN3aXRjaCAoc3RhdHVzKSB7CiAgICAgICAgY2FzZSAyMDA6IC8vIE9rCiAgICAgICAgICB0aGlzLnNob3dBbGVydCgpOwoKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjAxOiAvLyBEdXBsaWNhdGUKICAgICAgICAgIEhlbHBlci5hbGVydEVycm9yTXNnKCJEdXBsaWNhdGUgZW50cnkhIik7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICAvLyBTd2VldGFsZXJ0MgogICAgY2hhbmdlQWxlcnRTdGF0dXMoKSB7CiAgICAgIHRoaXMubG9hZGluZ0FsZXJ0ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nQWxlcnQgPSBmYWxzZTsKICAgICAgfSwgNjIwMCk7CiAgICB9LAogICAgc2hvd0FsZXJ0KCkgewogICAgICB0aGlzLmNoYW5nZUFsZXJ0U3RhdHVzKCk7CiAgICAgIHRoaXMubG9hZGluZ1RleHRBbGVydCA9ICJBZGRlZCBTdWNjZXNzZnVsIjsKICAgICAgdGhpcy5sb2FkaW5nQ29sb3JBbGVydCA9ICIjM0RBNzJFIjsKCiAgICAgIHRoaXMuY2xlYXIoKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gQ2FsbCBWYXJpYW5jZSBSdWxlCiAgICB2YXJpYW5jZVJ1bGVIYW5kbGVyLmdldEFsbCgpLnRoZW4oKHJlcykgPT4gewogICAgICB0aGlzLnZhcmlhbmNlUnVsZXMgPSByZXMuZGF0YTsKICAgIH0pOwogIH0sCn07Cg=="},{"version":3,"sources":["VarianceRule.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VarianceRule.vue","sourceRoot":"src/views/accounting/closing","sourcesContent":["<template>\n  <v-row>\n    <v-col cols=\"12\" sm=\"12\" class=\"pt-3\">\n      <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n        <v-row>\n          <v-col sm=\"6\" class=\"py-0\">\n            <h2 class=\"mb-3 font_20 float-left\">\n              {{ $t(\"variance_rule\") }}\n            </h2>\n            <!-- <p class=\"mb-0 float-left\">\n                            {{ $t(\"variance_report_desc\") }}\n                        </p> -->\n          </v-col>\n          <v-col sm=\"6\" class=\"py-0\">\n            <v-btn\n              @click=\"showDialog = true\"\n              color=\"primary\"\n              class=\"white--text float-right text-capitalize\"\n            >\n              {{ $t(\"new_variance_rule\") }}\n            </v-btn>\n          </v-col>\n          <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n            <template>\n              <v-data-table\n                :headers=\"headers\"\n                :items=\"varianceRules\"\n                :items-per-page=\"50\"\n                sort-by=\"name\"\n                class=\"attachment_table elevation-1\"\n              >\n                <template v-slot:[`item.value`]=\"{ item }\">\n                  {{ Number(item.value).toLocaleString() }}\n                </template>\n\n                <template v-slot:[`item.actions`]=\"{ item }\">\n                  <v-icon small class=\"mr-2\" @click=\"editItem(item)\">\n                    mdi-pencil\n                  </v-icon>\n                  <v-icon small @click=\"deleteItem(item)\">\n                    mdi-delete\n                  </v-icon>\n                </template>\n              </v-data-table>\n            </template>\n          </v-col>\n        </v-row>\n        <v-dialog v-model=\"showDialog\" max-width=\"550px\">\n          <v-card>\n            <div class=\"modal_header\">\n              <v-card-title>{{ $t(\"variance_rule\") }}</v-card-title>\n              <v-icon @click=\"close()\">close</v-icon>\n            </div>\n            <v-card-text class=\"modal_text_content\">\n              <v-row>\n                <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                  <label class=\"label\">{{ $t(\"name\") }}*</label>\n                  <v-text-field\n                    class=\"\"\n                    outlined\n                    placeholder=\"Name\"\n                    v-model=\"varianceRule.name\"\n                    :rules=\"[(v) => !!v || $t('name_is_required')]\"\n                  />\n                </v-col>\n                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                  <label class=\"label\">{{ $t(\"rule\") }}*</label>\n                  <v-select\n                    class=\"\"\n                    :items=\"rules\"\n                    item-value=\"value\"\n                    item-text=\"text\"\n                    v-model=\"varianceRule.rule\"\n                    :rules=\"[(v) => !!v || $t('is_required')]\"\n                    outlined\n                  />\n                </v-col>\n                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                  <label class=\"label\">{{ $t(\"rule_value\") }}*</label>\n                  <v-text-field\n                    class=\"\"\n                    outlined\n                    type=\"number\"\n                    placeholder=\"Value\"\n                    v-model=\"varianceRule.value\"\n                    :rules=\"[(v) => !!v || $t('is_required')]\"\n                  />\n                </v-col>\n              </v-row>\n            </v-card-text>\n            <v-card-actions class=\"modal_footer d-flex justify-space-between\">\n              <v-btn outlined color=\"primary\" class=\"black--text capitalize\" @click=\"cancel\">\n                {{ $t(\"cancel\") }}\n              </v-btn>\n              <v-btn class=\"btn_save_new\" @click=\"onSaveClick\">\n                {{ $t(\"save\") }}\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n\n        <LoadingMe\n          :isLoading=\"showLoading\"\n          :fullPage=\"true\"\n          :myLoading=\"true\"\n          :alertMessage=\"loadingAlert\"\n          :color=\"loadingColorAlert\"\n          :alertText=\"loadingTextAlert\"\n        />\n      </v-form>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport { i18n } from \"@/i18n\";\n// import kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\nimport { VarianceRuleModel } from \"@/scripts/model/AppModels\";\n\nconst { varianceRuleHandler } = require(\"@/scripts/AppHandlers\");\nconst { VarianceRule } = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n  components: {\n    LoadingMe: () => import(\"@/components/Loading\"),\n  },\n  data: () => ({\n    // Obj\n    varianceRule: new VarianceRuleModel(),\n    showDialog: false,\n    rules: VarianceRule,\n    headers: [\n      { text: i18n.t(\"name\"), value: \"name\" },\n      { text: i18n.t(\"value\"), value: \"value\" },\n      { text: i18n.t(\"rule\"), value: \"rule\" },\n      { text: i18n.t(\"action\"), value: \"actions\", sortable: false },\n    ],\n    varianceRules: [],\n    // Form validation\n    valid: true,\n    editedIndex: -1,\n    // LoadingMe\n    showLoading: false,\n    loadingAlert: false,\n    loadingColorAlert: \"\",\n    loadingTextAlert: \"\",\n  }),\n  methods: {\n    editItem(item) {\n      this.editedIndex = this.varianceRules.indexOf(item);\n      this.varianceRule = Object.assign({}, item);\n      this.showDialog = true;\n    },\n    deleteItem(item) {\n      this.editedIndex = this.varianceRules.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n    deleteItemConfirm() {\n      this.varianceRules.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, new VarianceRuleModel());\n        this.editedIndex = -1;\n      });\n    },\n    // All Saves\n    onSaveClick() {\n      if (this.$refs.form.validate()) {\n        this.save();\n      }\n    },\n    cancel() {\n      this.$swal({\n        title: \"Are you sure?\",\n        text: \"You won't be able to revert this!\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#4d4848\",\n        cancelButtonColor: \"#ED1A3A\",\n        confirmButtonText: \"Yes, discard it!\",\n      }).then((result) => {\n        if (result.value) {\n          this.clear();\n        }\n      });\n    },\n    clear() {\n      // Reset Form\n      // this.$refs.form.reset();\n      this.editedIndex = -1;\n      this.varianceRule = new VarianceRuleModel();\n      this.showDialog = false;\n    },\n    close(){\n      this.clear()\n    },\n    save() {\n      let self = this;\n\n      this.showLoading = true;\n      // Sync Data\n      varianceRuleHandler\n        .save(this.varianceRule)\n        .then((response) => {\n          if (response) {\n            if (this.editedIndex > -1) {\n              Object.assign(\n                this.varianceRules[this.editedIndex],\n                this.varianceRule\n              );\n            } else {\n              this.varianceRules.push(new VarianceRuleModel(response.data));\n            }\n            self.responseStatus(response.status);\n          }\n        })\n        .catch((error) => {\n          Helper.alertErrorMsg(error);\n        })\n        .finally(() => {\n          this.showLoading = false;\n        });\n    },\n    // Response Status\n    responseStatus(status) {\n      switch (status) {\n        case 200: // Ok\n          this.showAlert();\n\n          break;\n        case 201: // Duplicate\n          Helper.alertErrorMsg(\"Duplicate entry!\");\n          break;\n        default:\n          break;\n      }\n    },\n    // Sweetalert2\n    changeAlertStatus() {\n      this.loadingAlert = true;\n      setTimeout(() => {\n        this.loadingAlert = false;\n      }, 6200);\n    },\n    showAlert() {\n      this.changeAlertStatus();\n      this.loadingTextAlert = \"Added Successful\";\n      this.loadingColorAlert = \"#3DA72E\";\n\n      this.clear();\n    },\n  },\n  created() {\n    // Call Variance Rule\n    varianceRuleHandler.getAll().then((res) => {\n      this.varianceRules = res.data;\n    });\n  },\n};\n</script>\n\n<style scoped>\n.attachment_table.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > thead\n  > tr\n  > th,\n.attachment_table.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr\n  > td {\n  border-right: none !important;\n}\n</style>\n"]}]}
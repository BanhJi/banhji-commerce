{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/order_sale/reports/order_reports_analysis/ByCustomer.vue?vue&type=style&index=0&id=123da2aa&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/order_sale/reports/order_reports_analysis/ByCustomer.vue","mtime":1643702774582},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5rLXBkZi1leHBvcnQgLmstZ3JpZCB7CiAgZm9udC1mYW1pbHk6ICJEZWphVnUgU2FucyIsICJBcmlhbCIsIHNhbnMtc2VyaWY7Cn0KCi8qIEhpZGUgdGhlIEdyaWQgaGVhZGVyIGFuZCBwYWdlciBkdXJpbmcgZXhwb3J0ICovCi5rLXBkZi1leHBvcnQgLmstZ3JpZC10b29sYmFyLAouay1wZGYtZXhwb3J0IC5rLXBhZ2VyLXdyYXAgewogIGRpc3BsYXk6IG5vbmU7Cn0K"},{"version":3,"sources":["ByCustomer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAs0BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ByCustomer.vue","sourceRoot":"src/views/order_sale/sale_reports_analysis","sourcesContent":["<template>\n  <v-row>\n    <v-col sm=\"12\" cols=\"12\" class=\"grayBg px-6\">\n      <v-card color=\"white\" class=\"pa-3 no_border\" elevation=\"0\">\n        <h2 class=\"mb-0 font_20\">{{ $t(\"sale_by_customers\") }}</h2>\n        <p class=\"mb-2\">{{ $t(\"sale_by_customers_desc\") }}</p>\n        <LoadingMe\n          :isLoading=\"showLoading\"\n          :fullPage=\"false\"\n          type=\"loading\"\n          :myLoading=\"true\"\n        >\n        </LoadingMe>\n        <v-row>\n          <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n            <v-select\n              class=\"mt-1\"\n              :items=\"dateSorters\"\n              v-model=\"mDateSorter\"\n              @change=\"onSorterChanges\"\n              clearable\n              outlined\n              placeholder=\"ALL\"\n            />\n          </v-col>\n\n          <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n            <app-datepicker\n              :initialDate=\"startDate\"\n              @emitDate=\"startDate = $event\"\n            />\n          </v-col>\n\n          <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n            <app-datepicker\n              :initialDate=\"endDate\"\n              @emitDate=\"endDate = $event\"\n            />\n          </v-col>\n\n          <v-col sm=\"1\" cols=\"1\" class=\"pt-1\">\n            <v-btn\n              color=\"primary white--text\"\n              :loading=\"loadingSearch\"\n              @click=\"onSearch('')\"\n            >\n              <i\n                class=\"b-search\"\n                style=\"font-size: 18px; color: #fff !important\"\n              />\n            </v-btn>\n          </v-col>\n        </v-row>\n        <v-row class=\"mt-0\">\n          <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n            <v-card\n              outlined\n              dense\n              class=\"pa-3 no_border rounded-4 white--text\"\n              color=\"third\"\n              height=\"60px\"\n              @click=\"onSearch('Invoice')\"\n            >\n              <h3 class=\"text-left flex-1 font_12 text-uppercase\">\n                {{ $t(\"total_revenue\") }}\n              </h3>\n              <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">\n                {{ numberFormat(totalRevenue) }}\n              </h3>\n            </v-card>\n          </v-col>\n          <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n            <v-card\n              outlined\n              dense\n              color=\"third\"\n              class=\"pa-3 rounded-4 no_border white--text\"\n              height=\"60px\"\n              @click=\"onSearch('Sale Lead')\"\n            >\n              <h3 class=\"text-left flex-1 font_12 text-uppercase\">\n                {{ $t(\"open_lead\") }}\n              </h3>\n              <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">\n                {{ numberFormat(totalSaleLead) }}\n              </h3>\n            </v-card>\n          </v-col>\n          <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n            <v-card\n              outlined\n              dense\n              color=\"third\"\n              class=\"pa-3 rounded-4 no_border white--text\"\n              height=\"60px\"\n              @click=\"onSearch('Sale Quote')\"\n            >\n              <h3 class=\"text-left flex-1 font_12 text-uppercase\">\n                {{ $t(\"open_sale_quote\") }}\n              </h3>\n              <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">\n                {{ numberFormat(totalSaleQuote) }}\n              </h3>\n            </v-card>\n          </v-col>\n          <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n            <v-card\n              outlined\n              dense\n              class=\"pa-3 rounded-4 no_border white--text\"\n              color=\"third\"\n              height=\"60px\"\n              @click=\"onSearch('Sale Order')\"\n            >\n              <h3 class=\"text-left flex-1 font_12 text-uppercase\">\n                {{ $t(\"open_sale_order\") }}\n              </h3>\n              <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">\n                {{ numberFormat(totalSaleOrder) }}\n              </h3>\n            </v-card>\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col sm=\"12\" cols=\"12\" class=\"py-0 custom_pagination bycus-pager\">\n            <template>\n              <kendo-datasource\n                ref=\"gridTransactionDS\"\n                :type=\"'JSON'\"\n                :data=\"transactions\"\n                :group=\"group\"\n                :server-paging=\"false\"\n              />\n              <kendo-grid\n                id=\"gridTransaction\"\n                class=\"grid-function\"\n                :data-source-ref=\"'gridTransactionDS'\"\n                :editable=\"false\"\n                :groupable=\"true\"\n                :sortable=\"true\"\n                :column-menu=\"true\"\n                :filterable=\"true\"\n                :resizable=\"true\"\n                :pageable=\"true\"\n                @pagechange=\"pageChangeHandler\"\n                :toolbar=\"['excel']\"\n                :excel-file-name=\"'SaleAnalysisByCustomer.xlsx'\"\n                :excel-filterable=\"true\"\n                :excel-all-pages=\"true\"\n                :scrollable-virtual=\"true\"\n              >\n                <!--                <kendo-grid-column-->\n                <!--                    :field=\"'no'\"-->\n                <!--                    :title=\"$t('no')\"-->\n                <!--                    :template=\"rowNumberTmpl\"-->\n                <!--                    :width=\"90\"-->\n                <!--                    :column-menu=\"false\"-->\n                <!--                    :headerAttributes=\"{ style: 'background-color: #EDF1F5;', class: 'text-center'\t}\"-->\n                <!--                    :attributes=\"{style: 'text-align: center'}\"/>-->\n                <kendo-grid-column\n                  :field=\"'transactionDate'\"\n                  :title=\"$t('date')\"\n                  :width=\"120\"\n                  :sortable=\"false\"\n                  :group-footer-template=\"$t('total')\"\n                  :template=\"dateFormat\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                  :field=\"'name'\"\n                  :attributes=\"{ class: 'tb_name_td' }\"\n                  :title=\"$t('name')\"\n                  :width=\"200\"\n                  :sortable=\"false\"\n                  :filterable-multi=\"true\"\n                  :filterable-search=\"true\"\n                  :template=\"'<span>#=name#</span>'\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                  :field=\"'transactionType'\"\n                  :title=\"$t('type')\"\n                  :width=\"120\"\n                  :sortable=\"false\"\n                  :template=\"'<span>#=transactionType#</span>'\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                  :field=\"'referenceNo'\"\n                  :title=\"$t('num')\"\n                  :width=\"150\"\n                  :sortable=\"true\"\n                  :template=\"referenceTemplate\"\n                  :headerAttributes=\"{\n                    style: 'background-color: #EDF1F5, color: green !important',\n                  }\"\n                />\n                <!--                                <kendo-grid-column-->\n                <!--                                    :field=\"'referenceNo'\"-->\n                <!--                                    :title=\"$t('ref_from')\"-->\n                <!--                                    :width=\"180\"-->\n                <!--                                    :template=\"referenceTemplate\"-->\n                <!--                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>-->\n                <!--                                <kendo-grid-column-->\n                <!--                                    :field=\"'referenceNo'\"-->\n                <!--                                    :title=\"$t('ref_to')\"-->\n                <!--                                    :width=\"180\"-->\n                <!--                                    :template=\"referenceTemplate\"-->\n                <!--                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>-->\n                <kendo-grid-column\n                  :field=\"'exchangeSubTotal'\"\n                  :title=\"$t('sub_total')\"\n                  :width=\"200\"\n                  :group-footer-template=\"'#= kendo.toString(sum, `n2`)#'\"\n                  :aggregates=\"['sum']\"\n                  :footerAttributes=\"{ style: 'text-align: right;' }\"\n                  :attributes=\"{ style: 'text-align: right; ' }\"\n                  :template=\"'<span>#=kendo.toString(exchangeSubTotal, decimalFormat)#</span>'\"\n                  :headerAttributes=\"{\n                    style: 'text-align: right;background-color: #EDF1F5',\n                  }\"\n                />\n                <kendo-grid-column\n                  :field=\"'exchangeDiscountTotal'\"\n                  :title=\"$t('discount')\"\n                  :width=\"150\"\n                  :group-footer-template=\"'#= kendo.toString(sum, `n2`)#'\"\n                  :aggregates=\"['sum']\"\n                  :footerAttributes=\"{ style: 'text-align: right;' }\"\n                  :attributes=\"{ style: 'text-align: right; ' }\"\n                  :template=\"'<span>#=kendo.toString(exchangeDiscountTotal, decimalFormat)#</span>'\"\n                  :headerAttributes=\"{\n                    style: 'text-align: right;background-color: #EDF1F5',\n                  }\"\n                />\n                <kendo-grid-column\n                  :field=\"'exchangeAmount'\"\n                  :title=\"$t('amount')\"\n                  :width=\"200\"\n                  :group-footer-template=\"'#= kendo.toString(sum, `n2`)#'\"\n                  :aggregates=\"['sum']\"\n                  :footerAttributes=\"{ style: 'text-align: right;' }\"\n                  :attributes=\"{ style: 'text-align: right; ' }\"\n                  :template=\"'<span>#=kendo.toString(exchangeAmount, decimalFormat)#</span>'\"\n                  :headerAttributes=\"{\n                    style: 'text-align: right;background-color: #EDF1F5',\n                  }\"\n                />\n                <kendo-grid-column\n                  :field=\"'segment.name'\"\n                  :title=\"$t('segment')\"\n                  :width=\"200\"\n                  :sortable=\"false\"\n                  :filterable-multi=\"true\"\n                  :filterable-search=\"true\"\n                  :attributes=\"{ style: 'text-align: left; ' }\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                  :field=\"'location.name'\"\n                  :title=\"$t('location')\"\n                  :width=\"200\"\n                  :sortable=\"false\"\n                  :filterable-multi=\"true\"\n                  :filterable-search=\"true\"\n                  :attributes=\"{ style: 'text-align: left; ' }\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                  :field=\"'project.name'\"\n                  :title=\"$t('project')\"\n                  :width=\"200\"\n                  :sortable=\"false\"\n                  :filterable-multi=\"true\"\n                  :filterable-search=\"true\"\n                  :attributes=\"{ style: 'text-align: left; ' }\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n\n                <!--                <kendo-grid-column-->\n                <!--                    :field=\"'status'\"-->\n                <!--                    :title=\"$t('progressing_status')\"-->\n                <!--                    :width=\"180\"-->\n                <!--                    :template=\"status\"-->\n                <!--                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>-->\n                <kendo-grid-column\n                  :field=\"'status'\"\n                  :title=\"$t('status')\"\n                  :width=\"180\"\n                  :sortable=\"false\"\n                  :filterable=\"{ multi: true }\"\n                  :template=\"status\"\n                  :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <!--                <kendo-grid-column-->\n                <!--                    :field=\"''\"-->\n                <!--                    :title=\"$t('action')\"-->\n                <!--                    :width=\"100\"-->\n                <!--                    :command=\"[{  text: 'Convert', click: goToConvert }]\"-->\n                <!--                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>-->\n              </kendo-grid>\n            </template>\n          </v-col>\n        </v-row>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport InvoiceModel from \"@/scripts/invoice/model/Invoice\";\nimport kendo from \"@progress/kendo-ui\";\nimport LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\n\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nconst invoiceModel = new InvoiceModel({});\n\nimport JSZip from \"jszip\";\nconst $ = kendo.jQuery; //require(\"jquery\")\n\nwindow.JSZip = JSZip;\nexport default {\n  name: \"SaleTransaction\",\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    \"app-datepicker\": () =>\n      import(`@/components/custom_templates/DatePickerComponent`),\n  },\n  data: () => ({\n    loadingSearch: false,\n    startDate: new Date().toISOString().substr(0, 10),\n    endDate: new Date().toISOString().substr(0, 10),\n    dateSorters: [\n      \"Today\",\n      \"This Week\",\n      \"This Month\",\n      \"This Year\",\n      \"Last Month\",\n      \"Last Year\",\n    ],\n    mDateSorter: \"Today\",\n    showLoading: false,\n    transactions: [],\n    tranDS: [],\n    saleFormContent: {},\n    isLoaded: false,\n    invoice: invoiceModel,\n    totalRevenue: 0,\n    totalSaleLead: 0,\n    totalSaleQuote: 0,\n    totalSaleOrder: 0,\n    group: { field: \"name\" },\n    sort: { field: \"referenceNo\", dir: \"ASC\" },\n    aggregateDefinition: [\n      { field: \"exchangeAmount\", aggregate: \"sum\" },\n      { field: \"exchangeSubTotal\", aggregate: \"sum\" },\n      { field: \"exchangeDiscountTotal\", aggregate: \"sum\" },\n    ],\n    pageable: {\n      buttonCount: 5,\n      info: false,\n      type: \"numeric\",\n      pageSizes: false,\n      previousNext: true,\n    },\n    params: {\n      isDonor: false,\n      search: \"\",\n      type: \"cus\",\n      key: {},\n    },\n    paging: {},\n    txnByCustomers: [],\n    disabledMe: true,\n    action: \"\",\n  }),\n  methods: {\n    pdfExport: function (e) {\n      // const pivot = this.$refs.gridTransactionDS.kendoWidget()\n      // pivot.saveAsPDF()\n      window.console.log(\"pdfExport\");\n      window.console.log(e.data);\n    },\n    pageChangeHandler: function (event) {\n      alert(\"change\", event);\n    },\n    onSorterChanges(val) {\n      let today = new Date();\n      switch (val) {\n        case \"Today\":\n          this.startDate = kendo.toString(today, \"yyyy-MM-dd\");\n          this.endDate = kendo.toString(today, \"yyyy-MM-dd\");\n\n          break;\n        case \"This Week\":\n          var first = today.getDate() - today.getDay(),\n            last = first + 6;\n\n          this.startDate = kendo.toString(\n            new Date(today.setDate(first)),\n            \"yyyy-MM-dd\"\n          );\n          today = new Date();\n          this.endDate = kendo.toString(\n            new Date(today.setDate(last)),\n            \"yyyy-MM-dd\"\n          );\n\n          break;\n        case \"This Month\":\n          this.startDate = kendo.toString(\n            new Date(today.getFullYear(), today.getMonth(), 1),\n            \"yyyy-MM-dd\"\n          );\n          this.endDate = kendo.toString(\n            new Date(today.getFullYear(), today.getMonth(), 31),\n            \"yyyy-MM-dd\"\n          );\n\n          break;\n        case \"This Year\":\n          this.startDate = kendo.toString(\n            new Date(today.getFullYear(), 0, 1),\n            \"yyyy-MM-dd\"\n          );\n          this.endDate = kendo.toString(\n            new Date(today.getFullYear(), 11, 31),\n            \"yyyy-MM-dd\"\n          );\n          break;\n        case \"Last Month\":\n          this.startDate = kendo.toString(\n            new Date(today.getFullYear(), today.getMonth(), -30),\n            \"yyyy-MM-dd\"\n          );\n          this.endDate = kendo.toString(\n            new Date(today.getFullYear(), today.getMonth() - 1, +31),\n            \"yyyy-MM-dd\"\n          );\n\n          break;\n        case \"Last Year\":\n          this.startDate = kendo.toString(\n            new Date(today.getFullYear(), -11, -30),\n            \"yyyy-MM-dd\"\n          );\n          this.endDate = kendo.toString(\n            new Date(today.getFullYear(), -1, +31),\n            \"yyyy-MM-dd\"\n          );\n\n          break;\n        default:\n          this.startDate = \"\";\n          this.endDate = \"\";\n      }\n    },\n    numberFormat(value) {\n      return kendo.toString(value, `n${this.saleFormContent.decimal}`);\n    },\n    referenceTemplate(data) {\n      let url = \"\";\n      if (data.type === \"Invoice\") {\n        url = `invoice_view/${data.id}`;\n      } else if (data.type === \"Sale Deposit\") {\n        url = `sale_deposit_view/${data.id}`;\n      } else if (data.type === \"Purchase\") {\n        url = `credit_purchase_view/${data.id}`;\n      } else if (data.type === \"Sale Quote\") {\n        url = `sale_quote_view/${data.id}`;\n      } else if (data.type === \"Cash Receipt\") {\n        url = `cash_receipt_view/${data.id}`;\n      } else if (data.type === \"Sale Order\") {\n        url = `sale_order_view/${data.id}`;\n      } else if (data.type === \"Purchase Deposit\") {\n        url = `purchase_deposit_view/${data.id}`;\n      } else if (data.type === \"Credit Memo\") {\n        url = `sale_return_view/${data.id}`;\n      } else if (data.type === \"Debit Memo\") {\n        url = `purchase_return_view/${data.id}`;\n      } else if (data.type === \"Cash Payment\") {\n        url = `cash_payment_view/${data.id}`;\n      } else if (data.type === \"Sale Lead\") {\n        url = `lead/${data.id}`;\n      }\n      const refFrom = data.refFrom || [];\n      const refTo = data.refTo || [];\n      let args = {\n        text: data.referenceNo,\n        related: !!refFrom.length > 0 || !!refTo.length > 0,\n        url: url,\n        data: data,\n      };\n      window.console.log(\"related\", refFrom, !!refFrom.length > 0);\n      return {\n        template: LinkTemplate,\n        templateArgs: args,\n      };\n    },\n    goToConvert(e) {\n      this.newClick = false;\n      e.preventDefault();\n      // let grid = kendo.jQuery(\"#gridAddress\").data(\"kendoGrid\")\n      // let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"))\n      // this.address = dataItem\n      // this.mCountry = dataItem.country\n      // this.dialogM2 = true\n    },\n    rowNumberTmpl(dataItem) {\n      let ds = this.$refs.gridTransactionDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    async loadTransactions() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          billingHandler.list().then((res) => {\n            if (res.data.statusCode === 200) {\n              window.console.log(res);\n              this.transactions = res.data.data;\n              const result = res.data.result;\n              this.totalRevenue = kendo.toString(\n                result.Revenue,\n                result.decimalFormat\n              );\n              this.totalSaleLead = kendo.toString(\n                result.SaleLead,\n                result.decimalFormat\n              );\n              this.totalSaleOrder = kendo.toString(\n                result.SaleOrder,\n                result.decimalFormat\n              );\n              this.totalSaleQuote = kendo.toString(\n                result.SaleQuote,\n                result.decimalFormat\n              );\n            }\n            this.showLoading = false;\n          });\n        }, 10);\n      });\n    },\n\n    async searchTransaction(type) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          this.loadingSearch = true;\n          const startDate = this.startDate;\n          const endDate = this.endDate;\n          this.params = {\n            search: \"\",\n            type: type,\n            start: startDate,\n            end: endDate,\n            key: this.paging,\n            isSummarize: 0,\n          };\n          this.disabledNextPage(true);\n          billingHandler.list(this.params).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.loadingSearch = false;\n              this.showLoading = false;\n              window.console.log(\"im search\", res);\n              const responseData = res.data.data || [];\n              this.transactions = responseData;\n              this.paging = res.data.key;\n              window.console.log(\"key\", res.data.key);\n              this.txnByCustomers.push(responseData);\n              //   const result = res.data.result;\n              //   this.totalRevenue = kendo.toString(\n              //     result.Revenue,\n              //     result.decimalFormat\n              //   );\n              //   this.totalSaleLead = kendo.toString(\n              //     result.SaleLead,\n              //     result.decimalFormat\n              //   );\n              //   this.totalSaleOrder = kendo.toString(\n              //     result.SaleOrder,\n              //     result.decimalFormat\n              //   );\n              //   this.totalSaleQuote = kendo.toString(\n              //     result.SaleQuote,\n              //     result.decimalFormat\n              //   );\n\n              if (Object.keys(this.paging).length > 0) {\n                this.disabledNextPage(false);\n              } else {\n                this.disabledNextPage(true);\n              }\n              this.itemRetuned(this);\n              window.console.log(\n                \"txnByCustomers\",\n                this.txnByCustomers,\n                res.data.key\n              );\n            } else {\n              this.loadingSearch = false;\n              this.showLoading = false;\n            }\n          });\n        }, 10);\n      });\n    },\n    async transactionSummarize(type) {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          this.loadingSearch = true;\n          const startDate = this.startDate;\n          const endDate = this.endDate;\n          this.params = {\n            search: \"\",\n            type: type,\n            start: startDate,\n            end: endDate,\n            isSummarize: 1,\n            key: {},\n          };\n          billingHandler.list(this.params).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.loadingSearch = false;\n              this.showLoading = false;\n              const result = res.data.data[0] || {};\n              this.totalRevenue = kendo.toString(\n                result.Revenue,\n                result.decimalFormat\n              );\n              this.totalSaleLead = kendo.toString(\n                result.SaleLead,\n                result.decimalFormat\n              );\n              this.totalSaleOrder = kendo.toString(\n                result.SaleOrder,\n                result.decimalFormat\n              );\n              this.totalSaleQuote = kendo.toString(\n                result.SaleQuote,\n                result.decimalFormat\n              );\n            } else {\n              this.loadingSearch = false;\n              this.showLoading = false;\n            }\n          });\n        }, 10);\n      });\n    },\n    onSearch(type) {\n      this.action = type;\n      this.txnByCustomers = [];\n      //   $(\".k-pager-wrap\").empty();\n      //   $(\".bycus-page-number\").empty();\n      this.loadPage(this);\n      this.paging = {};\n      //   this.params = {\n      //     search: \"\",\n      //     type: type,\n      //     start: this.startDate,\n      //     end: this.endDate,\n      //     key: {},\n      //   };\n      this.searchTransaction(type);\n      this.transactionSummarize(type);\n    },\n    dateFormat(dataItem) {\n      return kendo.toString(\n        new Date(dataItem.transactionDate),\n        `${this.invoice.dateFormat}`\n      );\n    },\n    // linkTo(dataItem) {\n    //     window.console.log(dataItem)\n    //     this.$router.push({\n    //         path: 'invoice' + `/${dataItem.id}`,\n    //         params: {id: dataItem.id},\n    //         query: {type: 'edit'}\n    //     })\n    // },\n    status(dataItem) {\n      let status = \"\",\n        type = dataItem.type || \"\";\n      switch (dataItem.status) {\n        case 1:\n          status = \"Open\";\n          break;\n        case 2:\n          if (\n            type === \"Sale Lead\" ||\n            type === \"Sale Quote\" ||\n            type === \"Sale Order\"\n          ) {\n            status = \"Applied\";\n          } else {\n            status = \"Partially Paid\";\n          }\n          break;\n        case 3:\n          status = \"Paid\";\n          break;\n        case 4:\n          status = \"Void\";\n          break;\n      }\n      return status;\n    },\n    callback() {\n      if (\n        this.$route.params !== null &&\n        this.$route.params.hasOwnProperty(\"data\")\n      ) {\n        const data = this.$route.params.data;\n        if (data.transactionType === \"delete\") {\n          this.loadTransactions();\n        }\n      }\n      window.console.log(\"im changed\", this.$route.params);\n    },\n    async loadPage(that) {\n      $(\".bycus-pager .k-pager-wrap\").html(`\n                <label class=\"label bycus-item-returned\">0</label>\n                <div style=\"display: flex; flex-direction: 'row'\">\n                    <button class=\"bycus-next-page\" title=\"previous\" style=\"width: 24px; font-size: 19px;\"> < </button>\n                    <ul class=\"bycus-page-number\" style=\"display: flex;list-style: none; padding-left: 0px;\">\n                        <li style=\"padding: 6px;\"  data-page=\"1\" class=\"bycus-page-link text-bold-link\" >1</li>\n                    </ul>\n                    <button class=\"bycus-next-page\" title=\"next\" style=\"width: 24px; font-size: 19px;\"> > </button>\n                </div>\n            `);\n      $(document).on(\"click\", \".bycus-page-link\", function () {\n        const page = $(this).data(\"page\");\n        $(\".bycus-page-link\").removeClass(\"text-bold-link\");\n        $(this).addClass(\"text-bold-link\");\n        that.backToPage(that, page - 1);\n        window.console.log(page - 1);\n      });\n      // $(document).on('click', '.bycus-next-page', function () {\n      $(\".bycus-next-page\").click(function () {\n        const page_number = $(this)\n          .parent()\n          .children(\".bycus-page-number\")\n          .find(\"li\")\n          .last()\n          .data(\"page\");\n        window.console.log(\"bycus-page_number\", page_number);\n        const isPrevious = $(this).attr(\"title\");\n        if (isPrevious == \"previous\") {\n          const currectpage = $(\".text-bold-link\").data(\"page\");\n\n          if (currectpage == 1) {\n            return;\n          }\n          $(\".bycus-page-link\").removeClass(\"text-bold-link\");\n          $(`.bycus-page-link:eq(${currectpage - 1})`).addClass(\n            \"text-bold-link\"\n          );\n          that.backToPage(that, currectpage - 2);\n          window.console.log(\"this currectpage back\", currectpage - 2);\n        } else {\n          $(\".bycus-page-link\").removeClass(\"text-bold-link\");\n          that.params = {\n            search: that.search || \"\",\n            type: that.action,\n            start: that.startDate,\n            end: that.endDate,\n            key: that.paging,\n          };\n          window.console.log(\"params\", that.params);\n          that.searchTransaction(that.action);\n          $(this)\n            .parent()\n            .children(\".bycus-page-number\")\n            .append(\n              `<li class=\"bycus-page-link text-bold-link\" style=\"padding: 6px;\" data-page=\"${\n                page_number + 1\n              }\">${page_number + 1}</li>`\n            );\n        }\n        window.console.log(\"this\", page_number + 1);\n      });\n    },\n    itemRetuned(that) {\n      let totalRow = 0;\n      that.txnByCustomers.forEach((k) => {\n        totalRow += k.length;\n      });\n      $(\".bycus-item-returned\").text(\"Items returned (\" + totalRow + \")\");\n    },\n    disabledNextPage(value) {\n      $(\".bycus-next-page\").prop(\"disabled\", value);\n    },\n    backToPage(that, index) {\n      try {\n        window.console.log(\n          \"Length of txnByCustomers\",\n          that.txnByCustomers.length\n        );\n        const byCustomer = that.txnByCustomers.at(index);\n        that.transactions = byCustomer;\n        // that.refreshGridData(customer)\n        window.console.log(\"that.txnByCustomers[index]\", byCustomer);\n      } catch (e) {\n        window.console.log(\"ERROR on backToPage\", index);\n      }\n    },\n    refreshGridData(data) {\n      $(\"#gridTransaction\").data(\"kendoGrid\").dataSource.data([]);\n      $(\"#gridTransaction\").data(\"kendoGrid\").dataSource.data(data);\n    },\n  },\n  async mounted() {\n    this.group = [\n      {\n        field: \"name\",\n        aggregates: this.aggregateDefinition,\n      },\n    ];\n    // await this.searchTransaction(\"\");\n    $(document).on(\"click\", \".k-pager-nav\", function () {\n      window.console.log(\"this\", $(this).data(\"page\"));\n    });\n  },\n  computed: {\n  },\n  watch: {\n    // $route: \"callback\",\n  },\n};\n</script>\n<style scoped>\n.k-pdf-export .k-grid {\n  font-family: \"DejaVu Sans\", \"Arial\", sans-serif;\n}\n\n/* Hide the Grid header and pager during export */\n.k-pdf-export .k-grid-toolbar,\n.k-pdf-export .k-pager-wrap {\n  display: none;\n}\n</style>"]}]}
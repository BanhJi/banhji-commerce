{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products_services/product/product_variants/products/Products.vue?vue&type=style&index=0&id=59b251e4&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products_services/product/product_variants/products/Products.vue","mtime":1643182494445},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmF0dGFjaG1lbnRfdGFibGUudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHsKICAgIGJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["Products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkTA;AACA;AACA","file":"Products.vue","sourceRoot":"src/views/products_services/product/product_variants/products","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"grayBg px-6\">\n            <v-card outlined dense class=\"pa-3 no_border\">\n                <v-row>\n                    <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                        <v-text-field outlined\n                                      :placeholder=\"$t('name')\"\n                                      append-icon=\"search\"\n                                      v-model=\"search\"\n                                      @change=\"onCategoryChanged\"\n                                      clearable/>\n                    </v-col>\n\n                    <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                        <v-select class=\"\"\n                                  tage=\"Product Category\"\n                                  v-model=\"mCategory\"\n                                  :items=\"categories\"\n                                  item-value=\"id\"\n                                  :item-text=\"item =>`${item.abbr} - ${item.name}`\"\n                                  @change=\"onCategoryChanged\"\n                                  return-object\n                                  :placeholder=\"$t('category')\"\n                                  clearable\n                                  outlined/>\n                    </v-col>\n                </v-row>\n                <!-- loading -->\n                <div v-if=\"isLoaded\">\n                    <LoadingMe\n                        :isLoading=\"showLoading\"\n                        type=\"loading\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"/>\n                </div>\n                <v-card outlined dense class=\"no_border\">\n                    <!-- loading -->\n                    <div v-if=\"!isLoaded\">\n                        <LoadingMe\n                            :isLoading=\"showLoading\"\n                            :fullPage=\"false\"\n                            type=\"loading\"\n                            :myLoading=\"true\"/>\n                    </div>\n\n                    <kendo-datasource ref=\"dataSource\"\n                                      :data=\"products\"\n                                      :schema=\"gridSchema\"\n                                      :group=\"groupDefinition\"/>\n                    <kendo-grid id=\"gridProducts\"\n                                class=\"grid-function\"\n                                :data-source-ref=\"'dataSource'\"\n                                :style=\"{width: '100%'}\"\n                                :noRecords=\"true\"\n                                :scrollable-virtual=\"true\">\n\n                        <kendo-grid-column\n                            :field=\"'name'\"\n                            :attributes=\"{class:'tb_name_td'}\"\n                            :title=\"$t('name')\"\n                            :width=\"200\"\n                            :template=\"'<span>#=name#</span>'\"\n                            :groupHeaderColumnTemplate=\"'#=value#'\"\n                            :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                        <kendo-grid-column\n                            :field=\"'images'\"\n                            :title=\"$t('image')\"\n                            :width=\"70\"\n                            :template=\"loadImage\"\n                            :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                        <kendo-grid-column\n                            :field=\"'product'\"\n                            :title=\"$t('category')\"\n                            :template=\"category\"\n                            :width=\"100\"\n                            :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                        <kendo-grid-column\n                            :field=\"'sku'\"\n                            :title=\"$t('sku')\"\n                            :width=\"100\"\n                            :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                        <kendo-grid-column\n                            :field=\"'uom'\"\n                            :title=\"$t('uom')\"\n                            :width=\"100\"\n                            :template=\"uomTmp\"\n                            :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                        <kendo-grid-column\n                            :field=\"'reOrderQty'\"\n                            :title=\"$t('recorder')\"\n                            :width=\"100\"\n                            :template=\"'<span>#=reOrderQty#</span>'\"\n                            :attributes=\"{ style: 'text-align: right'}\"\n                            :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                        <kendo-grid-column\n                            :field=\"''\"\n                            :title=\"$t('action')\"\n                            :width=\"100\"\n                            :command=\"[{ text: $t('edit_product'), click: goEditProduct }, { text: $t('new_variant'), click: goNewVariant }]\"\n                            :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                    </kendo-grid>\n                </v-card>\n            </v-card>\n        </v-col>\n\n\n    </v-row>\n</template>\n<script>\nconst $ = require(\"jquery\")\nconst productHandler = require(\"@/scripts/productHandler\")\nconst categoryHandler = require(\"@/scripts/categoryHandler\")\nimport kendo from '@progress/kendo-ui'\n\nexport default {\n    name: \"ProductList\",\n    inheritAttrs: false,\n    components: {\n        LoadingMe: () => import(`@/components/Loading`)\n    },\n    props: {\n        productId: {}\n    },\n    data() {\n        return {\n            pic: \"amret.png\",\n            search: '',\n            value: 'input me',\n            list_product: {\n                header: [\n                    'product_name', 'name', 'sku', 'stock', 'commited_stock', 'incoming_stock'\n                ],\n                data: [\n                    {\n                        \"date\": \"My Oum\",\n                        \"type\": \"89%\",\n                        \"num\": \"USA\",\n                        \"qty\": \"89%\",\n                        \"amount\": \"USA\"\n                    },\n                    {\n                        \"date\": \"My Oum\",\n                        \"type\": \"89%\",\n                        \"num\": \"USA\",\n                        \"qty\": \"89%\",\n                        \"amount\": \"USA\"\n                    }\n                ]\n            },\n            items: ['Edit Product', 'New Variant'],\n            gridSchema: {\n                model: {\n                    id: \"id\"\n                }\n            },\n            isLoaded: true,\n            showLoading: false,\n            products: [],\n            categories: [],\n            mCategory: {},\n            groupDefinition: {\n                field: \"product.name\",\n            },\n            imgURL: 'https://s3-ap-southeast-1.amazonaws.com/images.banhji/'\n        }\n    },\n    methods: {\n        loadImage(dataItem) {\n            if (dataItem.hasOwnProperty('images')) {\n                if (dataItem.images.hasOwnProperty('default')) {\n                    if (dataItem.images.default.hasOwnProperty('thumb')) {\n                        const url = this.imgURL + dataItem.images.default.thumb\n                        return \"<img width='50' height='50' style= 'margin: auto;display: block;' src='\" + url + \"' />\"\n                    }\n                }\n            } else {\n                return ''\n            }\n            return ''\n        },\n        category(dataItem) {\n            if (dataItem.hasOwnProperty('product')) {\n                if (dataItem.product.hasOwnProperty('category')) {\n                    if (dataItem.product.category.hasOwnProperty('id')) {\n                        return dataItem.product.category.name\n                    }\n                }\n            } else {\n                return ''\n            }\n        },\n        uomTmp(dataItem) {\n            if (dataItem.hasOwnProperty('uom')) {\n                if (dataItem.uom.hasOwnProperty('id')) {\n                    if (dataItem.uom.hasOwnProperty('toUOM')) {\n                        return dataItem.uom.toUOM.name || ''\n                    } else {\n                        return dataItem.uom.name || ''\n                    }\n                }\n            } else {\n                return ''\n            }\n        },\n\n        callback_() {\n            try {\n                if (this.$route.params !== null && this.$route.params.hasOwnProperty('data')) {\n                    // window.console.log('Products watch')\n                    const product = this.$route.params.data\n                    this.products.forEach(function (part, index, item) {\n                        if ((item[index].productId === product.productId)) {\n                            item[index].product = product.product\n                        }\n                    });\n                    let dataSource = new kendo.data.DataSource({\n                        data: this.products, group: {field: \"product.name\"}\n                    });\n                    let grid = $('#gridProducts').data(\"kendoGrid\");\n                    dataSource.read();\n                    grid.setDataSource(dataSource);\n\n                }\n            } catch (e) {\n                window.console.log(e)\n            }\n\n        },\n        goEditProduct(e) {\n            e.preventDefault();\n            let grid = kendo.jQuery(\"#gridProducts\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            this.$router.push({\n                path: 'product' + `/${dataItem.productId}`,\n                params: {id: dataItem.productId},\n                query: {type: 'edit'}\n            })\n            // window.console.log(dataItem)\n        },\n        goNewVariant(e) {\n            e.preventDefault();\n            let grid = kendo.jQuery(\"#gridProducts\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            this.$router.push({\n                path: 'product_variant' + `/${dataItem.id}`,\n                query: {p: `${dataItem.productId}`, type: 'new'}\n            })\n            // window.console.log(dataItem)\n        },\n        /*showDetails: function (e) {\n            e.preventDefault();\n\n            let grid = kendo.jQuery(\"#gridProduct\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n            alert('\"' + dataItem.name + '\" details are about to be logged on the console.');\n            window.console.log(dataItem);\n        },*/\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.dataSource.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        async onCategoryChanged() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    if (this.mCategory) {\n                        this.isLoaded = true\n                        this.showLoading = true\n                        productHandler.filter(this.mCategory.id, this.search).then(res => {\n                            this.showLoading = false\n                            this.products = res\n                        })\n                    }\n                }, 10);\n            })\n        },\n        async loadCategory() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    categoryHandler.get().then(res => {\n                        this.showLoading = false\n                        this.categories = res\n                        this.categories = this.categories.filter(m => m.type.name === 'Product')\n                        if (this.categories.length > 0) {\n                            this.mCategory = this.categories[0]\n                            this.onCategoryChanged()\n                        }\n                    })\n                }, 10);\n            })\n        }\n    },\n    mounted: async function () {\n        await this.loadCategory()\n    },\n    watch: {\n        '$route': 'callback_'\n    },\n    computed: {}\n}\n</script>\n<style scoped>\n.attachment_table.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n    border-right: none !important;\n}\n</style>\n"]}]}
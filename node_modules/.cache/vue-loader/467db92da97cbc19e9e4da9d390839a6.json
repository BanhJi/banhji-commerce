{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/budgets/ConsolidatedBudgetPerformance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/budgets/ConsolidatedBudgetPerformance.vue","mtime":1642390528849},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQga2VuZG8gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXVpJzsKICAgIGltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJzsKICAgIGltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiOwogICAgLyogTW9kZWxzICovCiAgICBpbXBvcnQgQWNjb3VudE1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BY2NvdW50LmpzIjsKICAgIGltcG9ydCBGaXNjYWxEYXRlTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0Zpc2NhbERhdGUiOwogICAgaW1wb3J0IFN0YXRlbWVudE9mUHJvZml0T3JMb3NzTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1N0YXRlbWVudE9mUHJvZml0T3JMb3NzIjsKCiAgICAvKiBUcmVlTGlzdCAqLwogICAgaW1wb3J0IHsgVHJlZUxpc3QgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdHJlZWxpc3QtdnVlLXdyYXBwZXInOwogICAgaW1wb3J0IHsgVHJlZUxpc3REYXRhU291cmNlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWRhdGFzb3VyY2UtdnVlLXdyYXBwZXInOwogICAgCiAgICAvKiBWdWV4ICovCiAgICBpbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwoKICAgIGNvbnN0IGluY29tZVN0YXRlbWVudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaGFuZGxlci9hY2NvdW50aW5nL2luY29tZVN0YXRlbWVudEhhbmRsZXIiKTsKICAgIGNvbnN0IE9yZGVyTnVtYmVyUEwgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9PcmRlck51bWJlclBMLmpzIik7CiAgICBjb25zdCBBY2NvdW50VHlwZUNvZGUgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9BY2NvdW50VHlwZUNvZGUuanMiKTsKCiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgY29tcG9uZW50czp7CiAgICAgICAgICAgICJMb2FkaW5nTWUiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9Mb2FkaW5nJyksCiAgICAgICAgICAgICJhcHAtZmlzY2FsLWRhdGUtZHJvcGRvd25saXN0IjogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMva2VuZG9fdGVtcGxhdGVzL0Zpc2NhbERhdGVEcm9wRG93bkxpc3QnKSwKICAgICAgICAgICAgImFwcC1tb250aC1vZi1waWNrZXIiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9rZW5kb190ZW1wbGF0ZXMvTW9udGhPZlBpY2tlcicpLAogICAgICAgICAgICAnYXBwLXJlcG9ydGluZy1sYW5ndWFnZSc6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9SZXBvcnRpbmdMYW5ndWFnZURyb3BEb3duTGlzdCcpLAogICAgICAgICAgICAnYnVkZ2V0LWxpc3QtaXRlbS1ncm91cCc6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL2Ryb3Bkb3dubGlzdC9CdWRnZXRMaXN0SXRlbUdyb3VwJyksCiAgICAgICAgICAgICd0cmVlbGlzdCc6IFRyZWVMaXN0LAogICAgICAgICAgICAndHJlZWxpc3RkYXRhc291cmNlJzogVHJlZUxpc3REYXRhU291cmNlLAogICAgICAgIH0sCiAgICAgICAgZGF0YTogKCkgPT4gKHsKICAgICAgICAgICAgc2VsZWN0ZWRCdWRnZXRzOiBbXSwKICAgICAgICAgICAgc2VnbWVudElkczogW10sCiAgICAgICAgICAgIHN0YXRlbWVudHMgOiBbXSwKICAgICAgICAgICAgc3RhdGVtZW50TGlzdCA6IFtdLAogICAgICAgICAgICBzdGFydE1vbnRoOiAnJywKICAgICAgICAgICAgZW5kTW9udGg6ICcnLAogICAgICAgICAgICBtaW5Nb250aCA6ICcnLAogICAgICAgICAgICBtYXhNb250aCA6ICcnLAogICAgICAgICAgICAvKiBGaXNjYWwgRGF0ZSAqLwogICAgICAgICAgICBmaXNjYWxEYXRlOiBuZXcgRmlzY2FsRGF0ZU1vZGVsKCksCiAgICAgICAgICAgIC8qIEtlbmRvICovCiAgICAgICAgICAgIGNvbHVtbnMgOiBbXSwKICAgICAgICAgICAgc29ydERlZmluaXRpb24gOiBbCiAgICAgICAgICAgICAgICB7IGZpZWxkOiAib3JkZXIiLCBkaXI6ICJhc2MiIH0sCiAgICAgICAgICAgICAgICB7IGZpZWxkOiAibnVtYmVyIiwgZGlyOiAiYXNjIiB9LAogICAgICAgICAgICBdLAoJCQltb2RlbDogewogICAgICAgICAgICAgICAgaWQ6ICJ1dWlkIiwKICAgICAgICAgICAgICAgIGV4cGFuZGVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFJlcG9ydGluZyBMYW5ndWFnZQoJCQlyZXBvcnRpbmdMYW5ndWFnZTogJ2VuZ2xpc2gnLAoJCQlmaWVsZE5hbWUgOiAnbmFtZScsCiAgICAgICAgICAgIC8vIExvYWRpbmdNZQogICAgICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgICAgfSksCiAgICAgICAgbWV0aG9kczp7CiAgICAgICAgICAgIHZhbGlkYXRpbmcoKXsKICAgICAgICAgICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBpZih0aGlzLmZpc2NhbERhdGUudXVpZCA9PT0gJycpewogICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5Lndhcm5pbmcoaTE4bi50KCJwbGVhc2Vfc2VsZWN0X2Zpc2NhbF95ZWFyIikpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhcnRNb250aCA9PT0gJycgfHwgdGhpcy5lbmRNb250aCA9PT0gJycpewogICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5Lndhcm5pbmcoaTE4bi50KCJwbGVhc2VfZnJvbV90b19tb250aCIpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZih0aGlzLnNlbGVjdGVkQnVkZ2V0cy5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5Lndhcm5pbmcoaTE4bi50KCJwbGVhc2Vfc2VsZWN0X2J1ZGdldHMiKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qIFNlYXJjaCAqLwogICAgICAgICAgICBzZWFyY2ggKCkgewogICAgICAgICAgICAgICAgaWYodGhpcy52YWxpZGF0aW5nKCkpewogICAgICAgICAgICAgICAgICAgIGxldCBlbmRNb250aCA9IG5ldyBEYXRlKHRoaXMuZW5kTW9udGgpLAogICAgICAgICAgICAgICAgICAgICAgICBsYXN0RGF5ID0gbmV3IERhdGUoZW5kTW9udGguZ2V0RnVsbFllYXIoKSwgZW5kTW9udGguZ2V0TW9udGgoKSsxLCAwKTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IHNkYXRlID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodGhpcy5zdGFydE1vbnRoKSwgJ3l5eXktTU0tZGQnKSArICdUMDA6MDA6MDAuMDAwWicsCiAgICAgICAgICAgICAgICAgICAgICAgIGVkYXRlID0ga2VuZG8udG9TdHJpbmcobGFzdERheSwgJ3l5eXktTU0tZGQnKSArICdUMjM6NTk6NTkuOTk5Wic7CgogICAgICAgICAgICAgICAgICAgIC8qIFNlZ21lbnQgSWRzICovCiAgICAgICAgICAgICAgICAgICAgbGV0IHNlZ21lbnRJZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5idWRnZXRzLmxpc3QuZm9yRWFjaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKH50aGlzLnNlbGVjdGVkQnVkZ2V0cy5pbmRleE9mKHZhbHVlLnV1aWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50SWRzLnB1c2godmFsdWUuc2VnbWVudF91dWlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSBEdXBsaWNhdGUgKi8KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRJZHMgPSBbLi4ubmV3IFNldChzZWdtZW50SWRzKV07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRW1wdHkgZGF0YXNvdXJjZQogICAgICAgICAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuc3RhdGVtZW50RFMua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgICAgICAgICBkcy5kYXRhKFtdKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBRdWVyeSBJbmNvbWUgU3RhdGVtZW50CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgaW5jb21lU3RhdGVtZW50SGFuZGxlci5nZXRCeVNlZ21lbnRzKHNkYXRlLCBlZGF0ZSwgdGhpcy5zZWdtZW50SWRzKQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlbWVudHMgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5lcnJvcihpMThuLnQoImVycm9yX3NvbWV0aGluZ193cm9uZyIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoJCQl9LAogICAgICAgICAgICBhc3luYyBiaW5kRGF0YSAoKSB7CiAgICAgICAgICAgICAgICBsZXQgZyA9IHt9LCBjaGlsZElkcyA9IFtdOwoKICAgICAgICAgICAgICAgIC8qIEdlbmVyYXRlIE1vbnRocyAqLwogICAgICAgICAgICAgICAgbGV0IGZpc2NhbE1vbnRocyA9IEhlbHBlci5nZW5lcmF0ZUZpc2NhbE1vbnRocyh0aGlzLmZpc2NhbERhdGUuc3RhcnRfZGF0ZSwgdGhpcy5maXNjYWxEYXRlLmVuZF9kYXRlLCAiMTIiLCAieXl5eS1NTSIpOwoKICAgICAgICAgICAgICAgIC8qIE1vbnRoIEluZGV4ICovCiAgICAgICAgICAgICAgICBsZXQgc3RhcnRNb250aEluZGV4ID0gZmlzY2FsTW9udGhzLmluZGV4T2YodGhpcy5zdGFydE1vbnRoKSwKICAgICAgICAgICAgICAgICAgICBlbmRNb250aEluZGV4ID0gZmlzY2FsTW9udGhzLmluZGV4T2YodGhpcy5lbmRNb250aCk7CgogICAgICAgICAgICAgICAgbGV0IG1pbk1vbnRoSW5kZXggPSBzdGFydE1vbnRoSW5kZXgsIG1heE1vbnRoSW5kZXggPSBlbmRNb250aEluZGV4OwogICAgICAgICAgICAgICAgaWYoc3RhcnRNb250aEluZGV4ID4gZW5kTW9udGhJbmRleCl7CiAgICAgICAgICAgICAgICAgICAgbWluTW9udGhJbmRleCA9IGVuZE1vbnRoSW5kZXgsIG1heE1vbnRoSW5kZXggPSBzdGFydE1vbnRoSW5kZXg7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gTG9hZCBBY2NvdW50IExpc3QKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhY2NvdW50aW5nL2dldEFjY291bnRzJyk7IAoKICAgICAgICAgICAgICAgIC8qIExvb3AgYWxsIGJ1ZGdldHMgKi8KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZEJ1ZGdldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidWRnZXQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5idWRnZXRzLmxpc3QuZmluZCgoaXRlbSkgPT4gaXRlbS51dWlkID09PSB0aGlzLnNlbGVjdGVkQnVkZ2V0c1tpXSk7CgogICAgICAgICAgICAgICAgICAgIC8qIEJ1ZGdldCBsaW5lcyAqLwogICAgICAgICAgICAgICAgICAgIGJ1ZGdldC5saW5lcy5mb3JFYWNoKHZhbHVlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgLyogR2V0IEFjY291bnQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLmFjY291bnRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udXVpZCA9PT0gdmFsdWUuYWNjb3VudF91dWlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE9yZGVyICovCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmRlciA9IGFjY291bnQudHlwZV9jb2RlOwogICAgICAgICAgICAgICAgICAgICAgICBpZihhY2NvdW50LnR5cGVfY29kZSA9PT0gQWNjb3VudFR5cGVDb2RlLk9USEVSX1JFVkVOVUUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgPSBPcmRlck51bWJlclBMW2FjY291bnQudHlwZV9jb2RlXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogR1JPVVBJTkcgKi8KICAgICAgICAgICAgICAgICAgICAgICAgLyogVG9wIExldmVsIEFjY291bnQgVHlwZSAqLwogICAgICAgICAgICAgICAgICAgICAgICBpZighZ1thY2NvdW50LnR5cGVfY29kZV0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnR5cGVfY29kZV0gPSBuZXcgU3RhdGVtZW50T2ZQcm9maXRPckxvc3NNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA6IGFjY291bnQudHlwZV9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlciA6IGFjY291bnQudHlwZV9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBhY2NvdW50LmFjY291bnRfdHlwZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX25hbWUgOiBhY2NvdW50LmFjY291bnRfdHlwZS5sb2NhbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyIDogb3JkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLyogUGFyZW50IExldmVsICovCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aGlzQWNjb3VudFBhcmVudElkID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFjY291bnQuaGFzT3duUHJvcGVydHkoInBhcmVudF9hY2NvdW50IikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQYXJlbnRBY2NvdW50ID0gbmV3IEFjY291bnRNb2RlbChhY2NvdW50LnBhcmVudF9hY2NvdW50KSwgY291bnRlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudFBhcmVudEFjY291bnQubnVtYmVyICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEdldCBhY2NvdW50IGJ5IHV1aWQgb3IgYmFuaGppX2FjY291bnRfbnVtYmVyICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjY291bnRQYXJlbnQgPSBuZXcgQWNjb3VudE1vZGVsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudFBhcmVudEFjY291bnQudXVpZCAhPT0gIiIpey8qIEdldCBieSB1dWlkICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRQYXJlbnQgPSBuZXcgQWNjb3VudE1vZGVsKHRoaXMuYWNjb3VudHMuZmluZCgoaXRlbSkgPT4gaXRlbS51dWlkID09PSBjdXJyZW50UGFyZW50QWNjb3VudC51dWlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7LyogR2V0IGJ5IGJhbmhqaV9hY2NvdW50X251bWJlciBiZWNhdXNlIGRlZmF1bHQgZGF0YSBoYXMgbm8gdXVpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50UGFyZW50QWNjb3VudC5iYW5oamlfYWNjb3VudF9udW1iZXIgIT09ICIiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRQYXJlbnQgPSBuZXcgQWNjb3VudE1vZGVsKHRoaXMuYWNjb3VudHMuZmluZCgoaXRlbSkgPT4gaXRlbS5iYW5oamlfYWNjb3VudF9udW1iZXIgPT09IGN1cnJlbnRQYXJlbnRBY2NvdW50LmJhbmhqaV9hY2NvdW50X251bWJlcikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgVGhpcyBBY2NvdW50IFBhcmVudCBJZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvdW50ZXIgPT09IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQWNjb3VudFBhcmVudElkID0gYWNjb3VudFBhcmVudC51dWlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRmluZCBOZXh0IFBhcmVudCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0UGFyZW50ID0gbmV3IEFjY291bnRNb2RlbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFjY291bnRQYXJlbnQuaGFzT3duUHJvcGVydHkoInBhcmVudF9hY2NvdW50IikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50T2ZBY2NvdW50UGFyZW50ID0gbmV3IEFjY291bnRNb2RlbChhY2NvdW50UGFyZW50LnBhcmVudF9hY2NvdW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50T2ZBY2NvdW50UGFyZW50Lm51bWJlciAhPT0gIiIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50T2ZBY2NvdW50UGFyZW50LnV1aWQgIT09ICIiKXsvKiBHZXQgYnkgdXVpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRQYXJlbnQgPSB0aGlzLmFjY291bnRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udXVpZCA9PT0gcGFyZW50T2ZBY2NvdW50UGFyZW50LnV1aWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7LyogR2V0IGJ5IGJhbmhqaV9hY2NvdW50X251bWJlciBiZWNhdXNlIGRlZmF1bHQgZGF0YSBoYXMgbm8gdXVpZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhcmVudE9mQWNjb3VudFBhcmVudC5iYW5oamlfYWNjb3VudF9udW1iZXIgIT09ICIiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFBhcmVudCA9IHRoaXMuYWNjb3VudHMuZmluZCgoaXRlbSkgPT4gaXRlbS5iYW5oamlfYWNjb3VudF9udW1iZXIgPT09IHBhcmVudE9mQWNjb3VudFBhcmVudC5iYW5oamlfYWNjb3VudF9udW1iZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IFBhcmVudCBJZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRJZCA9IGFjY291bnRQYXJlbnQudHlwZV9jb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5leHRQYXJlbnQubnVtYmVyICE9PSAiIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkID0gbmV4dFBhcmVudC51dWlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IG5leHQgcGFyZW50IGFjY291bnQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50UGFyZW50QWNjb3VudCwgbmV4dFBhcmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNldCBsb29wIHRvIGVuZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFyZW50QWNjb3VudC5udW1iZXIgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFkZCBQYXJlbnQgTGV2ZWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2FjY291bnRQYXJlbnQudXVpZF0gPSBuZXcgU3RhdGVtZW50T2ZQcm9maXRPckxvc3NNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQgOiBhY2NvdW50UGFyZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlciA6IGFjY291bnRQYXJlbnQubnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogYWNjb3VudFBhcmVudC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lIDogYWNjb3VudFBhcmVudC5sb2NhbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZCA6IHBhcmVudElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50IDogYWNjb3VudFBhcmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgOiBvcmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSW5jcmVhc2UgQ291bnRlciBCeSAxICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfS8qIEVuZCBXaGlsZSBMb29wICovCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENoaWxkIExldmVsICovCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFnW2FjY291bnQudXVpZF0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1thY2NvdW50LnV1aWRdID0gbmV3IFN0YXRlbWVudE9mUHJvZml0T3JMb3NzTW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQgOiBhY2NvdW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyIDogYWNjb3VudC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IGFjY291bnQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lIDogYWNjb3VudC5sb2NhbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgOiBhY2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyIDogb3JkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogQnVkZ2V0IEFtb3VudCAqLwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYnVkZ2V0QW1vdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMjsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihqID49IG1pbk1vbnRoSW5kZXggJiYgaiA8PSBtYXhNb250aEluZGV4KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmF0dXJlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhY2NvdW50LmFjY291bnRfdHlwZS5uYXR1cmUudG9Mb3dlckNhc2UoKSA9PT0gImNyIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdHVyZSA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWRnZXRBbW91bnQgKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5tb250aGx5X2Ftb3VudFtqXS5hbW91bnQpICogbmF0dXJlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgUGFyZW50IElkIE9yIFNlbGYgUGFyZW50ICovCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGlsZElkID0gYWNjb3VudC51dWlkOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzQWNjb3VudFBhcmVudElkICE9PSAiIil7LyogQ2hpbGQgTGV2ZWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC51dWlkXS5wYXJlbnRJZCA9IHRoaXNBY2NvdW50UGFyZW50SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2FjY291bnQudXVpZF0uYnVkZ2V0QW1vdW50ID0gYnVkZ2V0QW1vdW50OwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvKiBDaGlsZCBBcyBQYXJlbnQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC51dWlkXS5wYXJlbnRJZCA9IGFjY291bnQudHlwZV9jb2RlOyAvKiBTZWxmIEFzIFBhcmVudCAqLwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJ1ZGdldEFtb3VudCAhPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRJZCA9IGFjY291bnQubnVtYmVyOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZWxmIEFzIENoaWxkIFdpdGggQmFsYW5jZSAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFnW2FjY291bnQubnVtYmVyXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbYWNjb3VudC5udW1iZXJdID0gbmV3IFN0YXRlbWVudE9mUHJvZml0T3JMb3NzTW9kZWwoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA6IGFjY291bnQubnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyIDogYWNjb3VudC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogYWNjb3VudC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxfbmFtZSA6IGFjY291bnQubG9jYWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkIDogYWNjb3VudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA6IGFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWRnZXRBbW91bnQgOiBidWRnZXRBbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlciA6IG9yZGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENoaWxkIElkICovCiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkSWRzLnB1c2goY2hpbGRJZCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLyogQUNUVUFMICovCiAgICAgICAgICAgICAgICAvKiBEZWZpbmUgU2VnbWVudHMgKi8KICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBnKXsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VnbWVudElkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBnW2tleV1bInMiK2ldID0gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvKiBTdW0gU2VnbWVudHMgKi8KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWdtZW50SWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZW1lbnRzW2ldLmZvckVhY2godmFsdWUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihnW3ZhbHVlLmFjY291bnRVVUlEXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW3ZhbHVlLmFjY291bnRVVUlEXVsicyIraV0gKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5iYWxhbmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLyogT3RoZXIgR3JvdXBzICovCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXIgPj0gMTAwICYmIHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXIgPD0gMTA1KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbdmFsdWUuYWNjb3VudF90eXBlX251bWJlcl0gPSBuZXcgU3RhdGVtZW50T2ZQcm9maXRPckxvc3NNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogdmFsdWUuYWNjb3VudF90eXBlX251bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX25hbWU6IHZhbHVlLmxvY2FsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IE9yZGVyTnVtYmVyUExbdmFsdWUuYWNjb3VudF90eXBlX251bWJlcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvKiBQYXJzZSBPYmplY3QgQXJyYXkgKi8KICAgICAgICAgICAgICAgIGxldCBlbnRyaWVzID0gT2JqZWN0LnZhbHVlcyhnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLyogUGFyZW50IGFnZ3JlZ2F0ZSBzdW0gKi8KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeSA9IGVudHJpZXNbaV07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYofmNoaWxkSWRzLmluZGV4T2YoZW50cnkudXVpZCkpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50SWQgPSBlbnRyeS5wYXJlbnRJZDsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUocGFyZW50SWQgIT09IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50SWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBlbnRyaWVzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udXVpZCA9PT0gcGFyZW50SWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhcmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5idWRnZXRBbW91bnQgKz0gZW50cnkuYnVkZ2V0QW1vdW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRGVmaW5lIFNlZ21lbnRzICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zZWdtZW50SWRzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRbInMiK2pdICs9IGVudHJ5WyJzIitqXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IG5ldyBwYXJlbnQgaWQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SWQgPSBwYXJlbnQucGFyZW50SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNldCBsb29wIHRvIGVuZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2V0IGxvb3AgdG8gZW5kICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8qIE90aGVyIEdyb3VwcyAqLwogICAgICAgICAgICAgICAgLyogR3Jvc3MgUHJvZml0ICovCiAgICAgICAgICAgICAgICBsZXQgcmV2ZW51ZSA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLlJFVkVOVUUpLAogICAgICAgICAgICAgICAgICAgIGNvc3RPZlNhbGUgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5DT0dTKSwKICAgICAgICAgICAgICAgICAgICBncm9zc1Byb2ZpdCA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLkdST1NTX1BST0ZJVCk7CgogICAgICAgICAgICAgICAgLyogRUJJVERBICovCiAgICAgICAgICAgICAgICBsZXQgc2FsYXJ5QmVuZWZpdCA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLlNBTEFSWV9CRU5FRklUKSwKICAgICAgICAgICAgICAgICAgICBzYWxlTWFya2V0aW5nID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuU0FMRV9NQVJLRVRJTkcpLAogICAgICAgICAgICAgICAgICAgIHJlc2VhcmNoUHJvZHVjdERldmVsb3BtZW50ID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuUkVTRUFSQ0hfUFJPRFVDVF9ERVZFTE9QTUVOVCksCiAgICAgICAgICAgICAgICAgICAgbGVnYWxQcm9mZXNzaW9uYWxGZWUgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5MRUdBTF9QUk9GRVNTSU9OQUxfRkVFKSwKICAgICAgICAgICAgICAgICAgICBnZW5lcmFsQWRtaW5FeHBlbnNlcyA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLkdFTkVSQUxfQURNSU5fRVhQRU5TRSksCiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW5nRXhwZW5zZXMgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5PUEVSQVRJTkdfRVhQRU5TRSksCiAgICAgICAgICAgICAgICAgICAgb3RoZXJSZXZlbnVlID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuT1RIRVJfUkVWRU5VRSksCiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW5nSW5jb21lRUJJVERBID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuT1BFUkFUSU5HX0lOQ09NRV9FQklUREEpOwoKICAgICAgICAgICAgICAgIC8qIEVCSVQgKi8KICAgICAgICAgICAgICAgIGxldCBkZXByZWNpYXRpb24gPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5ERVBSRUNJQVRJT04pLAogICAgICAgICAgICAgICAgICAgIG90aGVyRXhwZW5zZXMgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5PVEhFUl9FWFBFTlNFKSwKICAgICAgICAgICAgICAgICAgICBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklUID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuRUFSTklOR19CRUZPUkVfSU5URVJFU1RfQU5EX1RBWF9FQklUKTsKCiAgICAgICAgICAgICAgICAvKiBQcm9maXQgQmVmb3JlIFRheCAqLwogICAgICAgICAgICAgICAgbGV0IGZpbmFuY2luZ0Nvc3QgPSB0aGlzLmdldEVudHJ5KGVudHJpZXMsIEFjY291bnRUeXBlQ29kZS5GSU5BTkNJTkdfQ09TVCksCiAgICAgICAgICAgICAgICAgICAgcHJvZml0QmVmb3JlVGF4ID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuUFJPRklUX0JFRk9SRV9UQVgpOwoKICAgICAgICAgICAgICAgIC8qIFByb2ZpdCBGb3IgVGhlIFBlcmlvZCAqLwogICAgICAgICAgICAgICAgbGV0IHRheFJlbGF0ZWRFeHBlbnNlcyA9IHRoaXMuZ2V0RW50cnkoZW50cmllcywgQWNjb3VudFR5cGVDb2RlLlRBWCksCiAgICAgICAgICAgICAgICAgICAgcHJvZml0Rm9yVGhlUGVyaW9kID0gdGhpcy5nZXRFbnRyeShlbnRyaWVzLCBBY2NvdW50VHlwZUNvZGUuUFJPRklUX0ZPUl9USEVfUEVSSU9EKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8qIENhbGN1bGF0ZSBCdWRnZXQgQW1vdW50ICovCiAgICAgICAgICAgICAgICBncm9zc1Byb2ZpdC5idWRnZXRBbW91bnQgPSByZXZlbnVlLmJ1ZGdldEFtb3VudCAtIGNvc3RPZlNhbGUuYnVkZ2V0QW1vdW50OwogICAgICAgICAgICAgICAgb3BlcmF0aW5nRXhwZW5zZXMuYnVkZ2V0QW1vdW50ID0gc2FsYXJ5QmVuZWZpdC5idWRnZXRBbW91bnQgKyBzYWxlTWFya2V0aW5nLmJ1ZGdldEFtb3VudCArIHJlc2VhcmNoUHJvZHVjdERldmVsb3BtZW50LmJ1ZGdldEFtb3VudCArIGxlZ2FsUHJvZmVzc2lvbmFsRmVlLmJ1ZGdldEFtb3VudCArIGdlbmVyYWxBZG1pbkV4cGVuc2VzLmJ1ZGdldEFtb3VudDsKICAgICAgICAgICAgICAgIG9wZXJhdGluZ0luY29tZUVCSVREQS5idWRnZXRBbW91bnQgPSAoZ3Jvc3NQcm9maXQuYnVkZ2V0QW1vdW50ICsgb3RoZXJSZXZlbnVlLmJ1ZGdldEFtb3VudCkgLSBvcGVyYXRpbmdFeHBlbnNlcy5idWRnZXRBbW91bnQ7CiAgICAgICAgICAgICAgICBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULmJ1ZGdldEFtb3VudCA9IG9wZXJhdGluZ0luY29tZUVCSVREQS5idWRnZXRBbW91bnQgLSBkZXByZWNpYXRpb24uYnVkZ2V0QW1vdW50IC0gb3RoZXJFeHBlbnNlcy5idWRnZXRBbW91bnQ7CiAgICAgICAgICAgICAgICBwcm9maXRCZWZvcmVUYXguYnVkZ2V0QW1vdW50ID0gZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVC5idWRnZXRBbW91bnQgLSBmaW5hbmNpbmdDb3N0LmJ1ZGdldEFtb3VudDsKICAgICAgICAgICAgICAgIHByb2ZpdEZvclRoZVBlcmlvZC5idWRnZXRBbW91bnQgPSBwcm9maXRCZWZvcmVUYXguYnVkZ2V0QW1vdW50IC0gdGF4UmVsYXRlZEV4cGVuc2VzLmJ1ZGdldEFtb3VudDsKCiAgICAgICAgICAgICAgICAvKiBDYWxjdWxhdGUgU2VnbWVudCBBbW91bnQgKi8KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWdtZW50SWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZ3Jvc3NQcm9maXRbInMiK2ldID0gcmV2ZW51ZVsicyIraV0gLSBjb3N0T2ZTYWxlWyJzIitpXTsKICAgICAgICAgICAgICAgICAgICBvcGVyYXRpbmdFeHBlbnNlc1sicyIraV0gPSBzYWxhcnlCZW5lZml0WyJzIitpXSArIHNhbGVNYXJrZXRpbmdbInMiK2ldICsgcmVzZWFyY2hQcm9kdWN0RGV2ZWxvcG1lbnRbInMiK2ldICsgbGVnYWxQcm9mZXNzaW9uYWxGZWVbInMiK2ldICsgZ2VuZXJhbEFkbWluRXhwZW5zZXNbInMiK2ldOwogICAgICAgICAgICAgICAgICAgIG9wZXJhdGluZ0luY29tZUVCSVREQVsicyIraV0gPSAoZ3Jvc3NQcm9maXRbInMiK2ldICsgb3RoZXJSZXZlbnVlWyJzIitpXSkgLSBvcGVyYXRpbmdFeHBlbnNlc1sicyIraV07CiAgICAgICAgICAgICAgICAgICAgZWFybmluZ0JlZm9yZUludGVyZXN0QW5kVGF4RUJJVFsicyIraV0gPSBvcGVyYXRpbmdJbmNvbWVFQklUREFbInMiK2ldIC0gZGVwcmVjaWF0aW9uWyJzIitpXSAtIG90aGVyRXhwZW5zZXNbInMiK2ldOwogICAgICAgICAgICAgICAgICAgIHByb2ZpdEJlZm9yZVRheFsicyIraV0gPSBlYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklUWyJzIitpXSAtIGZpbmFuY2luZ0Nvc3RbInMiK2ldOwogICAgICAgICAgICAgICAgICAgIHByb2ZpdEZvclRoZVBlcmlvZFsicyIraV0gPSBwcm9maXRCZWZvcmVUYXhbInMiK2ldIC0gdGF4UmVsYXRlZEV4cGVuc2VzWyJzIitpXTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvKiBGaW5kIFBlcmNlbnRhZ2UgKi8KICAgICAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlZ21lbnRJZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbInAiK2ldID0gdGhpcy5maW5kUGVyY2VudGFnZSh2YWx1ZVsicyIraV0sIHZhbHVlLmJ1ZGdldEFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8qIEJJTkQgU1RBVE1FTlQgKi8KICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVtZW50TGlzdCA9IGVudHJpZXM7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDb2x1bW4oKTsKCiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CgkJCX0sCiAgICAgICAgICAgIGdldEVudHJ5KGVudHJpZXMsIGlkKXsKICAgICAgICAgICAgICAgIGxldCBlbnRyeSA9IGVudHJpZXMuZmluZChpPT5pLnV1aWQgPT09IGlkKTsKCiAgICAgICAgICAgICAgICBpZighZW50cnkpewogICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gbmV3IFN0YXRlbWVudE9mUHJvZml0T3JMb3NzTW9kZWwoKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VnbWVudElkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeVsicyIraV0gPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbmRQZXJjZW50YWdlICh2YWx1ZTEsIHZhbHVlMikgewogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IDA7CiAgICAgICAgICAgICAgICBpZih2YWx1ZTIgIT09IDApewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlMSAvIHZhbHVlMjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKiBPbiBkYXRhYm91bmQgKi8KICAgICAgICAgICAgb25EYXRhQm91bmQgKGUpIHsKICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gZS5zZW5kZXIudGhlYWQuY2hpbGRyZW4oKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciB0aCA9IGtlbmRvLmpRdWVyeShoZWFkZXJzW2ldKTsKICAgICAgICAgICAgICAgICAgICB0aC5jc3MoImZvbnQtd2VpZ2h0IiwgImJvbGQiKTsKICAgICAgICAgICAgICAgICAgICB0aC5jc3MoInRleHQtYWxpZ24iLCAiY2VudGVyIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBlLnNlbmRlci50Ym9keS5jaGlsZHJlbigpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IGtlbmRvLmpRdWVyeShyb3dzW2pdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUl0ZW0gPSBlLnNlbmRlci5kYXRhSXRlbShyb3cpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8qIEFtb3VudCBhbGlnbiByaWdodCAqLwogICAgICAgICAgICAgICAgICAgIHJvdy5jc3MoInRleHQtYWxpZ24iLCAicmlnaHQiKTsKCiAgICAgICAgICAgICAgICAgICAgLyogUGFyZW50IGluIGJvbGQgKi8KICAgICAgICAgICAgICAgICAgICBpZihkYXRhSXRlbS5nZXQoImhhc0NoaWxkcmVuIikgfHwgZGF0YUl0ZW0udXVpZCA+PSAxMDApewogICAgICAgICAgICAgICAgICAgICAgICByb3cuY3NzKCJmb250LXdlaWdodCIsICJib2xkIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBHZW5lcmF0ZSBDb2x1bW5zCgkJCWdlbmVyYXRlQ29sdW1uKCkgewogICAgICAgICAgICAgICAgbGV0IGhlYWRlckF0dHJpYnV0ZXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAidGFibGUtaGVhZGVyLWNlbGwiLAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogInRleHQtYWxpZ246IGNlbnRlcjtwYWRkaW5nLXJpZ2h0OiAzNXB4OyBmb250LXNpemU6IDE0cHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICJ0YWJsZS1jZWxsIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICJ0ZXh0LWFsaWduOiByaWdodDsgZm9udC1zaXplOiAxNHB4IiwKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bi50KCJhY2NvdW50IiksCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLm5hbWVUbXBsLAogICAgICAgICAgICAgICAgICAgICAgICBsb2NrZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NTAsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiAiYnVkZ2V0QW1vdW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgiYnVkZ2V0IiksCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogInswOm59IiwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIwMCwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogaGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIC8qIFNldCBDb2x1bW4gU2VnbWVudHMgKi8KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWdtZW50SWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgLyogU2VnbWVudCAqLwogICAgICAgICAgICAgICAgICAgIGxldCBzZWdtZW50ID0gdGhpcy4kc3RvcmUuc3RhdGUuc2VnbWVudHMubGlzdC5maW5kKAogICAgICAgICAgICAgICAgICAgICAgICAoaXRlbSkgPT4gaXRlbS5pZCA9PT0gdGhpcy5zZWdtZW50SWRzW2ldCiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHNlZ21lbnQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQXR0cmlidXRlczogaGVhZGVyQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczpbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6ICJzIiArIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgiYWN0dWFsX2Ftb3VudCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogInswOm59IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IGhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6ICJwIiArIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICJ7MDpwfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJBdHRyaWJ1dGVzOiBoZWFkZXJBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zOwogICAgICAgICAgICB9LAogICAgICAgICAgICBuYW1lVG1wbChkYXRhSXRlbSl7CiAgICAgICAgICAgICAgICAvKiBOYW1lIGluIGxhbmd1YWdlICovCiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGRhdGFJdGVtLm5hbWU7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlcG9ydGluZ0xhbmd1YWdlID09PSAibG9jYWwiKXsKICAgICAgICAgICAgICAgICAgICBuYW1lID0gZGF0YUl0ZW0ubG9jYWxfbmFtZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvKiBEZWZpbmUgcmVzdWx0ICovCiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYDxzcGFuPiR7ZGF0YUl0ZW0ubnVtYmVyfSAtICR7bmFtZX08L3NwYW4+YDsKCiAgICAgICAgICAgICAgICAvKiBUb3AgTGV2ZWwgKi8KICAgICAgICAgICAgICAgIGlmKGRhdGFJdGVtLnBhcmVudElkID09PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBgPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OiBib2xkZXI7Jz4ke25hbWV9PC9zcGFuPmA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLyogUGFyZW50IExldmVsICovCiAgICAgICAgICAgICAgICBpZihkYXRhSXRlbS5oYXNDaGlsZHJlbiAmJiBkYXRhSXRlbS5udW1iZXIubGVuZ3RoID4gMyl7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYDxzcGFuIHN0eWxlPSdmb250LXdlaWdodDogYm9sZGVyOyc+JHtkYXRhSXRlbS5udW1iZXJ9IC0gJHtuYW1lfTwvc3Bhbj5gOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0sCgkJCS8vIE9uIFJlcG9yaW50IExhbmd1YWdlIENoYW5nZXMKCQkJb25SZXBvcnRpbmdMYW5ndWFnZUNoYW5nZXMgKCkgewogICAgICAgICAgICAgICAgdGhpcy5maWVsZE5hbWUgPSAibmFtZSI7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlcG9ydGluZ0xhbmd1YWdlID09PSAibG9jYWwiKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkTmFtZSA9ICJsb2NhbF9uYW1lIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBjb2x1bW4gd2l0aCBuZXcgbGFuZ3VhZ2UKICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDb2x1bW4oKTsKCQkJfSwKICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkOiBtYXBTdGF0ZSh7CiAgICAgICAgICAgIGFjY291bnRzOiBzdGF0ZSA9PiBzdGF0ZS5hY2NvdW50aW5nLmFjY291bnRzCiAgICAgICAgfSksCiAgICAgICAgbW91bnRlZCAoKSB7CgkJfSwKICAgIH07Cg=="},{"version":3,"sources":["ConsolidatedBudgetPerformance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConsolidatedBudgetPerformance.vue","sourceRoot":"src/views/budgeting/budgets","sourcesContent":["<template>\n    <v-card color=\"white\" class=\"pl-2 no_border\" elevation=\"0\">\n        <!-- Title -->\n        <v-row>\n            <v-col sm=\"9\" cols=\"12\" class=\"py-0\">\n                <h3 class=\"text-left mb-1 font_20 line_24\">{{$t('consolidated_budget_performance_report')}}</h3>\n                <p class=\"mb-0\">{{$t('consolidated_budget_performance_dec')}}</p>\n            </v-col>\n            <v-col sm=\"3\" cols=\"12\" class=\"pb-1\">\n                <app-reporting-language \n                    :initLanguage=\"reportingLanguage\" \n                    @emitLanguage=\"reportingLanguage = $event\" \n                    @onChanged=\"onReportingLanguageChanges\" />\n            </v-col>\n        </v-row>\n\n        <!-- Search -->\n        <v-row class=\"mt-0\">\n            <v-col sm=\"4\" cols=\"12\" class=\"py-0 pt-0\">\n                <label class=\"mb-1\">{{$t('fiscal_year')}}:</label>\n                <app-fiscal-date-dropdownlist\n                    :initFiscalDate=\"fiscalDate\"\n                    @emitFiscalDate=\"fiscalDate = $event\"\n                />\n            </v-col>\n            <v-col sm=\"4\" cols=\"12\" class=\"py-0 pt-0\">\n                <label class=\"mb-1\">{{$t('from')}}:</label>\n                <app-month-of-picker \n                    :initMonthOf=\"startMonth\" \n                    @emitMonthOf=\"startMonth = $event\"\n                    :initMin=\"fiscalDate.start_date\"\n                    :initMax=\"fiscalDate.end_date\" />\n            </v-col>\n            <v-col sm=\"4\" cols=\"12\" class=\"py-0 pt-0\">\n                <label class=\"mb-1\">{{$t('to')}}:</label>\n                <app-month-of-picker \n                    :initMonthOf=\"endMonth\" \n                    @emitMonthOf=\"endMonth = $event\"\n                    :initMin=\"fiscalDate.start_date\"\n                    :initMax=\"fiscalDate.end_date\" />\n            </v-col>\n        </v-row>\n        <v-row class=\"mt-0\">\n            <v-col sm=\"4\" cols=\"12\" class=\"py-0 pt-0\">\n                <label class=\"mb-1\">{{$t('budgets')}}:</label>\n                <budget-list-item-group \n                    :initBudgets=\"selectedBudgets\"\n                    :initFiscalYear=\"fiscalDate.uuid\" \n                    @emitBudgets=\"selectedBudgets = $event\" />\n            </v-col>\n            <v-col sm=\"4\" cols=\"12\" class=\"py-0 pt-6\">\n                <v-btn\n                    class=\"white--text\"\n                    color=\"primary\"\n                    @click=\"search\"\n                >\n                    <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n                </v-btn>\n            </v-col>\n        </v-row>\n        \n        <!-- Grid -->\n        <v-row>\n            <v-col sm=\"12\" cols=\"12\" class=\"pt-1\">\n                <template>\n                    <treelistdatasource \n                        ref=\"statementDS\"\n                        :data=\"statementList\"\n                        :sort=\"sortDefinition\"\n                        :schema-model=\"model\" />\n\n                    <treelist \n                        ref=\"statementTreeList\"\n                        data-source-ref=\"statementDS\"\n                        :resizable=\"true\"\n                        :columns=\"columns\"\n                        :dataBound=\"onDataBound\" />\n\n                    <LoadingMe\n                        type=\"loading\"\n                        :isLoading=\"showLoading\"\n                        :myLoading=\"true\"\n                        :fullPage=\"false\" />\n                </template>\n            </v-col>\n        </v-row>\n    </v-card>\n</template>\n\n<script>\n    import kendo from '@progress/kendo-ui';\n    import {i18n} from '@/i18n';\n    import Helper from \"@/helper.js\";\n    /* Models */\n    import AccountModel from \"@/scripts/model/Account.js\";\n    import FiscalDateModel from \"@/scripts/model/FiscalDate\";\n    import StatementOfProfitOrLossModel from \"@/scripts/model/StatementOfProfitOrLoss\";\n\n    /* TreeList */\n    import { TreeList } from '@progress/kendo-treelist-vue-wrapper';\n    import { TreeListDataSource } from '@progress/kendo-datasource-vue-wrapper';\n    \n    /* Vuex */\n    import { mapState } from 'vuex';\n\n    const incomeStatementHandler = require(\"@/scripts/handler/accounting/incomeStatementHandler\");\n    const OrderNumberPL = require(\"@/scripts/default_setup/OrderNumberPL.js\");\n    const AccountTypeCode = require(\"@/scripts/default_setup/AccountTypeCode.js\");\n\n    export default {\n        components:{\n            \"LoadingMe\": () => import('@/components/Loading'),\n            \"app-fiscal-date-dropdownlist\": () => import('@/components/kendo_templates/FiscalDateDropDownList'),\n            \"app-month-of-picker\": () => import('@/components/kendo_templates/MonthOfPicker'),\n            'app-reporting-language': () => import('@/components/kendo_templates/ReportingLanguageDropDownList'),\n            'budget-list-item-group': () => import('@/components/dropdownlist/BudgetListItemGroup'),\n            'treelist': TreeList,\n            'treelistdatasource': TreeListDataSource,\n        },\n        data: () => ({\n            selectedBudgets: [],\n            segmentIds: [],\n            statements : [],\n            statementList : [],\n            startMonth: '',\n            endMonth: '',\n            minMonth : '',\n            maxMonth : '',\n            /* Fiscal Date */\n            fiscalDate: new FiscalDateModel(),\n            /* Kendo */\n            columns : [],\n            sortDefinition : [\n                { field: \"order\", dir: \"asc\" },\n                { field: \"number\", dir: \"asc\" },\n            ],\n\t\t\tmodel: {\n                id: \"uuid\",\n                expanded: true\n            },\n            // Reporting Language\n\t\t\treportingLanguage: 'english',\n\t\t\tfieldName : 'name',\n            // LoadingMe\n            showLoading: false,\n        }),\n        methods:{\n            validating(){\n                let isValid = true;\n\n                if(this.fiscalDate.uuid === ''){\n                    isValid = false;\n                    this.$snotify.warning(i18n.t(\"please_select_fiscal_year\"));\n                }\n\n                if(this.startMonth === '' || this.endMonth === ''){\n                    isValid = false;\n                    this.$snotify.warning(i18n.t(\"please_from_to_month\"));\n                }\n\n                if(this.selectedBudgets.length === 0){\n                    isValid = false;\n                    this.$snotify.warning(i18n.t(\"please_select_budgets\"));\n                }\n\n                return isValid;\n            },\n            /* Search */\n            search () {\n                if(this.validating()){\n                    let endMonth = new Date(this.endMonth),\n                        lastDay = new Date(endMonth.getFullYear(), endMonth.getMonth()+1, 0);\n\n                    let sdate = kendo.toString(new Date(this.startMonth), 'yyyy-MM-dd') + 'T00:00:00.000Z',\n                        edate = kendo.toString(lastDay, 'yyyy-MM-dd') + 'T23:59:59.999Z';\n\n                    /* Segment Ids */\n                    let segmentIds = [];\n                    this.$store.state.budgets.list.forEach(value => {\n                        if(~this.selectedBudgets.indexOf(value.uuid)) {\n                            segmentIds.push(value.segment_uuid);\n                        }\n                    });\n                    /* Remove Duplicate */\n                    this.segmentIds = [...new Set(segmentIds)];\n                    \n                    // Empty datasource\n                    let ds = this.$refs.statementDS.kendoWidget();\n                    ds.data([]);\n                    \n                    // Query Income Statement\n                    this.showLoading = true;\n                    incomeStatementHandler.getBySegments(sdate, edate, this.segmentIds)\n                    .then(res => {\n                        if(res){\n                            this.statements = res;\n                            this.bindData();\n                        }else{\n                            this.$snotify.error(i18n.t(\"error_something_wrong\"));\n                        }\n                    })\n                    .finally(()=>{\n                        // this.showLoading = false;\n                    });\n                }\n\t\t\t},\n            async bindData () {\n                let g = {}, childIds = [];\n\n                /* Generate Months */\n                let fiscalMonths = Helper.generateFiscalMonths(this.fiscalDate.start_date, this.fiscalDate.end_date, \"12\", \"yyyy-MM\");\n\n                /* Month Index */\n                let startMonthIndex = fiscalMonths.indexOf(this.startMonth),\n                    endMonthIndex = fiscalMonths.indexOf(this.endMonth);\n\n                let minMonthIndex = startMonthIndex, maxMonthIndex = endMonthIndex;\n                if(startMonthIndex > endMonthIndex){\n                    minMonthIndex = endMonthIndex, maxMonthIndex = startMonthIndex;\n                }\n\n                // Load Account List\n                await this.$store.dispatch('accounting/getAccounts'); \n\n                /* Loop all budgets */\n                for (let i = 0; i < this.selectedBudgets.length; i++) {\n                    const budget = this.$store.state.budgets.list.find((item) => item.uuid === this.selectedBudgets[i]);\n\n                    /* Budget lines */\n                    budget.lines.forEach(value => {\n                        /* Get Account */\n                        let account = this.accounts.find((item) => item.uuid === value.account_uuid);\n                        \n                        /* Order */\n                        let order = account.type_code;\n                        if(account.type_code === AccountTypeCode.OTHER_REVENUE){\n                            order = OrderNumberPL[account.type_code];\n                        }\n\n                        /* GROUPING */\n                        /* Top Level Account Type */\n                        if(!g[account.type_code]){\n                            g[account.type_code] = new StatementOfProfitOrLossModel({\n                                uuid : account.type_code,\n                                number : account.type_code,\n                                name : account.account_type.name,\n                                local_name : account.account_type.local_name,\n                                order : order,\n                            });\n                        }\n                        \n                        /* Parent Level */\n                        let thisAccountParentId = \"\";\n                        if(account.hasOwnProperty(\"parent_account\")){\n                            let currentParentAccount = new AccountModel(account.parent_account), counter = 0;\n                            while (currentParentAccount.number !== \"\") {\n                                /* Get account by uuid or banhji_account_number */\n                                let accountParent = new AccountModel();\n                                if(currentParentAccount.uuid !== \"\"){/* Get by uuid */\n                                    accountParent = new AccountModel(this.accounts.find((item) => item.uuid === currentParentAccount.uuid));\n                                }else{/* Get by banhji_account_number because default data has no uuid */\n                                    if(currentParentAccount.banhji_account_number !== \"\"){\n                                        accountParent = new AccountModel(this.accounts.find((item) => item.banhji_account_number === currentParentAccount.banhji_account_number));\n                                    }\n                                }\n\n                                /* Set This Account Parent Id */\n                                if(counter === 0){\n                                    thisAccountParentId = accountParent.uuid;\n                                }\n\n                                /* Find Next Parent */\n                                let nextParent = new AccountModel();\n                                if(accountParent.hasOwnProperty(\"parent_account\")){\n                                    let parentOfAccountParent = new AccountModel(accountParent.parent_account);\n                                    if(parentOfAccountParent.number !== \"\"){\n                                        if(parentOfAccountParent.uuid !== \"\"){/* Get by uuid */\n                                            nextParent = this.accounts.find((item) => item.uuid === parentOfAccountParent.uuid);\n                                        }else{/* Get by banhji_account_number because default data has no uuid */\n                                            if(parentOfAccountParent.banhji_account_number !== \"\"){\n                                                nextParent = this.accounts.find((item) => item.banhji_account_number === parentOfAccountParent.banhji_account_number);\n                                            }\n                                        }\n                                    }\n                                }\n\n                                /* Set Parent Id */\n                                let parentId = accountParent.type_code;\n                                if(nextParent.number !== \"\"){\n                                    parentId = nextParent.uuid;\n\n                                    /* Set next parent account */\n                                    Object.assign(currentParentAccount, nextParent);\n                                }else{\n                                    /* Set loop to end */\n                                    currentParentAccount.number = \"\";\n                                }\n\n                                /* Add Parent Level */\n                                g[accountParent.uuid] = new StatementOfProfitOrLossModel({\n                                    uuid : accountParent.uuid,\n                                    number : accountParent.number,\n                                    name : accountParent.name,\n                                    local_name : accountParent.local_name,\n                                    parentId : parentId,\n                                    account : accountParent,\n                                    order : order,\n                                });\n\n                                /* Increase Counter By 1 */\n                                counter++;\n                            }/* End While Loop */\n                        }\n\n                        /* Child Level */\n                        if(!g[account.uuid]){\n                            g[account.uuid] = new StatementOfProfitOrLossModel({\n                                uuid : account.uuid,\n                                number : account.number,\n                                name : account.name,\n                                local_name : account.local_name,\n                                account : account,\n                                order : order,\n                            });\n                        }\n\n                        /* Budget Amount */\n                        let budgetAmount = 0;\n                        for (let j = 0; j < 12; j++) {\n                            if(j >= minMonthIndex && j <= maxMonthIndex){\n                                let nature = 1;\n                                if(account.account_type.nature.toLowerCase() === \"cr\"){\n                                    nature = -1;\n                                }\n                                budgetAmount += kendo.parseFloat(value.monthly_amount[j].amount) * nature;\n                            }\n                        }\n\n                        /* Set Parent Id Or Self Parent */\n                        let childId = account.uuid;\n                        if(thisAccountParentId !== \"\"){/* Child Level */\n                            g[account.uuid].parentId = thisAccountParentId;\n                            g[account.uuid].budgetAmount = budgetAmount;\n                        }else{/* Child As Parent */\n                            g[account.uuid].parentId = account.type_code; /* Self As Parent */\n\n                            if(budgetAmount !== 0){\n                                childId = account.number;\n\n                                /* Self As Child With Balance */\n                                if(!g[account.number]){\n                                    g[account.number] = new StatementOfProfitOrLossModel({\n                                        uuid : account.number,\n                                        number : account.number,\n                                        name : account.name,\n                                        local_name : account.local_name,\n                                        parentId : account.uuid,\n                                        account : account,\n                                        budgetAmount : budgetAmount,\n                                        order : order,\n                                    });\n                                }\n                            }\n                        }\n\n                        /* Child Id */\n                        childIds.push(childId);\n                    });\n                }\n\n                /* ACTUAL */\n                /* Define Segments */\n                for (let key in g){\n                    for (let i = 0; i < this.segmentIds.length; i++) {\n                        g[key][\"s\"+i] = 0;\n                    }\n                }\n                /* Sum Segments */\n                for (let i = 0; i < this.segmentIds.length; i++) {\n                    this.statements[i].forEach(value => {\n                        if(g[value.accountUUID]){\n                            g[value.accountUUID][\"s\"+i] += kendo.parseFloat(value.balance);\n                        }\n                        \n                        /* Other Groups */\n                        if(value.account_type_number >= 100 && value.account_type_number <= 105){\n                            g[value.account_type_number] = new StatementOfProfitOrLossModel({\n                                uuid: value.account_type_number,\n                                name: value.name,\n                                local_name: value.local_name,\n                                order: OrderNumberPL[value.account_type_number],\n                            });\n                        }\n                    });\n                }\n                \n                /* Parse Object Array */\n                let entries = Object.values(g);\n                \n                /* Parent aggregate sum */\n                for (let i = 0; i < entries.length; i++) {\n                    let entry = entries[i];\n                    \n                    if(~childIds.indexOf(entry.uuid)){\n                        let parentId = entry.parentId;\n                        while(parentId !== null){\n                            if(parentId){\n                                let parent = entries.find((item) => item.uuid === parentId);\n                                if(parent){\n                                    parent.budgetAmount += entry.budgetAmount;\n\n                                    /* Define Segments */\n                                    for (let j = 0; j < this.segmentIds.length; j++) {\n                                        parent[\"s\"+j] += entry[\"s\"+j];\n                                    }\n\n                                    /* Set new parent id */\n                                    parentId = parent.parentId;\n                                }else{\n                                    /* Set loop to end */\n                                    parentId = null;\n                                }\n                            }else{\n                                /* Set loop to end */\n                                parentId = null;\n                            }\n                        }\n                    }\n                }\n\n                /* Other Groups */\n                /* Gross Profit */\n                let revenue = this.getEntry(entries, AccountTypeCode.REVENUE),\n                    costOfSale = this.getEntry(entries, AccountTypeCode.COGS),\n                    grossProfit = this.getEntry(entries, AccountTypeCode.GROSS_PROFIT);\n\n                /* EBITDA */\n                let salaryBenefit = this.getEntry(entries, AccountTypeCode.SALARY_BENEFIT),\n                    saleMarketing = this.getEntry(entries, AccountTypeCode.SALE_MARKETING),\n                    researchProductDevelopment = this.getEntry(entries, AccountTypeCode.RESEARCH_PRODUCT_DEVELOPMENT),\n                    legalProfessionalFee = this.getEntry(entries, AccountTypeCode.LEGAL_PROFESSIONAL_FEE),\n                    generalAdminExpenses = this.getEntry(entries, AccountTypeCode.GENERAL_ADMIN_EXPENSE),\n                    operatingExpenses = this.getEntry(entries, AccountTypeCode.OPERATING_EXPENSE),\n                    otherRevenue = this.getEntry(entries, AccountTypeCode.OTHER_REVENUE),\n                    operatingIncomeEBITDA = this.getEntry(entries, AccountTypeCode.OPERATING_INCOME_EBITDA);\n\n                /* EBIT */\n                let depreciation = this.getEntry(entries, AccountTypeCode.DEPRECIATION),\n                    otherExpenses = this.getEntry(entries, AccountTypeCode.OTHER_EXPENSE),\n                    earningBeforeInterestAndTaxEBIT = this.getEntry(entries, AccountTypeCode.EARNING_BEFORE_INTEREST_AND_TAX_EBIT);\n\n                /* Profit Before Tax */\n                let financingCost = this.getEntry(entries, AccountTypeCode.FINANCING_COST),\n                    profitBeforeTax = this.getEntry(entries, AccountTypeCode.PROFIT_BEFORE_TAX);\n\n                /* Profit For The Period */\n                let taxRelatedExpenses = this.getEntry(entries, AccountTypeCode.TAX),\n                    profitForThePeriod = this.getEntry(entries, AccountTypeCode.PROFIT_FOR_THE_PERIOD);\n                    \n                /* Calculate Budget Amount */\n                grossProfit.budgetAmount = revenue.budgetAmount - costOfSale.budgetAmount;\n                operatingExpenses.budgetAmount = salaryBenefit.budgetAmount + saleMarketing.budgetAmount + researchProductDevelopment.budgetAmount + legalProfessionalFee.budgetAmount + generalAdminExpenses.budgetAmount;\n                operatingIncomeEBITDA.budgetAmount = (grossProfit.budgetAmount + otherRevenue.budgetAmount) - operatingExpenses.budgetAmount;\n                earningBeforeInterestAndTaxEBIT.budgetAmount = operatingIncomeEBITDA.budgetAmount - depreciation.budgetAmount - otherExpenses.budgetAmount;\n                profitBeforeTax.budgetAmount = earningBeforeInterestAndTaxEBIT.budgetAmount - financingCost.budgetAmount;\n                profitForThePeriod.budgetAmount = profitBeforeTax.budgetAmount - taxRelatedExpenses.budgetAmount;\n\n                /* Calculate Segment Amount */\n                for (let i = 0; i < this.segmentIds.length; i++) {\n                    grossProfit[\"s\"+i] = revenue[\"s\"+i] - costOfSale[\"s\"+i];\n                    operatingExpenses[\"s\"+i] = salaryBenefit[\"s\"+i] + saleMarketing[\"s\"+i] + researchProductDevelopment[\"s\"+i] + legalProfessionalFee[\"s\"+i] + generalAdminExpenses[\"s\"+i];\n                    operatingIncomeEBITDA[\"s\"+i] = (grossProfit[\"s\"+i] + otherRevenue[\"s\"+i]) - operatingExpenses[\"s\"+i];\n                    earningBeforeInterestAndTaxEBIT[\"s\"+i] = operatingIncomeEBITDA[\"s\"+i] - depreciation[\"s\"+i] - otherExpenses[\"s\"+i];\n                    profitBeforeTax[\"s\"+i] = earningBeforeInterestAndTaxEBIT[\"s\"+i] - financingCost[\"s\"+i];\n                    profitForThePeriod[\"s\"+i] = profitBeforeTax[\"s\"+i] - taxRelatedExpenses[\"s\"+i];\n                }\n\n                /* Find Percentage */\n                entries.forEach(value => {\n                    for (let i = 0; i < this.segmentIds.length; i++) {\n                        value[\"p\"+i] = this.findPercentage(value[\"s\"+i], value.budgetAmount);\n                    }\n                });\n                \n                /* BIND STATMENT */\n                this.statementList = entries;\n                \n                this.generateColumn();\n\n                this.showLoading = false;\n\t\t\t},\n            getEntry(entries, id){\n                let entry = entries.find(i=>i.uuid === id);\n\n                if(!entry){\n                    entry = new StatementOfProfitOrLossModel();\n                    for (let i = 0; i < this.segmentIds.length; i++) {\n                        entry[\"s\"+i] = 0;\n                    }\n                }\n\n                return entry;\n            },\n            findPercentage (value1, value2) {\n                let result = 0;\n                if(value2 !== 0){\n                    result = value1 / value2;\n                }\n\n                return result;\n            },\n            /* On databound */\n            onDataBound (e) {\n                var headers = e.sender.thead.children();\n                for (var i = 0; i < headers.length; i++) {\n                    var th = kendo.jQuery(headers[i]);\n                    th.css(\"font-weight\", \"bold\");\n                    th.css(\"text-align\", \"center\");\n                }\n\n                var rows = e.sender.tbody.children();\n                for (var j = 0; j < rows.length; j++) {\n                    var row = kendo.jQuery(rows[j]);\n                    var dataItem = e.sender.dataItem(row);\n                    \n                    /* Amount align right */\n                    row.css(\"text-align\", \"right\");\n\n                    /* Parent in bold */\n                    if(dataItem.get(\"hasChildren\") || dataItem.uuid >= 100){\n                        row.css(\"font-weight\", \"bold\");\n                    }\n                }\n            },\n            // Generate Columns\n\t\t\tgenerateColumn() {\n                let headerAttributes = {\n                        class: \"table-header-cell\",\n                        style: \"text-align: center;padding-right: 35px; font-size: 14px\",\n                    },\n                    attributes = {\n                        class: \"table-cell\",\n                        style: \"text-align: right; font-size: 14px\",\n                    };\n\n                let columns = [\n                    {\n                        field: this.fieldName,\n                        title: i18n.t(\"account\"),\n                        template: this.nameTmpl,\n                        locked: true,\n                        width: 450,\n                    },\n                    {\n                        field: \"budgetAmount\",\n                        title: i18n.t(\"budget\"),\n                        format: \"{0:n}\",\n                        width: 200,\n                        headerAttributes: headerAttributes,\n                        attributes: attributes,\n                    }\n                ];\n\n                /* Set Column Segments */\n                for (let i = 0; i < this.segmentIds.length; i++) {\n                    /* Segment */\n                    let segment = this.$store.state.segments.list.find(\n                        (item) => item.id === this.segmentIds[i]\n                    );\n\n                    columns.push({\n                        title: segment.name,\n                        headerAttributes: headerAttributes,\n                        columns:[\n                            {\n                                field: \"s\" + i,\n                                title: i18n.t(\"actual_amount\"),\n                                format: \"{0:n}\",\n                                width: 200,\n                                headerAttributes: headerAttributes,\n                                attributes: attributes,\n                            },\n                            {\n                                field: \"p\" + i,\n                                title: \"%\",\n                                format: \"{0:p}\",\n                                width: 100,\n                                headerAttributes: headerAttributes,\n                                attributes: attributes,\n                            }\n                        ]\n                    });\n                }\n\n                this.columns = columns;\n            },\n            nameTmpl(dataItem){\n                /* Name in language */\n                let name = dataItem.name;\n                if(this.reportingLanguage === \"local\"){\n                    name = dataItem.local_name;\n                }\n\n                /* Define result */\n                let result = `<span>${dataItem.number} - ${name}</span>`;\n\n                /* Top Level */\n                if(dataItem.parentId === null){\n                    result = `<span style='font-weight: bolder;'>${name}</span>`;\n                }\n\n                /* Parent Level */\n                if(dataItem.hasChildren && dataItem.number.length > 3){\n                    result = `<span style='font-weight: bolder;'>${dataItem.number} - ${name}</span>`;\n                }\n\n                return result;\n            },\n\t\t\t// On Reporint Language Changes\n\t\t\tonReportingLanguageChanges () {\n                this.fieldName = \"name\";\n                if(this.reportingLanguage === \"local\"){\n                    this.fieldName = \"local_name\";\n                }\n\n                // Generate column with new language\n                this.generateColumn();\n\t\t\t},\n        },\n        computed: mapState({\n            accounts: state => state.accounting.accounts\n        }),\n        mounted () {\n\t\t},\n    };\n</script>\n\n<style scoped>\n    .theme--light.v-data-table {\n        background-color: transparent !important;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .v-data-table.simple1_table.theme--light,\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .v-data-table.simple_table.theme--light{\n        border-left: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .theme--light.v-data-table.simple1_table > .v-data-table__wrapper > table > thead > tr:last-child > th:last-child{\n        border-right: none !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: transparent !important;\n    }\n\n    .border-bottom {\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .font-small {\n        font-size: 12px;\n        line-height: 15px;\n    }\n\n    .font-26 {\n        font-size: 26px !important;\n    }\n    .v-data-table.simple_table.theme--light{\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n        border-bottom: none !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th{\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:last-child,\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n        border-right: none !important;\n    }\n\n\n    .v-data-table.table_list > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-right: none !important;\n    }\n    .v-data-table.table_list.theme--light > .v-data-table__wrapper > table > tbody > tr:first-child > td{\n        border-top: none !important;\n    }\n\n    @media (max-width: 576px) {\n\n    }\n</style>"]}]}
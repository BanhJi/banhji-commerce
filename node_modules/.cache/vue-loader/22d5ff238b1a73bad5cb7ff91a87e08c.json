{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/payroll_run/TimeCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/payroll_run/TimeCard.vue","mtime":1638499443262},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVcGxvYWRFeGNlbENvbXBvbmVudCBmcm9tICdAL2NvbXBvbmVudHMvdXBsb2FkX2V4Y2VsL1RpbWVzaGVldC52dWUnOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IFRpbWVDYXJkTGluZSBmcm9tICJAL3NjcmlwdHMvbW9kZWwvVGltZUNhcmRMaW5lIjsKaW1wb3J0IEVtcGxveWVlTW9kZWwgZnJvbSAnQC9zY3JpcHRzL21vZGVsL0VtcGxveWVlJwppbXBvcnQgVGltZUNhcmQgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1RpbWVDYXJkIjsKY29uc3QgdGltZUNhcmRMaW5lTW9kZWwgPSBuZXcgVGltZUNhcmRMaW5lKHt9KQpjb25zdCBlbXBsb3llZU1vZGVsID0gbmV3IEVtcGxveWVlTW9kZWwoe30pCmNvbnN0IHRpbWVDYXJkTW9kZWwgPSBuZXcgVGltZUNhcmQoe30pCmNvbnN0IGVtcGxveWVlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9lbXBsb3llZUhhbmRsZXIiKQpjb25zdCBwYXlyb2xsSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wYXlyb2xsSGFuZGxlciIpCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGE6ICgpID0+KHsKICAgICAgICBqb3VybmFsX2RhdGU6ICIiLAogICAgICAgIGRpYWxvZ206IGZhbHNlLAogICAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgICAgdGFibGVIZWFkZXI6IFtdLAogICAgICAgIGRhdGVGb3JtYXQ6IHRpbWVDYXJkTGluZU1vZGVsLmRhdGVGb3JtYXQsCiAgICAgICAgdGltZUZvcm1hdDogdGltZUNhcmRMaW5lTW9kZWwudGltZUZvcm1hdCwKICAgICAgICBlbXBsb3llZURhdGE6IFtdLAogICAgICAgIGlzX21vbnRoOiBmYWxzZSwKICAgICAgICBtb250aE9mOiAnJywKICAgICAgICBlbXBsb3llZTogZW1wbG95ZWVNb2RlbCwKICAgICAgICB0aW1lQ2FyZDogdGltZUNhcmRNb2RlbCwKICAgIH0pLAogICAgY29tcG9uZW50czogewogICAgICAgICd1cGxvYWQtZXhjZWwtY29tcG9uZW50JzpVcGxvYWRFeGNlbENvbXBvbmVudCwKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgICAgICAgY29uc3QgaXNMdDFNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAxCiAgICAgICAgICAgIGlmIChpc0x0MU0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGRvIG5vdCB1cGxvYWQgZmlsZXMgbGFyZ2VyIHRoYW4gMW0gaW4gc2l6ZS4nLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlU3VjY2Vzcyh7IHJlc3VsdHMsIGhlYWRlciB9KSB7CiAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgICAgIHZhciB1dGNfZGF5cyAgPSBNYXRoLmZsb29yKGVsZW1lbnQuZGF0ZSAtIDI1NTY5KTsKICAgICAgICAgICAgICAgIHZhciB1dGNfdmFsdWUgPSB1dGNfZGF5cyAqIDg2NDAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBkYXRlX2luZm8gPSBuZXcgRGF0ZSh1dGNfdmFsdWUgKiAxMDAwKTsKICAgICAgICAgICAgICAgIHZhciBmcmFjdGlvbmFsX2RheSA9IGVsZW1lbnQuZGF0ZSAtIE1hdGguZmxvb3IoZWxlbWVudC5kYXRlKSArIDAuMDAwMDAwMTsKICAgICAgICAgICAgICAgIHZhciB0b3RhbF9zZWNvbmRzID0gTWF0aC5mbG9vcig4NjQwMCAqIGZyYWN0aW9uYWxfZGF5KTsKICAgICAgICAgICAgICAgIHZhciBzZWNvbmRzID0gdG90YWxfc2Vjb25kcyAlIDYwOwogICAgICAgICAgICAgICAgdG90YWxfc2Vjb25kcyAtPSBzZWNvbmRzOwogICAgICAgICAgICAgICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcih0b3RhbF9zZWNvbmRzIC8gKDYwICogNjApKTsKICAgICAgICAgICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcih0b3RhbF9zZWNvbmRzIC8gNjApICUgNjA7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudF9kYXRldGltZSA9ICBuZXcgRGF0ZShkYXRlX2luZm8uZ2V0RnVsbFllYXIoKSwgZGF0ZV9pbmZvLmdldE1vbnRoKCksIGRhdGVfaW5mby5nZXREYXRlKCksIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTsKICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0ZSAgICA9IGN1cnJlbnRfZGF0ZXRpbWUKICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZUZvcm1hdAoKCiAgICAgICAgICAgICAgICB2YXIgdXRjX2RheXNfdGltZV9pbiAgPSBNYXRoLmZsb29yKGVsZW1lbnQuY2xvY2tlZEluIC0gMjU1NjkpOwogICAgICAgICAgICAgICAgdmFyIHV0Y192YWx1ZV90aW1lX2luID0gdXRjX2RheXNfdGltZV9pbiAqIDg2NDAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBkYXRlX2luZm9fdGltZV9pbiA9IG5ldyBEYXRlKHV0Y192YWx1ZV90aW1lX2luICogMTAwMCk7CiAgICAgICAgICAgICAgICB2YXIgZnJhY3Rpb25hbF90aW1lX2luID0gZWxlbWVudC5jbG9ja2VkSW4gLSBNYXRoLmZsb29yKGVsZW1lbnQuY2xvY2tlZEluKSArIDAuMDAwMDAwMTsKICAgICAgICAgICAgICAgIHZhciB0b3RhbF9zZWNvbmRzX3RpbWVfaW4gPSBNYXRoLmZsb29yKDg2NDAwICogZnJhY3Rpb25hbF90aW1lX2luKTsKICAgICAgICAgICAgICAgIHZhciBzZWNvbmRzX3RpbWVfaW4gPSB0b3RhbF9zZWNvbmRzX3RpbWVfaW4gJSA2MDsKICAgICAgICAgICAgICAgIHRvdGFsX3NlY29uZHNfdGltZV9pbiAtPSBzZWNvbmRzX3RpbWVfaW47CiAgICAgICAgICAgICAgICB2YXIgaG91cnNfdGltZV9pbiA9IE1hdGguZmxvb3IodG90YWxfc2Vjb25kc190aW1lX2luIC8gKDYwICogNjApKTsKICAgICAgICAgICAgICAgIHZhciBtaW51dGVzX3RpbWVfaW4gPSBNYXRoLmZsb29yKHRvdGFsX3NlY29uZHNfdGltZV9pbiAvIDYwKSAlIDYwOwogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfdGltZV9pbiA9ICBuZXcgRGF0ZShkYXRlX2luZm9fdGltZV9pbi5nZXRGdWxsWWVhcigpLCBkYXRlX2luZm9fdGltZV9pbi5nZXRNb250aCgpLCBkYXRlX2luZm9fdGltZV9pbi5nZXREYXRlKCksIGhvdXJzX3RpbWVfaW4sIG1pbnV0ZXNfdGltZV9pbiwgc2Vjb25kc190aW1lX2luKTsKICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xvY2tlZEluICAgID0gY3VycmVudF90aW1lX2luCgogICAgICAgICAgICAgICAgdmFyIHV0Y19kYXlzX3RpbWVfb3V0ICA9IE1hdGguZmxvb3IoZWxlbWVudC5jbG9ja2VkT3V0IC0gMjU1NjkpOwogICAgICAgICAgICAgICAgdmFyIHV0Y192YWx1ZV90aW1lX291dCA9IHV0Y19kYXlzX3RpbWVfb3V0ICogODY0MDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGRhdGVfaW5mb190aW1lX291dCA9IG5ldyBEYXRlKHV0Y192YWx1ZV90aW1lX291dCAqIDEwMDApOwogICAgICAgICAgICAgICAgdmFyIGZyYWN0aW9uYWxfdGltZV9vdXQgPSBlbGVtZW50LmNsb2NrZWRPdXQgLSBNYXRoLmZsb29yKGVsZW1lbnQuY2xvY2tlZE91dCkgKyAwLjAwMDAwMDE7CiAgICAgICAgICAgICAgICB2YXIgdG90YWxfc2Vjb25kc190aW1lX291dCA9IE1hdGguZmxvb3IoODY0MDAgKiBmcmFjdGlvbmFsX3RpbWVfb3V0KTsKICAgICAgICAgICAgICAgIHZhciBzZWNvbmRzX3RpbWVfb3V0ID0gdG90YWxfc2Vjb25kc190aW1lX291dCAlIDYwOwogICAgICAgICAgICAgICAgdG90YWxfc2Vjb25kc190aW1lX291dCAtPSBzZWNvbmRzX3RpbWVfb3V0OwogICAgICAgICAgICAgICAgdmFyIGhvdXJzX3RpbWVfb3V0ID0gTWF0aC5mbG9vcih0b3RhbF9zZWNvbmRzX3RpbWVfb3V0IC8gKDYwICogNjApKTsKICAgICAgICAgICAgICAgIHZhciBtaW51dGVzX3RpbWVfb3V0ID0gTWF0aC5mbG9vcih0b3RhbF9zZWNvbmRzX3RpbWVfb3V0IC8gNjApICUgNjA7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudF90aW1lX291dCA9ICBuZXcgRGF0ZShkYXRlX2luZm9fdGltZV9vdXQuZ2V0RnVsbFllYXIoKSwgZGF0ZV9pbmZvX3RpbWVfb3V0LmdldE1vbnRoKCksIGRhdGVfaW5mb190aW1lX291dC5nZXREYXRlKCksIGhvdXJzX3RpbWVfb3V0LCBtaW51dGVzX3RpbWVfb3V0LCBzZWNvbmRzX3RpbWVfb3V0KTsKICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xvY2tlZE91dCAgICA9IGN1cnJlbnRfdGltZV9vdXQKICAgICAgICAgICAgICAgIGVsZW1lbnQudGltZUZvcm1hdCAgPSB0aGlzLnRpbWVGb3JtYXQKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzdWx0cwogICAgICAgICAgICB0aGlzLnRhYmxlSGVhZGVyID0gaGVhZGVyCiAgICAgICAgfSwKICAgICAgICBuZXh0U3RwZXMoKXsKICAgICAgICAgICAgdGhpcy5hdXRvQ2FsY3VsYXRlKCkKICAgICAgICAgICAgdGhpcy5ncm91cEJ5KCkKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAiaWQiOiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lQ2FyZC5pZCA/IHRoaXMudGltZUNhcmQuaWQgOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgIm1vbnRoT2YiOiAgICAgICAgICAgICAgICAgIHRoaXMubW9udGhPZiwKICAgICAgICAgICAgICAgICAgICAgICAgInRpbWVDYXJkTGluZSI6ICAgICAgICAgICAgIHRoaXMudGltZUNhcmRMaW5lLAogICAgICAgICAgICAgICAgICAgICAgICAidG90YWxXb3JrIjogICAgICAgICAgICAgICAgdGhpcy50b3RhbFdvcmssCiAgICAgICAgICAgICAgICAgICAgICAgICJ0b3RhbE92ZXJUaW1lV2Vla2VuZCI6ICAgICB0aGlzLnRvdGFsT3ZlclRpbWVXZWVrZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAidG90YWxPdmVyVGltZUhvbGlkYXkiOiAgICAgdGhpcy50b3RhbE92ZXJUaW1lSG9saWRheQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcGF5cm9sbEhhbmRsZXIuY3JlYXRlVGltZUNhcmQoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5zdWNjZXNzKCdTdWNjZXNzJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXV0b0NhbGN1bGF0ZSgpIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5kYXRhU291cmNlLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgIC8vIHNwZWNpZmljV29ya3MgPSBbXSwKICAgICAgICAgICAgdG90YWxXb3JrID0gMCwKICAgICAgICAgICAgdG90YWxPdmVyVGltZVdlZWtlbmQgPSAwLAogICAgICAgICAgICB0b3RhbE92ZXJUaW1lSG9saWRheSA9IDA7CiAgICAgICAgICAgIGRzLmRhdGEoKS5mb3JFYWNoKHZhbHVlID0+IHsKICAgICAgICAgICAgICAgIHRvdGFsV29yayArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLndvcmtUaW1lKQogICAgICAgICAgICAgICAgdG90YWxPdmVyVGltZVdlZWtlbmQgKz0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5vdmVyVGltZVdlZWtlbmQpCiAgICAgICAgICAgICAgICB0b3RhbE92ZXJUaW1lSG9saWRheSArPSBrZW5kby5wYXJzZUZsb2F0KHZhbHVlLm92ZXJUaW1lSG9saWRheSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy50b3RhbFdvcmsgICAgICAgICAgICAgID0gdG90YWxXb3JrCiAgICAgICAgICAgIHRoaXMudG90YWxPdmVyVGltZVdlZWtlbmQgICA9IHRvdGFsT3ZlclRpbWVXZWVrZW5kCiAgICAgICAgICAgIHRoaXMudG90YWxPdmVyVGltZUhvbGlkYXkgICA9IHRvdGFsT3ZlclRpbWVIb2xpZGF5CiAgICAgICAgfSwKICAgICAgICBncm91cEJ5KCkgewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2Uua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgbGV0IGhlbHBlciA9IHt9OwogICAgICAgICAgICBsZXQgcmVzdWx0ID0gZHMuZGF0YSgpLnJlZHVjZShmdW5jdGlvbihyLCBvKSB7CiAgICAgICAgICAgICAgICBsZXQga2V5ID0gby5kYXRlICsgJy0nICsgby5lbXBsb3llZUlkOwogICAgICAgICAgICAgICAgaWYoIWhlbHBlcltrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0gPSBPYmplY3QuYXNzaWduKHt9LCBvKTsgLy8gY3JlYXRlIGEgY29weSBvZiBvCiAgICAgICAgICAgICAgICAgICAgci5wdXNoKGhlbHBlcltrZXldKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0ud29ya1RpbWUgKz0gby53b3JrVGltZTsKICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS53b3JrRGF5ID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICB9LCBbXSk7CiAgICAgICAgICAgIGxldCBsYXN0UmVzdWx0ID0ge30KICAgICAgICAgICAgbGV0IGVtcGxveWVlcyA9IHRoaXMuZW1wbG95ZWVzCiAgICAgICAgICAgIGxldCBsYXN0X3Jlc3VsdCA9IHJlc3VsdC5yZWR1Y2UoZnVuY3Rpb24obSwgbikgewogICAgICAgICAgICAgICAgbGV0IGtleSA9IG4uZW1wbG95ZWVJZAogICAgICAgICAgICAgICAgaWYoIWxhc3RSZXN1bHRba2V5XSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RSZXN1bHRba2V5XSA9IE9iamVjdC5hc3NpZ24oe30sIG4pOyAvLyBjcmVhdGUgYSBjb3B5IG9mIG8KICAgICAgICAgICAgICAgICAgICBtLnB1c2gobGFzdFJlc3VsdFtrZXldKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWVzLmZvckVhY2goZnVuY3Rpb24oZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoa2V5ID09IGVtLmVtcGxveWVlSWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlc3VsdFtrZXldLndvcmtUaW1lICs9IG4ud29ya1RpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVzdWx0W2tleV0ud29ya0RheSArPSBuLndvcmtEYXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVzdWx0W2tleV0uZW1wbG95ZWVVaWQgID0gZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICB9LCBbXSk7CiAgICAgICAgICAgIHRoaXMudGltZUNhcmRMaW5lID0gbGFzdF9yZXN1bHQ7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkRW1wbG95ZWUoKXsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbXBsb3llZXMgPSBbXQogICAgICAgICAgICAgICAgICAgIGVtcGxveWVlSGFuZGxlci5jZW50ZXIodGhpcy5zZWFyY2gpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcGxveWVlcyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDMwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGNsb3NlKCkgewogICAgICAgICAgICB0aGlzLmRpYWxvZ20gPSBmYWxzZQogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZCgpewogICAgICAgIHRoaXMubG9hZEVtcGxveWVlKCkKICAgIH0KfQo="},{"version":3,"sources":["TimeCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeCard.vue","sourceRoot":"src/views/payroll/payroll_run","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"2\" class=\"pr-2 pt-4\">\n            <label class=\"label mt-3\">{{$t('for_the_month_of')}}</label>\n        </v-col>\n        <v-col sm=\"4\" class=\"pl-0\">\n            <v-menu\n                v-model=\"is_month\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                lazy\n                transition=\"scale-transition\"\n                offset-y\n                full-width>\n                <template v-slot:activator=\"{ on }\">\n                <v-text-field class=\"pt-0\"\n                    v-model=\"monthOf\"\n                    prepend-icon=\"event\"\n                    v-on=\"on\"/>\n                </template>\n                <v-date-picker\n                v-model=\"monthOf\"\n                type=\"month\"\n                no-title @input=\"is_month = false\">\n                </v-date-picker>\n            </v-menu>\n        </v-col>\n        <v-row>\n            <v-col sm=\"3\" cols=\"12\">\n                <p>Download file format for import</p>\n            </v-col>\n            <v-col sm=\"3\" cols=\"12\">\n                <v-btn color=\"secondary\" class=\" white--text float-right text-capitalize mr-5\" >\n                    {{$t('file_format')}}\n                </v-btn>\n            </v-col>\n            <v-col sm=\"3\" cols=\"12\">\n                <p>Or start importing if you are ready</p>\n            </v-col>\n            <v-col sm=\"3\" cols=\"12\">\n                <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                    <upload-excel-component :on-success=\"handleSuccess\" :before-upload=\"beforeUpload\" />\n                </v-col>\n            </v-col>\n        </v-row>\n        <v-row>\n            <v-col sm=\"12\" cols=\"12\">\n                <kendo-datasource ref=\"dataSource\"\n                    :data=\"tableData\"/>\n                <kendo-grid id=\"grid\" class=\"grid-function\"\n                    :data-source-ref=\"'dataSource'\"\n                    :editable=\"true\"\n                    :scrollable-virtual=\"true\">\n                    <kendo-grid-column\n                        :field=\"'date'\"\n                        :title=\"$t('date')\"\n                        :template=\"'<span>#= kendo.toString(new Date(date), dateFormat)#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'employeeId'\"\n                        :title=\"$t('employee_id')\"\n                        :template=\"'<span>#= employeeId#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'employeeName'\"\n                        :title=\"$t('employee_name')\"\n                        :template=\"'<span>#= employeeName#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'timeTable'\"\n                        :title=\"$t('time_table')\"\n                        :template=\"'<span>#= timeTable#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'clockedIn'\"\n                        :title=\"$t('clocked_in')\"\n                        :template=\"'<span>#= kendo.toString(new Date(clockedIn), timeFormat)#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'clockedOut'\"\n                        :title=\"$t('clocked_out')\"\n                        :template=\"'<span>#= kendo.toString(new Date(clockedOut), timeFormat)#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'overTimeWeekend'\"\n                        :title=\"$t('over_time_weekend')\"\n                        :template=\"'<span>#= overTimeWeekend#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'overTimeHoliday'\"\n                        :title=\"$t('over_time_holiday')\"\n                        :template=\"'<span>#= overTimeHoliday#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                    <kendo-grid-column\n                        :field=\"'work_time'\"\n                        :title=\"$t('work_time')\"\n                        :template=\"'<span>#= workTime#</span>'\"\n                        :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5'\n                        }\"/>\n                </kendo-grid>\n            </v-col>\n        </v-row>\n    </v-row>\n</template>\n<script>\nimport UploadExcelComponent from '@/components/upload_excel/Timesheet.vue';\nimport kendo from \"@progress/kendo-ui\";\nimport TimeCardLine from \"@/scripts/model/TimeCardLine\";\nimport EmployeeModel from '@/scripts/model/Employee'\nimport TimeCard from \"@/scripts/model/TimeCard\";\nconst timeCardLineModel = new TimeCardLine({})\nconst employeeModel = new EmployeeModel({})\nconst timeCardModel = new TimeCard({})\nconst employeeHandler = require(\"@/scripts/employeeHandler\")\nconst payrollHandler = require(\"@/scripts/payrollHandler\")\nexport default {\n    data: () =>({\n        journal_date: \"\",\n        dialogm: false,\n        tableData: [],\n        tableHeader: [],\n        dateFormat: timeCardLineModel.dateFormat,\n        timeFormat: timeCardLineModel.timeFormat,\n        employeeData: [],\n        is_month: false,\n        monthOf: '',\n        employee: employeeModel,\n        timeCard: timeCardModel,\n    }),\n    components: {\n        'upload-excel-component':UploadExcelComponent,\n    },\n    methods: {\n        beforeUpload(file) {\n            const isLt1M = file.size / 1024 / 1024 < 1\n            if (isLt1M) {\n                return true\n            }\n            this.$message({\n                message: 'Please do not upload files larger than 1m in size.',\n                type: 'warning'\n            })\n            return false\n        },\n        handleSuccess({ results, header }) {\n            results.forEach(element => {\n                var utc_days  = Math.floor(element.date - 25569);\n                var utc_value = utc_days * 86400;                                        \n                var date_info = new Date(utc_value * 1000);\n                var fractional_day = element.date - Math.floor(element.date) + 0.0000001;\n                var total_seconds = Math.floor(86400 * fractional_day);\n                var seconds = total_seconds % 60;\n                total_seconds -= seconds;\n                var hours = Math.floor(total_seconds / (60 * 60));\n                var minutes = Math.floor(total_seconds / 60) % 60;\n                var current_datetime =  new Date(date_info.getFullYear(), date_info.getMonth(), date_info.getDate(), hours, minutes, seconds);\n                element.date    = current_datetime\n                element.dateFormat = this.dateFormat\n\n\n                var utc_days_time_in  = Math.floor(element.clockedIn - 25569);\n                var utc_value_time_in = utc_days_time_in * 86400;                                        \n                var date_info_time_in = new Date(utc_value_time_in * 1000);\n                var fractional_time_in = element.clockedIn - Math.floor(element.clockedIn) + 0.0000001;\n                var total_seconds_time_in = Math.floor(86400 * fractional_time_in);\n                var seconds_time_in = total_seconds_time_in % 60;\n                total_seconds_time_in -= seconds_time_in;\n                var hours_time_in = Math.floor(total_seconds_time_in / (60 * 60));\n                var minutes_time_in = Math.floor(total_seconds_time_in / 60) % 60;\n                var current_time_in =  new Date(date_info_time_in.getFullYear(), date_info_time_in.getMonth(), date_info_time_in.getDate(), hours_time_in, minutes_time_in, seconds_time_in);\n                element.clockedIn    = current_time_in\n\n                var utc_days_time_out  = Math.floor(element.clockedOut - 25569);\n                var utc_value_time_out = utc_days_time_out * 86400;                                        \n                var date_info_time_out = new Date(utc_value_time_out * 1000);\n                var fractional_time_out = element.clockedOut - Math.floor(element.clockedOut) + 0.0000001;\n                var total_seconds_time_out = Math.floor(86400 * fractional_time_out);\n                var seconds_time_out = total_seconds_time_out % 60;\n                total_seconds_time_out -= seconds_time_out;\n                var hours_time_out = Math.floor(total_seconds_time_out / (60 * 60));\n                var minutes_time_out = Math.floor(total_seconds_time_out / 60) % 60;\n                var current_time_out =  new Date(date_info_time_out.getFullYear(), date_info_time_out.getMonth(), date_info_time_out.getDate(), hours_time_out, minutes_time_out, seconds_time_out);\n                element.clockedOut    = current_time_out\n                element.timeFormat  = this.timeFormat\n            });\n            this.tableData = results\n            this.tableHeader = header\n        },\n        nextStpes(){\n            this.autoCalculate()\n            this.groupBy()\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    let data = {\n                        \"id\":                       this.timeCard.id ? this.timeCard.id : '',\n                        \"monthOf\":                  this.monthOf,\n                        \"timeCardLine\":             this.timeCardLine,\n                        \"totalWork\":                this.totalWork,\n                        \"totalOverTimeWeekend\":     this.totalOverTimeWeekend,\n                        \"totalOverTimeHoliday\":     this.totalOverTimeHoliday\n                    };\n                    payrollHandler.createTimeCard(data).then(response => {\n                        if (response.data.statusCode === 201) {\n                            this.$snotify.success('Success')\n                            this.close()\n                        }\n                    }).catch(e => {\n                        this.$snotify.error('Something went wrong')\n                        this.errors.push(e)\n                    })\n                }, 300);\n            })\n        },\n        autoCalculate() {\n            let ds = this.$refs.dataSource.kendoWidget(),\n            // specificWorks = [],\n            totalWork = 0,\n            totalOverTimeWeekend = 0,\n            totalOverTimeHoliday = 0;\n            ds.data().forEach(value => {\n                totalWork += kendo.parseFloat(value.workTime)\n                totalOverTimeWeekend += kendo.parseFloat(value.overTimeWeekend)\n                totalOverTimeHoliday += kendo.parseFloat(value.overTimeHoliday)\n            })\n            this.totalWork              = totalWork\n            this.totalOverTimeWeekend   = totalOverTimeWeekend\n            this.totalOverTimeHoliday   = totalOverTimeHoliday\n        },\n        groupBy() {\n            let ds = this.$refs.dataSource.kendoWidget();\n            let helper = {};\n            let result = ds.data().reduce(function(r, o) {\n                let key = o.date + '-' + o.employeeId;\n                if(!helper[key]) {\n                    helper[key] = Object.assign({}, o); // create a copy of o\n                    r.push(helper[key]);\n                } else {\n                    helper[key].workTime += o.workTime;\n                    helper[key].workDay = 1;\n                }\n                return r;\n            }, []);\n            let lastResult = {}\n            let employees = this.employees\n            let last_result = result.reduce(function(m, n) {\n                let key = n.employeeId\n                if(!lastResult[key]) {\n                    lastResult[key] = Object.assign({}, n); // create a copy of o\n                    m.push(lastResult[key]);\n                } else {\n                    employees.forEach(function(em) {\n                        if(key == em.employeeId){\n                            lastResult[key].workTime += n.workTime;\n                            lastResult[key].workDay += n.workDay;\n                            lastResult[key].employeeUid  = em.id;\n                        }\n                    });\n                }\n                return m;\n            }, []);\n            this.timeCardLine = last_result;\n        },\n        async loadEmployee(){\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.employees = []\n                    employeeHandler.center(this.search).then(res => {\n                        this.showLoading = true\n                        if (res.data.statusCode === 200) {\n                            this.showLoading = false\n                            this.employees = res.data.data\n                        }\n                    }).catch()\n                    {\n                        this.showLoading = false\n                    }\n                }, 300)\n            })\n        },\n        close() {\n            this.dialogm = false\n        },\n    },\n    mounted(){\n        this.loadEmployee()\n    }\n}\n</script>\n<style scoped>\n    .grayBg{\n        background-color: #F8F8F9;\n    }\n    .my_table_darkv .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n        color: rgba(0, 0, 0, 0.6);\n        background: #222a35;\n        color: #fff !important;\n    }"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/suppliers/AdvanceSettlement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/suppliers/AdvanceSettlement.vue","mtime":1638499443334},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgSlF1ZXJ5IGZyb20gImpxdWVyeSI7CmltcG9ydCB7IGkxOG4gfSBmcm9tICJAL2kxOG4iOwppbXBvcnQgSGVscGVyIGZyb20gIkAvaGVscGVyLmpzIjsKaW1wb3J0IHsKCUFkdmFuY2VTZXR0bGVtZW50TW9kZWwsCglKb3VybmFsTW9kZWwsCglKb3VybmFsRW50cnlNb2RlbCwKCUFjY291bnRNb2RlbCwKCUVtcGxveWVlTW9kZWwsCglDYXNoQWR2YW5jZU1vZGVsLAoJQ3VycmVuY3lNb2RlbCwKCUNvbnRhY3RNb2RlbCwKfSBmcm9tICJAL3NjcmlwdHMvbW9kZWwvQXBwTW9kZWxzIjsKCi8qIFN0b3JlICovCmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKY29uc3QgaW5zdGl0dXRlID0gc3RvcmUuc3RhdGUuaW5zdGl0dXRlLmluc3RpdHV0ZTsKCmNvbnN0IHsKCWFkdmFuY2VTZXR0bGVtZW50SGFuZGxlciwKCWNhc2hBZHZhbmNlSGFuZGxlciwKfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9BcHBIYW5kbGVycyIpOwpjb25zdCBjbGVhcmluZ1RyYW5zYWN0aW9uSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL3dvcmtpbmdjYXBpdGFsL2NsZWFyaW5nVHJhbnNhY3Rpb25IYW5kbGVyLmpzIik7Cgpjb25zdCB7CglBY2NvdW50VHlwZUNvZGUsCglTYXZlT3B0aW9uLAoJRW50aXR5VHlwZSwKfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0NvbGxlY3Rpb25zIik7CgpleHBvcnQgZGVmYXVsdCB7CgluYW1lOiAiQWR2YW5jZVNldHRsZW1lbnQiLAoJY29tcG9uZW50czogewoJCUxvYWRpbmdNZTogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvTG9hZGluZyIpLAoJCSJhcHAtZGF0ZXBpY2tlciI6ICgpID0+CgkJCWltcG9ydCgiQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvRGF0ZVBpY2tlckNvbXBvbmVudCIpLAoJCSJhcHAtZW1wbG95ZWUtZHJvcGRvd25saXN0IjogKCkgPT4KCQkJaW1wb3J0KCJAL2NvbXBvbmVudHMvZHJvcGRvd25saXN0L0VtcGxveWVlIiksCgkJImFwcC1jYXNoLWFjY291bnQtZHJvcGRvd25saXN0IjogKCkgPT4KCQkJaW1wb3J0KCJAL2NvbXBvbmVudHMvZHJvcGRvd25saXN0L0Nhc2hBY2NvdW50IiksCgkJImFwcC1zZWNvbmRhcnktYWNjb3VudC1kcm9wZG93bmxpc3QiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9kcm9wZG93bmxpc3QvQWNjb3VudFNlY29uZGFyeScpLAoJfSwKCXByb3BzOiB7CgkJaW5pdEFkdmFuY2VTZXR0bGVtZW50OiB7CgkJCXR5cGU6IEFkdmFuY2VTZXR0bGVtZW50TW9kZWwsCgkJfSwKCQlpbml0Q2FzaEFkdmFuY2U6IHsKCQkJdHlwZTogQ2FzaEFkdmFuY2VNb2RlbCwKCQl9LAoJCWluaXRDbGVhcmluZ1RyYW5zYWN0aW9uczogewoJCQl0eXBlOiBBcnJheSwKCQl9LAoJfSwKCWRhdGE6ICgpID0+ICh7CgkJLy8gT2JqCgkJYWR2YW5jZVNldHRsZW1lbnQ6IG5ldyBBZHZhbmNlU2V0dGxlbWVudE1vZGVsKCksCgkJam91cm5hbDogbmV3IEpvdXJuYWxNb2RlbCgpLAoJCWpvdXJuYWxFbnRyaWVzOiBbXSwKCQllbXBsb3llZTogbmV3IEVtcGxveWVlTW9kZWwoKSwKCQljbGVhcmluZ1RyYW5zYWN0aW9uR3JvdXBpbmc6IFtdLAoJCWNsZWFyaW5nVHJhbnNhY3Rpb25zOiBbXSwKCQljYXNoQWR2YW5jZTogbmV3IENhc2hBZHZhbmNlTW9kZWwoKSwKCQljYXNoQWR2YW5jZXM6IFtdLAoJCS8vIE90aGVyCgkJYWR2YW5jZWRBbW91bnQ6IDAsCgkJYWR2YW5jZWRFeGNoYW5nZUFtb3VudDogMCwKCQlzZXR0bGVkQW1vdW50OiAwLAoJCXNob3dFeGNoYW5nZUFtb3VudDogZmFsc2UsCgkJc2hvd0Nhc2hBY2NvdW50OiB0cnVlLAoJCWZpbGVzOiBbXSwKCQl0ZW1wbGF0ZXM6IFtdLAoJCXVzZXI6IEhlbHBlci5nZXRVc2VyKCksCgkJLy8gRm9ybSB2YWxpZGF0aW9uCgkJdmFsaWQ6IHRydWUsCgkJaXNFZGl0OiBmYWxzZSwKCQlhbGVydDogZmFsc2UsCgkJZXJyb3JNZXNzYWdlOiAiIiwKCQlzYXZlTW9kZTogIiIsCgkJU2F2ZU9wdGlvbjogU2F2ZU9wdGlvbiwKCQkvLyBMb2FkaW5nTWUKCQlzaG93TG9hZGluZzogZmFsc2UsCgkJbG9hZGluZ0FsZXJ0OiBmYWxzZSwKCQlsb2FkaW5nQ29sb3JBbGVydDogIiIsCgkJbG9hZGluZ1RleHRBbGVydDogIiIsCgl9KSwKCW1ldGhvZHM6IHsKCQkvLyBJbml0aWFsIERhdGEKCQlpbml0aWFsRGF0YSgpIHsKCQkJaWYgKHRoaXMuaW5pdEFkdmFuY2VTZXR0bGVtZW50KSB7CgkJCQkvLyBFZGl0IE1vZGUKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluaXRBZHZhbmNlU2V0dGxlbWVudCk7CgoJCQkJdGhpcy5iaW5kRGF0YSgpOwoJCQl9IGVsc2UgewoJCQkJLy8gQnJhbmQgTmV3IE1vZGUKCQkJCXRoaXMuc2V0RGVmYXVsdERhdGEoKTsKCQkJfQoJCX0sCgkJLy8gU2V0IGRlZmF1bHQgZGF0YQoJCXNldERlZmF1bHREYXRhKCkgewoJCQkvLyBCcmFuZCBOZXcgTW9kZQoJCQl0aGlzLmlzRWRpdCA9IGZhbHNlOwoKCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudCA9IG5ldyBBZHZhbmNlU2V0dGxlbWVudE1vZGVsKHsKCQkJCXNldHRsZW1lbnRfZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCgkJCX0pOwoKCQkJLy8gR2VuZXJhdGUgTnVtYmVyCgkJCXRoaXMuZ2VuZXJhdGVOdW1iZXIoKTsKCQl9LAoJCS8vIEJpbmQgZGF0YSBmcm9tIHByb3AgZm9yIGVkaXQgbW9kZQoJCWFzeW5jIGJpbmREYXRhKCkgewoJCQkvLyBFZGl0IE1vZGUKCQkJdGhpcy5pc0VkaXQgPSB0cnVlOwoKCQkJLy8gRW1wbG95ZWUKCQkJdGhpcy5lbXBsb3llZSA9IG5ldyBFbXBsb3llZU1vZGVsKHRoaXMuYWR2YW5jZVNldHRsZW1lbnQuc2V0dGxlZF9ieSk7CgoJCQkvLyBDYXNoIEFkdmFuY2UKCQkJdGhpcy5jYXNoQWR2YW5jZSA9IG5ldyBDYXNoQWR2YW5jZU1vZGVsKHRoaXMuaW5pdENhc2hBZHZhbmNlKTsKCgkJCS8vIFNob3cvSGlkZSBleGNoYW5nZSBhbW91bnQKCQkJbGV0IGJhc2VDdXJyZW5jeSA9IG5ldyBDdXJyZW5jeU1vZGVsKGluc3RpdHV0ZS5iYXNlQ3VycmVuY3kpOwoJCQl0aGlzLnNob3dFeGNoYW5nZUFtb3VudCA9IEJvb2xlYW4oCgkJCQl0aGlzLmNhc2hBZHZhbmNlLmN1cnJlbmN5LmNvZGUgIT09IGJhc2VDdXJyZW5jeS5jb2RlCgkJCSk7CgoJCQkvLyBDbGVhcmluZyBUcmFuc2FjdGlvbnMKCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucyA9IHRoaXMuaW5pdENsZWFyaW5nVHJhbnNhY3Rpb25zOwoJCQl0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25Hcm91cGluZyA9IEhlbHBlci5ncm91cEV4cGVuc2VCeUNhc2hBZHZhbmNlKAoJCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucwoJCQkpOwoJCQl0aGlzLmF1dG9DYWxjdWxhdGUoKTsKCgkJCS8vSm91cm5hbAoJCQl0aGlzLmpvdXJuYWwgPSB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmpvdXJuYWw7CgkJCXRoaXMuam91cm5hbEVudHJpZXMgPSB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmpvdXJuYWxfZW50cmllczsKCQl9LAoJCS8vIE51bWJlcgoJCWFzeW5jIGdlbmVyYXRlTnVtYmVyKCkgewoJCQlpZiAoIXRoaXMuaXNFZGl0KSB7CgkJCQlsZXQgbnVtID0gYXdhaXQgSGVscGVyLmdlbmVyYXRlQWNjb3VudGluZ051bWJlcigKCQkJCQlFbnRpdHlUeXBlLkFEVkFOQ0VfU0VUVExFTUVOVCwKCQkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnNldHRsZW1lbnRfZGF0ZQoJCQkJKTsKCgkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50Lm51bWJlciA9IG51bS5udW1iZXI7CgkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnByZWZpeF9mb3JtYXQgPSBudW0ucHJlZml4X2Zvcm1hdDsKCQkJfQoJCX0sCgkJLy8gUm93IE51bWJlciBUZW1wbGF0ZQoJCXJvd051bWJlclRtcGwoZGF0YUl0ZW0pIHsKCQkJbGV0IGRzID0gdGhpcy4kcmVmcy5jbGVhcmluZ1RyYW5zYWN0aW9uRFMua2VuZG9XaWRnZXQoKSwKCQkJCWluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CgoJCQlyZXR1cm4gaW5kZXggKyAxOwoJCX0sCgkJLy8gTG9hZCBDYXNoIEFkdmFuY2UKCQlsb2FkQ2FzaEFkdmFuY2UoKSB7CgkJCWlmICghdGhpcy5pc0VkaXQpIHsKCQkJCXRoaXMuY2FzaEFkdmFuY2UgPSBuZXcgQ2FzaEFkdmFuY2VNb2RlbCgpOwoJCQkJdGhpcy5jYXNoQWR2YW5jZXMgPSBbXTsKCgkJCQlpZiAodGhpcy5lbXBsb3llZS5pZCAhPT0gIiIpIHsKCQkJCQlsZXQgY2FzaEFkdmFuY2VMaXN0ID0gW107CgoJCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwoJCQkJCWNhc2hBZHZhbmNlSGFuZGxlcgoJCQkJCQkuZ2V0QnlFbXBsb3llZUlkKHRoaXMuZW1wbG95ZWUuaWQpCgkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCWlmICghSlF1ZXJ5LmlzRW1wdHlPYmplY3QocmVzLmRhdGEpKSB7CgkJCQkJCQkJcmVzLmRhdGEuZm9yRWFjaCgodmFsdWUpID0+IHsKCQkJCQkJCQkJY2FzaEFkdmFuY2VMaXN0LnB1c2gobmV3IENhc2hBZHZhbmNlTW9kZWwodmFsdWUpKTsKCQkJCQkJCQl9KTsKCgkJCQkJCQkJdGhpcy5jYXNoQWR2YW5jZXMgPSBjYXNoQWR2YW5jZUxpc3Q7CgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJCS5maW5hbGx5KCgpID0+IHsKCQkJCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJCQkJfSk7CgkJCQl9CgkJCX0KCQl9LAoJCS8vIE9uIENhc2ggQWR2YW5jZSBDaGFuZ2VzCgkJb25DYXNoQWR2YW5jZUNoYW5nZXMoKSB7CgkJCXRoaXMuY2xlYXJpbmdUcmFuc2FjdGlvbkdyb3VwaW5nID0gW107CgkJCXRoaXMuY2xlYXJpbmdUcmFuc2FjdGlvbnMgPSBbXTsKCQkJdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CgoJCQlpZiAodGhpcy5jYXNoQWR2YW5jZS51dWlkICE9PSAiIikgewoJCQkJLy8gU2hvdy9IaWRlIGV4Y2hhbmdlIGFtb3VudAoJCQkJbGV0IGJhc2VDdXJyZW5jeSA9IG5ldyBDdXJyZW5jeU1vZGVsKGluc3RpdHV0ZS5iYXNlQ3VycmVuY3kpOwoJCQkJdGhpcy5zaG93RXhjaGFuZ2VBbW91bnQgPSBCb29sZWFuKAoJCQkJCXRoaXMuY2FzaEFkdmFuY2UuY3VycmVuY3kuY29kZSAhPT0gYmFzZUN1cnJlbmN5LmNvZGUKCQkJCSk7CgoJCQkJLy8gTG9hZCBSZWxhdGVkIEV4cGVuc2VzCgkJCQl0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKCQkJCWNsZWFyaW5nVHJhbnNhY3Rpb25IYW5kbGVyCgkJCQkJLmdldEJ5Q2FzaEFkdmFuY2VJZCh0aGlzLmNhc2hBZHZhbmNlLnV1aWQpCgkJCQkJLnRoZW4oKHJlcykgPT4gewoJCQkJCQlpZiAodHlwZW9mIHJlcy5kYXRhID09PSAib2JqZWN0IikgewoJCQkJCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucyA9IHJlcy5kYXRhOwoJCQkJCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9uR3JvdXBpbmcgPSBIZWxwZXIuZ3JvdXBFeHBlbnNlQnlDYXNoQWR2YW5jZSgKCQkJCQkJCQlyZXMuZGF0YQoJCQkJCQkJKTsKCQkJCQkJCXRoaXMuYXV0b0NhbGN1bGF0ZSgpOwoJCQkJCQl9CgkJCQkJfSkKCQkJCQkuZmluYWxseSgoKSA9PiB7CgkJCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCQkJCQl9KTsKCQkJfQoJCX0sCgkJLy8gQXV0byBDYWxjdWxhdGUKCQlhdXRvQ2FsY3VsYXRlKCkgewoJCQkvLyBDYXNoIEFkdmFuY2UgQW1vdW50CgkJCXRoaXMuYWR2YW5jZWRBbW91bnQgPSAwOwoJCQl0aGlzLmFkdmFuY2VkRXhjaGFuZ2VBbW91bnQgPSAwOwoJCQl0aGlzLmNhc2hBZHZhbmNlLmRldGFpbHMuZm9yRWFjaCgodmFsdWUpID0+IHsKCQkJCWlmICh2YWx1ZS5hbW91bnQgPiAwKSB7CgkJCQkJdGhpcy5hZHZhbmNlZEFtb3VudCArPSB2YWx1ZS5hbW91bnQ7CgkJCQkJdGhpcy5hZHZhbmNlZEV4Y2hhbmdlQW1vdW50ICs9IHZhbHVlLmV4Y2hhbmdlZF9hbW91bnQ7CgkJCQl9CgkJCX0pOwoKCQkJLy8gVHJhbnNhY3Rpb24gQW1vdW50CgkJCXRoaXMuc2V0dGxlZEFtb3VudCA9IDA7CgkJCXRoaXMuY2xlYXJpbmdUcmFuc2FjdGlvbkdyb3VwaW5nLmZvckVhY2goKHZhbHVlKSA9PiB7CgkJCQl0aGlzLnNldHRsZWRBbW91bnQgKz0gdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudDsKCQkJfSk7CgoJCQl0aGlzLnNob3dDYXNoQWNjb3VudCA9IEJvb2xlYW4oCgkJCQl0aGlzLmFkdmFuY2VkRXhjaGFuZ2VBbW91bnQgLSB0aGlzLnNldHRsZWRBbW91bnQgIT09IDAKCQkJKTsKCQl9LAoJCS8vIFNocmluayBEYXRhCgkJc2hyaW5rRGF0YSgpIHsKCQkJLy8gU2V0dGxlbWVudCBEYXRlCgkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuc2V0dGxlbWVudF9kYXRlID0gSGVscGVyLnRvSVNPRGF0ZSgKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuc2V0dGxlbWVudF9kYXRlCgkJCSk7CgoJCQkvLyBFbXBsb3llZQoJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnNldHRsZWRfYnkgPSBuZXcgQ29udGFjdE1vZGVsKHRoaXMuZW1wbG95ZWUpOwoKCQkJLy8gQ2FzaCBBZHZhbmNlCgkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY2FzaF9hZHZhbmNlX3V1aWQgPSB0aGlzLmNhc2hBZHZhbmNlLnV1aWQ7CgoJCQkvLyBDYXNoIEFtb3VudAoJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmNhc2hfYW1vdW50ID0gdGhpcy5yZW1haW5pbmc7CgoJCQkvLyBVcGRhdGUgQ2FzaCBBZHZhbmNlCgkJCXRoaXMuY2FzaEFkdmFuY2UuaXNfc2V0dGxlZCA9IDE7CgkJCXRoaXMuY2FzaEFkdmFuY2Uuc2V0dGxlZF9kYXRlID0gSGVscGVyLnRvSVNPRGF0ZSgKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuc2V0dGxlbWVudF9kYXRlCgkJCSk7CgoJCQkvLyBVc2VyCgkJCWlmICh0aGlzLmlzRWRpdCkgewoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5tb2RpZmllZF9ieSA9IHRoaXMudXNlcjsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY3JlYXRlZF9ieSA9IHRoaXMudXNlcjsKCQkJfQoJCX0sCgkJLy8gQWRkIEpvdXJuYWwKCQlhZGRKb3VybmFsKCkgewoJCQlpZiAoIXRoaXMuaXNFZGl0KSB7CgkJCQkvLyBOZXcgTW9kZQoJCQkJbGV0IGVudHJpZXMgPSBbXTsKCgkJCQkvLyBBZHZhbmNlIFNldHRsZW1lbnQgQ2xlYXJpbmcgQWNjb3VudCAoRnJvbSBFeHBlbnNlKSBvbiBEcgoJCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJCWlmICgKCQkJCQkJdmFsdWUuYWNjb3VudC5udW1iZXIgPT09CgkJCQkJCUFjY291bnRUeXBlQ29kZS5BRFZBTkNFX1NFVFRMRU1FTlRfQ0xFQVJJTkdfQ09ERQoJCQkJCSkgewoJCQkJCQllbnRyaWVzLnB1c2goCgkJCQkJCQluZXcgSm91cm5hbEVudHJ5TW9kZWwoewoJCQkJCQkJCWFjY291bnQ6IG5ldyBBY2NvdW50TW9kZWwodmFsdWUuYWNjb3VudCksCgkJCQkJCQkJYWNjb3VudF91dWlkOiB2YWx1ZS5hY2NvdW50LnV1aWQsCgkJCQkJCQkJcHJpbWFyeV9jb250YWN0OiBuZXcgQ29udGFjdE1vZGVsKHRoaXMuZW1wbG95ZWUpLAoJCQkJCQkJCWRlc2NyaXB0aW9uOiB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmRlc2NyaXB0aW9uLAoJCQkJCQkJCWN1cnJlbmN5OiBpbnN0aXR1dGUuYmFzZUN1cnJlbmN5LAoJCQkJCQkJCWFtb3VudDogdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xLAoJCQkJCQkJCWV4Y2hhbmdlX3JhdGU6IDEsCgkJCQkJCQl9KQoJCQkJCQkpOwoJCQkJCX0KCQkJCX0pOwoKCQkJCS8vIENhc2ggQWNjb3VudAoJCQkJaWYgKHRoaXMucmVtYWluaW5nICE9PSAwKSB7CgkJCQkJZW50cmllcy5wdXNoKAoJCQkJCQluZXcgSm91cm5hbEVudHJ5TW9kZWwoewoJCQkJCQkJYWNjb3VudDogbmV3IEFjY291bnRNb2RlbCh0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmNhc2hfYWNjb3VudCksCgkJCQkJCQlhY2NvdW50X3V1aWQ6IHRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY2FzaF9hY2NvdW50LnV1aWQsCgkJCQkJCQlwcmltYXJ5X2NvbnRhY3Q6IG5ldyBDb250YWN0TW9kZWwodGhpcy5lbXBsb3llZSksCgkJCQkJCQlkZXNjcmlwdGlvbjogdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5kZXNjcmlwdGlvbiwKCQkJCQkJCWN1cnJlbmN5OiBpbnN0aXR1dGUuYmFzZUN1cnJlbmN5LAoJCQkJCQkJYW1vdW50OiB0aGlzLnJlbWFpbmluZywKCQkJCQkJCWV4Y2hhbmdlX3JhdGU6IDEsCgkJCQkJCX0pCgkJCQkJKTsKCQkJCX0KCgkJCQkvLyBDYXNoIEFkdmFuY2Ugb24gQ3IKCQkJCXRoaXMuY2FzaEFkdmFuY2UuZGV0YWlscy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJCWlmICgKCQkJCQkJdmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUuY29kZSA9PT0gQWNjb3VudFR5cGVDb2RlLkNBU0hfQURWQU5DRQoJCQkJCSkgewoJCQkJCQllbnRyaWVzLnB1c2goCgkJCQkJCQluZXcgSm91cm5hbEVudHJ5TW9kZWwoewoJCQkJCQkJCWFjY291bnQ6IG5ldyBBY2NvdW50TW9kZWwodmFsdWUuYWNjb3VudCksCgkJCQkJCQkJYWNjb3VudF91dWlkOiB2YWx1ZS5hY2NvdW50LnV1aWQsCgkJCQkJCQkJcHJpbWFyeV9jb250YWN0OiBuZXcgQ29udGFjdE1vZGVsKHRoaXMuZW1wbG95ZWUpLAoJCQkJCQkJCWRlc2NyaXB0aW9uOiB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmRlc2NyaXB0aW9uLAoJCQkJCQkJCWN1cnJlbmN5OiBpbnN0aXR1dGUuYmFzZUN1cnJlbmN5LAoJCQkJCQkJCWFtb3VudDogdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xLCAvLyBDciBzaWRlIGlzIG5lZ2F0aXZlCgkJCQkJCQkJZXhjaGFuZ2VfcmF0ZTogMSwKCQkJCQkJCX0pCgkJCQkJCSk7CgkJCQkJfQoJCQkJfSk7CgoJCQkJLy8gSm91cm5hbCBFbnRyaWVzCgkJCQl0aGlzLmpvdXJuYWxFbnRyaWVzID0gZW50cmllczsKCQkJfSBlbHNlIHsKCQkJCS8vIEVkaXQgTW9kZQoJCQkJdGhpcy5qb3VybmFsRW50cmllcy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJCWlmICgKCQkJCQkJfkFjY291bnRUeXBlQ29kZS5DQVNIX0FDQ09VTlRTLmluZGV4T2YoCgkJCQkJCQl2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5jb2RlCgkJCQkJCSkKCQkJCQkpIHsKCQkJCQkJdmFsdWUuYWNjb3VudCA9IG5ldyBBY2NvdW50TW9kZWwoCgkJCQkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmNhc2hfYWNjb3VudAoJCQkJCQkpOwoJCQkJCX0KCQkJCX0pOwoJCQl9CgoJCQkvLyBKb3VybmFsCgkJCXRoaXMuam91cm5hbC5udW1iZXIgPSB0aGlzLmFkdmFuY2VTZXR0bGVtZW50Lm51bWJlcjsKCQkJdGhpcy5qb3VybmFsLmRlc2NyaXB0aW9uID0gdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5kZXNjcmlwdGlvbjsKCQkJdGhpcy5qb3VybmFsLmpvdXJuYWxfZGF0ZSA9IEhlbHBlci50b0lTT0RhdGUoCgkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnNldHRsZW1lbnRfZGF0ZQoJCQkpOwoJCQl0aGlzLmpvdXJuYWwuam91cm5hbF90eXBlID0gRW50aXR5VHlwZS5BVVRPX0pPVVJOQUw7CgkJCXRoaXMuam91cm5hbC50cmFuc2FjdGlvbl90eXBlID0gRW50aXR5VHlwZS5BRFZBTkNFX1NFVFRMRU1FTlQ7CgkJCXRoaXMuam91cm5hbC5wcmVmaXhfZm9ybWF0ID0gdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5wcmVmaXhfZm9ybWF0OwoJCQl0aGlzLmpvdXJuYWwucHJvamVjdF91dWlkID0gdGhpcy5jYXNoQWR2YW5jZS5wcm9qZWN0X3V1aWQ7CgkJCXRoaXMuam91cm5hbC5zZWdtZW50X3V1aWQgPSB0aGlzLmNhc2hBZHZhbmNlLnNlZ21lbnRfdXVpZDsKCQkJdGhpcy5qb3VybmFsLmlzX2RyYWZ0ID0gdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5pc19kcmFmdDsKCQkJdGhpcy5qb3VybmFsLmNyZWF0ZWRfYnkgPSB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmNyZWF0ZWRfYnk7CgkJCXRoaXMuam91cm5hbC5tb2RpZmllZF9ieSA9IHRoaXMuYWR2YW5jZVNldHRsZW1lbnQubW9kaWZpZWRfYnk7CgkJfSwKCQkvLyBWYWxpZGF0aW5nCgkJdmFsaWRhdGVGb3JtKCkgewoJCQlsZXQgcmVzdWx0ID0gdHJ1ZSwKCQkJCW1zZyA9ICIiOwoKCQkJLy8gRW1wbG95ZWUKCQkJaWYgKHRoaXMuZW1wbG95ZWUuaWQgPT09ICIiKSB7CgkJCQltc2cgKz0gYDxwPiR7aTE4bi50KCJlbXBsb3llZV9pc19yZXF1aXJlZCIpfTwvcD5gOwoJCQkJcmVzdWx0ID0gZmFsc2U7CgkJCX0KCgkJCS8vIENhc2ggQWR2YW5jZQoJCQlpZiAodGhpcy5jYXNoQWR2YW5jZS51dWlkID09PSAiIikgewoJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgicGxlYXNlX3NlbGVjdF9jYXNoX2FkdmFuY2UiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvLyBDYXNoIEFjY291bnQKCQkJaWYgKAoJCQkJdGhpcy5yZW1haW5pbmcgIT09IDAgJiYKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY2FzaF9hY2NvdW50Lm5hbWUgPT09ICIiCgkJCSkgewoJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgicGxlYXNlX3NlbGVjdF9jYXNoX2FjY291bnQiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvLyBTaG93IEFsZXJ0CgkJCXRoaXMuZXJyb3JNZXNzYWdlID0gbXNnOwoJCQl0aGlzLmFsZXJ0ID0gZmFsc2U7CgkJCWlmIChyZXN1bHQgPT09IGZhbHNlKSB7CgkJCQl0aGlzLmFsZXJ0ID0gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIHJlc3VsdDsKCQl9LAoJCS8vIEFsbCBTYXZlcwoJCWFzeW5jIG9uU2F2ZU9wdGlvbkNsaWNrKG1vZGUpIHsKCQkJaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpICYmIHRoaXMudmFsaWRhdGVGb3JtKCkpIHsKCQkJCWxldCBpc1ZhbGlkQ2xvc2luZ0RhdGUgPSBhd2FpdCBIZWxwZXIudmFsaWRhdGVDbG9zaW5nRGF0ZSgKCQkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnNldHRsZW1lbnRfZGF0ZQoJCQkJKTsKCQkJCWlmIChpc1ZhbGlkQ2xvc2luZ0RhdGUpIHsKCQkJCQl0aGlzLnNhdmVNb2RlID0gbW9kZTsKCQkJCQl0aGlzLnNhdmUoKTsKCQkJCX0KCQkJfQoJCX0sCgkJY2FuY2VsKCkgewoJCQl0aGlzLiRzd2FsKHsKCQkJCXRpdGxlOiBpMThuLnQoIm1zZ190aXRsZV93YXJuaW5nIiksCgkJCQl0ZXh0OiBpMThuLnQoIm1zZ19kaXNjYXJkIiksCgkJCQlpY29uOiAid2FybmluZyIsCgkJCQlzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAoJCQkJY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCJjYW5jZWwiKSwKCQkJCWNvbmZpcm1CdXR0b25Db2xvcjogIiM0ZDQ4NDgiLAoJCQkJY2FuY2VsQnV0dG9uQ29sb3I6ICIjRUQxQTNBIiwKCQkJCWNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoImRpc2NhcmQiKSwKCQkJfSkudGhlbigocmVzdWx0KSA9PiB7CgkJCQlpZiAocmVzdWx0LnZhbHVlKSB7CgkJCQkJdGhpcy5jbGVhcigpOwoJCQkJCXRoaXMuc2V0RGVmYXVsdERhdGEoKTsKCQkJCQl0aGlzLiRyb3V0ZXIuZ28oLTEpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCWNsZWFyKCkgewoJCQl0aGlzLmlzRWRpdCA9IGZhbHNlOwoJCQl0aGlzLnNhdmVNb2RlID0gIiI7CgoJCQl0aGlzLmFkdmFuY2VkQW1vdW50ID0gMDsKCQkJdGhpcy5hZHZhbmNlZEV4Y2hhbmdlQW1vdW50ID0gMDsKCQkJdGhpcy5zZXR0bGVkQW1vdW50ID0gMDsKCQkJdGhpcy5zaG93RXhjaGFuZ2VBbW91bnQgPSBmYWxzZTsKCQkJdGhpcy5zaG93Q2FzaEFjY291bnQgPSB0cnVlOwoKCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudCA9IG5ldyBBZHZhbmNlU2V0dGxlbWVudE1vZGVsKCk7CgkJCXRoaXMuam91cm5hbCA9IG5ldyBKb3VybmFsTW9kZWwoKTsKCQkJdGhpcy5qb3VybmFsRW50cmllcyA9IFtdOwoJCQl0aGlzLmVtcGxveWVlID0gbmV3IEVtcGxveWVlTW9kZWwoKTsKCQkJdGhpcy5jYXNoQWR2YW5jZSA9IG5ldyBDYXNoQWR2YW5jZU1vZGVsKCk7CgkJCXRoaXMuY2FzaEFkdmFuY2VzID0gW107CgkJCXRoaXMuY2xlYXJpbmdUcmFuc2FjdGlvbnMgPSBbXTsKCgkJCS8vIERhdGFzb3VyZQoJCQlsZXQgZHMgPSB0aGlzLiRyZWZzLmNsZWFyaW5nVHJhbnNhY3Rpb25EUy5rZW5kb1dpZGdldCgpOwoJCQlkcy5kYXRhKFtdKTsKCQl9LAoJCWNvbmZpcm1EZWxldGUoKSB7CgkJCXRoaXMuJHN3YWwoewoJCQkJdGl0bGU6IGkxOG4udCgiYXJlX3lvdV9zdXJlX3lvdV93YW50X3RvX2RlbGV0ZV9pdCIpLAoJCQkJdGV4dDogaTE4bi50KCJ5b3Vfd29udF9iZV9hYmxlX3RvX3JldmVydF90aGlzIiksCgkJCQlpY29uOiAid2FybmluZyIsCgkJCQlzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAoJCQkJY29uZmlybUJ1dHRvbkNvbG9yOiAiIzRkNDg0OCIsCgkJCQljYW5jZWxCdXR0b25Db2xvcjogIiNFRDFBM0EiLAoJCQkJY29uZmlybUJ1dHRvblRleHQ6ICJZZXMiLAoJCQl9KS50aGVuKChyZXN1bHQpID0+IHsKCQkJCWlmIChyZXN1bHQudmFsdWUpIHsKCQkJCQl0aGlzLnNhdmVNb2RlID0gU2F2ZU9wdGlvbi5ERUxFVEU7CgoJCQkJCS8qIE1hcmsgYXMgZGVsZXRlZCAqLwoJCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuaXNfZGVsZXRlZCA9IDE7CgoJCQkJCS8qIFVwZGF0ZSBBY2NvdW50ICovCgkJCQkJdGhpcy5zYXZlKCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJc2F2ZSgpIHsKCQkJbGV0IHNlbGYgPSB0aGlzOwoKCQkJLy8gRHJhZnQgTW9kZQoJCQlpZiAodGhpcy5zYXZlTW9kZSA9PT0gU2F2ZU9wdGlvbi5TQVZFRFJBRlQpIHsKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuaXNfZHJhZnQgPSAxOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5pc19kcmFmdCA9IDA7CgkJCX0KCgkJCS8vIFNocmluayBEYXRhCgkJCXRoaXMuc2hyaW5rRGF0YSgpOwoKCQkJLy8gQWRkIEpvdXJuYWwKCQkJdGhpcy5hZGRKb3VybmFsKCk7CgoJCQkvLyBTeW5jIERhdGEKCQkJdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CgkJCWFkdmFuY2VTZXR0bGVtZW50SGFuZGxlcgoJCQkJLnNhdmUoewoJCQkJCWFkdmFuY2Vfc2V0dGxlbWVudDogbmV3IEFkdmFuY2VTZXR0bGVtZW50TW9kZWwoCgkJCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQKCQkJCQkpLAoJCQkJCWNhc2hfYWR2YW5jZTogbmV3IENhc2hBZHZhbmNlTW9kZWwodGhpcy5jYXNoQWR2YW5jZSksCgkJCQkJZXhwZW5zZTogdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucywKCQkJCQlqb3VybmFsOiBuZXcgSm91cm5hbE1vZGVsKHRoaXMuam91cm5hbCksCgkJCQkJam91cm5hbF9lbnRyaWVzOiB0aGlzLmpvdXJuYWxFbnRyaWVzLAoJCQkJfSkKCQkJCS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCWlmIChyZXNwb25zZSkgewoJCQkJCQlzZWxmLnJlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKTsKCQkJCQl9CgkJCQl9KQoJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCUhlbHBlci5hbGVydEVycm9yTXNnKGVycm9yKTsKCQkJCX0pCgkJCQkuZmluYWxseSgoKSA9PiB7CgkJCQkJc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJfSk7CgkJfSwKCQkvLyBSZXNwb25zZSBTdGF0dXMKCQlyZXNwb25zZVN0YXR1cyhyZXNwb25zZSkgewoJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKCQkJCWlmICgKCQkJCQl0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLlNBVkVDTE9TRSB8fAoJCQkJCXRoaXMuc2F2ZU1vZGUgPT09IFNhdmVPcHRpb24uREVMRVRFCgkJCQkpIHsKCQkJCQkvKiBTYXZlIENsb3NlIG9yIERlbGV0ZSAqLwoJCQkJCWlmICh0aGlzLmlzRWRpdCkgewoJCQkJCQl0aGlzLmdvQmFja1RvVmlld1BhZ2UoKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aGlzLiRyb3V0ZXIuZ28oLTEpOwoJCQkJCX0KCgkJCQkJdGhpcy5jbGVhcigpOwoJCQkJCXRoaXMuc2V0RGVmYXVsdERhdGEoKTsKCQkJCX0gZWxzZSB7CgkJCQkJLyogU2F2ZSBOZXcgKi8KCQkJCQl0aGlzLmNsZWFyKCk7CgkJCQkJdGhpcy5zZXREZWZhdWx0RGF0YSgpOwoJCQkJfQoKCQkJCS8qIEFsZXJ0IFN1Y2Nlc3MgKi8KCQkJCXRoaXMuJHNub3RpZnkuc3VjY2VzcyhpMThuLnQoInN1Y2Nlc3NmdWwiKSk7CgkJCX0gZWxzZSB7CgkJCQkvKiBBbGVydCBFcnJvciAqLwoJCQkJdGhpcy4kc25vdGlmeS5lcnJvcihpMThuLnQoImVycm9yX3NvbWV0aGluZ193cm9uZyIpKTsKCQkJfQoJCX0sCgkJLy8gR28gYmFjayB0byB2aWV3IHBhZ2UgYWZ0ZXIgZWRpdCBtb2RlCgkJZ29CYWNrVG9WaWV3UGFnZSgpIHsKCQkJdGhpcy4kcm91dGVyLnJlcGxhY2UoewoJCQkJbmFtZTogIkFkdmFuY2UgU2V0dGxlbWVudCBWaWV3IiwKCQkJCXBhcmFtczogeyBpbml0QWR2YW5jZVNldHRsZW1lbnQ6IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYWR2YW5jZVNldHRsZW1lbnQpIH0sCgkJCX0pOwoJCX0sCgl9LAoJY29tcHV0ZWQ6IHsKCQlyZW1haW5pbmcoKSB7CgkJCXJldHVybiB0aGlzLmFkdmFuY2VkRXhjaGFuZ2VBbW91bnQgLSB0aGlzLnNldHRsZWRBbW91bnQ7CgkJfSwKCQlzZWNvbmRhcnlBY2NvdW50KCl7CgkJCXJldHVybiBzdG9yZS5zdGF0ZS5hY2NvdW50aW5nLnNlY29uZGFyeUFjY291bnQKCQl9Cgl9LAoJd2F0Y2g6IHsKCQlpbml0QWR2YW5jZVNldHRsZW1lbnQoKSB7CgkJCXRoaXMuaW5pdGlhbERhdGEoKTsKCQl9LAoJfSwKCW1vdW50ZWQoKSB7CgkJLy8gSW5pdGlhbCBEYXRhCgkJdGhpcy5pbml0aWFsRGF0YSgpOwoJfSwKfTsK"},{"version":3,"sources":["AdvanceSettlement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdvanceSettlement.vue","sourceRoot":"src/views/suppliers","sourcesContent":["<template>\n\t<v-app>\n\t\t<v-container>\n\t\t\t<v-row>\n\t\t\t\t<v-col cols=\"12\" sm=\"12\">\n\t\t\t\t\t<v-card\n\t\t\t\t\t\toutlined\n\t\t\t\t\t\tdense\n\t\t\t\t\t\tclass=\"pa-4 no_border rounded-sm\"\n\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n\t\t\t\t\t\t\t<v-card outlined dense class=\"no_border\">\n\t\t\t\t\t\t\t\t<h2 class=\"mb-0\">{{ $t(\"advance_settlement\") }}</h2>\n\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\tonclick=\"window.history.go(-1); return false;\"\n\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer; color: #333; font-size: 40px;\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right\"\n\t\t\t\t\t\t\t\t\t>close\n\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t<v-card outlined dense class=\"px-3 no_border mb-3\" color=\"grayBg\">\n\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- New Mode -->\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"employee\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<app-employee-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t:initEmployee=\"employee\"\n\t\t\t\t\t\t\t\t\t\t\t\t@emitEmployee=\"employee = $event\"\n\t\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"loadCashAdvance\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"advance_number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-select\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"employee.id === ''\"\n\t\t\t\t\t\t\t\t\t\t\t\t:items=\"cashAdvances\"\n\t\t\t\t\t\t\t\t\t\t\t\titem-value=\"uuid\"\n\t\t\t\t\t\t\t\t\t\t\t\titem-text=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"cashAdvance\"\n\t\t\t\t\t\t\t\t\t\t\t\t@change=\"onCashAdvanceChanges\"\n\t\t\t\t\t\t\t\t\t\t\t\tno-data-text=\"No data found.\"\n\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"[(v) => !!v || 'Cash Advance is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select Cash Advance\"\n\t\t\t\t\t\t\t\t\t\t\t\treturn-object\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t\t\t<!-- Edit Mode -->\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"employee\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.settled_by.name\"\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"advance_number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"cashAdvance.number\"\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"date\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<app-datepicker\n\t\t\t\t\t\t\t\t\t\t\t:initialDate=\"advanceSettlement.settlement_date\"\n\t\t\t\t\t\t\t\t\t\t\t@emitDate=\"advanceSettlement.settlement_date = $event\"\n\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"generateNumber\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"10\" cols=\"10\" class=\"pb-0 pt-1 pr-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\ttage=\"Number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"[(v) => !!v || 'Number is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"2\" cols=\"2\" class=\"pb-0 pt-1 pl-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"30\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"border_qrcode\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"generateNumber\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tmdi-qrcode\n\t\t\t\t\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"description\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-textarea\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\tno-resize\n\t\t\t\t\t\t\t\t\t\t\theight=\"120px\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.description\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('transaction_purpose')\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t</v-card>\n\n\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"pb-3 pa-3\">\n\t\t\t\t\t\t\t\t\t<p>{{ $t(\"purchase_transactions\") }}</p>\n\n\t\t\t\t\t\t\t\t\t<kendo-datasource\n\t\t\t\t\t\t\t\t\t\tref=\"clearingTransactionDS\"\n\t\t\t\t\t\t\t\t\t\t:data=\"clearingTransactionGrouping\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<kendo-grid\n\t\t\t\t\t\t\t\t\t\tid=\"clearingTransactionGrid\"\n\t\t\t\t\t\t\t\t\t\tref=\"clearingTransactionGrid\"\n\t\t\t\t\t\t\t\t\t\tclass=\"grid-function\"\n\t\t\t\t\t\t\t\t\t\t:data-source-ref=\"'clearingTransactionDS'\"\n\t\t\t\t\t\t\t\t\t\t:sortable=\"true\"\n\t\t\t\t\t\t\t\t\t\t:filterable=\"true\"\n\t\t\t\t\t\t\t\t\t\t:noRecords=\"true\"\n\t\t\t\t\t\t\t\t\t\t:column-menu=\"true\"\n\t\t\t\t\t\t\t\t\t\t:scrollable-virtual=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('no.')\"\n\t\t\t\t\t\t\t\t\t\t\t:template=\"rowNumberTmpl\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"40\"\n\t\t\t\t\t\t\t\t\t\t\t:column-menu=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t\tclass: 'text-products;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: products',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'number'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('number')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'name'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('supplier')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'amount'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('amount')\"\n\t\t\t\t\t\t\t\t\t\t\t:format=\"'{0:n}'\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'currency'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('currency')\"\n\t\t\t\t\t\t\t\t\t\t\t:template=\"'#=currency.code#'\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'exchanged_amount'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('exchanged_amount')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</kendo-grid>\n\n\t\t\t\t\t\t\t\t\t<v-row style=\"background-color: #fff;\">\n\t\t\t\t\t\t\t\t\t\t<v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-file-input\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-0 pt-0 \"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsm=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcols=\"6\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('attachment')\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\t\tprepend-icon=\"mdi-paperclip\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-slot:selection=\"{ text }\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-chip small label color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ text }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-chip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-file-input>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t<v-col sm=\"7\" cols=\"12\" class=\"py-0 pr-0\">\n\t\t\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3 pb-3 no_border\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"grayBg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-simple-table class=\"cash-balance\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"advance_amount\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(advancedAmount).toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ cashAdvance.currency.code }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"showExchangeAmount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"advance_in_exchanged_amount\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvancedExchangeAmount\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"settled_amount\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ Number(settledAmount).toLocaleString() }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"showCashAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"cash_account\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"hide_form_alert\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-cash-account-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initAccount=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvanceSettlement.cash_account\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitAccount=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvanceSettlement.cash_account = $event\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"secondaryAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"secondary_account\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"hide_form_alert\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-secondary-account-dropdownlist/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{{ $t(\"remaining\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ Number(remaining).toLocaleString() }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-simple-table>\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t</v-row>\n\n\t\t\t\t\t\t\t<v-divider class=\"mt-3\" />\n\t\t\t\t\t\t\t<v-card outlined dense class=\"no_border function_footer\">\n\t\t\t\t\t\t\t\t<!-- Warning Message -->\n\t\t\t\t\t\t\t\t<v-alert type=\"warning\" v-model=\"alert\" dismissible>\n\t\t\t\t\t\t\t\t\t<span v-html=\"errorMessage\" />\n\t\t\t\t\t\t\t\t</v-alert>\n\n\t\t\t\t\t\t\t\t<v-menu>\n\t\t\t\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mr-2 text-capitalize  black--text float-left\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"select_template\") }}\n\t\t\t\t\t\t\t\t\t\t\t<v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<v-list>\n\t\t\t\t\t\t\t\t\t\t<v-list-item\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in templates\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>{{ item.title }}</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t</v-list>\n\t\t\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text float-left\"\n\t\t\t\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $t(\"cancel\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclass=\"ml-2 text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\t\t\t@click=\"confirmDelete\"\n\t\t\t\t\t\t\t\t\t>{{ $t(\"delete\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-menu>\n\t\t\t\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-2 float-right text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"save_option\") }}\n\t\t\t\t\t\t\t\t\t\t\t<v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<v-list rounded>\n\t\t\t\t\t\t\t\t\t\t<v-list-item-group>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVENEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_new\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVEPRINT)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_print\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVEDRAFT)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_draft\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t</v-list-item-group>\n\t\t\t\t\t\t\t\t\t</v-list>\n\t\t\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right  text-capitalize white--text\"\n\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n\t\t\t\t\t\t\t\t\t>{{ $t(\"save_close\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t</v-form>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-col>\n\t\t\t</v-row>\n\t\t\t<LoadingMe\n\t\t\t\t:isLoading=\"showLoading\"\n\t\t\t\t:fullPage=\"false\"\n\t\t\t\t:myLoading=\"true\"\n\t\t\t\t:alertMessage=\"loadingAlert\"\n\t\t\t\t:color=\"loadingColorAlert\"\n\t\t\t\t:alertText=\"loadingTextAlert\"\n\t\t\t/>\n\t\t</v-container>\n\t</v-app>\n</template>\n\n<script>\n// import kendo from \"@progress/kendo-ui\";\nimport JQuery from \"jquery\";\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\nimport {\n\tAdvanceSettlementModel,\n\tJournalModel,\n\tJournalEntryModel,\n\tAccountModel,\n\tEmployeeModel,\n\tCashAdvanceModel,\n\tCurrencyModel,\n\tContactModel,\n} from \"@/scripts/model/AppModels\";\n\n/* Store */\nimport store from \"@/store\";\nconst institute = store.state.institute.institute;\n\nconst {\n\tadvanceSettlementHandler,\n\tcashAdvanceHandler,\n} = require(\"@/scripts/AppHandlers\");\nconst clearingTransactionHandler = require(\"@/scripts/handler/workingcapital/clearingTransactionHandler.js\");\n\nconst {\n\tAccountTypeCode,\n\tSaveOption,\n\tEntityType,\n} = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n\tname: \"AdvanceSettlement\",\n\tcomponents: {\n\t\tLoadingMe: () => import(\"@/components/Loading\"),\n\t\t\"app-datepicker\": () =>\n\t\t\timport(\"@/components/custom_templates/DatePickerComponent\"),\n\t\t\"app-employee-dropdownlist\": () =>\n\t\t\timport(\"@/components/dropdownlist/Employee\"),\n\t\t\"app-cash-account-dropdownlist\": () =>\n\t\t\timport(\"@/components/dropdownlist/CashAccount\"),\n\t\t\"app-secondary-account-dropdownlist\": () => import('@/components/dropdownlist/AccountSecondary'),\n\t},\n\tprops: {\n\t\tinitAdvanceSettlement: {\n\t\t\ttype: AdvanceSettlementModel,\n\t\t},\n\t\tinitCashAdvance: {\n\t\t\ttype: CashAdvanceModel,\n\t\t},\n\t\tinitClearingTransactions: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\tdata: () => ({\n\t\t// Obj\n\t\tadvanceSettlement: new AdvanceSettlementModel(),\n\t\tjournal: new JournalModel(),\n\t\tjournalEntries: [],\n\t\temployee: new EmployeeModel(),\n\t\tclearingTransactionGrouping: [],\n\t\tclearingTransactions: [],\n\t\tcashAdvance: new CashAdvanceModel(),\n\t\tcashAdvances: [],\n\t\t// Other\n\t\tadvancedAmount: 0,\n\t\tadvancedExchangeAmount: 0,\n\t\tsettledAmount: 0,\n\t\tshowExchangeAmount: false,\n\t\tshowCashAccount: true,\n\t\tfiles: [],\n\t\ttemplates: [],\n\t\tuser: Helper.getUser(),\n\t\t// Form validation\n\t\tvalid: true,\n\t\tisEdit: false,\n\t\talert: false,\n\t\terrorMessage: \"\",\n\t\tsaveMode: \"\",\n\t\tSaveOption: SaveOption,\n\t\t// LoadingMe\n\t\tshowLoading: false,\n\t\tloadingAlert: false,\n\t\tloadingColorAlert: \"\",\n\t\tloadingTextAlert: \"\",\n\t}),\n\tmethods: {\n\t\t// Initial Data\n\t\tinitialData() {\n\t\t\tif (this.initAdvanceSettlement) {\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.advanceSettlement = Object.assign({}, this.initAdvanceSettlement);\n\n\t\t\t\tthis.bindData();\n\t\t\t} else {\n\t\t\t\t// Brand New Mode\n\t\t\t\tthis.setDefaultData();\n\t\t\t}\n\t\t},\n\t\t// Set default data\n\t\tsetDefaultData() {\n\t\t\t// Brand New Mode\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.advanceSettlement = new AdvanceSettlementModel({\n\t\t\t\tsettlement_date: new Date().toISOString().substr(0, 10),\n\t\t\t});\n\n\t\t\t// Generate Number\n\t\t\tthis.generateNumber();\n\t\t},\n\t\t// Bind data from prop for edit mode\n\t\tasync bindData() {\n\t\t\t// Edit Mode\n\t\t\tthis.isEdit = true;\n\n\t\t\t// Employee\n\t\t\tthis.employee = new EmployeeModel(this.advanceSettlement.settled_by);\n\n\t\t\t// Cash Advance\n\t\t\tthis.cashAdvance = new CashAdvanceModel(this.initCashAdvance);\n\n\t\t\t// Show/Hide exchange amount\n\t\t\tlet baseCurrency = new CurrencyModel(institute.baseCurrency);\n\t\t\tthis.showExchangeAmount = Boolean(\n\t\t\t\tthis.cashAdvance.currency.code !== baseCurrency.code\n\t\t\t);\n\n\t\t\t// Clearing Transactions\n\t\t\tthis.clearingTransactions = this.initClearingTransactions;\n\t\t\tthis.clearingTransactionGrouping = Helper.groupExpenseByCashAdvance(\n\t\t\t\tthis.clearingTransactions\n\t\t\t);\n\t\t\tthis.autoCalculate();\n\n\t\t\t//Journal\n\t\t\tthis.journal = this.advanceSettlement.journal;\n\t\t\tthis.journalEntries = this.advanceSettlement.journal_entries;\n\t\t},\n\t\t// Number\n\t\tasync generateNumber() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\tlet num = await Helper.generateAccountingNumber(\n\t\t\t\t\tEntityType.ADVANCE_SETTLEMENT,\n\t\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t\t);\n\n\t\t\t\tthis.advanceSettlement.number = num.number;\n\t\t\t\tthis.advanceSettlement.prefix_format = num.prefix_format;\n\t\t\t}\n\t\t},\n\t\t// Row Number Template\n\t\trowNumberTmpl(dataItem) {\n\t\t\tlet ds = this.$refs.clearingTransactionDS.kendoWidget(),\n\t\t\t\tindex = ds.indexOf(dataItem);\n\n\t\t\treturn index + 1;\n\t\t},\n\t\t// Load Cash Advance\n\t\tloadCashAdvance() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\tthis.cashAdvance = new CashAdvanceModel();\n\t\t\t\tthis.cashAdvances = [];\n\n\t\t\t\tif (this.employee.id !== \"\") {\n\t\t\t\t\tlet cashAdvanceList = [];\n\n\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\tcashAdvanceHandler\n\t\t\t\t\t\t.getByEmployeeId(this.employee.id)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (!JQuery.isEmptyObject(res.data)) {\n\t\t\t\t\t\t\t\tres.data.forEach((value) => {\n\t\t\t\t\t\t\t\t\tcashAdvanceList.push(new CashAdvanceModel(value));\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tthis.cashAdvances = cashAdvanceList;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// On Cash Advance Changes\n\t\tonCashAdvanceChanges() {\n\t\t\tthis.clearingTransactionGrouping = [];\n\t\t\tthis.clearingTransactions = [];\n\t\t\tthis.autoCalculate();\n\n\t\t\tif (this.cashAdvance.uuid !== \"\") {\n\t\t\t\t// Show/Hide exchange amount\n\t\t\t\tlet baseCurrency = new CurrencyModel(institute.baseCurrency);\n\t\t\t\tthis.showExchangeAmount = Boolean(\n\t\t\t\t\tthis.cashAdvance.currency.code !== baseCurrency.code\n\t\t\t\t);\n\n\t\t\t\t// Load Related Expenses\n\t\t\t\tthis.showLoading = true;\n\t\t\t\tclearingTransactionHandler\n\t\t\t\t\t.getByCashAdvanceId(this.cashAdvance.uuid)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (typeof res.data === \"object\") {\n\t\t\t\t\t\t\tthis.clearingTransactions = res.data;\n\t\t\t\t\t\t\tthis.clearingTransactionGrouping = Helper.groupExpenseByCashAdvance(\n\t\t\t\t\t\t\t\tres.data\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.autoCalculate();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// Auto Calculate\n\t\tautoCalculate() {\n\t\t\t// Cash Advance Amount\n\t\t\tthis.advancedAmount = 0;\n\t\t\tthis.advancedExchangeAmount = 0;\n\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\tif (value.amount > 0) {\n\t\t\t\t\tthis.advancedAmount += value.amount;\n\t\t\t\t\tthis.advancedExchangeAmount += value.exchanged_amount;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Transaction Amount\n\t\t\tthis.settledAmount = 0;\n\t\t\tthis.clearingTransactionGrouping.forEach((value) => {\n\t\t\t\tthis.settledAmount += value.exchanged_amount;\n\t\t\t});\n\n\t\t\tthis.showCashAccount = Boolean(\n\t\t\t\tthis.advancedExchangeAmount - this.settledAmount !== 0\n\t\t\t);\n\t\t},\n\t\t// Shrink Data\n\t\tshrinkData() {\n\t\t\t// Settlement Date\n\t\t\tthis.advanceSettlement.settlement_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\n\t\t\t// Employee\n\t\t\tthis.advanceSettlement.settled_by = new ContactModel(this.employee);\n\n\t\t\t// Cash Advance\n\t\t\tthis.advanceSettlement.cash_advance_uuid = this.cashAdvance.uuid;\n\n\t\t\t// Cash Amount\n\t\t\tthis.advanceSettlement.cash_amount = this.remaining;\n\n\t\t\t// Update Cash Advance\n\t\t\tthis.cashAdvance.is_settled = 1;\n\t\t\tthis.cashAdvance.settled_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\n\t\t\t// User\n\t\t\tif (this.isEdit) {\n\t\t\t\tthis.advanceSettlement.modified_by = this.user;\n\t\t\t} else {\n\t\t\t\tthis.advanceSettlement.created_by = this.user;\n\t\t\t}\n\t\t},\n\t\t// Add Journal\n\t\taddJournal() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\t// New Mode\n\t\t\t\tlet entries = [];\n\n\t\t\t\t// Advance Settlement Clearing Account (From Expense) on Dr\n\t\t\t\tthis.clearingTransactions.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue.account.number ===\n\t\t\t\t\t\tAccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE\n\t\t\t\t\t) {\n\t\t\t\t\t\tentries.push(\n\t\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\t\taccount: new AccountModel(value.account),\n\t\t\t\t\t\t\t\taccount_uuid: value.account.uuid,\n\t\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\t\tamount: value.exchanged_amount * -1,\n\t\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Cash Account\n\t\t\t\tif (this.remaining !== 0) {\n\t\t\t\t\tentries.push(\n\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\taccount: new AccountModel(this.advanceSettlement.cash_account),\n\t\t\t\t\t\t\taccount_uuid: this.advanceSettlement.cash_account.uuid,\n\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\tamount: this.remaining,\n\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Cash Advance on Cr\n\t\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue.account.account_type.code === AccountTypeCode.CASH_ADVANCE\n\t\t\t\t\t) {\n\t\t\t\t\t\tentries.push(\n\t\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\t\taccount: new AccountModel(value.account),\n\t\t\t\t\t\t\t\taccount_uuid: value.account.uuid,\n\t\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\t\tamount: value.exchanged_amount * -1, // Cr side is negative\n\t\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Journal Entries\n\t\t\t\tthis.journalEntries = entries;\n\t\t\t} else {\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.journalEntries.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t~AccountTypeCode.CASH_ACCOUNTS.indexOf(\n\t\t\t\t\t\t\tvalue.account.account_type.code\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tvalue.account = new AccountModel(\n\t\t\t\t\t\t\tthis.advanceSettlement.cash_account\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Journal\n\t\t\tthis.journal.number = this.advanceSettlement.number;\n\t\t\tthis.journal.description = this.advanceSettlement.description;\n\t\t\tthis.journal.journal_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\t\t\tthis.journal.journal_type = EntityType.AUTO_JOURNAL;\n\t\t\tthis.journal.transaction_type = EntityType.ADVANCE_SETTLEMENT;\n\t\t\tthis.journal.prefix_format = this.advanceSettlement.prefix_format;\n\t\t\tthis.journal.project_uuid = this.cashAdvance.project_uuid;\n\t\t\tthis.journal.segment_uuid = this.cashAdvance.segment_uuid;\n\t\t\tthis.journal.is_draft = this.advanceSettlement.is_draft;\n\t\t\tthis.journal.created_by = this.advanceSettlement.created_by;\n\t\t\tthis.journal.modified_by = this.advanceSettlement.modified_by;\n\t\t},\n\t\t// Validating\n\t\tvalidateForm() {\n\t\t\tlet result = true,\n\t\t\t\tmsg = \"\";\n\n\t\t\t// Employee\n\t\t\tif (this.employee.id === \"\") {\n\t\t\t\tmsg += `<p>${i18n.t(\"employee_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Cash Advance\n\t\t\tif (this.cashAdvance.uuid === \"\") {\n\t\t\t\tmsg += `<p>${i18n.t(\"please_select_cash_advance\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Cash Account\n\t\t\tif (\n\t\t\t\tthis.remaining !== 0 &&\n\t\t\t\tthis.advanceSettlement.cash_account.name === \"\"\n\t\t\t) {\n\t\t\t\tmsg += `<p>${i18n.t(\"please_select_cash_account\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Show Alert\n\t\t\tthis.errorMessage = msg;\n\t\t\tthis.alert = false;\n\t\t\tif (result === false) {\n\t\t\t\tthis.alert = true;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\t// All Saves\n\t\tasync onSaveOptionClick(mode) {\n\t\t\tif (this.$refs.form.validate() && this.validateForm()) {\n\t\t\t\tlet isValidClosingDate = await Helper.validateClosingDate(\n\t\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t\t);\n\t\t\t\tif (isValidClosingDate) {\n\t\t\t\t\tthis.saveMode = mode;\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcancel() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t(\"msg_title_warning\"),\n\t\t\t\ttext: i18n.t(\"msg_discard\"),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcancelButtonText: i18n.t(\"cancel\"),\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: i18n.t(\"discard\"),\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.setDefaultData();\n\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tclear() {\n\t\t\tthis.isEdit = false;\n\t\t\tthis.saveMode = \"\";\n\n\t\t\tthis.advancedAmount = 0;\n\t\t\tthis.advancedExchangeAmount = 0;\n\t\t\tthis.settledAmount = 0;\n\t\t\tthis.showExchangeAmount = false;\n\t\t\tthis.showCashAccount = true;\n\n\t\t\tthis.advanceSettlement = new AdvanceSettlementModel();\n\t\t\tthis.journal = new JournalModel();\n\t\t\tthis.journalEntries = [];\n\t\t\tthis.employee = new EmployeeModel();\n\t\t\tthis.cashAdvance = new CashAdvanceModel();\n\t\t\tthis.cashAdvances = [];\n\t\t\tthis.clearingTransactions = [];\n\n\t\t\t// Datasoure\n\t\t\tlet ds = this.$refs.clearingTransactionDS.kendoWidget();\n\t\t\tds.data([]);\n\t\t},\n\t\tconfirmDelete() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t(\"are_you_sure_you_want_to_delete_it\"),\n\t\t\t\ttext: i18n.t(\"you_wont_be_able_to_revert_this\"),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: \"Yes\",\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.saveMode = SaveOption.DELETE;\n\n\t\t\t\t\t/* Mark as deleted */\n\t\t\t\t\tthis.advanceSettlement.is_deleted = 1;\n\n\t\t\t\t\t/* Update Account */\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsave() {\n\t\t\tlet self = this;\n\n\t\t\t// Draft Mode\n\t\t\tif (this.saveMode === SaveOption.SAVEDRAFT) {\n\t\t\t\tthis.advanceSettlement.is_draft = 1;\n\t\t\t} else {\n\t\t\t\tthis.advanceSettlement.is_draft = 0;\n\t\t\t}\n\n\t\t\t// Shrink Data\n\t\t\tthis.shrinkData();\n\n\t\t\t// Add Journal\n\t\t\tthis.addJournal();\n\n\t\t\t// Sync Data\n\t\t\tthis.showLoading = true;\n\t\t\tadvanceSettlementHandler\n\t\t\t\t.save({\n\t\t\t\t\tadvance_settlement: new AdvanceSettlementModel(\n\t\t\t\t\t\tthis.advanceSettlement\n\t\t\t\t\t),\n\t\t\t\t\tcash_advance: new CashAdvanceModel(this.cashAdvance),\n\t\t\t\t\texpense: this.clearingTransactions,\n\t\t\t\t\tjournal: new JournalModel(this.journal),\n\t\t\t\t\tjournal_entries: this.journalEntries,\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tself.responseStatus(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tHelper.alertErrorMsg(error);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tself.showLoading = false;\n\t\t\t\t});\n\t\t},\n\t\t// Response Status\n\t\tresponseStatus(response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\tif (\n\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t) {\n\t\t\t\t\t/* Save Close or Delete */\n\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.goBackToViewPage();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.setDefaultData();\n\t\t\t\t} else {\n\t\t\t\t\t/* Save New */\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.setDefaultData();\n\t\t\t\t}\n\n\t\t\t\t/* Alert Success */\n\t\t\t\tthis.$snotify.success(i18n.t(\"successful\"));\n\t\t\t} else {\n\t\t\t\t/* Alert Error */\n\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t}\n\t\t},\n\t\t// Go back to view page after edit mode\n\t\tgoBackToViewPage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: \"Advance Settlement View\",\n\t\t\t\tparams: { initAdvanceSettlement: Object.assign({}, this.advanceSettlement) },\n\t\t\t});\n\t\t},\n\t},\n\tcomputed: {\n\t\tremaining() {\n\t\t\treturn this.advancedExchangeAmount - this.settledAmount;\n\t\t},\n\t\tsecondaryAccount(){\n\t\t\treturn store.state.accounting.secondaryAccount\n\t\t}\n\t},\n\twatch: {\n\t\tinitAdvanceSettlement() {\n\t\t\tthis.initialData();\n\t\t},\n\t},\n\tmounted() {\n\t\t// Initial Data\n\t\tthis.initialData();\n\t},\n};\n</script>\n\n<style scoped>\n.function_content {\n\tpadding: 0 25px 25px;\n\tborder-bottom: 0;\n}\n\n.cash-balance.theme--light.v-data-table {\n\tbackground-color: transparent !important;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr\n\t> td {\n\tpadding: 5px 10px !important;\n\theight: 50px;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr\n\t> td:not(.v-data-table__mobile-row) {\n\tborder-top: thin solid rgba(0, 0, 0, 0.12);\n\tborder-bottom: 0 !important;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr:last-child\n\ttd {\n\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.k-link {\n\tcolor: aqua !important;\n}\n\n@media (min-width: 1264px) {\n\t.container {\n\t\t/* max-width: 1185px; */\n\t\tmax-width: 1080px !important;\n\t}\n}\n\n@media (max-width: 576px) {\n\t.mb-6 {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n\tbackground-color: transparent !important;\n}\n</style>\n"]}]}
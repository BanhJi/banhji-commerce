{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/closing/ReconcileReport.vue?vue&type=style&index=0&id=4f0687c8&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/accounting/closing/ReconcileReport.vue","mtime":1642155812601},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUKICA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIKICA+IHRhYmxlCiAgPiB0Ym9keQogID4gdHI6Zmlyc3QtY2hpbGQKICA+IHRkOm5vdCgudi1kYXRhLXRhYmxlX19tb2JpbGUtcm93KSB7CiAgYm9yZGVyLXRvcDogM3B4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoKLmZsb2F0LXJpZ2h0IHsKICBtYXJnaW4tdG9wOiAwcHggIWltcG9ydGFudDsKfQoKLmZsb2F0LWxlZnQgewogIG1hcmdpbi10b3A6IDBweCAhaW1wb3J0YW50Owp9Cgoudi1pbnB1dC0tc3dpdGNoIHsKICBtYXJnaW4tdG9wOiAwcHg7CiAgaGVpZ2h0OiAzMHB4Owp9CgoubGlnaHRCbHVlIHsKICBjb2xvcjogIzY4Y2JmYjsKfQo="},{"version":3,"sources":["ReconcileReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ReconcileReport.vue","sourceRoot":"src/views/accounting/closing","sourcesContent":["<template>\n  <v-data-table\n    :headers=\"headers\"\n    :items=\"reports\"\n    sort-by=\"calories\"\n    class=\"elevation-1\"\n  >\n    <template v-slot:top>\n      <v-toolbar flat>\n        <v-toolbar-title>Report</v-toolbar-title>\n        <v-divider class=\"mx-4\" inset vertical></v-divider>\n\n        <v-spacer></v-spacer>\n\n        <div style=\"width: 170px\">\n          <app-monthof-picker\n            :initMonthOf=\"monthOf\"\n            @emitMonthOf=\"monthOf = $event\"\n          />\n        </div>\n\n        <v-btn color=\"primary\" dark class=\"mb-2 ml-2\" @click=\"search\">\n          <i class=\"b-search\" style=\"font-size: 18px; color: #fff !important\" />\n        </v-btn>\n\n        <!-- Form Dialog -->\n        <v-dialog v-model=\"dialog\" max-width=\"500px\">\n          <!-- Form -->\n          <v-card>\n            <div class=\"modal_header\">\n              <v-card-title>{{ $t(\"completing_task\") }}</v-card-title>\n              <v-icon @click=\"close\">close</v-icon>\n            </div>\n            <v-card-text class=\"modal_text_content\">\n              <v-row class=\"pt-2\">\n                <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                  <label class=\"label\">{{ $t(\"account\") }}</label>\n                  <v-text-field\n                    v-model=\"editedItem.account.name\"\n                    readonly\n                    outlined\n                  ></v-text-field>\n                </v-col>\n                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                  <label class=\"label\">{{ $t(\"month_of\") }}</label>\n                  <app-monthof-picker\n                    :initMonthOf=\"editedItem.monthOf\"\n                    @emitMonthOf=\"editedItem.monthOf = $event\"\n                  />\n                </v-col>\n                <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                  <label class=\"label\">{{ $t(\"date\") }}</label>\n                  <app-datepicker\n                    :initialDate=\"editedItem.complatedAt\"\n                    @emitDate=\"editedItem.complatedAt = $event\"\n                  />\n                </v-col>\n                <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                  <label class=\"label\">{{ $t(\"note\") }}</label>\n                  <v-textarea\n                    class=\"\"\n                    outlined\n                    v-model=\"editedItem.note\"\n                    no-resize\n                    height=\"110px\"\n                    rows=\"3\"\n                  />\n                </v-col>\n              </v-row>\n            </v-card-text>\n\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"blue darken-1\" text @click=\"close\"> Cancel </v-btn>\n              <v-btn color=\"blue darken-1\" text @click=\"save\"> Save </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n\n        <!-- Delete Dialog -->\n        <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n          <v-card>\n            <v-card-title class=\"text-h5\"\n              >Are you sure you want to delete this item?</v-card-title\n            >\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"blue darken-1\" text @click=\"closeDelete\"\n                >Cancel</v-btn\n              >\n              <v-btn color=\"blue darken-1\" text @click=\"deleteItemConfirm\"\n                >OK</v-btn\n              >\n              <v-spacer></v-spacer>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n      </v-toolbar>\n    </template>\n\n    <!-- Account Template -->\n    <template v-slot:[`item.account`]=\"{ item }\">\n      {{ item.account.name }}\n    </template>\n\n    <!-- Complete Date Template -->\n    <template v-slot:[`item.complatedAt`]=\"{ item }\">\n      <div v-if=\"item.complatedAt !== ''\">\n        {{ kendo.toString(new Date(item.complatedAt), \"dd-MM-yyyy\") }}\n      </div>\n    </template>\n\n    <!-- Variant Template -->\n    <template v-slot:[`item.variant`]=\"{ item }\">\n      <div v-if=\"item.status === ''\">\n        <div v-if=\"item.variant < 0\">\n          <v-chip color=\"red\" dark>\n            {{ item.variant * -1 }} days overdue\n          </v-chip>\n        </div>\n        <div v-else>\n          <v-chip color=\"green\" dark>\n            {{ item.variant }} days to reconcile\n          </v-chip>\n        </div>\n      </div>\n      <div v-else>Done</div>\n    </template>\n\n    <!-- Status Template -->\n    <template v-slot:[`item.status`]=\"{ item }\">\n      <div v-if=\"item.status === ''\">Open</div>\n      <div v-else>Closed</div>\n    </template>\n\n    <!-- Edit & Delete -->\n    <template v-slot:[`item.actions`]=\"{ item }\">\n      <v-icon small class=\"mr-2\" @click=\"editItem(item)\"> mdi-check </v-icon>\n      <v-icon small @click=\"deleteItem(item)\"> mdi-delete </v-icon>\n    </template>\n\n    <!-- No Data -->\n    <template slot=\"no-data\">\n      <LoadingMe\n        :isLoading=\"showLoading\"\n        :fullPage=\"false\"\n        :myLoading=\"true\"\n        type=\"loading\"\n      />\n    </template>\n  </v-data-table>\n</template>\n\n<script>\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\nimport kendo from \"@progress/kendo-ui\";\nimport ReconcileRuleReportModel from \"@/scripts/model/ReconcileRuleReport\";\n\nconst ReconcileRuleHandler = require(\"@/scripts/handler/accounting/reconcileRule\");\n\nexport default {\n  components: {\n    LoadingMe: () => import(\"@/components/Loading\"),\n    \"app-datepicker\": () =>\n      import(\"@/components/custom_templates/DatePickerComponent\"),\n    \"app-monthof-picker\": () =>\n      import(\"@/components/kendo_templates/MonthOfPicker\"),\n  },\n  data: () => ({\n    kendo: kendo,\n    monthOf: new Date().toISOString().substr(0, 7),\n    showLoading: false,\n    dialog: false,\n    dialogDelete: false,\n    headers: [\n      {\n        text: \"Account\",\n        align: \"start\",\n        sortable: false,\n        value: \"account\",\n      },\n      { text: \"Number\", value: \"num\" },\n      { text: \"Type\", value: \"account.account_type.name\" },\n      { text: \"Complete Date\", value: \"complatedAt\" },\n      { text: \"Todo Date\", value: \"todo\" },\n      { text: \"Variance\", value: \"variant\" },\n      { text: \"status\", value: \"status\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    reports: [],\n    editedIndex: -1,\n    editedItem: new ReconcileRuleReportModel(),\n    defaultItem: new ReconcileRuleReportModel(),\n  }),\n  methods: {\n    search() {\n      // Query\n      this.showLoading = true;\n      ReconcileRuleHandler.getReport({\n        params: {\n          monthOf: this.monthOf,\n        },\n      })\n        .then((res) => {\n          if (res.data) {\n            this.reports = res.data.data;\n          }\n        })\n        .finally(() => {\n          this.showLoading = false;\n        });\n    },\n    editItem(item) {\n      this.editedIndex = this.reports.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      this.editedIndex = this.reports.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n    deleteItemConfirm() {\n      this.showLoading = true;\n      ReconcileRuleHandler.deleteReport({\n        data: this.editedItem,\n      })\n        .then(() => {\n          this.$snotify.success(i18n.t(\"delete_successful\"));\n        })\n        .finally(() => {\n          this.showLoading = false;\n        });\n\n      this.reports.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    validateForm() {\n      let valid = true;\n\n      if (this.editedItem.complatedAt === \"\") {\n        valid = false;\n\n        this.$snotify.warning(i18n.t(\"date_is_required\"));\n      }\n\n      return valid;\n    },\n    save() {\n      if (this.validateForm()) {\n        /* Date */\n        this.editedItem.complatedAt = Helper.toISODate(\n          this.editedItem.complatedAt\n        );\n\n        /* Status */\n        this.editedItem.status = \"closed\";\n\n        this.showLoading = true;\n        ReconcileRuleHandler.saveReport(this.editedItem)\n          .then(() => {\n            this.$snotify.success(i18n.t(\"save_successful\"));\n          })\n          .finally(() => {\n            this.showLoading = false;\n          });\n\n        if (this.editedIndex > -1) {\n          Object.assign(this.reports[this.editedIndex], this.editedItem);\n        } else {\n          this.reports.push(this.editedItem);\n        }\n        this.close();\n      }\n    },\n  },\n};\n</script>\n<style scoped>\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:first-child\n  > td:not(.v-data-table__mobile-row) {\n  border-top: 3px solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.float-right {\n  margin-top: 0px !important;\n}\n\n.float-left {\n  margin-top: 0px !important;\n}\n\n.v-input--switch {\n  margin-top: 0px;\n  height: 30px;\n}\n\n.lightBlue {\n  color: #68cbfb;\n}\n</style>"]}]}
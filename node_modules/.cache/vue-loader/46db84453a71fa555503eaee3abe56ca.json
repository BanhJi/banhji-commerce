{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/components/overview/ReceiptBydonor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/components/overview/ReceiptBydonor.vue","mtime":1638931253147},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBrZW5kbyBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdWknOwppbXBvcnQgeyBpMThuIH0gZnJvbSAiQC9pMThuIjsKaW1wb3J0IHsgQ2hhcnQgfSBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tY2hhcnRzLXZ1ZS13cmFwcGVyIjsKCmNvbnN0IEpvdXJuYWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2pvdXJuYWxIYW5kbGVyIik7CmNvbnN0IEVudGl0eVR5cGUgPSByZXF1aXJlKCJAL3NjcmlwdHMvZGVmYXVsdF9zZXR1cC9FbnRpdHlUeXBlIik7CmNvbnN0IEFjY291bnRUeXBlQ29kZSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0FjY291bnRUeXBlQ29kZSIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGdW5kUmVjZWlwdEdyYXBoIiwKICBjb21wb25lbnRzOiB7CiAgICBjaGFydDogQ2hhcnQsCiAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKSwKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRyYW5zYWN0aW9uczogW10sCiAgICAgIHBpZURhdGE6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgc2VyaWVzOiBbCiAgICAgICAgewogICAgICAgICAgZmllbGQ6ICJ2YWx1ZSIsCiAgICAgICAgICBhdXRvRml0OiB0cnVlLAogICAgICAgICAgY2F0ZWdvcnlGaWVsZDogImNhdGVnb3J5IiwKICAgICAgICB9LAogICAgICBdLAogICAgICBsYWJlbFRlbXBsYXRlOiAiICM9IGtlbmRvLmZvcm1hdCgnezA6UH0nLCBwZXJjZW50YWdlKSMiLAogICAgICB0b29sdGlwVGVtcGxhdGU6CiAgICAgICAgIiM9IGNhdGVnb3J5ICMgOiAjPSBrZW5kby50b1N0cmluZyh2YWx1ZSwgJ24nKSAjICgjPSBrZW5kby5mb3JtYXQoJ3swOlB9JywgcGVyY2VudGFnZSkgIykiLAogICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgIGNoYXJ0QXJlYTogewogICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgbWFyZ2luOiAwLAogICAgICAgIGhlaWdodDogMTk4LAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRpYWxpemUoKSB7CiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICBKb3VybmFsSGFuZGxlci5nZXRKb3VybmFsQnlUcmFuc2FjdGlvblR5cGUoRW50aXR5VHlwZS5GVU5EX1JFQ0VJUFQsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGFzX29mX2RhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApICsgIlQyMzo1OTo1OS45OTlaIiwKICAgICAgICB9LAogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbnMgPSByZXMuZGF0YTsKICAgICAgICAgICAgdGhpcy5iaW5kRGF0YSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5lcnJvcihpMThuLnQoImVycm9yX3NvbWV0aGluZ193cm9uZyIpKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBiaW5kRGF0YSgpIHsKICAgICAgbGV0IGcgPSB7fTsKICAgICAgbGV0IHRvdGFsXyA9IDA7CiAgICAgIGNvbnN0IGNvbG9ycyA9IFsKICAgICAgICAiI2M4MDAwMCIsCiAgICAgICAgIiM2NDI4MjgiLAogICAgICAgICIjZjQ0MzM2IiwKICAgICAgICAiIzUyMkQyREZGIiwKICAgICAgICAiI2Q4NTYwNCIsCiAgICAgICAgIiNFRDFBM0EiLAogICAgICAgICIjN2E0MTQxIiwKICAgICAgICAiI2U4OGQxNCIsCiAgICAgICAgIiNmMWFhNDUiLAogICAgICBdOwogICAgICBsZXQgaW5kZXggPSAwOwogICAgICB0aGlzLnRyYW5zYWN0aW9ucy5mb3JFYWNoKCh2YWx1ZSkgPT4gewogICAgICAgIC8qIEZpbHRlciBSZXZlbnVlIEFjY291bnRzICovCiAgICAgICAgaWYgKHZhbHVlLmFjY291bnQudHlwZV9jb2RlID09PSBBY2NvdW50VHlwZUNvZGUuUkVWRU5VRSkgewogICAgICAgICAgaWYgKGdbdmFsdWUucHJpbWFyeV9jb250YWN0Lm5hbWVdKSB7CiAgICAgICAgICAgIGdbdmFsdWUucHJpbWFyeV9jb250YWN0Lm5hbWVdLnZhbHVlICs9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgICAgICB0b3RhbF8gKz0gdmFsdWUuYW1vdW50ICogLTE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBnW3ZhbHVlLnByaW1hcnlfY29udGFjdC5uYW1lXSA9IHsKICAgICAgICAgICAgICBjYXRlZ29yeTogdmFsdWUucHJpbWFyeV9jb250YWN0Lm5hbWUsCiAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLmFtb3VudCAqIC0xLAogICAgICAgICAgICAgIGNvbG9yOiBjb2xvcnNbaW5kZXhdLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0b3RhbF8gKz0gdmFsdWUuYW1vdW50ICogLTE7CiAgICAgICAgICB9CiAgICAgICAgICBpbmRleCArPSAxOwogICAgICAgICAgaWYgKGluZGV4ID4gY29sb3JzLmxlbmd0aCkgewogICAgICAgICAgICBpbmRleCA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy50b3RhbCA9IHRvdGFsXzsKCiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhnKTsKICAgICAgLyogQmluZCBkYXRhICovCiAgICAgIHRoaXMucGllRGF0YSA9IE9iamVjdC52YWx1ZXMoZyk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogIH0sCn07Cg=="},{"version":3,"sources":["ReceiptBydonor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReceiptBydonor.vue","sourceRoot":"src/components/overview","sourcesContent":["<template>\n  <div>\n    <LoadingMe\n      :isLoading=\"showLoading\"\n      :fullPage=\"false\"\n      :myLoading=\"true\"\n      :type=\"'loading'\"\n    />\n\n    <h2\n      style=\"line-height: 22px\"\n      class=\"primary--text niradei_black mb-1 pa-0 text-right col-sm-12\"\n    >\n      {{ Number(total).toLocaleString() }}\n    </h2>\n\n    <chart\n      ref=\"chart\"\n      :data-source=\"pieData\"\n      :chart-area-background=\"''\"\n      :legend-visible=\"false\"\n      :series-defaults-type=\"'pie'\"\n      :series=\"series\"\n      :series-defaults-labels-visible=\"true\"\n      :series-defaults-labels-position=\"'outsideEnd'\"\n      :series-defaults-labels-background=\"'transparent'\"\n      :series-defaults-labels-template=\"labelTemplate\"\n      :tooltip-visible=\"true\"\n      :tooltip-template=\"tooltipTemplate\"\n      :chartArea=\"chartArea\"\n      fit\n      :theme=\"'sass'\"\n    />\n  </div>\n</template>\n\n<script>\n// import kendo from '@progress/kendo-ui';\nimport { i18n } from \"@/i18n\";\nimport { Chart } from \"@progress/kendo-charts-vue-wrapper\";\n\nconst JournalHandler = require(\"@/scripts/journalHandler\");\nconst EntityType = require(\"@/scripts/default_setup/EntityType\");\nconst AccountTypeCode = require(\"@/scripts/default_setup/AccountTypeCode\");\n\nexport default {\n  name: \"FundReceiptGraph\",\n  components: {\n    chart: Chart,\n    LoadingMe: () => import(`@/components/Loading`),\n  },\n  data: function () {\n    return {\n      transactions: [],\n      pieData: [],\n      total: 0,\n      series: [\n        {\n          field: \"value\",\n          autoFit: true,\n          categoryField: \"category\",\n        },\n      ],\n      labelTemplate: \" #= kendo.format('{0:P}', percentage)#\",\n      tooltipTemplate:\n        \"#= category # : #= kendo.toString(value, 'n') # (#= kendo.format('{0:P}', percentage) #)\",\n      showLoading: false,\n      chartArea: {\n        background: \"transparent\",\n        margin: 0,\n        height: 198,\n      },\n    };\n  },\n  methods: {\n    initialize() {\n      this.showLoading = true;\n      JournalHandler.getJournalByTransactionType(EntityType.FUND_RECEIPT, {\n        params: {\n          as_of_date: new Date().toISOString().substr(0, 10) + \"T23:59:59.999Z\",\n        },\n      })\n        .then((res) => {\n          if (res) {\n            this.transactions = res.data;\n            this.bindData();\n          } else {\n            this.$snotify.error(i18n.t(\"error_something_wrong\"));\n          }\n        })\n        .finally(() => {\n          this.showLoading = false;\n        });\n    },\n    bindData() {\n      let g = {};\n      let total_ = 0;\n      const colors = [\n        \"#c80000\",\n        \"#642828\",\n        \"#f44336\",\n        \"#522D2DFF\",\n        \"#d85604\",\n        \"#ED1A3A\",\n        \"#7a4141\",\n        \"#e88d14\",\n        \"#f1aa45\",\n      ];\n      let index = 0;\n      this.transactions.forEach((value) => {\n        /* Filter Revenue Accounts */\n        if (value.account.type_code === AccountTypeCode.REVENUE) {\n          if (g[value.primary_contact.name]) {\n            g[value.primary_contact.name].value += value.amount * -1;\n            total_ += value.amount * -1;\n          } else {\n            g[value.primary_contact.name] = {\n              category: value.primary_contact.name,\n              value: value.amount * -1,\n              color: colors[index],\n            };\n            total_ += value.amount * -1;\n          }\n          index += 1;\n          if (index > colors.length) {\n            index = 0;\n          }\n        }\n      });\n      this.total = total_;\n\n      window.console.log(g);\n      /* Bind data */\n      this.pieData = Object.values(g);\n    },\n  },\n  mounted() {\n    this.initialize();\n  },\n};\n</script>"]}]}
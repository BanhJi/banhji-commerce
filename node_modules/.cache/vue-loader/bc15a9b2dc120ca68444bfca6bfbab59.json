{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/finances/management/loan_center/Reconciliation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/finances/management/loan_center/Reconciliation.vue","mtime":1638499443236},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBrZW5kbyBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdWknCmltcG9ydCB7aTE4bn0gZnJvbSAnQC9pMThuJwppbXBvcnQgaGVscGVyIGZyb20gIkAvaGVscGVyLmpzIgovLyBpbXBvcnQgeyBKb3VybmFsTW9kZWwsIEpvdXJuYWxFbnRyeU1vZGVsIH0gZnJvbSAnQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscycKaW1wb3J0IHtiYW5rQWNjb3VudEhhbmRsZXIsIGpvdXJuYWxIYW5kbGVyLCByZWNvbmNpbGVIYW5kbGVyfSBmcm9tICdAL3NjcmlwdHMvQXBwSGFuZGxlcnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQmFua2luZyIsCiAgICBjb21wb25lbnRzOiB7CiAgICB9LAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBoZWxwZXI6IGhlbHBlciwKICAgICAgICAvLyBTZWFyY2ggdHJhbnNhY3Rpb24gZGF0ZXMKICAgICAgICBzdGFydF9kYXRlOiAiIiwKICAgICAgICBlbmRfZGF0ZTogIiIsCiAgICAgICAgam91cm5hbEVudHJpZXNEZXRhaWxzOiBbXSwKICAgICAgICByZWNvbmNpbGVMaXN0OiBbXSwKICAgICAgICBiYW5rQWNjb3VudFR5cGVzOiBbXSwKICAgICAgICByZWNvbmNpbGVIZWFkZXJzOiBbCiAgICAgICAgICAgIHt0ZXh0OiBpMThuLnQoJ25vLicpfSwKICAgICAgICAgICAge3RleHQ6IGkxOG4udCgnZGF0ZScpLCB2YWx1ZTogJ2RhdGUnfSwKICAgICAgICAgICAge3RleHQ6IGkxOG4udCgnbnVtYmVyJyksIHZhbHVlOiAnbnVtYmVyJ30sCiAgICAgICAgICAgIHt0ZXh0OiBpMThuLnQoJ3ZhcmlhbmNlJyksIHZhbHVlOiAndmFyaWFuY2VfYW1vdW50J30sCiAgICAgICAgICAgIHt0ZXh0OiBpMThuLnQoJ2FjdGlvbicpfSwKICAgICAgICBdLAogICAgICAgIC8vIEFjY291bnQgaW5mb3JtYXRpb24KICAgICAgICBiYW5rQWNjb3VudDogW10sCiAgICAgICAgYmFua0FjY291bnREZXRhaWxzOiBbXSwKICAgICAgICBmaWxlczogW10sCiAgICAgICAgYXR0YWNobWVudHM6IFtdLAogICAgICAgIC8vIExvYWRpbmdNZQogICAgICAgIHNob3dMb2FkaW5nOiB0cnVlLAogICAgICAgIGlzTG9hZGVkOiBmYWxzZSwKICAgICAgICAvLyBLZW5kbyBkYXRhU291cmNlCiAgICAgICAgc2NoZW1hRGVmaW5pdGlvbjogewogICAgICAgICAgICBtb2RlbDoge2lkOiAidXVpZCJ9CiAgICAgICAgfSwKICAgICAgICAvLyBHcm91cCBvcmRlciBieSBhY2NvdW50X3R5cGVfaWQgYXNjCiAgICAgICAgZ3JvdXBEZWZpbml0aW9uOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGZpZWxkOiAiYmFuay5uYW1lIiwKICAgICAgICAgICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEuaXRlbXNbMF0ubnVtYmVyID09PSBiLml0ZW1zWzBdLm51bWJlcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuaXRlbXNbMF0ubnVtYmVyID4gYi5pdGVtc1swXS5udW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZmllbGQ6ICJ0eXBlIiwKICAgICAgICAgICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEuaXRlbXNbMF0ubnVtYmVyID09PSBiLml0ZW1zWzBdLm51bWJlcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuaXRlbXNbMF0ubnVtYmVyID4gYi5pdGVtc1swXS5udW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICBdLAogICAgfSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8gT24gU29ydGVyIENoYW5nZXMKICAgICAgICBvblNvcnRlckNoYW5nZXModmFsKSB7CiAgICAgICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCkKCiAgICAgICAgICAgIHN3aXRjaCAodmFsKSB7CiAgICAgICAgICAgICAgICBjYXNlICJUb2RheSI6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydF9kYXRlID0ga2VuZG8udG9TdHJpbmcodG9kYXksICd5eXl5LU1NLWRkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZF9kYXRlID0ga2VuZG8udG9TdHJpbmcodG9kYXksICd5eXl5LU1NLWRkJykKCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgIlRoaXMgV2VlayI6CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gdG9kYXkuZ2V0RGF0ZSgpIC0gdG9kYXkuZ2V0RGF5KCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBmaXJzdCArIDY7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRfZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRvZGF5LnNldERhdGUoZmlyc3QpKSwgJ3l5eXktTU0tZGQnKQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kX2RhdGUgPSBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh0b2RheS5zZXREYXRlKGxhc3QpKSwgJ3l5eXktTU0tZGQnKQoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAiVGhpcyBNb250aCI6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydF9kYXRlID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMSksICd5eXl5LU1NLWRkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZF9kYXRlID0ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMzEpLCAneXl5eS1NTS1kZCcpCgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUaGlzIFllYXIiOgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRfZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIDAsIDEpLCAneXl5eS1NTS1kZCcpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRfZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIDExLCAzMSksICd5eXl5LU1NLWRkJykKCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydF9kYXRlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRfZGF0ZSA9ICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyBTZWFyY2ggVHJhbnNhY3Rpb24KICAgICAgICBzZWFyY2hUcmFuc2FjdGlvbigpIHsKICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzLAogICAgICAgICAgICAgICAgYmEgPSB0aGlzLmJhbmtBY2NvdW50LAogICAgICAgICAgICAgICAgc2RhdGUgPSB0aGlzLnN0YXJ0X2RhdGUsCiAgICAgICAgICAgICAgICBlZGF0ZSA9IHRoaXMuZW5kX2RhdGUKCiAgICAgICAgICAgIGlmIChiYS51dWlkKSB7CiAgICAgICAgICAgICAgICBpZiAoc2RhdGUgJiYgZWRhdGUpIHsKICAgICAgICAgICAgICAgICAgICBzZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHNkYXRlKSwgJ3l5eXktTU0tZGQnKSArICdUMDA6MDA6MDAuMDAwWicKCiAgICAgICAgICAgICAgICAgICAgZWRhdGUgPSBuZXcgRGF0ZShlZGF0ZSkKICAgICAgICAgICAgICAgICAgICBlZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKGVkYXRlLCAneXl5eS1NTS1kZCcpICsgJ1QyMzo1OTo1OS45OTlaJwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZGF0ZSA9IDAKICAgICAgICAgICAgICAgICAgICBlZGF0ZSA9IDAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgIGpvdXJuYWxIYW5kbGVyLmdldEVudHJ5RGV0YWlsQnlBY2NvdW50KGJhLmFjY291bnQudXVpZCwgewogICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICBzdGFydF9kYXRlOiBzZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGU6IGVkYXRlLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5rQWNjb3VudERldGFpbHMgPSByZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuam91cm5hbEVudHJpZXNEZXRhaWxzID0gcmVzLmVudHJpZXNfZGV0YWlsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8gT24gQWNjb3VudCBUeXBlIENoYW5nZXMKICAgICAgICBhc3luYyBvbkJhbmtUeXBlQ2hhbmdlcyhiYW5rVHlwZSkgewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKCiAgICAgICAgICAgICAgICBpZiAoYmFua1R5cGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFua0FjY291bnRzID0gdGhpcy5iYW5rQWNjb3VudHNCawogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbmtBY2NvdW50cyA9IHRoaXMuYmFua0FjY291bnRzQmsuZmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PiB2YWx1ZS50eXBlID09PSBiYW5rVHlwZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIE9uIFNlYXJjaCBDaGFuZ2VzCiAgICAgICAgYXN5bmMgb25TZWFyY2hDaGFuZ2VzKHNlYXJjaFRleHQpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpCgogICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRleHQgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5rQWNjb3VudHMgPSB0aGlzLmJhbmtBY2NvdW50c0JrLmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT4gKH52YWx1ZS5udW1iZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFRleHQpKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5rQWNjb3VudHMgPSB0aGlzLmJhbmtBY2NvdW50c0JrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyBPbiBDaGFuZ2UgaXRlbSBzZWxlY3Rpb24KICAgICAgICBvbkJhbmtBY2NvdW50R3JpZENoYW5nZXMoKSB7CiAgICAgICAgICAgIGxldCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZEJhbmtBY2NvdW50IikuZGF0YSgia2VuZG9HcmlkIikKICAgICAgICAgICAgbGV0IHNlbGVjdGVkSXRlbSA9IGdyaWQuZGF0YUl0ZW0oZ3JpZC5zZWxlY3QoKSkKCiAgICAgICAgICAgIGlmICh0aGlzLmJhbmtBY2NvdW50LnV1aWQgIT09IHNlbGVjdGVkSXRlbS51dWlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLmJhbmtBY2NvdW50ID0gc2VsZWN0ZWRJdGVtCiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFRyYW5zYWN0aW9uKCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8gR28gVG8gRWRpdCBQYWdlCiAgICAgICAgZ29FZGl0KCkgewogICAgICAgICAgICBsZXQgYmEgPSB0aGlzLmJhbmtBY2NvdW50CiAgICAgICAgICAgIGlmIChiYS51dWlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ0JhbmsgQWNjb3VudCcsIHBhcmFtczoge2lkOiBiYS51dWlkfX0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIExvYWQgUmVjb25jaWxlCiAgICAgICAgbG9hZFJlY29uY2lsZSgpIHsKICAgICAgICAgICAgcmVjb25jaWxlSGFuZGxlci5nZXRBbGwoKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvbmNpbGVMaXN0ID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgLy8gQ2FsbCBCYW5rIEFjY291bnQgTGlzdAogICAgICAgIGJhbmtBY2NvdW50SGFuZGxlci5nZXRBbGwoKQogICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFua0FjY291bnRzID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbmtBY2NvdW50c0JrID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgIH0sCn07Cg=="},{"version":3,"sources":["Reconciliation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reconciliation.vue","sourceRoot":"src/views/finances/management/loan_center","sourcesContent":["<template>\n    <v-row class=\"mx-3 white\">\n        <v-col sm=\"12\" cols=\"12\" class=\"\">\n            <v-btn to=\"\" color=\"primary\"\n                   class=\"white--text float-right text-capitalize\">\n                {{$t('new_reconciliation')}}\n            </v-btn>\n        </v-col>\n\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <v-data-table\n                    :headers=\"reconcileHeaders\"\n                    :items=\"reconcileList\"\n                    class=\"elevation-1\"\n            >\n                <template v-slot:item=\"{ item, index }\">\n                    <tr>\n                        <td style=\"text-align: center;\">{{ index + 1 }}</td>\n                        <td class=\"text-xs-right\">{{ helper.dateFormat(item.date) }}</td>\n                        <td class=\"text-xs-right\">{{ item.number }}</td>\n                        <td style=\"text-align: right;\">{{ Number(item.variance_amount).toLocaleString() }}</td>\n                    </tr>\n                </template>\n            </v-data-table>\n        </v-col>\n\n    </v-row>\n</template>\n<script>\n    import kendo from '@progress/kendo-ui'\n    import {i18n} from '@/i18n'\n    import helper from \"@/helper.js\"\n    // import { JournalModel, JournalEntryModel } from '@/scripts/model/AppModels'\n    import {bankAccountHandler, journalHandler, reconcileHandler} from '@/scripts/AppHandlers'\n\n    export default {\n        name: \"Banking\",\n        components: {\n        },\n        data: () => ({\n            helper: helper,\n            // Search transaction dates\n            start_date: \"\",\n            end_date: \"\",\n            journalEntriesDetails: [],\n            reconcileList: [],\n            bankAccountTypes: [],\n            reconcileHeaders: [\n                {text: i18n.t('no.')},\n                {text: i18n.t('date'), value: 'date'},\n                {text: i18n.t('number'), value: 'number'},\n                {text: i18n.t('variance'), value: 'variance_amount'},\n                {text: i18n.t('action')},\n            ],\n            // Account information\n            bankAccount: [],\n            bankAccountDetails: [],\n            files: [],\n            attachments: [],\n            // LoadingMe\n            showLoading: true,\n            isLoaded: false,\n            // Kendo dataSource\n            schemaDefinition: {\n                model: {id: \"uuid\"}\n            },\n            // Group order by account_type_id asc\n            groupDefinition: [\n                {\n                    field: \"bank.name\",\n                    compare: function (a, b) {\n                        if (a.items[0].number === b.items[0].number) {\n                            return 0;\n                        } else if (a.items[0].number > b.items[0].number) {\n                            return 1;\n                        } else {\n                            return -1;\n                        }\n                    }\n                },\n                {\n                    field: \"type\",\n                    compare: function (a, b) {\n                        if (a.items[0].number === b.items[0].number) {\n                            return 0;\n                        } else if (a.items[0].number > b.items[0].number) {\n                            return 1;\n                        } else {\n                            return -1;\n                        }\n                    }\n                },\n            ],\n        }),\n        methods: {\n            // On Sorter Changes\n            onSorterChanges(val) {\n                let today = new Date()\n\n                switch (val) {\n                    case \"Today\":\n                        this.start_date = kendo.toString(today, 'yyyy-MM-dd')\n                        this.end_date = kendo.toString(today, 'yyyy-MM-dd')\n\n                        break\n                    case \"This Week\":\n                        var first = today.getDate() - today.getDay(),\n                            last = first + 6;\n\n                        this.start_date = kendo.toString(new Date(today.setDate(first)), 'yyyy-MM-dd')\n                        this.end_date = kendo.toString(new Date(today.setDate(last)), 'yyyy-MM-dd')\n\n                        break\n                    case \"This Month\":\n                        this.start_date = kendo.toString(new Date(today.getFullYear(), today.getMonth(), 1), 'yyyy-MM-dd')\n                        this.end_date = kendo.toString(new Date(today.getFullYear(), today.getMonth(), 31), 'yyyy-MM-dd')\n\n                        break\n                    case \"This Year\":\n                        this.start_date = kendo.toString(new Date(today.getFullYear(), 0, 1), 'yyyy-MM-dd')\n                        this.end_date = kendo.toString(new Date(today.getFullYear(), 11, 31), 'yyyy-MM-dd')\n\n                        break\n                    default:\n                        this.start_date = \"\";\n                        this.end_date = \"\";\n                }\n            },\n            // Search Transaction\n            searchTransaction() {\n                let self = this,\n                    ba = this.bankAccount,\n                    sdate = this.start_date,\n                    edate = this.end_date\n\n                if (ba.uuid) {\n                    if (sdate && edate) {\n                        sdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z'\n\n                        edate = new Date(edate)\n                        edate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z'\n                    } else {\n                        sdate = 0\n                        edate = 0\n                    }\n\n                    this.isLoaded = true\n                    this.showLoading = true\n                    journalHandler.getEntryDetailByAccount(ba.account.uuid, {\n                        params: {\n                            start_date: sdate,\n                            end_date: edate,\n                        }\n                    })\n                        .then(res => {\n                            if (res) {\n                                this.bankAccountDetails = res\n                                this.journalEntriesDetails = res.entries_detail\n                            }\n                        })\n                        .finally(function () {\n                            self.showLoading = false\n                        })\n                }\n            },\n            // On Account Type Changes\n            async onBankTypeChanges(bankType) {\n                new Promise(resolve => {\n                    resolve('resolved')\n\n                    if (bankType === undefined) {\n                        this.bankAccounts = this.bankAccountsBk\n                    } else {\n                        this.bankAccounts = this.bankAccountsBk.filter(\n                            value => value.type === bankType\n                        )\n                    }\n                })\n            },\n            // On Search Changes\n            async onSearchChanges(searchText) {\n                new Promise(resolve => {\n                    resolve('resolved')\n\n                    if (searchText !== '') {\n                        this.bankAccounts = this.bankAccountsBk.filter(\n                            value => (~value.number.toLowerCase().indexOf(searchText))\n                        )\n                    } else {\n                        this.bankAccounts = this.bankAccountsBk\n                    }\n                })\n            },\n            // On Change item selection\n            onBankAccountGridChanges() {\n                let grid = kendo.jQuery(\"#gridBankAccount\").data(\"kendoGrid\")\n                let selectedItem = grid.dataItem(grid.select())\n\n                if (this.bankAccount.uuid !== selectedItem.uuid) {\n                    this.bankAccount = selectedItem\n                    this.searchTransaction()\n                }\n            },\n            // Go To Edit Page\n            goEdit() {\n                let ba = this.bankAccount\n                if (ba.uuid) {\n                    this.$router.push({name: 'Bank Account', params: {id: ba.uuid}})\n                }\n            },\n            // Load Reconcile\n            loadReconcile() {\n                reconcileHandler.getAll()\n                    .then(res => {\n                        if (res.data) {\n                            this.reconcileList = res.data\n                            this.showLoading = false\n                        }\n                    })\n            },\n        },\n        mounted() {\n            // Call Bank Account List\n            bankAccountHandler.getAll()\n                .then(res => {\n                    if (res) {\n                        this.bankAccounts = res.data\n                        this.bankAccountsBk = res.data\n                        this.showLoading = false\n                    }\n                })\n        },\n    };\n</script>\n<style scoped>\n</style>"]}]}
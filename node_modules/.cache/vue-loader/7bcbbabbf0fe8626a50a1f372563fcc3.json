{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/suppliers/ExpensesView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/suppliers/ExpensesView.vue","mtime":1641785918982},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgSGVscGVyIGZyb20gIkAvaGVscGVyLmpzIjsKCmNvbnN0IHB1cmNoYXNlRm9ybUNvbnRlbnRIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3B1cmNoYXNlRm9ybUNvbnRlbnRIYW5kbGVyIik7CmNvbnN0IGJpbGxpbmdIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2ludm9pY2UvaGFuZGxlci9iaWxsaW5nSGFuZGxlciIpOwppbXBvcnQgewogICAgRXhwZW5zZU1vZGVsLAogICAgRXhwZW5zZUVudHJ5RXh0ZW5kZWRNb2RlbCwKICAgIEpvdXJuYWxNb2RlbCwKICAgIEFjY291bnRNb2RlbCwKICAgIEN1cnJlbmN5TW9kZWwsCiAgICBVb21Nb2RlbCwKICAgIFBheW1lbnRUZXJtTW9kZWwsCiAgICBDYXNoQWR2YW5jZU1vZGVsLAogICAgU3VwcGxpZXJNb2RlbCwKICAgIENvbnRhY3RNb2RlbCwKICAgIExvY2F0aW9uTW9kZWwsCiAgICBQcm9qZWN0TW9kZWwsCiAgICBTZWdtZW50TW9kZWwsCiAgICBDbGFzc01vZGVsLAogICAgUHVyY2hhc2VGb3JtQ29udGVudCwKfSBmcm9tICJAL3NjcmlwdHMvbW9kZWwvQXBwTW9kZWxzIjsKaW1wb3J0IGhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7Cgpjb25zdCB7ZXhwZW5zZUhhbmRsZXIsIGNhc2hBZHZhbmNlSGFuZGxlcn0gPSByZXF1aXJlKCJAL3NjcmlwdHMvQXBwSGFuZGxlcnMiKTsKY29uc3QgewogICAgQWNjb3VudFR5cGVDb2RlLAogICAgVHJhbnNhY3Rpb25TdGF0dXMsCiAgICBUYXhUeXBlLAp9ID0gcmVxdWlyZSgiQC9zY3JpcHRzL2RlZmF1bHRfc2V0dXAvQ29sbGVjdGlvbnMiKTsKaW1wb3J0IHtTaG93UmVzb3VyY2V9IGZyb20gIkAvb2JzZXJ2YWJsZS9zdG9yZSI7Ci8vIGZyb20KY29uc3Qge2dldEZvcm1TZXR0aW5nfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zZXR0aW5nc0hhbmRsZXIuanMiKQppbXBvcnQge3ByaW50fSBmcm9tICJAL2Zvcm0vUHVyY2hhc2VzLmpzIjsKaW1wb3J0IHtpMThufSBmcm9tICdAL2kxOG4nOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkV4cGVuc2VzVmlldyIsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgTG9hZGluZ01lOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9Mb2FkaW5nIiksCiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgICBpbml0RXhwZW5zZTogewogICAgICAgICAgICB0eXBlOiBFeHBlbnNlTW9kZWwsCiAgICAgICAgfSwKICAgIH0sCiAgICBkYXRhOiAoKSA9PiAoewogICAgICAgIC8vIE9iagogICAgICAgIGV4cGVuc2U6IG5ldyBFeHBlbnNlTW9kZWwoKSwKICAgICAgICBlbXBsb3llZTogbmV3IENvbnRhY3RNb2RlbCgpLAogICAgICAgIHN1cHBsaWVyOiBuZXcgU3VwcGxpZXJNb2RlbCgpLAogICAgICAgIGN1cnJlbmN5OiBuZXcgQ3VycmVuY3lNb2RlbCgpLAogICAgICAgIHBheW1lbnRUZXJtOiBuZXcgUGF5bWVudFRlcm1Nb2RlbCgpLAogICAgICAgIGRlcG9zaXRBY2NvdW50OiBuZXcgQWNjb3VudE1vZGVsKCksCiAgICAgICAgbG9jYXRpb246IG5ldyBMb2NhdGlvbk1vZGVsKCksCiAgICAgICAgcHJvamVjdDogbmV3IFByb2plY3RNb2RlbCgpLAogICAgICAgIHNlZ21lbnQ6IG5ldyBTZWdtZW50TW9kZWwoKSwKICAgICAgICBzZWNvbmRhcnlBY2NvdW50OiBuZXcgQWNjb3VudE1vZGVsKCksCiAgICAgICAgSGVscGVyOiBIZWxwZXIsCiAgICAgICAgVHJhbnNhY3Rpb25TdGF0dXM6IFRyYW5zYWN0aW9uU3RhdHVzLkVYUEVOU0UsCiAgICAgICAgLy8gU291cmNlcwogICAgICAgIGNhc2hBZHZhbmNlOiBuZXcgSm91cm5hbE1vZGVsKCksCiAgICAgICAgZXhwZW5zZUVudHJpZXM6IFtdLAogICAgICAgIC8vIE90aGVyCiAgICAgICAgc3ViVG90YWw6IDAsCiAgICAgICAgZGlzY291bnRBbW91bnQ6IDAsCiAgICAgICAgcHVyY2hhc2VUYXg6IDAsCiAgICAgICAgd2hkVGF4OiAwLAogICAgICAgIHRvdGFsQW1vdW50OiAwLAogICAgICAgIHN1cHBsaWVyRGVwb3NpdEFtb3VudDogMCwKICAgICAgICBkZXBvc2l0QW1vdW50OiAwLAogICAgICAgIGFtb3VudER1ZTogMCwKICAgICAgICBoYXNBZGRpdGlvbmFsQ29zdDogZmFsc2UsCiAgICAgICAgLy8gU2lkZWJhcgogICAgICAgIGlzSGlkZUJhcjogZmFsc2UsCiAgICAgICAgLy8gTG9hZGluZ01lCiAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgIGRlY2ltYWxGb3JtYXQ6ICJuMiIsCiAgICAgICAgcHVyY2hhc2VGb3JtQ29udGVudDogUHVyY2hhc2VGb3JtQ29udGVudCwKICAgICAgICBkZXBvc2l0QmFsYW5jZTogMCwKICAgICAgICB0cmFuc2FjdGlvbkhpc3Rvcnk6IFtdLAogICAgfSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgSGVscChrZXlfc2VhcmNoKSB7CiAgICAgICAgICAgIFNob3dSZXNvdXJjZShrZXlfc2VhcmNoKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRUeG5IaXN0b3J5KCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gIiIgfHwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSAodGhpcy4kcm91dGUucGFyYW1zLmlkIHx8ICcnKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJJZCA9IGlkLmluY2x1ZGVzKCd0eG4tJykgPyBpZCA6ICd0eG4tJyArIGlkCiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGxpbmdIYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlzdG9yeShzdHJJZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25IaXN0b3J5ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkUHVyY2hhc2VGb3JtQ29udGVudCgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgcHVyY2hhc2VGb3JtQ29udGVudEhhbmRsZXIubGlzdCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdXBwbGllclNldHRpbmcgPSBkYXRhWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVyY2hhc2VGb3JtQ29udGVudCA9IHN1cHBsaWVyU2V0dGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VwcGxpZXJTZXR0aW5nLmhhc093blByb3BlcnR5KCJkZWNpbWFsIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNpbWFsRm9ybWF0ID0gIm4iICsgc3VwcGxpZXJTZXR0aW5nLmRlY2ltYWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vIEFkZCAyIGRlZmF1bHQgbGluZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5hZGRSb3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5hZGRSb3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBudW1iZXJGb3JtYXQodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGtlbmRvLnRvU3RyaW5nKHZhbHVlLCBgJHt0aGlzLmRlY2ltYWxGb3JtYXR9YCk7CiAgICAgICAgfSwKICAgICAgICBmb3JtYXREYXRlVGltZSh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcoCiAgICAgICAgICAgICAgICBuZXcgRGF0ZSh2YWx1ZSksCiAgICAgICAgICAgICAgICBoZWxwZXIuaW5zdGl0dXRlRGF0ZUZvcm1hdCgpICsgYCBoaDptbSB0dGAKICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIC8vIExvYWQgam91cm5hbCBhY2NvcmRpbmcgdG8gcXVlcnkgc3RyaW5nIHtpZH0KICAgICAgICBsb2FkT2JqKCkgewogICAgICAgICAgICAvLyBBY2Nlc3MgUXVlcnkgU3RyaW5nCiAgICAgICAgICAgIGxldCBxID0gdGhpcy4kcm91dGUucGFyYW1zOwogICAgICAgICAgICBpZiAocS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBpZiAocS5pZCAhPT0gdGhpcy5leHBlbnNlLnV1aWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBleHBlbnNlSGFuZGxlcgogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0T25lKHEuaWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJpbmQgT2JqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGVuc2UgPSBuZXcgRXhwZW5zZU1vZGVsKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiZXhwZW5zZSIsdGhpcy5leHBlbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAvLyAuZmluYWxseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAvLyAJLy8gc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFN1cHBsaWVyIFNldHRpbmcgc3VjaCBhcyBkZWNpbWFsIGZvcm1hdAogICAgICAgICAgICB0aGlzLmxvYWRQdXJjaGFzZUZvcm1Db250ZW50KCk7CiAgICAgICAgICAgIHRoaXMubG9hZFR4bkhpc3RvcnkoKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGJpbmREYXRhKCkgewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgIC8vIENvbnRhY3RzCiAgICAgICAgICAgIHRoaXMuc3VwcGxpZXIgPSBuZXcgU3VwcGxpZXJNb2RlbCh0aGlzLmV4cGVuc2Uuc3VwcGxpZXIpOwogICAgICAgICAgICB0aGlzLmVtcGxveWVlID0gbmV3IENvbnRhY3RNb2RlbCh0aGlzLmV4cGVuc2UuZW1wbG95ZWUpOwogICAgICAgICAgICB0aGlzLmhhc0FkZGl0aW9uYWxDb3N0ID0gQm9vbGVhbigKICAgICAgICAgICAgICAgIHRoaXMuZXhwZW5zZS5hZGRpdGlvbmFsX2Nvc3Rfc3VwcGxpZXIudXVpZAogICAgICAgICAgICApOwoKICAgICAgICAgICAgLy8gQ3VycmVuY3kKICAgICAgICAgICAgdGhpcy5jdXJyZW5jeSA9IG5ldyBDdXJyZW5jeU1vZGVsKHRoaXMuZXhwZW5zZS5iaWxsX2N1cnJlbmN5KTsKCiAgICAgICAgICAgIC8vIENhc2ggQWR2YW5jZQogICAgICAgICAgICBpZiAodGhpcy5leHBlbnNlLnVzZV9mb3JfdHJhbnNhY3Rpb25fdXVpZCAhPT0gIiIpIHsKICAgICAgICAgICAgICAgIGxldCBjYXNoQWR2YW5jZSA9IGF3YWl0IGNhc2hBZHZhbmNlSGFuZGxlci5nZXRPbmUoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBlbnNlLnVzZV9mb3JfdHJhbnNhY3Rpb25fdXVpZAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMuY2FzaEFkdmFuY2UgPSBuZXcgQ2FzaEFkdmFuY2VNb2RlbChjYXNoQWR2YW5jZS5kYXRhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gUGF5bWVudCBUZXJtCiAgICAgICAgICAgIGxldCBwYXltZW50VGVybXMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicGF5bWVudFRlcm1zL2dldExpc3QiKTsKICAgICAgICAgICAgdGhpcy5wYXltZW50VGVybSA9IG5ldyBQYXltZW50VGVybU1vZGVsKHBheW1lbnRUZXJtcy5maW5kKAogICAgICAgICAgICAgICAgKGkpID0+IGkuaWQgPT09IHRoaXMuZXhwZW5zZS5wYXltZW50X3Rlcm0KICAgICAgICAgICAgKSk7CgogICAgICAgICAgICAvLyBFbnRyaWVzCiAgICAgICAgICAgIGxldCBlbnRyaWVzID0gW10sCiAgICAgICAgICAgICAgICBzdWJUb3RhbCA9IDAsCiAgICAgICAgICAgICAgICBkaXNjb3VudEFtb3VudCA9IDAsCiAgICAgICAgICAgICAgICBwdXJjaGFzZVRheEFtb3VudCA9IDAsCiAgICAgICAgICAgICAgICB3aGRUYXhBbW91bnQgPSAwLAogICAgICAgICAgICAgICAgc2Vjb25kYXJ5QWNjb3VudHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYWNjb3VudGluZy9nZXRTZWNvbmRhcnlBY2NvdW50cyIpLAogICAgICAgICAgICAgICAgdGF4SXRlbXMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidGF4ZXMvZ2V0TGlzdCIpLAogICAgICAgICAgICAgICAgdW9tcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1bml0T2ZNZWFzdXJlbWVudHMvZ2V0TGlzdCIpLAogICAgICAgICAgICAgICAgY2xhenogPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2xhc3Nlcy9nZXRMaXN0Iik7CgogICAgICAgICAgICB0aGlzLmV4cGVuc2UuZXhwZW5zZV9lbnRyaWVzLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBQdXJjaGFzZSBUYXgKICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5udW1iZXIgPT09IEFjY291bnRUeXBlQ29kZS5QVVJDSEFTRV9UQVgpIHsKICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZVRheEFtb3VudCArPSB2YWx1ZS5hbW91bnQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5hbW91bnQgPiAwICYmIHZhbHVlLmFjY291bnQubnVtYmVyICE9PSBBY2NvdW50VHlwZUNvZGUuVEFYX1JFTEFURURfRVhQRU5TRV9DT0RFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeSA9IG5ldyBFeHBlbnNlRW50cnlFeHRlbmRlZE1vZGVsKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuZGVjaW1hbEZvcm1hdCA9IHRoaXMuZGVjaW1hbEZvcm1hdDsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNlY29uZGFyeSBBY2NvdW50ICovCiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnNlY29uZGFyeV9hY2NvdW50ID0gbmV3IEFjY291bnRNb2RlbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZGFyeUFjY291bnRzLmZpbmQoKGkpID0+IGkudXVpZCA9PT0gdmFsdWUuc2Vjb25kYXJ5X2FjY191dWlkKQogICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidG90YWwKICAgICAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdmFsdWUuYW1vdW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVU9NCiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnVvbSA9IG5ldyBVb21Nb2RlbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVvbXMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gdmFsdWUudW9tX3V1aWQpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBUYXgKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmhhc093blByb3BlcnR5KCd0YXhfaXRlbScpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRheF9pdGVtLmhhc093blByb3BlcnR5KCd1dWlkJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS50YXhfaXRlbSA9IHRheEl0ZW1zLmZpbmQoKGkpID0+IGkuaWQgPT09IHZhbHVlLnRheF9pdGVtLnV1aWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBcHBseSBJbmNsdXNpdmUgVGF4IHRvIGFtb3VudCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50YXhfaXRlbS5oYXNPd25Qcm9wZXJ0eSgndGF4VHlwZScpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkudGF4X2l0ZW0udGF4VHlwZS5oYXNPd25Qcm9wZXJ0eSgndHlwZUlkJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkudGF4X2l0ZW0udGF4VHlwZS50eXBlSWQgPT09IDEgJiYgZW50cnkudGF4X2l0ZW0uYmFzZUFtb3VudC50b0xvd2VyQ2FzZSgpID09PSBUYXhUeXBlLklOQ0xVU0lWRSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSBlbnRyeS50YXhfYW1vdW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhc3NlcwogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5jbGFzczEgPSBuZXcgQ2xhc3NNb2RlbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXp6LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IHZhbHVlLmNsYXNzXzFfdXVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuY2xhc3MyID0gbmV3IENsYXNzTW9kZWwoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGF6ei5maW5kKChpdGVtKSA9PiBpdGVtLmlkID09PSB2YWx1ZS5jbGFzc18yX3V1aWQpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmNsYXNzMyA9IG5ldyBDbGFzc01vZGVsKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhenouZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gdmFsdWUuY2xhc3NfM191dWlkKQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5jbGFzczQgPSBuZXcgQ2xhc3NNb2RlbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXp6LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IHZhbHVlLmNsYXNzXzRfdXVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuY2xhc3M1ID0gbmV3IENsYXNzTW9kZWwoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGF6ei5maW5kKChpdGVtKSA9PiBpdGVtLmlkID09PSB2YWx1ZS5jbGFzc181X3V1aWQpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzLnB1c2goZW50cnkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpc2NvdW50CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5udW1iZXIgPT09IEFjY291bnRUeXBlQ29kZS5ESVNDT1VOVCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRBbW91bnQgKz0gdmFsdWUuYW1vdW50ICogLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdIRCBUYXgKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLm51bWJlciA9PT0gQWNjb3VudFR5cGVDb2RlLldIRF9UQVgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZFRheEFtb3VudCArPSB2YWx1ZS5hbW91bnQgKiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVwb3NpdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAofkFjY291bnRUeXBlQ29kZS5QVVJDSEFTRV9ERVBPU0lUUy5pbmRleE9mKHZhbHVlLmFjY291bnQuYWNjb3VudF90eXBlLm51bWJlcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwb3NpdEFtb3VudCA9IHZhbHVlLmFtb3VudCAqIC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBvc2l0RW50cnlVdWlkID0gdmFsdWUudXVpZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNhY3Rpb24gQWNjb3VudCAoUGF5YWJsZSBBY2NvdW50IC8gQ2xlYXJpbmcgQWNjb3VudCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmFjY291bnQudXVpZCA9PT0gdGhpcy5leHBlbnNlLnRyYW5zYWN0aW9uX2FjY291bnQudXVpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbW91bnREdWUgPSB2YWx1ZS5hbW91bnQgKiAtMTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZWNvbmRhcnkgQWNjb3VudCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlBY2NvdW50ID0gbmV3IEFjY291bnRNb2RlbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRhcnlBY2NvdW50cy5maW5kKChpKSA9PiBpLnV1aWQgPT09IHZhbHVlLnNlY29uZGFyeV9hY2NfdXVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gQmluZCBFeHBlbnNlIEVudHJpZXMKICAgICAgICAgICAgdGhpcy5leHBlbnNlRW50cmllcyA9IGVudHJpZXM7CgogICAgICAgICAgICAvLyBDYWxjdWxhdGlvbgogICAgICAgICAgICB0aGlzLnN1YlRvdGFsID0gc3ViVG90YWw7CiAgICAgICAgICAgIHRoaXMuZGlzY291bnRBbW91bnQgPSBkaXNjb3VudEFtb3VudDsKICAgICAgICAgICAgdGhpcy5wdXJjaGFzZVRheCA9IHB1cmNoYXNlVGF4QW1vdW50OwogICAgICAgICAgICB0aGlzLndoZFRheCA9IHdoZFRheEFtb3VudDsKICAgICAgICAgICAgdGhpcy50b3RhbEFtb3VudCA9IHN1YlRvdGFsIC0gdGhpcy5kaXNjb3VudEFtb3VudDsKCiAgICAgICAgICAgIC8vIFNpZGViYXIKICAgICAgICAgICAgbGV0IGxvY2F0aW9ucyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJsb2NhdGlvbnMvZ2V0TGlzdCIpOwogICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gbmV3IExvY2F0aW9uTW9kZWwoCiAgICAgICAgICAgICAgICBsb2NhdGlvbnMuZmluZCgoaSkgPT4gaS5pZCA9PT0gdGhpcy5leHBlbnNlLmxvY2F0aW9uX3V1aWQpCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBsZXQgc2VnbWVudHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2VnbWVudHMvZ2V0TGlzdCIpOwogICAgICAgICAgICB0aGlzLnNlZ21lbnQgPSBuZXcgU2VnbWVudE1vZGVsKAogICAgICAgICAgICAgICAgc2VnbWVudHMuZmluZCgoaSkgPT4gaS5pZCA9PT0gdGhpcy5leHBlbnNlLnNlZ21lbnRfdXVpZCkKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGxldCBwcm9qZWN0cyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJwcm9qZWN0cy9nZXRMaXN0Iik7CiAgICAgICAgICAgIHRoaXMucHJvamVjdCA9IG5ldyBQcm9qZWN0TW9kZWwoCiAgICAgICAgICAgICAgICBwcm9qZWN0cy5maW5kKChpKSA9PiBpLmlkID09PSB0aGlzLmV4cGVuc2UucHJvamVjdF91dWlkKQogICAgICAgICAgICApOwoKICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgLy8gUm93IE51bWJlciBUZW1wbGF0ZQogICAgICAgIHJvd051bWJlclRtcGwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5leHBlbnNlQWNjb3VudERTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwoKICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgICAgICB9LAogICAgICAgIGdldEV4cGVuc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRXhwZW5zZU1vZGVsKHRoaXMuZXhwZW5zZSk7CiAgICAgICAgfSwKICAgICAgICBlZGl0KCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICBuYW1lOiAiRXhwZW5zZXMiLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7aW5pdEV4cGVuc2U6IHRoaXMuZ2V0RXhwZW5zZSgpfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBoaWRlU21hbGxTaWRlQmFyKCkgewogICAgICAgICAgICB0aGlzLmlzSGlkZUJhciA9ICF0aGlzLmlzSGlkZUJhcjsKICAgICAgICB9LAogICAgICAgIF9wcmludChpZCkgewogICAgICAgICAgICBsZXQgcGFyYW1zID0gIj9mb3JtVHlwZT1FeHBlbnNlIgogICAgICAgICAgICBsZXQgZXhwX2RhdGEgPSB7fTsKICAgICAgICAgICAgZXhwX2RhdGFbJ2l0ZW1MaW5lcyddID0gdGhpcy5leHBlbnNlRW50cmllczsKICAgICAgICAgICAgZXhwX2RhdGFbJ3N1YlRvdGFsJ10gPSB0aGlzLnN1YlRvdGFsOwogICAgICAgICAgICBleHBfZGF0YVsnZGlzY291bnRBbW91bnQnXSA9IHRoaXMuZGlzY291bnRBbW91bnQ7CiAgICAgICAgICAgIGV4cF9kYXRhWydwdXJjaGFzZVRheCddID0gdGhpcy5wdXJjaGFzZVRheDsKICAgICAgICAgICAgZXhwX2RhdGFbJ3doZFRheCddID0gdGhpcy53aGRUYXg7CiAgICAgICAgICAgIGV4cF9kYXRhWyd0b3RhbEFtb3VudCddID0gdGhpcy50b3RhbEFtb3VudDsKICAgICAgICAgICAgZXhwX2RhdGFbJ3N1cHBsaWVyJ10gPSB0aGlzLnN1cHBsaWVyCiAgICAgICAgICAgIGV4cF9kYXRhWydjdXJyZW5jeSddID0gdGhpcy5jdXJyZW5jeQogICAgICAgICAgICBleHBfZGF0YVsncGF5bWVudFRlcm0nXSA9IHRoaXMucGF5bWVudFRlcm0KICAgICAgICAgICAgZXhwX2RhdGFbJ3RyYW5zYWN0aW9uQWNjb3VudCddID0gdGhpcy5leHBlbnNlLnRyYW5zYWN0aW9uX2FjY291bnQKICAgICAgICAgICAgZXhwX2RhdGFbJ2RlcG9zaXRBY2NvdW50J10gPSB0aGlzLmRlcG9zaXRBY2NvdW50CiAgICAgICAgICAgIGV4cF9kYXRhWydzZWdlbWVudCddID0gdGhpcy5zZWdlbWVudAogICAgICAgICAgICBleHBfZGF0YVsnbG9jYXRpb24nXSA9IHRoaXMubG9jYXRpb24sCiAgICAgICAgICAgICAgICBleHBfZGF0YVsnZGVjaW1hbEZvcm1hdCddID0gdGhpcy5kZWNpbWFsRm9ybWF0CiAgICAgICAgICAgIGxldCBhbGxfZXhwZW5zZSA9IHsKICAgICAgICAgICAgICAgIC4uLmV4cF9kYXRhLAogICAgICAgICAgICAgICAgLi4udGhpcy5leHBlbnNlCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdldEZvcm1TZXR0aW5nKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGFbIjAiXS5zZXR0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGFsbF9leHBlbnNlLCBpZCwgcmVzLmRhdGEuZGF0YVsiMCJdLnNldHRpbmdzKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKGkxOG4udCgncGxlYXNlX3NhdmVfZm9ybV9pbl9zZXR0aW5nJykpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgLy8gY2FsbCBhZ2FpbiB0aGUgbWV0aG9kIGlmIHRoZSByb3V0ZSBjaGFuZ2VzCiAgICAgICAgJHJvdXRlOiAibG9hZE9iaiIsCiAgICAgICAgaW5pdEV4cGVuc2UoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmluaXRFeHBlbnNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRQdXJjaGFzZUZvcm1Db250ZW50KCk7CiAgICAgICAgICAgICAgICB0aGlzLmV4cGVuc2UgPSB0aGlzLmluaXRFeHBlbnNlOwogICAgICAgICAgICAgICAgdGhpcy5iaW5kRGF0YSgpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkVHhuSGlzdG9yeSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gZmV0Y2ggdGhlIGRhdGEgd2hlbiB0aGUgdmlldyBpcyBjcmVhdGVkIGFuZCB0aGUgZGF0YSBpcwogICAgICAgIC8vIGFscmVhZHkgYmVpbmcgb2JzZXJ2ZWQKICAgICAgICB0aGlzLmxvYWRPYmooKTsKICAgICAgICBhd2FpdCB0aGlzLmxvYWRUeG5IaXN0b3J5KCk7CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAvLyBwYXltZW50VGVybU5hbWUoKSB7CiAgICAgICAgLy8gICAgIGlmICh0aGlzLnBheW1lbnRUZXJtKSB7CiAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50VGVybS5uYW1lOwogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gICAgIHJldHVybiAiIjsKICAgICAgICAvLyB9LAogICAgICAgIHR4blN0YXR1cygpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZXhwZW5zZSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwZW5zZS5oYXNPd25Qcm9wZXJ0eSgic3RhdHVzIikpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmV4cGVuc2Uuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgIGxldCBzdGF0dXNUZXh0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9ICJPUEVOIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gIlBBUlRJQUxMWSBQQUlEIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gIlBBSUQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSAiVk9JRCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1c1RleHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0sCiAgICAgICAgbnVtYmVyOiB7CiAgICAgICAgICAgIGdldCgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cGVuc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBlbnNlLmhhc093blByb3BlcnR5KCJudW1iZXIiKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5leHBlbnNlLm51bWJlcjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["ExpensesView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0nBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExpensesView.vue","sourceRoot":"src/views/suppliers","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col>\n                    <div class=\"function_wrapper px-4 pt-3\">\n                        <v-row>\n                            <v-col\n                                class=\"bigSide pr-1\"\n                                sm=\"8\"\n                                cols=\"12\"\n                                style=\"transition: .3s ease-in;\"\n                                :class=\"{ hide_big_bar_class: isHideBar }\"\n                            >\n                                <v-form ref=\"form\">\n                                    <div class=\"function_header\">\n                                        <h2 class=\"mb-0\">\n                                            {{ $t(\"expenses\") }} #{{ number }} ({{\n                                                TransactionStatus[expense.is_cleared]\n                                            }})\n                                        </h2>\n                                        <v-icon\n                                            v-if=\"isHideBar\"\n                                            onclick=\"window.history.go(-1); return false;\"\n                                            style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                            class=\"float-right\"\n                                        >close\n                                        </v-icon>\n                                        <span\n                                            style=\"transition: .3s ease-in; z-index:10;\"\n                                            :class=\"{\n\t\t\t\t\t\t\t\t\t\t\t\ticonArrow: !isHideBar,\n\t\t\t\t\t\t\t\t\t\t\t\ticonArrowHide: isHideBar,\n\t\t\t\t\t\t\t\t\t\t\t}\"\n                                        >\n\t\t\t\t\t\t\t\t\t\t\t<v-icon\n                                                size=\"22\"\n                                                class=\"arr_icon\"\n                                                @click=\"hideSmallSideBar\"\n                                                v-if=\"isHideBar\"\n                                            >\n\t\t\t\t\t\t\t\t\t\t\t\tmdi-chevron-left-circle\n\t\t\t\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t<v-icon\n                                                size=\"22\"\n                                                class=\"arr_icon\"\n                                                @click=\"hideSmallSideBar\"\n                                                v-if=\"!isHideBar\"\n                                            >\n\t\t\t\t\t\t\t\t\t\t\t\tmdi-chevron-right-circle\n\t\t\t\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t\t\t\t</span>\n                                    </div>\n                                    <div class=\"\">\n                                        <!-- Form -->\n                                        <v-row class=\" mx-0 grayBg\">\n                                            <v-col sm=\"3\" cols=\"12\" class=\"pb-0\">\n                                                <label class=\"label  mb-0\">{{ $t(\"supplier\") }}</label>\n                                                <h3 class=\"text-bold  py-1\">{{ supplier.name }}</h3>\n                                                <label class=\"label mb-0\">{{ $t(\"date\") }}</label>\n                                                <h3 class=\"text-bold py-1\">\n                                                    {{ Helper.dateFormat(expense.expense_date) }}\n                                                </h3>\n                                            </v-col>\n                                            <v-col sm=\"9\" cols=\"12\">\n                                                <v-row class=\" mr-1\">\n                                                    <v-col sm=\"4\" cols=\"12\" class=\"py-1\">\n                                                        <label class=\"label mb-0\">{{\n                                                                $t(\"bill_number\")\n                                                            }}</label>\n                                                        <h3 class=\"text-bold py-1\">\n                                                            {{ expense.bill_number }}\n                                                        </h3>\n                                                        <label class=\"label mb-0\">{{\n                                                                $t(\"due_date\")\n                                                            }}</label>\n                                                        <h3 class=\"text-bold py-1\">\n                                                            {{ Helper.dateFormat(expense.due_date) }}\n                                                        </h3>\n                                                    </v-col>\n                                                    <v-col sm=\"4\" cols=\"12\" class=\"py-1\">\n                                                        <label class=\"label mb-0\">{{\n                                                                $t(\"bill_date\")\n                                                            }}</label>\n                                                        <h3 class=\"text-bold py-1\">\n                                                            {{ Helper.dateFormat(expense.bill_date) }}\n                                                        </h3>\n                                                        <label class=\"label mb-0\">{{\n                                                                $t(\"currency\")\n                                                            }}</label>\n                                                        <h3 class=\"text-bold py-1\">{{ currency.code }}</h3>\n                                                    </v-col>\n                                                    <v-col sm=\"4\" cols=\"12\" class=\"py-1\">\n                                                        <label class=\"label mb-0\">{{ $t(\"term\") }}</label>\n                                                        <h3 class=\"text-bold py-1\">\n                                                            {{ paymentTerm.name }}\n                                                        </h3>\n                                                        <label class=\"label mb-0\">{{\n                                                                $t(\"additional_cost_of\")\n                                                            }}</label>\n                                                        <h3 class=\"text-bold py-1\">\n                                                            {{ expense.additional_cost_supplier.name }}\n                                                        </h3>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-col>\n                                        </v-row>\n                                        <!-- Grid -->\n                                        <div class=\"table_1\">\n                                            <v-row class=\"mx-0 pb-2\" color=\"primary\">\n                                                <v-col cols=\"12\">\n                                                    <h3 class=\"text-uppercase color_grey\">\n                                                        {{ $t(\"expense_accounts\") }}\n                                                    </h3>\n                                                </v-col>\n                                                <v-col sm=\"12\" cols=\"12\" class=\"pa-0\">\n                                                    <kendo-datasource\n                                                        ref=\"expenseAccountDS\"\n                                                        :data=\"expenseEntries\"\n                                                    />\n                                                    <kendo-grid\n                                                        id=\"expenseGrid\"\n                                                        ref=\"expenseGrid\"\n                                                        class=\"grid-function\"\n                                                        :data-source-ref=\"'expenseAccountDS'\"\n                                                        :sortable=\"false\"\n                                                        :filterable=\"false\"\n                                                        :column-menu=\"true\"\n                                                        :editable=\"false\"\n                                                        :scrollable-virtual=\"true\"\n                                                    >\n                                                        <kendo-grid-column\n                                                            :title=\"$t('no.')\"\n                                                            :template=\"rowNumberTmpl\"\n                                                            :width=\"55\"\n                                                            :column-menu=\"false\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass: 'text-products',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                            :attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: products',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'account'\"\n                                                            :title=\"$t('account')\"\n                                                            :width=\"200\"\n                                                            :template=\"this.$store.state.accounting.accountLanguage === 'English' ? '<span>#=account.name||``#</span>' : '<span>#=account.local_name||``#</span>' \"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:field=\"'secondary_account'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('s_account')\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:template=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.accounting.accountLanguage ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'English'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '<span>#=secondary_account.number#</span> <span>#=secondary_account.name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '<span>#=secondary_account.number#</span> <span>#=secondary_account.local_name#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:width=\"200\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:hidden=\"!this.$store.state.accounting.secondaryAccount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n                                                        <kendo-grid-column\n                                                            :field=\"'description'\"\n                                                            :title=\"$t('description')\"\n                                                            :width=\"200\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'quantity'\"\n                                                            :title=\"$t('qty')\"\n                                                            :width=\"160\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'uom'\"\n                                                            :title=\"$t('uom')\"\n                                                            :template=\"'<span>#=uom.name||``#</span>'\"\n                                                            :width=\"150\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-align: right; background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                            :attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right;',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'price'\"\n                                                            :title=\"$t('price')\"\n                                                            :width=\"150\"\n                                                            :template=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<span>#=kendo.toString(price, decimalFormat)#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-align: right; background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                            :attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'amount'\"\n                                                            :title=\"$t('amount')\"\n                                                            :width=\"150\"\n                                                            :editable=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n                                                            :template=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<span>#=kendo.toString(amount, decimalFormat)#</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-align: right; background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                            :attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'discount'\"\n                                                            :title=\"$t('discount')\"\n                                                            :template=\"'<span>#=discount.name||``#</span>'\"\n                                                            :width=\"150\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-align: right; background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                            :attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'tax_item'\"\n                                                            :title=\"$t('tax')\"\n                                                            :template=\"'<span>#= tax_item.defaultTax || `` #</span>'\"\n                                                            :width=\"150\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-align: right; background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                            :attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'class1'\"\n                                                            :title=\"$t('class_1')\"\n                                                            :template=\"'<span>#=class1.name||``#</span>'\"\n                                                            :width=\"200\"\n                                                            :hidden=\"!purchaseFormContent.class1\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'class2'\"\n                                                            :title=\"$t('class_2')\"\n                                                            :template=\"'<span>#=class2.name||``#</span>'\"\n                                                            :width=\"200\"\n                                                            :hidden=\"!purchaseFormContent.class2\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'class3'\"\n                                                            :title=\"$t('class_3')\"\n                                                            :template=\"'<span>#=class3.name||``#</span>'\"\n                                                            :width=\"200\"\n                                                            :hidden=\"!purchaseFormContent.class3\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'class4'\"\n                                                            :title=\"$t('class_4')\"\n                                                            :template=\"'<span>#=class4.name||``#</span>'\"\n                                                            :width=\"200\"\n                                                            :hidden=\"!purchaseFormContent.class4\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                        <kendo-grid-column\n                                                            :field=\"'class5'\"\n                                                            :title=\"$t('class_5')\"\n                                                            :template=\"'<span>#=class5.name||``#</span>'\"\n                                                            :width=\"200\"\n                                                            :hidden=\"!purchaseFormContent.class5\"\n                                                            :headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n                                                        />\n                                                    </kendo-grid>\n                                                </v-col>\n                                            </v-row>\n                                        </div>\n                                        <div class=\"table_2\">\n                                            <v-row\n                                                class=\"pt-5 pb-2\"\n                                                style=\"background-color: #fff; width: 100%; margin: 10px auto 0;\"\n                                            >\n                                                <v-col cols=\"12\">\n                                                    <div class=\"color_gey\">\n                                                        {{ $t(\"expense_make_with\") }}\n                                                        <v-radio-group\n                                                            class=\"custom-radio mt-0 pt-0 hide_form_alert\"\n                                                            v-model=\"expense.use_for_option\"\n                                                            row\n                                                            readonly\n                                                        >\n                                                            <v-radio :label=\"$t('credit')\" :value=\"0\"/>\n                                                            <v-radio :label=\"$t('cash')\" :value=\"3\"/>\n                                                            <v-radio\n                                                                :label=\"$t('reimbursement')\"\n                                                                :value=\"1\"\n                                                            />\n                                                            <v-radio :label=\"$t('cash_advance')\" :value=\"2\"/>\n                                                        </v-radio-group>\n                                                    </div>\n                                                </v-col>\n                                                <v-col sm=\"12\" cols=\"12\" class=\"pa-0\">\n                                                    <label class=\"label\">{{ $t(\"transaction_account\") }}</label>\n                                                    <v-text-field\n                                                        v-model=\"expense.transaction_account.name\"\n                                                        outlined\n                                                        readonly\n                                                    />\n\n                                                    <div v-if=\"this.$store.state.accounting.secondaryAccount\">\n                                                        <label class=\"label\">{{ $t(\"secondary_account\") }}</label>\n                                                        <v-text-field\n                                                            v-model=\"secondaryAccount.name\"\n                                                            outlined\n                                                            readonly\n                                                        />\n                                                    </div>\n                                                </v-col>\n                                            </v-row>\n                                            <!-- table bottom -->\n                                            <v-row style=\"background-color: #fff;\">\n                                                <v-col sm=\"6\" cols=\"12\">\n                                                    <div class=\"pa-2\">\n                                                        <v-row>\n                                                            <v-col sm=\"6\" cols=\"12\">\n                                                                <label>{{ $t(\"message_on_voucher\") }}</label>\n                                                                 <h4 class=\"text-bold py-2\">\n                                                                 {{ expense.voucher_note }}\n                                                                </h4>\n                                                            </v-col>\n                                                            <v-col sm=\"6\" cols=\"12\">\n                                                                <label>{{ $t(\"message_for_journal\") }}</label>\n                                                                <h4 class=\"text-bold py-2\">\n                                                                   {{ expense.journal_note }}\n                                                                </h4>\n                                                            </v-col>\n                                                        </v-row>\n                                                    </div>\n                                                </v-col>\n                                                <v-col sm=\"6\" cols=\"12\">\n                                                    <v-simple-table>\n                                                        <template v-slot:default>\n                                                            <tbody>\n                                                            <tr>\n                                                                <td class=\"text-left\">\n                                                                    {{ $t(\"subtotal\") }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left text-bold\">\n                                                                    {{ numberFormat(subTotal) }}\n                                                                </td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class=\"text-left\">\n                                                                    {{ $t(\"discount\") }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left  text-bold\">\n                                                                    ({{ numberFormat(discountAmount) }})\n                                                                </td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class=\"text-left\">\n                                                                    {{ $t(\"purchase_tax\") }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left  text-bold\">\n                                                                    {{ numberFormat(purchaseTax) }}\n                                                                </td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class=\"text-left\">\n                                                                    {{ $t(\"withholding_tax\") }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left  text-bold\">\n                                                                    {{ numberFormat(whdTax) }}\n                                                                </td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class=\"text-left text-uppercase\">\n                                                                    {{ $t(\"total\") }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left primary--text text-bold\">\n                                                                    {{ numberFormat(totalAmount) }}\n                                                                </td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class=\"text-left\">\n                                                                    {{ $t(\"deposit\") }}\n                                                                    <span\n                                                                        class=\"float-right primary--text\"\n                                                                    ></span>\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left\">\n                                                                    {{ numberFormat(depositAmount) }}\n                                                                </td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class=\"text-left\">\n                                                                    {{ $t(\"amount_due\") }}\n                                                                </td>\n                                                                <td class=\"text-center\">:</td>\n                                                                <td class=\"text-left primary--text text-bold\">\n                                                                    {{ numberFormat(amountDue) }}\n                                                                </td>\n                                                            </tr>\n                                                            </tbody>\n                                                        </template>\n                                                    </v-simple-table>\n                                                </v-col>\n                                            </v-row>\n                                        </div>\n                                    </div>\n                                    <v-divider/>\n                                    <div class=\"function_footer mt-0 py-2\">\n                                        <!-- <p class=\"float-left  color_grey py-3 mb-0\">\n                                            {{ $t(\"standard_commercial_invoice\") }}\n                                        </p> -->\n\n                                        <v-btn @click=\"_print(4)\" color=\"secondary\"\n                                               class=\"float-right save_option mx-1\">\n                                            {{ $t('print') }}\n                                        </v-btn>\n                                        <!-- <v-btn class=\"float-right btn_delete mx-1\">\n                                                                                                                                {{$t('delete')}}\n                                                                                                                        </v-btn> -->\n                                        <v-btn\n                                            color=\"primary\"\n                                            class=\"float-right white--text capitalize mx-1\"\n                                            v-show=\"expense.is_cleared === 0 || expense.use_for_option === 3 \"\n                                            @click=\"edit\"\n                                        >\n                                            {{ $t(\"edit\") }}\n                                        </v-btn>\n                                    </div>\n                                    <v-divider/>\n                                </v-form>\n                            </v-col>\n                            <v-col\n                                class=\"smallSide\"\n                                sm=\"4\"\n                                style=\"transition: .3s ease-in;\"\n                                :class=\"{ hide_small_bar_class: isHideBar }\"\n                            >\n                                <h3\n                                    style=\"color: #b3b5bc; font-size:20px;\"\n                                    v-if=\"!isHideBar\"\n                                    class=\"text-uppercase float-right mt-3\"\n                                >\n\t\t\t\t\t\t\t\t\t<span class=\"pointer\" @click=\"Help('expense view')\">\n\t\t\t\t\t\t\t\t\t\t{{ $t(\"help\") }}\n\t\t\t\t\t\t\t\t\t</span>\n                                    <v-icon\n                                        onclick=\"window.history.go(-1); return false;\"\n                                        style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                        class=\"float-right mt-n1\"\n                                    >close\n                                    </v-icon>\n                                </h3>\n\n                                <div\n                                    v-if=\"!isHideBar\"\n                                    class=\" small_sidebar mt-13 px-4  grayBg\"\n                                >\n                                    <v-card\n                                        color=\"primary\"\n                                        elevation=\"0\"\n                                        class=\"pa-2  primary--text text-bold rounded-0\"\n                                    >\n                                        <p class=\"white--text text-bold font_18 text-uppercase\">\n                                            {{ $t(\"expense_amount\") }}\n                                        </p>\n                                        <p\n                                            class=\"number mb-0 text-bold text-right white--text font_18 text-bold\"\n                                        >\n                                            {{ numberFormat(amountDue) }}\n                                        </p>\n                                    </v-card>\n                                    <h4 class=\"my-2 text-uppercase\">{{ $t(\"analysis\") }}</h4>\n                                    <v-row>\n                                        <v-col sm=\"6\" cols=\"6\" class=\"py-1\">\n                                            <label class=\"label\">{{ $t(\"employee\") }}</label>\n                                            <h4 class=\"text-bold py-1\">{{ employee.name }}</h4>\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"6\" class=\"py-1\">\n                                            <label class=\"label\">{{ $t(\"segment\") }}</label>\n                                            <h4 class=\"text-bold py-1\">{{ segment.name }}</h4>\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"6\" class=\"py-1\">\n                                            <label class=\"label\">{{ $t(\"project\") }}</label>\n                                            <h4 class=\"text-bold py-1\">{{ project.name }}</h4>\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"6\" class=\"py-1\">\n                                            <label class=\"label\">{{ $t(\"location\") }}</label>\n                                            <h3 class=\"text-bold py-1\">{{ location.name }}</h3>\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"6\" class=\"py-0\">\n                                            <label class=\"label\">{{ $t(\"month_of\") }}</label>\n                                            <h4 class=\"text-bold py-1\">{{ expense.month_of }}</h4>\n                                        </v-col>\n                                    </v-row>\n                                    <v-divider class=\"my-3\"/>\n                                    <v-row>\n                                        <v-col cols=\"4\" class=\"py-0 pr-0\">\n                                            <div class=\" my-1 pa-1 d-flex justify-space-between \">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"d-flex\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"pl-1\">Related to Cash Advance</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n                                            </div>\n                                        </v-col>\n                                        <v-col cols=\"8\" class=\"py-1 pr-3 pl-1\">\n                                            <label class=\"label mb-0 pl-3 pt-2\">{{\n                                                    $t(\"cash_advance_no\")\n                                                }}</label>\n                                            <span class=\"pl-1\">{{ cashAdvance.number }}</span>\n                                        </v-col>\n                                    </v-row>\n                                    <v-divider class=\"my-3\"/>\n                                    <!--                                    <h4 class=\"my-2 text-uppercase\">{{ $t('payment_information') }}</h4>-->\n                                    <!--                                    <v-row>-->\n                                    <!--                                        <v-col sm=\"6\" cols=\"6\" class=\"py-1\">-->\n                                    <!--                                            <label class=\"label text-bold\">{{ $t('payment_status') }}</label>-->\n                                    <!--                                            <v-img width=\"80%\" src=\"@/assets/images/paid.png\"/>-->\n\n                                    <!--                                        </v-col>-->\n                                    <!--                                        <v-col sm=\"6\" cols=\"6\" class=\"py-1\">-->\n                                    <!--                                            <label class=\"label text-bold\">{{ $t('payment_source') }}</label>-->\n                                    <!--                                            <v-img width=\"80%\" src=\"@/assets/images/aba2.png\"/>-->\n                                    <!--                                        </v-col>-->\n                                    <!--                                    </v-row>-->\n\n                                    <p class=\"color_grey mt-6 mb-2\">\n                                        {{ $t(\"transaction_history\") }}\n                                    </p>\n                                    <v-simple-table>\n                                        <template v-slot:default>\n                                            <tbody>\n                                                 <!-- <tr\n                                                v-for=\"item in transactionHistory\"\n                                                v-bind:key=\"item.id\"\n                                            >\n                                                <td class=\"text-left px-0 font_12\">\n                                                    {{ $t('created_by') }} :\n                                                    {{ expense.created_by.email }}\n                                                </td>\n                                                <td class=\"text-center px-0 font_12\">\n                                                    {{ formatDateTime(expense.created_date) }}\n                                                </td>\n                                            </tr> -->\n                                            <tr\n                                                v-for=\"item in transactionHistory\"\n                                                v-bind:key=\"item.id\"\n                                            >\n                                                <td class=\"text-left px-0 font_12\">\n                                                    {{ item.name }}\n                                                </td>\n                                                <td class=\"text-center px-0 font_12\">\n                                                    {{ formatDateTime(item.createdAt) }} &nbsp; ({{\n                                                        item.timeSince\n                                                    }})\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </template>\n                                    </v-simple-table>\n                                    <!--                                    <p class=\"mb-1\">-->\n                                    <!--                                        {{ $t('last_edited_by') }} :-->\n                                    <!--                                        <span class=\"text-bold\">-->\n                                    <!--\t\t\t\t\t\t\t\t\t\t\t{{-->\n                                    <!--                                                expense.modified_by.first_name === '' ? expense.created_by.first_name + ' ' + expense.created_by.last_name : expense.modified_by.first_name + ' ' + expense.modified_by.last_name-->\n                                    <!--                                            }}-->\n                                    <!--\t\t\t\t\t\t\t\t\t\t</span>-->\n                                    <!--                                    </p>-->\n                                    <!--                                    <p class=\"mb-1\">-->\n                                    <!--                                        {{ $t('last_edited_on') }} :-->\n                                    <!--                                        <span class=\"text-bold\">-->\n                                    <!--\t\t\t\t\t\t\t\t\t\t\t{{ expense.modified_date ? expense.modified_date : expense.created_date }}-->\n                                    <!--\t\t\t\t\t\t\t\t\t\t</span>-->\n                                    <!--                                    </p>-->\n                                </div>\n                            </v-col>\n                        </v-row>\n                    </div>\n                    <LoadingMe\n                        type=\"loading\"\n                        :isLoading=\"showLoading\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"\n                    />\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\n\nconst purchaseFormContentHandler = require(\"@/scripts/purchaseFormContentHandler\");\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nimport {\n    ExpenseModel,\n    ExpenseEntryExtendedModel,\n    JournalModel,\n    AccountModel,\n    CurrencyModel,\n    UomModel,\n    PaymentTermModel,\n    CashAdvanceModel,\n    SupplierModel,\n    ContactModel,\n    LocationModel,\n    ProjectModel,\n    SegmentModel,\n    ClassModel,\n    PurchaseFormContent,\n} from \"@/scripts/model/AppModels\";\nimport helper from \"@/helper.js\";\n\nconst {expenseHandler, cashAdvanceHandler} = require(\"@/scripts/AppHandlers\");\nconst {\n    AccountTypeCode,\n    TransactionStatus,\n    TaxType,\n} = require(\"@/scripts/default_setup/Collections\");\nimport {ShowResource} from \"@/observable/store\";\n// from\nconst {getFormSetting} = require(\"@/scripts/settingsHandler.js\")\nimport {print} from \"@/form/Purchases.js\";\nimport {i18n} from '@/i18n';\n\nexport default {\n    name: \"ExpensesView\",\n    components: {\n        LoadingMe: () => import(\"@/components/Loading\"),\n    },\n    props: {\n        initExpense: {\n            type: ExpenseModel,\n        },\n    },\n    data: () => ({\n        // Obj\n        expense: new ExpenseModel(),\n        employee: new ContactModel(),\n        supplier: new SupplierModel(),\n        currency: new CurrencyModel(),\n        paymentTerm: new PaymentTermModel(),\n        depositAccount: new AccountModel(),\n        location: new LocationModel(),\n        project: new ProjectModel(),\n        segment: new SegmentModel(),\n        secondaryAccount: new AccountModel(),\n        Helper: Helper,\n        TransactionStatus: TransactionStatus.EXPENSE,\n        // Sources\n        cashAdvance: new JournalModel(),\n        expenseEntries: [],\n        // Other\n        subTotal: 0,\n        discountAmount: 0,\n        purchaseTax: 0,\n        whdTax: 0,\n        totalAmount: 0,\n        supplierDepositAmount: 0,\n        depositAmount: 0,\n        amountDue: 0,\n        hasAdditionalCost: false,\n        // Sidebar\n        isHideBar: false,\n        // LoadingMe\n        showLoading: false,\n        decimalFormat: \"n2\",\n        purchaseFormContent: PurchaseFormContent,\n        depositBalance: 0,\n        transactionHistory: [],\n    }),\n    methods: {\n        Help(key_search) {\n            ShowResource(key_search);\n        },\n        async loadTxnHistory() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (\n                        this.$route.params.id !== \"\" ||\n                        this.$route.params.id !== undefined\n                    ) {\n                        const id = (this.$route.params.id || '')\n                        const strId = id.includes('txn-') ? id : 'txn-' + id\n                        billingHandler\n                            .history(strId)\n                            .then((res) => {\n                                if (res.data.statusCode === 200) {\n                                    this.transactionHistory = res.data.data;\n                                }\n                            })\n                    }\n                }, 10);\n            });\n        },\n        async loadPurchaseFormContent() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    purchaseFormContentHandler.list().then((res) => {\n                        if (res.data.statusCode === 200) {\n                            const data = res.data.data;\n                            if (data.length > 0) {\n                                const supplierSetting = data[0];\n                                this.purchaseFormContent = supplierSetting;\n                                if (supplierSetting.hasOwnProperty(\"decimal\")) {\n                                    this.decimalFormat = \"n\" + supplierSetting.decimal;\n                                    // // Add 2 default lines\n                                    // this.addRow();\n                                    // this.addRow();\n                                }\n                            }\n                        }\n                    });\n                }, 10);\n            });\n        },\n        numberFormat(value) {\n            return kendo.toString(value, `${this.decimalFormat}`);\n        },\n        formatDateTime(value) {\n            return kendo.toString(\n                new Date(value),\n                helper.instituteDateFormat() + ` hh:mm tt`\n            );\n        },\n        // Load journal according to query string {id}\n        loadObj() {\n            // Access Query String\n            let q = this.$route.params;\n            if (q.id !== undefined) {\n                if (q.id !== this.expense.uuid) {\n                    this.showLoading = true;\n                    expenseHandler\n                        .getOne(q.id)\n                        .then((res) => {\n                            // Bind Obj\n                            this.expense = new ExpenseModel(res.data);\n                            window.console.log(\"expense\",this.expense);\n                            this.bindData();\n                        })\n                    // .finally(function() {\n                    // \t// self.showLoading = false;\n                    // });\n                }\n            }\n            // Supplier Setting such as decimal format\n            this.loadPurchaseFormContent();\n            this.loadTxnHistory();\n        },\n        async bindData() {\n            this.showLoading = true;\n\n            // Contacts\n            this.supplier = new SupplierModel(this.expense.supplier);\n            this.employee = new ContactModel(this.expense.employee);\n            this.hasAdditionalCost = Boolean(\n                this.expense.additional_cost_supplier.uuid\n            );\n\n            // Currency\n            this.currency = new CurrencyModel(this.expense.bill_currency);\n\n            // Cash Advance\n            if (this.expense.use_for_transaction_uuid !== \"\") {\n                let cashAdvance = await cashAdvanceHandler.getOne(\n                    this.expense.use_for_transaction_uuid\n                );\n                this.cashAdvance = new CashAdvanceModel(cashAdvance.data);\n            }\n\n            // Payment Term\n            let paymentTerms = await this.$store.dispatch(\"paymentTerms/getList\");\n            this.paymentTerm = new PaymentTermModel(paymentTerms.find(\n                (i) => i.id === this.expense.payment_term\n            ));\n\n            // Entries\n            let entries = [],\n                subTotal = 0,\n                discountAmount = 0,\n                purchaseTaxAmount = 0,\n                whdTaxAmount = 0,\n                secondaryAccounts = await this.$store.dispatch(\"accounting/getSecondaryAccounts\"),\n                taxItems = await this.$store.dispatch(\"taxes/getList\"),\n                uoms = await this.$store.dispatch(\"unitOfMeasurements/getList\"),\n                clazz = await this.$store.dispatch(\"classes/getList\");\n\n            this.expense.expense_entries.forEach((value) => {\n                // Purchase Tax\n                if (value.account.account_type.number === AccountTypeCode.PURCHASE_TAX) {\n                    purchaseTaxAmount += value.amount;\n                } else {\n                    if (value.amount > 0 && value.account.number !== AccountTypeCode.TAX_RELATED_EXPENSE_CODE) {\n                        let entry = new ExpenseEntryExtendedModel(value);\n                        entry.decimalFormat = this.decimalFormat;\n\n                        /* Secondary Account */\n                        entry.secondary_account = new AccountModel(\n                            secondaryAccounts.find((i) => i.uuid === value.secondary_acc_uuid)\n                        );\n\n                        // Subtotal\n                        subTotal += value.amount;\n\n                        // UOM\n                        entry.uom = new UomModel(\n                            uoms.find((item) => item.id === value.uom_uuid)\n                        );\n\n                        // Tax\n                        if (value.hasOwnProperty('tax_item'))\n                            if (value.tax_item.hasOwnProperty('uuid')) {\n                                entry.tax_item = taxItems.find((i) => i.id === value.tax_item.uuid);\n\n                                /* Apply Inclusive Tax to amount */\n                                if (entry.tax_item.hasOwnProperty('taxType'))\n                                    if (entry.tax_item.taxType.hasOwnProperty('typeId'))\n                                        if (entry.tax_item.taxType.typeId === 1 && entry.tax_item.baseAmount.toLowerCase() === TaxType.INCLUSIVE)\n                                            subTotal += entry.tax_amount;\n                            }\n\n                        // Classes\n                        entry.class1 = new ClassModel(\n                            clazz.find((item) => item.id === value.class_1_uuid)\n                        );\n                        entry.class2 = new ClassModel(\n                            clazz.find((item) => item.id === value.class_2_uuid)\n                        );\n                        entry.class3 = new ClassModel(\n                            clazz.find((item) => item.id === value.class_3_uuid)\n                        );\n                        entry.class4 = new ClassModel(\n                            clazz.find((item) => item.id === value.class_4_uuid)\n                        );\n                        entry.class5 = new ClassModel(\n                            clazz.find((item) => item.id === value.class_5_uuid)\n                        );\n\n                        entries.push(entry);\n                    } else {\n                        // Discount\n                        if (value.account.account_type.number === AccountTypeCode.DISCOUNT) {\n                            discountAmount += value.amount * -1;\n                        }\n\n                        // WHD Tax\n                        if (value.account.account_type.number === AccountTypeCode.WHD_TAX) {\n                            whdTaxAmount += value.amount * -1;\n                        }\n\n                        // Deposit\n                        if (~AccountTypeCode.PURCHASE_DEPOSITS.indexOf(value.account.account_type.number)) {\n                            this.depositAmount = value.amount * -1;\n                            this.depositEntryUuid = value.uuid;\n                        }\n\n                        // Transaction Account (Payable Account / Clearing Account)\n                        if (value.account.uuid === this.expense.transaction_account.uuid) {\n                            this.amountDue = value.amount * -1;\n\n                            /* Secondary Account */\n                            this.secondaryAccount = new AccountModel(\n                                secondaryAccounts.find((i) => i.uuid === value.secondary_acc_uuid)\n                            );\n                        }\n                    }\n                }\n            });\n\n            // Bind Expense Entries\n            this.expenseEntries = entries;\n\n            // Calculation\n            this.subTotal = subTotal;\n            this.discountAmount = discountAmount;\n            this.purchaseTax = purchaseTaxAmount;\n            this.whdTax = whdTaxAmount;\n            this.totalAmount = subTotal - this.discountAmount;\n\n            // Sidebar\n            let locations = await this.$store.dispatch(\"locations/getList\");\n            this.location = new LocationModel(\n                locations.find((i) => i.id === this.expense.location_uuid)\n            );\n\n            let segments = await this.$store.dispatch(\"segments/getList\");\n            this.segment = new SegmentModel(\n                segments.find((i) => i.id === this.expense.segment_uuid)\n            );\n\n            let projects = await this.$store.dispatch(\"projects/getList\");\n            this.project = new ProjectModel(\n                projects.find((i) => i.id === this.expense.project_uuid)\n            );\n\n            this.showLoading = false;\n        },\n        // Row Number Template\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.expenseAccountDS.kendoWidget(),\n                index = ds.indexOf(dataItem);\n\n            return index + 1;\n        },\n        getExpense() {\n            return new ExpenseModel(this.expense);\n        },\n        edit() {\n            this.$router.replace({\n                name: \"Expenses\",\n                params: {initExpense: this.getExpense()},\n            });\n        },\n        hideSmallSideBar() {\n            this.isHideBar = !this.isHideBar;\n        },\n        _print(id) {\n            let params = \"?formType=Expense\"\n            let exp_data = {};\n            exp_data['itemLines'] = this.expenseEntries;\n            exp_data['subTotal'] = this.subTotal;\n            exp_data['discountAmount'] = this.discountAmount;\n            exp_data['purchaseTax'] = this.purchaseTax;\n            exp_data['whdTax'] = this.whdTax;\n            exp_data['totalAmount'] = this.totalAmount;\n            exp_data['supplier'] = this.supplier\n            exp_data['currency'] = this.currency\n            exp_data['paymentTerm'] = this.paymentTerm\n            exp_data['transactionAccount'] = this.expense.transaction_account\n            exp_data['depositAccount'] = this.depositAccount\n            exp_data['segement'] = this.segement\n            exp_data['location'] = this.location,\n                exp_data['decimalFormat'] = this.decimalFormat\n            let all_expense = {\n                ...exp_data,\n                ...this.expense\n            }\n\n            getFormSetting(params).then(res => {\n                if (res.data.statusCode === 200) {\n                    if (res.data.data.length > 0) {\n                        window.console.log(res.data.data[\"0\"].settings);\n                        print(all_expense, id, res.data.data[\"0\"].settings);\n                    } else {\n                        this.$snotify.error(i18n.t('please_save_form_in_setting'))\n                    }\n                }\n            });\n        },\n    },\n    watch: {\n        // call again the method if the route changes\n        $route: \"loadObj\",\n        initExpense() {\n            if (this.initExpense) {\n                this.loadPurchaseFormContent();\n                this.expense = this.initExpense;\n                this.bindData();\n                this.loadTxnHistory();\n            }\n        },\n    },\n    mounted: async function () {\n        // fetch the data when the view is created and the data is\n        // already being observed\n        this.loadObj();\n        await this.loadTxnHistory();\n    },\n    computed: {\n        // paymentTermName() {\n        //     if (this.paymentTerm) {\n        //         return this.paymentTerm.name;\n        //     }\n        //     return \"\";\n        // },\n        txnStatus() {\n            if (this.expense) {\n                if (this.expense.hasOwnProperty(\"status\")) {\n                    const status = this.expense.status;\n                    let statusText = \"\";\n                    switch (status) {\n                        case 1:\n                            statusText = \"OPEN\";\n                            break;\n                        case 2:\n                            statusText = \"PARTIALLY PAID\";\n                            break;\n                        case 3:\n                            statusText = \"PAID\";\n                            break;\n                        case 4:\n                            statusText = \"VOID\";\n                            break;\n                    }\n                    return statusText;\n                }\n            }\n            return \"\";\n        },\n        number: {\n            get() {\n                if (this.expense) {\n                    if (this.expense.hasOwnProperty(\"number\")) {\n                        return this.expense.number;\n                    } else {\n                        return \"\";\n                    }\n                } else {\n                    return \"\";\n                }\n            },\n        },\n    },\n};\n</script>\n\n<style scoped>\n.function_wrapper {\n    box-shadow: none !important;\n}\n\n.v-application--is-ltr .v-text-field .v-input__append-inner {\n    margin-top: 0 !important;\n}\n\n.v-input__slot {\n    background-color: #fff !important;\n}\n\n.function_content .label {\n    margin-bottom: 10px;\n    display: inline-block;\n}\n\n.border_radius10 {\n    border-radius: 10px !important;\n    background-color: #f2f2f2;\n}\n\n.pa-3.v-card h4 {\n    font-size: 18px;\n    color: #333;\n}\n\n.pa-3.v-card p {\n    font-size: 12px;\n    color: #b5b5b5;\n}\n\n.attachment_file {\n    background-color: #efeded;\n    border-radius: 0 !important;\n}\n\n.bigSide {\n    position: relative;\n}\n\n.attachment_table.v-data-table table {\n    border: thin solid rgba(0, 0, 0, 0.12);\n}\n\n.attachment_table table tr th {\n    border-left: thin solid rgba(0, 0, 0, 0.12);\n    height: 35px;\n    border-right: thin solid rgba(0, 0, 0, 0.12);\n}\n\n.block_debit,\n.block_credit {\n    border-bottom: 1px solid #fff;\n}\n\n.block_debit p.number,\n.block_credit p.number {\n    font-size: 25px;\n    color: #7f7f7f;\n}\n\n.block_debit h5,\n.block_credit h5,\n.block_difference h5 {\n    text-transform: uppercase;\n    color: #7f7f7f;\n    font-size: 15px;\n    font-weight: normal;\n}\n\n.block_difference h5 {\n    font-size: 18px;\n}\n\n.block_difference h5 span {\n    font-size: 15px;\n}\n\n.custom_grid table th:last-child {\n    text-align: right !important;\n}\n\n@media (min-width: 1264px) {\n    .container {\n        max-width: 1250px;\n    }\n}\n\n@media (max-width: 576px) {\n    .pt-6.col-sm-5.col-12 {\n        padding-top: 0 !important;\n    }\n\n    .code_text {\n        width: 100%;\n    }\n\n    .phone_no_pt {\n        padding-top: 0 !important;\n    }\n\n    .select_template,\n    .save_option {\n        margin-bottom: 10px;\n    }\n}\n\n.hide_small_bar_class {\n    max-width: 0%;\n    transition: 0.5s ease-in;\n    flex: 0 0 0%;\n}\n\n.hide_big_bar_class {\n    max-width: 100%;\n    transition: 0.5s ease-in;\n    flex: 0 0 100%;\n}\n\n.info_add {\n    background-color: #ffffff;\n}\n\n.small_sidebar {\n    height: 98%;\n    position: relative;\n    padding: 12px;\n    background-color: #edf1f5;\n}\n\n.iconArrow {\n    right: -27px;\n    position: absolute;\n    top: 54px;\n}\n\n.iconArrowHide {\n    position: absolute;\n    right: -7px;\n    top: 54px;\n}\n\n.color_grey {\n    color: #808080;\n}\n\n.lb_bold {\n    font-size: 12px;\n}\n\n.detial_smallside_p {\n    position: absolute;\n    bottom: 10px;\n}\n\n.card_background {\n    background-color: #f8f8f9;\n    min-height: 120px;\n}\n\n.deposite_input {\n    width: 100px;\n}\n\n\n.btn_add_small {\n    height: 27px !important;\n    min-width: 25px !important;\n    font-size: 10px;\n    padding: 0 22px !important;\n    background-color: #00b050 !important;\n    color: #ffffff;\n    border-radius: 0 !important;\n}\n\n.list_site_inv {\n    background-color: #92d050;\n    color: #ffffff;\n    font-size: 12px;\n}\n\n.list_site_exp {\n    background-color: #c5e0b4;\n    color: #000000;\n    font-size: 12px;\n    line-height: 16px;\n    min-height: 40px;\n}\n\n.checkbox_inv {\n    padding: 2px;\n    margin-top: 3px;\n    font-size: 32px;\n    margin-right: 2px;\n}\n\n.exp_select {\n    font-size: 12px !important;\n}\n\n.my_check_box {\n    font-size: 47px !important;\n}\n\n.btn_delete {\n    color: #ffffff;\n    background-color: #00b050 !important;\n    text-transform: capitalize;\n}\n</style>\n"]}]}
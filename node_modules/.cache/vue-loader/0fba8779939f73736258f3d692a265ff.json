{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/payroll/payment/bank_payment/Review.vue?vue&type=style&index=0&id=2bc829e7&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/payroll/payment/bank_payment/Review.vue","mtime":1639966363943},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyOmhvdmVyOm5vdCgudi1kYXRhLXRhYmxlX19leHBhbmRlZF9fY29udGVudCk6bm90KC52LWRhdGEtdGFibGVfX2VtcHR5LXdyYXBwZXIpIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0ci5wcmltYXJ5OmhvdmVyOm5vdCgudi1kYXRhLXRhYmxlX19leHBhbmRlZF9fY29udGVudCk6bm90KC52LWRhdGEtdGFibGVfX2VtcHR5LXdyYXBwZXIpIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmNDQzMzYgIWltcG9ydGFudDsKfQoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgewogICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2UgIWltcG9ydGFudDsKfQoKLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyOm5vdCg6bGFzdC1jaGlsZCkgPiB0ZDpub3QoLnYtZGF0YS10YWJsZV9fbW9iaWxlLXJvdyksCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0cjpub3QoOmxhc3QtY2hpbGQpID4gdGg6bm90KC52LWRhdGEtdGFibGVfX21vYmlsZS1yb3cpIHsKICAgIGJvcmRlci1ib3R0b206IHRoaW4gc29saWQgI2RkZDsKfQoKLnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSB0ZHsKICAgIGhlaWdodDogMzJweCAhaW1wb3J0YW50OwogICAgYm9yZGVyOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2UgIWltcG9ydGFudDsKfQoudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGhlYWQgPiB0ciA+IHRoIHsKICAgIGhlaWdodDogMzJweCAhaW1wb3J0YW50OwogICAgYm9yZGVyOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKICAgIGNvbG9yOiAjMDAwICFpbXBvcnRhbnQ7CiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["Review.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2QA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Review.vue","sourceRoot":"src/views/payroll/payment/bank_payment","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\">\n            <h2 class=\"capitalize\">{{$t('payroll_bank_payment_letter')}}</h2>\n            <p class=\"text-uppercase mb-0\">{{$t('payroll_bank_payament_pa')}}</p>\n            <p class=\"mb-0\">{{$t('for_the_month_of')}}: <span class=\"text-bold\">{{monthOf}}</span></p>\n            <p class=\"  mb-0\">{{$t('reference_no')}}: <span class=\"text-bold\"> PRP2009-001</span></p>\n            <p class=\"\">{{$t('date')}}: <span class=\"text-bold\"> {{createdAt}}</span></p>\n            <p>{{$t('bank_payment_desc_function1')}}:<span class=\"text-bold\"> {{ bankAccount.account ? bankAccount.account:\"\" }}</span> \n                {{$t('bank_payment_desc_function2')}}\n                <span class=\"text-bold\"> {{format(batchPayment.batchAmount)}} ({{batchPayment.amountInWord}})</span>\n                {{$t('bank_payment_desc_function3')}}\n            </p>\n            <kendo-datasource ref=\"dataSourceReview\"\n                :data=\"batchItem\"\n                :page-size='100'\n                :sort=\"sort\"/>\n                <kendo-grid id=\"gridReview\" class=\"grid-function\"\n                    :data-source-ref=\"'dataSourceReview'\"\n                    :editable=\"false\"\n                    :pageable=\"false\"\n                    :pageable-refresh=\"true\"\n                    :column-menu=\"true\">\n                    <kendo-grid-column\n                        :width=\"150\"\n                        :field=\"'employeeId'\"\n                        :title=\"$t('employee_id')\"\n                        :template=\"'<span>#= employeeId#</span>'\"\n                        :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :width=\"220\"\n                        :field=\"'employeeName'\"\n                        :title=\"$t('employee_name')\"\n                        :template=\"'<span>#= employeeName#</span>'\"\n                        :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :width=\"300\"\n                        :field=\"'bank'\"\n                        :title=\"$t('bank')\"\n                        :template=\"'<span>#= bank.bankName #</span>'\"\n                        :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :width=\"250\"\n                        :field=\"'bank'\"\n                        :title=\"$t('bank_account')\"\n                        :template=\"'<span>#= bank.bankAccount #</span>'\"\n                        :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :width=\"130\"\n                        :field=\"'amountPay'\"\n                        :title=\"$t('amount')\"\n                        :template=\"'<span>#= kendo.toString(amountPay, `n2`) #</span>'\"\n                        :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                        :attributes=\"{style: 'text-align: right'}\"/>\n                </kendo-grid>\n                <LoadingMe\n                    :isLoading=\"showLoading\"\n                    :fullPage=\"false\"\n                    type=\"loading\"\n                    :myLoading=\"true\"\n                />\n        </v-col>\n    </v-row>\n</template>\n<script>\nimport kendo from \"@progress/kendo-ui\"\nimport LoadingMe from '@/components/Loading'\nconst payrollHandler    = require(\"@/scripts/payrollHandler\")\nimport XLSX from 'xlsx'\nconst cookieJS = require(\"@/cookie.js\");\nconst cookie = cookieJS.getCookie();\nexport default({\n    props:['batchreview'],\n    data() {\n        return {\n            showLoading: false,\n            batchPayment: {},\n            batchItem: [],\n            monthOf: '',\n            batchAmount: 0,\n            bankAccount: '',\n            createdAt: '',\n            sort:[\n                { field: 'employeeId', dir: 'asc' }\n            ],\n            loggedUser: {\n                id: cookie.creator,\n                name: cookie.email\n            },\n        }\n    },\n    components: {\n        'LoadingMe': LoadingMe,\n    },\n    methods:{\n        format(val){\n            return kendo.toString(val,'c2')\n        },\n        returnData(data){\n            this.$emit('returnData', data)\n        },\n        loadSuccess(data){\n            this.$emit('headline',data)\n        },\n        loadBatchSingle(){\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.showLoading = true\n                    payrollHandler.getBatchSingle(this.$route.params.id).then(res => {\n                        this.showLoading = true\n                        if (res.statusCode === 200) {\n                            let result          = res.data\n                            this.batchPayment   = result[0]\n                            this.batchItem      = this.batchPayment.batchItem\n                            this.monthOf        = kendo.toString(new Date(this.batchPayment.monthOf), 'y')\n                            this.createdAt      = kendo.toString(new Date(this.batchPayment.createdAt),'dd MMMM yyyy')\n                            this.bankAccount    = this.batchPayment.bankAccount.account\n                            this.loadBatchItem(this.batchPayment)\n                        }\n                    })\n                }, 300)\n            })\n        },\n        loadBatchItem(result){\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved')\n                    this.showLoading = true\n                    payrollHandler.getBatchItem(result.id).then(res => {\n                        this.showLoading = true\n                        if (res.statusCode === 200) {\n                            this.showLoading = false\n                            window.console.log('result',res)\n                            let result = res.data\n                            this.batchItem = result\n                            this.batchItem.sort(function(i, j){\n                                var keyA = i.employeeId,\n                                    keyB = j.employeeId;\n                                if (keyA < keyB) return -1;\n                                if (keyA > keyB) return 1;\n                                return 0;\n                            })\n                        }\n                    })\n                }, 300)\n            })\n        },\n        formatAmount(value){\n            return kendo.toString(value,'n2')\n        },\n        saveSpets(){\n            this.showLoading = true\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    this.showLoading = true\n                    let data = {\n                        id:                 this.$route.params.id ? this.$route.params.id : '',\n                        monthOf:            this.batchPayment.monthOf,\n                        created:            this.batchPayment.created,\n                        bank:               this.batchPayment.bank,\n                        bankAccount:        this.batchPayment.bankAccount,\n                        balanceInBanhJi:    this.batchPayment.balanceInBanhJi,\n                        batchItem:          this.batchPayment.batchItem,\n                        date:               this.batchPayment.date,\n                        batchAmount:        this.batchPayment.batchAmount,\n                        totalBatch:         this.batchPayment.totalBatch,\n                        amountInWord:       this.batchPayment.amountInWord,\n                        referencePayroll:   this.batchPayment.referencePayroll,\n                        abbr:               this.batchPayment.abbr,\n                        lastNumber:         this.batchPayment.lastNumber,\n                        number:             this.batchPayment.number,\n                        referenceNumber:    this.batchPayment.referenceNumber,\n                        type:               this.batchPayment.type,\n                        step:               3,\n                        status:             0,\n                        loggedUser:         this.loggedUser\n                    };\n                    window.console.log('2', data)\n                    payrollHandler.createBatchPayment(data).then(response => {\n                        this.showLoading = true\n                        if (response.data.statusCode === 201) {\n                            this.showLoading = false\n                            this.$snotify.success('Success')\n                            this.loadSuccess(response.data.statusCode)\n                        }\n                    }).catch(e => {\n                        this.$snotify.error('Something went wrong')\n                        this.errors.push(e)\n                    })\n                }, 300);\n            })\n        },\n        goBack(){\n            window.history.go(-1)\n        },\n        download(){\n            let ds = this.$refs.dataSourceReview.kendoWidget()\n            const result = ds.data().map((o, i) => {\n                return {\n                    no:                         i + 1,\n                    employeeId:                 o.employeeId,\n                    employeeName:               o.employeeName,\n                    amountPay:                  o.amountPay,\n                    bankName:                   o.bank.bankName,\n                    bankAccount:                o.bankAccount,\n                    // currency:                   o.currency,\n                    // deduction:                  o.deduction,\n                    // employeeId:                 o.employeeId,\n                    // employeeUuid:               o.employeeUuid,\n                    // employee:                   o.employee,\n                    // exchangeRate:               o.exchangeRate,\n                    // grossSalary:                o.grossSalary,\n                    // id:                         o.id,\n                    // location:                   o.location,\n                    // monthOf:                    o.monthOf,\n                    // natureEmployee:             o.natureEmployee,\n                    // netPay:                     o.netPay,\n                    // amountPay:                  o.netPay,\n                    // netSalary:                  o.netSalary,\n                    // overTimeHoliday:            o.overTimeHoliday,\n                    // overTimeWeekend:            o.overTimeWeekend,\n                    // paymentMethod:              o.paymentMethod,\n                    // payrollLiabilitie:          o.payrollLiabilitie,\n                    // payrollReferenceNumber:     o.payrollReferenceNumber,\n                    // payslip:                    o.payslip,\n                    // position:                   o.position,\n                    // slipNumber:                 o.slipNumber,\n                    // salary:                     o.salary,\n                    // salaryType:                 o.salaryType,\n                    // status:                     o.status,\n                    // taxBenefit:                 o.taxBenefit,\n                    // taxRate:                    o.taxRate,\n                    // taxSalary:                  o.taxSalary,\n                    // taxSalaryUS:                o.taxSalaryUS,\n                    // totalBenefit:               o.totalBenefit,\n                    // segment:                    o.segment\n                }\n            })\n            window.console.log(result)\n            this.excelData = [\n                {name: 'thearann',id: '00001'},\n                {name: 'Dara',id: '00002'}\n            ]\n            let header = ['no','employeeId','employeeName','bankName','bankAccount','amountPay']\n            const jsonWorkSheet = XLSX.utils.json_to_sheet(result, {header, defval: null});\n            const workBook = {\n                SheetNames: ['PAYROLL (BANK PAYMENT)'], // sheet name\n                Sheets: {'PAYROLL (BANK PAYMENT)': jsonWorkSheet}\n            }\n            XLSX.writeFile(workBook, \"bank-payment.xlsx\");\n        },\n    },\n    async mounted(){\n        await this.loadBatchSingle()\n    },\n    watch:{\n        batchreview(){\n            if (this.batchreview !== undefined) {\n                this.loadBatchSingle()\n            }\n        }\n    }\n})\n</script>\n<style scoped>\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: transparent !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr.primary:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: #f44336 !important;\n    }\n\n    .theme--light.v-data-table {\n        background-color: transparent !important;\n        border-collapse: collapse !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:not(.v-data-table__mobile-row),\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:not(.v-data-table__mobile-row) {\n        border-bottom: thin solid #ddd;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table td{\n        height: 32px !important;\n        border: thin solid rgba(0, 0, 0, 0.12) !important;\n        border-collapse: collapse !important;\n    }\n    .v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n        height: 32px !important;\n        border: thin solid rgba(0, 0, 0, 0.12) !important;\n        color: #000 !important;\n        border-collapse: collapse !important;\n    }\n</style>\n\n"]}]}
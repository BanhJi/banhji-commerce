{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/Product.vue","mtime":1640595536837},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7aTE4bn0gZnJvbSAiQC9pMThuIjsKaW1wb3J0IFByb2R1Y3RNb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvUHJvZHVjdHMiOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKaW1wb3J0IFZhcmlhbnRNb2RlbCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvVmFyaWFudHMiOwoKY29uc3QgJCA9IGtlbmRvLmpRdWVyeTsKCmNvbnN0IGFjY291bnRIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2hhbmRsZXIvYWNjb3VudGluZy9hY2NvdW50Iik7CmNvbnN0IGNhdGVnb3J5SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jYXRlZ29yeUhhbmRsZXIiKTsKY29uc3QgZ3JvdXBIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2dyb3VwSGFuZGxlciIpOwpjb25zdCBzdWJHcm91cEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc3ViR3JvdXBIYW5kbGVyIik7CmNvbnN0IHVvbUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvdW9tSGFuZGxlciIpOwpjb25zdCB3YXJlaG91c2VIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3dhcmVob3VzZUhhbmRsZXIiKTsKY29uc3Qgc2V0dGluZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2V0dGluZ0hhbmRsZXIiKTsKY29uc3QgcHJvZHVjdEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcHJvZHVjdEhhbmRsZXIiKTsKY29uc3QgdmFyaWFudEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvdmFyaWFudFR5cGVIYW5kbGVyIik7CmNvbnN0IHByaWNlTGV2ZWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3ByaWNlTGV2ZWxIYW5kbGVyIik7Ci8vIGNvbnN0IGF0dHJpYnV0ZUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvYXR0cmlidXRlSGFuZGxlciIpCmNvbnN0IHZhcmlhbnRNb2RlbCA9IG5ldyBWYXJpYW50TW9kZWwoe30pOwoKbGV0IHByb2R1Y3RNb2RlbCA9IG5ldyBQcm9kdWN0TW9kZWwoe30pOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQWRkUHJvZHVjdCIsCiAgICBwcm9wczogWyJpZCJdLAogICAgY29tcG9uZW50czogewogICAgICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KGBAL2NvbXBvbmVudHMvTG9hZGluZ2ApLAogICAgfSwKICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93TG9hZGluZzogdHJ1ZSwKICAgICAgICAgICAgYWNjTG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIHZhbGlkOiAiIiwKICAgICAgICAgICAgaW5jb21lQWNjOiAiIiwKICAgICAgICAgICAgbUFjY0ludmVudG9yeTogIiIsCiAgICAgICAgICAgIG1DYXRlZ29yeTogIiIsCiAgICAgICAgICAgIG1Hcm91cDogIiIsCiAgICAgICAgICAgIG1Gb3JtVGVtcGxhdGU6ICIiLAogICAgICAgICAgICBmb3JtVGVtcGxhdGU6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogImZ0cC1jMzVjYmU0Ni0xYzVlLTExZWItYWRjMS0wMjQyYWMxMjAwMDIiLAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJGb3JtIEEiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogImZ0cC1jMzVjYzA2Mi0xYzVlLTExZWItYWRjMS0wMjQyYWMxMjAwMDIiLAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJGb3JtIEIiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogImZ0cC1jMzVjYzJlYy0xYzVlLTExZWItYWRjMS0wMjQyYWMxMjAwMDIiLAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJGb3JtIEMiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgbUFjY0Nvc3RPZkdvb2RTb2xkOiAiIiwKICAgICAgICAgICAgYWNjUmV2ZW51ZTogW10sCiAgICAgICAgICAgIGFjY0ludmVudG9yeTogW10sCiAgICAgICAgICAgIGFjY0Nvc3RPZkdvb2RTb2xkOiBbXSwKICAgICAgICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgICAgICAgIGdyb3VwczogW10sCiAgICAgICAgICAgIGdyb3VwOiBbXSwKICAgICAgICAgICAgc3ViR3JvdXA6IFtdLAogICAgICAgICAgICB1b206IFtdLAogICAgICAgICAgICB0YXg6IFtdLAogICAgICAgICAgICBzcGVjaWZpY1RheDogW10sCiAgICAgICAgICAgIHZhdDogW10sCiAgICAgICAgICAgIG1TdWJHcm91cDoge30sCiAgICAgICAgICAgIHN1Ykdyb3VwczogW10sCiAgICAgICAgICAgIHdhcmVIb3VzZXM6IFtdLAogICAgICAgICAgICBtVU9NOiB7fSwKICAgICAgICAgICAgbVdhcmVIb3VzZToge30sCiAgICAgICAgICAgIG1TcGVjaWZpY1RheDoge30sCiAgICAgICAgICAgIG1PdGhlclRheDoge30sCiAgICAgICAgICAgIG90aGVyVGF4OiBbXSwKICAgICAgICAgICAgbURlZmF1bHRUYXg6IHt9LAogICAgICAgICAgICBwdXJjaGFzZVRheDogW10sCiAgICAgICAgICAgIG1QdXJjaGFzZVRheDoge30sCiAgICAgICAgICAgIG1TZXJpYWxPckJhdGNoOiAwLAogICAgICAgICAgICB2YXJpYW50VHlwZXM6IFtdLAogICAgICAgICAgICB2YXJpYW50OiB2YXJpYW50TW9kZWwsCiAgICAgICAgICAgIHZhckxpc3RzOiBbXSwKICAgICAgICAgICAgcHJvZHVjdDogcHJvZHVjdE1vZGVsLAogICAgICAgICAgICBwcm9kdWN0VmFyaWFudDoge30sCiAgICAgICAgICAgIHZhcmlhbnRJZDogIiIsCiAgICAgICAgICAgIHByaWNlTGV2ZWw6IFtdLAogICAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIGxvYWRQcmljZUxldmVsKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBwcmljZUxldmVsSGFuZGxlci5nZXQoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlcyB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmljZUxldmVsID0gZGF0YS5maWx0ZXIoKG4pID0+IG4udHlwZS5uYW1lID09PSAiU3RhbmRhcmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpY2VMZXZlbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3QucHJpY2VMZXZlbCA9IHRoaXMucHJpY2VMZXZlbFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGxvYWRDYXRlZ29yeUFjY291bnRBbmRUYXgoKSB7CiAgICAgICAgICAgIC8vIHRoaXMubU90aGVyVGF4ID0gdGhpcy5tQ2F0ZWdvcnkudGF4Lmhhc093blByb3BlcnR5KCJvdGhlclRheCIpCiAgICAgICAgICAgIC8vICAgICA/IHRoaXMubUNhdGVnb3J5LnRheC5vdGhlclRheAogICAgICAgICAgICAvLyAgICAgOiB7fTsKICAgICAgICAgICAgLy8gdGhpcy5tU3BlY2lmaWNUYXggPSB0aGlzLm1DYXRlZ29yeS50YXguaGFzT3duUHJvcGVydHkoInNwZWNpZmljVGF4IikKICAgICAgICAgICAgLy8gICAgID8gdGhpcy5tQ2F0ZWdvcnkudGF4LnNwZWNpZmljVGF4CiAgICAgICAgICAgIC8vICAgICA6IHt9OwogICAgICAgICAgICAvLyB0aGlzLm1EZWZhdWx0VGF4ID0gdGhpcy5tQ2F0ZWdvcnkudGF4Lmhhc093blByb3BlcnR5KCJkZWZhdWx0VGF4IikKICAgICAgICAgICAgLy8gICAgID8gdGhpcy5tQ2F0ZWdvcnkudGF4LmRlZmF1bHRUYXgKICAgICAgICAgICAgLy8gICAgIDoge307CiAgICAgICAgICAgIC8vIHRoaXMubVB1cmNoYXNlVGF4ID0gdGhpcy5tQ2F0ZWdvcnkudGF4Lmhhc093blByb3BlcnR5KCJwdXJjaGFzZVRheCIpCiAgICAgICAgICAgIC8vICAgICA/IHRoaXMubUNhdGVnb3J5LnRheC5wdXJjaGFzZVRheAogICAgICAgICAgICAvLyAgICAgOiB7fTsKICAgICAgICAgICAgdGhpcy5pbmNvbWVBY2MgPSB0aGlzLm1DYXRlZ29yeS5hY2NvdW50Lmhhc093blByb3BlcnR5KCJpbmNvbWVBY2MiKQogICAgICAgICAgICAgICAgPyB0aGlzLm1DYXRlZ29yeS5hY2NvdW50LmluY29tZUFjYwogICAgICAgICAgICAgICAgOiB7fTsKICAgICAgICAgICAgdGhpcy5tQWNjSW52ZW50b3J5ID0gdGhpcy5tQ2F0ZWdvcnkuYWNjb3VudC5oYXNPd25Qcm9wZXJ0eSgiaW52ZW50b3J5QWNjIikKICAgICAgICAgICAgICAgID8gdGhpcy5tQ2F0ZWdvcnkuYWNjb3VudC5pbnZlbnRvcnlBY2MKICAgICAgICAgICAgICAgIDoge307CiAgICAgICAgICAgIHRoaXMubUFjY0Nvc3RPZkdvb2RTb2xkID0gdGhpcy5tQ2F0ZWdvcnkuYWNjb3VudC5oYXNPd25Qcm9wZXJ0eSgKICAgICAgICAgICAgICAgICJjb3N0T2ZHb29kc1NvbGRBY2MiCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAgID8gdGhpcy5tQ2F0ZWdvcnkuYWNjb3VudC5jb3N0T2ZHb29kc1NvbGRBY2MKICAgICAgICAgICAgICAgIDoge307CiAgICAgICAgfSwKICAgICAgICBhc3luYyBpbml0RGF0YSgpIHsKICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCdtZScsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTaW5nbGVQcm9kdWN0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2Uua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgICAgIGRzLmRhdGEoW10pOwogICAgICAgICAgICAgICAgdGhpcy5hZGRSb3coKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWRkUm93KCkgewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2Uua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKICAgICAgICAgICAgZHMuaW5zZXJ0KHRvdGFsLCB7CiAgICAgICAgICAgICAgICB2YXJpYW50OiB0aGlzLnZhcmlhbnQsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgLy8gUm93IE51bWJlciBUZW1wbGF0ZQogICAgICAgIHJvd051bWJlclRtcGwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgdmFyIGRzID0gdGhpcy4kcmVmcy5kYXRhU291cmNlLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICAgICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgICAgIH0sCiAgICAgICAgLy8gR3JpZCBDdXN0b20gRWRpdG9yCiAgICAgICAgYXR0cmlidXRlRHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGtlbmRvCiAgICAgICAgICAgICAgICAualF1ZXJ5KCc8aW5wdXQgcmVxdWlyZWQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykKICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhjb250YWluZXIpCiAgICAgICAgICAgICAgICAua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgICAgICAgICAgICAgIGF1dG9CaW5kOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVRleHRGaWVsZDogIm5hbWUiLAogICAgICAgICAgICAgICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAiaWQiLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1jb2RlIyAtICM9bmFtZSM8L3NwYW4+IiwKICAgICAgICAgICAgICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy52YXJpYW50VHlwZXMsCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8vIFJlbW92ZSBSb3cKICAgICAgICByZW1vdmVSb3coZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICB2YXIgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWQiKS5kYXRhKCJrZW5kb0dyaWQiKSwKICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UgPSBncmlkLmRhdGFTb3VyY2UsCiAgICAgICAgICAgICAgICBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwoKICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UudG90YWwoKSA+IDEpIHsKICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UucmVtb3ZlKGRhdGFJdGVtKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25DaGFuZ2UoKSB7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbkVkaXRDbGljayh2YWx1ZSkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3QgPSB2YWx1ZTsKICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvbk5ld0NsaWNrKCkgewogICAgICAgICAgICB0aGlzLnByb2R1Y3QuaWQgPSAiIjsKICAgICAgICAgICAgdGhpcy5jbGVhcigpOwogICAgICAgIH0sCiAgICAgICAgY2xvc2UoZGF0YSkgewogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5nbygtMSk7CiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhkYXRhLCAiLS1kYXRhIik7CiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgLy8gICBuYW1lOiAnUHJvZHVjdHMnLCBwYXJhbXM6IHsKICAgICAgICAgICAgLy8gICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgfSwKICAgICAgICBjbGVhcigpIHsKICAgICAgICAgICAgdGhpcy5wcm9kdWN0ID0ge307CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblNhdmVDbG9zZSgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHZhcmlhbnRzID0gW107CiAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuZGF0YVNvdXJjZS5rZW5kb1dpZGdldCgpOwogICAgICAgICAgICBsZXQgZGF0YVZhbGlkYXRlID0gMDsKICAgICAgICAgICAgZHMuZGF0YSgpLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHZhbHVlKQogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIHZhbHVlLnZhcmlhbnQgPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgICAgICAgICAgdmFsdWUudmFyaWFudC5pZCA9PSB1bmRlZmluZWQgfHwKICAgICAgICAgICAgICAgICAgICB2YWx1ZS52YXJpYW50LmlkID09IG51bGwgfHwKICAgICAgICAgICAgICAgICAgICB2YWx1ZS52YXJpYW50LmlkID09ICIiCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCJQbGVhc2UgY2hlY2sgVmFyaWFudHMgb24gcm93ICIgKyAoaW5kZXggKyAxKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGFWYWxpZGF0ZSArPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IHZhcmlhbnRBUiA9IGRzLmRhdGEoKTsKICAgICAgICAgICAgaWYgKHZhcmlhbnRBUi5sZW5ndGggPT0gZGF0YVZhbGlkYXRlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB2YXJpYW50ID0gZHMuZGF0YSgpOwogICAgICAgICAgICAgICAgdmFyaWFudC5mb3JFYWNoKChpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyaWFudHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6IGkudmFyaWFudCwKICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiBpLnVpZCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMucHJvZHVjdC5pZCA9PT0gJycgfHwgdGhpcy5wcm9kdWN0LmlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgPyB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2t1OiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0LnNrdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbGVEZXNjcmlwdGlvbjogICAgICAgIHRoaXMucHJvZHVjdC5zYWxlRGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZURlc2NyaXB0aW9uOiAgICB0aGlzLnByb2R1Y3QucHVyY2hhc2VEZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5wcmljZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Q6ICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5jb3N0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVPcmRlclFUWTogICAgICAgICAgICAgdGhpcy5wcm9kdWN0LnJlT3JkZXJRVFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogICAgICAgICAgICAgICB0aGlzLm1DYXRlZ29yeSB8fCB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlTGV2ZWw6ICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5wcmljZUxldmVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICAgICAgICAgICAgICAgICAgdGhpcy5tR3JvdXAgfHwge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJHcm91cDogICAgICAgICAgICAgICB0aGlzLm1TdWJHcm91cCB8fCB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVvbTogICAgICAgICAgICAgICAgICAgIHRoaXMubVVPTSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcmVob3VzZTogICAgICAgICAgICAgIHRoaXMubVdhcmVIb3VzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmVudG9yeUFjYzogICAgICAgICAgIHRoaXMubUFjY0ludmVudG9yeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY29tZUFjYzogICAgICAgICAgICAgIHRoaXMuaW5jb21lQWNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdE9mR29vZHNTb2xkQWNjOiAgICAgdGhpcy5tQWNjQ29zdE9mR29vZFNvbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0VGF4OiB0aGlzLm1EZWZhdWx0VGF4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHVyY2hhc2VUYXg6IHRoaXMubVB1cmNoYXNlVGF4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3BlY2lmaWNUYXg6IHRoaXMubVNwZWNpZmljVGF4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJUYXg6IHRoaXMubU90aGVyVGF4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVRlbXBsYXRlOiAgICAgICAgICAgdGhpcy5tRm9ybVRlbXBsYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogICAgICAgICAgICAgICAgdmFyaWFudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50SWQ6ICAgICAgICAgICAgICB0aGlzLnZhcmlhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlU29sZDogICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5jYW5CZVNvbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVByb2R1Y2U6ICAgICAgICAgICB0aGlzLnByb2R1Y3QuY2FuQmVQcm9kdWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVSZW50OiAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0LmNhbkJlUmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlUHVyY2hhc2U6ICAgICAgICAgIHRoaXMucHJvZHVjdC5jYW5CZVB1cmNoYXNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGYXZvcml0ZTogICAgICAgICAgICAgdGhpcy5wcm9kdWN0LmlzRmF2b3JpdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaE9yU2VyaWFsOiAgICAgICAgICB0aGlzLnByb2R1Y3QuYmF0Y2hPclNlcmlhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlVXNlZDogICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5yZVVzZWQgfHwgZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXRjaFRyYWNrZWQ6IHRoaXMubVNlcmlhbE9yQmF0Y2ggPT0gMSA/IHRoaXMucHJvZHVjdC5iYXRjaFRyYWNrZWQgOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXNTZXJpYWxOdW1iZXI6IHRoaXMubVNlcmlhbE9yQmF0Y2ggPT0gMiA/IHRoaXMucHJvZHVjdC5pc1NlcmlhbE51bWJlciA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Quc3RhdHVzIHx8IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkOiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3QuZGVsZXRlZCB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkID8gdGhpcy4kcm91dGUucXVlcnkudHlwZSA6ICJuZXciLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ2RhdGEnLGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RIYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5sb2FkU2FsZVVDKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygiU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKHJlc3BvbnNlLmRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCJTb21ldGhpbmcgd2VudCB3cm9uZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25DYXRlZ29yeUNoYW5nZWQoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLm1DYXRlZ29yeSkKICAgICAgICAgICAgICAgICAgICB0aGlzLm1Hcm91cCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHRoaXMubVN1Ykdyb3VwID0gIiI7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXAgPSB0aGlzLmdyb3Vwcy5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgIChtKSA9PiBtLmNhdGVnb3J5LmlkID09PSB0aGlzLm1DYXRlZ29yeS5pZAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXAubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1Hcm91cCA9IHRoaXMuZ3JvdXBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViR3JvdXAgPSB0aGlzLnN1Ykdyb3Vwcy5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobSkgPT4gbS5ncm91cC5pZCA9PT0gdGhpcy5ncm91cFswXS5pZAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJHcm91cC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1TdWJHcm91cCA9IHRoaXMuc3ViR3JvdXBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQ2F0ZWdvcnlBY2NvdW50QW5kVGF4KCk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZEFjY291bnQoKSB7CiAgICAgICAgICAgIHRoaXMuYWNjTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIGFjY291bnRIYW5kbGVyLmdldEFsbCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjUmV2ZW51ZSA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChtKSA9PiBtLmFjY291bnRfdHlwZS5udW1iZXIgPT09IDMyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGl0ZW0udXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lOiBpdGVtLmxvY2FsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogaXRlbS5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3RheGFibGU6IGl0ZW0uaXNfdGF4YWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFuaGppQWNjQ29kZTogaXRlbS5iYW5oamlBY2NDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cF9jb2RlOiBpdGVtLmdyb3VwX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF9hY2NvdW50OiBpdGVtLnBhcmVudF9hY2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX2NvZGU6IGl0ZW0udHlwZV9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X3R5cGU6IGl0ZW0uYWNjb3VudF90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWNjUmV2ZW51ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluY29tZUFjYyA9IHRoaXMuYWNjUmV2ZW51ZVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY0ludmVudG9yeSA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChtKSA9PiBtLmFjY291bnRfdHlwZS5udW1iZXIgPT09IDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0udXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogaXRlbS51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX25hbWU6IGl0ZW0ubG9jYWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBpdGVtLm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfdGF4YWJsZTogaXRlbS5pc190YXhhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5oamlBY2NDb2RlOiBpdGVtLmJhbmhqaUFjY0NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX2NvZGU6IGl0ZW0uZ3JvdXBfY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50X2FjY291bnQ6IGl0ZW0ucGFyZW50X2FjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfY29kZTogaXRlbS50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfdHlwZTogaXRlbS5hY2NvdW50X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY2NJbnZlbnRvcnkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQWNjSW52ZW50b3J5ID0gdGhpcy5hY2NJbnZlbnRvcnlbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NDb3N0T2ZHb29kU29sZCA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChtKSA9PiBtLmFjY291bnRfdHlwZS5udW1iZXIgPT09IDMzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGl0ZW0udXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lOiBpdGVtLmxvY2FsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogaXRlbS5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3RheGFibGU6IGl0ZW0uaXNfdGF4YWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFuaGppQWNjQ29kZTogaXRlbS5iYW5oamlBY2NDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cF9jb2RlOiBpdGVtLmdyb3VwX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF9hY2NvdW50OiBpdGVtLnBhcmVudF9hY2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX2NvZGU6IGl0ZW0udHlwZV9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X3R5cGU6IGl0ZW0uYWNjb3VudF90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWNjQ29zdE9mR29vZFNvbGQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQWNjQ29zdE9mR29vZFNvbGQgPSB0aGlzLmFjY0Nvc3RPZkdvb2RTb2xkWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRDYXRlZ29yeSgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlIYW5kbGVyLmdldCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gdGhpcy5jYXRlZ29yaWVzLmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtKSA9PiBtLmhhc093blByb3BlcnR5KCJ0eXBlIikgJiYgbS50eXBlLm5hbWUgPT09ICJQcm9kdWN0IgogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy5jYXRlZ29yaWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0aGlzLm1DYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcmllc1swXQogICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMub25DYXRlZ29yeUNoYW5nZWQoKQogICAgICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZEdyb3VwKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBncm91cEhhbmRsZXIuZ2V0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cHMgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFN1Ykdyb3VwKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBzdWJHcm91cEhhbmRsZXIuZ2V0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJHcm91cHMgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgc2t1R2VuZXJhdG9yKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IHRoaXMubUNhdGVnb3J5IHx8IHt9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5tR3JvdXAgfHwge307CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc0dyb3VwID0gdGhpcy5tU3ViR3JvdXAgfHwge307CiAgICAgICAgICAgICAgICAgICAgbGV0IGNhdGVBYmJyID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQWJiciA9ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBzR3JvdXBBYmJyID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNrdUNvZGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZUFiYnIgPSBjYXRlZ29yeS5hYmJyIHx8ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBza3VDb2RlICs9IGNhdGVBYmJyICsgIi8iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXAuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBBYmJyID0gZ3JvdXAuYWJiciB8fCAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgc2t1Q29kZSArPSBncm91cEFiYnIgKyAiLyI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzR3JvdXAuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc0dyb3VwQWJiciA9IHNHcm91cC5hYmJyIHx8ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBza3VDb2RlICs9IHNHcm91cEFiYnIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCctLXh4JywgY2F0ZWdvcnksIGdyb3VwLCBzR3JvdXApCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0LnNrdSA9IHNrdUNvZGUKICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy5wcm9kdWN0Lm5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5wcm9kdWN0LnNrdSA9CiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBza3VDb2RlICsgdGhpcy5wcm9kdWN0Lm5hbWUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMyk7CiAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRVT00oKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHVvbUhhbmRsZXIuZ2V0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51b20gPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVvbS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1VT00gPSB0aGlzLnVvbVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRXYXJlSG91c2VzKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB3YXJlaG91c2VIYW5kbGVyLmdldFdhcmVob3VzZVNldHRpbmdBbGwoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhcmVIb3VzZXMgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndhcmVIb3VzZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tV2FyZUhvdXNlID0gdGhpcy53YXJlSG91c2VzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFZhcmlhbnRzKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICB2YXJpYW50SGFuZGxlci5nZXQoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcmlhbnRUeXBlcyA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFyaWFudFR5cGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRUYXgoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHNldHRpbmdIYW5kbGVyLmdldCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGF4ID0gcmVzOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3QgPSB0aGlzLnRheC5maWx0ZXIoKG0pID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDgpOyAvLyB2YWx1YWJsZSB0YXgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWZpY1RheCA9IHN0OyAvLyBzcGVjaWFsIHRheAoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZBVCA9IHRoaXMudGF4LmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtKSA9PiBtLnRheFR5cGUudHlwZUlkID09PSAxICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSIKICAgICAgICAgICAgICAgICAgICAgICAgKTsgLy8gdmFsdWFibGUgdGF4CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmF0ID0gdkFUOyAvLyB2YWx1YWJsZSB0YXgKCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvdFRheCA9IHRoaXMudGF4LmZpbHRlcigobSkgPT4gbS50YXhUeXBlLnR5cGVJZCA9PT0gNyk7IC8vIHZhbHVhYmxlIHRheAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm90aGVyVGF4ID0gb3RUYXg7IC8vIHZhbHVhYmxlIHRheAoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXJjaGFzZVRheCA9IHRoaXMudGF4LmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtKSA9PiBtLnRheFR5cGUudHlwZUlkID09PSAxICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiUHVyY2hhc2UiCiAgICAgICAgICAgICAgICAgICAgICAgICk7IC8vIHZhbHVhYmxlIHRheAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zcGVjaWZpY1RheC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1TcGVjaWZpY1RheCA9IHRoaXMuc3BlY2lmaWNUYXhbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmF0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubURlZmF1bHRUYXggPSB0aGlzLnZhdFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vdGhlclRheC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1PdGhlclRheCA9IHRoaXMub3RoZXJUYXhbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHVyY2hhc2VUYXgubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tUHVyY2hhc2VUYXggPSB0aGlzLnB1cmNoYXNlVGF4WzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFNpbmdsZVByb2R1Y3QoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHByb2R1Y3RIYW5kbGVyLmdldE9uZSh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdCA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvZHVjdC5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1DYXRlZ29yeSA9IHRoaXMucHJvZHVjdC5jYXRlZ29yeTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubUdyb3VwID0gdGhpcy5wcm9kdWN0Lmdyb3VwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tU3ViR3JvdXAgPSB0aGlzLnByb2R1Y3Quc3ViR3JvdXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1VT00gPSB0aGlzLnByb2R1Y3QudW9tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQWNjQ29zdE9mR29vZFNvbGQgPSB0aGlzLnByb2R1Y3QuY29zdE9mR29vZHNTb2xkQWNjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQWNjSW52ZW50b3J5ID0gdGhpcy5wcm9kdWN0LmludmVudG9yeUFjYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5jb21lQWNjID0gdGhpcy5wcm9kdWN0LmluY29tZUFjYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubVNwZWNpZmljVGF4ID0gdGhpcy5wcm9kdWN0LnNwZWNpZmljVGF4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tU2VyaWFsT3JCYXRjaCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0LmlzU2VyaWFsTnVtYmVyID4gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJvZHVjdC5pc1NlcmlhbE51bWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucHJvZHVjdC5iYXRjaFRyYWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm1PdGhlclRheCA9IHRoaXMucHJvZHVjdC5vdGhlclRheDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubURlZmF1bHRUYXggPSB0aGlzLnByb2R1Y3QuZGVmYXVsdFRheDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubVB1cmNoYXNlVGF4ID0gdGhpcy5wcm9kdWN0LnB1cmNoYXNlVGF4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0VmFyaWFudCA9IHRoaXMucHJvZHVjdC52YXJpYW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tV2FyZUhvdXNlID0gdGhpcy5wcm9kdWN0LndhcmVob3VzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFyTGlzdHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFyaWFudElkID0gdGhpcy5wcm9kdWN0LnZhcmlhbnQuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3QudmFyaWFudC52YXJpYW50LmZvckVhY2goKG0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhckxpc3RzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBtLnZhcmlhbnQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtLnZhcmlhbnQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBtLnZhcmlhbnQuY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgY2FuY2VsKCkgewogICAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuLnQoIm1zZ190aXRsZV93YXJuaW5nIiksCiAgICAgICAgICAgICAgICB0ZXh0OiBpMThuLnQoIm1zZ19kaXNjYXJkIiksCiAgICAgICAgICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCJjYW5jZWwiKSwKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiM0ZDQ4NDgiLAogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjRUQxQTNBIiwKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoImRpc2NhcmQiKSwKICAgICAgICAgICAgfSkudGhlbigocmVzdWx0Q2VuKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Q2VuLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkVU9NKCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkV2FyZUhvdXNlcygpOwogICAgICAgIC8vIGF3YWl0IHRoaXMubG9hZFRheCgpOwogICAgICAgIGF3YWl0IHRoaXMubG9hZFZhcmlhbnRzKCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkUHJpY2VMZXZlbCgpOwogICAgfSwKICAgIGNvbXB1dGVkOiB7fSwKICAgIGNyZWF0ZWQ6IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICBhd2FpdCB0aGlzLmxvYWRBY2NvdW50KCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQ2F0ZWdvcnkoKTsKICAgICAgICBhd2FpdCB0aGlzLmxvYWRHcm91cCgpOwogICAgICAgIGF3YWl0IHRoaXMubG9hZFN1Ykdyb3VwKCk7CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBpZCgpIHsKICAgICAgICAgICAgLy8gdGhpcy5wcm9kdWN0ID0gdGhpcy5zZWxlY3RlZFByb2R1Y3QKICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuaWQsICJ3YXRjaCIpOwogICAgICAgICAgICBpZiAodGhpcy5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRTaW5nbGVQcm9kdWN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKfTsK"},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAieA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/views/products","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                    <v-card\n                        outlined\n                        dense\n                        class=\"pa-4 no_border rounded-sm\"\n                        color=\"white\">\n                        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                            <v-card outlined dense class=\"no_border\">\n                                <h2 class=\"mb-0\">{{ $t(\"product\") }}</h2>\n                                <v-icon\n                                    @click=\"cancel()\"\n                                    style=\"cursor: pointer; color: #333; font-size: 40px\"\n                                    class=\"float-right\">close\n                                </v-icon>\n                            </v-card>\n                            <v-card outlined dense class=\"px-4 no_border\" color=\"grayBg\">\n                                <v-row>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                        <label class=\"label mb-0\">{{$t(\"product_category\")}}</label>\n                                        <v-select\n                                            class=\"mt-1\"\n                                            :placeholder=\"$t('category')\"\n                                            outlined\n                                            tage=\"Product Category\"\n                                            v-model=\"mCategory\"\n                                            :items=\"categories\"\n                                            item-value=\"id\"\n                                            :item-text=\"(item) => `${item.abbr} - ${item.name}`\"\n                                            @change=\"onCategoryChanged\"\n                                            return-object\n                                            :rules=\"[(v) => !!v['id'] || 'is required']\"\n                                            required/>\n                                        <label class=\"label mb-0\">{{ $t(\"product_group\") }}</label>\n                                        <v-select\n                                            class=\"mt-1\"\n                                            :placeholder=\"$t('select_group')\"\n                                            outlined\n                                            tage=\"Product Group\"\n                                            v-model=\"mGroup\"\n                                            :items=\"group\"\n                                            @change=\"skuGenerator\"\n                                            item-value=\"id\"\n                                            :item-text=\"(item) => `${item.abbr} - ${item.name}`\"\n                                            return-object\n                                            clearable\n                                            required/>\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"pl-0\">\n                                        <label class=\"label mb-0\">{{ $t(\"sub_group\") }}</label>\n                                        <v-select\n                                            class=\"mt-1\"\n                                            :placeholder=\"$t('select_sub_group')\"\n                                            outlined\n                                            tage=\"Sub Group\"\n                                            v-model=\"mSubGroup\"\n                                            @change=\"skuGenerator\"\n                                            :items=\"subGroup\"\n                                            item-value=\"id\"\n                                            :item-text=\"(item) => `${item.abbr} - ${item.name}`\"\n                                            clearable\n                                            return-object\n                                            required/>\n                                        <label class=\"label mb-0\">{{ $t(\"product_name\") }}</label>\n                                        <v-text-field\n                                            class=\"mt-1\"\n                                            :placeholder=\"$t('name')\"\n                                            outlined\n                                            v-model=\"product.name\"\n                                            :rules=\"[(v) => !!v || 'is required']\"\n                                            required/>\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"my_checkbox\">\n                                        <label class=\"label mb-0 mt-1 mx-1\">{{ $t(\"sku\") }}</label>\n                                        <div class=\"d-flex\">\n                                            <v-text-field\n                                                class=\"mt-1 flex-1\"\n                                                v-model=\"product.sku\"\n                                                outlined\n                                                :rules=\"[(v) => !!v || 'is required']\"\n                                                required/>\n                                            <v-icon\n                                                color=\"black\"\n                                                size=\"30\"\n                                                @click=\"skuGenerator\"\n                                                class=\"border_qrcode ml-2 mt-1\">mdi-qrcode\n                                            </v-icon>\n                                        </div>\n                                        <h2 class=\"font_12 mt-0\">{{ $t(\"how_this_product\") }}</h2>\n                                        <v-row>\n                                            <v-col sm=\"12\" cols=\"12\" class=\"my_radio pl-0 d-flex py-0\">\n                                                <div>\n                                                    <input\n                                                        id=\"radio1\"\n                                                        name=\"radio\"\n                                                        type=\"radio\"\n                                                        value=\"1\"\n                                                        v-model=\"product.batchOrSerial\"/>\n                                                    <label for=\"radio1\">{{ $t(\"batch\") }}</label>\n                                                </div>\n                                                <div>\n                                                    <input\n                                                        id=\"radio2\"\n                                                        name=\"radio\"\n                                                        type=\"radio\"\n                                                        value=\"2\"\n                                                        v-model=\"product.batchOrSerial\"/>\n                                                    <label for=\"radio2\">{{ $t(\"serial\") }}</label>\n                                                </div>\n                                                <input\n                                                    type=\"checkbox\"\n                                                    id=\"useAsFavorite\"\n                                                    v-model=\"product.reUsed\"/>\n                                                <label for=\"useAsFavorite\">{{$t(\"not_reuse\")}}</label>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n                            <h2 class=\"font_18 mb-0 mt-2\">\n                                {{ $t(\"transaction_description\") }}\n                            </h2>\n                            <v-card outlined dense class=\"px-4 mb-4 rounded-0\" height=\"188px\">\n                                <v-row>\n                                    <v-col sm=\"6\" cols=\"12\">\n                                        <h2 class=\"font_16 mb-0\">\n                                            {{ $t(\"purchased_description\") }}\n                                        </h2>\n                                        <p class=\"grayBg---text mb-2\">\n                                            {{ $t(\"purchase_description_detail\") }}\n                                        </p>\n                                        <v-textarea\n                                            v-model=\"product.saleDescription\"\n                                            outlined\n                                            no-resize\n                                            height=\"100px\"\n                                            rows=\"3\"/>\n                                    </v-col>\n                                    <v-col sm=\"6\" cols=\"12\">\n                                        <h2 class=\"font_16 mb-0\">{{ $t(\"sale_description\") }}</h2>\n                                        <p class=\"grayBg---text mb-2\">\n                                            {{ $t(\"sale_description_detail\") }}\n                                        </p>\n                                        <v-textarea\n                                            v-model=\"product.purchaseDescription\"\n                                            outlined\n                                            no-resize\n                                            height=\"100px\"\n                                            rows=\"3\"/>\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n                            <h2 class=\"font_18 mb-0 mt-0\">\n                                {{ $t(\"product_info\") }}\n                            </h2>\n                            <v-card outlined dense class=\"px-4 rounded-0\">\n                                <v-row>\n                                    <v-col cols=\"12\">\n                                        <p class=\"grayBg---text mb-0\">\n                                            {{ $t(\"def_info_product\") }}\n                                        </p>\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                <label>{{ $t(\"uom\") }}</label>\n                                            </v-col>\n                                            <v-col sm=\"8\" cols=\"12\" class=\"pl-0 py-0\">\n                                                <v-select\n                                                    :placeholder=\"$t('uom')\"\n                                                    outlined\n                                                    tage=\"UOM\"\n                                                    :rules=\"[(v) => !!v || 'Number is required']\"\n                                                    v-model=\"mUOM\"\n                                                    :items=\"uom\"\n                                                    item-value=\"id\"\n                                                    :item-text=\"(item) => `${item.name}`\"\n                                                    return-object\n                                                    required/>\n                                            </v-col>\n                                        </v-row>\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                <label>{{ $t(\"price_level\") }}</label>\n                                            </v-col>\n                                            <v-col sm=\"8\" cols=\"12\" class=\"pl-0 py-0\">\n                                                <v-select\n                                                    :placeholder=\"$t('price_level')\"\n                                                    outlined\n                                                    tage=\"price level\"\n                                                    :rules=\"[(v) => !!v || 'Number is required']\"\n                                                    v-model=\"product.priceLevel\"\n                                                    :items=\"priceLevel\"\n                                                    item-value=\"id\"\n                                                    item-text=\"name\"\n                                                    return-object\n                                                    required/>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                <label>{{ $t(\"selling_price\") }}</label>\n                                            </v-col>\n                                            <v-col sm=\"8\" cols=\"12\" class=\"pl-0 py-0\">\n                                                <v-text-field\n                                                    outlined\n                                                    :rules=\"[(v) => !!v || 'Number is required']\"\n                                                    type=\"number\"\n                                                    v-model=\"product.price\"\n                                                    required/>\n                                            </v-col>\n                                        </v-row>\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                <label>{{ $t(\"warehouse\") }}</label>\n                                            </v-col>\n                                            <v-col sm=\"8\" cols=\"12\" class=\"pl-0 py-0\">\n                                                <v-select\n                                                    :placeholder=\"$t('default_warehouse')\"\n                                                    outlined\n                                                    tage=\"Default Warehouse\"\n                                                    v-model=\"mWareHouse\"\n                                                    :items=\"wareHouses\"\n                                                    item-value=\"id\"\n                                                    :item-text=\"(item) => `${item.name}`\"\n                                                    return-object\n                                                    clearable\n                                                    required/>\n                                            </v-col>\n                                        </v-row>\n                                        <!-- <v-row>\n                                                              <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                                <label>{{ $t('initial_cost_per_unit') }}</label>\n                                                              </v-col>\n                                                              <v-col sm=\"8\" cols=\"12\" class=\"pl-0 py-0\">\n                                                                <v-text-field outlined\n                                                                              :rules=\"[v => !!v || 'Number is required']\"\n                                                                              v-model=\"product.cost\"\n                                                                              type=\"number\"\n                                                                              required/>\n                                                              </v-col>\n                                                            </v-row> -->\n                                    </v-col>\n                                    <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                        <v-row>\n                                            <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                                                <label>{{ $t(\"recorder_qty\") }}</label>\n                                            </v-col>\n                                            <v-col sm=\"8\" cols=\"12\" class=\"pl-0 py-0\">\n                                                <v-text-field\n                                                    outlined\n                                                    v-model=\"product.reOrderQTY\"\n                                                    type=\"number\"/>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n                            <v-card outlined dense class=\"no_border my-1\">\n                                <v-row>\n                                    <v-col sm=\"7\" cols=\"12\">\n                                        <v-card\n                                            outlined\n                                            dense\n                                            class=\"px-4 rounded-0\"\n                                            height=\"428px\">\n                                            <v-row>\n                                                <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                                    <h2 class=\"font_18 mb-0\">{{ $t(\"account\") }}</h2>\n                                                    <p class=\"mb-0 mb-1 color_grey\">\n                                                        {{ $t(\"account_tax_prod_desc\") }}\n                                                    </p>\n                                                </v-col>\n                                                <v-col sm=\"6\" cols=\"12\">\n                                                    <label class=\"label\">{{ $t(\"inventory\") }}</label>\n                                                    <v-select\n                                                        class=\"mt-1\"\n                                                        :placeholder=\"$t('select_inventory')\"\n                                                        tage=\"Inventory\"\n                                                        :loading=\"accLoading\"\n                                                        v-model=\"mAccInventory\"\n                                                        :items=\"accInventory\"\n                                                        item-value=\"id\"\n                                                        :item-text=\"(item) => `${item.number} - ${item.name}`\"\n                                                        :rules=\"[(v) => !!v['id'] || 'Number is required']\"\n                                                        return-object\n                                                        outlined/>\n                                                    <label class=\"label\">{{$t(\"cost_of_goods_sold\")}}</label>\n                                                    <v-select\n                                                        class=\"mt-1\"\n                                                        :placeholder=\"$t('select_goods')\"\n                                                        tage=\"Cost of Goods Sold\"\n                                                        v-model=\"mAccCostOfGoodSold\"\n                                                        :loading=\"accLoading\"\n                                                        :items=\"accCostOfGoodSold\"\n                                                        item-value=\"id\"\n                                                        :item-text=\"(item) => `${item.number} - ${item.name}`\"\n                                                        :rules=\"[(v) => !!v['id'] || 'Number is required']\"\n                                                        return-object\n                                                        outlined/>\n                                                    <label class=\"label\">{{ $t(\"revenue\") }}</label>\n                                                    <v-select\n                                                        class=\"mt-1\"\n                                                        :placeholder=\"$t('revenue')\"\n                                                        tage=\"Revenue\"\n                                                        v-model=\"incomeAcc\"\n                                                        :loading=\"accLoading\"\n                                                        :items=\"accRevenue\"\n                                                        item-value=\"id\"\n                                                        :item-text=\"(item) => `${item.number} - ${item.name}`\"\n                                                        :rules=\"[(v) => !!v['id'] || 'Number is required']\"\n                                                        return-object\n                                                        outlined/>\n                                                    <!--                          <label class=\"label\">{{ $t(\"default_tax\") }}</label>-->\n                                                    <!--                          <v-select-->\n                                                    <!--                            class=\"mt-1\"-->\n                                                    <!--                            tage=\"Default Tax\"-->\n                                                    <!--                            v-model=\"mDefaultTax\"-->\n                                                    <!--                            :items=\"vat\"-->\n                                                    <!--                            item-value=\"id\"-->\n                                                    <!--                            item-text=\"defaultTax\"-->\n                                                    <!--                            return-object-->\n                                                    <!--                            outlined-->\n                                                    <!--                          />-->\n                                                </v-col>\n                                                <!--                        <v-col sm=\"6\" cols=\"12\">-->\n                                                <!--                          <label class=\"label\">{{ $t(\"sale_tax\") }}</label>-->\n                                                <!--                          <v-select-->\n                                                <!--                            class=\"mt-1\"-->\n                                                <!--                            tage=\"Default Tax\"-->\n                                                <!--                            v-model=\"mPurchaseTax\"-->\n                                                <!--                            :items=\"purchaseTax\"-->\n                                                <!--                            item-value=\"id\"-->\n                                                <!--                            item-text=\"defaultTax\"-->\n                                                <!--                            return-object-->\n                                                <!--                            outlined-->\n                                                <!--                          />-->\n                                                <!--                          <label class=\"label\">{{ $t(\"purchase_tax\") }}</label>-->\n                                                <!--                          <v-select-->\n                                                <!--                            class=\"mt-1\"-->\n                                                <!--                            tage=\"Default Tax\"-->\n                                                <!--                            v-model=\"mPurchaseTax\"-->\n                                                <!--                            :items=\"purchaseTax\"-->\n                                                <!--                            item-value=\"id\"-->\n                                                <!--                            item-text=\"defaultTax\"-->\n                                                <!--                            return-object-->\n                                                <!--                            outlined-->\n                                                <!--                          />-->\n                                                <!--                          <label class=\"label\">{{ $t(\"specific_tax\") }}</label>-->\n                                                <!--                          <v-select-->\n                                                <!--                            class=\"mt-1\"-->\n                                                <!--                            tage=\"Special Tax\"-->\n                                                <!--                            v-model=\"mSpecificTax\"-->\n                                                <!--                            :items=\"specificTax\"-->\n                                                <!--                            item-value=\"id\"-->\n                                                <!--                            item-text=\"defaultTax\"-->\n                                                <!--                            return-object-->\n                                                <!--                            outlined-->\n                                                <!--                          />-->\n                                                <!--                          <label class=\"label\">{{ $t(\"other_tax\") }}</label>-->\n                                                <!--                          <v-select-->\n                                                <!--                            class=\"mt-1\"-->\n                                                <!--                            tage=\"Special Tax\"-->\n                                                <!--                            v-model=\"mOtherTax\"-->\n                                                <!--                            :items=\"otherTax\"-->\n                                                <!--                            item-value=\"id\"-->\n                                                <!--                            item-text=\"defaultTax\"-->\n                                                <!--                            return-object-->\n                                                <!--                            outlined-->\n                                                <!--                          />-->\n                                                <!--                        </v-col>-->\n                                            </v-row>\n                                        </v-card>\n                                    </v-col>\n                                    <v-col sm=\"5\" cols=\"12\" class=\"pl-1\">\n                                        <v-card outlined dense class=\"px-4 rounded-0\">\n                                            <v-row>\n                                                <v-col cols=\"12\" sm=\"12\">\n                                                    <h2 class=\"font_18 mb-0\">\n                                                        {{ $t(\"product_variants\") }}\n                                                    </h2>\n                                                    <p class=\"mb-0 color_grey\">\n                                                        {{ $t(\"add_funct_prod_variants_desc\") }}\n                                                    </p>\n                                                </v-col>\n                                                <v-col sm=\"12\" cols=\"12\" class=\"pt-2\">\n                                                    <kendo-datasource ref=\"dataSource\" :data=\"varLists\"/>\n                                                    <kendo-grid\n                                                        id=\"grid\"\n                                                        class=\"grid-function\"\n                                                        :data-source-ref=\"'dataSource'\"\n                                                        :sortable=\"false\"\n                                                        :filterable=\"false\"\n                                                        :column-menu=\"true\"\n                                                        :navigatable=\"true\"\n                                                        :editable=\"true\"\n                                                        :scrollable-virtual=\"true\">\n                                                        <kendo-grid-column\n                                                            :title=\"$t('no.')\"\n                                                            :template=\"rowNumberTmpl\"\n                                                            :width=\"45\"\n                                                            :column-menu=\"false\"\n                                                            :headerAttributes=\"{\n                                                                style: 'background-color: #EDF1F5;',\n                                                                class: 'text-center'}\"\n                                                            :attributes=\"{ style: 'text-align: center' }\"/>\n                                                        <kendo-grid-column\n                                                            :field=\"'variant'\"\n                                                            :title=\"$t('variant')\"\n                                                            :width=\"190\"\n                                                            :template=\"'<span>#=variant.name#</span>'\"\n                                                            :editor=\"attributeDropDownEditor\"\n                                                            :headerAttributes=\"{\n                                                                style: 'background-color: #EDF1F5'}\"/>\n                                                        <kendo-grid-column\n                                                            :command=\"{\n                                                                iconClass: 'k-icon k-i-trash',\n                                                                text: 'Delete',\n                                                                click: removeRow,\n                                                                class: 'btn-plus'}\"\n                                                            :title=\"$t('action')\"\n                                                            :width=\"100\"\n                                                            :headerAttributes=\"{\n                                                                style: 'text-align: right; background-color: #EDF1F5'}\"\n                                                        />\n                                                    </kendo-grid>\n                                                    <v-btn\n                                                        color=\"primary\"\n                                                        class=\"float-left rounded-4 ml-0 btn_plus white--text mt-3\"\n                                                        @click=\"addRow\">\n                                                        <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                                                    </v-btn>\n                                                </v-col>\n                                            </v-row>\n                                        </v-card>\n                                    </v-col>\n                                </v-row>\n                            </v-card>\n                            <v-card outlined dense class=\"no_border function_footer\">\n                                <v-btn\n                                    color=\"black\"\n                                    @click=\"cancel\"\n                                    outlined\n                                    class=\"text-capitalize black--text float-left\">{{ $t(\"cancel\") }}\n                                </v-btn>\n                                <!--                                <v-menu>-->\n                                <!--                                    <template v-slot:activator=\"{ on }\">-->\n                                <!--                                        <v-btn-->\n                                <!--                                            class=\"ml-2 float-right black&#45;&#45;text text-capitalize\"-->\n                                <!--                                            v-on=\"on\"-->\n                                <!--                                        >-->\n                                <!--                                            {{ $t(\"save_option\") }}-->\n                                <!--                                            <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>-->\n                                <!--                                        </v-btn>-->\n                                <!--                                    </template>-->\n                                <!--                                </v-menu>-->\n                                <v-btn\n                                    class=\"float-right white--text\"\n                                    color=\"primary\"\n                                    @click=\"onSaveClose\">{{ $t(\"save_close\") }}\n                                </v-btn>\n                                <LoadingMe\n                                    :isLoading=\"showLoading\"\n                                    :fullPage=\"false\"\n                                    type=\"loading\"\n                                    :myLoading=\"true\"/>\n                            </v-card>\n                        </v-form>\n                    </v-card>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\nimport {i18n} from \"@/i18n\";\nimport ProductModel from \"@/scripts/model/Products\";\nimport kendo from \"@progress/kendo-ui\";\nimport VariantModel from \"@/scripts/model/Variants\";\n\nconst $ = kendo.jQuery;\n\nconst accountHandler = require(\"@/scripts/handler/accounting/account\");\nconst categoryHandler = require(\"@/scripts/categoryHandler\");\nconst groupHandler = require(\"@/scripts/groupHandler\");\nconst subGroupHandler = require(\"@/scripts/subGroupHandler\");\nconst uomHandler = require(\"@/scripts/uomHandler\");\nconst warehouseHandler = require(\"@/scripts/warehouseHandler\");\nconst settingHandler = require(\"@/scripts/settingHandler\");\nconst productHandler = require(\"@/scripts/productHandler\");\nconst variantHandler = require(\"@/scripts/variantTypeHandler\");\nconst priceLevelHandler = require(\"@/scripts/priceLevelHandler\");\n// const attributeHandler = require(\"@/scripts/attributeHandler\")\nconst variantModel = new VariantModel({});\n\nlet productModel = new ProductModel({});\nexport default {\n    name: \"AddProduct\",\n    props: [\"id\"],\n    components: {\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    data: function () {\n        return {\n            showLoading: true,\n            accLoading: false,\n            valid: \"\",\n            incomeAcc: \"\",\n            mAccInventory: \"\",\n            mCategory: \"\",\n            mGroup: \"\",\n            mFormTemplate: \"\",\n            formTemplate: [\n                {\n                    id: \"ftp-c35cbe46-1c5e-11eb-adc1-0242ac120002\",\n                    name: \"Form A\",\n                },\n                {\n                    id: \"ftp-c35cc062-1c5e-11eb-adc1-0242ac120002\",\n                    name: \"Form B\",\n                },\n                {\n                    id: \"ftp-c35cc2ec-1c5e-11eb-adc1-0242ac120002\",\n                    name: \"Form C\",\n                },\n            ],\n            mAccCostOfGoodSold: \"\",\n            accRevenue: [],\n            accInventory: [],\n            accCostOfGoodSold: [],\n            categories: [],\n            groups: [],\n            group: [],\n            subGroup: [],\n            uom: [],\n            tax: [],\n            specificTax: [],\n            vat: [],\n            mSubGroup: {},\n            subGroups: [],\n            wareHouses: [],\n            mUOM: {},\n            mWareHouse: {},\n            mSpecificTax: {},\n            mOtherTax: {},\n            otherTax: [],\n            mDefaultTax: {},\n            purchaseTax: [],\n            mPurchaseTax: {},\n            mSerialOrBatch: 0,\n            variantTypes: [],\n            variant: variantModel,\n            varLists: [],\n            product: productModel,\n            productVariant: {},\n            variantId: \"\",\n            priceLevel: [],\n        };\n    },\n    methods: {\n        async loadPriceLevel() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    priceLevelHandler.get().then((res) => {\n                        const data = res || [];\n                        this.priceLevel = data.filter((n) => n.type.name === \"Standard\");\n                        if (this.priceLevel.length > 0) {\n                            this.product.priceLevel = this.priceLevel[0];\n                        }\n                    });\n                }, 10);\n            });\n        },\n        loadCategoryAccountAndTax() {\n            // this.mOtherTax = this.mCategory.tax.hasOwnProperty(\"otherTax\")\n            //     ? this.mCategory.tax.otherTax\n            //     : {};\n            // this.mSpecificTax = this.mCategory.tax.hasOwnProperty(\"specificTax\")\n            //     ? this.mCategory.tax.specificTax\n            //     : {};\n            // this.mDefaultTax = this.mCategory.tax.hasOwnProperty(\"defaultTax\")\n            //     ? this.mCategory.tax.defaultTax\n            //     : {};\n            // this.mPurchaseTax = this.mCategory.tax.hasOwnProperty(\"purchaseTax\")\n            //     ? this.mCategory.tax.purchaseTax\n            //     : {};\n            this.incomeAcc = this.mCategory.account.hasOwnProperty(\"incomeAcc\")\n                ? this.mCategory.account.incomeAcc\n                : {};\n            this.mAccInventory = this.mCategory.account.hasOwnProperty(\"inventoryAcc\")\n                ? this.mCategory.account.inventoryAcc\n                : {};\n            this.mAccCostOfGoodSold = this.mCategory.account.hasOwnProperty(\n                \"costOfGoodsSoldAcc\"\n            )\n                ? this.mCategory.account.costOfGoodsSoldAcc\n                : {};\n        },\n        async initData() {\n            // window.console.log('me', this.$route.params.id)\n            if (this.$route.params.id !== undefined) {\n                await this.loadSingleProduct();\n            } else {\n                let ds = this.$refs.dataSource.kendoWidget();\n                ds.data([]);\n                this.addRow();\n            }\n        },\n        addRow() {\n            let ds = this.$refs.dataSource.kendoWidget(),\n                total = ds.total();\n            ds.insert(total, {\n                variant: this.variant,\n            });\n        },\n        // Row Number Template\n        rowNumberTmpl(dataItem) {\n            var ds = this.$refs.dataSource.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        // Grid Custom Editor\n        attributeDropDownEditor(container, options) {\n            kendo\n                .jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: false,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"startswith\",\n                    dataTextField: \"name\",\n                    dataValueField: \"id\",\n                    template: \"<span>#=code# - #=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.variantTypes,\n                    }),\n                });\n        },\n        // Remove Row\n        removeRow(e) {\n            e.preventDefault();\n\n            var grid = kendo.jQuery(\"#grid\").data(\"kendoGrid\"),\n                dataSource = grid.dataSource,\n                dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n\n            if (dataSource.total() > 1) {\n                dataSource.remove(dataItem);\n            }\n        },\n        onChange() {\n        },\n        async onEditClick(value) {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.product = value;\n                }, 10);\n            });\n        },\n        onNewClick() {\n            this.product.id = \"\";\n            this.clear();\n        },\n        close(data) {\n            window.history.go(-1);\n            window.console.log(data, \"--data\");\n            // this.$router.push({\n            //   name: 'Products', params: {\n            //     data: data\n            //   }\n            // })\n        },\n        clear() {\n            this.product = {};\n        },\n        async onSaveClose() {\n            if (!this.$refs.form.validate()) {\n                this.$refs.form.validate();\n                return;\n            }\n            let variants = [];\n            let ds = this.$refs.dataSource.kendoWidget();\n            let dataValidate = 0;\n            ds.data().forEach((value, index) => {\n                // window.console.log(value)\n                if (\n                    value.variant == undefined ||\n                    value.variant.id == undefined ||\n                    value.variant.id == null ||\n                    value.variant.id == \"\"\n                ) {\n                    this.$snotify.error(\"Please check Variants on row \" + (index + 1));\n                } else {\n                    dataValidate += 1;\n                }\n            });\n            let variantAR = ds.data();\n            if (variantAR.length == dataValidate) {\n                const variant = ds.data();\n                variant.forEach((i) => {\n                    variants.push({\n                        variant: i.variant,\n                        uid: i.uid,\n                    });\n                });\n                new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve(\"resolved\");\n                        // if (this.product.id === '' || this.product.id === undefined) {\n                        let data = {\n                            id:                     this.$route.params.id ? this.$route.params.id : \"\",\n                            name:                   this.product.name,\n                            sku:                    this.product.sku,\n                            saleDescription:        this.product.saleDescription,\n                            purchaseDescription:    this.product.purchaseDescription,\n                            price:                  this.product.price,\n                            cost:                   this.product.cost,\n                            reOrderQTY:             this.product.reOrderQTY,\n                            category:               this.mCategory || {},\n                            priceLevel:             this.product.priceLevel,\n                            group:                  this.mGroup || {},\n                            subGroup:               this.mSubGroup || {},\n                            uom:                    this.mUOM,\n                            warehouse:              this.mWareHouse,\n                            inventoryAcc:           this.mAccInventory,\n                            incomeAcc:              this.incomeAcc,\n                            costOfGoodsSoldAcc:     this.mAccCostOfGoodSold,\n                            // defaultTax: this.mDefaultTax,\n                            // purchaseTax: this.mPurchaseTax,\n                            // specificTax: this.mSpecificTax,\n                            // otherTax: this.mOtherTax,\n                            formTemplate:           this.mFormTemplate,\n                            variant:                variants,\n                            variantId:              this.variantId,\n                            canBeSold:              this.product.canBeSold,\n                            canBeProduce:           this.product.canBeProduce,\n                            canBeRent:              this.product.canBeRent,\n                            canBePurchase:          this.product.canBePurchase,\n                            isFavorite:             this.product.isFavorite,\n                            batchOrSerial:          this.product.batchOrSerial,\n                            reUsed:                 this.product.reUsed || false,\n                            // batchTracked: this.mSerialOrBatch == 1 ? this.product.batchTracked : 0,\n                            // isSerialNumber: this.mSerialOrBatch == 2 ? this.product.isSerialNumber : 0,\n                            status:                 this.product.status || 1,\n                            deleted:                this.product.deleted || 0,\n                            type:                   this.$route.params.id ? this.$route.query.type : \"new\",\n                        };\n                        window.console.log('data',data)\n                        productHandler\n                            .create(data)\n                            .then((response) => {\n                                if (response.data.statusCode === 201) {\n                                    // this.loadSaleUC()\n                                    // this.clear()\n                                    this.$snotify.success(\"Success\");\n                                    this.close(response.data.data);\n                                    this.$refs.form.reset();\n                                }\n                            })\n                            .catch((e) => {\n                                this.$snotify.error(\"Something went wrong\");\n                                this.errors.push(e);\n                            });\n                    }, 10);\n                });\n            }\n        },\n        async onCategoryChanged() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    // window.console.log(this.mCategory)\n                    this.mGroup = \"\";\n                    this.mSubGroup = \"\";\n\n                    this.group = this.groups.filter(\n                        (m) => m.category.id === this.mCategory.id\n                    );\n                    if (this.group.length > 0) {\n                        this.mGroup = this.group[0];\n                        this.subGroup = this.subGroups.filter(\n                            (m) => m.group.id === this.group[0].id\n                        );\n                        if (this.subGroup.length > 0) {\n                            this.mSubGroup = this.subGroup[0];\n                        }\n                    }\n                    this.loadCategoryAccountAndTax();\n                }, 10);\n            });\n        },\n        async loadAccount() {\n            this.accLoading = true;\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    accountHandler.getAll().then((res) => {\n                        this.showLoading = false;\n                        this.accRevenue = res.data\n                            .filter((m) => m.account_type.number === 32)\n                            .map((item) => {\n                                return {\n                                    id: item.uuid,\n                                    uuid: item.uuid,\n                                    name: item.name,\n                                    local_name: item.local_name,\n                                    number: item.number,\n                                    is_taxable: item.is_taxable,\n                                    banhjiAccCode: item.banhjiAccCode,\n                                    group_code: item.group_code,\n                                    parent_account: item.parent_account,\n                                    type_code: item.type_code,\n                                    account_type: item.account_type,\n                                };\n                            });\n                        if (this.accRevenue.length > 0) {\n                            this.incomeAcc = this.accRevenue[0];\n                        }\n                        this.accInventory = res.data\n                            .filter((m) => m.account_type.number === 8)\n                            .map((item) => {\n                                return {\n                                    id: item.uuid,\n                                    uuid: item.uuid,\n                                    name: item.name,\n                                    local_name: item.local_name,\n                                    number: item.number,\n                                    is_taxable: item.is_taxable,\n                                    banhjiAccCode: item.banhjiAccCode,\n                                    group_code: item.group_code,\n                                    parent_account: item.parent_account,\n                                    type_code: item.type_code,\n                                    account_type: item.account_type,\n                                };\n                            });\n                        if (this.accInventory.length > 0) {\n                            this.mAccInventory = this.accInventory[0];\n                        }\n                        this.accCostOfGoodSold = res.data\n                            .filter((m) => m.account_type.number === 33)\n                            .map((item) => {\n                                return {\n                                    id: item.uuid,\n                                    uuid: item.uuid,\n                                    name: item.name,\n                                    local_name: item.local_name,\n                                    number: item.number,\n                                    is_taxable: item.is_taxable,\n                                    banhjiAccCode: item.banhjiAccCode,\n                                    group_code: item.group_code,\n                                    parent_account: item.parent_account,\n                                    type_code: item.type_code,\n                                    account_type: item.account_type,\n                                };\n                            });\n                        if (this.accCostOfGoodSold.length > 0) {\n                            this.mAccCostOfGoodSold = this.accCostOfGoodSold[0];\n                        }\n                        this.accLoading = false;\n                    });\n                }, 10);\n            });\n        },\n        async loadCategory() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    categoryHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.categories = res;\n                        this.categories = this.categories.filter(\n                            (m) => m.hasOwnProperty(\"type\") && m.type.name === \"Product\"\n                        );\n                        // if (this.categories.length > 0) {\n                        //   this.mCategory = this.categories[0]\n                        //   this.onCategoryChanged()\n                        // }\n                    });\n                }, 10);\n            });\n        },\n        async loadGroup() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    groupHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.groups = res;\n                    });\n                }, 10);\n            });\n        },\n        async loadSubGroup() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    subGroupHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.subGroups = res;\n                    });\n                }, 10);\n            });\n        },\n        async skuGenerator() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const category = this.mCategory || {};\n                    const group = this.mGroup || {};\n                    const sGroup = this.mSubGroup || {};\n                    let cateAbbr = \"\",\n                        groupAbbr = \"\",\n                        sGroupAbbr = \"\",\n                        skuCode = \"\";\n                    if (category.id) {\n                        cateAbbr = category.abbr || \"\";\n                        skuCode += cateAbbr + \"/\";\n                    }\n                    if (group.id) {\n                        groupAbbr = group.abbr || \"\";\n                        skuCode += groupAbbr + \"/\";\n                    }\n                    if (sGroup.id) {\n                        sGroupAbbr = sGroup.abbr || \"\";\n                        skuCode += sGroupAbbr\n                    }\n                    window.console.log('--xx', category, group, sGroup)\n                    this.product.sku = skuCode\n                    // if (this.product.name) {\n                    //     this.product.sku =\n                    //         skuCode + this.product.name.toString().substring(0, 3);\n                    // }\n                }, 10);\n            });\n        },\n        async loadUOM() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    uomHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.uom = res;\n                        if (this.uom.length > 0) {\n                            this.mUOM = this.uom[0];\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadWareHouses() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    warehouseHandler.getWarehouseSettingAll().then((res) => {\n                        this.showLoading = false;\n                        this.wareHouses = res;\n                        if (this.wareHouses.length > 0) {\n                            this.mWareHouse = this.wareHouses[0];\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadVariants() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    variantHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.variantTypes = res;\n                        if (this.variantTypes.length > 0) {\n                            this.initData();\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadTax() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    settingHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.tax = res;\n                        let st = this.tax.filter((m) => m.taxType.typeId === 8); // valuable tax\n                        this.specificTax = st; // special tax\n\n                        let vAT = this.tax.filter(\n                            (m) => m.taxType.typeId === 1 && m.transactionType === \"Sale\"\n                        ); // valuable tax\n                        this.vat = vAT; // valuable tax\n\n                        let otTax = this.tax.filter((m) => m.taxType.typeId === 7); // valuable tax\n                        this.otherTax = otTax; // valuable tax\n\n                        this.purchaseTax = this.tax.filter(\n                            (m) => m.taxType.typeId === 1 && m.transactionType === \"Purchase\"\n                        ); // valuable tax\n                        if (this.specificTax.length > 0) {\n                            this.mSpecificTax = this.specificTax[0];\n                        }\n                        if (this.vat.length > 0) {\n                            this.mDefaultTax = this.vat[0];\n                        }\n                        if (this.otherTax.length > 0) {\n                            this.mOtherTax = this.otherTax[0];\n                        }\n                        if (this.purchaseTax.length > 0) {\n                            this.mPurchaseTax = this.purchaseTax[0];\n                        }\n                    });\n                }, 10);\n            });\n        },\n        async loadSingleProduct() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    this.showLoading = true;\n                    productHandler.getOne(this.$route.params.id).then((res) => {\n                        this.showLoading = false;\n                        this.product = res;\n                        if (this.product.id !== undefined) {\n                            this.mCategory = this.product.category;\n                            this.mGroup = this.product.group;\n                            this.mSubGroup = this.product.subGroup;\n                            this.mUOM = this.product.uom;\n                            this.mAccCostOfGoodSold = this.product.costOfGoodsSoldAcc;\n                            this.mAccInventory = this.product.inventoryAcc;\n                            this.incomeAcc = this.product.incomeAcc;\n                            // this.mSpecificTax = this.product.specificTax;\n                            this.mSerialOrBatch =\n                                this.product.isSerialNumber > 0\n                                    ? this.product.isSerialNumber\n                                    : this.product.batchTracked;\n                            // this.mOtherTax = this.product.otherTax;\n                            // this.mDefaultTax = this.product.defaultTax;\n                            // this.mPurchaseTax = this.product.purchaseTax;\n                            this.productVariant = this.product.variant;\n                            this.mWareHouse = this.product.warehouse;\n                            this.varLists = [];\n                            this.variantId = this.product.variant.id;\n                            this.product.variant.variant.forEach((m) => {\n                                this.varLists.push({\n                                    variant: {\n                                        name: m.variant.name,\n                                        id: m.variant.id,\n                                        code: m.variant.code,\n                                    },\n                                });\n                            });\n                        }\n                    });\n                }, 10);\n            });\n        },\n        cancel() {\n            this.$swal({\n                title: i18n.t(\"msg_title_warning\"),\n                text: i18n.t(\"msg_discard\"),\n                icon: \"warning\",\n                showCancelButton: true,\n                cancelButtonText: i18n.t(\"cancel\"),\n                confirmButtonColor: \"#4d4848\",\n                cancelButtonColor: \"#ED1A3A\",\n                confirmButtonText: i18n.t(\"discard\"),\n            }).then((resultCen) => {\n                if (resultCen.value) {\n                    this.$router.go(-1);\n                }\n            });\n        },\n    },\n    mounted: async function () {\n        await this.loadUOM();\n        await this.loadWareHouses();\n        // await this.loadTax();\n        await this.loadVariants();\n        await this.loadPriceLevel();\n    },\n    computed: {},\n    created: async function () {\n        await this.loadAccount();\n        await this.loadCategory();\n        await this.loadGroup();\n        await this.loadSubGroup();\n    },\n    watch: {\n        id() {\n            // this.product = this.selectedProduct\n            window.console.log(this.id, \"watch\");\n            if (this.id !== undefined) {\n                this.loadSingleProduct();\n            }\n        },\n    },\n};\n</script>\n\n<style scoped>\n.function_content {\n    padding: 0 25px 25px;\n    border-bottom: 0;\n    background-color: #fff !important;\n}\n\n@media (min-width: 1264px) {\n    .container {\n        /* max-width: 1185px; */\n        max-width: 1080px !important;\n    }\n}\n\n.grayBg {\n    background-color: #f8f8f9;\n}\n\n@media (max-width: 576px) {\n    .mb-6 {\n        margin-bottom: 0 !important;\n    }\n}\n\n.section2 {\n    border: 1px solid #d6d7d8;\n}\n\n.border_grey {\n    border: 1px solid #d6d7d8;\n}\n\n.attachment_table {\n    width: 100%;\n}\n\np {\n    font-size: 15px;\n    font-family: 'Niradei-Light' !important;\n}\n\n.theme--light.v-data-table\n> .v-data-table__wrapper\n> table\n> tbody\n> tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n</style>\n"]}]}
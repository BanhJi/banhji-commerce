{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/payroll/payroll_run/Adjustment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/payroll/payroll_run/Adjustment.vue","mtime":1638499443261},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiCmltcG9ydCBQYXlyb2xsTGlzdCBmcm9tICJAL3NjcmlwdHMvbW9kZWwvUGF5cm9sbExpc3QiCmltcG9ydCBBZGp1c3RtZW50IGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BZGp1c3RtZW50Igpjb25zdCBzZXR0aW5nc0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvc2V0dGluZ3NIYW5kbGVyIikKY29uc3QgcGF5cm9sbEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcGF5cm9sbEhhbmRsZXIiKQpjb25zdCBlbXBsb3llZUhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvZW1wbG95ZWVIYW5kbGVyIikKY29uc3QgcGF5cm9sbExpc3RNb2RlbCA9IG5ldyBQYXlyb2xsTGlzdCh7fSkKY29uc3QgYWRqdXN0bWVudE1vZGVsID0gbmV3IEFkanVzdG1lbnQoe30pCmNvbnN0ICQgPSByZXF1aXJlKCJqcXVlcnkiKQpjb25zdCBjb29raWVKUyA9IHJlcXVpcmUoIkAvY29va2llLmpzIik7CmNvbnN0IGNvb2tpZSA9IGNvb2tpZUpTLmdldENvb2tpZSgpOwoKZXhwb3J0IGRlZmF1bHQgewogICAgcHJvcHM6Wydwcm9wQWRqdXN0bWVudCddLAogICAgZGF0YTogKCkgPT4oewogICAgICAgIGpvdXJuYWxfZGF0ZTogIiIsCiAgICAgICAgZGlhbG9nbTogZmFsc2UsCiAgICAgICAgcHlyb2xsTGlzdDogW10sCiAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgIHBheXJvbGxMaXN0OiBwYXlyb2xsTGlzdE1vZGVsLAogICAgICAgIGFkanVzdG1lbnQ6IGFkanVzdG1lbnRNb2RlbCwKICAgICAgICBhZGp1c3RtZW50TGlzdDogW10sCiAgICAgICAgc2VnbWVudHM6IFtdLAogICAgICAgIGxvZ2dlZFVzZXI6IHsKICAgICAgICAgICAgaWQ6IGNvb2tpZS5jcmVhdG9yLAogICAgICAgICAgICBuYW1lOiBjb29raWUuZW1haWwKICAgICAgICB9LAogICAgICAgIHJlY29yZDoge30KICAgIH0pLAogICAgY29tcG9uZW50czogewogICAgICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KGBAL2NvbXBvbmVudHMvTG9hZGluZ2ApCiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgbG9hZFBheXJvbGxMaXN0KCl7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBwYXlyb2xsSGFuZGxlci5nZXRQYXlyb2xsKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFBheSA9IHJlcy5kYXRhLmRhdGFbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdFBheS5zdGVwID49IDIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFBheXJvbGxJdGVtKHJlc3VsdFBheSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgbG9hZFBheXJvbGxJdGVtKHJlc3VsdCl7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW1wbG95ZWUgPSBbXQogICAgICAgICAgICAgICAgICAgIHBheXJvbGxIYW5kbGVyLmdldFBheXJvbGxJdGVtKHJlc3VsdC5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdXRsX2l0ZW0gPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFBheXJvbGxzID0gcmVzdXRsX2l0ZW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cm9sbHMgICA9IHJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmFkanVzdG1lbnQubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RtZW50TGlzdCA9IHJlc3VsdC5hZGp1c3RtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2VBZGp1cy5rZW5kb1dpZGdldCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0bWVudExpc3QgPSBkcy5kYXRhKFtdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFkanVzdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzKHJlcy5kYXRhLnN0YXR1c0NvZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAzMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkU2VnbWVudCgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50cyA9IFtdCiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NIYW5kbGVyLmdldFNlZygpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRzID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMzAwKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcm93TnVtYmVyVG1wbChkYXRhSXRlbSkgewogICAgICAgICAgICB2YXIgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2VBZGp1cy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgICAgICAgaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgICAgICB9LAogICAgICAgIGFkZFJvdygpIHsKICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5kYXRhU291cmNlQWRqdXMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIHRvdGFsID0gZHMudG90YWwoKTsKICAgICAgICAgICAgZHMuaW5zZXJ0KHRvdGFsLHsKICAgICAgICAgICAgICAgIHBheXJvbGxDb21wb25lbnQ6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnLS0gU2VsZWN0IC0tJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlbXBsb3llZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICctLSBTZWxlY3QgLS0nLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFtb3VudDogMCwKICAgICAgICAgICAgICAgIHNlZ21lbnQ6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnLS0gU2VsZWN0IC0tJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjdXJyZW5jeTogIHsKICAgICAgICAgICAgICAgICAgICBjb2RlOiAnJywKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnLSBTZWxlY3QgLS0nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlUm93KGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBjb25zdCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZEFkanVzIikuZGF0YSgia2VuZG9HcmlkIiksCiAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gZ3JpZC5kYXRhU291cmNlLAogICAgICAgICAgICAgICAgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCJ0ciIpKTsKICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UudG90YWwoKSA+IDEpIHsKICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UucmVtb3ZlKGRhdGFJdGVtKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25DaGFuZ2VzKGUpewogICAgICAgICAgICB0aGlzLmxvYWRFbXBsb3llZSgpICAgCiAgICAgICAgICAgIHRoaXMubG9hZFBheXJvbGxDb21wb25lbnQoKSAKICAgICAgICAgICAgdGhpcy5sb2FkU2VnbWVudCgpIAogICAgICAgICAgICBpZiAoZS5maWVsZCA9PT0gImVtcGxveWVlIikgewogICAgICAgICAgICAgICAgbGV0IGRhdGFJdGVtID0gZS5pdGVtc1swXQogICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWVJZDogZGF0YUl0ZW0uZW1wbG95ZWUuZW1wbG95ZWVJZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICB0aGlzLmxvYWRSZWNvcmQocGFyYW1zLCBkYXRhSXRlbSkKICAgICAgICAgICAgfSAgIAogICAgICAgIH0sCiAgICAgICAgZW1wbG95ZWVEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpewogICAgICAgICAgICBrZW5kby5qUXVlcnkoJzxpbnB1dCBuYW1lPSInICsgb3B0aW9ucy5maWVsZCArICciLz4nKQogICAgICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgICAgICAua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgICAgICAgICAgYXV0b0JpbmQ6IHRydWUsCiAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICAgICAgICAgIGZpbHRlcjogImNvbnRhaW5zIiwKICAgICAgICAgICAgICAgIGRhdGFUZXh0RmllbGQ6ICJuYW1lIiwKICAgICAgICAgICAgICAgIGRhdGFWYWx1ZUZpZWxkOiAibmFtZSIsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogIjxzcGFuPiM9bmFtZSM8L3NwYW4+IiwKICAgICAgICAgICAgICAgIG9wdGlvbkxhYmVsOiAiLS0tIFNlbGVjdCAtLS0iLAogICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5lbXBsb3llZSwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBwYXlyb2xsQ29tcG9uZW50RHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKXsKICAgICAgICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykKICAgICAgICAgICAgLmFwcGVuZFRvKGNvbnRhaW5lcikKICAgICAgICAgICAgLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICAgICAgICAgIGF1dG9CaW5kOiB0cnVlLAogICAgICAgICAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgICAgICBmaWx0ZXI6ICJjb250YWlucyIsCiAgICAgICAgICAgICAgICBkYXRhVGV4dEZpZWxkOiAibmFtZSIsCiAgICAgICAgICAgICAgICBkYXRhVmFsdWVGaWVsZDogIm5hbWUiLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6ICI8c3Bhbj4jPW5hbWUjPC9zcGFuPiIsCiAgICAgICAgICAgICAgICBvcHRpb25MYWJlbDogIi0tLSBTZWxlY3QgLS0tIiwKICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMucGF5cm9sbENvbXBvbmVudCwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBzZWdtZW50RHJvcERvd25FZGl0b3IoY29udGFpbmVyLCBvcHRpb25zKXsKICAgICAgICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgcmVxdWlyZWQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykKICAgICAgICAgICAgLmFwcGVuZFRvKGNvbnRhaW5lcikKICAgICAgICAgICAgLmtlbmRvRHJvcERvd25MaXN0KHsKICAgICAgICAgICAgICAgIGF1dG9CaW5kOiBmYWxzZSwKICAgICAgICAgICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLAogICAgICAgICAgICAgICAgZGF0YVRleHRGaWVsZDogIm5hbWUiLAogICAgICAgICAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJuYW1lIiwKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1uYW1lIzwvc3Bhbj4iLAogICAgICAgICAgICAgICAgb3B0aW9uTGFiZWw6ICItLS0gU2VsZWN0IC0tLSIsCiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnNlZ21lbnRzLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRFbXBsb3llZSgpewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcGxveWVlID0gW10KICAgICAgICAgICAgICAgICAgICBlbXBsb3llZUhhbmRsZXIuY2VudGVyKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1wbG95ZWUgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAzMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkUGF5cm9sbENvbXBvbmVudCgpewogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXJvbGxDb21wb25lbnQgPSBbXQogICAgICAgICAgICAgICAgICAgIHBheXJvbGxIYW5kbGVyLmdldENvbXBvbmVudCgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlcyA9IFsnZGVkdWN0aW9uJywnYmVuZWZpdCcsJ2dyb3NzX3NhbGFyeSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXJvbGxDb21wb25lbnQgPSAgcmVzLmRhdGEuZGF0YS5maWx0ZXIobSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3QgPSB0eXBlcy5maWx0ZXIobj0+IG4gPT09IG0uY29tcG9UeXBlLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihleGlzdC5sZW5ndGggPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAzMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjYWxjdWxhdGVBZGp1c3QoKXsKICAgICAgICAgICAgbGV0IHBheXJvbGxMaXN0ID0gdGhpcy5sb2FkUGF5cm9sbHM7CiAgICAgICAgICAgIGZvciAoY29uc3QgcGEgb2YgcGF5cm9sbExpc3QpewogICAgICAgICAgICAgICAgaWYocGEuYmVuZWZpdCl7CiAgICAgICAgICAgICAgICAgICAgcGEuYmVuZWZpdC5mb3JFYWNoKGk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaS5hbW91bnQgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0bWVudExpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWU6ICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkcmVzczogICAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFuazogICAgICAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuYmFuaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFua0FjY291bnQ6ICAgICAgICAgICAgcGEuZW1wbG95ZWUuYmFua0FjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50cnk6ICAgICAgICAgICAgICAgIHBhLmVtcGxveWVlLmNvdW50cnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvYjogICAgICAgICAgICAgICAgICAgIHBhLmVtcGxveWVlLmRvYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW1haWw6ICAgICAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcGxveWVlSWQ6ICAgICAgICAgICAgIHBhLmVtcGxveWVlLmVtcGxveWVlSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVtcGxveWVlVHlwZTogICAgICAgICAgIHBhLmVtcGxveWVlLmVtcGxveWVlVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3ROYW1lOiAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdE5hbWVMb2NhbGU6ICAgICAgICBwYS5lbXBsb3llZS5maXJzdE5hbWVMb2NhbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdlbmRlcjogICAgICAgICAgICAgICAgIHBhLmVtcGxveWVlLmdlbmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICAgICAgICAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlkZW50aXR5SWQ6ICAgICAgICAgICAgIHBhLmVtcGxveWVlLmlkZW50aXR5SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlkZW50aXR5VHlwZTogICAgICAgICAgIHBhLmVtcGxveWVlLmlkZW50aXR5VHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW1hZ2U6ICAgICAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuaW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxhc3ROYW1lOiAgICAgICAgICAgICAgIHBhLmVtcGxveWVlLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsYXN0TmFtZUxvY2FsZTogICAgICAgICBwYS5lbXBsb3llZS5sYXN0TmFtZUxvY2FsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFyaXRhbFN0YXR1czogICAgICAgICAgcGEuZW1wbG95ZWUubWFyaXRhbFN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmF0aW9uYWxpdHk6ICAgICAgICAgICAgcGEuZW1wbG95ZWUubmF0aW9uYWxpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5hdHVyZUVtcGxveWVlOiAgICAgICAgIHBhLmVtcGxveWVlLm5hdHVyZUVtcGxveWVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub09mQ2hpbGRyZW46ICAgICAgICAgICBwYS5lbXBsb3llZS5ub09mQ2hpbGRyZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBheW1lbnRNZXRob2Q6ICAgICAgICAgIHBhLmVtcGxveWVlLnBheW1lbnRNZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBheW1lbnRQZXJpb2Q6ICAgICAgICAgIHBhLmVtcGxveWVlLnBheW1lbnRQZXJpb2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBheXJvbGxMaWFiaWxpdGllOiAgICAgIHBhLmVtcGxveWVlLnBheXJvbGxMaWFiaWxpdGllLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwaG9uZTogICAgICAgICAgICAgICAgICBwYS5lbXBsb3llZS5waG9uZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2FsYXJ5QWNjOiAgICAgICAgICAgICAgcGEuZW1wbG95ZWUuc2FsYXJ5QWNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYWxhcnlBZHZhbmNlQWNjOiAgICAgICBwYS5lbXBsb3llZS5zYWxhcnlBZHZhbmNlQWNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzcG91c2VHZW5kZXI6ICAgICAgICAgICBwYS5lbXBsb3llZS5zcG91c2VHZW5kZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwb3VzZU5hbWU6ICAgICAgICAgICAgIHBhLmVtcGxveWVlLnNwb3VzZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwb3VzZU5hdHVyZUVtcGxveWVlOiAgIHBhLmVtcGxveWVlLnNwb3VzZU5hdHVyZUVtcGxveWVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGF0dXM6ICAgICAgICAgICAgICAgICBwYS5lbXBsb3llZS5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdvcmtpbmdTdGF0dXM6ICAgICAgICAgIHBhLmVtcGxveWVlLndvcmtpbmdTdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICAgICAgICAgICAgICAgICAgIHBhLmVtcGxveWVlLmVtcGxveWVlSWQgKyAnIC0gJyArICBwYS5lbXBsb3llZS5maXJzdE5hbWUgKycgJysgcGEuZW1wbG95ZWUubGFzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlyb2xsQ29tcG9uZW50OiAgICAgICAgICAgaS5jb21wb25lbnQgPyBpLmNvbXBvbmVudDoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6ICAgICAgICAgICAgICAgICAgIHBhLmN1cnJlbmN5IHx8IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogICAgICAgICAgICAgICAgICAgICBpLmFtb3VudCA/IGkuYW1vdW50OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZ21lbnQ6ICAgICAgICAgICAgICAgICAgICBpLnNlZ21lbnQgPyBpLnNlZ21lbnQ6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2F2ZUFkanVzdCgpewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2VBZGp1cy5rZW5kb1dpZGdldCgpOwogICAgICAgICAgICBsZXQgZHMxID0gZHMuZGF0YSgpCiAgICAgICAgICAgIGxldCBkYXRhU291cmNlID0gZHMxLm1hcChpbmRleD0+ewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICAgICAgICAgICAgIGluZGV4LmFtb3VudCwKICAgICAgICAgICAgICAgICAgICBlbXBsb3llZTogICAgICAgICAgIGluZGV4LmVtcGxveWVlLAogICAgICAgICAgICAgICAgICAgIHBheXJvbGxDb21wb25lbnQ6ICAgaW5kZXgucGF5cm9sbENvbXBvbmVudCwKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogICAgICAgICAgIGluZGV4LmN1cnJlbmN5CiAgICAgICAgICAgICAgICAgICAgLy8gc2VnbWVudDogICAgICAgICAgICBpbmRleC5zZWdtZW50LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICBsZXQgcGF5cm9sbExpc3QgPSB0aGlzLmxvYWRQYXlyb2xsczsKICAgICAgICAgICAgbGV0IGhlbHBlciA9IHt9OwogICAgICAgICAgICBsZXQgcmVzdWx0ID0gZGF0YVNvdXJjZS5yZWR1Y2UoZnVuY3Rpb24oaW5kZXgsIHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZih2YWx1ZS5lbXBsb3llZS5pZCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGtleSA9IHZhbHVlLnBheXJvbGxDb21wb25lbnQuY29tcG9UeXBlLm5hbWUgKyctJyt2YWx1ZS5lbXBsb3llZS5lbXBsb3llZUlkIDsKICAgICAgICAgICAgICAgICAgICBpZighaGVscGVyW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyW2tleV0gPSBPYmplY3QuYXNzaWduKHt9LCB2YWx1ZSk7IC8vIGNyZWF0ZSBhIGNvcHkgb2YgbwogICAgICAgICAgICAgICAgICAgICAgICBpbmRleC5wdXNoKGhlbHBlcltrZXldKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS5hbW91bnQgKz0gcGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpOwogICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJba2V5XS5jb25wb25lbnRUeXBlID0gdmFsdWUucGF5cm9sbENvbXBvbmVudC5jb21wb1R5cGUubmFtZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXgKICAgICAgICAgICAgfSwgW10pOwogICAgICAgICAgICBsZXQgcGF5TGlzdCA9IFtdOwogICAgICAgICAgICBmb3IgKGNvbnN0IHBhIG9mIHBheXJvbGxMaXN0KXsKICAgICAgICAgICAgICAgIGxldCBiZW5lZml0ID0gMAogICAgICAgICAgICAgICAgbGV0IGRlZHVjdGlvbiA9IDA7CiAgICAgICAgICAgICAgICBsZXQgc2FsYXJ5QWRkID0gMDsKICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uKHIpewogICAgICAgICAgICAgICAgICAgIGlmKHIucGF5cm9sbENvbXBvbmVudC5uYW1lID09PSAiRGVkdWN0aW9uIiAmJiByLmVtcGxveWVlLmlkID09IHBhLmVtcGxveWVlVXVpZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZHVjdGlvbiA9IHBhcnNlRmxvYXQoci5hbW91bnQpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHIucGF5cm9sbENvbXBvbmVudC5uYW1lID09PSAiQmVuZWZpdHMiICYmIHIuZW1wbG95ZWUuaWQgPT0gcGEuZW1wbG95ZWVVdWlkKXsKICAgICAgICAgICAgICAgICAgICAgICBiZW5lZml0ID0gcGFyc2VGbG9hdChyLmFtb3VudCkKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyLnBheXJvbGxDb21wb25lbnQuY29tcG9UeXBlLmlkID09PSAiZ3Jvc3Nfc2FsYXJ5IiAmJiByLmVtcGxveWVlLmlkID09IHBhLmVtcGxveWVlVXVpZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhbGFyeUFkZCA9IHBhcnNlRmxvYXQoci5hbW91bnQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHBheUxpc3QucHVzaCggbmV3IFBheXJvbGxMaXN0KHsKICAgICAgICAgICAgICAgICAgICBlbXBsb3llZVV1aWQ6ICAgICAgICAgICAgICAgcGEuZW1wbG95ZWVVdWlkLAogICAgICAgICAgICAgICAgICAgIGRlZHVjdGlvbjogICAgICAgICAgICAgICAgICBkZWR1Y3Rpb24gPyBkZWR1Y3Rpb246IDAsCiAgICAgICAgICAgICAgICAgICAgYmFuazogICAgICAgICAgICAgICAgICAgICAgIHBhLmJhbmssIAogICAgICAgICAgICAgICAgICAgIGJhbmtBY2NvdW50OiAgICAgICAgICAgICAgICBwYS5iYW5rQWNjb3VudCwgCiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6ICAgICAgICAgICAgICAgICAgIHBhLmN1cnJlbmN5ID8gcGEuY3VycmVuY3k6IHt9LAogICAgICAgICAgICAgICAgICAgIHRvdGFsQmVuZWZpdDogICAgICAgICAgICAgICBiZW5lZml0LAogICAgICAgICAgICAgICAgICAgIGVtcGxveWVlTmFtZTogICAgICAgICAgICAgICBwYS5lbXBsb3llZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWVJZDogICAgICAgICAgICAgICAgIHBhLmVtcGxveWVlSWQsCiAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWU6ICAgICAgICAgICAgICAgICAgIHBhLmVtcGxveWVlLAogICAgICAgICAgICAgICAgICAgIG5hdHVyZUVtcGxveWVlOiAgICAgICAgICAgICBwYS5lbXBsb3llZS5uYXR1cmVFbXBsb3llZSwKICAgICAgICAgICAgICAgICAgICBuYXR1cmVDb250cmFjdDogICAgICAgICAgICAgcGEubmF0dXJlQ29udHJhY3QsCiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogICAgICAgICAgICAgIHBhLnBheW1lbnRNZXRob2QsCiAgICAgICAgICAgICAgICAgICAgcGF5cm9sbExpYWJpbGl0aWU6ICAgICAgICAgIHBhLnBheXJvbGxMaWFiaWxpdGllLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAgICAgICAgICAgICAgICAgICBwYS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICBvdmVyVGltZUhvbGlkYXk6ICAgICAgICAgICAgcGEub3ZlclRpbWVIb2xpZGF5LAogICAgICAgICAgICAgICAgICAgIG92ZXJUaW1lV2Vla2VuZDogICAgICAgICAgICBwYS5vdmVyVGltZVdlZWtlbmQsCiAgICAgICAgICAgICAgICAgICAgb3ZlclRpbWVOaWdodDogICAgICAgICAgICAgIHBhLm92ZXJUaW1lTmlnaHQsCiAgICAgICAgICAgICAgICAgICAgcGFpZEhvdXJzOiAgICAgICAgICAgICAgICAgIHBhLnBhaWRIb3VycywKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogICAgICAgICAgICAgICAgICAgcGEucG9zaXRpb24sCiAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogICAgICAgICAgICAgICAgICAgIHBhLnNlZ21lbnQsCiAgICAgICAgICAgICAgICAgICAgc2FsYXJ5OiAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQocGEuc2FsYXJ5MSkgKyBzYWxhcnlBZGQsCiAgICAgICAgICAgICAgICAgICAgc2FsYXJ5MTogICAgICAgICAgICAgICAgICAgIHBhLnNhbGFyeTEsCiAgICAgICAgICAgICAgICAgICAgc2FsYXJ5MjogICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQocGEuc2FsYXJ5MSkgKyBzYWxhcnlBZGQsCiAgICAgICAgICAgICAgICAgICAgc2FsYXJ5VHlwZTogICAgICAgICAgICAgICAgIHBhLnNhbGFyeVR5cGUsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRpbmdUaW1lOiAgICAgICAgICAgICAgIHBhLnN0YXJ0aW5nVGltZSwKICAgICAgICAgICAgICAgICAgICB3b3JrRGF5OiAgICAgICAgICAgICAgICAgICAgcGEud29ya0RheSwKICAgICAgICAgICAgICAgICAgICB3b3JrVGltZTogICAgICAgICAgICAgICAgICAgcGEud29ya1RpbWUsIAogICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5wYXlMaXN0ID0gcGF5TGlzdAogICAgICAgICAgICBsZXQgcGF5cm9sbHMgPSB0aGlzLnBheXJvbGxzCiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgICAgICAgICAgICAgICBtb250aE9mOiAgICAgICAgICAgICAgcGF5cm9sbHMubW9udGhPZiwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogICAgICAgICAgICAgICAgIHBheXJvbGxzLmRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6ICAgICAgICAgICAgICBwYXlyb2xscy5jcmVhdGVkLAogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEVtcGxveWVlOiAgICAgICAgcGF5cm9sbHMudG90YWxFbXBsb3llZSwKICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAgICAgICAgICAgICAgIHBheXJvbGxzLm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE51bWJlcjogICAgICAgICAgIHBheXJvbGxzLmxhc3ROdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGFiYnI6ICAgICAgICAgICAgICAgICBwYXlyb2xscy5hYmJyLAogICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VOdW1iZXI6ICAgICAgcGF5cm9sbHMucmVmZXJlbmNlTnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICBwYXlOdW1iZXI6ICAgICAgICAgICAgcGF5cm9sbHMucGF5TnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgICAgICAgICAgcGF5cm9sbHMudHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6ICAgICAgICAgICAgIHBheXJvbGxzLmN1cnJlbmN5LAogICAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZVJhdGU6ICAgICAgICAgcGF5cm9sbHMuZXhjaGFuZ2VSYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogICAgICAgICAgICAgcGF5cm9sbHMubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRGVkdWN0aW9uOiAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEdyb3NzOiAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxCZW5lZml0czogICAgICAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsTmV0U2FsYXJ5OiAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRheFBheW1lbnRVUzogICAgMCwKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxlVGF4OiAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdG1lbnQ6ICAgICAgICAgICBkYXRhU291cmNlLAogICAgICAgICAgICAgICAgICAgICAgICBwYXlyb2xsTGlzdDogICAgICAgICAgdGhpcy5wYXlMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICBwYXlyb2xsTGlzdDE6ICAgICAgICAgcGF5cm9sbHMucGF5cm9sbExpc3QxLAogICAgICAgICAgICAgICAgICAgICAgICBwYXlyb2xsTGlzdDI6ICAgICAgICAgdGhpcy5wYXlMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICBzdGVwOiAgICAgICAgICAgICAgICAgMywKICAgICAgICAgICAgICAgICAgICAgICAgZGVwYXJ0bWVudDogICAgICAgICAgIHBheXJvbGxzLmRlcGFydG1lbnQgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hdHVyZUNvbnRyYWN0OiAgICAgICBwYXlyb2xscy5uYXR1cmVDb250cmFjdCB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWVHcm91cDogICAgICAgIHBheXJvbGxzLmVtcGxveWVlR3JvdXAgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlZFVzZXI6ICAgICAgICAgICB0aGlzLmxvZ2dlZFVzZXIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgcGF5cm9sbEhhbmRsZXIuY3JlYXRlUGF5cm9sbChkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygnU3VjY2VzcycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZycpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGxvYWRTdWNjZXNzKGRhdGEpewogICAgICAgICAgICB0aGlzLiRlbWl0KCdoZWFkbGluZScsZGF0YSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdvQmFjaygpewogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5nbygtMSkKICAgICAgICB9LAogICAgICAgIGxvYWRSZWNvcmQocGFyYW1zLCBkYXRhSXRlbSl7CiAgICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICBlbXBsb3llZUhhbmRsZXIuZ2V0UmVjb3JkKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXNDb2RlID09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvcmQgPSByZXMuZGF0YS5kYXRhWzBdLmN1cnJlbmN5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUl0ZW0uc2V0KCdjdXJyZW5jeScsIHRoaXMucmVjb3JkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKXsKICAgICAgICBhd2FpdCB0aGlzLmFkZFJvdygpCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5cm9sbExpc3QoKQogICAgICAgIGF3YWl0IHRoaXMubG9hZFNlZ21lbnQoKQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgcHJvcEFkanVzdG1lbnQoKXsKICAgICAgICAgICAgaWYgKHRoaXMucHJvcEFkanVzdG1lbnQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdGhpcy5sb2FkUGF5cm9sbExpc3QoKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOnsKCiAgICB9Cn0K"},{"version":3,"sources":["Adjustment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Adjustment.vue","sourceRoot":"src/views/payroll/payroll_run","sourcesContent":["<template>\n    <v-row>\n        <v-col cols=\"12\" class=\"pt-0\">\n            <v-row>\n                <v-col sm=\"4\" cols=\"12\">\n                    <h3>{{$t('payroll_adjustment')}}</h3>\n                </v-col>\n            </v-row>\n        </v-col>\n        <v-col cols=\"12\">\n            <kendo-datasource ref=\"dataSourceAdjus\"\n                :data=\"adjustmentList\"\n                :change=\"onChanges\"/>\n                <kendo-grid id=\"gridAdjus\" class=\"grid-function\"\n                    :data-source-ref=\"'dataSourceAdjus'\"\n                    :editable=\"true\"\n                    :scrollable-virtual=\"true\">\n                <kendo-grid-column\n                    :field=\"'no'\"\n                    :title=\"$t('no')\"\n                    :template=\"rowNumberTmpl\"\n                    :width=\"80\"\n                    :column-menu=\"false\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5;', class: 'text-center'\t}\"\n                    :attributes=\"{style: 'text-align: center'}\"/>\n                <kendo-grid-column\n                    :field=\"'employee'\"\n                    :width=\"250\"\n                    :title=\"$t('employee_name')\"\n                    :template=\"'<span>#= employee.name#</span>'\"\n                    :editor=\"employeeDropDownEditor\"\n                    :headerAttributes=\"{\n                        style: 'background-color: #EDF1F5'\n                    }\"/>\n                <kendo-grid-column\n                    :field=\"'payrollComponent'\"\n                    :width=\"220\"\n                    :title=\"$t('payroll_component')\"\n                    :template=\"'<span>#= payrollComponent.name#</span>'\"\n                    :editor=\"payrollComponentDropDownEditor\"\n                    :headerAttributes=\"{\n                        style: 'background-color: #EDF1F5'\n                    }\"/>\n                <!-- <kendo-grid-column\n                    :field=\"'segment'\"\n                    :title=\"$t('segment')\"\n                    :width=\"150\"\n                    :template=\"'<span>#=segment.name#</span>'\"\n                    :editor=\"segmentDropDownEditor\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/> -->\n                <kendo-grid-column\n                    :field=\"'currency'\"\n                    :title=\"$t('currency')\"\n                    :width=\"200\"\n                    :editable=\"() => {return false;}\"\n                    :template=\"'<span>#=currency.code# - #=currency.name#</span>'\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                <kendo-grid-column\n                    :field=\"'amount'\"\n                    :title=\"$t('amount')\"\n                    :template=\"'<span>#= kendo.toString(amount,`n2`)#</span>'\"\n                    :headerAttributes=\"{\n                        style: 'background-color: #EDF1F5'\n                    }\"\n                    :attributes=\"{\n                        style: 'text-align: right;'\n                    }\"/>\n                 <kendo-grid-column\n                    :width=\"100\"\n                    :command=\"{ iconClass: 'k-icon k-i-trash', text: ' ', click: removeRow, class: 'btn-plus' }\"\n                    :title=\"$t('action')\"\n                    :headerAttributes=\"{style: 'text-align: center; background-color: #EDF1F5'}\"\n                    :attributes=\"{style: 'text-align: center'}\"/>\n            </kendo-grid>\n            <v-btn color=\"primary\"\n                    class=\"float-left rounded-0 white--text mt-3\"\n                    @click=\"addRow\">\n                <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n            </v-btn>\n        </v-col>\n        <LoadingMe :isLoading=\"showLoading\" :fullPage=\"true\" :myLoading=\"true\"  type=\"loading\"/>\n    </v-row>\n</template>\n<script>\n    import kendo from \"@progress/kendo-ui\"\n    import PayrollList from \"@/scripts/model/PayrollList\"\n    import Adjustment from \"@/scripts/model/Adjustment\"\n    const settingsHandler = require(\"@/scripts/settingsHandler\")\n    const payrollHandler = require(\"@/scripts/payrollHandler\")\n    const employeeHandler = require(\"@/scripts/employeeHandler\")\n    const payrollListModel = new PayrollList({})\n    const adjustmentModel = new Adjustment({})\n    const $ = require(\"jquery\")\n    const cookieJS = require(\"@/cookie.js\");\n    const cookie = cookieJS.getCookie();\n\n    export default {\n        props:['propAdjustment'],\n        data: () =>({\n            journal_date: \"\",\n            dialogm: false,\n            pyrollList: [],\n            showLoading: false,\n            payrollList: payrollListModel,\n            adjustment: adjustmentModel,\n            adjustmentList: [],\n            segments: [],\n            loggedUser: {\n                id: cookie.creator,\n                name: cookie.email\n            },\n            record: {}\n        }),\n        components: {\n            LoadingMe: () => import(`@/components/Loading`)\n        },\n        methods:{\n            loadPayrollList(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        this.showLoading = true;\n                        payrollHandler.getPayroll(this.$route.params.id).then(res => {\n                            this.showLoading = true;\n                            if(res.data.statusCode === 200){\n                                const resultPay = res.data.data[0]\n                                if(resultPay.step >= 2){\n                                    this.loadPayrollItem(resultPay)\n                                }\n                            }\n                        })\n                    }, 300);\n                })\n            },\n            loadPayrollItem(result){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        this.employee = []\n                        payrollHandler.getPayrollItem(result.id).then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                let resutl_item = res.data.data\n                                this.showLoading = false\n                                this.loadPayrolls = resutl_item\n                                this.payrolls   = result\n                                if(result.adjustment.length > 0){\n                                    this.adjustmentList = result.adjustment\n                                }else{\n                                    let ds = this.$refs.dataSourceAdjus.kendoWidget();\n                                    this.adjustmentList = ds.data([])\n                                    this.addRow()\n                                    this.calculateAdjust()\n                                }\n                                this.loadSuccess(res.data.statusCode)\n                                this.showLoading = false;\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            async loadSegment() {\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        this.segments = []\n                        settingsHandler.getSeg().then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                this.showLoading = false\n                                this.segments = res.data.data\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            rowNumberTmpl(dataItem) {\n                var ds = this.$refs.dataSourceAdjus.kendoWidget(),\n                    index = ds.indexOf(dataItem);\n                return index + 1;\n            },\n            addRow() {\n                let ds = this.$refs.dataSourceAdjus.kendoWidget(),\n                    total = ds.total();\n                ds.insert(total,{\n                    payrollComponent: {\n                        name: '-- Select --',\n                    },\n                    employee: {\n                        name: '-- Select --',\n                    },\n                    amount: 0,\n                    segment: {\n                        name: '-- Select --',\n                    },\n                    currency:  {\n                        code: '',\n                        name: '- Select --'\n                    }\n                });\n            },\n            removeRow(e) {\n                e.preventDefault();\n                const grid = kendo.jQuery(\"#gridAdjus\").data(\"kendoGrid\"),\n                    dataSource = grid.dataSource,\n                    dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n                if (dataSource.total() > 1) {\n                    dataSource.remove(dataItem);\n                }\n            },\n            onChanges(e){\n                this.loadEmployee()   \n                this.loadPayrollComponent() \n                this.loadSegment() \n                if (e.field === \"employee\") {\n                    let dataItem = e.items[0]\n                    let params = {\n                        status: 1,\n                        employeeId: dataItem.employee.employeeId\n                    }\n                   this.loadRecord(params, dataItem)\n                }   \n            },\n            employeeDropDownEditor(container, options){\n                kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"name\",\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.employee,\n                    })\n                })\n            },\n            payrollComponentDropDownEditor(container, options){\n                kendo.jQuery('<input name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: true,\n                    autoWidth: true,\n                    height: 400,\n                    filter: \"contains\",\n                    dataTextField: \"name\",\n                    dataValueField: \"name\",\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.payrollComponent,\n                    })\n                })\n            },\n            segmentDropDownEditor(container, options){\n                kendo.jQuery('<input required name=\"' + options.field + '\"/>')\n                .appendTo(container)\n                .kendoDropDownList({\n                    autoBind: false,\n                    autoWidth: true,\n                    height: 400,\n                    dataTextField: \"name\",\n                    dataValueField: \"name\",\n                    template: \"<span>#=name#</span>\",\n                    optionLabel: \"--- Select ---\",\n                    dataSource: new kendo.data.DataSource({\n                        data: this.segments,\n                    })\n                })\n            },\n            async loadEmployee(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        this.employee = []\n                        employeeHandler.center().then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                this.showLoading = false\n                                this.employee = res.data.data\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            async loadPayrollComponent(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        this.payrollComponent = []\n                        payrollHandler.getComponent().then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                this.showLoading = false\n                                const types = ['deduction','benefit','gross_salary']\n                                this.payrollComponent =  res.data.data.filter(m => {\n                                    const exist = types.filter(n=> n === m.compoType.id)\n                                        if(exist.length > 0){\n                                            return m\n                                        }\n                                    }\n                                )\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            calculateAdjust(){\n                let payrollList = this.loadPayrolls;\n                for (const pa of payrollList){\n                    if(pa.benefit){\n                        pa.benefit.forEach(i=>{\n                            if(i.amount > 0){\n                                this.adjustmentList.push({\n                                    employee:                   {\n                                        // address:                pa.employee.address,\n                                        // bank:                   pa.employee.bank,\n                                        // bankAccount:            pa.employee.bankAccount,\n                                        // country:                pa.employee.country,\n                                        // dob:                    pa.employee.dob,\n                                        // email:                  pa.employee.email,\n                                        employeeId:             pa.employee.employeeId,\n                                        // employeeType:           pa.employee.employeeType,\n                                        // firstName:              pa.employee.firstName,\n                                        // firstNameLocale:        pa.employee.firstNameLocale,\n                                        // gender:                 pa.employee.gender,\n                                        id:                     pa.employee.id,\n                                        // identityId:             pa.employee.identityId,\n                                        // identityType:           pa.employee.identityType,\n                                        // image:                  pa.employee.image,\n                                        // lastName:               pa.employee.lastName,\n                                        // lastNameLocale:         pa.employee.lastNameLocale,\n                                        // maritalStatus:          pa.employee.maritalStatus,\n                                        // nationality:            pa.employee.nationality,\n                                        // natureEmployee:         pa.employee.natureEmployee,\n                                        // noOfChildren:           pa.employee.noOfChildren,\n                                        // paymentMethod:          pa.employee.paymentMethod,\n                                        // paymentPeriod:          pa.employee.paymentPeriod,\n                                        // payrollLiabilitie:      pa.employee.payrollLiabilitie,\n                                        // phone:                  pa.employee.phone,\n                                        // salaryAcc:              pa.employee.salaryAcc,\n                                        // salaryAdvanceAcc:       pa.employee.salaryAdvanceAcc,\n                                        // spouseGender:           pa.employee.spouseGender,\n                                        // spouseName:             pa.employee.spouseName,\n                                        // spouseNatureEmployee:   pa.employee.spouseNatureEmployee,\n                                        // status:                 pa.employee.status,\n                                        // workingStatus:          pa.employee.workingStatus,\n                                        name:                   pa.employee.employeeId + ' - ' +  pa.employee.firstName +' '+ pa.employee.lastName,\n                                    },\n                                    payrollComponent:           i.component ? i.component: {},\n                                    currency:                   pa.currency || {},\n                                    amount:                     i.amount ? i.amount: 0,\n                                    // segment:                    i.segment ? i.segment: {}\n                                })\n                            }\n                        })\n                    }\n                }\n            },\n            saveAdjust(){\n                let ds = this.$refs.dataSourceAdjus.kendoWidget();\n                let ds1 = ds.data()\n                let dataSource = ds1.map(index=>{\n                    return {\n                        amount:             index.amount,\n                        employee:           index.employee,\n                        payrollComponent:   index.payrollComponent,\n                        currency:           index.currency\n                        // segment:            index.segment,\n                    }\n                })\n                let payrollList = this.loadPayrolls;\n                let helper = {};\n                let result = dataSource.reduce(function(index, value) {\n                    if(value.employee.id){\n                        let key = value.payrollComponent.compoType.name +'-'+value.employee.employeeId ;\n                        if(!helper[key]) {\n                            helper[key] = Object.assign({}, value); // create a copy of o\n                            index.push(helper[key]);\n                        } else {\n                            helper[key].amount += parseFloat(value.amount);\n                            helper[key].conponentType = value.payrollComponent.compoType.name;\n                        }\n                    }\n                    return index\n                }, []);\n                let payList = [];\n                for (const pa of payrollList){\n                    let benefit = 0\n                    let deduction = 0;\n                    let salaryAdd = 0;\n                    result.forEach(function(r){\n                        if(r.payrollComponent.name === \"Deduction\" && r.employee.id == pa.employeeUuid){\n                            deduction = parseFloat(r.amount);\n                        }else if(r.payrollComponent.name === \"Benefits\" && r.employee.id == pa.employeeUuid){\n                           benefit = parseFloat(r.amount)\n                        }else if(r.payrollComponent.compoType.id === \"gross_salary\" && r.employee.id == pa.employeeUuid){\n                            salaryAdd = parseFloat(r.amount)\n                        }\n                    })\n                    payList.push( new PayrollList({\n                        employeeUuid:               pa.employeeUuid,\n                        deduction:                  deduction ? deduction: 0,\n                        bank:                       pa.bank, \n                        bankAccount:                pa.bankAccount, \n                        currency:                   pa.currency ? pa.currency: {},\n                        totalBenefit:               benefit,\n                        employeeName:               pa.employeeName,\n                        employeeId:                 pa.employeeId,\n                        employee:                   pa.employee,\n                        natureEmployee:             pa.employee.natureEmployee,\n                        natureContract:             pa.natureContract,\n                        paymentMethod:              pa.paymentMethod,\n                        payrollLiabilitie:          pa.payrollLiabilitie,\n                        location:                   pa.location,\n                        overTimeHoliday:            pa.overTimeHoliday,\n                        overTimeWeekend:            pa.overTimeWeekend,\n                        overTimeNight:              pa.overTimeNight,\n                        paidHours:                  pa.paidHours,\n                        position:                   pa.position,\n                        segment:                    pa.segment,\n                        salary:                     parseFloat(pa.salary1) + salaryAdd,\n                        salary1:                    pa.salary1,\n                        salary2:                    parseFloat(pa.salary1) + salaryAdd,\n                        salaryType:                 pa.salaryType,\n                        startingTime:               pa.startingTime,\n                        workDay:                    pa.workDay,\n                        workTime:                   pa.workTime, \n                    }))\n                }\n                this.payList = payList\n                let payrolls = this.payrolls\n                new Promise(resolve => {\n                    setTimeout(() => {\n                    resolve('resolved');\n                        let data = {\n                            id:                   this.$route.params.id,\n                            monthOf:              payrolls.monthOf,\n                            date:                 payrolls.date,\n                            created:              payrolls.created,\n                            totalEmployee:        payrolls.totalEmployee,\n                            number:               payrolls.number,\n                            lastNumber:           payrolls.lastNumber,\n                            abbr:                 payrolls.abbr,\n                            referenceNumber:      payrolls.referenceNumber,\n                            payNumber:            payrolls.payNumber,\n                            type:                 payrolls.type,\n                            currency:             payrolls.currency,\n                            exchangeRate:         payrolls.exchangeRate,\n                            location:             payrolls.location,\n                            totalDeduction:       0,\n                            totalGross:           0,\n                            totalBenefits:        0,\n                            totalNetSalary:       0,\n                            totalTaxPaymentUS:    0,\n                            totaleTax:            0,\n                            adjustment:           dataSource,\n                            payrollList:          this.payList,\n                            payrollList1:         payrolls.payrollList1,\n                            payrollList2:         this.payList,\n                            step:                 3,\n                            department:           payrolls.department || '',\n                            natureContract:       payrolls.natureContract || '',\n                            employeeGroup:        payrolls.employeeGroup || '',\n                            loggedUser:           this.loggedUser\n                        };\n                        this.showLoading = true\n                        payrollHandler.createPayroll(data).then(response => {\n                            this.showLoading = true\n                            if (response.data.statusCode === 201) {\n                                this.showLoading = false\n                                this.$snotify.success('Success')\n                                this.loadSuccess(response.data.statusCode)\n                            }\n                        }).catch(e => {\n                            this.$snotify.error('Something went wrong')\n                            this.errors.push(e)\n                        })\n                    }, 300);\n                })\n            },\n            loadSuccess(data){\n                this.$emit('headline',data)\n            },\n            async goBack(){\n                window.history.go(-1)\n            },\n            loadRecord(params, dataItem){\n                 new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        this.showLoading = true\n                        employeeHandler.getRecord(params).then(res => {\n                            if(res.data.statusCode == 200){\n                                this.showLoading = false\n                                let result = res.data.data\n                                if(result.length > 0){\n                                    this.record = res.data.data[0].currency\n                                    dataItem.set('currency', this.record)\n                                }\n                            }\n                        })\n\n                    }, 300);\n                })\n            }\n        },\n        mounted: async function (){\n            await this.addRow()\n            await this.loadPayrollList()\n            await this.loadSegment()\n        },\n        watch: {\n            propAdjustment(){\n                if (this.propAdjustment !== undefined) {\n                    this.loadPayrollList()\n                }\n            }\n        },\n        computed:{\n    \n        }\n    }\n</script>\n<style scoped>\n    .grayBg{\n        background-color: #F8F8F9;\n    }\n    .my_table_darkv .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n        color: rgba(0, 0, 0, 0.6);\n        background: #222a35;\n        color: #fff !important;\n    }"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/compliance/monthly_tax/new_tax_return/confirm/tax_credit/VAT.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/compliance/monthly_tax/new_tax_return/confirm/tax_credit/VAT.vue","mtime":1640595536791},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkaW5nTWUgZnJvbSAiQC9jb21wb25lbnRzL0xvYWRpbmciOwppbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIjsKCmNvbnN0IHNhbGVIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2NvbXBsaWFuY2UvaGFuZGxlci9zYWxlSGFuZGxlciIpCmNvbnN0IHB1cmNoYXNlSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9jb21wbGlhbmNlL2hhbmRsZXIvcHVyY2hhc2VIYW5kbGVyIikKY29uc3QgbW9udGhseVJldHVybkhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvY29tcGxpYW5jZS9oYW5kbGVyL21vbnRobHlSZXR1cm5IYW5kbGVyIikKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgICAgaXNfbW9udGg6IGZhbHNlLAogICAgICAgIGlzX3N0YXJ0X2RhdGU6IGZhbHNlLAogICAgICAgIGlzX2VuZF9kYXRlOiBmYWxzZSwKICAgICAgICBzdGFydF9kYXRlOiAiIiwKICAgICAgICBlbmRfZGF0ZTogIiIsCgogICAgICAgIHNlYXJjaDogewogICAgICAgICAgICBzdGFydF9kYXRlOiAiIiwKICAgICAgICAgICAgZW5kX2RhdGU6ICIiCiAgICAgICAgfSwKICAgICAgICBiYWxhbmNlOiB7fSwKICAgICAgICBzYWxlczogW10sCiAgICAgICAgcHVyY2hhc2VzOiBbXSwKICAgICAgICBuZXdNb250aE9mOiAnJywKICAgICAgICB0b3RhbEFtb3VudFA6IDAsCiAgICAgICAgdG90YWxBbW91bnRTOiAwLAogICAgICAgIHRvdGFsQmFsYW5jZTogMCwKICAgICAgICB0QmFsYW5jZTogMCwKICAgICAgICB2YXRSZWZ1bmQ6IDAsCiAgICAgICAgc3RhdHVzU2FsZTogZmFsc2UsCiAgICAgICAgc3RhdHVzUHVyY2hhc2U6IGZhbHNlLAogICAgICAgIHZhdDoge30sCiAgICB9KSwKICAgIHByb3BzOiBbJ21vbnRobHlSZXR1cm4nLCAnYW1vdW50U2FsZScsICd0b3RhbEFtb3VudFB1cmNoYXNlJ10sCiAgICB3YXRjaDogewogICAgICAgICdhbW91bnRTYWxlcyc6ICdjYWxjdWxhdGUnLAogICAgICAgICd0b3RhbEFtb3VudFB1cmNoYXNlcyc6ICdjYWxjdWxhdGUnLAogICAgICAgICd0b3RhbEFtb3VudFAnOiAnY2FsY3VsYXRlJywKICAgICAgICAndG90YWxBbW91bnRTJzogJ2NhbGN1bGF0ZScsCiAgICAgICAgJ2JhbGFuY2VDcmVkaXQnOiAnY2FsY3VsYXRlJwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBvblVwZGF0ZUJhbGFuY2UoY3JlZGl0LCBwYXltZW50KSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldEJhbGFuY2VWQVQnLCB7Y3JlZGl0OiBjcmVkaXQsIHBheW1lbnQ6IHBheW1lbnR9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZEJhbGFuY2UoKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIGlmICh0aGlzLmJhbGFuY2UuYmFsYW5jZUNyZWRpdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9ubG9hZFNhbGUoKQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbmxvYWRQdXJjaGFzZSgpCiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxjdWxhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9LCA3MDApCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRCYWxhbmNlKCkgewogICAgICAgICAgICBjb25zdCBhZGRaZXJvID0gKG51bSwgcGxhY2VzKSA9PiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICcwJykKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLnZhdC5pZAogICAgICAgICAgICBjb25zdCBtb250aGx5ID0gbmV3IERhdGUodGhpcy5tb250aGx5UmV0dXJuLm1vbnRoT2YpLnNldE1vbnRoKG5ldyBEYXRlKHRoaXMubW9udGhseVJldHVybi5tb250aE9mKS5nZXRNb250aCgpKQogICAgICAgICAgICBjb25zdCBtb250aE9mID0gbmV3IERhdGUobW9udGhseSkuZ2V0RnVsbFllYXIoKSArICctJyArIGFkZFplcm8obmV3IERhdGUobW9udGhseSkuZ2V0TW9udGgoKSwgMikKICAgICAgICAgICAgdGhpcy5uZXdNb250aE9mID0gbW9udGhPZgogICAgICAgICAgICBtb250aGx5UmV0dXJuSGFuZGxlci5nZXRCYWxhbmNlVmF0KGlkLCBtb250aE9mLCAnbW9udGhseScpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2UgPSByZXMuZGF0YS5kYXRhWzBdCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsYW5jZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUNyZWRpdDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVBheW1lbnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25sb2FkVmF0KCkgewogICAgICAgICAgICBhd2FpdCBtb250aGx5UmV0dXJuSGFuZGxlci5nZXRWYXQoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnZhdCA9IHJlcy5kYXRhLmRhdGFbMF0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9ubG9hZFNhbGUoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzYWxlSGFuZGxlci5nZXRCeU1ySWQodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FsZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25DYWxjdWxhdGUoKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbmxvYWRQdXJjaGFzZSgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgIHB1cmNoYXNlSGFuZGxlci5nZXRCeU1ySWQodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVyY2hhc2VzID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uQ2FsY3VsYXRlKCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25DYWxjdWxhdGUoKSB7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBsZXQgYW1vdW50UCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudFMgPSAwCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHVyY2hhc2VzLmxlbmd0aCA+IDAgJiYgdGhpcy50b3RhbEFtb3VudFB1cmNoYXNlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJzEyMycpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wdXJjaGFzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnB1cmNoYXNlc1tpXS50eXBlUHJvZHVjdC5iYXNlQW1vdW50ICE9PSAiTmV0IikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudFAgKz0gdGhpcy5wdXJjaGFzZXNbaV0udG90YWxWQVQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsQW1vdW50UCA9IGFtb3VudFAKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGFtb3VudFApCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzUHVyY2hhc2UgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnRvdGFsQW1vdW50UCwgJ1AnKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zYWxlcy5sZW5ndGggPiAwICYmIHRoaXMuYW1vdW50U2FsZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJzk4NycpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zYWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50UyArPSB0aGlzLnNhbGVzW2ldLnRvdGFsVkFUCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbEFtb3VudFMgPSBhbW91bnRTCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzU2FsZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMudG90YWxBbW91bnRTLCAnUycpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgY2FsY3VsYXRlKCkgewogICAgICAgICAgICBhd2FpdCB0aGlzLmdldEJhbGFuY2UoKQogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMudG90YWxBbW91bnRTLCB0aGlzLnRvdGFsQW1vdW50UCwgJ3NhbGUsIHB1cmNoYXNlJykKICAgICAgICAgICAgICAgICAgICBsZXQgdEJhbGFuY2UgPSAwLCBjcmVkaXQgPSAwLCBwYXltZW50ID0gMAogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1c1NhbGUgJiYgdGhpcy5zdGF0dXNQdXJjaGFzZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsQmFsYW5jZSA9IGtlbmRvLnBhcnNlRmxvYXQodGhpcy50b3RhbEFtb3VudFApICsga2VuZG8ucGFyc2VGbG9hdCh0aGlzLmJhbGFuY2UuYmFsYW5jZUNyZWRpdCkgLSBrZW5kby5wYXJzZUZsb2F0KHRoaXMudG90YWxBbW91bnRTKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnRvdGFsQW1vdW50UHVyY2hhc2UsIHRoaXMuYW1vdW50U2FsZSwgJ2IxJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbEJhbGFuY2UgPSBrZW5kby5wYXJzZUZsb2F0KHRoaXMudG90YWxBbW91bnRQdXJjaGFzZSkgKyBrZW5kby5wYXJzZUZsb2F0KHRoaXMuYmFsYW5jZS5iYWxhbmNlQ3JlZGl0KSAtIGtlbmRvLnBhcnNlRmxvYXQodGhpcy5hbW91bnRTYWxlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRCYWxhbmNlID0gdGhpcy50b3RhbEJhbGFuY2UKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b3RhbEJhbGFuY2UgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRCYWxhbmNlID0gdGhpcy50b3RhbEJhbGFuY2UgKiAoLTEpCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnQgPSB0aGlzLnRvdGFsQmFsYW5jZSAqICgtMSkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbEJhbGFuY2UgPSBgKCR7dGhpcy5udW1iZXJGb3JtYXQodGhpcy50b3RhbEJhbGFuY2UgKiAoLTEpKX0pYAogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRpdCA9IHRoaXMudG90YWxCYWxhbmNlCiAgICAgICAgICAgICAgICAgICAgICAgIHRCYWxhbmNlID0gdGhpcy50b3RhbEJhbGFuY2UKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbEJhbGFuY2UgPSB0aGlzLm51bWJlckZvcm1hdCh0aGlzLnRvdGFsQmFsYW5jZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMudG90YWxCYWxhbmNlLCB0QmFsYW5jZSwgJ3RvdGFsIGJhbGFuY2UnKQogICAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYWRkVHhuKGNyZWRpdCwgcGF5bWVudCkKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uVXBkYXRlQmFsYW5jZShjcmVkaXQsIHBheW1lbnQpCiAgICAgICAgICAgICAgICB9LCA1MDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBhZGRUeG4oY3JlZGl0LCBwYXltZW50KSB7CiAgICAgICAgICAgIGlmIChjcmVkaXQgPj0gMCB8fCBwYXltZW50ID49IDApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgY3JlZGl0OiBjcmVkaXQsCiAgICAgICAgICAgICAgICAgICAgcGF5bWVudDogcGF5bWVudCwKICAgICAgICAgICAgICAgICAgICBtb250aE9mOiB0aGlzLm1vbnRobHlSZXR1cm4ubW9udGhPZiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmF0IG1vbnRobHknLAogICAgICAgICAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9KU09OKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF3YWl0IG1vbnRobHlSZXR1cm5IYW5kbGVyLmFkZFR4blZBVChkYXRhLCB0aGlzLm1vbnRobHlSZXR1cm4ubW9udGhPZiwgJ21vbnRobHknKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG51bWJlckZvcm1hdCh2YWx1ZSkgewogICAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy5zYWxlRm9ybUNvbnRlbnQuZGVjaW1hbCwnbmltb2wnKQogICAgICAgICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcodmFsdWUsIGBuMmApCiAgICAgICAgfSwKICAgICAgICBvblNlYXJjaCgpIHsKICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSB7CiAgICAgICAgICAgICAgICAnc3RhcnRfZGF0ZSc6IHRoaXMuc3RhcnRfZGF0ZSArICctMDEnLAogICAgICAgICAgICAgICAgJ2VuZF9kYXRlJzogdGhpcy5lbmRfZGF0ZSArICctMDEnCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy50b3RhbEFtb3VudFB1cmNoYXNlLCAndEFwJykKICAgICAgICBhd2FpdCB0aGlzLm9ubG9hZFZhdCgpCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQmFsYW5jZSgpCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBiYWxhbmNlQ3JlZGl0KCkgewogICAgICAgICAgICBpZiAodGhpcy5iYWxhbmNlLmJhbGFuY2VDcmVkaXQgPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlLmJhbGFuY2VDcmVkaXQKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG1vbnRoT2YoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLm1vbnRobHlSZXR1cm4uaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9udGhseVJldHVybi5tb250aE9mCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJycKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYW1vdW50U2FsZXMoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmFtb3VudFNhbGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuYW1vdW50U2FsZSwgJ1ZBVCBTYWxlJykKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFtb3VudFNhbGUKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRvdGFsQW1vdW50UHVyY2hhc2VzKCkgewogICAgICAgICAgICBpZiAodGhpcy5hbW91bnRQdXJjaGFzZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy5hbW91bnRQdXJjaGFzZSwgJ1ZBVCBwdXJjaGFzZScpCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbW91bnRQdXJjaGFzZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYW1vdW50UHVyY2hhc2VFeGN1bHMoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmFtb3VudFB1cmNoYXNlRXhjdWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW1vdW50UHVyY2hhc2VFeGN1bAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgJ0xvYWRpbmdNZSc6IExvYWRpbmdNZSwKICAgICAgICAvLyAnbW9udGgtcGlja2VyJyA6ICgpPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9Nb250aFBpY2tlcicpCiAgICB9LAp9Owo="},{"version":3,"sources":["VAT.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VAT.vue","sourceRoot":"src/views/compliance/monthly_tax/new_tax_return/confirm/tax_credit","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-2 px-6\">\n            <v-row class=\"\">\n                <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                    <v-row>\n                        <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                            <h2 class=\"mb-0 font_20\">{{ $t('value_added_tax') }}</h2>\n                        </v-col>\n                    </v-row>\n                </v-col>\n            </v-row>\n\n            <v-row class=\"\">\n                <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                    <v-simple-table>\n                        <template v-slot:default>\n                            <thead>\n                            <tr>\n                                <th class=\"text-bold text-uppercase\">{{ $t('description') }}</th>\n                                <th class=\"text-bold text-uppercase\">{{ $t('monthof') }}</th>\n                                <th class=\"text-bold text-uppercase\">{{ $t('code') }}</th>\n                                <th class=\"text-bold text-uppercase text-center\">{{ $t('amount') }}</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>{{ $t('tax_credit_carried_from_last_month') }}</td>\n                                <td class=\"\">{{ newMonthOf }}</td>\n                                <td class=\"\">{{ balance.code }}</td>\n                                <td class=\"text-center\">{{ numberFormat(balance.balanceCredit) }}</td>\n                            </tr>\n                            <tr>\n                                <td>{{ $t('total_amount_input_tax') }}</td>\n                                <td class=\"\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"text-center\">{{ totalAmountPurchase || numberFormat(totalAmountP) }}</td>\n                            </tr>\n                            <tr>\n                                <td>{{ $t('total_amount_output_tax') }}</td>\n                                <td class=\"\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"text-center\">{{ numberFormat(amountSale) || numberFormat(totalAmountS) }}\n                                </td>\n                            </tr>\n                            <tr v-if=\"tBalance <= 0\">\n                                <td class=\"text-bold\">VAT to be paid</td>\n                                <td class=\"text-bold\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"primary text-center white--text text-bold\">{{ totalBalance }}</td>\n                            </tr>\n                            <tr v-if=\"tBalance > 0\">\n                                <td class=\"text-bold\">(Credit Forward)</td>\n                                <td class=\"text-bold\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"primary text-center text-bold white--text\">{{ totalBalance }}</td>\n                            </tr>\n                            <tr>\n                                <td class=\"text-bold\">{{ $t('vat_refund') }}</td>\n                                <td class=\"text-bold\">{{ monthOf }}</td>\n                                <td class=\"\"></td>\n                                <td class=\"primary text-center white--text text-bold\">{{ numberFormat(vatRefund) }}</td>\n                            </tr>\n                            </tbody>\n                        </template>\n                    </v-simple-table>\n                    <LoadingMe\n                        :isLoading=\"showLoading\"\n                        :fullPage=\"false\"\n                        :myLoading=\"true\"\n                    />\n                </v-col>\n            </v-row>\n        </v-col>\n\n    </v-row>\n</template>\n<script>\nimport LoadingMe from \"@/components/Loading\";\nimport kendo from \"@progress/kendo-ui\";\n\nconst saleHandler = require(\"@/scripts/compliance/handler/saleHandler\")\nconst purchaseHandler = require(\"@/scripts/compliance/handler/purchaseHandler\")\nconst monthlyReturnHandler = require(\"@/scripts/compliance/handler/monthlyReturnHandler\")\nexport default {\n    data: () => ({\n        showLoading: false,\n        is_month: false,\n        is_start_date: false,\n        is_end_date: false,\n        start_date: \"\",\n        end_date: \"\",\n\n        search: {\n            start_date: \"\",\n            end_date: \"\"\n        },\n        balance: {},\n        sales: [],\n        purchases: [],\n        newMonthOf: '',\n        totalAmountP: 0,\n        totalAmountS: 0,\n        totalBalance: 0,\n        tBalance: 0,\n        vatRefund: 0,\n        statusSale: false,\n        statusPurchase: false,\n        vat: {},\n    }),\n    props: ['monthlyReturn', 'amountSale', 'totalAmountPurchase'],\n    watch: {\n        'amountSales': 'calculate',\n        'totalAmountPurchases': 'calculate',\n        'totalAmountP': 'calculate',\n        'totalAmountS': 'calculate',\n        'balanceCredit': 'calculate'\n    },\n    methods: {\n        async onUpdateBalance(credit, payment) {\n            this.$emit('getBalanceVAT', {credit: credit, payment: payment})\n        },\n        async loadBalance() {\n            this.showLoading = true\n            if (this.balance.balanceCredit === undefined) {\n                await this.onloadSale()\n                await this.onloadPurchase()\n                new Promise(resolve => {\n                    setTimeout(async () => {\n                        resolve('resolved');\n                        await this.calculate()\n                        this.showLoading = false\n                    }, 700)\n                })\n            }\n        },\n        async getBalance() {\n            const addZero = (num, places) => String(num).padStart(places, '0')\n            const id = this.vat.id\n            const monthly = new Date(this.monthlyReturn.monthOf).setMonth(new Date(this.monthlyReturn.monthOf).getMonth())\n            const monthOf = new Date(monthly).getFullYear() + '-' + addZero(new Date(monthly).getMonth(), 2)\n            this.newMonthOf = monthOf\n            monthlyReturnHandler.getBalanceVat(id, monthOf, 'monthly').then(res => {\n                if (res.data.data.length > 0) {\n                    this.balance = res.data.data[0]\n                } else {\n                    this.balance = {\n                        balanceCredit: 0,\n                        balancePayment: 0,\n                    }\n                }\n            })\n        },\n        async onloadVat() {\n            await monthlyReturnHandler.getVat().then(res => {\n                this.vat = res.data.data[0]\n            })\n        },\n        async onloadSale() {\n            new Promise(resolve => {\n                setTimeout(async () => {\n                    resolve('resolved');\n                    await saleHandler.getByMrId(this.$route.params.id).then(async res => {\n                        this.sales = res.data.data\n                        await this.onCalculate()\n                    })\n                }, 100)\n            })\n        },\n        async onloadPurchase() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    purchaseHandler.getByMrId(this.$route.params.id).then(async res => {\n                        this.purchases = res.data.data\n                        await this.onCalculate()\n                    })\n                }, 100)\n            })\n        },\n        async onCalculate() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    let amountP = 0,\n                        amountS = 0\n                    if (this.purchases.length > 0 && this.totalAmountPurchases === 0) {\n                        window.console.log('123')\n                        for (let i = 0; i < this.purchases.length; i++) {\n                            if (this.purchases[i].typeProduct.baseAmount !== \"Net\") {\n                                amountP += this.purchases[i].totalVAT\n                            }\n                        }\n                        this.totalAmountP = amountP\n                        window.console.log(amountP)\n                        this.statusPurchase = true\n                        window.console.log(this.totalAmountP, 'P')\n                    }\n                    if (this.sales.length > 0 && this.amountSale === 0) {\n                        window.console.log('987')\n                        for (let i = 0; i < this.sales.length; i++) {\n                            amountS += this.sales[i].totalVAT\n                        }\n                        this.totalAmountS = amountS\n                        this.statusSale = true\n                        window.console.log(this.totalAmountS, 'S')\n                    }\n                }, 100)\n            })\n        },\n        async calculate() {\n            await this.getBalance()\n            new Promise(resolve => {\n                setTimeout(async () => {\n                    resolve('resolved');\n                    window.console.log(this.totalAmountS, this.totalAmountP, 'sale, purchase')\n                    let tBalance = 0, credit = 0, payment = 0\n                    if (this.statusSale && this.statusPurchase) {\n                        this.totalBalance = kendo.parseFloat(this.totalAmountP) + kendo.parseFloat(this.balance.balanceCredit) - kendo.parseFloat(this.totalAmountS)\n                    } else {\n                        window.console.log(this.totalAmountPurchase, this.amountSale, 'b1')\n                        this.totalBalance = kendo.parseFloat(this.totalAmountPurchase) + kendo.parseFloat(this.balance.balanceCredit) - kendo.parseFloat(this.amountSale)\n                    }\n                    this.tBalance = this.totalBalance\n                    if (this.totalBalance < 0) {\n                        tBalance = this.totalBalance * (-1)\n                        payment = this.totalBalance * (-1)\n                        this.totalBalance = `(${this.numberFormat(this.totalBalance * (-1))})`\n                    } else {\n                        credit = this.totalBalance\n                        tBalance = this.totalBalance\n                        this.totalBalance = this.numberFormat(this.totalBalance)\n                    }\n                    window.console.log(this.totalBalance, tBalance, 'total balance')\n                    // await this.addTxn(credit, payment)\n                    await this.onUpdateBalance(credit, payment)\n                }, 500)\n            })\n        },\n        async addTxn(credit, payment) {\n            if (credit >= 0 || payment >= 0) {\n                const data = {\n                    credit: credit,\n                    payment: payment,\n                    monthOf: this.monthlyReturn.monthOf,\n                    type: 'vat monthly',\n                    date: new Date().toJSON()\n                }\n                await monthlyReturnHandler.addTxnVAT(data, this.monthlyReturn.monthOf, 'monthly').then(res => {\n                    window.console.log(res)\n                })\n            }\n        },\n        numberFormat(value) {\n            // window.console.log(this.saleFormContent.decimal,'nimol')\n            return kendo.toString(value, `n2`)\n        },\n        onSearch() {\n            this.search = {\n                'start_date': this.start_date + '-01',\n                'end_date': this.end_date + '-01'\n            }\n        }\n    },\n    async mounted() {\n        window.console.log(this.totalAmountPurchase, 'tAp')\n        await this.onloadVat()\n        await this.loadBalance()\n    },\n    computed: {\n        balanceCredit() {\n            if (this.balance.balanceCredit > 0) {\n                return this.balance.balanceCredit\n            } else {\n                return 0\n            }\n        },\n        monthOf() {\n            if (this.monthlyReturn.id !== undefined) {\n                return this.monthlyReturn.monthOf\n            } else {\n                return ''\n            }\n        },\n        amountSales() {\n            if (this.amountSale !== undefined) {\n                window.console.log(this.amountSale, 'VAT Sale')\n                return this.amountSale\n            } else {\n                return 0\n            }\n        },\n        totalAmountPurchases() {\n            if (this.amountPurchase !== undefined) {\n                window.console.log(this.amountPurchase, 'VAT purchase')\n                return this.amountPurchase\n            } else {\n                return 0\n            }\n        },\n        amountPurchaseExculs() {\n            if (this.amountPurchaseExcul !== undefined) {\n                return this.amountPurchaseExcul\n            } else {\n                return 0\n            }\n        }\n    },\n    components: {\n        'LoadingMe': LoadingMe,\n        // 'month-picker' : ()=> import('@/components/custom_templates/MonthPicker')\n    },\n};\n</script>\n<style scoped>\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: transparent !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr:last-child > th {\n    font-size: 14px;\n    border-bottom: thin solid rgba(0, 0, 0, 0.12);\n    height: 37px !important;\n    color: #000;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr.primary:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n    background-color: #92d050 !important;\n}\n\n.theme--light.v-data-table {\n    background-color: transparent !important;\n    border-top: thin solid #ddd;\n    border-bottom: thin solid #ddd;\n    border-radius: 0 !important;\n}\n\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > td:not(.v-data-table__mobile-row),\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:not(:last-child) > th:not(.v-data-table__mobile-row) {\n    border-bottom: thin solid #ddd;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n    height: 32px !important;\n    border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.border_top {\n    border-top: thin solid #fff !important;\n}\n\n.v-application .primary,\n.v-application .third {\n    border-color: #fff !important;\n}\n\n.vat {\n    text-transform: uppercase;\n    color: #fff;\n    font-weight: bold;\n    font-family: 'Niradei-Bold' !important;\n}\n\n.amount {\n    text-align: right !important;\n}\n\n.head-summary {\n    text-align: right !important;\n}\n</style>\n"]}]}
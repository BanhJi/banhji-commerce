{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/production/production_orders/ProductionOrderView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/production/production_orders/ProductionOrderView.vue","mtime":1638499443285},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXRlUGlja2VyQ29tcG9uZW50IGZyb20gJ0AvY29tcG9uZW50cy9jdXN0b21fdGVtcGxhdGVzL0RhdGVQaWNrZXJDb21wb25lbnQnCmltcG9ydCBQcm9kdWN0aW9uIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9Qcm9kdWN0aW9uIjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBQcm9kdWN0aW9uT3JkZXIgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1Byb2R1Y3Rpb25PcmRlciI7CmltcG9ydCBDb21wb25lbnRVc2VkTW9kZWwgZnJvbSAiQC9zY3JpcHRzL3N0YXJ0X3Byb2R1Y3Rpb24vbW9kZWwvQ29tcG9uZW50VXNlZCI7Cgpjb25zdCBwcm9kdWN0aW9uT3JkZXJIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2R1Y3Rpb25PcmRlckhhbmRsZXIiKQpjb25zdCBwcm9kdWN0aW9uSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcm9kdWN0aW9uSGFuZGxlciIpCmNvbnN0IGFjY291bnRIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2hhbmRsZXIvYWNjb3VudGluZy9hY2NvdW50IikKY29uc3QgcHJlZml4SGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcmVmaXhIYW5kbGVyIikKY29uc3QgYmlsbGluZ0hhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvaW52b2ljZS9oYW5kbGVyL2JpbGxpbmdIYW5kbGVyIikKY29uc3QgcHJvZHVjdGlvbiA9IG5ldyBQcm9kdWN0aW9uKHt9KQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcm9kdWN0aW9uT3JkZXJWaWV3IiwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKSwKICAgICdhcHAtZGF0ZXBpY2tlcic6IERhdGVQaWNrZXJDb21wb25lbnQsCiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgaXNFZGl0OiBmYWxzZSwKICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgIGFsZXJ0OiBmYWxzZSwKICAgIHZhbGlkOiB0cnVlLAogICAgaXNIaWRlQmFyOiBmYWxzZSwKICAgIHByb2R1Y3Rpb246IHByb2R1Y3Rpb24sCiAgICBwcm9kdWN0aW9uT3JkZXI6IG5ldyBQcm9kdWN0aW9uT3JkZXIoe30pLAogICAgb3RoZXJGaW5pc2hQcm9kdWN0czogW10sCiAgICBjb21wb25lbnRVc2VkczogW10sCiAgICBvdGhlckNvc3RzOiBbXSwKICAgIHRyYW5zYWN0aW9uVHlwZXM6IFtdLAogICAgZGlhbG9nTTogZmFsc2UsCiAgICB1b206ICcnLAogICAgYWNjV1BJczogW10sCiAgICBhY2NXUEk6IHt9LAogICAgZGVjaW1hbEZvcm1hdDogJ24yJywKICAgIGpSYXc6IFtdLAogICAgbG9nZ2VkVXNlcjogewogICAgICBpZDogJ2NmM2QxMGFiLWJjZTYtNDdiMy04NDA1LWI0NDhjMjNkYWQ4NCcsCiAgICAgIG5hbWU6ICdNci4gSW5zcGVjdG9yJwogICAgfSwKICAgIGRyOiAwLAogICAgY3I6IDAsCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIGJvbVJlZmVyZW5jZU5vKCkgewogICAgICBpZiAodGhpcy5wcm9kdWN0aW9uT3JkZXIpIHsKICAgICAgICBjb25zdCBib20gPSB0aGlzLnByb2R1Y3Rpb25PcmRlci5ib20gfHwge30KICAgICAgICBpZiAoYm9tKSB7CiAgICAgICAgICByZXR1cm4gYm9tLnJlZmVyZW5jZU5vIHx8ICcnCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAnJwogICAgfSwKICAgIGRpc2FibGVkTWUoKSB7CiAgICAgIGlmICh0aGlzLnByb2R1Y3Rpb25PcmRlcikgewogICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3Rpb25PcmRlci5zdGF0dXMgPT09IDI7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlCiAgICB9LAogICAgaWQoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgIT09ICcnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnJwogICAgICB9CiAgICB9LAogICAgd2FyZWhvdXNlKCkgewogICAgICBpZiAodGhpcy5wcm9kdWN0aW9uT3JkZXIpIHsKICAgICAgICBpZiAodGhpcy5wcm9kdWN0aW9uT3JkZXIuaGFzT3duUHJvcGVydHkoJ3dhcmVob3VzZScpKSB7CiAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0aW9uT3JkZXIud2FyZWhvdXNlLmhhc093blByb3BlcnR5KCdpZCcpKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3Rpb25PcmRlci53YXJlaG91c2UubmFtZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gJycKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICByYXdKb3VybmFsKCkgewogICAgICB0cnkgewogICAgICAgIGxldCBuYXR1cmUgPSAnJwogICAgICAgIHRoaXMualJhdyA9IFtdCiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucHJvZHVjdGlvbk9yZGVyLmNvbXBvbmVudFVzZWQgfHwgW10KICAgICAgICBjb25zdCByb3dzID0gZGF0YS5maWx0ZXIobSA9PiBwYXJzZUZsb2F0KG0uYW1vdW50KSA+IDApCiAgICAgICAgY29uc3QgYm9tID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIuYm9tCiAgICAgICAgY29uc3QgY3VycmVuY3kgPSBib20uY3VycmVuY3kgfHwge30KICAgICAgICBjb25zdCB4UmF0ZSA9IGJvbS5leGNoYW5nZVJhdGUgfHwge30KICAgICAgICBjb25zdCB0eG5SYXRlID0geFJhdGUucmF0ZSB8fCAxCiAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIudHhuUmF0ZSA9IHR4blJhdGUKICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5leGNoYW5nZVJhdGUgPSB4UmF0ZQogICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLmN1cnJlbmN5ID0gY3VycmVuY3kKICAgICAgICByb3dzLmZvckVhY2godmFsdWUgPT4gewogICAgICAgICAgY29uc3QgYW10ID0ga2VuZG8ucGFyc2VGbG9hdCh2YWx1ZS5hbW91bnQpICogLTEKICAgICAgICAgIGNvbnN0IGl0ZW1YQW1vdW50ID0gYW10ICoga2VuZG8ucGFyc2VGbG9hdCh0eG5SYXRlKQogICAgICAgICAgY29uc3QgaXRlbSA9IHZhbHVlLml0ZW0KICAgICAgICAgIGlmICgoYW10ID4gMCkpIHsKICAgICAgICAgICAgbmF0dXJlID0gJ2RyJwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmF0dXJlID0gJ2NyJwogICAgICAgICAgfQogICAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ1NlcnZpY2UnKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2Nvc3RPZkdvb2RzU29sZEFjYycpKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jb3N0T2ZHb29kc1NvbGRBY2MuaGFzT3duUHJvcGVydHkoJ2lkJykpIHsKICAgICAgICAgICAgICAgICAgbGV0IGNvc3RPZkdvb2RzU29sZEFjYyA9IGl0ZW0uY29zdE9mR29vZHNTb2xkQWNjCiAgICAgICAgICAgICAgICAgIHRoaXMualJhdy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogY29zdE9mR29vZHNTb2xkQWNjLmlkICsgJy0nICsgbmF0dXJlLAogICAgICAgICAgICAgICAgICAgIGxpbmU6IG5ldyBDb21wb25lbnRVc2VkTW9kZWwodmFsdWUpLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnByb2R1Y3Rpb25PcmRlci50cmFuc2FjdGlvbk5vdGUsCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogaXRlbS5jb3N0T2ZHb29kc1NvbGRBY2MsCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBpdGVtLmNvc3RPZkdvb2RzU29sZEFjYy5pZCwKICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFtdCwgLy8gcXR5KmF2Z19jb3N0ICwKICAgICAgICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogaXRlbVhBbW91bnQsLy94QW1vdW50LAogICAgICAgICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICAgICAgICB0eXBlQXM6ICdpdGVtJwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2RlZmVycmVkSW5jb21lQWNjJykpIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmRlZmVycmVkSW5jb21lQWNjLmhhc093blByb3BlcnR5KCdpZCcpKSB7CiAgICAgICAgICAgICAgICAgIGxldCBkZWZlcnJlZEluQWNjID0gaXRlbS5kZWZlcnJlZEluY29tZUFjYwogICAgICAgICAgICAgICAgICB0aGlzLmpSYXcucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGRlZmVycmVkSW5BY2MuaWQgKyAnLScgKyBuYXR1cmUsCiAgICAgICAgICAgICAgICAgICAgbGluZTogbmV3IENvbXBvbmVudFVzZWRNb2RlbCh2YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMucHJvZHVjdGlvbk9yZGVyLnRyYW5zYWN0aW9uTm90ZSwKICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBkZWZlcnJlZEluQWNjLAogICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGVmZXJyZWRJbkFjYy5pZCwKICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFtdCwgLy8gcXR5KmF2Z19jb3N0ICwKICAgICAgICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogaXRlbVhBbW91bnQsLy8sCiAgICAgICAgICAgICAgICAgICAgdHlwZTogbmF0dXJlLAogICAgICAgICAgICAgICAgICAgIHR5cGVBczogJ2l0ZW0nCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ1ZhcmlhbnQnKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2ludmVudG9yeUFjYycpKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pbnZlbnRvcnlBY2MuaGFzT3duUHJvcGVydHkoJ2lkJykpIHsKICAgICAgICAgICAgICAgICAgbGV0IGludmVudG9yeUFjYyA9IGl0ZW0uaW52ZW50b3J5QWNjCiAgICAgICAgICAgICAgICAgIHRoaXMualJhdy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogaW52ZW50b3J5QWNjLmlkICsgJy0nICsgbmF0dXJlLAogICAgICAgICAgICAgICAgICAgIGxpbmU6IG5ldyBDb21wb25lbnRVc2VkTW9kZWwodmFsdWUpLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnByb2R1Y3Rpb25PcmRlci50cmFuc2FjdGlvbk5vdGUsCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogaXRlbS5pbnZlbnRvcnlBY2MsCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBpdGVtLmludmVudG9yeUFjYy5pZCwKICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFtdCwgLy8gcXR5KmF2Z19jb3N0ICwKICAgICAgICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogaXRlbVhBbW91bnQsLy94QW1vdW50LAogICAgICAgICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICAgICAgICB0eXBlQXM6ICdpdGVtJwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdGaXhlZCBBc3NldCcpIHsKICAgICAgICAgICAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgnYXNzZXRBY2MnKSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uYXNzZXRBY2MuaGFzT3duUHJvcGVydHkoJ2lkJykpIHsKICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0QWNjID0gaXRlbS5hc3NldEFjYwogICAgICAgICAgICAgICAgICB0aGlzLmpSYXcucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGFzc2V0QWNjLmlkICsgJy0nICsgbmF0dXJlLAogICAgICAgICAgICAgICAgICAgIGxpbmU6IG5ldyBDb21wb25lbnRVc2VkTW9kZWwodmFsdWUpLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnByb2R1Y3Rpb25PcmRlci50cmFuc2FjdGlvbk5vdGUsCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogaXRlbS5hc3NldEFjYywKICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGl0ZW0uYXNzZXRBY2MuaWQsCiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBhbXQsIC8vIHF0eSphdmdfY29zdCAsCiAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VBbW91bnQ6IGl0ZW1YQW1vdW50LC8veEFtb3VudCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiBuYXR1cmUsCiAgICAgICAgICAgICAgICAgICAgdHlwZUFzOiAnaXRlbScKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ1RyYW5zYWN0aW9uIEl0ZW0nKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2FjY291bnQnKSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uYWNjb3VudC5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAgICAgICAgICAgICB0aGlzLmpSYXcucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uYWNjb3VudC5pZCArICctJyArIG5hdHVyZSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiBuZXcgQ29tcG9uZW50VXNlZE1vZGVsKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5wcm9kdWN0aW9uT3JkZXIudHJhbnNhY3Rpb25Ob3RlLAogICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IGl0ZW0uYWNjb3VudCwKICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGl0ZW0uYWNjb3VudC5pZCwKICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFtdCwgLy8gcXR5KmF2Z19jb3N0ICwKICAgICAgICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogaXRlbVhBbW91bnQsLy94QW1vdW50LAogICAgICAgICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICAgICAgICB0eXBlQXM6ICdpdGVtJwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLy8gdG9kbzogV29ya2luZyBQcm9ncmVzcyBBY2MKICAgICAgICAvLyB0b2RvOiByYXcgSm91cm5hbAogICAgICAgIGlmICh0aGlzLnByb2R1Y3Rpb25PcmRlci5hbW91bnQgPiAwKSB7CiAgICAgICAgICBuYXR1cmUgPSAnZHInCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5hdHVyZSA9ICdjcicKICAgICAgICB9CiAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMuYWNjV1BJLCAnYWNjV1BJJykKICAgICAgICBpZiAodGhpcy5hY2NXUEkpIHsKICAgICAgICAgIGlmICh0aGlzLmFjY1dQSS5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAgICAgICB0aGlzLmpSYXcucHVzaCh7CiAgICAgICAgICAgICAgaWQ6IHRoaXMuYWNjV1BJLmlkICsgJy0nICsgbmF0dXJlLAogICAgICAgICAgICAgIGxpbmU6IG5ldyBDb21wb25lbnRVc2VkTW9kZWwoe30pLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnByb2R1Y3Rpb25PcmRlci50cmFuc2FjdGlvbk5vdGUsCiAgICAgICAgICAgICAgYWNjb3VudDogdGhpcy5hY2NXUEksCiAgICAgICAgICAgICAgYWNjb3VudElkOiB0aGlzLmFjY1dQSS5pZCwKICAgICAgICAgICAgICBleGNoYW5nZUFtb3VudDogdGhpcy5wcm9kdWN0aW9uT3JkZXIuYW1vdW50LAogICAgICAgICAgICAgIGFtb3VudDogdGhpcy5wcm9kdWN0aW9uT3JkZXIuYW1vdW50LAogICAgICAgICAgICAgIHR5cGU6IG5hdHVyZSwKICAgICAgICAgICAgICB0eXBlQXM6ICd3cGEnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuc2hyaW5rRGF0YSh0aGlzLmpSYXcpCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZSwgJ2Vycm9yJykKICAgICAgfQogICAgfSwKICAgIHNocmlua0RhdGEob2JqKSB7CiAgICAgIGNvbnN0IHVuaXF1ZXMgPSB0aGlzLnJlbW92ZUR1cGxpY2F0ZShvYmopCiAgICAgIHVuaXF1ZXMuZm9yRWFjaChuID0+IHsKICAgICAgICBjb25zdCBmb3VuZCA9IG9iai5maWx0ZXIobSA9PiBtLmlkID09PSBuLmlkKQogICAgICAgIGxldCBhbW91bnQgPSAwLCBleGNoYW5nZUFtb3VudCA9IDAKICAgICAgICBmb3VuZC5mb3JFYWNoKHogPT4gewogICAgICAgICAgYW1vdW50ICs9IHBhcnNlRmxvYXQoei5hbW91bnQgfHwgMCkKICAgICAgICAgIGV4Y2hhbmdlQW1vdW50ICs9IHBhcnNlRmxvYXQoei5leGNoYW5nZUFtb3VudCB8fCAwKQogICAgICAgIH0pCiAgICAgICAgbi5hbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudCkgLy90aGlzLm51bWJlckZvcm1hdChhbW91bnQpCiAgICAgICAgbi5leGNoYW5nZUFtb3VudCA9IHBhcnNlRmxvYXQoZXhjaGFuZ2VBbW91bnQpCiAgICAgIH0pCiAgICAgIHRoaXMualJhdyA9IHVuaXF1ZXMKICAgICAgbGV0IGRyID0gMCwgY3IgPSAwCiAgICAgIHRoaXMualJhdy5mb3JFYWNoKGogPT4gewogICAgICAgIHN3aXRjaCAoai50eXBlKSB7CiAgICAgICAgICBjYXNlICdjcic6CiAgICAgICAgICAgIGNyICs9IHBhcnNlRmxvYXQoai5hbW91bnQpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlICdkcic6CiAgICAgICAgICAgIGRyICs9IHBhcnNlRmxvYXQoai5hbW91bnQpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5kciA9IGRyCiAgICAgIHRoaXMuY3IgPSBjcgogICAgICB3aW5kb3cuY29uc29sZS5sb2coJ2RyPScsIGRyLCAnY3I9JywgY3IsICdkcitjciA9ICcsIGRyICsgY3IpCiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh1bmlxdWVzKSwgJ3VuaXF1ZXMnKQoKICAgIH0sCiAgICByZW1vdmVEdXBsaWNhdGUoYXJyYXkpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTsKICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7CiAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0uaWQpKSB7CiAgICAgICAgICBtYXAuc2V0KGl0ZW0uaWQsIHRydWUpOyAgICAvLyBzZXQgYW55IHZhbHVlIHRvIE1hcAogICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSkKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdAogICAgfSwKICAgIGFzeW5jIG9uU3RhcnRQcm9kdWN0aW9uKCkgewogICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlTnVtYmVyKCkKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuc3RhcnRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkKICAgICAgdGhpcy5kaWFsb2dNID0gdHJ1ZQogICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgIH0sCiAgICB0YXhUZW1wbGF0ZShkYXRhSXRlbSkgewogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ3ZhdCcsIGRhdGFJdGVtLnRheCkKICAgICAgY29uc3QgdmF0ID0gZGF0YUl0ZW0udGF4CiAgICAgIGlmICh2YXQpIHsKICAgICAgICByZXR1cm4gYDxzcGFuPiR7dmF0LmRlZmF1bHRUYXggPyB2YXQuZGVmYXVsdFRheCA6IGBgfTwvc3Bhbj5gCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGBgCiAgICAgIH0KICAgIH0sCiAgICBUYXhEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8ualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykKICAgICAgICAgIC5hcHBlbmRUbyhjb250YWluZXIpCiAgICAgICAgICAua2VuZG9Ecm9wRG93bkxpc3QoewogICAgICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICAgICAgYXV0b1dpZHRoOiB0cnVlLAogICAgICAgICAgICBoZWlnaHQ6IDQwMCwKICAgICAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgICAgIGRhdGFUZXh0RmllbGQ6ICJkZWZhdWx0VGF4IiwKICAgICAgICAgICAgZGF0YVZhbHVlRmllbGQ6ICJpZCIsCiAgICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgICAgICBvcHRpb25MYWJlbDogIi0tU2VsZWN0LS0iLAogICAgICAgICAgICBkYXRhU291cmNlOiBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHsKICAgICAgICAgICAgICBkYXRhOiB0aGlzLnZhdFRheAogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgIH0sCiAgICByb051bWJlck9DKGRhdGFJdGVtKSB7CiAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMub3RoZXJDb3N0RFMua2VuZG9XaWRnZXQoKSwKICAgICAgICAgIGluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CiAgICAgIHJldHVybiBpbmRleCArIDE7CiAgICB9LAogICAgcm93TnVtYmVyT1AoZGF0YUl0ZW0pIHsKICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5vdGhlclByb2R1Y3REUy5rZW5kb1dpZGdldCgpLAogICAgICAgICAgaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgIH0sCiAgICBpdGVtVGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgY29uc3QgaXRlbSA9IGRhdGFJdGVtLml0ZW0KICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICByZXR1cm4gYDxzcGFuPiR7aXRlbS5uYW1lID8gaXRlbS5uYW1lIDogYGB9PC9zcGFuPmAKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGAKICAgICAgfQogICAgfSwKICAgIFVPTVRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIGNvbnN0IHVvbSA9IGRhdGFJdGVtLmJ1b20KICAgICAgaWYgKHVvbSkgewogICAgICAgIHJldHVybiBgPHNwYW4+JHt1b20ubmFtZSA/IHVvbS5uYW1lIDogYGB9PC9zcGFuPmAKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGAKICAgICAgfQogICAgfSwKICAgIFVPTVRlbXBsYXRlT1AoZGF0YUl0ZW0pIHsKICAgICAgY29uc3QgdW9tID0gZGF0YUl0ZW0udW9tCiAgICAgIGlmICh1b20pIHsKICAgICAgICByZXR1cm4gYDxzcGFuPiR7dW9tLnVvbSA/IHVvbS5uYW1lIDogYGB9PC9zcGFuPmAKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGAKICAgICAgfQogICAgfSwKICAgIFVPTVRlbXBsYXRlQ1UoZGF0YUl0ZW0pIHsKICAgICAgY29uc3QgdW9tID0gZGF0YUl0ZW0udW9tCiAgICAgIGlmICh1b20pIHsKICAgICAgICByZXR1cm4gYDxzcGFuPiR7dW9tLnVvbSA/IHVvbS5uYW1lIDogYGB9PC9zcGFuPmAKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGAKICAgICAgfQogICAgfSwKICAgIHJvd051bWJlckNVKGRhdGFJdGVtKSB7CiAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuY29tcG9uZW50VXNlZERTLmtlbmRvV2lkZ2V0KCksCiAgICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgfSwKICAgIGFzeW5jIGxvYWRBY2NvdW50KCkgewogICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJyk7CiAgICAgICAgICBhY2NvdW50SGFuZGxlci5nZXRBbGwoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB0aGlzLmFjY1dQSXMgPSByZXMuZmlsdGVyKG0gPT4gbS5hY2NvdW50X3R5cGUubmFtZSA9PT0gJ0ludmVudG9yeScpLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgaWQ6IGl0ZW0udXVpZCwKICAgICAgICAgICAgICAgIHV1aWQ6IGl0ZW0udXVpZCwKICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgIGxvY2FsX25hbWU6IGl0ZW0ubG9jYWxfbmFtZSwKICAgICAgICAgICAgICAgIG51bWJlcjogaXRlbS5udW1iZXIsCiAgICAgICAgICAgICAgICBpc190YXhhYmxlOiBpdGVtLmlzX3RheGFibGUsCiAgICAgICAgICAgICAgICBiYW5oamlBY2NDb2RlOiBpdGVtLmJhbmhqaUFjY0NvZGUsCiAgICAgICAgICAgICAgICBncm91cF9jb2RlOiBpdGVtLmdyb3VwX2NvZGUsCiAgICAgICAgICAgICAgICBwYXJlbnRfYWNjb3VudDogaXRlbS5wYXJlbnRfYWNjb3VudCwKICAgICAgICAgICAgICAgIHR5cGVfY29kZTogaXRlbS50eXBlX2NvZGUsCiAgICAgICAgICAgICAgICBhY2NvdW50X3R5cGU6IGl0ZW0uYWNjb3VudF90eXBlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICBpZiAodGhpcy5hY2NXUElzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB0aGlzLmFjY1dQSSA9IHRoaXMuYWNjV1BJc1swXQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0sIDEwKTsKICAgICAgfSkKICAgIH0sCiAgICBhc3luYyBpbml0RGF0YSgpIHsKICAgICAgY29uc3QgcG8gPSB0aGlzLiRyb3V0ZS5wYXJhbXMucHJvZHVjdGlvbk9yZGVyCiAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgIGlmIChpZCAhPT0gJycgJiYgcG8gPT09IHVuZGVmaW5lZCkgewogICAgICAgIGF3YWl0IHByb2R1Y3Rpb25PcmRlckhhbmRsZXIuZ2V0QnlJZChpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIgPSByZXMKICAgICAgICAgIHRoaXMub3RoZXJGaW5pc2hQcm9kdWN0cyA9IHRoaXMucHJvZHVjdGlvbk9yZGVyID8gdGhpcy5wcm9kdWN0aW9uT3JkZXIub3RoZXJGaW5pc2hQcm9kdWN0IDogW10KICAgICAgICAgIHRoaXMuY29tcG9uZW50VXNlZHMgPSB0aGlzLnByb2R1Y3Rpb25PcmRlciA/IHRoaXMucHJvZHVjdGlvbk9yZGVyLmNvbXBvbmVudFVzZWQgOiBbXQogICAgICAgICAgdGhpcy5vdGhlckNvc3RzID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIgPyB0aGlzLnByb2R1Y3Rpb25PcmRlci5vdGhlckNvc3QgOiBbXQogICAgICAgICAgaWYgKHRoaXMucHJvZHVjdGlvbk9yZGVyLnlpZWxkVU9NKSB7CiAgICAgICAgICAgIHRoaXMudW9tID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIueWllbGRVT00ubmFtZSB8fCAnJwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMsIHRoaXMub3RoZXJDb3N0cywgdGhpcy5vdGhlckZpbmlzaFByb2R1Y3RzLCB0aGlzLmNvbXBvbmVudFVzZWRzLCAnbG9hZCBwbycpCiAgICAgICAgfSkKICAgICAgfSBlbHNlIGlmIChwbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIgPSBwbwogICAgICAgIHRoaXMub3RoZXJGaW5pc2hQcm9kdWN0cyA9IHRoaXMucHJvZHVjdGlvbk9yZGVyID8gdGhpcy5wcm9kdWN0aW9uT3JkZXIub3RoZXJGaW5pc2hQcm9kdWN0IDogW10KICAgICAgICB0aGlzLmNvbXBvbmVudFVzZWRzID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIgPyB0aGlzLnByb2R1Y3Rpb25PcmRlci5jb21wb25lbnRVc2VkIDogW10KICAgICAgICB0aGlzLm90aGVyQ29zdHMgPSB0aGlzLnByb2R1Y3Rpb25PcmRlciA/IHRoaXMucHJvZHVjdGlvbk9yZGVyLm90aGVyQ29zdCA6IFtdCiAgICAgICAgaWYgKHRoaXMucHJvZHVjdGlvbk9yZGVyLnlpZWxkVU9NKSB7CiAgICAgICAgICB0aGlzLnVvbSA9IHRoaXMucHJvZHVjdGlvbk9yZGVyLnlpZWxkVU9NLm5hbWUgfHwgJycKICAgICAgICB9CiAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMucHJvZHVjdGlvbk9yZGVyLCB0aGlzLm90aGVyQ29zdHMsIHRoaXMub3RoZXJGaW5pc2hQcm9kdWN0cywgdGhpcy5jb21wb25lbnRVc2VkcywgJ2RhdGEgcG8nKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2xlYXIoKQogICAgICB9CiAgICB9LAogICAgc2F2ZVByaW50KCkgewoKICAgIH0sCiAgICBzYXZlTmV3KCkgewoKICAgIH0sCiAgICBjbGVhcigpIHsKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIgPSB7fQogICAgICB0aGlzLnByb2R1Y3Rpb24gPSBwcm9kdWN0aW9uCiAgICAgIHRoaXMub3RoZXJGaW5pc2hQcm9kdWN0cyA9IFtdCiAgICAgIHRoaXMuY29tcG9uZW50VXNlZHMgPSBbXQogICAgICB0aGlzLnVvbSA9ICcnCiAgICAgIHRoaXMub3RoZXJDb3N0cyA9IFtdCiAgICB9LAogICAgYXN5bmMgbG9hZFByZWZpeCgpIHsKICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgYXdhaXQgcHJlZml4SGFuZGxlci5nZXQoJ3Byb2R1Y3Rpb24nKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uVHlwZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25UeXBlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rpb24udHJhbnNhY3Rpb25UeXBlID0gdGhpcy50cmFuc2FjdGlvblR5cGVzWzBdCiAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVOdW1iZXIoKQogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgIH0pCiAgICAgICAgfSwgMTApOwogICAgICB9KQogICAgfSwKICAgIGFzeW5jIGdlbmVyYXRlTnVtYmVyKCkgewoKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgYWJicjogdGhpcy5wcm9kdWN0aW9uLnRyYW5zYWN0aW9uVHlwZS5hYmJyLAogICAgICAgIHN0cnVjdHVyZTogdGhpcy5wcm9kdWN0aW9uLnRyYW5zYWN0aW9uVHlwZS5zdHJ1Y3R1cmUsCiAgICAgICAgdHJhbnNhY3Rpb25EYXRlOiB0aGlzLnByb2R1Y3Rpb24udHJhbnNhY3Rpb25EYXRlLAogICAgICAgIHNlcXVjZW5jaW5nOiB0aGlzLnByb2R1Y3Rpb24udHJhbnNhY3Rpb25UeXBlLnNlcXVjZW5jaW5nLAogICAgICAgIHR5cGU6ICdQcm9kdWN0aW9uJywKICAgICAgICBlbnRpdHk6IDIKICAgICAgfQogICAgICB0aGlzLnByb2R1Y3Rpb24uYWJiciA9IGRhdGEuYWJicgogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2coJ2RhdGEuYWJicicsIGRhdGEuYWJicikKICAgICAgdGhpcy5wcm9kdWN0aW9uLnN0cnVjdHVyZSA9IGRhdGEuc3RydWN0dXJlCiAgICAgIHRoaXMucHJvZHVjdGlvbi5zZXF1Y2VuY2luZyA9IGRhdGEuc2VxdWNlbmNpbmcKICAgICAgdGhpcy5wcm9kdWN0aW9uLnRyYW5zYWN0aW9uRGF0ZSA9IGRhdGEudHJhbnNhY3Rpb25EYXRlCiAgICAgIHRoaXMucHJvZHVjdGlvbi50eXBlID0gZGF0YS50eXBlCiAgICAgIGF3YWl0IGJpbGxpbmdIYW5kbGVyLmxhc3ROdW1iZXIoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgIGNvbnN0IGxhc3ROdW1iZXIgPSB0aGlzLnplcm9QYWQocGFyc2VJbnQocmVzLmxhc3ROdW1iZXIpLCB0aGlzLnByb2R1Y3Rpb24udHJhbnNhY3Rpb25UeXBlLmZvcm1hdCkKICAgICAgICAgIHRoaXMucHJvZHVjdGlvbi5udW1iZXIgPSByZXMuc3VmZml4ICsgdGhpcy5wcm9kdWN0aW9uLnRyYW5zYWN0aW9uVHlwZS5udW1iZXJTZXBhcmF0b3IgKyBsYXN0TnVtYmVyCiAgICAgICAgICB0aGlzLnByb2R1Y3Rpb24uYWJiciA9IHJlcy5hYmJyCiAgICAgICAgICB0aGlzLnByb2R1Y3Rpb24ubGFzdE51bWJlciA9IHJlcy5zdWZmaXggKyBsYXN0TnVtYmVyCiAgICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2codGhpcy5wcm9kdWN0aW9uLm51bWJlciwgJ3Byb2R1Y3Rpb24nKQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlKQogICAgICB9KQogICAgfSwKICAgIHplcm9QYWQobnVtLCBwbGFjZXMpIHsKICAgICAgcmV0dXJuIFN0cmluZyhudW0pLnBhZFN0YXJ0KHBsYWNlcywgJzAnKQogICAgfSwKICAgIGFzeW5jIHNhdmVDbG9zZSgpIHsKICAgICAgdGhpcy5wcm9kdWN0aW9uLnByb2R1Y3Rpb25ObyA9ICcnLy8nUEQtJyArIHRoaXMucHJvZHVjdGlvbi5wcm9kdWN0aW9uTm8KICAgICAgLy8gdGhpcy5wcm9kdWN0aW9uLmFjY1dQSSA9IHRoaXMuYWNjV1BJCiAgICAgIHRoaXMucHJvZHVjdGlvbi5ib20gPSB0aGlzLnByb2R1Y3Rpb25PcmRlci5ib20KICAgICAgdGhpcy5wcm9kdWN0aW9uLnByb2R1Y3Rpb25PcmRlciA9IHRoaXMucHJvZHVjdGlvbk9yZGVyCiAgICAgIHRoaXMucHJvZHVjdGlvbi5wcm9kdWN0ID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIucHJvZHVjdAogICAgICB0aGlzLnByb2R1Y3Rpb24ucXR5ID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIucXR5CiAgICAgIHRoaXMucHJvZHVjdGlvbi51b20gPSB0aGlzLnByb2R1Y3Rpb25PcmRlci55aWVsZFVPTQogICAgICB0aGlzLnByb2R1Y3Rpb24uYW1vdW50ID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIuYW1vdW50CiAgICAgIHRoaXMucHJvZHVjdGlvbi5leGNoYW5nZUFtb3VudCA9IHRoaXMucHJvZHVjdGlvbk9yZGVyLmV4Y2hhbmdlQW1vdW50CiAgICAgIHRoaXMucHJvZHVjdGlvbi52YXJpYW5jZSA9IHRoaXMucHJvZHVjdGlvbk9yZGVyLnZhcmlhbmNlCiAgICAgIHRoaXMucHJvZHVjdGlvbi5zdGFydGVkQXQgPSB0aGlzLnByb2R1Y3Rpb25PcmRlci5zdGFydGVkQXQKICAgICAgdGhpcy5wcm9kdWN0aW9uLnN0YXR1cyA9IDEKICAgICAgLy8gdGhpcy5wcm9kdWN0aW9uLmFjdGlvblR5cGUgPSAnbmV3JwogICAgICAvLyB0aGlzLnByb2R1Y3Rpb24ualJhdyA9IHRoaXMualJhdwogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5qUmF3ID0gdGhpcy5qUmF3CiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnN0YXR1cyA9IDIKCiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnR5cGUgPSAnUHJvZHVjdGlvbiBPcmRlcicKICAgICAgLy8gdGhpcy5wcm9kdWN0aW9uT3JkZXIuc3RhcnRlZEF0ID0gdGhpcy5wcm9kdWN0aW9uLnRyYW5zYWN0aW9uRGF0ZQogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5hY3Rpb25UeXBlID0gJ25ldycKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuYWNjb3VudCA9IHRoaXMuYWNjV1BJCiAgICAgIC8vdG9kbzogY3JlYXRlIFJhdyBwcm9kdWN0aW9uCiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgIGF3YWl0IHByb2R1Y3Rpb25IYW5kbGVyLmNyZWF0ZSh0aGlzLnByb2R1Y3Rpb24pLnRoZW4ocmVzID0+IHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICB9KQogICAgICAvL3RvZG86IHVwZGF0ZSBwcm9kdWN0aW9uIG9yZGVyIC8gaW52ZW50b3J5IC8gSm91cm5hbAogICAgICBhd2FpdCBwcm9kdWN0aW9uT3JkZXJIYW5kbGVyLmNyZWF0ZSh0aGlzLnByb2R1Y3Rpb25PcmRlcikudGhlbihyZXMgPT4gewogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMpCiAgICAgICAgdGhpcy5kaWFsb2dNID0gZmFsc2UKICAgICAgICB0aGlzLmluaXREYXRhKCkKICAgICAgfSkKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgcmVtb3ZlUm93KCkgewogICAgfSwKICAgIGVycm9yTWVzc2FnZSgpIHsKCiAgICB9LAogICAgYWRkUm93KCkgewogICAgfSwKICAgIGFjY291bnREcm9wRG93bkVkaXRvcigpIHsKICAgIH0sCiAgICBjYW5jZWwoKSB7CgogICAgfSwKICAgIG51bWJlckZvcm1hdCh2YWx1ZSkgewogICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcodmFsdWUsIGBuJHt0aGlzLmRlY2ltYWxGb3JtYXR9YCkKICAgIH0sCiAgICBoaWRlU21hbGxTaWRlQmFyKCkgewogICAgICB0aGlzLmlzSGlkZUJhciA9ICF0aGlzLmlzSGlkZUJhcjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnaWQnOiAnaW5pdERhdGEnCiAgICAvLyBjYWxsIGFnYWluIHRoZSBtZXRob2QgaWYgdGhlIHJvdXRlIGNoYW5nZXMKCiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5sb2FkUHJlZml4KCkKICAgIGF3YWl0IHRoaXMubG9hZEFjY291bnQoKQogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRoaXMucHJvZHVjdGlvbi50cmFuc2FjdGlvbkRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKQogICAgYXdhaXQgdGhpcy5pbml0RGF0YSgpCiAgfSwKfTsK"},{"version":3,"sources":["ProductionOrderView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgiBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductionOrderView.vue","sourceRoot":"src/views/products/production/production_orders","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col sm=\"12\" cols=\"12\">\n          <v-card outlined dense class=\"pa-4 no_border rounded-sm\" color=\"white\">\n            <v-row>\n              <v-col class=\"bigSide py-0\" sm=\"8\" cols=\"12\" style=\"transition: .3s ease-in;\"\n                     :class=\"{'hide_big_bar_class':isHideBar}\">\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                  <v-card outlined dense class=\"no_border\">\n                    <h2 class=\"mb-0\">\n                      {{ $t('production_order') + ` (#${productionOrder.abbr + '-' + productionOrder.number})` }}</h2>\n                    <v-icon v-if=\"isHideBar\"\n                            onclick=\"window.history.go(-1); return false;\"\n                            style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                            class=\"float-right\"\n                    >close\n                    </v-icon>\n                    <span style=\"transition: .3s ease-in; z-index:10;\"\n                          :class=\"{'iconArrow': !isHideBar,'iconArrowHide': isHideBar }\">\n                                            <v-icon size=\"22\"\n                                                    class=\"arr_icon\"\n                                                    @click=\"hideSmallSideBar\"\n                                                    v-if=\"isHideBar\"> fa fa-chevron-circle-left\n                                            </v-icon>\n                                            <v-icon size=\"22\"\n                                                    class=\"arr_icon\"\n                                                    @click=\"hideSmallSideBar\"\n                                                    v-if=\"!isHideBar\"> fa fa-chevron-circle-right\n                                            </v-icon>\n\t\t\t\t\t\t\t\t\t\t</span>\n                  </v-card>\n                  <v-card outlined dense class=\"px-3 no_border\" color=\"grayBg\">\n                    <v-row>\n                      <v-col sm=\"4\" class=\"pr-1\">\n                        <label class=\"label  mb-0\">{{ $t('finished_product_variance') }}</label>\n                        <h3 class=\"text-bold  py-1\">{{\n                            productionOrder.product ? productionOrder.product.name : ''\n                          }}</h3>\n                      </v-col>\n                      <v-col sm=\"2\" class=\"px-1\">\n                        <label class=\"label  mb-0\">{{ $t('produce_qty') }}</label>\n                        <h3 class=\"text-bold  py-1\">{{ productionOrder.qty }}</h3>\n                      </v-col>\n                      <v-col sm=\"2\" class=\"px-1\">\n                        <label class=\"label  mb-0\">{{ $t('yield_uom') }}</label>\n                        <h3 class=\"text-bold  py-1\">{{ uom }}</h3>\n                      </v-col>\n                      <v-col sm=\"2\" class=\"pl-1\">\n                        <label class=\"label  mb-0\">{{ $t('due_date') }}</label>\n                        <h3 class=\"text-bold  py-1\">{{\n                            productionOrder.dueDate ? new Date(productionOrder.dueDate).toISOString().substr(0, 10) : ''\n                          }}</h3>\n                      </v-col>\n                    </v-row>\n                  </v-card>\n\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col cols=\"12\" class=\"py-1 pb-0\">\n                      <h2 class=\"primary--text mb-0 font_20\">\n                        {{ $t('other_finished_by_product') }}</h2>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\">\n                      <kendo-datasource ref=\"otherProductDS\"\n                                        :data=\"otherFinishProducts\"\n                      />\n                      <kendo-grid id=\"gridOtherProduct\" class=\"grid-function\"\n                                  :data-source-ref=\"'otherProductDS'\"\n                                  :sortable=\"false\"\n                                  :filterable=\"false\"\n                                  :column-menu=\"true\"\n                                  :editable=\"false\"\n                                  :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                            :template=\"rowNumberOP\"\n                            :title=\"$t('no.')\"\n                            :width=\"55\"\n                            :column-menu=\"false\"\n                            :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5;',\n                                                        class: 'text-variants'\n                                                    }\"\n                            :attributes=\"{\n                                                        style: 'text-align: variants'\n                                                    }\"/>\n                        <kendo-grid-column :field=\"'item'\"\n                                           :title=\"$t('item')\"\n                                           :width=\"200\"\n                                           :template=\"itemTemplate\"\n                                           :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5'\n                                                    }\"/>\n                        <kendo-grid-column :field=\"'description'\"\n                                           :title=\"$t('description')\"\n                                           :width=\"200\"\n                                           :headerAttributes=\"{\n                                                        style: 'background-color: #EDF1F5'\n                                                    }\"/>\n                        <kendo-grid-column :field=\"'buom'\"\n                                           :title=\"$t('base_uom')\"\n                                           :width=\"150\"\n                                           :template=\"UOMTemplate\"\n                                           :editable=\"()=>{ return false}\"\n                                           :headerAttributes=\"{style: 'text-align: right; background-color: #EDF1F5'}\"\n                                           :attributes=\"{style: 'text-align: right; '}\"/>\n                        <kendo-grid-column :field=\"'yieldQty'\"\n                                           :title=\"$t('yield_qty')\"\n                                           :width=\"150\"\n                                           :template=\"'<span>#=kendo.toString(yieldQty || 0, (decimalFormat || `n2`)) || 0#</span>'\"\n                                           :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\"\n                                           :attributes=\"{\n                                                            style: 'text-align: right'\n                                                        }\"/>\n                        <kendo-grid-column :field=\"'cost'\"\n                                           :title=\"$t('cost')\"\n                                           :width=\"150\"\n                                           :template=\"'<span>#=kendo.toString(cost || 0, (decimalFormat || `n2`)) || 0#</span>'\"\n                                           :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\"\n                                           :attributes=\"{\n                                                            style: 'text-align: right'\n                                                        }\"/>\n                        <kendo-grid-column :field=\"'amount'\"\n                                           :title=\"$t('amount')\"\n                                           :width=\"150\"\n                                           :editable=\"()=>{ return false}\"\n                                           :template=\"'<span>#=kendo.toString(amount || 0, (decimalFormat || `n2`)) || 0#</span>'\"\n                                           :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\"\n                                           :attributes=\"{\n                                                            style: 'text-align: right'\n                                                        }\"/>\n                      </kendo-grid>\n\n                    </v-col>\n                  </v-row>\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col cols=\"12\" class=\"py-1 pb-0\">\n                      <h2 class=\"greyText--text mb-0 font_20\">\n                        {{ $t('components_used_for_productions') }}</h2>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\">\n                      <kendo-datasource ref=\"componentUsedDS\"\n                                        :data=\"componentUseds\"\n                      />\n                      <kendo-grid id=\"gridComponentUsed\" class=\"grid-function\"\n                                  :data-source-ref=\"'componentUsedDS'\"\n                                  :sortable=\"false\"\n                                  :filterable=\"false\"\n                                  :column-menu=\"true\"\n                                  :editable=\"false\"\n                                  :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                            :title=\"$t('no.')\"\n                            :template=\"rowNumberCU\"\n                            :width=\"55\"\n                            :column-menu=\"false\"\n                            :headerAttributes=\"{style: 'background-color: #EDF1F5;',class: 'text-variants',}\"\n                            :attributes=\"{style: 'text-align: variants',}\"\n                        />\n                        <kendo-grid-column\n                            :field=\"'item'\"\n                            :title=\"$t('items')\"\n                            :width=\"200\"\n                            :template=\"'<span>#=item.name#</span>'\"\n                            :headerAttributes=\"{style: 'background-color: #EDF1F5',}\"\n                        />\n                        <kendo-grid-column\n                            :field=\"'description'\"\n                            :title=\"$t('description')\"\n                            :width=\"200\"\n                            :headerAttributes=\"{\n                                                            style: 'background-color: #EDF1F5'\n                                                        }\"/>\n                        <kendo-grid-column\n                            :template=\"UOMTemplate\"\n                            :field=\"'buom'\"\n                            :title=\"$t('base_uom')\"\n                            :width=\"160\"\n                            :editable=\"()=>{ return false}\"\n                            :headerAttributes=\"{\n                                                            style: 'background-color: #EDF1F5'\n                                                        }\"/>\n                        <kendo-grid-column\n                            :field=\"'qty'\"\n                            :title=\"$t('qty')\"\n                            :width=\"150\"\n                            :template=\"'<span>#=kendo.toString(qty || 0, (decimalFormat || `n2`)) || 0#</span>'\"\n                            :headerAttributes=\"{\n                                                                style: 'text-align: right; background-color: #EDF1F5'\n                                                            }\"\n                            :attributes=\"{\n                                                                style: 'text-align: right'\n                                                            }\"/>\n                        <kendo-grid-column\n                            :field=\"'cost'\"\n                            :title=\"$t('cost')\"\n                            :width=\"150\"\n                            :template=\"'<span>#=kendo.toString(cost || 0, (decimalFormat || `n2`)) || 0#</span>'\"\n                            :headerAttributes=\"{\n                                                                style: 'text-align: right; background-color: #EDF1F5'\n                                                            }\"\n                            :attributes=\"{\n                                                                style: 'text-align: right'\n                                                            }\"/>\n                        <kendo-grid-column\n                            :field=\"'amount'\"\n                            :title=\"$t('amount')\"\n                            :width=\"150\"\n                            :editable=\"()=>{ return false}\"\n                            :template=\"'<span>#=kendo.toString(amount || 0, (decimalFormat || `n2`)) || 0#</span>'\"\n                            :headerAttributes=\"{\n                                                            style: 'text-align: right; background-color: #EDF1F5'\n                                                        }\"\n                            :attributes=\"{\n                                                            style: 'text-align: right'\n                                                        }\"/>\n                      </kendo-grid>\n                    </v-col>\n                  </v-row>\n                  <!--                  <v-row style=\"background-color: #fff;\">-->\n                  <!--                    <v-col cols=\"12\" class=\"py-1 pb-0\">-->\n                  <!--                      <h2 class=\"greyText&#45;&#45;text mb-0 font_20\">{{ $t('other_cost') }}</h2>-->\n                  <!--                    </v-col>-->\n                  <!--                    <v-col sm=\"12\" cols=\"12\">-->\n                  <!--                      <kendo-datasource ref=\"otherCostDS\"-->\n                  <!--                                        :data=\"otherCosts\"-->\n                  <!--                      />-->\n                  <!--                      <kendo-grid id=\"gridOtherCost\" class=\"grid-function\"-->\n                  <!--                                  :data-source-ref=\"'otherCostDS'\"-->\n                  <!--                                  :sortable=\"false\"-->\n                  <!--                                  :filterable=\"false\"-->\n                  <!--                                  :column-menu=\"true\"-->\n                  <!--                                  :editable=\"false\"-->\n                  <!--                                  :scrollable-virtual=\"true\"-->\n                  <!--                      >-->\n                  <!--                        <kendo-grid-column-->\n                  <!--                            :template=\"roNumberOC\"-->\n                  <!--                            :title=\"$t('no.')\"-->\n                  <!--                            :width=\"55\"-->\n                  <!--                            :column-menu=\"false\"-->\n                  <!--                            :headerAttributes=\"{-->\n                  <!--                                                        style: 'background-color: #EDF1F5;',-->\n                  <!--                                                        class: 'text-variants'-->\n                  <!--                                                    }\"-->\n                  <!--                            :attributes=\"{-->\n                  <!--                                                        style: 'text-align: variants'-->\n                  <!--                                                    }\"/>-->\n                  <!--                        <kendo-grid-column-->\n                  <!--                            :field=\"'account'\"-->\n                  <!--                            :title=\"$t('account')\"-->\n                  <!--                            :width=\"200\"-->\n                  <!--                            :template=\"'<span>#=account.name#</span>'\"-->\n                  <!--                            :editor=\"accountDropDownEditor\"-->\n                  <!--                            :headerAttributes=\"{-->\n                  <!--                                                        style: 'background-color: #EDF1F5'-->\n                  <!--                                                    }\"/>-->\n                  <!--                        <kendo-grid-column-->\n                  <!--                            :field=\"'description'\"-->\n                  <!--                            :title=\"$t('description')\"-->\n                  <!--                            :width=\"200\"-->\n                  <!--                            :headerAttributes=\"{-->\n                  <!--                                                        style: 'background-color: #EDF1F5'-->\n                  <!--                                                    }\"/>-->\n                  <!--                        <kendo-grid-column-->\n                  <!--                            :field=\"'amount'\"-->\n                  <!--                            :title=\"$t('amount')\"-->\n                  <!--                            :width=\"160\"-->\n                  <!--                            :headerAttributes=\"{-->\n                  <!--                                                        style: 'background-color: #EDF1F5'-->\n                  <!--                                                    }\"/>-->\n                  <!--                        <kendo-grid-column-->\n                  <!--                            :field=\"'tax'\"-->\n                  <!--                            :editor=\"TaxDropDownEditor\"-->\n                  <!--                            :template=\"taxTemplate\"-->\n                  <!--                            :title=\"$t('tax')\"-->\n                  <!--                            :format=\"'{0:n}'\"-->\n                  <!--                            :width=\"150\"-->\n                  <!--                            :headerAttributes=\"{-->\n                  <!--                                                            style: 'text-align: right; background-color: #EDF1F5'-->\n                  <!--                                                        }\"-->\n                  <!--                            :attributes=\"{-->\n                  <!--                                                            style: 'text-align: right'-->\n                  <!--                                                        }\"/>-->\n                  <!--                      </kendo-grid>-->\n                  <!--                    </v-col>-->\n                  <!--                  </v-row>-->\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                      <v-row>\n                        <v-col sm=\"6\" cols=\"6\">\n                          <v-textarea class=\"mt-1\"\n                                      outlined\n                                      clearable\n                                      v-model=\"productionOrder.transactionNote\"\n                                      tag=\"Memo\"\n                                      height=\"90px\"\n                                      rows=\"3\"\n                                      no-resize\n                                      placeholder=\"Memo\"\n                          />\n                        </v-col>\n                        <v-col sm=\"6\" cols=\"6\">\n                          <v-simple-table>\n                            <template v-slot:default>\n                              <tbody>\n                              <tr>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t('total_cost') }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-right\">{{\n                                    productionOrder.exchangeAmount\n                                  }}\n                                </td>\n                              </tr>\n                              <tr>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t('cost_per_unit') }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-right\">{{\n                                    productionOrder.variance\n                                  }}\n                                </td>\n                              </tr>\n                              <tr>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t('dr') }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-right\">{{\n                                    dr\n                                  }}\n                                </td>\n                              </tr>\n                              <tr>\n                                <td class=\"text-left text-uppercase\">\n                                  {{ $t('cr') }}\n                                </td>\n                                <td class=\"text-center\">:</td>\n                                <td class=\"text-right\">{{\n                                    cr\n                                  }}\n                                </td>\n                              </tr>\n                              </tbody>\n                            </template>\n                          </v-simple-table>\n                        </v-col>\n                      </v-row>\n                    </v-col>\n                  </v-row>\n\n                  <v-divider/>\n                  <v-divider/>\n                  <v-card outlined dense class=\"no_border function_footer py-2\">\n                    <p class=\"float-left py-2 mb-0  color_grey\">\n                      {{ $t('standard_commercial_invoice') }}</p>\n                    <v-btn class=\"float-right save_option mx-1\">\n                      {{ $t('print') }}\n                    </v-btn>\n                    <v-btn class=\"float-right white--text mx-1\" color=\"primary\">\n                      {{ $t('delete') }}\n                    </v-btn>\n                    <v-btn class=\"float-right white--text  mx-1\" color=\"primary\">\n                      {{ $t('edit') }}\n                    </v-btn>\n                  </v-card>\n                  <v-divider/>\n                </v-form>\n              </v-col>\n              <v-col class=\"smallSide\" sm=\"4\" style=\"transition: .3s ease-in;\"\n                     :class=\"{'hide_small_bar_class':isHideBar}\">\n                <h3 style=\"color: #b3b5bc; font-size:20px;\" v-if=\"!isHideBar\"\n                    class=\"text-uppercase float-right mt-n3\">Help\n                  <v-icon\n                      onclick=\"window.history.go(-1); return false;\"\n                      style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                      class=\"float-right mt-n1\"\n                  >close\n                  </v-icon>\n                </h3>\n\n                <div v-if=\"!isHideBar\" class=\"small_sidebar mt-9 px-4 grayBg\">\n                  <h4 class=\"my-2 text-uppercase\">{{ $t('analysis') }}</h4>\n                  <v-row>\n                    <v-col sm=\"6\" cols=\"6\" class=\"py-1\">\n                      <label class=\"label\">{{ $t('warehouse') }}</label>\n                      <h4 class=\"text-bold py-1\">{{ warehouse }}</h4>\n\n                      <label class=\"label\">{{ $t('segment') }}</label>\n                      <h4 class=\"text-bold py-1\">{{ productionOrder.segment ? productionOrder.segment.name : '' }}</h4>\n                      <label class=\"label\">{{ $t('location') }}</label>\n                      <h4 class=\"text-bold py-1\">{{\n                          productionOrder.location ? productionOrder.location.name : ''\n                        }}</h4>\n                      <!--                                            <label class=\"label\">{{ $t('sale_channel') }}</label>-->\n                      <!--                                            <h4 class=\"text-bold py-1\">{{ productionOrder.saleChannel.name }}</h4>-->\n                    </v-col>\n                    <v-col sm=\"6\" cols=\"6\" class=\"py-1\">\n                      <label class=\"label\">{{ $t('project') }}</label>\n                      <h4 class=\"text-bold py-1\">{{ productionOrder.project ? productionOrder.project.name : '' }}</h4>\n                      <!--                                            <label class=\"label\">{{ $t('month_Of') }}</label>-->\n                      <!--                                            <h4 class=\"text-bold py-1\">{{ new Date(productionOrder.monthOf).toISOString().substr(0, 7) }}</h4>-->\n                    </v-col>\n                  </v-row>\n                  <div class=\"my-3\" style=\"height:3px; background-color:#ffffff;width:100%;\"></div>\n                  <h4 class=\"my-2 text-uppercase\">{{ $t('added_transaction') }}</h4>\n                  <h4 class=\"my-2 text-capitalize\">{{ $t('bill_of_material') }}</h4>\n                  <h4 class=\"color_grey\">\n                    {{ bomReferenceNo }}</h4>\n                  <div class=\"my-3\" style=\"height:3px; background-color:#ffffff;width:100%;\"></div>\n                  <v-btn @click=\"onStartProduction\"\n                         :disabled=\"disabledMe\"\n                         class=\"text-capitalize rounded-0 white--text\"\n                         width=\"100%\"\n                         color=\"primary\">\n                    {{ $t('start_production') }}\n                  </v-btn>\n                  <v-dialog v-model=\"dialogM\" max-width=\"600px\" eager>\n                    <v-card>\n                      <v-card-title>{{ $t('start_production') }}</v-card-title>\n                      <v-icon class=\"btn_close\" @click=\"dialogM = false\">close</v-icon>\n                      <v-divider/>\n                      <v-card-text style=\"height: 240px; background-color: #EDF1F5; color: #333;\">\n                        <v-row class=\"pt-4\">\n                          <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                            <label class=\"mb-0\">{{ $t('start_date') }}</label>\n                            <app-datepicker :initialDate=\"productionOrder.startedAt\"\n                                            @emitDate=\"productionOrder.startedAt = $event\"/>\n                          </v-col>\n                          <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                            <label class=\"mb-0\">{{ $t('working_progress_account') }}</label>\n                            <v-select class=\"mt-1\"\n                                      :items=\"accWPIs\"\n                                      item-text=\"name\"\n                                      item-value=\"id\"\n                                      @change=\"rawJournal\"\n                                      return-object\n                                      v-model=\"accWPI\"\n                                      outlined/>\n                          </v-col>\n                          <!--                          <v-col sm=\"6\" cols=\"12\" class=\"py-0\">-->\n                          <!--                            <label class=\"label mb-0 mt-1\">{{ $t('production_no') }}</label>-->\n                          <!--                            <v-row class=\"mt-1 mr-0\">-->\n                          <!--                              <v-col sm=\"3\" cols=\"3\" class=\"py-0 pr-0\">-->\n                          <!--                                <div class=\"code_text text-uppercase\"> {{ production.abbr }}</div>-->\n                          <!--                              </v-col>-->\n                          <!--                              <v-col sm=\"7\" cols=\"7\" class=\"pt-0 pl-0 pr-1\">-->\n                          <!--                                <v-text-field-->\n                          <!--                                    disabled-->\n                          <!--                                    class=\"custom-border\"-->\n                          <!--                                    v-model=\"production.number\"-->\n                          <!--                                    tage=\"Product Order Number\"-->\n                          <!--                                    outlined-->\n                          <!--                                    :rules=\"[(v) => !!v || 'Number is required']\"-->\n                          <!--                                    required-->\n                          <!--                                />-->\n                          <!--                              </v-col>-->\n                          <!--                              <v-col sm=\"2\" cols=\"2\" class=\"pt-0 px-0\">-->\n                          <!--                                <v-icon-->\n                          <!--                                    color=\"black\"-->\n                          <!--                                    size=\"30\"-->\n                          <!--                                    class=\"border_qrcode\"-->\n                          <!--                                    @click=\"generateNumber\"-->\n                          <!--                                >mdi-qrcode-->\n                          <!--                                </v-icon>-->\n                          <!--                              </v-col>-->\n                          <!--                            </v-row>-->\n\n                          <!--                          </v-col>-->\n                          <!--                          <v-col sm=\"6\" cols=\"6\" class=\"py-0\">-->\n                          <!--                            <label class=\"mb-0\">{{ $t('memo') }}</label>-->\n                          <!--                            <v-textarea class=\"mt-1\"-->\n                          <!--                                        outlined-->\n                          <!--                                        clearable-->\n                          <!--                                        no-resize-->\n                          <!--                                        v-model=\"production.transactionNote\"-->\n                          <!--                                        tag=\"Memo\"-->\n                          <!--                                        height=\"90px\"-->\n                          <!--                                        rows=\"2\"-->\n                          <!--                                        placeholder=\"Memo\">-->\n                          <!--                            </v-textarea>-->\n\n                          <!--                          </v-col>-->\n\n                        </v-row>\n                      </v-card-text>\n                      <v-divider/>\n                      <v-card-actions class=\"function_footer\">\n                        <v-btn class=\"btn_cancel float-left ml-4 mb-2\" @click=\"dialogM = false\">\n                          {{ $t('cancel') }}\n                        </v-btn>\n                        <v-btn @click=\"saveClose\" class=\"btn_save_close float-right mr-4 mb-2\">\n                          {{ $t('save_close') }}\n                        </v-btn>\n                      </v-card-actions>\n                    </v-card>\n                  </v-dialog>\n                  <div class=\"my-3\" style=\"height:3px; background-color:#ffffff;width:100%;\"></div>\n                  <v-row>\n                    <v-col cols=\"12\" class=\"py-0\">\n                      <h4 class=\"my-2 text-uppercase\">{{ $t('production') }}</h4>\n                      <v-row>\n                        <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                          <h4 class=\"my-2 text-capitalize\">{{ $t('start_date_time') }}</h4>\n                        </v-col>\n                        <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                          <h4 class=\"my-2\">PO0720-001</h4>\n                        </v-col>\n                      </v-row>\n                      <v-card class=\" text-bold rounded-0  no-boxshadow\" color=\"primary\">\n                        <p class=\"text-center pa-2 color_white mb-1\">\n                          {{ $t('complete_production') }}</p>\n                      </v-card>\n                    </v-col>\n                  </v-row>\n\n\n                  <p class=\"mb-0 detial_smallside_p\">{{ $t('prouduct_funct_order_desc') }}</p>\n                </div>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n      <LoadingMe\n          :isLoading=\"showLoading\"\n          :fullPage=\"false\"\n          type=\"loading\"\n          :myLoading=\"true\"/>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport DatePickerComponent from '@/components/custom_templates/DatePickerComponent'\nimport Production from \"@/scripts/model/Production\";\nimport kendo from \"@progress/kendo-ui\";\nimport ProductionOrder from \"@/scripts/model/ProductionOrder\";\nimport ComponentUsedModel from \"@/scripts/start_production/model/ComponentUsed\";\n\nconst productionOrderHandler = require(\"@/scripts/productionOrderHandler\")\nconst productionHandler = require(\"@/scripts/productionHandler\")\nconst accountHandler = require(\"@/scripts/handler/accounting/account\")\nconst prefixHandler = require(\"@/scripts/prefixHandler\")\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\")\nconst production = new Production({})\n\nexport default {\n  name: \"ProductionOrderView\",\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    'app-datepicker': DatePickerComponent,\n  },\n  data: () => ({\n    isEdit: false,\n    showLoading: false,\n    alert: false,\n    valid: true,\n    isHideBar: false,\n    production: production,\n    productionOrder: new ProductionOrder({}),\n    otherFinishProducts: [],\n    componentUseds: [],\n    otherCosts: [],\n    transactionTypes: [],\n    dialogM: false,\n    uom: '',\n    accWPIs: [],\n    accWPI: {},\n    decimalFormat: 'n2',\n    jRaw: [],\n    loggedUser: {\n      id: 'cf3d10ab-bce6-47b3-8405-b448c23dad84',\n      name: 'Mr. Inspector'\n    },\n    dr: 0,\n    cr: 0,\n  }),\n  computed: {\n    bomReferenceNo() {\n      if (this.productionOrder) {\n        const bom = this.productionOrder.bom || {}\n        if (bom) {\n          return bom.referenceNo || ''\n        }\n      }\n      return ''\n    },\n    disabledMe() {\n      if (this.productionOrder) {\n        return this.productionOrder.status === 2;\n      }\n      return false\n    },\n    id() {\n      if (this.$route.params.id !== '') {\n        return this.$route.params.id\n      } else {\n        return ''\n      }\n    },\n    warehouse() {\n      if (this.productionOrder) {\n        if (this.productionOrder.hasOwnProperty('warehouse')) {\n          if (this.productionOrder.warehouse.hasOwnProperty('id')) {\n            return this.productionOrder.warehouse.name\n          }\n        }\n      }\n      return ''\n    },\n  },\n  methods: {\n    rawJournal() {\n      try {\n        let nature = ''\n        this.jRaw = []\n        const data = this.productionOrder.componentUsed || []\n        const rows = data.filter(m => parseFloat(m.amount) > 0)\n        const bom = this.productionOrder.bom\n        const currency = bom.currency || {}\n        const xRate = bom.exchangeRate || {}\n        const txnRate = xRate.rate || 1\n        this.productionOrder.txnRate = txnRate\n        this.productionOrder.exchangeRate = xRate\n        this.productionOrder.currency = currency\n        rows.forEach(value => {\n          const amt = kendo.parseFloat(value.amount) * -1\n          const itemXAmount = amt * kendo.parseFloat(txnRate)\n          const item = value.item\n          if ((amt > 0)) {\n            nature = 'dr'\n          } else {\n            nature = 'cr'\n          }\n          if (item) {\n            if (item.type === 'Service') {\n              if (item.hasOwnProperty('costOfGoodsSoldAcc')) {\n                if (item.costOfGoodsSoldAcc.hasOwnProperty('id')) {\n                  let costOfGoodsSoldAcc = item.costOfGoodsSoldAcc\n                  this.jRaw.push({\n                    id: costOfGoodsSoldAcc.id + '-' + nature,\n                    line: new ComponentUsedModel(value),\n                    description: this.productionOrder.transactionNote,\n                    account: item.costOfGoodsSoldAcc,\n                    accountId: item.costOfGoodsSoldAcc.id,\n                    amount: amt, // qty*avg_cost ,\n                    exchangeAmount: itemXAmount,//xAmount,\n                    type: nature,\n                    typeAs: 'item'\n                  })\n                }\n\n              }\n              if (item.hasOwnProperty('deferredIncomeAcc')) {\n                if (item.deferredIncomeAcc.hasOwnProperty('id')) {\n                  let deferredInAcc = item.deferredIncomeAcc\n                  this.jRaw.push({\n                    id: deferredInAcc.id + '-' + nature,\n                    line: new ComponentUsedModel(value),\n                    description: this.productionOrder.transactionNote,\n                    account: deferredInAcc,\n                    accountId: deferredInAcc.id,\n                    amount: amt, // qty*avg_cost ,\n                    exchangeAmount: itemXAmount,//,\n                    type: nature,\n                    typeAs: 'item'\n                  })\n                }\n              }\n            } else if (item.type === 'Variant') {\n              if (item.hasOwnProperty('inventoryAcc')) {\n                if (item.inventoryAcc.hasOwnProperty('id')) {\n                  let inventoryAcc = item.inventoryAcc\n                  this.jRaw.push({\n                    id: inventoryAcc.id + '-' + nature,\n                    line: new ComponentUsedModel(value),\n                    description: this.productionOrder.transactionNote,\n                    account: item.inventoryAcc,\n                    accountId: item.inventoryAcc.id,\n                    amount: amt, // qty*avg_cost ,\n                    exchangeAmount: itemXAmount,//xAmount,\n                    type: nature,\n                    typeAs: 'item'\n                  })\n                }\n              }\n            } else if (item.type === 'Fixed Asset') {\n              if (item.hasOwnProperty('assetAcc')) {\n                if (item.assetAcc.hasOwnProperty('id')) {\n                  let assetAcc = item.assetAcc\n                  this.jRaw.push({\n                    id: assetAcc.id + '-' + nature,\n                    line: new ComponentUsedModel(value),\n                    description: this.productionOrder.transactionNote,\n                    account: item.assetAcc,\n                    accountId: item.assetAcc.id,\n                    amount: amt, // qty*avg_cost ,\n                    exchangeAmount: itemXAmount,//xAmount,\n                    type: nature,\n                    typeAs: 'item'\n                  })\n                }\n              }\n\n            } else if (item.type === 'Transaction Item') {\n              if (item.hasOwnProperty('account')) {\n                if (item.account.hasOwnProperty('id')) {\n                  this.jRaw.push({\n                    id: item.account.id + '-' + nature,\n                    line: new ComponentUsedModel(value),\n                    description: this.productionOrder.transactionNote,\n                    account: item.account,\n                    accountId: item.account.id,\n                    amount: amt, // qty*avg_cost ,\n                    exchangeAmount: itemXAmount,//xAmount,\n                    type: nature,\n                    typeAs: 'item'\n                  })\n                }\n              }\n            }\n          }\n        })\n        // todo: Working Progress Acc\n        // todo: raw Journal\n        if (this.productionOrder.amount > 0) {\n          nature = 'dr'\n        } else {\n          nature = 'cr'\n        }\n        // window.console.log(this.accWPI, 'accWPI')\n        if (this.accWPI) {\n          if (this.accWPI.hasOwnProperty('id')) {\n            this.jRaw.push({\n              id: this.accWPI.id + '-' + nature,\n              line: new ComponentUsedModel({}),\n              description: this.productionOrder.transactionNote,\n              account: this.accWPI,\n              accountId: this.accWPI.id,\n              exchangeAmount: this.productionOrder.amount,\n              amount: this.productionOrder.amount,\n              type: nature,\n              typeAs: 'wpa'\n            })\n          }\n        }\n        this.shrinkData(this.jRaw)\n      } catch (e) {\n        window.console.log(e, 'error')\n      }\n    },\n    shrinkData(obj) {\n      const uniques = this.removeDuplicate(obj)\n      uniques.forEach(n => {\n        const found = obj.filter(m => m.id === n.id)\n        let amount = 0, exchangeAmount = 0\n        found.forEach(z => {\n          amount += parseFloat(z.amount || 0)\n          exchangeAmount += parseFloat(z.exchangeAmount || 0)\n        })\n        n.amount = parseFloat(amount) //this.numberFormat(amount)\n        n.exchangeAmount = parseFloat(exchangeAmount)\n      })\n      this.jRaw = uniques\n      let dr = 0, cr = 0\n      this.jRaw.forEach(j => {\n        switch (j.type) {\n          case 'cr':\n            cr += parseFloat(j.amount)\n            break\n          case 'dr':\n            dr += parseFloat(j.amount)\n            break\n          default:\n            break\n        }\n      })\n      this.dr = dr\n      this.cr = cr\n      window.console.log('dr=', dr, 'cr=', cr, 'dr+cr = ', dr + cr)\n      window.console.log(JSON.stringify(uniques), 'uniques')\n\n    },\n    removeDuplicate(array) {\n      const result = [];\n      const map = new Map();\n      for (const item of array) {\n        if (!map.has(item.id)) {\n          map.set(item.id, true);    // set any value to Map\n          result.push(item)\n        }\n      }\n      return result\n    },\n    async onStartProduction() {\n      await this.generateNumber()\n      this.showLoading = true\n      this.productionOrder.startedAt = new Date().toISOString().substr(0, 10)\n      this.dialogM = true\n      this.showLoading = false\n    },\n    taxTemplate(dataItem) {\n      // window.console.log('vat', dataItem.tax)\n      const vat = dataItem.tax\n      if (vat) {\n        return `<span>${vat.defaultTax ? vat.defaultTax : ``}</span>`\n      } else {\n        return ``\n      }\n    },\n    TaxDropDownEditor(container, options) {\n      kendo.jQuery('<input name=\"' + options.field + '\"/>')\n          .appendTo(container)\n          .kendoDropDownList({\n            autoBind: true,\n            autoWidth: true,\n            height: 400,\n            filter: \"startswith\",\n            dataTextField: \"defaultTax\",\n            dataValueField: \"id\",\n            template: \"<span>#=defaultTax#</span>\",\n            optionLabel: \"--Select--\",\n            dataSource: new kendo.data.DataSource({\n              data: this.vatTax\n            })\n          })\n    },\n    roNumberOC(dataItem) {\n      let ds = this.$refs.otherCostDS.kendoWidget(),\n          index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    rowNumberOP(dataItem) {\n      let ds = this.$refs.otherProductDS.kendoWidget(),\n          index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    itemTemplate(dataItem) {\n      const item = dataItem.item\n      if (item) {\n        return `<span>${item.name ? item.name : ``}</span>`\n      } else {\n        return ``\n      }\n    },\n    UOMTemplate(dataItem) {\n      const uom = dataItem.buom\n      if (uom) {\n        return `<span>${uom.name ? uom.name : ``}</span>`\n      } else {\n        return ``\n      }\n    },\n    UOMTemplateOP(dataItem) {\n      const uom = dataItem.uom\n      if (uom) {\n        return `<span>${uom.uom ? uom.name : ``}</span>`\n      } else {\n        return ``\n      }\n    },\n    UOMTemplateCU(dataItem) {\n      const uom = dataItem.uom\n      if (uom) {\n        return `<span>${uom.uom ? uom.name : ``}</span>`\n      } else {\n        return ``\n      }\n    },\n    rowNumberCU(dataItem) {\n      let ds = this.$refs.componentUsedDS.kendoWidget(),\n          index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    async loadAccount() {\n      new Promise(resolve => {\n        setTimeout(() => {\n          resolve('resolved');\n          accountHandler.getAll().then(res => {\n            this.showLoading = false\n            this.accWPIs = res.filter(m => m.account_type.name === 'Inventory').map(item => {\n              return {\n                id: item.uuid,\n                uuid: item.uuid,\n                name: item.name,\n                local_name: item.local_name,\n                number: item.number,\n                is_taxable: item.is_taxable,\n                banhjiAccCode: item.banhjiAccCode,\n                group_code: item.group_code,\n                parent_account: item.parent_account,\n                type_code: item.type_code,\n                account_type: item.account_type\n              }\n            })\n            if (this.accWPIs.length > 0) {\n              this.accWPI = this.accWPIs[0]\n            }\n          })\n        }, 10);\n      })\n    },\n    async initData() {\n      const po = this.$route.params.productionOrder\n      const id = this.$route.params.id\n      if (id !== '' && po === undefined) {\n        await productionOrderHandler.getById(id).then(res => {\n          this.productionOrder = res\n          this.otherFinishProducts = this.productionOrder ? this.productionOrder.otherFinishProduct : []\n          this.componentUseds = this.productionOrder ? this.productionOrder.componentUsed : []\n          this.otherCosts = this.productionOrder ? this.productionOrder.otherCost : []\n          if (this.productionOrder.yieldUOM) {\n            this.uom = this.productionOrder.yieldUOM.name || ''\n          }\n\n          // window.console.log(res, this.otherCosts, this.otherFinishProducts, this.componentUseds, 'load po')\n        })\n      } else if (po !== undefined) {\n        this.productionOrder = po\n        this.otherFinishProducts = this.productionOrder ? this.productionOrder.otherFinishProduct : []\n        this.componentUseds = this.productionOrder ? this.productionOrder.componentUsed : []\n        this.otherCosts = this.productionOrder ? this.productionOrder.otherCost : []\n        if (this.productionOrder.yieldUOM) {\n          this.uom = this.productionOrder.yieldUOM.name || ''\n        }\n        // window.console.log(this.productionOrder, this.otherCosts, this.otherFinishProducts, this.componentUseds, 'data po')\n      } else {\n        this.clear()\n      }\n    },\n    savePrint() {\n\n    },\n    saveNew() {\n\n    },\n    clear() {\n      this.productionOrder = {}\n      this.production = production\n      this.otherFinishProducts = []\n      this.componentUseds = []\n      this.uom = ''\n      this.otherCosts = []\n    },\n    async loadPrefix() {\n      new Promise(resolve => {\n        setTimeout(async () => {\n          resolve('resolved');\n          await prefixHandler.get('production').then(async res => {\n            if (res.data.statusCode === 200) {\n              this.showLoading = false\n              this.transactionTypes = res.data.data\n              if (this.transactionTypes.length > 0) {\n                this.production.transactionType = this.transactionTypes[0]\n                // if (this.$route.params.id === undefined) {\n                await this.generateNumber()\n                // }\n              }\n            }\n\n          })\n        }, 10);\n      })\n    },\n    async generateNumber() {\n\n      let data = {\n        abbr: this.production.transactionType.abbr,\n        structure: this.production.transactionType.structure,\n        transactionDate: this.production.transactionDate,\n        sequcencing: this.production.transactionType.sequcencing,\n        type: 'Production',\n        entity: 2\n      }\n      this.production.abbr = data.abbr\n      // window.console.log('data.abbr', data.abbr)\n      this.production.structure = data.structure\n      this.production.sequcencing = data.sequcencing\n      this.production.transactionDate = data.transactionDate\n      this.production.type = data.type\n      await billingHandler.lastNumber(data).then(response => {\n        if (response.data.statusCode === 200) {\n          const res = response.data.data\n          const lastNumber = this.zeroPad(parseInt(res.lastNumber), this.production.transactionType.format)\n          this.production.number = res.suffix + this.production.transactionType.numberSeparator + lastNumber\n          this.production.abbr = res.abbr\n          this.production.lastNumber = res.suffix + lastNumber\n          // window.console.log(this.production.number, 'production')\n        }\n      }).catch(e => {\n        this.errors.push(e)\n      })\n    },\n    zeroPad(num, places) {\n      return String(num).padStart(places, '0')\n    },\n    async saveClose() {\n      this.production.productionNo = ''//'PD-' + this.production.productionNo\n      // this.production.accWPI = this.accWPI\n      this.production.bom = this.productionOrder.bom\n      this.production.productionOrder = this.productionOrder\n      this.production.product = this.productionOrder.product\n      this.production.qty = this.productionOrder.qty\n      this.production.uom = this.productionOrder.yieldUOM\n      this.production.amount = this.productionOrder.amount\n      this.production.exchangeAmount = this.productionOrder.exchangeAmount\n      this.production.variance = this.productionOrder.variance\n      this.production.startedAt = this.productionOrder.startedAt\n      this.production.status = 1\n      // this.production.actionType = 'new'\n      // this.production.jRaw = this.jRaw\n      this.productionOrder.jRaw = this.jRaw\n      this.productionOrder.status = 2\n\n      this.productionOrder.type = 'Production Order'\n      // this.productionOrder.startedAt = this.production.transactionDate\n      this.productionOrder.actionType = 'new'\n      this.productionOrder.account = this.accWPI\n      //todo: create Raw production\n      this.showLoading = true\n      await productionHandler.create(this.production).then(res => {\n        window.console.log(res)\n      })\n      //todo: update production order / inventory / Journal\n      await productionOrderHandler.create(this.productionOrder).then(res => {\n        window.console.log(res)\n        this.dialogM = false\n        this.initData()\n      })\n      this.showLoading = false\n    },\n    removeRow() {\n    },\n    errorMessage() {\n\n    },\n    addRow() {\n    },\n    accountDropDownEditor() {\n    },\n    cancel() {\n\n    },\n    numberFormat(value) {\n      return kendo.toString(value, `n${this.decimalFormat}`)\n    },\n    hideSmallSideBar() {\n      this.isHideBar = !this.isHideBar;\n    }\n  },\n  watch: {\n    'id': 'initData'\n    // call again the method if the route changes\n\n  },\n  async created() {\n    await this.loadPrefix()\n    await this.loadAccount()\n  },\n  async mounted() {\n    this.production.transactionDate = new Date().toISOString().substr(0, 10)\n    await this.initData()\n  },\n};\n</script>\n\n<style scoped>\n.function_wrapper {\n  box-shadow: none !important;\n}\n\n.custom_grid table th:last-child {\n  text-align: right !important;\n}\n\n.color_green {\n  color: #03b154;\n}\n\n@media (min-width: 1264px) {\n  .container {\n    max-width: 1250px;\n  }\n}\n\n@media (max-width: 576px) {\n  .pt-6.col-sm-5.col-12 {\n    padding-top: 0 !important;\n  }\n\n  .code_text {\n    width: 100%;\n  }\n\n  .phone_no_pt {\n    padding-top: 0 !important;\n  }\n\n  .select_template,\n  .save_option {\n    margin-bottom: 10px;\n  }\n}\n\n.hide_small_bar_class {\n  max-width: 0;\n  transition: .5s ease-in;\n  flex: 0 0 0;\n  padding: 0;\n}\n\n.hide_big_bar_class {\n  max-width: 100%;\n  transition: .5s ease-in;\n  flex: 0 0 100%;\n}\n\n.info_add {\n  background-color: #ffffff;\n}\n\n.small_sidebar {\n  height: 97%;\n  position: relative;\n  padding: 12px;\n  background-color: #EDF1F5;\n}\n\n.iconArrow {\n  right: -35px;\n  position: absolute;\n  bottom: -10px;\n}\n\n.iconArrowHide {\n  position: absolute;\n  right: -7px;\n  bottom: -10px;\n}\n\n.color_grey {\n  color: #808080;\n}\n\n.card_green {\n  min-height: 70px;\n  background-color: #00b050 !important;\n  color: #ffffff;\n}\n\n.lb_bold {\n  font-size: 12px;\n}\n\n.detial_smallside_p {\n  position: absolute;\n  bottom: 10px;\n}\n\n.card_background {\n  background-color: #EDF1F5;\n  min-height: 120px;\n}\n\n.deposite_input {\n  width: 100px;\n}\n\n.btn_save_draft {\n  color: #ffffff;\n  background-color: #00b0f0 !important;\n  text-transform: capitalize;\n}\n\n.save_option {\n  background-color: #203864 !important;\n}\n\n.btn_add_small {\n  height: 27px !important;\n  min-width: 25px !important;\n  font-size: 10px;\n  padding: 0 22px !important;\n  background-color: #00b050 !important;\n  color: #ffffff;\n  border-radius: 0 !important;\n}\n\n.list_site_inv {\n  background-color: #92d050;\n  color: #ffffff;\n  font-size: 12px;\n}\n\n.list_site_exp {\n  background-color: #c5e0b4;\n  color: #000000;\n  font-size: 12px;\n  line-height: 16px;\n  min-height: 40px;\n}\n\n.checkbox_inv {\n  padding: 2px;\n  margin-top: 3px;\n  margin-right: 2px;\n}\n\n.exp_select {\n  font-size: 12px !important;\n}\n\n.border_radius10 {\n  border-radius: 10px !important;\n  background-color: #F2F2F2;\n}\n\n</style>\n"]}]}
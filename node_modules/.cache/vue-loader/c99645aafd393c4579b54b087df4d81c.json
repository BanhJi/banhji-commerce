{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/payroll/employee/Attachments.vue?vue&type=style&index=0&id=6a5844f3&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/payroll/employee/Attachments.vue","mtime":1638499443250},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmgyIHsKICBmb250LXNpemU6IDI1cHg7Cn0K"},{"version":3,"sources":["Attachments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoPA;AACA;AACA","file":"Attachments.vue","sourceRoot":"src/views/payroll/employee","sourcesContent":["<template>\n\t<v-row>\n\t\t<v-col sm=\"12\" cols=\"12\" class=\"grayBg px-3\">\n\t\t\t<v-card color=\"white\" class=\"pa-3 no_border\" elevation=\"0\">\n\t\t\t\t<v-row class=\"\">\n\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t<p class=\"mb-2\">{{ $t(\"file_type\") }} [PDF, JPG, JPEG, TIFF, PNG, GIF] - 5MB</p>\n\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t<v-file-input\n\t\t\t\t\t\t\t\tv-model=\"files\"\n\t\t\t\t\t\t\t\t@change=\"onFileChange\"\n\t\t\t\t\t\t\t\taccept=\"image/jpg, image/jpeg, application/pdf\"\n\t\t\t\t\t\t\t\t:placeholder=\"$t('attachments')\"\n\t\t\t\t\t\t\t\tsingle\n\t\t\t\t\t\t\t\tprepend-icon=\"mdi-paperclip\">\n\t\t\t\t\t\t\t\t<template v-slot:selection=\"{ text }\">\n\t\t\t\t\t\t\t\t\t<v-chip small label color=\"primary\">{{ text }}</v-chip>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</v-file-input>\n\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\tv-model=\"fileDesc\"\n\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t:placeholder=\"$t('description')\"\n\t\t\t\t\t\t\t\tclearable/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tclass=\"text-capitalize white--text\"\n\t\t\t\t\t\t\t@click=\"uploadFile\"\n\t\t\t\t\t\t\t:disabled=\"btnEnabled\">\n\t\t\t\t\t\t\t<v-icon size=\"15\" class=\"mr-2\">fa-check</v-icon>{{ $t(\"upload\") }}\n\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t<LoadingMe\n\t\t\t\t\t\t\t\t:isLoading=\"showLoadingAtch\"\n\t\t\t\t\t\t\t\t:fullPage=\"false\"\n\t\t\t\t\t\t\t\ttype=\"loading\"\n\t\t\t\t\t\t\t\t:myLoading=\"true\"/>\n\t\t\t\t\t\t\t<kendo-datasource ref=\"attachmentDS\" :data=\"attachmentList\" />\n\t\t\t\t\t\t\t<kendo-grid\n\t\t\t\t\t\t\t\tid=\"gridAttachment\"\n\t\t\t\t\t\t\t\tclass=\"grid-function\"\n\t\t\t\t\t\t\t\t:data-source-ref=\"'attachmentDS'\"\n\t\t\t\t\t\t\t\t:editable=\"false\"\n\t\t\t\t\t\t\t\t:scrollable-virtual=\"true\">\n\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t:field=\"''\"\n\t\t\t\t\t\t\t\t\t:title=\"$t('open')\"\n\t\t\t\t\t\t\t\t\t:width=\"70\"\n\t\t\t\t\t\t\t\t\t:template=\"fileUrl\"\n\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: center' }\"\n\t\t\t\t\t\t\t\t\t:headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t:field=\"'fileName'\"\n\t\t\t\t\t\t\t\t\t:title=\"$t('file_name')\"\n\t\t\t\t\t\t\t\t\t:width=\"250\"\n\t\t\t\t\t\t\t\t\t:headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t:field=\"'description'\"\n\t\t\t\t\t\t\t\t\t:title=\"$t('description')\"\n\t\t\t\t\t\t\t\t\t:width=\"250\"\n\t\t\t\t\t\t\t\t\t:headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t:field=\"'fileType'\"\n\t\t\t\t\t\t\t\t\t:title=\"$t('file_type')\"\n\t\t\t\t\t\t\t\t\t:width=\"150\"\n\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5, color: green !important',\n\t\t\t\t\t\t\t\t\t}\"/>\n\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t:field=\"'size'\"\n\t\t\t\t\t\t\t\t\t:title=\"$t('size')\"\n\t\t\t\t\t\t\t\t\t:width=\"150\"\n\t\t\t\t\t\t\t\t\t:template=\"byteToMB\"\n\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5, color: green !important',\n\t\t\t\t\t\t\t\t\t}\"/>\n\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t:field=\"'createdAt'\"\n\t\t\t\t\t\t\t\t\t:title=\"$t('date')\"\n\t\t\t\t\t\t\t\t\t:width=\"120\"\n\t\t\t\t\t\t\t\t\t:template=\"'<span>#= kendo.toString(new Date(createdAt), dateFormat)#</span>'\"\n\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5, color: green !important',\n\t\t\t\t\t\t\t\t\t}\"/>\n\t\t\t\t\t\t\t</kendo-grid>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</v-col>\n\t\t\t\t</v-row>\n\t\t\t</v-card>\n\t\t</v-col>\n\t</v-row>\n</template>\n<script>\n\tconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\n\texport default {\n\t\tname: \"\",\n\t\tprops: {\n\t\t\temployee: {},\n\t\t},\n\t\tcomponents: {\n\t\t\tLoadingMe: () => import(`@/components/Loading`),\n\t\t},\n\t\tcomputed: {\n\t\t\tbtnEnabled() {\n\t\t\t\tif (this.employee) {\n\t\t\t\t\treturn !this.employee.id;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tdata: () => ({\n\t\t\tshowLoadingAtch: false,\n\t\t\tattachmentList: [],\n\t\t\tfiles: [],\n\t\t\tfileDesc: \"\",\n\t\t}),\n\t\tmethods: {\n\t\t\tasync uploadFile() {\n\t\t\t\tnew Promise((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve(\"resolved\");\n\t\t\t\t\t\tif (this.imgFile) {\n\t\t\t\t\t\t\tconst id = this.employee.id || \"\";\n\t\t\t\t\t\t\tconst name = this.employee.name || \"\";\n\t\t\t\t\t\t\tlet data = {\n\t\t\t\t\t\t\t\tfile: this.imgFile,\n\t\t\t\t\t\t\t\tinfo: {\n\t\t\t\t\t\t\t\t\tname: this.fileName,\n\t\t\t\t\t\t\t\t\tdescription: this.fileDesc,\n\t\t\t\t\t\t\t\t\tsize: this.fileSize,\n\t\t\t\t\t\t\t\t\ttype: this.fileType,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: \"Contact\",\n\t\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\t\t\tbillingHandler.attachment(data).then((res) => {\n\t\t\t\t\t\t\t\tif (res.data.statusCode === 201) {\n\t\t\t\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t\t\t\t\tthis.imgFile = null;\n\t\t\t\t\t\t\t\t\tthis.src = \"\";\n\t\t\t\t\t\t\t\t\tthis.fileDesc = \"\";\n\t\t\t\t\t\t\t\t\tthis.fileName = \"\";\n\t\t\t\t\t\t\t\t\tthis.fileSize = 0;\n\t\t\t\t\t\t\t\t\tthis.fileType = \"\";\n\t\t\t\t\t\t\t\t\tthis.$snotify.success(\"Success\");\n\t\t\t\t\t\t\t\t\tthis.loadAttachment();\n\t\t\t\t\t\t\t\t\t// this.txnList = JSON.parse(JSON.stringify(res.data.data))\n\t\t\t\t\t\t\t\t\t// window.console.log('transactions', this.txnList)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t\t\tthis.$snotify.error(\"Please browse to upload image\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonFileChange(e) {\n\t\t\t\tif (e) {\n\t\t\t\t\tthis.fileDesc = e.name;\n\t\t\t\t\tthis.fileName = e.name;\n\t\t\t\t\tthis.fileSize = e.size;\n\t\t\t\t\tthis.fileType = e.type;\n\t\t\t\t\tlet input = this.files;\n\t\t\t\t\t// Ensure that you have a file before attempting to read it\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\tlet reader = new FileReader();\n\t\t\t\t\t\t// Define a callback function to run, when FileReader finishes its job\n\t\t\t\t\t\treader.onloadend = (e) => {\n\t\t\t\t\t\t\t// Note: arrow function used here, so that \"this.imageData\" refers to the imageData of Vue component\n\t\t\t\t\t\t\t// Read image as base64 and set to imageData\n\t\t\t\t\t\t\tthis.imgFile = e.target.result;\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// Start the reader job - read file as a data url (base64 format)\n\t\t\t\t\t\treader.readAsBinaryString(input);\n\t\t\t\t\t\tthis.src = URL.createObjectURL(input);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync loadAttachment() {\n\t\t\t\tnew Promise((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve(\"resolved\");\n\t\t\t\t\t\tthis.showLoadingAtch = true;\n\t\t\t\t\t\tconst strFilter = \"?id=\" + this.employee.id;\n\t\t\t\t\t\tbillingHandler.attachmentList(strFilter).then((res) => {\n\t\t\t\t\t\t\tif (res.data.statusCode === 200) {\n\t\t\t\t\t\t\t\tthis.showLoadingAtch = false;\n\t\t\t\t\t\t\t\tthis.attachmentList = res.data.data;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\t\t\t},\n\t\t\tfileUrl(dataItem) {\n\t\t\t\tif (dataItem.fileUrl) {\n\t\t\t\t\treturn `<a target=\"_blank\" style=\"color:#ED1A3A !important\" href=\"${dataItem.fileUrl}\"><span>Open</span></a>`;\n\t\t\t\t}\n\t\t\t\treturn ``;\n\t\t\t},\n\t\t\tbyteToMB(dataItem) {\n\t\t\t\tconst FileSize = dataItem.size || 0; // in MiB\n\t\t\t\tconst marker = 1024; // Change to 1000 if required\n\t\t\t\tconst decimal = 3; // Change as required\n\t\t\t\tconst kiloBytes = marker; // One Kilobyte is 1024 bytes\n\t\t\t\tconst megaBytes = marker * marker; // One MB is 1024 KB\n\t\t\t\tconst gigaBytes = marker * marker * marker; // One GB is 1024 MB\n\t\t\t\t// const teraBytes = marker * marker * marker * marker; // One TB is 1024 GB\n\t\t\t\t// return bytes if less than a KB\n\t\t\t\tif (FileSize < kiloBytes) {\n\t\t\t\t\treturn FileSize + \" Bytes\";\n\t\t\t\t}\n\t\t\t\t// return KB if less than a MB\n\t\t\t\telse if (FileSize < megaBytes) {\n\t\t\t\t\treturn (FileSize / kiloBytes).toFixed(decimal) + \" KB\";\n\t\t\t\t}\n\t\t\t\t// return MB if less than a GB\n\t\t\t\telse if (FileSize < gigaBytes) {\n\t\t\t\t\treturn (FileSize / megaBytes).toFixed(decimal) + \" MB\";\n\t\t\t\t}\n\t\t\t\t// return GB if less than a TB\n\t\t\t\telse {\n\t\t\t\t\treturn (FileSize / gigaBytes).toFixed(decimal) + \" GB\";\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tmounted: async function() {\n\t\t\tawait this.loadAttachment();\n\t\t},\n\t\twatch: {\n\t\t\temployee() {\n\t\t\t\tif (this.employee !== undefined) {\n\t\t\t\t\tthis.loadAttachment();\n\t\t\t\t}\n\t\t\t},\n\t\t\t$route: \"callback\",\n\t\t},\n\t};\n</script>\n<style scoped>\nh2 {\n  font-size: 25px;\n}\n</style>\n"]}]}
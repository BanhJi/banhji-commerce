{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/production/production_orders/ProductionOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/products/production/production_orders/ProductionOrder.vue","mtime":1638499443285},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBEYXRlUGlja2VyQ29tcG9uZW50IGZyb20gIkAvY29tcG9uZW50cy9jdXN0b21fdGVtcGxhdGVzL0RhdGVQaWNrZXJDb21wb25lbnQiOwovLyBpbXBvcnQgeyBEcm9wRG93bkxpc3QgfSBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdnVlLWRyb3Bkb3ducyI7CmltcG9ydCBQcm9kdWN0aW9uT3JkZXIgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1Byb2R1Y3Rpb25PcmRlciI7CmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgeyBTaG93UmVzb3VyY2UgfSBmcm9tICJAL29ic2VydmFibGUvc3RvcmUiOwppbXBvcnQgQm9tTW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL0JvbSI7Ci8vIGltcG9ydCB7dXVpZH0gZnJvbSAidnVlLXV1aWQiOwoKY29uc3QgcHJvZHVjdFZhcmlhbnRIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2R1Y3RWYXJpYW50SGFuZGxlciIpOwpjb25zdCB3YXJlaG91c2VIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3dhcmVob3VzZUhhbmRsZXIiKTsKY29uc3QgYm9tSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9ib21IYW5kbGVyIik7CmNvbnN0IHNldHRpbmdzSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9zZXR0aW5nc0hhbmRsZXIiKTsKY29uc3Qgc2FsZUNoYW5uZWxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3NhbGVDaGFubmVsSGFuZGxlciIpOwpjb25zdCBsb2NhdGlvbkhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvbG9jYXRpb25IYW5kbGVyIik7CmNvbnN0IHByb2plY3RIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2plY3RIYW5kbGVyIik7CmNvbnN0IHByZWZpeEhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvcHJlZml4SGFuZGxlciIpOwpjb25zdCBiaWxsaW5nSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9pbnZvaWNlL2hhbmRsZXIvYmlsbGluZ0hhbmRsZXIiKTsKY29uc3QgcHJvZHVjdGlvbk9yZGVySGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9wcm9kdWN0aW9uT3JkZXJIYW5kbGVyIik7CmNvbnN0IGtleUZpZWxkID0gImlkIjsKY29uc3QgdGV4dEZpZWxkID0gIm5hbWUiOwpjb25zdCBlbXB0eUl0ZW0gPSB7IFt0ZXh0RmllbGRdOiAibG9hZGluZyAuLi4iIH07CmNvbnN0IGJvbU1vZGVsID0gbmV3IEJvbU1vZGVsKHt9KTsKLy8gY29uc3QgJCA9IHJlcXVpcmUoImpxdWVyeSIpCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZHVjdGlvbk9yZGVyIiwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKSwKICAgIC8vICJhcHAtZGF0ZXBpY2tlciI6IERhdGVQaWNrZXJDb21wb25lbnQsCiAgICAvLyBkcm9wZG93bmxpc3Q6IERyb3BEb3duTGlzdCwKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBpc0VkaXQ6IGZhbHNlLAogICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgbG9hZGluZ0FsZXJ0OiBmYWxzZSwKICAgIGFsZXJ0OiBmYWxzZSwKICAgIHZhbGlkOiB0cnVlLAogICAgdGVtcGxhdGVzOiBbCiAgICAgIHsgdGl0bGU6ICJEcmFmdCIgfSwKICAgICAgeyB0aXRsZTogIk9wZW4iIH0sCiAgICAgIHsgdGl0bGU6ICJQYWlkIiB9LAogICAgICB7IHRpdGxlOiAiUGFydGlhbGx5IFBhaWQiIH0sCiAgICBdLAogICAgaXNIaWRlQmFyOiBmYWxzZSwKICAgIHByb2R1Y3RCYXNlVXJsOiBwcm9kdWN0VmFyaWFudEhhbmRsZXIuaXRlbVNlYXJjaFVSTCgpLAogICAgcHJvZHVjdExpc3Q6IFtdLAogICAgZGF0YUl0ZW1LZXk6ICJpZCIsCiAgICB0ZXh0RmllbGQ6ICJuYW1lIiwKICAgIGRlZmF1bHRJdGVtOiB7IFt0ZXh0RmllbGRdOiAiU2VsZWN0IHByb2R1Y3QuLi4iLCBba2V5RmllbGRdOiBudWxsIH0sCiAgICByZXF1ZXN0U3RhcnRlZDogZmFsc2UsCiAgICBwcm9kdWN0aW9uT3JkZXI6IG5ldyBQcm9kdWN0aW9uT3JkZXIoe30pLAogICAgYm9tOiBib21Nb2RlbCwKICAgIHByb2plY3RzOiBbXSwKICAgIGJvbXM6IFtdLAogICAgYm9tU2VsZXRlZDoge30sCiAgICB5aWVsZFVvbXM6IFtdLAogICAgd2FyZWhvdXNlczogW10sCiAgICB3YXJlaG91c2U6IHt9LAogICAgc2VnbWVudHM6IFtdLAogICAgc2FsZUNoYW5uZWxMaXN0OiBbXSwKICAgIGxvY2F0aW9uczogW10sCiAgICB0cmFuc2FjdGlvblR5cGVzOiBbXSwKICAgIHVvbTogIiIsCiAgICB0cmFuc2FjdGlvbk5vdGU6ICIiLAogICAgY29tcG9uZW50VXNlZERhdGE6IFtdLAogICAgb3RoZXJGaW5pc2hQcm9kdWN0RGF0YTogW10sCiAgICB0b3RhbENvc3Q6IDAsCiAgICB2YXJpYW5jZTogMCwKICAgIGRlY2ltYWxGb3JtYXQ6IDIsCiAgfSksCiAgbWV0aG9kczogewogICAgbnVtYmVyRm9ybWF0KHZhbHVlKSB7CiAgICAgIHJldHVybiBrZW5kby50b1N0cmluZyh2YWx1ZSwgYG4ke3RoaXMuZGVjaW1hbEZvcm1hdH1gKTsKICAgIH0sCiAgICBpdGVtVGVtcGxhdGUoZGF0YUl0ZW0pIHsKICAgICAgY29uc3QgaXRlbSA9IGRhdGFJdGVtLml0ZW07CiAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGA8c3Bhbj4ke2l0ZW0ubmFtZSA/IGl0ZW0ubmFtZSA6IGBgfTwvc3Bhbj5gOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBgYDsKICAgICAgfQogICAgfSwKICAgIFVPTVRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIGNvbnN0IHVvbSA9IGRhdGFJdGVtLmJ1b207CiAgICAgIGlmICh1b20pIHsKICAgICAgICByZXR1cm4gYDxzcGFuPiR7dW9tLm5hbWUgPyB1b20ubmFtZSA6IGBgfTwvc3Bhbj5gOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBgYDsKICAgICAgfQogICAgfSwKICAgIEhlbHAoa2V5X3NlYXJjaCkgewogICAgICBTaG93UmVzb3VyY2Uoa2V5X3NlYXJjaCk7CiAgICB9LAogICAgb25DaGFuZ2VRdHkoKSB7CiAgICAgIGNvbnN0IHByb2R1Y2VRdHkgPSB0aGlzLnByb2R1Y3Rpb25PcmRlci5xdHk7CiAgICAgIGxldCBmcEFtb3VudCA9IDA7CiAgICAgIGNvbnN0IGZpbmlzaFByb2R1Y3QgPSB0aGlzLmJvbVNlbGV0ZWQuZmluaXNoUHJvZHVjdCB8fCBbXTsKICAgICAgZmluaXNoUHJvZHVjdC5tYXAoKG4pID0+IHsKICAgICAgICBpZiAoIW4uaGFzT3duUHJvcGVydHkoImRlY2ltYWxGb3JtYXQiKSkgewogICAgICAgICAgblsiZGVjaW1hbEZvcm1hdCJdID0gIm4yIjsKICAgICAgICB9CiAgICAgICAgY29uc3QgeVF0eSA9IG4ueWllbGRRdHkgKiBrZW5kby5wYXJzZUZsb2F0KHByb2R1Y2VRdHkpOwogICAgICAgIGNvbnN0IGlDb3N0ID0gbi5jb3N0OwogICAgICAgIGNvbnN0IGFtb3VudCA9IGlDb3N0ICogeVF0eTsKICAgICAgICBuWyJ5aWVsZFF0eSJdID0geVF0eTsKICAgICAgICBuWyJhbW91bnQiXSA9IGFtb3VudDsKICAgICAgICBmcEFtb3VudCArPSBhbW91bnQ7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLm4sCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLmZpbmlzaFByb2R1Y3QgPSBmaW5pc2hQcm9kdWN0OwogICAgICBjb25zdCBjb21wb25lbnRVc2VBbXQgPSB0aGlzLmFkZEdyaWRDb21wb25lbnRVc2VkKAogICAgICAgIHRoaXMuYm9tU2VsZXRlZC5jb21wb25lbnRVc2VkLAogICAgICAgIHByb2R1Y2VRdHkKICAgICAgKTsKICAgICAgY29uc3Qgb3RoZXJGaW5pc2hQcm9kdWN0VXNlQW10ID0gdGhpcy5hZGRHcmlkT3RoZXJQcm9kdWN0KAogICAgICAgIHRoaXMuYm9tU2VsZXRlZC5vdGhlckZpbmlzaFByb2R1Y3QsCiAgICAgICAgcHJvZHVjZVF0eQogICAgICApOwoKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuYW1vdW50ID0gY29tcG9uZW50VXNlQW10OwogICAgICB0aGlzLnRvdGFsQ29zdCA9IGNvbXBvbmVudFVzZUFtdDsKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuZXhjaGFuZ2VBbW91bnQgPSBjb21wb25lbnRVc2VBbXQ7CiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnZhcmlhbmNlID0KICAgICAgICBmcEFtb3VudCArIG90aGVyRmluaXNoUHJvZHVjdFVzZUFtdCAtIGNvbXBvbmVudFVzZUFtdDsKICAgICAgdGhpcy52YXJpbmNlID0gZnBBbW91bnQgKyBvdGhlckZpbmlzaFByb2R1Y3RVc2VBbXQgLSBjb21wb25lbnRVc2VBbXQ7CiAgICAgIC8vIHRoaXMuY2FsY3VsYXRlVmFyaWFuY2UoZnBBbW91bnQpCiAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhwcm9kdWNlUXR5LCAnY2hhbmdlIHF0eScpCiAgICB9LAogICAgYXN5bmMgb25DaGFuZ2VCb20oZSkgewogICAgICB0aGlzLmJvbVNlbGV0ZWQgPSBlOwogICAgICAvLyB0aGlzLnByb2R1Y3Rpb25PcmRlciA9IGUKICAgICAgdGhpcy50cmFuc2FjdGlvbk5vdGUgPSB0aGlzLmJvbVNlbGV0ZWQudHJhbnNhY3Rpb25Ob3RlOwogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci53YXJlaG91c2UgPSB0aGlzLmJvbVNlbGV0ZWQud2FyZWhvdXNlOwogICAgICBjb25zdCBvdGhlckZpbmlzaFByb2R1Y3QgPSB0aGlzLmJvbVNlbGV0ZWQub3RoZXJGaW5pc2hQcm9kdWN0IHx8IFtdOwogICAgICBvdGhlckZpbmlzaFByb2R1Y3QubWFwKChuKSA9PiB7CiAgICAgICAgaWYgKCFuLmhhc093blByb3BlcnR5KCJkZWNpbWFsRm9ybWF0IikpIHsKICAgICAgICAgIG5bImRlY2ltYWxGb3JtYXQiXSA9ICJuMiI7CiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5uLAogICAgICAgIH07CiAgICAgIH0pOwogICAgICB0aGlzLm90aGVyRmluaXNoUHJvZHVjdERhdGEgPSBvdGhlckZpbmlzaFByb2R1Y3Q7CiAgICAgIGNvbnN0IGNvbXBvbmVudFVzZWQgPSB0aGlzLmJvbVNlbGV0ZWQuY29tcG9uZW50VXNlZCB8fCBbXTsKICAgICAgY29tcG9uZW50VXNlZC5tYXAoKG4pID0+IHsKICAgICAgICBpZiAoIW4uaGFzT3duUHJvcGVydHkoImRlY2ltYWxGb3JtYXQiKSkgewogICAgICAgICAgblsiZGVjaW1hbEZvcm1hdCJdID0gIm4yIjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLm4sCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHRoaXMuY29tcG9uZW50VXNlZERhdGEgPSBjb21wb25lbnRVc2VkOwogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5xdHkgPSAxOwogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci55aWVsZFVPTSA9IGUuZmluaXNoUHJvZHVjdFswXS5idW9tIHx8IHt9OwogICAgICBjb25zdCB5aWVsZFVPTSA9IHRoaXMucHJvZHVjdGlvbk9yZGVyLnlpZWxkVU9NOwogICAgICBpZiAoeWllbGRVT00uaGFzT3duUHJvcGVydHkoIm5hbWUiKSkgewogICAgICAgIHRoaXMudW9tID0gdGhpcy5wcm9kdWN0aW9uT3JkZXIueWllbGRVT00ubmFtZTsKICAgICAgfQogICAgICB0aGlzLnRvdGFsQ29zdCA9IHRoaXMuYm9tU2VsZXRlZC5hbW91bnQ7CiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLmFtb3VudCA9IHRoaXMuYm9tU2VsZXRlZC5hbW91bnQ7CiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLmV4Y2hhbmdlQW1vdW50ID0gdGhpcy5ib21TZWxldGVkLmFtb3VudDsKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIudmFyaWFuY2UgPSB0aGlzLmJvbVNlbGV0ZWQudmFyaWFuY2U7CiAgICAgIHRoaXMudmFyaWFuY2UgPSB0aGlzLmJvbVNlbGV0ZWQudmFyaWFuY2U7CiAgICB9LAogICAgYWRkR3JpZENvbXBvbmVudFVzZWQoZGF0YSwgcHJvZHVjZVF0eSkgewogICAgICB0cnkgewogICAgICAgIGxldCB0b3RhbENvc3RfID0gMDsKICAgICAgICB0aGlzLmNvbXBvbmVudFVzZWREYXRhID0gZGF0YSB8fCBbXTsKICAgICAgICBrZW5kbwogICAgICAgICAgLmpRdWVyeSgiI2NvbXBvbmVudFVzZSIpCiAgICAgICAgICAuZGF0YSgia2VuZG9HcmlkIikKICAgICAgICAgIC5kYXRhU291cmNlLmRhdGEoW10pOwogICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuY29tcG9uZW50VXNlRFMua2VuZG9XaWRnZXQoKTsKICAgICAgICB0aGlzLmNvbXBvbmVudFVzZWREYXRhLmZvckVhY2goKGl0bSwgaW5kZXgpID0+IHsKICAgICAgICAgIGNvbnN0IHlRdHkgPSBpdG0ucXR5ICoga2VuZG8ucGFyc2VGbG9hdChwcm9kdWNlUXR5KTsKICAgICAgICAgIGNvbnN0IGlDb3N0ID0gaXRtLmNvc3Q7CiAgICAgICAgICBjb25zdCBhbW91bnQgPSBpQ29zdCAqIHlRdHk7CiAgICAgICAgICB0b3RhbENvc3RfICs9IGFtb3VudDsKICAgICAgICAgIGRzLmluc2VydChpbmRleCArIDEsIHsKICAgICAgICAgICAgaWQ6IGl0bS5pZCwKICAgICAgICAgICAgaXRlbTogaXRtLml0ZW0sCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdG0uZGVzY3JpcHRpb24sCiAgICAgICAgICAgIGJ1b206IGl0bS5idW9tIHx8IHt9LAogICAgICAgICAgICB1b206IGl0bS51b20sCiAgICAgICAgICAgIHF0eTogeVF0eSwKICAgICAgICAgICAgY29zdDogaUNvc3QsCiAgICAgICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgICAgICBza3U6IGl0bS5za3UsCiAgICAgICAgICAgIGRlY2ltYWxGb3JtYXQ6IGl0bS5kZWNpbWFsRm9ybWF0LAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy50b3RhbENvc3QgPSB0b3RhbENvc3RfOwogICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLmFtb3VudCA9IHRvdGFsQ29zdF87CiAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuZXhjaGFuZ2VBbW91bnQgPSB0b3RhbENvc3RfOwogICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLmNvbXBvbmVudFVzZWQgPSBkcy5kYXRhKCkubWFwKChpdG0pID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBpdG0uaWQsCiAgICAgICAgICAgIGl0ZW06IGl0bS5pdGVtLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogaXRtLmRlc2NyaXB0aW9uLAogICAgICAgICAgICBidW9tOiBpdG0uYnVvbSB8fCB7fSwKICAgICAgICAgICAgdW9tOiBpdG0udW9tLAogICAgICAgICAgICBxdHk6IGl0bS5xdHksCiAgICAgICAgICAgIGNvc3Q6IGl0bS5jb3N0LAogICAgICAgICAgICBhbW91bnQ6IGl0bS5hbW91bnQsCiAgICAgICAgICAgIHNrdTogaXRtLnNrdSwKICAgICAgICAgICAgZGVjaW1hbEZvcm1hdDogaXRtLmRlY2ltYWxGb3JtYXQsCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0b3RhbENvc3RfOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJlcnJvciIsIGUpOwogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9LAogICAgYWRkR3JpZE90aGVyUHJvZHVjdChkYXRhLCBwcm9kdWNlUXR5KSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IG9GcEFtb3VudCA9IDA7CiAgICAgICAgdGhpcy5vdGhlckZpbmlzaFByb2R1Y3REYXRhID0gZGF0YSB8fCBbXTsKICAgICAgICBrZW5kbwogICAgICAgICAgLmpRdWVyeSgiI290aGVyRmluaXNoUHJvZHVjdCIpCiAgICAgICAgICAuZGF0YSgia2VuZG9HcmlkIikKICAgICAgICAgIC5kYXRhU291cmNlLmRhdGEoW10pOwogICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMub3RoZXJQcm9kdWN0RFMua2VuZG9XaWRnZXQoKTsKICAgICAgICB0aGlzLm90aGVyRmluaXNoUHJvZHVjdERhdGEuZm9yRWFjaCgoaXRtLCBpbmRleCkgPT4gewogICAgICAgICAgY29uc3QgeVF0eSA9IGl0bS55aWVsZFF0eSAqIGtlbmRvLnBhcnNlRmxvYXQocHJvZHVjZVF0eSk7CiAgICAgICAgICBjb25zdCBpQ29zdCA9IGl0bS5jb3N0OwogICAgICAgICAgY29uc3QgYW1vdW50ID0gaUNvc3QgKiB5UXR5OwogICAgICAgICAgb0ZwQW1vdW50ICs9IGFtb3VudDsKICAgICAgICAgIGRzLmluc2VydChpbmRleCArIDEsIHsKICAgICAgICAgICAgaWQ6IGl0bS5pZCwKICAgICAgICAgICAgaXRlbTogaXRtLml0ZW0sCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdG0uZGVzY3JpcHRpb24sCiAgICAgICAgICAgIGJ1b206IGl0bS5idW9tIHx8IHt9LAogICAgICAgICAgICB1b206IGl0bS51b20sCiAgICAgICAgICAgIHlpZWxkUXR5OiB5UXR5LAogICAgICAgICAgICBjb3N0OiBpQ29zdCwKICAgICAgICAgICAgYW1vdW50OiBhbW91bnQsCiAgICAgICAgICAgIHNrdTogaXRtLnNrdSwKICAgICAgICAgICAgZGVjaW1hbEZvcm1hdDogaXRtLmRlY2ltYWxGb3JtYXQsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5vdGhlckZpbmlzaFByb2R1Y3QgPSBkcy5kYXRhKCkubWFwKChpdG0pID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBpdG0uaWQsCiAgICAgICAgICAgIGl0ZW06IGl0bS5pdGVtLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogaXRtLmRlc2NyaXB0aW9uLAogICAgICAgICAgICBidW9tOiBpdG0uYnVvbSB8fCB7fSwKICAgICAgICAgICAgdW9tOiBpdG0udW9tLAogICAgICAgICAgICB5aWVsZFF0eTogaXRtLnlpZWxkUXR5LAogICAgICAgICAgICBjb3N0OiBpdG0uY29zdCwKICAgICAgICAgICAgYW1vdW50OiBpdG0uYW1vdW50LAogICAgICAgICAgICBza3U6IGl0bS5za3UsCiAgICAgICAgICAgIGRlY2ltYWxGb3JtYXQ6IGl0bS5kZWNpbWFsRm9ybWF0LAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gb0ZwQW1vdW50OwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJlcnJvciIsIGUpOwogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9LAogICAgY2FsY3VsYXRlVmFyaWFuY2UoKSB7CiAgICAgIGNvbnN0IGNEUyA9IHRoaXMuJHJlZnMuY29tcG9uZW50VXNlRFMua2VuZG9XaWRnZXQoKTsKICAgICAgY29uc3Qgb1BEUyA9IHRoaXMuJHJlZnMub3RoZXJQcm9kdWN0RFMua2VuZG9XaWRnZXQoKTsKICAgICAgbGV0IGFtb3VudCA9IDA7CiAgICAgIGNEUy5kYXRhKCkuZm9yRWFjaCgobikgPT4gewogICAgICAgIGFtb3VudCArPSBwYXJzZUZsb2F0KG4uYW1vdW50KTsKICAgICAgfSk7CiAgICAgIG9QRFMuZGF0YSgpLmZvckVhY2goKG4pID0+IHsKICAgICAgICBhbW91bnQgKz0gcGFyc2VGbG9hdChuLmFtb3VudCk7CiAgICAgIH0pOwogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5hbW91bnQgPSBhbW91bnQ7CiAgICB9LAoKICAgIGFzeW5jIGxvYWRQcmVmaXgoKSB7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgYXdhaXQgcHJlZml4SGFuZGxlci5nZXQoInByb2R1Y3Rpb24gb3JkZXIiKS50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uVHlwZXMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uVHlwZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIudHJhbnNhY3Rpb25UeXBlID0gdGhpcy50cmFuc2FjdGlvblR5cGVzWzBdOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVOdW1iZXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZ2VuZXJhdGVOdW1iZXIoKSB7CiAgICAgIGlmICh0aGlzLnByb2R1Y3Rpb25PcmRlci5kdWVEYXRlICE9PSAiIikgewogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgYWJicjogdGhpcy5wcm9kdWN0aW9uT3JkZXIudHJhbnNhY3Rpb25UeXBlLmFiYnIsCiAgICAgICAgICBzdHJ1Y3R1cmU6IHRoaXMucHJvZHVjdGlvbk9yZGVyLnRyYW5zYWN0aW9uVHlwZS5zdHJ1Y3R1cmUsCiAgICAgICAgICB0cmFuc2FjdGlvbkRhdGU6IHRoaXMucHJvZHVjdGlvbk9yZGVyLmR1ZURhdGUsCiAgICAgICAgICBzZXF1Y2VuY2luZzogdGhpcy5wcm9kdWN0aW9uT3JkZXIudHJhbnNhY3Rpb25UeXBlLnNlcXVjZW5jaW5nLAogICAgICAgICAgdHlwZTogIlByb2R1Y3Rpb24gT3JkZXIiLAogICAgICAgICAgZW50aXR5OiAyLAogICAgICAgIH07CiAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuYWJiciA9IGRhdGEuYWJicjsKICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5zdHJ1Y3R1cmUgPSBkYXRhLnN0cnVjdHVyZTsKICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5zZXF1Y2VuY2luZyA9IGRhdGEuc2VxdWNlbmNpbmc7CiAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIudHJhbnNhY3Rpb25EYXRlID0gZGF0YS50cmFuc2FjdGlvbkRhdGU7CiAgICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIudHlwZSA9IGRhdGEudHlwZTsKICAgICAgICBhd2FpdCBiaWxsaW5nSGFuZGxlcgogICAgICAgICAgLmxhc3ROdW1iZXIoZGF0YSkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgY29uc3QgbGFzdE51bWJlciA9IHRoaXMuemVyb1BhZCgKICAgICAgICAgICAgICAgIHBhcnNlSW50KHJlcy5sYXN0TnVtYmVyKSwKICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnRyYW5zYWN0aW9uVHlwZS5mb3JtYXQKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLm51bWJlciA9CiAgICAgICAgICAgICAgICByZXMuc3VmZml4ICsKICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnRyYW5zYWN0aW9uVHlwZS5udW1iZXJTZXBhcmF0b3IgKwogICAgICAgICAgICAgICAgbGFzdE51bWJlcjsKICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5sYXN0TnVtYmVyID0gcmVzLnN1ZmZpeCArIGxhc3ROdW1iZXI7CiAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMucHJvZHVjdGlvbk9yZGVyLm51bWJlciwgInByb2R1Y3Rpb24iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGUpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB6ZXJvUGFkKG51bSwgcGxhY2VzKSB7CiAgICAgIHJldHVybiBTdHJpbmcobnVtKS5wYWRTdGFydChwbGFjZXMsICIwIik7CiAgICB9LAogICAgc3VmZml4KHRyYW5zYWN0aW9uRGF0ZSkgewogICAgICByZXR1cm4ga2VuZG8udG9TdHJpbmcobmV3IERhdGUodHJhbnNhY3Rpb25EYXRlKSwgYHl5bW1gKTsKICAgIH0sCiAgICBhc3luYyBsb2FkUHJvamVjdHMoKSB7CiAgICAgIGF3YWl0IHByb2plY3RIYW5kbGVyLmxpc3QoKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnByb2plY3RzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICBpZiAodGhpcy5wcm9qZWN0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5wcm9qZWN0ID0gdGhpcy5wcm9qZWN0c1swXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGxvYWRXYXJlaG91c2VzKCkgewogICAgICB3YXJlaG91c2VIYW5kbGVyLmdldFdhcmVob3VzZVNldHRpbmdBbGwoKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLndhcmVob3VzZXMgPSByZXM7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQudmFsdWU7CiAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVt0ZXh0RmllbGRdID09PSBlbXB0eUl0ZW1bdGV4dEZpZWxkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKHZhbHVlKTsKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIucHJvZHVjdCA9IHZhbHVlOwogICAgICBhd2FpdCB0aGlzLm9ubG9hZEJvbSh2YWx1ZS5pZCk7CiAgICB9LAogICAgb25GaWx0ZXJDaGFuZ2UoKSB7CiAgICAgIC8vIGNvbnN0IGZpbHRlciA9IGV2ZW50LmZpbHRlci52YWx1ZQogICAgICB0aGlzLnJlcXVlc3REYXRhKDAsIHRoaXMucHJvZHVjdEJhc2VVcmwpOwogICAgfSwKICAgIHJlcXVlc3REYXRhKHNraXAsIGJhc2VVcmwpIHsKICAgICAgY29uc3QgdXJsID0gYmFzZVVybDsKICAgICAgdGhpcy5yZXF1ZXN0U3RhcnRlZCA9IHRydWU7CiAgICAgIGZldGNoKHVybCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhyZXNwb25zZS5qc29uKCkpCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4odGhpcy5hZnRlckZldGNoKTsKICAgIH0sCiAgICBhZnRlckZldGNoKGpzb24pIHsKICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IGpzb24uZGF0YTsKICAgIH0sCiAgICBhc3luYyBvbmxvYWRCb20ocHJvZHVjdElkKSB7CiAgICAgIGJvbUhhbmRsZXIuZ2V0QnlQcm9kdWN0KHByb2R1Y3RJZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5ib21zID0gcmVzOwogICAgICAgIHRoaXMudHJhbnNhY3Rpb25Ob3RlID0gcmVzLnRyYW5zYWN0aW9uTm90ZTsKICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHRheFRlbXBsYXRlKGRhdGFJdGVtKSB7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygidmF0IiwgZGF0YUl0ZW0udGF4KTsKICAgICAgY29uc3QgdmF0ID0gZGF0YUl0ZW0udGF4OwogICAgICBpZiAodmF0KSB7CiAgICAgICAgcmV0dXJuIGA8c3Bhbj4ke3ZhdC5kZWZhdWx0VGF4ID8gdmF0LmRlZmF1bHRUYXggOiBgYH08L3NwYW4+YDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGA7CiAgICAgIH0KICAgIH0sCiAgICBUYXhEcm9wRG93bkVkaXRvcihjb250YWluZXIsIG9wdGlvbnMpIHsKICAgICAga2VuZG8KICAgICAgICAualF1ZXJ5KCc8aW5wdXQgbmFtZT0iJyArIG9wdGlvbnMuZmllbGQgKyAnIi8+JykKICAgICAgICAuYXBwZW5kVG8oY29udGFpbmVyKQogICAgICAgIC5rZW5kb0Ryb3BEb3duTGlzdCh7CiAgICAgICAgICBhdXRvQmluZDogdHJ1ZSwKICAgICAgICAgIGF1dG9XaWR0aDogdHJ1ZSwKICAgICAgICAgIGhlaWdodDogNDAwLAogICAgICAgICAgZmlsdGVyOiAic3RhcnRzd2l0aCIsCiAgICAgICAgICBkYXRhVGV4dEZpZWxkOiAiZGVmYXVsdFRheCIsCiAgICAgICAgICBkYXRhVmFsdWVGaWVsZDogImlkIiwKICAgICAgICAgIHRlbXBsYXRlOiAiPHNwYW4+Iz1kZWZhdWx0VGF4Izwvc3Bhbj4iLAogICAgICAgICAgb3B0aW9uTGFiZWw6ICItLVNlbGVjdC0tIiwKICAgICAgICAgIGRhdGFTb3VyY2U6IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoewogICAgICAgICAgICBkYXRhOiB0aGlzLnZhdFRheCwKICAgICAgICAgIH0pLAogICAgICAgIH0pOwogICAgfSwKICAgIHJvd051bWJlckNVKGRhdGFJdGVtKSB7CiAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuY29tcG9uZW50VXNlRFMua2VuZG9XaWRnZXQoKSwKICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgfSwKICAgIHJvd051bWJlck9QKGRhdGFJdGVtKSB7CiAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMub3RoZXJQcm9kdWN0RFMua2VuZG9XaWRnZXQoKSwKICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pOwogICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgfSwKICAgIFVPTVRlbXBsYXRlT1AoZGF0YUl0ZW0pIHsKICAgICAgY29uc3QgdW9tID0gZGF0YUl0ZW0udW9tOwogICAgICBpZiAodW9tKSB7CiAgICAgICAgcmV0dXJuIGA8c3Bhbj4ke3VvbS51b20gPyB1b20udW9tLm5hbWUgOiBgYH08L3NwYW4+YDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYGA7CiAgICAgIH0KICAgIH0sCiAgICBVT01UZW1wbGF0ZUNVKGRhdGFJdGVtKSB7CiAgICAgIGNvbnN0IHVvbSA9IGRhdGFJdGVtLnVvbTsKICAgICAgaWYgKHVvbSkgewogICAgICAgIHJldHVybiBgPHNwYW4+JHt1b20udW9tID8gdW9tLnVvbS5uYW1lIDogYGB9PC9zcGFuPmA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGBgOwogICAgICB9CiAgICB9LAogICAgcm93TnVtYmVyT0MoZGF0YUl0ZW0pIHsKICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5vdGhlckNvc3REUy5rZW5kb1dpZGdldCgpLAogICAgICAgIGluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CiAgICAgIHJldHVybiBpbmRleCArIDE7CiAgICB9LAogICAgYXN5bmMgbG9hZFNlZ21lbnQoKSB7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgdGhpcy5zZWdtZW50cyA9IFtdOwogICAgICAgICAgc2V0dGluZ3NIYW5kbGVyCiAgICAgICAgICAgIC5nZXRTZWcoKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50cyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWdtZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnNlZ21lbnQgPSB0aGlzLnNlZ21lbnRzWzBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gdGhpcy5zZWdtZW50TGlzdCA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgpOwogICAgICAgICAgewogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBsb2FkTG9jYXRpb24oKSB7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgdGhpcy5sb2NhdGlvbnMgPSBbXTsKICAgICAgICAgIGxvY2F0aW9uSGFuZGxlcgogICAgICAgICAgICAubGlzdCgpCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9ucyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2NhdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5sb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zWzBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKCk7CiAgICAgICAgICB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMCk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGxvYWRTYWxlQ2hhbm5lbCgpIHsKICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHJlc29sdmUoInJlc29sdmVkIik7CiAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHNhbGVDaGFubmVsSGFuZGxlci5nZXQoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLnNhbGVDaGFubmVsTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgaWYgKHRoaXMuc2FsZUNoYW5uZWxMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnNhbGVDaGFubmVsID0gdGhpcy5zYWxlQ2hhbm5lbExpc3RbMF07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlUHJpbnQoKSB7fSwKICAgIHNhdmVOZXcoKSB7CiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnByb2R1Y3Rpb25PcmRlci5ib20gPSBuZXcgQm9tTW9kZWwodGhpcy5ib21TZWxldGVkKTsKICAgICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIudHJhbnNhY3Rpb25Ob3RlID0gdGhpcy50cmFuc2FjdGlvbk5vdGU7CiAgICAgIHRoaXMucHJvZHVjdGlvbk9yZGVyLnN0YXR1cyA9IDE7CgogICAgICBwcm9kdWN0aW9uT3JkZXJIYW5kbGVyLmNyZWF0ZSh0aGlzLnByb2R1Y3Rpb25PcmRlcikudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAvLyAgIG5hbWU6ICdQcm9kdWN0cycsCiAgICAgICAgLy8gICBwYXRoOiAncHJvZHVjdCcsCiAgICAgICAgLy8gICBwYXJhbXM6IHtkYXRhUE86IHJlcy5kYXRhLmRhdGF9CiAgICAgICAgLy8gfSkKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgZXJyb3JNZXNzYWdlKCkge30sCiAgICBhY2NvdW50RHJvcERvd25FZGl0b3IoKSB7fSwKICAgIGNhbmNlbCgpIHt9LAogICAgaGlkZVNtYWxsU2lkZWJhcigpIHsKICAgICAgdGhpcy5pc0hpZGVCYXIgPSAhdGhpcy5pc0hpZGVCYXI7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIGNhbGwgYWdhaW4gdGhlIG1ldGhvZCBpZiB0aGUgcm91dGUgY2hhbmdlcwogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIC8vIGZldGNoIHRoZSBkYXRhIHdoZW4gdGhlIHZpZXcgaXMgY3JlYXRlZCBhbmQgdGhlIGRhdGEgaXMKICAgIC8vIGFscmVhZHkgYmVpbmcgb2JzZXJ2ZWQKICAgIC8vIHRoaXMubG9hZE9iaigpCiAgICAvLyBhd2FpdCB0aGlzLmxvYWRQcmVmaXgoKQogICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIuZHVlRGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApOwogICAgdGhpcy5wcm9kdWN0aW9uT3JkZXIubW9udGhPZiA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgNyk7CiAgICBhd2FpdCB0aGlzLmxvYWRQcmVmaXgoKTsKICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAvLyBhd2FpdCB0aGlzLmxvYWRQcmVmaXgoKQogICAgYXdhaXQgdGhpcy5sb2FkV2FyZWhvdXNlcygpOwogICAgYXdhaXQgdGhpcy5sb2FkU2FsZUNoYW5uZWwoKTsKICAgIGF3YWl0IHRoaXMubG9hZFNlZ21lbnQoKTsKICAgIGF3YWl0IHRoaXMubG9hZExvY2F0aW9uKCk7CiAgICBhd2FpdCB0aGlzLmxvYWRQcm9qZWN0cygpOwogICAgdGhpcy5yZXF1ZXN0RGF0YSgwLCB0aGlzLnByb2R1Y3RCYXNlVXJsKTsKICB9LAp9Owo="},{"version":3,"sources":["ProductionOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8wBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductionOrder.vue","sourceRoot":"src/views/products/production/production_orders","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col sm=\"12\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 no_border rounded-sm\"\n            color=\"white\"\n          >\n            <v-row>\n              <v-col\n                class=\"bigSide py-0\"\n                sm=\"12\"\n                cols=\"12\"\n                style=\"transition: .3s ease-in;\"\n                :class=\"{ hide_big_bar_class: isHideBar }\"\n              >\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                  <v-card outlined dense class=\"no_border\">\n                    <h2 class=\"mb-0\">{{ $t(\"production_order\") }}</h2>\n                    <v-icon\n                      v-if=\"!isHideBar\"\n                      onclick=\"window.history.go(-1); return false;\"\n                      style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                      class=\"float-right\"\n                      >close\n                    </v-icon>\n                    <!-- <span\n                      style=\"transition: .3s ease-in; z-index:10;\"\n                      :class=\"{\n                        iconArrow: !isHideBar,\n                        iconArrowHide: isHideBar,\n                      }\"\n                    >\n                      <v-icon\n                        size=\"22\"\n                        class=\"arr_icon\"\n                        @click=\"hideSmallSidebar\"\n                        v-if=\"isHideBar\"\n                      >\n                        fa fa-chevron-circle-left\n                      </v-icon>\n                      <v-icon\n                        size=\"22\"\n                        class=\"arr_icon\"\n                        @click=\"hideSmallSidebar\"\n                        v-if=\"!isHideBar\"\n                      >\n                        fa fa-chevron-circle-right\n                      </v-icon>\n                    </span> -->\n                  </v-card>\n                  <v-card outlined dense class=\"px-3 no_border\" color=\"grayBg\">\n                    <!-- <v-row>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label  mb-0\">{{\n                            $t(\"finished_product_variance\")\n                          }}</label>\n                        <v-col sm=\"12\" cols=\"12\"\n                               class=\"kendo_dropdown_custom pl-0 pb-3 pt-0\">\n                          <dropdownlist\n                              :data-items=\"productList\"\n                              @change=\"onChange\"\n                              :value=\"productionOrder.product\"\n                              :data-item-key=\"dataItemKey\"\n                              :text-field=\"textField\"\n                              :default-item=\"defaultItem\"\n                              :filterable=\"true\"\n                              @filterchange=\"onFilterChange\">\n                          </dropdownlist>\n                        </v-col>\n                        <label class=\"label mb-0 mt-1\" style=\"\">{{ $t(\"bom\") }}</label>\n                        <v-select\n                            class=\"mt-1\"\n                            :items=\"boms\"\n                            :disabled=\"boms.length <= 0\"\n                            :item-text=\"item => item.abbr + '-' + item.number \"\n                            v-model=\"productionOrder.bom\"\n                            item-value=\"id\"\n                            v-on:change=\"onChangeBom\"\n                            :placeholder=\"$t('bom')\"\n                            :rules=\"[(v) => !!v || 'BOM is required']\"\n                            return-object\n                            clearable\n                            tage=\"Bom\"\n                            outlined\n                        />\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <v-row>\n                          <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                            <v-text-field\n                                :placeholder=\"$t('Produce Qty')\"\n                                v-model=\"productionOrder.qty\"\n                                type=\"number\"\n                                @change=\"onChangeQty\"\n                                min=\"1\"\n                                class=\"mt-1\"\n                                tage=\"Quantity to Produce\"\n                                outlined/>\n                          </v-col>\n                          <v-col class=\"pt-0\">\n                            <label class=\"label mb-0\" style=\"\">{{ $t(\"yield_uom\") }}</label>\n                            <h3>{{ uom }}</h3>\n                          </v-col>\n                        </v-row>\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label\">{{ $t(\"due_date\") }}</label>\n                        <app-datepicker\n                            :initialDate=\"productionOrder.dueDate\"\n                            @emitDate=\"productionOrder.dueDate = $event\"\n                        />\n                        <label class=\"label mb-0 mt-1\">{{\n                            $t(\"product_order_num\")\n                          }}</label>\n                        <v-row class=\"mt-1 mr-0\">\n                          <v-col sm=\"3\" cols=\"3\" class=\"py-0 pr-0\">\n                            <div class=\"code_text text-uppercase\"> {{ productionOrder.abbr }}</div>\n                          </v-col>\n                          <v-col sm=\"7\" cols=\"7\" class=\"pt-0 pl-0 pr-1\">\n                            <v-text-field\n                                disabled\n                                class=\"custom-border\"\n                                v-model=\"productionOrder.number\"\n                                tage=\"Product Order Number\"\n                                outlined\n                                :rules=\"[(v) => !!v || 'Number is required']\"\n                                required\n                            />\n                          </v-col>\n                          <v-col sm=\"2\" cols=\"2\" class=\"pt-0 px-0\">\n                            <v-icon\n                                color=\"black\"\n                                size=\"30\"\n                                class=\"border_qrcode\"\n                                @click=\"generateNumber\"\n                            >mdi-qrcode\n                            </v-icon>\n                          </v-col>\n                        </v-row>\n                      </v-col>\n                    </v-row> -->\n                    <v-row>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label  mb-0\">{{ $t(\"bom_no\") }}</label>\n                        <div class=\"mt-1 d-flex mr-0\">\n                        \n                            <div class=\"flex-1 code_text\">{{ bom.abbr }}</div>\n                       \n                     \n                            <v-text-field\n                              class=\"flex-2 custom-border \"\n                              v-model=\"bom.number\"\n                              disabled\n                              outlined\n                              tage=\"Bom No.\"\n                              :rules=\"[(v) => !!v || 'Number is required']\"\n                              required\n                            />\n                  \n                       \n                            <v-icon\n                              color=\"black\"\n                              size=\"30\"\n                              style=\"height: 40px;\"\n                              class=\"border_qrcode ml-2\"\n                              :disabled=\"disabledMe\"\n                              @click=\"generateNumber\"\n                              >mdi-qrcode\n                            </v-icon>\n                      \n                        </div>\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label  mb-0 mt-1\" style=\"\">{{\n                          $t(\"bom_type\")\n                        }}</label>\n                        <v-select\n                          class=\"mt-1\"\n                          :items=\"bomTypes\"\n                          v-model=\"bom.typeBom\"\n                          item-text=\"name\"\n                          item-value=\"id\"\n                          return-object\n                          :placeholder=\"$t('type')\"\n                          tage=\"Bom Type\"\n                          outlined\n                        />\n                      </v-col>\n                      <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                        <label class=\"label  mb-0 mt-1\" style=\"\">{{\n                          $t(\"warehouse\")\n                        }}</label>\n                        <v-select\n                          class=\"mt-1\"\n                          :items=\"warehouses\"\n                          v-model=\"bom.warehouse\"\n                          return-object\n                          item-value=\"id\"\n                          item-text=\"name\"\n                          :placeholder=\"$t('warehouse')\"\n                          tage=\"Warehouse\"\n                          outlined\n                        />\n                      </v-col>\n                    </v-row>\n                  </v-card>\n\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col cols=\"12\" class=\"pb-1 pb-0\">\n                      <h2 class=\"primary--text mb-0 font_18 text-uppercase\">\n                        {{ $t(\"finished_product\") }}\n                      </h2>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-1\">\n                      <kendo-datasource\n                        ref=\"otherProductDS\"\n                        :data=\"otherFinishProductData\"\n                      />\n                      <kendo-grid\n                        id=\"otherFinishProduct\"\n                        class=\"grid-function\"\n                        :data-source-ref=\"'otherProductDS'\"\n                        :sortable=\"false\"\n                        :filterable=\"false\"\n                        :column-menu=\"true\"\n                        :editable=\"false\"\n                        :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                          :template=\"rowNumberOP\"\n                          :title=\"$t('no.')\"\n                          :width=\"55\"\n                          :column-menu=\"false\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5;',\n                            class: 'text-variants',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: variants',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'item'\"\n                          :title=\"$t('item')\"\n                          :width=\"200\"\n                          :template=\"itemTemplate\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <!-- <kendo-grid-column\n                          :field=\"'description'\"\n                          :title=\"$t('description')\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        /> -->\n                        <kendo-grid-column\n                          :field=\"'buom'\"\n                          :title=\"$t('base_uom')\"\n                          :width=\"150\"\n                          :template=\"UOMTemplate\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'yieldQty'\"\n                          :title=\"$t('yield_qty')\"\n                          :width=\"150\"\n                          :template=\"\n                            '<span>#=kendo.toString(yieldQty || 0, (decimalFormat || `n2`)) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'cost'\"\n                          :title=\"$t('cost')\"\n                          :width=\"150\"\n                          :template=\"\n                            '<span>#=kendo.toString(cost || 0, (decimalFormat || `n2`)) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amount'\"\n                          :title=\"$t('amount')\"\n                          :width=\"150\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"\n                            '<span>#=kendo.toString(amount || 0, (decimalFormat || `n2`)) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                      </kendo-grid>\n                    </v-col>\n                  </v-row>\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col cols=\"12\" class=\"pt-0 pb-0\">\n                      <h2 class=\"primary--text mb-0 font_18 text-uppercase\">\n                        {{ $t(\"by_product\") }}\n                      </h2>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-1\">\n                      <kendo-datasource\n                        ref=\"otherProductDS\"\n                        :change=\"dataSourceChangedOP\"\n                        :data=\"bom.otherFinishProduct\"\n                      />\n                      <kendo-grid\n                        id=\"gridOtherProduct\"\n                        class=\"grid-function\"\n                        :data-source-ref=\"'otherProductDS'\"\n                        :sortable=\"false\"\n                        :filterable=\"false\"\n                        :column-menu=\"true\"\n                        :editable=\"true\"\n                        :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                          :template=\"rowNumberOP\"\n                          :title=\"$t('no.')\"\n                          :width=\"55\"\n                          :column-menu=\"false\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5;',\n                            class: 'text-variants',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: variants',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'item'\"\n                          :title=\"$t('item')\"\n                          :width=\"200\"\n                          :template=\"itemTemplate\"\n                          :editor=\"ItemDropDownEditorFP\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <!-- <kendo-grid-column\n                          :field=\"'description'\"\n                          :title=\"$t('description')\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        /> -->\n                        <kendo-grid-column\n                          :field=\"'buom'\"\n                          :title=\"$t('base_uom')\"\n                          :width=\"150\"\n                          :template=\"UOMTemplate\"\n                          :editor=\"UOMDropDownEditorOP\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{ style: 'text-align: right; ' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'yieldQty'\"\n                          :title=\"$t('yield_qty')\"\n                          :width=\"150\"\n                          :template=\"\n                            '<span>#=kendo.toString(yieldQty || 0, decimalFormat) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'cost'\"\n                          :title=\"$t('cost')\"\n                          :width=\"150\"\n                          :template=\"\n                            '<span>#=kendo.toString(cost || 0, decimalFormat) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amount'\"\n                          :title=\"$t('amount')\"\n                          :width=\"150\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"\n                            '<span>#=kendo.toString(amount || 0, decimalFormat) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :command=\"{\n                            iconClass: 'k-icon k-i-trash',\n                            text: 'Delete',\n                            click: removeRowOP,\n                            class: 'btn-plus',\n                          }\"\n                          :title=\"'&nbsp;'\"\n                          :width=\"100\"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                        />\n                      </kendo-grid>\n                    </v-col>\n                    <!-- <v-col cols=\"12\" class=\"pt-0\">\n                      <v-btn\n                        color=\"primary\"\n                        class=\"float-left btn_plus rounded-4 white--text mr-2\"\n                        @click=\"addRowOtherProduct\"\n                      >\n                        <v-icon size=\"\" class=\"ma-1\">mdi-plus</v-icon>\n                      </v-btn>\n                    </v-col> -->\n                  </v-row>\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col cols=\"12\" class=\"py-1 pb-0\">\n                      <h2 class=\"primary--text mb-0 font_18 text-uppercase\">\n                        {{ $t(\"components_used\") }}\n                      </h2>\n                    </v-col>\n                    <v-col sm=\"12\" cols=\"12\">\n                      <kendo-datasource\n                        ref=\"componentUseDS\"\n                        :data=\"componentUsedData\"\n                      />\n                      <kendo-grid\n                        id=\"componentUse\"\n                        class=\"grid-function\"\n                        :data-source-ref=\"'componentUseDS'\"\n                        :sortable=\"false\"\n                        :filterable=\"false\"\n                        :column-menu=\"true\"\n                        :editable=\"false\"\n                        :scrollable-virtual=\"true\"\n                      >\n                        <kendo-grid-column\n                          :title=\"$t('no.')\"\n                          :template=\"rowNumberCU\"\n                          :width=\"55\"\n                          :column-menu=\"false\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5;',\n                            class: 'text-variants',\n                          }\"\n                          :attributes=\"{ style: 'text-align: variants' }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'item'\"\n                          :title=\"$t('items')\"\n                          :width=\"200\"\n                          :template=\"'<span>#=item.name#</span>'\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <!-- <kendo-grid-column\n                          :field=\"'description'\"\n                          :title=\"$t('description')\"\n                          :width=\"200\"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        /> -->\n                        <kendo-grid-column\n                          :template=\"UOMTemplate\"\n                          :field=\"'buom'\"\n                          :title=\"$t('base_uom')\"\n                          :width=\"160\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :headerAttributes=\"{\n                            style: 'background-color: #EDF1F5',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'qty'\"\n                          :title=\"$t('qty')\"\n                          :width=\"150\"\n                          :template=\"\n                            '<span>#=kendo.toString(qty || 0, (decimalFormat || `n2`)) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'cost'\"\n                          :title=\"$t('cost')\"\n                          :width=\"150\"\n                          :template=\"\n                            '<span>#=kendo.toString(cost || 0, (decimalFormat || `n2`)) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                        <kendo-grid-column\n                          :field=\"'amount'\"\n                          :title=\"$t('amount')\"\n                          :width=\"150\"\n                          :editable=\"\n                            () => {\n                              return false;\n                            }\n                          \"\n                          :template=\"\n                            '<span>#=kendo.toString(amount || 0, (decimalFormat || `n2`)) || 0#</span>'\n                          \"\n                          :headerAttributes=\"{\n                            style:\n                              'text-align: right; background-color: #EDF1F5',\n                          }\"\n                          :attributes=\"{\n                            style: 'text-align: right',\n                          }\"\n                        />\n                      </kendo-grid>\n                    </v-col>\n                  </v-row>\n                  <v-row style=\"background-color: #fff;\">\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                      <v-row>\n                        <v-col sm=\"6\" cols=\"6\" class=\"py-0\">\n                          <v-textarea\n                            class=\"mt-1\"\n                            outlined\n                            clearable\n                            no-resize\n                            v-model=\"transactionNote\"\n                            height=\"90px\"\n                            rows=\"3\"\n                            placeholder=\"Memo\"\n                          />\n                        </v-col>\n                        <v-col sm=\"6\" cols=\"6\" class=\"pt-1\">\n                          <v-simple-table>\n                            <template v-slot:default>\n                              <tbody>\n                                <tr>\n                                  <td class=\"text-left text-uppercase\">\n                                    {{ $t(\"total_cost\") }}\n                                  </td>\n                                  <td class=\"text-center\">:</td>\n                                  <td class=\"text-right\">\n                                    {{ numberFormat(totalCost) }}\n                                  </td>\n                                </tr>\n                                <tr>\n                                  <td class=\"text-left text-uppercase\">\n                                    {{ $t(\"variance\") }}\n                                  </td>\n                                  <td class=\"text-center\">:</td>\n                                  <td class=\"text-right\">\n                                    {{ numberFormat(variance) }}\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </template>\n                          </v-simple-table>\n                        </v-col>\n                      </v-row>\n                    </v-col>\n                  </v-row>\n\n                  <v-divider />\n                  <v-card outlined dense class=\"no_border function_footer\">\n                    <v-alert type=\"warning\" v-model=\"alert\" dismissible>\n                      <span v-html=\"errorMessage\" />\n                    </v-alert>\n                    <v-btn\n                      color=\"primary\"\n                      outlined\n                      class=\"text-capitalize rounded-4 black--text float-left\"\n                      @click=\"cancel\"\n                      >{{ $t(\"cancel\") }}\n                    </v-btn>\n                    <v-menu>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-btn\n                          class=\"ml-2 float-right text-capitalize rounded-4 black--text\"\n                          v-on=\"on\"\n                        >\n                          {{ $t(\"save_option\") }}\n                          <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                        </v-btn>\n                      </template>\n                      <v-list rounded>\n                        <v-list-item-group>\n                          <v-list-item>\n                            <v-list-item-content>\n                              <v-list-item-title>\n                                {{ $t(\"save_draft\") }}\n                              </v-list-item-title>\n                            </v-list-item-content>\n                          </v-list-item>\n                          <v-list-item>\n                            <v-list-item-content>\n                              <v-list-item-title @click=\"savePrint\"\n                                >{{ $t(\"save_print\") }}\n                              </v-list-item-title>\n                            </v-list-item-content>\n                          </v-list-item>\n                        </v-list-item-group>\n                      </v-list>\n                    </v-menu>\n                    <v-btn\n                      color=\"primary\"\n                      v-if=\"!isEdit\"\n                      @click=\"saveNew\"\n                      class=\"float-right white--text text-capitalize rounded-pill\"\n                    >\n                      {{ $t(\"save_close\") }}\n                    </v-btn>\n                  </v-card>\n                </v-form>\n              </v-col>\n              <!-- <v-col\n                class=\"smallSide\"\n                sm=\"4\"\n                style=\"transition: .3s ease-in;\"\n                :class=\"{ hide_small_bar_class: isHideBar }\"\n              >\n                <h3\n                  style=\"color: #b3b5bc; font-size:20px;\"\n                  v-if=\"!isHideBar\"\n                  class=\"text-uppercase float-right mt-n3\"\n                >\n                  <span class=\"pointer\" @click=\"Help('production order')\">\n                    {{ $t(\"help\") }}\n                  </span>\n                  <v-icon\n                    onclick=\"window.history.go(-1); return false;\"\n                    style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                    class=\"float-right mt-n1\"\n                    >close\n                  </v-icon>\n                </h3>\n\n                <div v-if=\"!isHideBar\" class=\"small_sidebar mt-9 grayBg\">\n                  <v-row>\n                    <v-col sm=\"12\" cols=\"12\">\n                      <h4 class=\"mb-3 text-uppercase\">{{ $t(\"analysis\") }}</h4>\n                      <label class=\"label mb-0\">{{\n                        $t(\"default_warehouse\")\n                      }}</label>\n                      <v-select\n                        :items=\"warehouses\"\n                        class=\"mt-2\"\n                        v-model=\"productionOrder.warehouse\"\n                        item-text=\"name\"\n                        item-value=\"id\"\n                        :placeholder=\"$t('warehouse')\"\n                        :rules=\"[(v) => !!v || 'Warehouse is required']\"\n                        return-object\n                        tage=\"Warehouse\"\n                        outlined\n                      />\n                      <label class=\"label mb-0\">{{ $t(\"segment\") }}</label>\n                      <v-select\n                        class=\"mt-2\"\n                        v-model=\"productionOrder.segment\"\n                        :items=\"segments\"\n                        item-value=\"id\"\n                        :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                        return-object\n                        tage=\"segment\"\n                        placeholder=\"segment\"\n                        outlined=\"\"\n                      />\n           \n                      <label class=\"label\">{{ $t(\"project\") }}</label>\n                      <v-select\n                        class=\"mt-1\"\n                        v-model=\"productionOrder.project\"\n                        :items=\"projects\"\n                        :item-text=\"(item) => `${item.code} - ${item.name}`\"\n                        item-value=\"id\"\n                        tage=\"Project\"\n                        outlined\n                      />\n             \n                    </v-col>\n                  </v-row>\n                  <v-divider class=\"mb-3\" />\n                  <v-row>\n\n                  </v-row>\n\n                  <p class=\"mb-0 detial_smallside_p\">\n                    {{ $t(\"product_funct_order_desc\") }}\n                  </p>\n                </div>\n              </v-col> -->\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n      <LoadingMe\n        :isLoading=\"showLoading\"\n        :fullPage=\"false\"\n        type=\"loading\"\n        :myLoading=\"true\"\n      />\n    </v-container>\n  </v-app>\n</template>\n\n<script>\n// import DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\";\n// import { DropDownList } from \"@progress/kendo-vue-dropdowns\";\nimport ProductionOrder from \"@/scripts/model/ProductionOrder\";\nimport kendo from \"@progress/kendo-ui\";\nimport { ShowResource } from \"@/observable/store\";\nimport BomModel from \"@/scripts/model/Bom\";\n// import {uuid} from \"vue-uuid\";\n\nconst productVariantHandler = require(\"@/scripts/productVariantHandler\");\nconst warehouseHandler = require(\"@/scripts/warehouseHandler\");\nconst bomHandler = require(\"@/scripts/bomHandler\");\nconst settingsHandler = require(\"@/scripts/settingsHandler\");\nconst saleChannelHandler = require(\"@/scripts/saleChannelHandler\");\nconst locationHandler = require(\"@/scripts/locationHandler\");\nconst projectHandler = require(\"@/scripts/projectHandler\");\nconst prefixHandler = require(\"@/scripts/prefixHandler\");\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nconst productionOrderHandler = require(\"@/scripts/productionOrderHandler\");\nconst keyField = \"id\";\nconst textField = \"name\";\nconst emptyItem = { [textField]: \"loading ...\" };\nconst bomModel = new BomModel({});\n// const $ = require(\"jquery\")\nexport default {\n  name: \"ProductionOrder\",\n  components: {\n    LoadingMe: () => import(`@/components/Loading`),\n    // \"app-datepicker\": DatePickerComponent,\n    // dropdownlist: DropDownList,\n  },\n  data: () => ({\n    isEdit: false,\n    showLoading: false,\n    loadingAlert: false,\n    alert: false,\n    valid: true,\n    templates: [\n      { title: \"Draft\" },\n      { title: \"Open\" },\n      { title: \"Paid\" },\n      { title: \"Partially Paid\" },\n    ],\n    isHideBar: false,\n    productBaseUrl: productVariantHandler.itemSearchURL(),\n    productList: [],\n    dataItemKey: \"id\",\n    textField: \"name\",\n    defaultItem: { [textField]: \"Select product...\", [keyField]: null },\n    requestStarted: false,\n    productionOrder: new ProductionOrder({}),\n    bom: bomModel,\n    projects: [],\n    boms: [],\n    bomSeleted: {},\n    yieldUoms: [],\n    warehouses: [],\n    warehouse: {},\n    segments: [],\n    saleChannelList: [],\n    locations: [],\n    transactionTypes: [],\n    uom: \"\",\n    transactionNote: \"\",\n    componentUsedData: [],\n    otherFinishProductData: [],\n    totalCost: 0,\n    variance: 0,\n    decimalFormat: 2,\n  }),\n  methods: {\n    numberFormat(value) {\n      return kendo.toString(value, `n${this.decimalFormat}`);\n    },\n    itemTemplate(dataItem) {\n      const item = dataItem.item;\n      if (item) {\n        return `<span>${item.name ? item.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    UOMTemplate(dataItem) {\n      const uom = dataItem.buom;\n      if (uom) {\n        return `<span>${uom.name ? uom.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    Help(key_search) {\n      ShowResource(key_search);\n    },\n    onChangeQty() {\n      const produceQty = this.productionOrder.qty;\n      let fpAmount = 0;\n      const finishProduct = this.bomSeleted.finishProduct || [];\n      finishProduct.map((n) => {\n        if (!n.hasOwnProperty(\"decimalFormat\")) {\n          n[\"decimalFormat\"] = \"n2\";\n        }\n        const yQty = n.yieldQty * kendo.parseFloat(produceQty);\n        const iCost = n.cost;\n        const amount = iCost * yQty;\n        n[\"yieldQty\"] = yQty;\n        n[\"amount\"] = amount;\n        fpAmount += amount;\n        return {\n          ...n,\n        };\n      });\n      this.productionOrder.finishProduct = finishProduct;\n      const componentUseAmt = this.addGridComponentUsed(\n        this.bomSeleted.componentUsed,\n        produceQty\n      );\n      const otherFinishProductUseAmt = this.addGridOtherProduct(\n        this.bomSeleted.otherFinishProduct,\n        produceQty\n      );\n\n      this.productionOrder.amount = componentUseAmt;\n      this.totalCost = componentUseAmt;\n      this.productionOrder.exchangeAmount = componentUseAmt;\n      this.productionOrder.variance =\n        fpAmount + otherFinishProductUseAmt - componentUseAmt;\n      this.varince = fpAmount + otherFinishProductUseAmt - componentUseAmt;\n      // this.calculateVariance(fpAmount)\n      // window.console.log(produceQty, 'change qty')\n    },\n    async onChangeBom(e) {\n      this.bomSeleted = e;\n      // this.productionOrder = e\n      this.transactionNote = this.bomSeleted.transactionNote;\n      this.productionOrder.warehouse = this.bomSeleted.warehouse;\n      const otherFinishProduct = this.bomSeleted.otherFinishProduct || [];\n      otherFinishProduct.map((n) => {\n        if (!n.hasOwnProperty(\"decimalFormat\")) {\n          n[\"decimalFormat\"] = \"n2\";\n        }\n        return {\n          ...n,\n        };\n      });\n      this.otherFinishProductData = otherFinishProduct;\n      const componentUsed = this.bomSeleted.componentUsed || [];\n      componentUsed.map((n) => {\n        if (!n.hasOwnProperty(\"decimalFormat\")) {\n          n[\"decimalFormat\"] = \"n2\";\n        }\n        return {\n          ...n,\n        };\n      });\n      this.componentUsedData = componentUsed;\n      this.productionOrder.qty = 1;\n      this.productionOrder.yieldUOM = e.finishProduct[0].buom || {};\n      const yieldUOM = this.productionOrder.yieldUOM;\n      if (yieldUOM.hasOwnProperty(\"name\")) {\n        this.uom = this.productionOrder.yieldUOM.name;\n      }\n      this.totalCost = this.bomSeleted.amount;\n      this.productionOrder.amount = this.bomSeleted.amount;\n      this.productionOrder.exchangeAmount = this.bomSeleted.amount;\n      this.productionOrder.variance = this.bomSeleted.variance;\n      this.variance = this.bomSeleted.variance;\n    },\n    addGridComponentUsed(data, produceQty) {\n      try {\n        let totalCost_ = 0;\n        this.componentUsedData = data || [];\n        kendo\n          .jQuery(\"#componentUse\")\n          .data(\"kendoGrid\")\n          .dataSource.data([]);\n        let ds = this.$refs.componentUseDS.kendoWidget();\n        this.componentUsedData.forEach((itm, index) => {\n          const yQty = itm.qty * kendo.parseFloat(produceQty);\n          const iCost = itm.cost;\n          const amount = iCost * yQty;\n          totalCost_ += amount;\n          ds.insert(index + 1, {\n            id: itm.id,\n            item: itm.item,\n            description: itm.description,\n            buom: itm.buom || {},\n            uom: itm.uom,\n            qty: yQty,\n            cost: iCost,\n            amount: amount,\n            sku: itm.sku,\n            decimalFormat: itm.decimalFormat,\n          });\n        });\n        this.totalCost = totalCost_;\n        this.productionOrder.amount = totalCost_;\n        this.productionOrder.exchangeAmount = totalCost_;\n        this.productionOrder.componentUsed = ds.data().map((itm) => {\n          return {\n            id: itm.id,\n            item: itm.item,\n            description: itm.description,\n            buom: itm.buom || {},\n            uom: itm.uom,\n            qty: itm.qty,\n            cost: itm.cost,\n            amount: itm.amount,\n            sku: itm.sku,\n            decimalFormat: itm.decimalFormat,\n          };\n        });\n        return totalCost_;\n      } catch (e) {\n        window.console.log(\"error\", e);\n        return 0;\n      }\n    },\n    addGridOtherProduct(data, produceQty) {\n      try {\n        let oFpAmount = 0;\n        this.otherFinishProductData = data || [];\n        kendo\n          .jQuery(\"#otherFinishProduct\")\n          .data(\"kendoGrid\")\n          .dataSource.data([]);\n        let ds = this.$refs.otherProductDS.kendoWidget();\n        this.otherFinishProductData.forEach((itm, index) => {\n          const yQty = itm.yieldQty * kendo.parseFloat(produceQty);\n          const iCost = itm.cost;\n          const amount = iCost * yQty;\n          oFpAmount += amount;\n          ds.insert(index + 1, {\n            id: itm.id,\n            item: itm.item,\n            description: itm.description,\n            buom: itm.buom || {},\n            uom: itm.uom,\n            yieldQty: yQty,\n            cost: iCost,\n            amount: amount,\n            sku: itm.sku,\n            decimalFormat: itm.decimalFormat,\n          });\n        });\n        this.productionOrder.otherFinishProduct = ds.data().map((itm) => {\n          return {\n            id: itm.id,\n            item: itm.item,\n            description: itm.description,\n            buom: itm.buom || {},\n            uom: itm.uom,\n            yieldQty: itm.yieldQty,\n            cost: itm.cost,\n            amount: itm.amount,\n            sku: itm.sku,\n            decimalFormat: itm.decimalFormat,\n          };\n        });\n        return oFpAmount;\n      } catch (e) {\n        window.console.log(\"error\", e);\n        return 0;\n      }\n    },\n    calculateVariance() {\n      const cDS = this.$refs.componentUseDS.kendoWidget();\n      const oPDS = this.$refs.otherProductDS.kendoWidget();\n      let amount = 0;\n      cDS.data().forEach((n) => {\n        amount += parseFloat(n.amount);\n      });\n      oPDS.data().forEach((n) => {\n        amount += parseFloat(n.amount);\n      });\n      this.productionOrder.amount = amount;\n    },\n\n    async loadPrefix() {\n      new Promise((resolve) => {\n        setTimeout(async () => {\n          resolve(\"resolved\");\n          await prefixHandler.get(\"production order\").then(async (res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoading = false;\n              this.transactionTypes = res.data.data;\n              if (this.transactionTypes.length > 0) {\n                this.productionOrder.transactionType = this.transactionTypes[0];\n                if (this.$route.params.id === undefined) {\n                  await this.generateNumber();\n                }\n              }\n            }\n          });\n        }, 10);\n      });\n    },\n    async generateNumber() {\n      if (this.productionOrder.dueDate !== \"\") {\n        let data = {\n          abbr: this.productionOrder.transactionType.abbr,\n          structure: this.productionOrder.transactionType.structure,\n          transactionDate: this.productionOrder.dueDate,\n          sequcencing: this.productionOrder.transactionType.sequcencing,\n          type: \"Production Order\",\n          entity: 2,\n        };\n        this.productionOrder.abbr = data.abbr;\n        this.productionOrder.structure = data.structure;\n        this.productionOrder.sequcencing = data.sequcencing;\n        this.productionOrder.transactionDate = data.transactionDate;\n        this.productionOrder.type = data.type;\n        await billingHandler\n          .lastNumber(data)\n          .then((response) => {\n            if (response.data.statusCode === 200) {\n              const res = response.data.data;\n              const lastNumber = this.zeroPad(\n                parseInt(res.lastNumber),\n                this.productionOrder.transactionType.format\n              );\n              this.productionOrder.number =\n                res.suffix +\n                this.productionOrder.transactionType.numberSeparator +\n                lastNumber;\n              this.productionOrder.lastNumber = res.suffix + lastNumber;\n              window.console.log(this.productionOrder.number, \"production\");\n            }\n          })\n          .catch((e) => {\n            this.errors.push(e);\n          });\n      }\n    },\n    zeroPad(num, places) {\n      return String(num).padStart(places, \"0\");\n    },\n    suffix(transactionDate) {\n      return kendo.toString(new Date(transactionDate), `yymm`);\n    },\n    async loadProjects() {\n      await projectHandler.list().then((res) => {\n        this.projects = res.data.data;\n        if (this.projects.length > 0) {\n          this.productionOrder.project = this.projects[0];\n        }\n      });\n    },\n    async loadWarehouses() {\n      warehouseHandler.getWarehouseSettingAll().then((res) => {\n        this.warehouses = res;\n      });\n    },\n    async onChange(event) {\n      const value = event.value;\n      if (value && value[textField] === emptyItem[textField]) {\n        return;\n      }\n      this.showLoading = true;\n      window.console.log(value);\n      this.productionOrder.product = value;\n      await this.onloadBom(value.id);\n    },\n    onFilterChange() {\n      // const filter = event.filter.value\n      this.requestData(0, this.productBaseUrl);\n    },\n    requestData(skip, baseUrl) {\n      const url = baseUrl;\n      this.requestStarted = true;\n      fetch(url)\n        .then((response) => {\n          // window.console.log(response.json())\n          return response.json();\n        })\n        .then(this.afterFetch);\n    },\n    afterFetch(json) {\n      this.productList = json.data;\n    },\n    async onloadBom(productId) {\n      bomHandler.getByProduct(productId).then((res) => {\n        this.boms = res;\n        this.transactionNote = res.transactionNote;\n        this.showLoading = false;\n      });\n    },\n    taxTemplate(dataItem) {\n      window.console.log(\"vat\", dataItem.tax);\n      const vat = dataItem.tax;\n      if (vat) {\n        return `<span>${vat.defaultTax ? vat.defaultTax : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    TaxDropDownEditor(container, options) {\n      kendo\n        .jQuery('<input name=\"' + options.field + '\"/>')\n        .appendTo(container)\n        .kendoDropDownList({\n          autoBind: true,\n          autoWidth: true,\n          height: 400,\n          filter: \"startswith\",\n          dataTextField: \"defaultTax\",\n          dataValueField: \"id\",\n          template: \"<span>#=defaultTax#</span>\",\n          optionLabel: \"--Select--\",\n          dataSource: new kendo.data.DataSource({\n            data: this.vatTax,\n          }),\n        });\n    },\n    rowNumberCU(dataItem) {\n      let ds = this.$refs.componentUseDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    rowNumberOP(dataItem) {\n      let ds = this.$refs.otherProductDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    UOMTemplateOP(dataItem) {\n      const uom = dataItem.uom;\n      if (uom) {\n        return `<span>${uom.uom ? uom.uom.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    UOMTemplateCU(dataItem) {\n      const uom = dataItem.uom;\n      if (uom) {\n        return `<span>${uom.uom ? uom.uom.name : ``}</span>`;\n      } else {\n        return ``;\n      }\n    },\n    rowNumberOC(dataItem) {\n      let ds = this.$refs.otherCostDS.kendoWidget(),\n        index = ds.indexOf(dataItem);\n      return index + 1;\n    },\n    async loadSegment() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.segments = [];\n          settingsHandler\n            .getSeg()\n            .then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.segments = res.data.data;\n                if (this.segments.length > 0) {\n                  this.productionOrder.segment = this.segments[0];\n                }\n                // this.segmentList = res.data.data\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    async loadLocation() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.locations = [];\n          locationHandler\n            .list()\n            .then((res) => {\n              this.showLoading = true;\n              if (res.data.statusCode === 200) {\n                this.showLoading = false;\n                this.locations = res.data.data;\n                if (this.locations.length > 0) {\n                  this.productionOrder.location = this.locations[0];\n                }\n              }\n            })\n            .catch();\n          {\n            this.showLoading = false;\n          }\n        }, 10);\n      });\n    },\n    async loadSaleChannel() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          this.showLoading = true;\n          saleChannelHandler.get().then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoading = false;\n              this.saleChannelList = res.data.data;\n              if (this.saleChannelList.length > 0) {\n                this.productionOrder.saleChannel = this.saleChannelList[0];\n              }\n            } else {\n              this.showLoading = false;\n            }\n          });\n        }, 10);\n      });\n    },\n    savePrint() {},\n    saveNew() {\n      this.showLoading = true;\n      this.productionOrder.bom = new BomModel(this.bomSeleted);\n      this.productionOrder.transactionNote = this.transactionNote;\n      this.productionOrder.status = 1;\n\n      productionOrderHandler.create(this.productionOrder).then((res) => {\n        this.showLoading = false;\n        // this.$router.push({\n        //   name: 'Products',\n        //   path: 'product',\n        //   params: {dataPO: res.data.data}\n        // })\n        window.console.log(res);\n      });\n    },\n    errorMessage() {},\n    accountDropDownEditor() {},\n    cancel() {},\n    hideSmallSidebar() {\n      this.isHideBar = !this.isHideBar;\n    },\n  },\n  watch: {\n    // call again the method if the route changes\n  },\n  async created() {\n    // fetch the data when the view is created and the data is\n    // already being observed\n    // this.loadObj()\n    // await this.loadPrefix()\n    this.productionOrder.dueDate = new Date().toISOString().substr(0, 10);\n    this.productionOrder.monthOf = new Date().toISOString().substr(0, 7);\n    await this.loadPrefix();\n  },\n  async mounted() {\n    // await this.loadPrefix()\n    await this.loadWarehouses();\n    await this.loadSaleChannel();\n    await this.loadSegment();\n    await this.loadLocation();\n    await this.loadProjects();\n    this.requestData(0, this.productBaseUrl);\n  },\n};\n</script>\n\n<style scoped>\n.small_sidebar {\n  height: 97%;\n  position: relative;\n  padding: 12px;\n}\n\n.hide_small_bar_class {\n  max-width: 0;\n  transition: 0.5s ease-in;\n  flex: 0 0 0;\n  padding: 0;\n}\n\n.hide_big_bar_class {\n  max-width: 100%;\n  transition: 0.5s ease-in;\n  flex: 0 0 100%;\n}\n\n.iconArrow {\n  right: -35px;\n  position: absolute;\n  bottom: -10px;\n}\n\n.iconArrowHide {\n  position: absolute;\n  right: -7px;\n  bottom: -10px;\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: transparent !important;\n}\n\n.detial_smallside_p {\n  position: absolute;\n  bottom: 10px;\n}\n@media (min-width: 1264px) {\n  .container {\n    /* max-width: 1185px; */\n    max-width: 1080px !important;\n  }\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products_services/product_variants/variants/Uom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products_services/product_variants/variants/Uom.vue","mtime":1643018811169},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVT01Db252ZXJzaW9uIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9VT01Db252ZXJzaW9uIjsKaW1wb3J0IGtlbmRvIGZyb20gIkBwcm9ncmVzcy9rZW5kby11aSI7CmltcG9ydCBzZXR0aW5nSGFuZGxlciBmcm9tICJAL3NjcmlwdHMvc2V0dGluZ0hhbmRsZXIiOwppbXBvcnQgVGF4TW9kZWwgZnJvbSAiQC9zY3JpcHRzL21vZGVsL1RheCI7Cgpjb25zdCB1b21IYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3VvbUhhbmRsZXIiKTsKY29uc3QgdW9tQ29udmVyc2lvbkhhbmRsZXIgPSByZXF1aXJlKCJAL3NjcmlwdHMvdW9tQ29udmVyc2lvbkhhbmRsZXIiKTsKY29uc3QgJCA9IGtlbmRvLmpRdWVyeQoKY29uc3QgdW9tQ29udmVyc2lvbk1vZGVsID0gbmV3IFVPTUNvbnZlcnNpb24oe30pOwppbXBvcnQgSlNaaXAgZnJvbSAianN6aXAiOwoKd2luZG93LkpTWmlwID0gSlNaaXA7CmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBMb2FkaW5nTWU6ICgpID0+IGltcG9ydChgQC9jb21wb25lbnRzL0xvYWRpbmdgKSwKICAgIH0sCiAgICBwcm9wczogewogICAgICAgIHByb2R1Y3Q6IHt9LAogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgZGlhbG9nbTI6IGZhbHNlLAogICAgICAgIHZhbGlkOiB0cnVlLAogICAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgICB1b206IFtdLAogICAgICAgIHVvbXM6IFtdLAogICAgICAgIHRheDogW10sCiAgICAgICAgdmF0OiBbXSwKICAgICAgICBwdXJjaGFzZVRheDogW10sCiAgICAgICAgcHVibGljTGlnaHRpbmdUYXg6IFtdLAogICAgICAgIG90aGVyVGF4OiBbXSwKICAgICAgICBzcGVjaWZpY1RheDogW10sCiAgICAgICAgbVVPTToge30sCiAgICAgICAgY29udmVyc2lvbkxpc3Q6IFtdLAogICAgICAgIGdyaWRTY2hlbWE6IHsKICAgICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgICAgIGlkOiAiaWQiLAogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgdW9tQ29udmVyc2lvbjogdW9tQ29udmVyc2lvbk1vZGVsCiAgICB9KSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBleGNlbEV4cG9ydDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgLy8gY29uc3QgcGl2b3QgPSB0aGlzLiRyZWZzLmdyaWRUcmFuc2FjdGlvbkRTLmtlbmRvV2lkZ2V0KCkKICAgICAgICAgICAgLy8gcGl2b3Quc2F2ZUFzRXhjZWwoKQogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZS5kYXRhKTsKICAgICAgICB9LAogICAgICAgIGluaXRUb29sYmFyKHRoYXQpIHsKICAgICAgICAgICAgbGV0IGdyaWQgPSAkKCIjZ3JpZFZhcmlhbnRVT00iKS5kYXRhKCJrZW5kb0dyaWQiKTsKICAgICAgICAgICAgbGV0IGdyaWRFbGVtZW50ID0gZ3JpZC5lbGVtZW50OwogICAgICAgICAgICBsZXQgdG9vbGJhckVsZW1lbnQgPSBncmlkRWxlbWVudC5maW5kKCIuay1ncmlkLXRvb2xiYXIiKTsKICAgICAgICAgICAgdG9vbGJhckVsZW1lbnQub24oImNsaWNrIiwgIi5rLXBhZ2VyLXJlZnJlc2giLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgb25SZWxvYWREYXRhKHRoYXQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdG9vbGJhckVsZW1lbnQub24oImNsaWNrIiwgIi5rLXBhZ2VyLWV4Y2VsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIG9uRXhwb3J0RXhjZWwodGhhdCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gb25SZWxvYWREYXRhKHRoYXQpIHsKICAgICAgICAgICAgICAgIHRoYXQubG9hZFVPTUNvbnZlcnNpb24oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gb25FeHBvcnRFeGNlbCh0aGF0KSB7CiAgICAgICAgICAgICAgICB0aGF0LmV4cG9ydFRvRXhjZWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZXhwb3J0VG9FeGNlbCgpIHsKICAgICAgICAgICAgY29uc3QgZ3JpZCA9ICQoIiNncmlkVmFyaWFudFVPTSIpLmRhdGEoImtlbmRvR3JpZCIpCiAgICAgICAgICAgIGdyaWQuc2F2ZUFzRXhjZWwoKQogICAgICAgIH0sCiAgICAgICAgdG9vbGJhclRlbXBsYXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlSHRtbCA9CiAgICAgICAgICAgICAgICAnPHNwYW4+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9ImstcGFnZXItZXhjZWwgay1saW5rIGstYnV0dG9uIGV4Y2VsIiB0aXRsZT0iRXhwb3J0IHRvIEV4Y2VsIj4gPHNwYW4gY2xhc3M9ImstaWNvbiBrLWktZXhjZWwiPjwvc3Bhbj5FeHBvcnQgdG8gZXhjZWwgPC9hPicgKwogICAgICAgICAgICAgICAgJzwvc3Bhbj48c3Bhbj4mbmJzcDsmbmJzcDs8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4gc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyByaWdodDo1cHgiPicgKwogICAgICAgICAgICAgICAgJzwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICc8c3Bhbj4nICsKICAgICAgICAgICAgICAgICc8YSBjbGFzcz0iay1wYWdlci1yZWZyZXNoIGstbGluayBrLWJ1dHRvbiByZWxvYWQiIHRpdGxlPSJSZWZyZXNoIj48c3BhbiBjbGFzcz0iay1pY29uIGstaS1yZWxvYWQiPjwvc3Bhbj4gUmVmcmVzaCA8L2E+JyArCiAgICAgICAgICAgICAgICAnPC9zcGFuPicKCiAgICAgICAgICAgIHJldHVybiBrZW5kby50ZW1wbGF0ZSh0ZW1wbGF0ZUh0bWwpCiAgICAgICAgfSwKICAgICAgICBvblVPTVR5cGVDaGFuZ2VkKCkgewogICAgICAgICAgICBpZiAodGhpcy5tVU9NKSB7CiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5tVU9NLm5hbWUgfHwgJycKICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnVvbUNvbnZlcnNpb24udHlwZSB8fCAxCiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodHlwZSkgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24uY29kZSA9IG5hbWUKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQodHlwZSkgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXRUYXggPSB0aGlzLnVvbUNvbnZlcnNpb24udmF0VGF4IHx8IHt9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGF4VHlwZSA9IHZhdFRheC5iYXNlQW1vdW50IHx8ICcnCiAgICAgICAgICAgICAgICAgICAgbGV0IHNob3J0VGV4dCA9ICcnCiAgICAgICAgICAgICAgICAgICAgaWYgKHRheFR5cGUuaW5jbHVkZXMoJ05ldCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0VGV4dCA9ICdORVQnCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXhUeXBlLmluY2x1ZGVzKCdpbmNsdXNpdmUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzaG9ydFRleHQgPSAnSU5DJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24uY29kZSA9IG5hbWUgKyAnL1QvJyArIHNob3J0VGV4dAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy51b21Db252ZXJzaW9uLmNvZGUgPSAnJwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMub25WYXRUYXhDaGFuZ2VkKCkKICAgICAgICB9LAogICAgICAgIGRhdGFCb3VuZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRWYXJpYW50VU9NIikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZS5zZW5kZXIuaXRlbXMoKTsKICAgICAgICAgICAgaXRlbXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YUl0ZW0gPSBncmlkLmRhdGFJdGVtKHRoaXMpOwogICAgICAgICAgICAgICAgJCgidHJbZGF0YS11aWQ9JyIgKyBkYXRhSXRlbS51aWQgKyAiJ10iKQogICAgICAgICAgICAgICAgICAgIC5maW5kKCIuaXNTeXN0ZW0iKQogICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFJdGVtLmlzU3lzdGVtID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCJrLXN0YXRlLWRpc2FibGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBjbG9zZSgpIHsKICAgICAgICAgICAgLy8gd2luZG93Lmhpc3RvcnkuZ28oLTEpCiAgICAgICAgICAgIHRoaXMuZGlhbG9nbTIgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIG5ld0NsaWNrKCkgewogICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0KSB7CiAgICAgICAgICAgICAgICBjb25zdCB1b20gPSB0aGlzLnByb2R1Y3QudW9tOwogICAgICAgICAgICAgICAgbGV0IHVDYXRlZ29yeSA9IHt9OwogICAgICAgICAgICAgICAgaWYgKHVvbS5oYXNPd25Qcm9wZXJ0eSgiY2F0ZWdvcnkiKSkgewogICAgICAgICAgICAgICAgICAgIHVDYXRlZ29yeSA9IHVvbS5jYXRlZ29yeTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodW9tLmhhc093blByb3BlcnR5KCJ0b1VPTSIpKSB7CiAgICAgICAgICAgICAgICAgICAgdUNhdGVnb3J5ID0gdW9tLnRvVU9NLmNhdGVnb3J5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy51b20gPSB0aGlzLnVvbXMuZmlsdGVyKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uY2F0ZWdvcnkuaWQgPT09IHVDYXRlZ29yeS5pZDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy51b21Db252ZXJzaW9uID0gbmV3IFVPTUNvbnZlcnNpb24oe30pOwogICAgICAgICAgICAgICAgdGhpcy5tVU9NID0ge307CiAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24udHlwZSA9IDEKICAgICAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi5yYXRlID0gMQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvblVPTUNoYW5nZWQoKSB7CiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygnbVVPTScsIHRoaXMubVVPTSkKICAgICAgICAgICAgLy8gbGV0IHJhdGUgPSB0aGlzLnVvbUNvbnZlcnNpb24ucmF0ZQogICAgICAgICAgICBpZiAodGhpcy5tVU9NLmlkID09PSB0aGlzLmJhc2VVT00uaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi5yYXRlID0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24uY29kZSA9IHRoaXMubVVPTS5uYW1lIHx8ICcnCiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkVU9NKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2R1Y3QuaGFzT3duUHJvcGVydHkoInVvbSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1b21IYW5kbGVyLmdldCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW9tcyA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1b20gPSB0aGlzLnByb2R1Y3QudW9tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1Q2F0ZWdvcnkgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW9tLmhhc093blByb3BlcnR5KCJjYXRlZ29yeSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVDYXRlZ29yeSA9IHVvbS5jYXRlZ29yeTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVvbS5oYXNPd25Qcm9wZXJ0eSgidG9VT00iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Q2F0ZWdvcnkgPSB1b20udG9VT00uY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh1b20sICJ1Q2F0ZWdvcnkiLCB1Q2F0ZWdvcnkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW9tID0gdGhpcy51b21zLmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jYXRlZ29yeS5pZCA9PT0gdUNhdGVnb3J5LmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudW9tID0gdGhpcy51b21zLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHJldHVybiBpdGVtLmNhdGVnb3J5LmlkID09PSB0aGlzLnByb2R1Y3QudW9tLmNhdGVnb3J5LmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgNTApOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRVT01Db252ZXJzaW9uKCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVvbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2R1Y3QuaGFzT3duUHJvcGVydHkoInVvbSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW9tID0gdGhpcy5wcm9kdWN0LnVvbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdUNhdGVnb3J5ID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVvbS5oYXNPd25Qcm9wZXJ0eSgiY2F0ZWdvcnkiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Q2F0ZWdvcnkgPSB1b20uY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1b20uaGFzT3duUHJvcGVydHkoInRvVU9NIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdUNhdGVnb3J5ID0gdW9tLnRvVU9NLmNhdGVnb3J5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbSA9IHRoaXMudW9tcy5maWx0ZXIoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uY2F0ZWdvcnkuaWQgPT09IHVDYXRlZ29yeS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1b21Db252ZXJzaW9uSGFuZGxlci5nZXQodGhpcy52YXJpYW50SWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVyc2lvbkxpc3QgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCA1MCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ29FZGl0KGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBsZXQgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRWYXJpYW50VU9NIikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgIGxldCBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwogICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24gPSBuZXcgVU9NQ29udmVyc2lvbihkYXRhSXRlbSk7CiAgICAgICAgICAgIHRoaXMubVVPTSA9IGRhdGFJdGVtLnRvVU9NOwogICAgICAgICAgICBjb25zdCB2YXRUYXggPSB0aGlzLnVvbUNvbnZlcnNpb24udmF0VGF4IHx8IHt9CiAgICAgICAgICAgIGNvbnN0IHB1cmNoYXNlVGF4ID0gdGhpcy51b21Db252ZXJzaW9uLnB1cmNoYXNlVGF4IHx8IHt9CiAgICAgICAgICAgIGNvbnN0IHNwZWNpZmljVGF4ID0gdGhpcy51b21Db252ZXJzaW9uLnNwZWNpZmljVGF4IHx8IHt9CiAgICAgICAgICAgIGNvbnN0IG90aGVyVGF4ID0gdGhpcy51b21Db252ZXJzaW9uLm90aGVyVGF4IHx8IHt9CiAgICAgICAgICAgIGNvbnN0IHZhdFRheElkID0gdmF0VGF4LmlkIHx8ICcnCiAgICAgICAgICAgIGNvbnN0IHB1cmNoYXNlVGF4SWQgPSBwdXJjaGFzZVRheC5pZCB8fCAnJwogICAgICAgICAgICBjb25zdCBzcGVjaWZpY1RheElkID0gc3BlY2lmaWNUYXguaWQgfHwgJycKICAgICAgICAgICAgY29uc3Qgb3RoZXJUYXhJZCA9IG90aGVyVGF4LmlkIHx8ICcnCiAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi52YXRUYXggPSB0aGlzLnZhdC5maWx0ZXIodGF4ID0+IHRheC5pZCA9PT0gdmF0VGF4SWQpWzBdCiAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi5wdXJjaGFzZVRheCA9IHRoaXMucHVyY2hhc2VUYXguZmlsdGVyKHRheCA9PiB0YXguaWQgPT09IHB1cmNoYXNlVGF4SWQpWzBdCiAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi5zcGVjaWZpY1RheCA9IHRoaXMuc3BlY2lmaWNUYXguZmlsdGVyKHRheCA9PiB0YXguaWQgPT09IHNwZWNpZmljVGF4SWQpWzBdCiAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi5vdGhlclRheCA9IHRoaXMub3RoZXJUYXguZmlsdGVyKHRheCA9PiB0YXguaWQgPT09IG90aGVyVGF4SWQpWzBdCiAgICAgICAgICAgIHRoaXMuZGlhbG9nbTIgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25TYXZlQ2xvc2UoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCJyZXNvbHZlZCIpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJVT00gPSB0aGlzLmJhc2VVT007CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYlVPTV8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBiVU9NLmlkLAogICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogYlVPTS5jYXRlZ29yeSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYlVPTS5uYW1lLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbVVPTSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMubVVPTS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMubVVPTS5jYXRlZ29yeSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5tVU9NLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBsZXQgdmF0VGF4ID0gbmV3IFRheE1vZGVsKHRoaXMudW9tQ29udmVyc2lvbi52YXRUYXgpCiAgICAgICAgICAgICAgICAgICAgbGV0IHB1cmNoYXNlVGF4ID0gbmV3IFRheE1vZGVsKHRoaXMudW9tQ29udmVyc2lvbi5wdXJjaGFzZVRheCkKICAgICAgICAgICAgICAgICAgICBsZXQgc3BlY2lmaWNUYXggPSBuZXcgVGF4TW9kZWwodGhpcy51b21Db252ZXJzaW9uLnNwZWNpZmljVGF4KQogICAgICAgICAgICAgICAgICAgIGxldCBvdGhlclRheCA9IG5ldyBUYXhNb2RlbCh0aGlzLnVvbUNvbnZlcnNpb24ub3RoZXJUYXgpCiAgICAgICAgICAgICAgICAgICAgbGV0IHB1YmxpY0xpZ2h0aW5nVGF4ID0gbmV3IFRheE1vZGVsKHRoaXMudW9tQ29udmVyc2lvbi5wdWJsaWNMaWdodGluZ1RheCkKICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodGhpcy51b21Db252ZXJzaW9uLnR5cGUgfHwgMSkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmF0VGF4ID0ge30KICAgICAgICAgICAgICAgICAgICAgICAgcHVyY2hhc2VUYXggPSB7fQogICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWZpY1RheCA9IHt9CiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyVGF4ID0ge30KICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljTGlnaHRpbmdUYXggPSB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMudW9tQ29udmVyc2lvbi5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudElkOiB0aGlzLnZhcmlhbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVVPTTogYlVPTV8sCiAgICAgICAgICAgICAgICAgICAgICAgIHRvVU9NOiBtVU9NLAogICAgICAgICAgICAgICAgICAgICAgICByYXRlOiB0aGlzLnVvbUNvbnZlcnNpb24ucmF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2tpcDogdGhpcy5jb252ZXJzaW9uTGlzdC5sZW5ndGggPiAwLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnVvbUNvbnZlcnNpb24udHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogdGhpcy51b21Db252ZXJzaW9uLmNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhdFRheDogdmF0VGF4LAogICAgICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZVRheDogcHVyY2hhc2VUYXgsCiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpZmljVGF4OiBzcGVjaWZpY1RheCwKICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXJUYXg6IG90aGVyVGF4LAogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNMaWdodGluZ1RheDogcHVibGljTGlnaHRpbmdUYXgKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHVvbUNvbnZlcnNpb25IYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgICAgIC5jcmVhdGUodGhpcy52YXJpYW50SWQsIGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVU9NQ29udmVyc2lvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc25vdGlmeS5zdWNjZXNzKCJTdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDUwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkVGF4KCkgewogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVzb2x2ZWQiKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nSGFuZGxlci5nZXQoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRheCA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ID0gdGhpcy50YXguZmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG0pID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDggJiYgbS50cmFuc2FjdGlvblR5cGUgPT09ICJTYWxlIgogICAgICAgICAgICAgICAgICAgICAgICApOyAvL3NwZWNpZmljIHRheAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWNpZmljVGF4ID0gc3Q7IC8vIHNwZWNpYWwgdGF4CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdkFUID0gdGhpcy50YXguZmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG0pID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDEgJiYgbS50cmFuc2FjdGlvblR5cGUgPT09ICJTYWxlIgogICAgICAgICAgICAgICAgICAgICAgICApOyAvLyB2YWx1YWJsZSB0YXgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YXQgPSB2QVQ7IC8vIHZhbHVhYmxlIHRheAoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG90VGF4ID0gdGhpcy50YXguZmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG0pID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDcgJiYgbS50cmFuc2FjdGlvblR5cGUgPT09ICJTYWxlIgogICAgICAgICAgICAgICAgICAgICAgICApOyAvLyBPdGhlciB0YXgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdGhlclRheCA9IG90VGF4OyAvLyB2YWx1YWJsZSB0YXgKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVyY2hhc2VUYXggPSB0aGlzLnRheC5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobSkgPT4gbS50YXhUeXBlLnR5cGVJZCA9PT0gMSAmJiBtLnRyYW5zYWN0aW9uVHlwZSA9PT0gIlB1cmNoYXNlIgogICAgICAgICAgICAgICAgICAgICAgICApOyAvLyB2YWx1YWJsZSB0YXgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWJsaWNMaWdodGluZ1RheCA9IHRoaXMudGF4LmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtKSA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtLnRheFR5cGUudHlwZUlkID09PSA5IHx8IG0udGF4VHlwZS50eXBlSWQgPT09IDEwKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSIKICAgICAgICAgICAgICAgICAgICAgICAgKTsgLy8gdmFsdWFibGUgdGF4CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubVB1cmNoYXNlVGF4ID0gcHVyY2hhc2VUYXggLy8gdmFsdWFibGUgdGF4CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zcGVjaWZpY1RheC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24uc3BlY2lmaWNUYXggPSB0aGlzLnNwZWNpZmljVGF4WzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24udmF0ID0gdGhpcy52YXRbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3RoZXJUYXgubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51b21Db252ZXJzaW9uLm90aGVyVGF4ID0gdGhpcy5vdGhlclRheFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wdXJjaGFzZVRheC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24ucHVyY2hhc2VUYXggPSB0aGlzLnB1cmNoYXNlVGF4WzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgb25WYXRUYXhDaGFuZ2VkKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgdmF0VGF4ID0gdGhpcy51b21Db252ZXJzaW9uLnZhdFRheCB8fCB7fQogICAgICAgICAgICAgICAgY29uc3QgdGF4VHlwZSA9IHZhdFRheC5iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgIHRoaXMuc3BlY2lmaWNUYXggPSB0aGlzLnRheC5maWx0ZXIoKG0pID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDggJiYgbS50cmFuc2FjdGlvblR5cGUgPT09ICJTYWxlIik7IC8vc3BlY2lmaWMgdGF4CiAgICAgICAgICAgICAgICB0aGlzLnB1cmNoYXNlVGF4ID0gdGhpcy50YXguZmlsdGVyKChtKSA9PiBtLnRheFR5cGUudHlwZUlkID09PSAxICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiUHVyY2hhc2UiKTsKICAgICAgICAgICAgICAgIHRoaXMub3RoZXJUYXggPSB0aGlzLnRheC5maWx0ZXIoKG0pID0+IG0udGF4VHlwZS50eXBlSWQgPT09IDcgJiYgbS50cmFuc2FjdGlvblR5cGUgPT09ICJTYWxlIik7IC8vIE90aGVyIHRheAogICAgICAgICAgICAgICAgdGhpcy5wdWJsaWNMaWdodGluZ1RheCA9IHRoaXMudGF4LmZpbHRlcigobSkgPT4gKG0udGF4VHlwZS50eXBlSWQgPT09IDkgfHwgbS50YXhUeXBlLnR5cGVJZCA9PT0gMTApICYmIG0udHJhbnNhY3Rpb25UeXBlID09PSAiU2FsZSIpOwogICAgICAgICAgICAgICAgdGhpcy5wdXJjaGFzZVRheCA9IHRoaXMucHVyY2hhc2VUYXguZmlsdGVyKGsgPT4gay5iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09IHRheFR5cGUpCiAgICAgICAgICAgICAgICB0aGlzLnB1YmxpY0xpZ2h0aW5nVGF4ID0gdGhpcy5wdWJsaWNMaWdodGluZ1RheC5maWx0ZXIoayA9PiBrLmJhc2VBbW91bnQudG9Mb3dlckNhc2UoKSA9PT0gdGF4VHlwZSkKICAgICAgICAgICAgICAgIHRoaXMub3RoZXJUYXggPSB0aGlzLm90aGVyVGF4LmZpbHRlcihrID0+IGsuYmFzZUFtb3VudC50b0xvd2VyQ2FzZSgpID09PSB0YXhUeXBlKQogICAgICAgICAgICAgICAgdGhpcy5zcGVjaWZpY1RheCA9IHRoaXMuc3BlY2lmaWNUYXguZmlsdGVyKGsgPT4gay5iYXNlQW1vdW50LnRvTG93ZXJDYXNlKCkgPT09IHRheFR5cGUpCgogICAgICAgICAgICAgICAgaWYgKHRoaXMubVVPTSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm1VT00ubmFtZSB8fCAnJwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnVvbUNvbnZlcnNpb24udHlwZSB8fCAxCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHR5cGUpID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW9tQ29udmVyc2lvbi5jb2RlID0gbmFtZQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQodHlwZSkgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmF0VGF4ID0gdGhpcy51b21Db252ZXJzaW9uLnZhdFRheCB8fCB7fQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXhUeXBlID0gdmF0VGF4LmJhc2VBbW91bnQgfHwgJycKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNob3J0VGV4dCA9ICcnCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXhUeXBlLmluY2x1ZGVzKCdOZXQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRUZXh0ID0gJ05FVCcKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXhUeXBlLmluY2x1ZGVzKCdpbmNsdXNpdmUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRUZXh0ID0gJ0lOQycKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVvbUNvbnZlcnNpb24uY29kZSA9IG5hbWUgKyAnL1QvJyArIHNob3J0VGV4dAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51b21Db252ZXJzaW9uLmNvZGUgPSAnJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ2Vycm9yLScsIGUpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBwcm9kdWN0KCkgewogICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkVU9NKCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRVT01Db252ZXJzaW9uKCk7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vICckcm91dGUnOiAnbG9hZFVPTUNvbnZlcnNpb24nCiAgICB9LAogICAgbW91bnRlZDogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGF3YWl0IHRoaXMubG9hZFVPTSgpOwogICAgICAgIGF3YWl0IHRoaXMubG9hZFVPTUNvbnZlcnNpb24oKTsKICAgICAgICBhd2FpdCB0aGlzLmxvYWRUYXgoKTsKICAgICAgICBhd2FpdCB0aGlzLmluaXRUb29sYmFyKHRoaXMpOwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgYmFzZVVPTU5hbWUoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnByb2R1Y3QpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHVvbSA9IHRoaXMucHJvZHVjdC51b20gfHwge307CiAgICAgICAgICAgICAgICBpZiAodW9tLmhhc093blByb3BlcnR5KCJ0b1VPTSIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVvbS50b1VPTS5uYW1lIHx8ICIiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW9tLm5hbWUgfHwgIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGJhc2VVT00oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnByb2R1Y3QpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHVvbSA9IHRoaXMucHJvZHVjdC51b20gfHwge307CiAgICAgICAgICAgICAgICBpZiAodW9tLmhhc093blByb3BlcnR5KCJ0b1VPTSIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVvbS50b1VPTTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVvbTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFyaWFudElkKCkgewogICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0KSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0Lmhhc093blByb3BlcnR5KCJpZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdC5pZDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjb252ZXJzaW9uVU9NKCkgewogICAgICAgICAgICBpZiAodGhpcy5tVU9NKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICIxICIgKwogICAgICAgICAgICAgICAgICAgIHRoaXMubVVPTS5uYW1lICsKICAgICAgICAgICAgICAgICAgICAiID0gIiArCiAgICAgICAgICAgICAgICAgICAgMSAvIHRoaXMudW9tQ29udmVyc2lvbi5yYXRlICsKICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFzZVVPTU5hbWUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIHVvbUNvZGUoKSB7CiAgICAgICAgLy8gICAgIGlmICh0aGlzLm1VT00pIHsKICAgICAgICAvLyAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm1VT00ubmFtZSB8fCAnJwogICAgICAgIC8vICAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMudW9tQ29udmVyc2lvbi50eXBlIHx8IDAKICAgICAgICAvLyAgICAgICAgIGlmICh0eXBlID09PSAwKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuIG5hbWUKICAgICAgICAvLyAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gMSkgewogICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBuYW1lICsgJy1UJwogICAgICAgIC8vICAgICAgICAgfQogICAgICAgIC8vICAgICB9IGVsc2UgewogICAgICAgIC8vICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gICAgIHJldHVybiAiIjsKICAgICAgICAvLyB9LAogICAgfSwKfTsK"},{"version":3,"sources":["Uom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Uom.vue","sourceRoot":"src/views/products_services/product_variants/variants","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <h2 class=\"float-left font_18\">{{ $t(\"unit_of_measure\") }}</h2>\n            <v-dialog v-model=\"dialogm2\" max-width=\"650px\">\n                <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                        color=\"primary\"\n                        class=\"btn_create_new float-right \"\n                        v-on=\"on\"\n                        @click=\"newClick\"\n                    >\n                        {{ $t(\"new_uom\") }}\n                    </v-btn>\n                </template>\n                <v-card>\n                    <div class=\"modal_header\">\n                        <v-card-title>{{ $t(\"product_uom\") }}</v-card-title>\n                        <v-icon @click=\"dialogm2 = false\">close</v-icon>\n                    </div>\n\n                    <v-card-text class=\"modal_text_content\">\n                        <v-row>\n                            <v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n                                <p class=\"mb-1\">{{ $t(\"base_uom\") }}</p>\n                                <p class=\"text-bold mb-1\">{{ baseUOMName }}</p>\n                                <p class=\"mb-0\">{{ $t(\"base_uom_desc\") }}</p>\n                            </v-col>\n                        </v-row>\n                        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                            <v-row class=\"mt-0\">\n                                <v-col class=\"py-0\" sm=\"6\" cols=\"12\">\n                                    <label class=\"label\">{{ $t(\"new_uom\") }}</label>\n                                    <p class=\"text_tip\">{{ $t(\"1_day_base_uom\") }}</p>\n                                    <v-select\n                                        class=\"\"\n                                        tage=\"UOM\"\n                                        v-model=\"mUOM\"\n                                        :items=\"uom\"\n                                        item-value=\"id\"\n                                        item-text=\"name\"\n                                        :rules=\"[(v) => !!v['id'] || $t('is_required')]\"\n                                        @change=\"onUOMChanged\"\n                                        return-object\n                                        outlined\n                                    />\n                                    <p class=\"text_tip mb-0\">{{ $t(\"conversion_rate\") }}</p>\n                                    <label> {{ conversionUOM }}</label>\n                                </v-col>\n                                <v-col class=\"py-0\" sm=\"3\" cols=\"12\">\n                                    <label>{{ $t(\"code\") }}</label>\n                                    <v-text-field\n                                        class=\"mt-6\"\n                                        outlined\n                                        :disabled=\"true\"\n                                        v-model=\"uomConversion.code\"\n                                        :rules=\"[(v) => !!v || $t('is_required')]\"\n                                    />\n                                </v-col>\n                                <v-col class=\"py-0\" sm=\"3\" cols=\"12\">\n                                    <label>{{ $t(\"rate\") }}</label>\n                                    <v-text-field\n                                        class=\"mt-6\"\n                                        outlined\n                                        v-model=\"uomConversion.rate\"\n                                        :rules=\"[(v) => !!v || $t('is_required')]\"\n                                        type=\"number\"\n                                        min=\"0.00000001\"\n                                        clearable\n                                    />\n                                </v-col>\n                            </v-row>\n                            <v-row class=\"mt-4\">\n                                <v-col sm=\"2\" cols=\"12\" class=\"py-0 pl-0\">\n                                    <v-radio-group class=\"mt-0\" v-model=\"uomConversion.type\" @change=\"onUOMTypeChanged\"\n                                                   :mandatory=\"false\">\n                                        <v-col sm=\"3\" cols=\"2\" class=\"pa-0 ml-2 mb-3\" style=\"line-height: 40px;\">\n                                            <v-radio :label=\"$t('non_tax')\" value=1 color=\"blue\"/>\n                                        </v-col>\n                                        <v-col sm=\"3\" cols=\"2\" class=\"pa-0 ml-2 mb-3\" style=\"line-height: 40px;\">\n                                            <v-radio :label=\"$t('tax')\" value=2 color=\"blue\"/>\n                                        </v-col>\n                                    </v-radio-group>\n                                </v-col>\n                                <v-col sm=\"5\" cols=\"12\" class=\"py-0\">\n                                    <label class=\"label\">{{ $t(\"vat\") }}</label>\n                                    <v-select\n                                        class=\"mt-1\"\n                                        tage=\"Default Tax\"\n                                        v-model=\"uomConversion.vatTax\"\n                                        :items=\"vat\"\n                                        @change=\"onVatTaxChanged\"\n                                        item-value=\"id\"\n                                        item-text=\"defaultTax\"\n                                        return-object\n                                        outlined\n                                    />\n                                    <label class=\"label\">{{ $t(\"purchase_tax\") }}</label>\n                                    <v-select\n                                        class=\"mt-1\"\n                                        tage=\"Default Tax\"\n                                        v-model=\"uomConversion.purchaseTax\"\n                                        :items=\"purchaseTax\"\n                                        item-value=\"id\"\n                                        item-text=\"defaultTax\"\n                                        return-object\n                                        outlined\n                                    />\n                                    <label class=\"label\">{{ $t(\"public_lighting_tax\") }}</label>\n                                    <v-select\n                                        class=\"mt-1\"\n                                        tage=\"Default Tax\"\n                                        v-model=\"uomConversion.publicLightingTax\"\n                                        :items=\"publicLightingTax\"\n                                        item-value=\"id\"\n                                        item-text=\"defaultTax\"\n                                        return-object\n                                        outlined\n                                    />\n                                </v-col>\n                                <v-col sm=\"5\" cols=\"12\" class=\"py-0\">\n                                    <label class=\"label\">{{ $t(\"specific_tax\") }}</label>\n                                    <v-select\n                                        class=\"mt-1\"\n                                        tage=\"Special Tax\"\n                                        v-model=\"uomConversion.specificTax\"\n                                        :items=\"specificTax\"\n                                        item-value=\"id\"\n                                        item-text=\"defaultTax\"\n                                        return-object\n                                        outlined\n                                    />\n                                    <label class=\"label\">{{ $t(\"other_tax\") }}</label>\n                                    <v-select\n                                        class=\"mt-1\"\n                                        tage=\"Other Tax\"\n                                        v-model=\"uomConversion.otherTax\"\n                                        :items=\"otherTax\"\n                                        item-value=\"id\"\n                                        item-text=\"defaultTax\"\n                                        return-object\n                                        outlined\n                                    />\n                                </v-col>\n\n                            </v-row>\n                        </v-form>\n                    </v-card-text>\n                    <v-card-actions class=\"modal_footer\">\n                        <v-row>\n                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-left\">\n                                <v-btn\n                                    color=\"black\"\n                                    outlined\n                                    class=\" text-capitalize  black--text float-left\"\n                                    @click=\"dialogm2 = false\"\n                                >{{ $t(\"cancel\") }}\n                                </v-btn>\n                            </v-col>\n                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-right\">\n                                <v-btn\n                                    color=\"primary\"\n                                    class=\"px-3  white--text text-capitalize\"\n                                    @click=\"onSaveClose\">\n                                    {{ $t(\"save_close\") }}\n                                </v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </v-col>\n        <v-col sm=\"12\" clos=\"12\" class=\"pt-0\">\n            <LoadingMe\n                :isLoading=\"showLoading\"\n                :fullPage=\"false\"\n                type=\"loading\"\n                :myLoading=\"true\"\n            />\n            <kendo-datasource\n                ref=\"dataSource\"\n                :data=\"conversionList\"\n                :schema=\"gridSchema\"\n            />\n            <kendo-grid\n                id=\"gridVariantUOM\"\n                class=\"grid-function\"\n                :data-source-ref=\"'dataSource'\"\n                v-on:databound=\"dataBound\"\n                :style=\"{ width: '100%' }\"\n                :noRecords=\"true\"\n                :toolbar=\"toolbarTemplate\"\n                :excel-export=\"excelExport\"\n                :excel-file-name=\"'uomConversionList.xlsx'\"\n                :excel-filterable=\"true\"\n                :scrollable-virtual=\"true\">\n                <kendo-grid-column\n                    :field=\"'toUOM'\"\n                    :title=\"$t('uom')\"\n                    :width=\"100\"\n                    :template=\"'<span>#=toUOM.name#</span>'\"\n                    :groupHeaderColumnTemplate=\"'#=value#'\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                    :field=\"'code'\"\n                    :title=\"$t('code')\"\n                    :width=\"100\"\n                    :template=\"'<span>#=code || ``#</span>'\"\n                    :groupHeaderColumnTemplate=\"'#=value#'\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                    :field=\"'rate'\"\n                    :title=\"$t('rate')\"\n                    :width=\"50\"\n                    :template=\"'<span>#=rate#</span>'\"\n                    :attributes=\"{style: 'text-align: right'}\"\n                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"\n                />\n                <kendo-grid-column\n                    :field=\"'conversionRate'\"\n                    :title=\"$t('conversion_rate')\"\n                    :template=\"'<span>#=conversionRate || 0#</span>'\"\n                    :attributes=\"{style: 'text-align: right'}\"\n                    :width=\"120\"\n                    :headerAttributes=\"{\n            style: 'text-align: left; background-color: #EDF1F5',\n          }\"\n                />\n                <kendo-grid-column\n                    :field=\"''\"\n                    :title=\"$t('action')\"\n                    :width=\"70\"\n                    :command=\"[\n            {\n              text: $t('edit'),\n              click: goEdit,\n              className: 'k-state-disabled isSystem',\n            },\n          ]\"\n                    :headerAttributes=\"{\n            style: 'text-align: left; background-color: #EDF1F5',\n          }\"\n                />\n            </kendo-grid>\n        </v-col>\n    </v-row>\n</template>\n<script>\nimport UOMConversion from \"@/scripts/model/UOMConversion\";\nimport kendo from \"@progress/kendo-ui\";\nimport settingHandler from \"@/scripts/settingHandler\";\nimport TaxModel from \"@/scripts/model/Tax\";\n\nconst uomHandler = require(\"@/scripts/uomHandler\");\nconst uomConversionHandler = require(\"@/scripts/uomConversionHandler\");\nconst $ = kendo.jQuery\n\nconst uomConversionModel = new UOMConversion({});\nimport JSZip from \"jszip\";\n\nwindow.JSZip = JSZip;\nexport default {\n    components: {\n        LoadingMe: () => import(`@/components/Loading`),\n    },\n    props: {\n        product: {},\n    },\n    data: () => ({\n        dialogm2: false,\n        valid: true,\n        showLoading: false,\n        uom: [],\n        uoms: [],\n        tax: [],\n        vat: [],\n        purchaseTax: [],\n        publicLightingTax: [],\n        otherTax: [],\n        specificTax: [],\n        mUOM: {},\n        conversionList: [],\n        gridSchema: {\n            model: {\n                id: \"id\",\n            },\n        },\n        uomConversion: uomConversionModel\n    }),\n    methods: {\n        excelExport: function (e) {\n            // const pivot = this.$refs.gridTransactionDS.kendoWidget()\n            // pivot.saveAsExcel()\n            window.console.log(e.data);\n        },\n        initToolbar(that) {\n            let grid = $(\"#gridVariantUOM\").data(\"kendoGrid\");\n            let gridElement = grid.element;\n            let toolbarElement = gridElement.find(\".k-grid-toolbar\");\n            toolbarElement.on(\"click\", \".k-pager-refresh\", function (e) {\n                e.preventDefault();\n                onReloadData(that);\n            });\n            toolbarElement.on(\"click\", \".k-pager-excel\", function (e) {\n                e.preventDefault();\n                onExportExcel(that);\n            });\n\n            function onReloadData(that) {\n                that.loadUOMConversion();\n            }\n\n            function onExportExcel(that) {\n                that.exportToExcel();\n            }\n        },\n        exportToExcel() {\n            const grid = $(\"#gridVariantUOM\").data(\"kendoGrid\")\n            grid.saveAsExcel()\n        },\n        toolbarTemplate: function () {\n            const templateHtml =\n                '<span>' +\n                '<a class=\"k-pager-excel k-link k-button excel\" title=\"Export to Excel\"> <span class=\"k-icon k-i-excel\"></span>Export to excel </a>' +\n                '</span><span>&nbsp;&nbsp;</span>' +\n                '<span style=\"position:absolute; right:5px\">' +\n                '</span>' +\n                '<span>' +\n                '<a class=\"k-pager-refresh k-link k-button reload\" title=\"Refresh\"><span class=\"k-icon k-i-reload\"></span> Refresh </a>' +\n                '</span>'\n\n            return kendo.template(templateHtml)\n        },\n        onUOMTypeChanged() {\n            if (this.mUOM) {\n                const name = this.mUOM.name || ''\n                const type = this.uomConversion.type || 1\n                if (parseInt(type) === 1) {\n                    this.uomConversion.code = name\n                } else if (parseInt(type) === 2) {\n                    const vatTax = this.uomConversion.vatTax || {}\n                    const taxType = vatTax.baseAmount || ''\n                    let shortText = ''\n                    if (taxType.includes('Net')) {\n                        shortText = 'NET'\n                    } else if (taxType.includes('inclusive')) {\n                        shortText = 'INC'\n                    }\n                    this.uomConversion.code = name + '/T/' + shortText\n                }\n            } else {\n                this.uomConversion.code = ''\n            }\n            this.onVatTaxChanged()\n        },\n        dataBound: function (e) {\n            const grid = kendo.jQuery(\"#gridVariantUOM\").data(\"kendoGrid\");\n            const items = e.sender.items();\n            items.each(function () {\n                let dataItem = grid.dataItem(this);\n                $(\"tr[data-uid='\" + dataItem.uid + \"']\")\n                    .find(\".isSystem\")\n                    .each(function () {\n                        if (dataItem.isSystem === 0) {\n                            $(this).removeClass(\"k-state-disabled\");\n                        }\n                    });\n            });\n        },\n        close() {\n            // window.history.go(-1)\n            this.dialogm2 = false;\n        },\n        newClick() {\n            if (this.product) {\n                const uom = this.product.uom;\n                let uCategory = {};\n                if (uom.hasOwnProperty(\"category\")) {\n                    uCategory = uom.category;\n                } else if (uom.hasOwnProperty(\"toUOM\")) {\n                    uCategory = uom.toUOM.category;\n                }\n                this.uom = this.uoms.filter((item) => {\n                    return item.category.id === uCategory.id;\n                });\n                this.uomConversion = new UOMConversion({});\n                this.mUOM = {};\n                this.uomConversion.type = 1\n                this.uomConversion.rate = 1\n            }\n        },\n        onUOMChanged() {\n            window.console.log('mUOM', this.mUOM)\n            // let rate = this.uomConversion.rate\n            if (this.mUOM.id === this.baseUOM.id) {\n                this.uomConversion.rate = 1;\n            }\n            this.uomConversion.code = this.mUOM.name || ''\n        },\n        async loadUOM() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.product) {\n                        if (this.product.hasOwnProperty(\"uom\")) {\n                            uomHandler.get().then((res) => {\n                                this.uoms = res;\n                                const uom = this.product.uom;\n                                let uCategory = {};\n                                if (uom.hasOwnProperty(\"category\")) {\n                                    uCategory = uom.category;\n                                } else if (uom.hasOwnProperty(\"toUOM\")) {\n                                    uCategory = uom.toUOM.category;\n                                }\n                                window.console.log(uom, \"uCategory\", uCategory);\n                                this.uom = this.uoms.filter((item) => {\n                                    return item.category.id === uCategory.id;\n                                });\n                                // this.uom = this.uoms.filter(item => {\n                                //   return item.category.id === this.product.uom.category.id\n                                // })\n                            });\n                        }\n                    }\n                }, 50);\n            });\n        },\n        async loadUOMConversion() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    if (this.product) {\n                        if (this.uoms) {\n                            if (this.product.hasOwnProperty(\"uom\")) {\n                                const uom = this.product.uom;\n                                let uCategory = {};\n                                if (uom.hasOwnProperty(\"category\")) {\n                                    uCategory = uom.category;\n                                } else if (uom.hasOwnProperty(\"toUOM\")) {\n                                    uCategory = uom.toUOM.category;\n                                }\n                                this.uom = this.uoms.filter((item) => {\n                                    return item.category.id === uCategory.id;\n                                });\n                                this.showLoading = true;\n                                uomConversionHandler.get(this.variantId).then((res) => {\n                                    this.showLoading = false;\n                                    this.conversionList = res;\n                                });\n                            }\n                        }\n                    }\n                }, 50);\n            });\n        },\n        async goEdit(e) {\n            e.preventDefault();\n            let grid = kendo.jQuery(\"#gridVariantUOM\").data(\"kendoGrid\");\n            let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n            this.uomConversion = new UOMConversion(dataItem);\n            this.mUOM = dataItem.toUOM;\n            const vatTax = this.uomConversion.vatTax || {}\n            const purchaseTax = this.uomConversion.purchaseTax || {}\n            const specificTax = this.uomConversion.specificTax || {}\n            const otherTax = this.uomConversion.otherTax || {}\n            const vatTaxId = vatTax.id || ''\n            const purchaseTaxId = purchaseTax.id || ''\n            const specificTaxId = specificTax.id || ''\n            const otherTaxId = otherTax.id || ''\n            this.uomConversion.vatTax = this.vat.filter(tax => tax.id === vatTaxId)[0]\n            this.uomConversion.purchaseTax = this.purchaseTax.filter(tax => tax.id === purchaseTaxId)[0]\n            this.uomConversion.specificTax = this.specificTax.filter(tax => tax.id === specificTaxId)[0]\n            this.uomConversion.otherTax = this.otherTax.filter(tax => tax.id === otherTaxId)[0]\n            this.dialogm2 = true;\n        },\n        async onSaveClose() {\n            if (!this.$refs.form.validate()) {\n                this.$refs.form.validate();\n                return;\n            }\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    const bUOM = this.baseUOM;\n                    const bUOM_ = {\n                        id: bUOM.id,\n                        category: bUOM.category,\n                        name: bUOM.name,\n                    };\n                    const mUOM = {\n                        id: this.mUOM.id,\n                        category: this.mUOM.category,\n                        name: this.mUOM.name,\n                    };\n                    let vatTax = new TaxModel(this.uomConversion.vatTax)\n                    let purchaseTax = new TaxModel(this.uomConversion.purchaseTax)\n                    let specificTax = new TaxModel(this.uomConversion.specificTax)\n                    let otherTax = new TaxModel(this.uomConversion.otherTax)\n                    let publicLightingTax = new TaxModel(this.uomConversion.publicLightingTax)\n                    if (parseInt(this.uomConversion.type || 1) === 0) {\n                        vatTax = {}\n                        purchaseTax = {}\n                        specificTax = {}\n                        otherTax = {}\n                        publicLightingTax = {}\n                    }\n                    let data = {\n                        id: this.uomConversion.id,\n                        variantId: this.variantId,\n                        fromUOM: bUOM_,\n                        toUOM: mUOM,\n                        rate: this.uomConversion.rate,\n                        skip: this.conversionList.length > 0,\n                        type: this.uomConversion.type,\n                        code: this.uomConversion.code,\n                        vatTax: vatTax,\n                        purchaseTax: purchaseTax,\n                        specificTax: specificTax,\n                        otherTax: otherTax,\n                        publicLightingTax: publicLightingTax\n                    };\n                    uomConversionHandler\n                        .create(this.variantId, data)\n                        .then((response) => {\n                            if (response.data.statusCode === 201) {\n                                this.loadUOMConversion()\n                                this.$snotify.success(\"Success\");\n                                this.close();\n                            }\n                        })\n                        .catch((e) => {\n                            this.$snotify.error(\"Something went wrong\");\n                            this.errors.push(e);\n                        });\n                }, 50);\n            });\n        },\n        async loadTax() {\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    resolve(\"resolved\");\n                    settingHandler.get().then((res) => {\n                        this.showLoading = false;\n                        this.tax = res;\n                        let st = this.tax.filter(\n                            (m) => m.taxType.typeId === 8 && m.transactionType === \"Sale\"\n                        ); //specific tax\n                        this.specificTax = st; // special tax\n\n                        let vAT = this.tax.filter(\n                            (m) => m.taxType.typeId === 1 && m.transactionType === \"Sale\"\n                        ); // valuable tax\n                        this.vat = vAT; // valuable tax\n\n                        let otTax = this.tax.filter(\n                            (m) => m.taxType.typeId === 7 && m.transactionType === \"Sale\"\n                        ); // Other tax\n                        this.otherTax = otTax; // valuable tax\n\n                        this.purchaseTax = this.tax.filter(\n                            (m) => m.taxType.typeId === 1 && m.transactionType === \"Purchase\"\n                        ); // valuable tax\n                        this.publicLightingTax = this.tax.filter(\n                            (m) =>\n                                (m.taxType.typeId === 9 || m.taxType.typeId === 10) &&\n                                m.transactionType === \"Sale\"\n                        ); // valuable tax\n                        // this.mPurchaseTax = purchaseTax // valuable tax\n\n                        if (this.specificTax.length > 0) {\n                            this.uomConversion.specificTax = this.specificTax[0];\n                        }\n                        if (this.vat.length > 0) {\n                            this.uomConversion.vat = this.vat[0];\n                        }\n                        if (this.otherTax.length > 0) {\n                            this.uomConversion.otherTax = this.otherTax[0];\n                        }\n                        if (this.purchaseTax.length > 0) {\n                            this.uomConversion.purchaseTax = this.purchaseTax[0];\n                        }\n                    });\n                }, 10);\n            });\n        },\n        onVatTaxChanged() {\n            try {\n                const vatTax = this.uomConversion.vatTax || {}\n                const taxType = vatTax.baseAmount.toLowerCase()\n                this.specificTax = this.tax.filter((m) => m.taxType.typeId === 8 && m.transactionType === \"Sale\"); //specific tax\n                this.purchaseTax = this.tax.filter((m) => m.taxType.typeId === 1 && m.transactionType === \"Purchase\");\n                this.otherTax = this.tax.filter((m) => m.taxType.typeId === 7 && m.transactionType === \"Sale\"); // Other tax\n                this.publicLightingTax = this.tax.filter((m) => (m.taxType.typeId === 9 || m.taxType.typeId === 10) && m.transactionType === \"Sale\");\n                this.purchaseTax = this.purchaseTax.filter(k => k.baseAmount.toLowerCase() === taxType)\n                this.publicLightingTax = this.publicLightingTax.filter(k => k.baseAmount.toLowerCase() === taxType)\n                this.otherTax = this.otherTax.filter(k => k.baseAmount.toLowerCase() === taxType)\n                this.specificTax = this.specificTax.filter(k => k.baseAmount.toLowerCase() === taxType)\n\n                if (this.mUOM) {\n                    const name = this.mUOM.name || ''\n                    const type = this.uomConversion.type || 1\n                    if (parseInt(type) === 1) {\n                        this.uomConversion.code = name\n                    } else if (parseInt(type) === 2) {\n                        const vatTax = this.uomConversion.vatTax || {}\n                        const taxType = vatTax.baseAmount || ''\n                        let shortText = ''\n                        if (taxType.includes('Net')) {\n                            shortText = 'NET'\n                        } else if (taxType.includes('inclusive')) {\n                            shortText = 'INC'\n                        }\n                        this.uomConversion.code = name + '/T/' + shortText\n                    }\n                } else {\n                    this.uomConversion.code = ''\n                }\n            } catch (e) {\n                window.console.log('error-', e)\n            }\n        }\n    },\n    watch: {\n        product() {\n            if (this.product !== undefined) {\n                this.showLoading = true;\n                this.loadUOM();\n                this.loadUOMConversion();\n                this.showLoading = false;\n            }\n        },\n        // '$route': 'loadUOMConversion'\n    },\n    mounted: async function () {\n        await this.loadUOM();\n        await this.loadUOMConversion();\n        await this.loadTax();\n        await this.initToolbar(this);\n    },\n    computed: {\n        baseUOMName() {\n            if (this.product) {\n                const uom = this.product.uom || {};\n                if (uom.hasOwnProperty(\"toUOM\")) {\n                    return uom.toUOM.name || \"\";\n                } else {\n                    return uom.name || \"\";\n                }\n            } else {\n                return \"\";\n            }\n        },\n        baseUOM() {\n            if (this.product) {\n                const uom = this.product.uom || {};\n                if (uom.hasOwnProperty(\"toUOM\")) {\n                    return uom.toUOM;\n                } else {\n                    return uom;\n                }\n            } else {\n                return \"\";\n            }\n        },\n        variantId() {\n            if (this.product) {\n                if (this.product.hasOwnProperty(\"id\")) {\n                    return this.product.id;\n                } else {\n                    return \"\";\n                }\n            } else {\n                return \"\";\n            }\n        },\n        conversionUOM() {\n            if (this.mUOM) {\n                return (\n                    \"1 \" +\n                    this.mUOM.name +\n                    \" = \" +\n                    1 / this.uomConversion.rate +\n                    \" \" +\n                    this.baseUOMName\n                );\n            } else {\n                return \"\";\n            }\n        },\n        // uomCode() {\n        //     if (this.mUOM) {\n        //         const name = this.mUOM.name || ''\n        //         const type = this.uomConversion.type || 0\n        //         if (type === 0) {\n        //             return name\n        //         } else if (type === 1) {\n        //             return name + '-T'\n        //         }\n        //     } else {\n        //         return \"\";\n        //     }\n        //     return \"\";\n        // },\n    },\n};\n</script>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/components/Transaction.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/components/Transaction.vue","mtime":1638499442942},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KICAgIAogICAgaW1wb3J0IGtlbmRvIGZyb20gJ0Bwcm9ncmVzcy9rZW5kby11aSc7CiAgICBpbXBvcnQgSlF1ZXJ5IGZyb20gJ2pxdWVyeSc7CiAgICAvLyBpbXBvcnQge2kxOG59IGZyb20gJ0AvaTE4bicKICAgIGltcG9ydCBIZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiOwogICAgaW1wb3J0IHsgQWNjb3VudE1vZGVsIH0gZnJvbSAiQC9zY3JpcHRzL21vZGVsL0FwcE1vZGVscyI7CgogICAgLy8gY29uc3QgJCA9IHJlcXVpcmUoImpxdWVyeSIpOwogICAgY29uc3QgeyBqb3VybmFsSGFuZGxlciB9ID0gcmVxdWlyZSgiQC9zY3JpcHRzL0FwcEhhbmRsZXJzLmpzIik7CiAgICBjb25zdCB7IEVudGl0eVR5cGUgfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0NvbGxlY3Rpb25zIik7CgogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIG5hbWU6ICJUcmFuc2FjdGlvbiIsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgaW5pdEFjY291bnQ6IHsKICAgICAgICAgICAgICAgIHR5cGU6IEFjY291bnRNb2RlbCwKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAgICAgJ2FwcC1zZWFyY2hkYXRlJzogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9TZWFyY2hEYXRlJyksCiAgICAgICAgfSwKICAgICAgICBkYXRhOiAoKSA9PiAoewogICAgICAgICAgICAvLyBPYmoKICAgICAgICAgICAgYWNjb3VudCAgICAgICAgICAgICA6IG5ldyBBY2NvdW50TW9kZWwoKSwKICAgICAgICAgICAgdHJhbnNhY3Rpb25zICAgICAgICA6IFtdLAogICAgICAgICAgICAvLyBTZWFyY2ggRGF0ZXMgIAogICAgICAgICAgICBzdGFydERhdGUgICAgICAgICAgOiAiIiwKICAgICAgICAgICAgZW5kRGF0ZSAgICAgICAgICAgIDogIiIsCiAgICAgICAgICAgIEhlbHBlciAgICAgICAgICAgICAgOiBIZWxwZXIsCiAgICAgICAgfSksCiAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICAvLyBTZWFyY2ggVHJhbnNhY3Rpb24KICAgICAgICAgICAgc2VhcmNoVHJhbnNhY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgc2RhdGUgPSB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgICAgICAgICAgICBlZGF0ZSA9IHRoaXMuZW5kRGF0ZTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY2NvdW50LnV1aWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2RhdGUgJiYgZWRhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2RhdGUgPSBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShzZGF0ZSksICd5eXl5LU1NLWRkJykgKyAnVDAwOjAwOjAwLjAwMFonOwoKICAgICAgICAgICAgICAgICAgICAgICAgZWRhdGUgPSBuZXcgRGF0ZShlZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVkYXRlID0ga2VuZG8udG9TdHJpbmcoZWRhdGUsICd5eXl5LU1NLWRkJykgKyAnVDIzOjU5OjU5Ljk5OVonOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNkYXRlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgZWRhdGUgPSAwOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIKICAgICAgICAgICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLnRyYW5zYWN0aW9uRFMua2VuZG9XaWRnZXQoKTsKICAgICAgICAgICAgICAgICAgICBkcy5kYXRhKFtdKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgam91cm5hbEhhbmRsZXIuZ2V0RW50cnlEZXRhaWxCeUFjY291bnQodGhpcy5hY2NvdW50LnV1aWQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydF9kYXRlOiBzZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9kYXRlOiBlZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIUpRdWVyeS5pc0VtcHR5T2JqZWN0KHJlcykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbnMgPSByZXMuZW50cmllc19kZXRhaWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFRlbXBsYXRlCiAgICAgICAgICAgIG51bWJlclRlbXBsYXRlOiAoZGF0YUl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgbGluayBpcyBqb3VybmFsCiAgICAgICAgICAgICAgICBsZXQgbGluayA9IEhlbHBlci5saW5rVGVtcGxhdGUoZGF0YUl0ZW0uam91cm5hbF9udW1iZXIsIGAke0VudGl0eVR5cGUuSk9VUk5BTH0vdmlldy8ke2RhdGFJdGVtLmpvdXJuYWxfdXVpZH1gKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVHJhbnNhY3Rpb24gbGluawogICAgICAgICAgICAgICAgaWYoZGF0YUl0ZW0ucmVmZXJyYWxfdHJhbnNhY3Rpb25fdXVpZCAhPT0gJycpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBIZWxwZXIubGlua1RlbXBsYXRlKGRhdGFJdGVtLmpvdXJuYWxfbnVtYmVyLCBgJHtkYXRhSXRlbS50cmFuc2FjdGlvbl90eXBlfS92aWV3LyR7ZGF0YUl0ZW0ucmVmZXJyYWxfdHJhbnNhY3Rpb25fdXVpZH1gKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIGxpbms7CgkJCX0sCiAgICAgICAgICAgIC8vIGdvVmlldyAoZSkgewogICAgICAgICAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJLy8gCWxldCBncmlkID0gdGhpcy4kcmVmcy50cmFuc2FjdGlvbkdyaWQua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgLy8gICAgICAgICBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAvLyAgICAgaWYoZGF0YUl0ZW0ucmVmZXJyYWxfdHJhbnNhY3Rpb25fdXVpZCAhPT0gJycpewogICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogYCR7ZGF0YUl0ZW0udHJhbnNhY3Rpb25fdHlwZS50b0xvd2VyQ2FzZSgpfS92aWV3LyR7ZGF0YUl0ZW0ucmVmZXJyYWxfdHJhbnNhY3Rpb25fdXVpZH1gIH0pOwogICAgICAgICAgICAvLyAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiBgam91cm5hbC92aWV3LyR7ZGF0YUl0ZW0uam91cm5hbF91dWlkfWAgfSk7CiAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgIC8vIH0sCiAgICAgICAgfSwKICAgICAgICB3YXRjaDogewogICAgICAgICAgICBpbml0QWNjb3VudCAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFjY291bnQgPSB0aGlzLmluaXRBY2NvdW50OwogICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hUcmFuc2FjdGlvbigpOwogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgbW91bnRlZCAoKSB7CiAgICAgICAgICAgIHRoaXMuYWNjb3VudCA9IHRoaXMuaW5pdEFjY291bnQ7CiAgICAgICAgfQogICAgfTsK"},{"version":3,"sources":["Transaction.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Transaction.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-row class=\"white\">\n        <v-col sm=\"10\" cols=\"12\" class=\"pb-0\">\n            <app-searchdate :initStartDate=\"startDate\" @emitStartDate=\"startDate = $event\"\n                            :initEndDate=\"endDate\" @emitEndDate=\"endDate = $event\" />\n        </v-col>\n\n        <v-col sm=\"1\" cols=\"1\" class=\"mt-1 pb-0\">\n            <v-btn class=\"btn_search\" @click=\"searchTransaction\" style=\"background-color: rgb(237, 241, 245)\">\n                <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n            </v-btn>\n        </v-col>\n        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n            <kendo-datasource \n                ref=\"transactionDS\"\n                :data=\"transactions\"\n                :sort-field=\"'journal_date'\"\n                :sort-dir=\"'desc'\"\n                page=\"1\"\n                page-size=\"10\" />\n\n            <kendo-grid id=\"transactionGrid\" \n                ref=\"transactionGrid\"\n                :data-source-ref=\"'transactionDS'\"\n                :noRecords=\"true\"\n                :sortable=\"true\"\n                :pageable-page-sizes=\"true\"\n                :pageable-button-count=\"5\">\n                <kendo-grid-column \n                    :field=\"'journal_date'\"\n                    :title=\"$t('date')\"\n                    :template=\"'#=kendo.toString(new Date(journal_date), `dd-MM-yyyy`)#'\"\n                    :headerAttributes=\"{\n                        style: 'text-align: center; background-color: #fff',\n                    }\"\n                    :attributes=\"{ style: 'text-align: center;' }\" />\n                <kendo-grid-column \n                    :field=\"'transaction_type'\"\n                    :title=\"$t('type')\"\n                    :headerAttributes=\"{\n                        style: 'background-color: #fff',\n                    }\" />\n                <kendo-grid-column \n                    :field=\"'journal_number'\"\n                    :title=\"$t('number')\"\n                    :template=\"numberTemplate\"\n                    :headerAttributes=\"{\n                        style: 'background-color: #fff',\n                    }\" />\n                <kendo-grid-column \n                    :field=\"'description'\"\n                    :title=\"$t('description')\"\n                    :headerAttributes=\"{\n                        style: 'background-color: #fff',\n                    }\" />\n                <kendo-grid-column \n                    :field=\"'exchanged_amount'\"\n                    :title=\"$t('amount')\"\n                    :format=\"'{0:n}'\"\n                    :headerAttributes=\"{\n                        style: 'text-align: right; background-color: #fff',\n                    }\"\n                    :attributes=\"{ style: 'text-align: right;' }\" />\n            </kendo-grid>\n        </v-col>\n    </v-row>\n</template>\n\n<script>    \n    import kendo from '@progress/kendo-ui';\n    import JQuery from 'jquery';\n    // import {i18n} from '@/i18n'\n    import Helper from \"@/helper.js\";\n    import { AccountModel } from \"@/scripts/model/AppModels\";\n\n    // const $ = require(\"jquery\");\n    const { journalHandler } = require(\"@/scripts/AppHandlers.js\");\n    const { EntityType } = require(\"@/scripts/default_setup/Collections\");\n\n    export default {\n        name: \"Transaction\",\n        props: {\n            initAccount: {\n                type: AccountModel,\n            },\n        },\n        components: {\n            'app-searchdate': () => import('@/components/custom_templates/SearchDate'),\n        },\n        data: () => ({\n            // Obj\n            account             : new AccountModel(),\n            transactions        : [],\n            // Search Dates  \n            startDate          : \"\",\n            endDate            : \"\",\n            Helper              : Helper,\n        }),\n        methods: {\n            // Search Transaction\n            searchTransaction() {\n                let self = this,\n                    sdate = this.startDate,\n                    edate = this.endDate;\n\n                if (this.account.uuid) {\n                    if (sdate && edate) {\n                        sdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z';\n\n                        edate = new Date(edate);\n                        edate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z';\n                    } else {\n                        sdate = 0;\n                        edate = 0;\n                    }\n\n                    // Clear\n                    let ds = this.$refs.transactionDS.kendoWidget();\n                    ds.data([]);\n\n                    this.showLoading = true;\n                    journalHandler.getEntryDetailByAccount(this.account.uuid, {\n                        params: {\n                            start_date: sdate,\n                            end_date: edate,\n                        }\n                    })\n                    .then(res => {\n                        if(!JQuery.isEmptyObject(res)){\n                            this.transactions = res.entries_detail;\n                        }\n                    })\n                    .finally(() => {\n                        self.showLoading = false;\n                    })\n                }\n            },\n            // Template\n            numberTemplate: (dataItem) => {\n                // Default link is journal\n                let link = Helper.linkTemplate(dataItem.journal_number, `${EntityType.JOURNAL}/view/${dataItem.journal_uuid}`);\n                \n                // Transaction link\n                if(dataItem.referral_transaction_uuid !== ''){\n                    return Helper.linkTemplate(dataItem.journal_number, `${dataItem.transaction_type}/view/${dataItem.referral_transaction_uuid}`);\n                }\n                \n                return link;\n\t\t\t},\n            // goView (e) {\n            //     e.preventDefault();\n\n\t\t\t// \tlet grid = this.$refs.transactionGrid.kendoWidget(),\n            //         dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n                    \n            //     if(dataItem.referral_transaction_uuid !== ''){\n            //         this.$router.push({ path: `${dataItem.transaction_type.toLowerCase()}/view/${dataItem.referral_transaction_uuid}` });\n            //     }else{\n            //         this.$router.push({ path: `journal/view/${dataItem.journal_uuid}` });\n            //     }\n            // },\n        },\n        watch: {\n            initAccount () {\n                this.account = this.initAccount;\n                this.searchTransaction();\n            },\n        },\n        mounted () {\n            this.account = this.initAccount;\n        }\n    };\n</script>\n<style scoped>\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/suppliers/AdvanceSettlement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/suppliers/AdvanceSettlement.vue","mtime":1639364469156},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgSlF1ZXJ5IGZyb20gImpxdWVyeSI7CmltcG9ydCB7IGkxOG4gfSBmcm9tICJAL2kxOG4iOwppbXBvcnQgSGVscGVyIGZyb20gIkAvaGVscGVyLmpzIjsKaW1wb3J0IHsKCUFkdmFuY2VTZXR0bGVtZW50TW9kZWwsCglKb3VybmFsTW9kZWwsCglKb3VybmFsRW50cnlNb2RlbCwKCUFjY291bnRNb2RlbCwKCUVtcGxveWVlTW9kZWwsCglDYXNoQWR2YW5jZU1vZGVsLAoJQ3VycmVuY3lNb2RlbCwKCUNvbnRhY3RNb2RlbCwKfSBmcm9tICJAL3NjcmlwdHMvbW9kZWwvQXBwTW9kZWxzIjsKaW1wb3J0IEFjY291bnRTZWNvbmRhcnlFZGl0b3IgZnJvbSAiQC9zY3JpcHRzL2tlbmRvX2VkaXRvci9BY2NvdW50U2Vjb25kYXJ5IjsKCi8qIFN0b3JlICovCmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKY29uc3QgaW5zdGl0dXRlID0gc3RvcmUuc3RhdGUuaW5zdGl0dXRlLmluc3RpdHV0ZTsKCmNvbnN0IHsKCWFkdmFuY2VTZXR0bGVtZW50SGFuZGxlciwKCWNhc2hBZHZhbmNlSGFuZGxlciwKfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9BcHBIYW5kbGVycyIpOwpjb25zdCBjbGVhcmluZ1RyYW5zYWN0aW9uSGFuZGxlciA9IHJlcXVpcmUoIkAvc2NyaXB0cy9oYW5kbGVyL3dvcmtpbmdjYXBpdGFsL2NsZWFyaW5nVHJhbnNhY3Rpb25IYW5kbGVyLmpzIik7Cgpjb25zdCB7CglBY2NvdW50VHlwZUNvZGUsCglTYXZlT3B0aW9uLAoJRW50aXR5VHlwZSwKfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9kZWZhdWx0X3NldHVwL0NvbGxlY3Rpb25zIik7CgpleHBvcnQgZGVmYXVsdCB7CgluYW1lOiAiQWR2YW5jZVNldHRsZW1lbnQiLAoJY29tcG9uZW50czogewoJCUxvYWRpbmdNZTogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvTG9hZGluZyIpLAoJCSJhcHAtZGF0ZXBpY2tlciI6ICgpID0+CgkJCWltcG9ydCgiQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvRGF0ZVBpY2tlckNvbXBvbmVudCIpLAoJCSJhcHAtZW1wbG95ZWUtZHJvcGRvd25saXN0IjogKCkgPT4KCQkJaW1wb3J0KCJAL2NvbXBvbmVudHMvZHJvcGRvd25saXN0L0VtcGxveWVlIiksCgkJImFwcC1jYXNoLWFjY291bnQtZHJvcGRvd25saXN0IjogKCkgPT4KCQkJaW1wb3J0KCJAL2NvbXBvbmVudHMvZHJvcGRvd25saXN0L0Nhc2hBY2NvdW50IiksCgkJImFwcC1zZWNvbmRhcnktYWNjb3VudC1kcm9wZG93bmxpc3QiOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9kcm9wZG93bmxpc3QvQWNjb3VudFNlY29uZGFyeScpLAoJfSwKCXByb3BzOiB7CgkJaW5pdEFkdmFuY2VTZXR0bGVtZW50OiB7CgkJCXR5cGU6IEFkdmFuY2VTZXR0bGVtZW50TW9kZWwsCgkJfSwKCQlpbml0Q2FzaEFkdmFuY2U6IHsKCQkJdHlwZTogQ2FzaEFkdmFuY2VNb2RlbCwKCQl9LAoJCWluaXRDbGVhcmluZ1RyYW5zYWN0aW9uczogewoJCQl0eXBlOiBBcnJheSwKCQl9LAoJfSwKCWRhdGE6ICgpID0+ICh7CgkJLy8gT2JqCgkJYWR2YW5jZVNldHRsZW1lbnQ6IG5ldyBBZHZhbmNlU2V0dGxlbWVudE1vZGVsKCksCgkJam91cm5hbDogbmV3IEpvdXJuYWxNb2RlbCgpLAoJCWpvdXJuYWxFbnRyaWVzOiBbXSwKCQllbXBsb3llZTogbmV3IEVtcGxveWVlTW9kZWwoKSwKCQljbGVhcmluZ1RyYW5zYWN0aW9uR3JvdXBpbmc6IFtdLAoJCWNsZWFyaW5nVHJhbnNhY3Rpb25zOiBbXSwKCQljYXNoQWR2YW5jZTogbmV3IENhc2hBZHZhbmNlTW9kZWwoKSwKCQljYXNoQWR2YW5jZXM6IFtdLAoJCXNlY29uZGFyeUFjY291bnQ6IG5ldyBBY2NvdW50TW9kZWwoKSwKCQkvLyBPdGhlcgoJCWFkdmFuY2VkQW1vdW50OiAwLAoJCWFkdmFuY2VkRXhjaGFuZ2VBbW91bnQ6IDAsCgkJc2V0dGxlZEFtb3VudDogMCwKCQlzaG93RXhjaGFuZ2VBbW91bnQ6IGZhbHNlLAoJCXNob3dDYXNoQWNjb3VudDogdHJ1ZSwKCQlmaWxlczogW10sCgkJdGVtcGxhdGVzOiBbXSwKCQl1c2VyOiBIZWxwZXIuZ2V0VXNlcigpLAoJCS8qIEVkaXRvcnMgKi8KCQlBY2NvdW50U2Vjb25kYXJ5RWRpdG9yIDogQWNjb3VudFNlY29uZGFyeUVkaXRvciwKCQkvLyBGb3JtIHZhbGlkYXRpb24KCQl2YWxpZDogdHJ1ZSwKCQlpc0VkaXQ6IGZhbHNlLAoJCWFsZXJ0OiBmYWxzZSwKCQllcnJvck1lc3NhZ2U6ICIiLAoJCXNhdmVNb2RlOiAiIiwKCQlTYXZlT3B0aW9uOiBTYXZlT3B0aW9uLAoJCS8vIExvYWRpbmdNZQoJCXNob3dMb2FkaW5nOiBmYWxzZSwKCQlsb2FkaW5nQWxlcnQ6IGZhbHNlLAoJCWxvYWRpbmdDb2xvckFsZXJ0OiAiIiwKCQlsb2FkaW5nVGV4dEFsZXJ0OiAiIiwKCX0pLAoJbWV0aG9kczogewoJCS8vIEluaXRpYWwgRGF0YQoJCWluaXRpYWxEYXRhKCkgewoJCQlpZiAodGhpcy5pbml0QWR2YW5jZVNldHRsZW1lbnQpIHsKCQkJCS8vIEVkaXQgTW9kZQoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaW5pdEFkdmFuY2VTZXR0bGVtZW50KTsKCgkJCQl0aGlzLmJpbmREYXRhKCk7CgkJCX0gZWxzZSB7CgkJCQkvLyBCcmFuZCBOZXcgTW9kZQoJCQkJdGhpcy5zZXREZWZhdWx0RGF0YSgpOwoJCQl9CgkJfSwKCQkvLyBTZXQgZGVmYXVsdCBkYXRhCgkJc2V0RGVmYXVsdERhdGEoKSB7CgkJCS8vIEJyYW5kIE5ldyBNb2RlCgkJCXRoaXMuaXNFZGl0ID0gZmFsc2U7CgoJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50ID0gbmV3IEFkdmFuY2VTZXR0bGVtZW50TW9kZWwoewoJCQkJc2V0dGxlbWVudF9kYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSwKCQkJfSk7CgoJCQkvLyBHZW5lcmF0ZSBOdW1iZXIKCQkJdGhpcy5nZW5lcmF0ZU51bWJlcigpOwoJCX0sCgkJLy8gQmluZCBkYXRhIGZyb20gcHJvcCBmb3IgZWRpdCBtb2RlCgkJYXN5bmMgYmluZERhdGEoKSB7CgkJCS8vIEVkaXQgTW9kZQoJCQl0aGlzLmlzRWRpdCA9IHRydWU7CgoJCQkvLyBFbXBsb3llZQoJCQl0aGlzLmVtcGxveWVlID0gbmV3IEVtcGxveWVlTW9kZWwodGhpcy5hZHZhbmNlU2V0dGxlbWVudC5zZXR0bGVkX2J5KTsKCgkJCS8vIENhc2ggQWR2YW5jZQoJCQl0aGlzLmNhc2hBZHZhbmNlID0gbmV3IENhc2hBZHZhbmNlTW9kZWwodGhpcy5pbml0Q2FzaEFkdmFuY2UpOwoKCQkJLy8gU2hvdy9IaWRlIGV4Y2hhbmdlIGFtb3VudAoJCQlsZXQgYmFzZUN1cnJlbmN5ID0gbmV3IEN1cnJlbmN5TW9kZWwoaW5zdGl0dXRlLmJhc2VDdXJyZW5jeSk7CgkJCXRoaXMuc2hvd0V4Y2hhbmdlQW1vdW50ID0gQm9vbGVhbigKCQkJCXRoaXMuY2FzaEFkdmFuY2UuY3VycmVuY3kuY29kZSAhPT0gYmFzZUN1cnJlbmN5LmNvZGUKCQkJKTsKCgkJCS8vIENsZWFyaW5nIFRyYW5zYWN0aW9ucwoJCQl0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25zID0gdGhpcy5pbml0Q2xlYXJpbmdUcmFuc2FjdGlvbnM7CgkJCXRoaXMuY2xlYXJpbmdUcmFuc2FjdGlvbkdyb3VwaW5nID0gSGVscGVyLmdyb3VwRXhwZW5zZUJ5Q2FzaEFkdmFuY2UoCgkJCQl0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25zCgkJCSk7CgkJCXRoaXMuYXV0b0NhbGN1bGF0ZSgpOwoKCQkJLy9Kb3VybmFsCgkJCXRoaXMuam91cm5hbCA9IHRoaXMuYWR2YW5jZVNldHRsZW1lbnQuam91cm5hbDsKCQkJdGhpcy5qb3VybmFsRW50cmllcyA9IHRoaXMuYWR2YW5jZVNldHRsZW1lbnQuam91cm5hbF9lbnRyaWVzOwoJCX0sCgkJLy8gTnVtYmVyCgkJYXN5bmMgZ2VuZXJhdGVOdW1iZXIoKSB7CgkJCWlmICghdGhpcy5pc0VkaXQpIHsKCQkJCWxldCBudW0gPSBhd2FpdCBIZWxwZXIuZ2VuZXJhdGVBY2NvdW50aW5nTnVtYmVyKAoJCQkJCUVudGl0eVR5cGUuQURWQU5DRV9TRVRUTEVNRU5ULAoJCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuc2V0dGxlbWVudF9kYXRlCgkJCQkpOwoKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQubnVtYmVyID0gbnVtLm51bWJlcjsKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQucHJlZml4X2Zvcm1hdCA9IG51bS5wcmVmaXhfZm9ybWF0OwoJCQl9CgkJfSwKCQkvLyBSb3cgTnVtYmVyIFRlbXBsYXRlCgkJcm93TnVtYmVyVG1wbChkYXRhSXRlbSkgewoJCQlsZXQgZHMgPSB0aGlzLiRyZWZzLmNsZWFyaW5nVHJhbnNhY3Rpb25EUy5rZW5kb1dpZGdldCgpLAoJCQkJaW5kZXggPSBkcy5pbmRleE9mKGRhdGFJdGVtKTsKCgkJCXJldHVybiBpbmRleCArIDE7CgkJfSwKCQkvLyBMb2FkIENhc2ggQWR2YW5jZQoJCWxvYWRDYXNoQWR2YW5jZSgpIHsKCQkJaWYgKCF0aGlzLmlzRWRpdCkgewoJCQkJdGhpcy5jYXNoQWR2YW5jZSA9IG5ldyBDYXNoQWR2YW5jZU1vZGVsKCk7CgkJCQl0aGlzLmNhc2hBZHZhbmNlcyA9IFtdOwoKCQkJCWlmICh0aGlzLmVtcGxveWVlLmlkICE9PSAiIikgewoJCQkJCWxldCBjYXNoQWR2YW5jZUxpc3QgPSBbXTsKCgkJCQkJdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CgkJCQkJY2FzaEFkdmFuY2VIYW5kbGVyCgkJCQkJCS5nZXRCeUVtcGxveWVlSWQodGhpcy5lbXBsb3llZS5pZCkKCQkJCQkJLnRoZW4oKHJlcykgPT4gewoJCQkJCQkJaWYgKCFKUXVlcnkuaXNFbXB0eU9iamVjdChyZXMuZGF0YSkpIHsKCQkJCQkJCQlyZXMuZGF0YS5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJCQkJCQljYXNoQWR2YW5jZUxpc3QucHVzaChuZXcgQ2FzaEFkdmFuY2VNb2RlbCh2YWx1ZSkpOwoJCQkJCQkJCX0pOwoKCQkJCQkJCQl0aGlzLmNhc2hBZHZhbmNlcyA9IGNhc2hBZHZhbmNlTGlzdDsKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQkJLmZpbmFsbHkoKCkgPT4gewoJCQkJCQkJdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJCQl9KTsKCQkJCX0KCQkJfQoJCX0sCgkJLy8gT24gQ2FzaCBBZHZhbmNlIENoYW5nZXMKCQlvbkNhc2hBZHZhbmNlQ2hhbmdlcygpIHsKCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9uR3JvdXBpbmcgPSBbXTsKCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucyA9IFtdOwoJCQl0aGlzLmF1dG9DYWxjdWxhdGUoKTsKCgkJCWlmICh0aGlzLmNhc2hBZHZhbmNlLnV1aWQgIT09ICIiKSB7CgkJCQkvLyBTaG93L0hpZGUgZXhjaGFuZ2UgYW1vdW50CgkJCQlsZXQgYmFzZUN1cnJlbmN5ID0gbmV3IEN1cnJlbmN5TW9kZWwoaW5zdGl0dXRlLmJhc2VDdXJyZW5jeSk7CgkJCQl0aGlzLnNob3dFeGNoYW5nZUFtb3VudCA9IEJvb2xlYW4oCgkJCQkJdGhpcy5jYXNoQWR2YW5jZS5jdXJyZW5jeS5jb2RlICE9PSBiYXNlQ3VycmVuY3kuY29kZQoJCQkJKTsKCgkJCQkvLyBMb2FkIFJlbGF0ZWQgRXhwZW5zZXMKCQkJCXRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwoJCQkJY2xlYXJpbmdUcmFuc2FjdGlvbkhhbmRsZXIKCQkJCQkuZ2V0QnlDYXNoQWR2YW5jZUlkKHRoaXMuY2FzaEFkdmFuY2UudXVpZCkKCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCWlmICh0eXBlb2YgcmVzLmRhdGEgPT09ICJvYmplY3QiKSB7CgkJCQkJCQl0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25zID0gcmVzLmRhdGE7CgkJCQkJCQl0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25Hcm91cGluZyA9IEhlbHBlci5ncm91cEV4cGVuc2VCeUNhc2hBZHZhbmNlKAoJCQkJCQkJCXJlcy5kYXRhCgkJCQkJCQkpOwoJCQkJCQkJdGhpcy5hdXRvQ2FsY3VsYXRlKCk7CgkJCQkJCX0KCQkJCQl9KQoJCQkJCS5maW5hbGx5KCgpID0+IHsKCQkJCQkJdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJCX0pOwoJCQl9CgkJfSwKCQkvLyBBdXRvIENhbGN1bGF0ZQoJCWF1dG9DYWxjdWxhdGUoKSB7CgkJCS8vIENhc2ggQWR2YW5jZSBBbW91bnQKCQkJdGhpcy5hZHZhbmNlZEFtb3VudCA9IDA7CgkJCXRoaXMuYWR2YW5jZWRFeGNoYW5nZUFtb3VudCA9IDA7CgkJCXRoaXMuY2FzaEFkdmFuY2UuZGV0YWlscy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJaWYgKHZhbHVlLmFtb3VudCA+IDApIHsKCQkJCQl0aGlzLmFkdmFuY2VkQW1vdW50ICs9IHZhbHVlLmFtb3VudDsKCQkJCQl0aGlzLmFkdmFuY2VkRXhjaGFuZ2VBbW91bnQgKz0gdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudDsKCQkJCX0KCQkJfSk7CgoJCQkvLyBUcmFuc2FjdGlvbiBBbW91bnQKCQkJdGhpcy5zZXR0bGVkQW1vdW50ID0gMDsKCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9uR3JvdXBpbmcuZm9yRWFjaCgodmFsdWUpID0+IHsKCQkJCXRoaXMuc2V0dGxlZEFtb3VudCArPSB2YWx1ZS5leGNoYW5nZWRfYW1vdW50OwoJCQl9KTsKCgkJCXRoaXMuc2hvd0Nhc2hBY2NvdW50ID0gQm9vbGVhbigKCQkJCXRoaXMuYWR2YW5jZWRFeGNoYW5nZUFtb3VudCAtIHRoaXMuc2V0dGxlZEFtb3VudCAhPT0gMAoJCQkpOwoJCX0sCgkJLy8gU2hyaW5rIERhdGEKCQlzaHJpbmtEYXRhKCkgewoJCQkvLyBTZXR0bGVtZW50IERhdGUKCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5zZXR0bGVtZW50X2RhdGUgPSBIZWxwZXIudG9JU09EYXRlKAoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5zZXR0bGVtZW50X2RhdGUKCQkJKTsKCgkJCS8vIEVtcGxveWVlCgkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuc2V0dGxlZF9ieSA9IG5ldyBDb250YWN0TW9kZWwodGhpcy5lbXBsb3llZSk7CgoJCQkvLyBDYXNoIEFkdmFuY2UKCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5jYXNoX2FkdmFuY2VfdXVpZCA9IHRoaXMuY2FzaEFkdmFuY2UudXVpZDsKCgkJCS8vIENhc2ggQW1vdW50CgkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY2FzaF9hbW91bnQgPSB0aGlzLnJlbWFpbmluZzsKCgkJCS8vIFVwZGF0ZSBDYXNoIEFkdmFuY2UKCQkJdGhpcy5jYXNoQWR2YW5jZS5pc19zZXR0bGVkID0gMTsKCQkJdGhpcy5jYXNoQWR2YW5jZS5zZXR0bGVkX2RhdGUgPSBIZWxwZXIudG9JU09EYXRlKAoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5zZXR0bGVtZW50X2RhdGUKCQkJKTsKCgkJCS8vIFVzZXIKCQkJaWYgKHRoaXMuaXNFZGl0KSB7CgkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50Lm1vZGlmaWVkX2J5ID0gdGhpcy51c2VyOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5jcmVhdGVkX2J5ID0gdGhpcy51c2VyOwoJCQl9CgkJfSwKCQkvLyBBZGQgSm91cm5hbAoJCWFkZEpvdXJuYWwoKSB7CgkJCWlmICghdGhpcy5pc0VkaXQpIHsKCQkJCS8vIE5ldyBNb2RlCgkJCQlsZXQgZW50cmllcyA9IFtdOwoKCQkJCS8vIEFkdmFuY2UgU2V0dGxlbWVudCBDbGVhcmluZyBBY2NvdW50IChGcm9tIEV4cGVuc2UpIG9uIERyCgkJCQl0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25zLmZvckVhY2goKHZhbHVlKSA9PiB7CgkJCQkJaWYgKAoJCQkJCQl2YWx1ZS5hY2NvdW50Lm51bWJlciA9PT0KCQkJCQkJQWNjb3VudFR5cGVDb2RlLkFEVkFOQ0VfU0VUVExFTUVOVF9DTEVBUklOR19DT0RFCgkJCQkJKSB7CgkJCQkJCWVudHJpZXMucHVzaCgKCQkJCQkJCW5ldyBKb3VybmFsRW50cnlNb2RlbCh7CgkJCQkJCQkJYWNjb3VudDogbmV3IEFjY291bnRNb2RlbCh2YWx1ZS5hY2NvdW50KSwKCQkJCQkJCQlhY2NvdW50X3V1aWQ6IHZhbHVlLmFjY291bnQudXVpZCwKCQkJCQkJCQlzZWNvbmRhcnlfYWNjX3V1aWQ6IHZhbHVlLnNlY29uZGFyeV9hY2NfdXVpZCwKCQkJCQkJCQlwcmltYXJ5X2NvbnRhY3Q6IG5ldyBDb250YWN0TW9kZWwodGhpcy5lbXBsb3llZSksCgkJCQkJCQkJZGVzY3JpcHRpb246IHRoaXMuYWR2YW5jZVNldHRsZW1lbnQuZGVzY3JpcHRpb24sCgkJCQkJCQkJY3VycmVuY3k6IGluc3RpdHV0ZS5iYXNlQ3VycmVuY3ksCgkJCQkJCQkJYW1vdW50OiB2YWx1ZS5leGNoYW5nZWRfYW1vdW50ICogLTEsCgkJCQkJCQkJZXhjaGFuZ2VfcmF0ZTogMSwKCQkJCQkJCX0pCgkJCQkJCSk7CgkJCQkJfQoJCQkJfSk7CgoJCQkJLy8gQ2FzaCBBY2NvdW50CgkJCQlpZiAodGhpcy5yZW1haW5pbmcgIT09IDApIHsKCQkJCQllbnRyaWVzLnB1c2goCgkJCQkJCW5ldyBKb3VybmFsRW50cnlNb2RlbCh7CgkJCQkJCQlhY2NvdW50OiBuZXcgQWNjb3VudE1vZGVsKHRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY2FzaF9hY2NvdW50KSwKCQkJCQkJCWFjY291bnRfdXVpZDogdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5jYXNoX2FjY291bnQudXVpZCwKCQkJCQkJCXNlY29uZGFyeV9hY2NfdXVpZDogdGhpcy5zZWNvbmRhcnlBY2NvdW50LnV1aWQsCgkJCQkJCQlwcmltYXJ5X2NvbnRhY3Q6IG5ldyBDb250YWN0TW9kZWwodGhpcy5lbXBsb3llZSksCgkJCQkJCQlkZXNjcmlwdGlvbjogdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5kZXNjcmlwdGlvbiwKCQkJCQkJCWN1cnJlbmN5OiBpbnN0aXR1dGUuYmFzZUN1cnJlbmN5LAoJCQkJCQkJYW1vdW50OiB0aGlzLnJlbWFpbmluZywKCQkJCQkJCWV4Y2hhbmdlX3JhdGU6IDEsCgkJCQkJCX0pCgkJCQkJKTsKCQkJCX0KCgkJCQkvLyBDYXNoIEFkdmFuY2Ugb24gQ3IKCQkJCXRoaXMuY2FzaEFkdmFuY2UuZGV0YWlscy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJCWlmICgKCQkJCQkJdmFsdWUuYWNjb3VudC5hY2NvdW50X3R5cGUuY29kZSA9PT0gQWNjb3VudFR5cGVDb2RlLkNBU0hfQURWQU5DRQoJCQkJCSkgewoJCQkJCQllbnRyaWVzLnB1c2goCgkJCQkJCQluZXcgSm91cm5hbEVudHJ5TW9kZWwoewoJCQkJCQkJCWFjY291bnQ6IG5ldyBBY2NvdW50TW9kZWwodmFsdWUuYWNjb3VudCksCgkJCQkJCQkJYWNjb3VudF91dWlkOiB2YWx1ZS5hY2NvdW50LnV1aWQsCgkJCQkJCQkJc2Vjb25kYXJ5X2FjY191dWlkOiB2YWx1ZS5zZWNvbmRhcnlfYWNjX3V1aWQsCgkJCQkJCQkJcHJpbWFyeV9jb250YWN0OiBuZXcgQ29udGFjdE1vZGVsKHRoaXMuZW1wbG95ZWUpLAoJCQkJCQkJCWRlc2NyaXB0aW9uOiB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmRlc2NyaXB0aW9uLAoJCQkJCQkJCWN1cnJlbmN5OiBpbnN0aXR1dGUuYmFzZUN1cnJlbmN5LAoJCQkJCQkJCWFtb3VudDogdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xLCAvLyBDciBzaWRlIGlzIG5lZ2F0aXZlCgkJCQkJCQkJZXhjaGFuZ2VfcmF0ZTogMSwKCQkJCQkJCX0pCgkJCQkJCSk7CgkJCQkJfQoJCQkJfSk7CgoJCQkJLy8gSm91cm5hbCBFbnRyaWVzCgkJCQl0aGlzLmpvdXJuYWxFbnRyaWVzID0gZW50cmllczsKCQkJfSBlbHNlIHsKCQkJCS8vIEVkaXQgTW9kZQoJCQkJdGhpcy5qb3VybmFsRW50cmllcy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoJCQkJCWlmICgKCQkJCQkJfkFjY291bnRUeXBlQ29kZS5DQVNIX0FDQ09VTlRTLmluZGV4T2YoCgkJCQkJCQl2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5jb2RlCgkJCQkJCSkKCQkJCQkpIHsKCQkJCQkJdmFsdWUuYWNjb3VudCA9IG5ldyBBY2NvdW50TW9kZWwoCgkJCQkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmNhc2hfYWNjb3VudAoJCQkJCQkpOwoJCQkJCX0KCQkJCX0pOwoJCQl9CgoJCQkvLyBKb3VybmFsCgkJCXRoaXMuam91cm5hbC5udW1iZXIgPSB0aGlzLmFkdmFuY2VTZXR0bGVtZW50Lm51bWJlcjsKCQkJdGhpcy5qb3VybmFsLmRlc2NyaXB0aW9uID0gdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5kZXNjcmlwdGlvbjsKCQkJdGhpcy5qb3VybmFsLmpvdXJuYWxfZGF0ZSA9IEhlbHBlci50b0lTT0RhdGUoCgkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnNldHRsZW1lbnRfZGF0ZQoJCQkpOwoJCQl0aGlzLmpvdXJuYWwuam91cm5hbF90eXBlID0gRW50aXR5VHlwZS5BVVRPX0pPVVJOQUw7CgkJCXRoaXMuam91cm5hbC50cmFuc2FjdGlvbl90eXBlID0gRW50aXR5VHlwZS5BRFZBTkNFX1NFVFRMRU1FTlQ7CgkJCXRoaXMuam91cm5hbC5wcmVmaXhfZm9ybWF0ID0gdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5wcmVmaXhfZm9ybWF0OwoJCQl0aGlzLmpvdXJuYWwucHJvamVjdF91dWlkID0gdGhpcy5jYXNoQWR2YW5jZS5wcm9qZWN0X3V1aWQ7CgkJCXRoaXMuam91cm5hbC5zZWdtZW50X3V1aWQgPSB0aGlzLmNhc2hBZHZhbmNlLnNlZ21lbnRfdXVpZDsKCQkJdGhpcy5qb3VybmFsLmlzX2RyYWZ0ID0gdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5pc19kcmFmdDsKCQkJdGhpcy5qb3VybmFsLmNyZWF0ZWRfYnkgPSB0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmNyZWF0ZWRfYnk7CgkJCXRoaXMuam91cm5hbC5tb2RpZmllZF9ieSA9IHRoaXMuYWR2YW5jZVNldHRsZW1lbnQubW9kaWZpZWRfYnk7CgkJfSwKCQkvLyBWYWxpZGF0aW5nCgkJdmFsaWRhdGVGb3JtKCkgewoJCQlsZXQgcmVzdWx0ID0gdHJ1ZSwKCQkJCW1zZyA9ICIiOwoKCQkJLy8gRW1wbG95ZWUKCQkJaWYgKHRoaXMuZW1wbG95ZWUuaWQgPT09ICIiKSB7CgkJCQltc2cgKz0gYDxwPiR7aTE4bi50KCJlbXBsb3llZV9pc19yZXF1aXJlZCIpfTwvcD5gOwoJCQkJcmVzdWx0ID0gZmFsc2U7CgkJCX0KCgkJCS8vIENhc2ggQWR2YW5jZQoJCQlpZiAodGhpcy5jYXNoQWR2YW5jZS51dWlkID09PSAiIikgewoJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgicGxlYXNlX3NlbGVjdF9jYXNoX2FkdmFuY2UiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvLyBDYXNoIEFjY291bnQKCQkJaWYgKAoJCQkJdGhpcy5yZW1haW5pbmcgIT09IDAgJiYKCQkJCXRoaXMuYWR2YW5jZVNldHRsZW1lbnQuY2FzaF9hY2NvdW50Lm5hbWUgPT09ICIiCgkJCSkgewoJCQkJbXNnICs9IGA8cD4ke2kxOG4udCgicGxlYXNlX3NlbGVjdF9jYXNoX2FjY291bnQiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvKiBTZWNvbmRhcnkgQWNjb3VudCAqLwoJCQlsZXQgc2Vjb25kYXJ5QWNjb3VudEFtb3VudCA9IDA7CgkJCS8vIEFkdmFuY2UgU2V0dGxlbWVudCBDbGVhcmluZyBBY2NvdW50IChGcm9tIEV4cGVuc2UpIG9uIERyCgkJCXRoaXMuY2xlYXJpbmdUcmFuc2FjdGlvbnMuZm9yRWFjaCgodmFsdWUpID0+IHsKCQkJCWlmICh2YWx1ZS5hY2NvdW50Lm51bWJlciA9PT0gQWNjb3VudFR5cGVDb2RlLkFEVkFOQ0VfU0VUVExFTUVOVF9DTEVBUklOR19DT0RFICYmIHZhbHVlLnNlY29uZGFyeV9hY2NfdXVpZCAhPT0gIiIpIHsKCQkJCQlzZWNvbmRhcnlBY2NvdW50QW1vdW50ICs9IHZhbHVlLmV4Y2hhbmdlZF9hbW91bnQgKiAtMTsKCQkJCX0KCQkJfSk7CgkJCS8vIENhc2ggQWNjb3VudCBvbiBEci9DcgoJCQlpZiAodGhpcy5yZW1haW5pbmcgIT09IDApIHsKCQkJCWlmKHRoaXMuc2Vjb25kYXJ5QWNjb3VudC51dWlkICE9PSAiIil7CgkJCQkJc2Vjb25kYXJ5QWNjb3VudEFtb3VudCArPSB0aGlzLnJlbWFpbmluZzsKCQkJCX0KCQkJfQoJCQkvLyBDYXNoIEFkdmFuY2Ugb24gQ3IKCQkJdGhpcy5jYXNoQWR2YW5jZS5kZXRhaWxzLmZvckVhY2goKHZhbHVlKSA9PiB7CgkJCQlpZih2YWx1ZS5hY2NvdW50LmFjY291bnRfdHlwZS5jb2RlID09PSBBY2NvdW50VHlwZUNvZGUuQ0FTSF9BRFZBTkNFICYmIHZhbHVlLnNlY29uZGFyeV9hY2NfdXVpZCAhPT0gIiIpewoJCQkJCXNlY29uZGFyeUFjY291bnRBbW91bnQgKz0gdmFsdWUuZXhjaGFuZ2VkX2Ftb3VudCAqIC0xOwoJCQkJfQoJCQl9KTsKCgkJCS8qIFNlY29uZGFyeSBBY2NvdW50IEJhbGFuY2UgKi8KCQkJaWYoc2Vjb25kYXJ5QWNjb3VudEFtb3VudCAhPT0gMCl7CgkJCQltc2cgKz0gYDxwPiR7aTE4bi50KCJzZWNvbmRhcnlfYWNjb3VudF91bmJhbGFuY2UiKX08L3A+YDsKCQkJCXJlc3VsdCA9IGZhbHNlOwoJCQl9CgoJCQkvLyBTaG93IEFsZXJ0CgkJCXRoaXMuZXJyb3JNZXNzYWdlID0gbXNnOwoJCQl0aGlzLmFsZXJ0ID0gZmFsc2U7CgkJCWlmIChyZXN1bHQgPT09IGZhbHNlKSB7CgkJCQl0aGlzLmFsZXJ0ID0gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIHJlc3VsdDsKCQl9LAoJCS8vIEFsbCBTYXZlcwoJCWFzeW5jIG9uU2F2ZU9wdGlvbkNsaWNrKG1vZGUpIHsKCQkJaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpICYmIHRoaXMudmFsaWRhdGVGb3JtKCkpIHsKCQkJCWxldCBpc1ZhbGlkQ2xvc2luZ0RhdGUgPSBhd2FpdCBIZWxwZXIudmFsaWRhdGVDbG9zaW5nRGF0ZSgKCQkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LnNldHRsZW1lbnRfZGF0ZQoJCQkJKTsKCQkJCWlmIChpc1ZhbGlkQ2xvc2luZ0RhdGUpIHsKCQkJCQl0aGlzLnNhdmVNb2RlID0gbW9kZTsKCQkJCQl0aGlzLnNhdmUoKTsKCQkJCX0KCQkJfQoJCX0sCgkJY2FuY2VsKCkgewoJCQl0aGlzLiRzd2FsKHsKCQkJCXRpdGxlOiBpMThuLnQoIm1zZ190aXRsZV93YXJuaW5nIiksCgkJCQl0ZXh0OiBpMThuLnQoIm1zZ19kaXNjYXJkIiksCgkJCQlpY29uOiAid2FybmluZyIsCgkJCQlzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAoJCQkJY2FuY2VsQnV0dG9uVGV4dDogaTE4bi50KCJjYW5jZWwiKSwKCQkJCWNvbmZpcm1CdXR0b25Db2xvcjogIiM0ZDQ4NDgiLAoJCQkJY2FuY2VsQnV0dG9uQ29sb3I6ICIjRUQxQTNBIiwKCQkJCWNvbmZpcm1CdXR0b25UZXh0OiBpMThuLnQoImRpc2NhcmQiKSwKCQkJfSkudGhlbigocmVzdWx0KSA9PiB7CgkJCQlpZiAocmVzdWx0LnZhbHVlKSB7CgkJCQkJdGhpcy5jbGVhcigpOwoJCQkJCXRoaXMuJHJvdXRlci5nbygtMSk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJY2xlYXIoKSB7CgkJCXRoaXMuaXNFZGl0ID0gZmFsc2U7CgkJCXRoaXMuc2F2ZU1vZGUgPSAiIjsKCgkJCXRoaXMuYWR2YW5jZWRBbW91bnQgPSAwOwoJCQl0aGlzLmFkdmFuY2VkRXhjaGFuZ2VBbW91bnQgPSAwOwoJCQl0aGlzLnNldHRsZWRBbW91bnQgPSAwOwoJCQl0aGlzLnNob3dFeGNoYW5nZUFtb3VudCA9IGZhbHNlOwoJCQl0aGlzLnNob3dDYXNoQWNjb3VudCA9IHRydWU7CgoJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50ID0gbmV3IEFkdmFuY2VTZXR0bGVtZW50TW9kZWwoKTsKCQkJdGhpcy5qb3VybmFsID0gbmV3IEpvdXJuYWxNb2RlbCgpOwoJCQl0aGlzLmpvdXJuYWxFbnRyaWVzID0gW107CgkJCXRoaXMuZW1wbG95ZWUgPSBuZXcgRW1wbG95ZWVNb2RlbCgpOwoJCQl0aGlzLmNhc2hBZHZhbmNlID0gbmV3IENhc2hBZHZhbmNlTW9kZWwoKTsKCQkJdGhpcy5jYXNoQWR2YW5jZXMgPSBbXTsKCQkJdGhpcy5jbGVhcmluZ1RyYW5zYWN0aW9ucyA9IFtdOwoKCQkJLy8gRGF0YXNvdXJlCgkJCWxldCBkcyA9IHRoaXMuJHJlZnMuY2xlYXJpbmdUcmFuc2FjdGlvbkRTLmtlbmRvV2lkZ2V0KCk7CgkJCWRzLmRhdGEoW10pOwoKCQkJdGhpcy5zZXREZWZhdWx0RGF0YSgpOwoJCX0sCgkJY29uZmlybURlbGV0ZSgpIHsKCQkJdGhpcy4kc3dhbCh7CgkJCQl0aXRsZTogaTE4bi50KCJhcmVfeW91X3N1cmVfeW91X3dhbnRfdG9fZGVsZXRlX2l0IiksCgkJCQl0ZXh0OiBpMThuLnQoInlvdV93b250X2JlX2FibGVfdG9fcmV2ZXJ0X3RoaXMiKSwKCQkJCWljb246ICJ3YXJuaW5nIiwKCQkJCXNob3dDYW5jZWxCdXR0b246IHRydWUsCgkJCQljb25maXJtQnV0dG9uQ29sb3I6ICIjNGQ0ODQ4IiwKCQkJCWNhbmNlbEJ1dHRvbkNvbG9yOiAiI0VEMUEzQSIsCgkJCQljb25maXJtQnV0dG9uVGV4dDogIlllcyIsCgkJCX0pLnRoZW4oKHJlc3VsdCkgPT4gewoJCQkJaWYgKHJlc3VsdC52YWx1ZSkgewoJCQkJCXRoaXMuc2F2ZU1vZGUgPSBTYXZlT3B0aW9uLkRFTEVURTsKCgkJCQkJLyogTWFyayBhcyBkZWxldGVkICovCgkJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5pc19kZWxldGVkID0gMTsKCgkJCQkJLyogVXBkYXRlIEFjY291bnQgKi8KCQkJCQl0aGlzLnNhdmUoKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQlzYXZlKCkgewoJCQlsZXQgc2VsZiA9IHRoaXM7CgoJCQkvLyBEcmFmdCBNb2RlCgkJCWlmICh0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLlNBVkVEUkFGVCkgewoJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudC5pc19kcmFmdCA9IDE7CgkJCX0gZWxzZSB7CgkJCQl0aGlzLmFkdmFuY2VTZXR0bGVtZW50LmlzX2RyYWZ0ID0gMDsKCQkJfQoKCQkJLy8gU2hyaW5rIERhdGEKCQkJdGhpcy5zaHJpbmtEYXRhKCk7CgoJCQkvLyBBZGQgSm91cm5hbAoJCQl0aGlzLmFkZEpvdXJuYWwoKTsKCgkJCS8vIFN5bmMgRGF0YQoJCQl0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKCQkJYWR2YW5jZVNldHRsZW1lbnRIYW5kbGVyCgkJCQkuc2F2ZSh7CgkJCQkJYWR2YW5jZV9zZXR0bGVtZW50OiBuZXcgQWR2YW5jZVNldHRsZW1lbnRNb2RlbCgKCQkJCQkJdGhpcy5hZHZhbmNlU2V0dGxlbWVudAoJCQkJCSksCgkJCQkJY2FzaF9hZHZhbmNlOiBuZXcgQ2FzaEFkdmFuY2VNb2RlbCh0aGlzLmNhc2hBZHZhbmNlKSwKCQkJCQlleHBlbnNlOiB0aGlzLmNsZWFyaW5nVHJhbnNhY3Rpb25zLAoJCQkJCWpvdXJuYWw6IG5ldyBKb3VybmFsTW9kZWwodGhpcy5qb3VybmFsKSwKCQkJCQlqb3VybmFsX2VudHJpZXM6IHRoaXMuam91cm5hbEVudHJpZXMsCgkJCQl9KQoJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJaWYgKHJlc3BvbnNlKSB7CgkJCQkJCXNlbGYucmVzcG9uc2VTdGF0dXMocmVzcG9uc2UpOwoJCQkJCX1lbHNlewoJCQkJCQl0aGlzLiRzbm90aWZ5LmVycm9yKGkxOG4udCgiZXJyb3Jfc29tZXRoaW5nX3dyb25nIikpOwoJCQkJCX0KCQkJCX0pCgkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJCUhlbHBlci5hbGVydEVycm9yTXNnKGVycm9yKTsKCQkJCX0pCgkJCQkuZmluYWxseSgoKSA9PiB7CgkJCQkJc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwoJCQkJfSk7CgkJfSwKCQkvLyBSZXNwb25zZSBTdGF0dXMKCQlyZXNwb25zZVN0YXR1cyhyZXNwb25zZSkgewoJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKCQkJCWlmICgKCQkJCQl0aGlzLnNhdmVNb2RlID09PSBTYXZlT3B0aW9uLlNBVkVDTE9TRSB8fAoJCQkJCXRoaXMuc2F2ZU1vZGUgPT09IFNhdmVPcHRpb24uREVMRVRFCgkJCQkpIHsKCQkJCQkvKiBTYXZlIENsb3NlIG9yIERlbGV0ZSAqLwoJCQkJCWlmICh0aGlzLmlzRWRpdCkgewoJCQkJCQl0aGlzLmdvQmFja1RvVmlld1BhZ2UoKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aGlzLiRyb3V0ZXIuZ28oLTEpOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJdGhpcy5jbGVhcigpOwoKCQkJCS8qIEFsZXJ0IFN1Y2Nlc3MgKi8KCQkJCXRoaXMuJHNub3RpZnkuc3VjY2VzcyhpMThuLnQoInN1Y2Nlc3NmdWwiKSk7CgkJCX0gZWxzZSB7CgkJCQkvKiBBbGVydCBFcnJvciAqLwoJCQkJdGhpcy4kc25vdGlmeS5lcnJvcihpMThuLnQoImVycm9yX3NvbWV0aGluZ193cm9uZyIpKTsKCQkJfQoJCX0sCgkJLy8gR28gYmFjayB0byB2aWV3IHBhZ2UgYWZ0ZXIgZWRpdCBtb2RlCgkJZ29CYWNrVG9WaWV3UGFnZSgpIHsKCQkJdGhpcy4kcm91dGVyLnJlcGxhY2UoewoJCQkJbmFtZTogIkFkdmFuY2UgU2V0dGxlbWVudCBWaWV3IiwKCQkJCXBhcmFtczogeyBpbml0QWR2YW5jZVNldHRsZW1lbnQ6IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYWR2YW5jZVNldHRsZW1lbnQpIH0sCgkJCX0pOwoJCX0sCgl9LAoJY29tcHV0ZWQ6IHsKCQlyZW1haW5pbmcoKSB7CgkJCXJldHVybiB0aGlzLmFkdmFuY2VkRXhjaGFuZ2VBbW91bnQgLSB0aGlzLnNldHRsZWRBbW91bnQ7CgkJfSwKCX0sCgl3YXRjaDogewoJCWluaXRBZHZhbmNlU2V0dGxlbWVudCgpIHsKCQkJdGhpcy5pbml0aWFsRGF0YSgpOwoJCX0sCgl9LAoJbW91bnRlZCgpIHsKCQkvLyBJbml0aWFsIERhdGEKCQl0aGlzLmluaXRpYWxEYXRhKCk7Cgl9LAp9Owo="},{"version":3,"sources":["AdvanceSettlement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdvanceSettlement.vue","sourceRoot":"src/views/suppliers","sourcesContent":["<template>\n\t<v-app>\n\t\t<v-container>\n\t\t\t<v-row>\n\t\t\t\t<v-col cols=\"12\" sm=\"12\">\n\t\t\t\t\t<v-card\n\t\t\t\t\t\toutlined\n\t\t\t\t\t\tdense\n\t\t\t\t\t\tclass=\"pa-4 no_border rounded-sm\"\n\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n\t\t\t\t\t\t\t<v-card outlined dense class=\"no_border\">\n\t\t\t\t\t\t\t\t<h2 class=\"mb-0\">{{ $t(\"advance_settlement\") }}</h2>\n\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\tonclick=\"window.history.go(-1); return false;\"\n\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer; color: #333; font-size: 40px;\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right\"\n\t\t\t\t\t\t\t\t\t>close\n\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t<v-card outlined dense class=\"px-3 no_border mb-3\" color=\"grayBg\">\n\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- New Mode -->\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"employee\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<app-employee-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t:initEmployee=\"employee\"\n\t\t\t\t\t\t\t\t\t\t\t\t@emitEmployee=\"employee = $event\"\n\t\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"loadCashAdvance\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"advance_number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-select\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"employee.id === ''\"\n\t\t\t\t\t\t\t\t\t\t\t\t:items=\"cashAdvances\"\n\t\t\t\t\t\t\t\t\t\t\t\titem-value=\"uuid\"\n\t\t\t\t\t\t\t\t\t\t\t\titem-text=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"cashAdvance\"\n\t\t\t\t\t\t\t\t\t\t\t\t@change=\"onCashAdvanceChanges\"\n\t\t\t\t\t\t\t\t\t\t\t\tno-data-text=\"No data found.\"\n\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"[(v) => !!v || 'Cash Advance is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select Cash Advance\"\n\t\t\t\t\t\t\t\t\t\t\t\treturn-object\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t\t\t<!-- Edit Mode -->\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"employee\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.settled_by.name\"\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"advance_number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"cashAdvance.number\"\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"date\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<app-datepicker\n\t\t\t\t\t\t\t\t\t\t\t:initialDate=\"advanceSettlement.settlement_date\"\n\t\t\t\t\t\t\t\t\t\t\t@emitDate=\"advanceSettlement.settlement_date = $event\"\n\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"generateNumber\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"number\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"10\" cols=\"10\" class=\"pb-0 pt-1 pr-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\ttage=\"Number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"[(v) => !!v || 'Number is required']\"\n\t\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"2\" cols=\"2\" class=\"pb-0 pt-1 pl-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"30\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"border_qrcode\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"generateNumber\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tmdi-qrcode\n\t\t\t\t\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t<v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"description\") }}</label>\n\t\t\t\t\t\t\t\t\t\t<v-textarea\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\tno-resize\n\t\t\t\t\t\t\t\t\t\t\theight=\"120px\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"advanceSettlement.description\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('transaction_purpose')\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t</v-card>\n\n\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"pb-3 pa-3\">\n\t\t\t\t\t\t\t\t\t<p>{{ $t(\"purchase_transactions\") }}</p>\n\n\t\t\t\t\t\t\t\t\t<kendo-datasource\n\t\t\t\t\t\t\t\t\t\tref=\"clearingTransactionDS\"\n\t\t\t\t\t\t\t\t\t\t:data=\"clearingTransactionGrouping\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<kendo-grid\n\t\t\t\t\t\t\t\t\t\tid=\"clearingTransactionGrid\"\n\t\t\t\t\t\t\t\t\t\tref=\"clearingTransactionGrid\"\n\t\t\t\t\t\t\t\t\t\tclass=\"grid-function\"\n\t\t\t\t\t\t\t\t\t\t:data-source-ref=\"'clearingTransactionDS'\"\n\t\t\t\t\t\t\t\t\t\t:sortable=\"true\"\n\t\t\t\t\t\t\t\t\t\t:filterable=\"true\"\n\t\t\t\t\t\t\t\t\t\t:noRecords=\"true\"\n\t\t\t\t\t\t\t\t\t\t:column-menu=\"true\"\n\t\t\t\t\t\t\t\t\t\t:scrollable-virtual=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('no.')\"\n\t\t\t\t\t\t\t\t\t\t\t:template=\"rowNumberTmpl\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"40\"\n\t\t\t\t\t\t\t\t\t\t\t:column-menu=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t\tclass: 'text-products;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: products',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'number'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('number')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'name'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('supplier')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'amount'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('amount')\"\n\t\t\t\t\t\t\t\t\t\t\t:format=\"'{0:n}'\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'currency'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('currency')\"\n\t\t\t\t\t\t\t\t\t\t\t:template=\"'#=currency.code#'\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<kendo-grid-column\n\t\t\t\t\t\t\t\t\t\t\t:field=\"'exchanged_amount'\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$t('exchanged_amount')\"\n\t\t\t\t\t\t\t\t\t\t\t:width=\"100\"\n\t\t\t\t\t\t\t\t\t\t\t:headerAttributes=\"{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'text-align: right; background-color: #EDF1F5;',\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t:attributes=\"{ style: 'text-align: right; ' }\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</kendo-grid>\n\n\t\t\t\t\t\t\t\t\t<v-row style=\"background-color: #fff;\">\n\t\t\t\t\t\t\t\t\t\t<v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-file-input\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-0 pt-0 \"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsm=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcols=\"6\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('attachment')\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\t\tprepend-icon=\"mdi-paperclip\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-slot:selection=\"{ text }\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-chip small label color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ text }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-chip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-file-input>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t<v-col sm=\"7\" cols=\"12\" class=\"py-0 pr-0\">\n\t\t\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3 pb-3 no_border\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"grayBg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"pb-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-simple-table class=\"cash-balance\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"advance_amount\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(advancedAmount).toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ cashAdvance.currency.code }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"showExchangeAmount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"advance_in_exchanged_amount\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td width=\"200px\" style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvancedExchangeAmount\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"settled_amount\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ Number(settledAmount).toLocaleString() }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"showCashAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">{{ $t(\"cash_account\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"hide_form_alert\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-cash-account-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initAccount=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvanceSettlement.cash_account\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitAccount=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadvanceSettlement.cash_account = $event\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"$store.state.accounting.secondaryAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td v-if=\"showCashAccount\">{{ $t(\"secondary_account\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"hide_form_alert\" v-if=\"showCashAccount\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-secondary-account-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initPrimaryAccountId=\"advanceSettlement.cash_account.uuid\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initAccount=\"secondaryAccount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitAccount=\"secondaryAccount = $event\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{{ $t(\"remaining\") }}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ Number(remaining).toLocaleString() }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-simple-table>\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t</v-row>\n\n\t\t\t\t\t\t\t<v-divider class=\"mt-3\" />\n\t\t\t\t\t\t\t<v-card outlined dense class=\"no_border function_footer\">\n\t\t\t\t\t\t\t\t<!-- Warning Message -->\n\t\t\t\t\t\t\t\t<v-alert type=\"warning\" v-model=\"alert\" dismissible>\n\t\t\t\t\t\t\t\t\t<span v-html=\"errorMessage\" />\n\t\t\t\t\t\t\t\t</v-alert>\n\n\t\t\t\t\t\t\t\t<v-menu>\n\t\t\t\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mr-2 text-capitalize  black--text float-left\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"select_template\") }}\n\t\t\t\t\t\t\t\t\t\t\t<v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<v-list>\n\t\t\t\t\t\t\t\t\t\t<v-list-item\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in templates\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>{{ item.title }}</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t</v-list>\n\t\t\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text float-left\"\n\t\t\t\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $t(\"cancel\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclass=\"ml-2 text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\t\t\t@click=\"confirmDelete\"\n\t\t\t\t\t\t\t\t\t>{{ $t(\"delete\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-menu>\n\t\t\t\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\n\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-2 float-right text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"save_option\") }}\n\t\t\t\t\t\t\t\t\t\t\t<v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<v-list rounded>\n\t\t\t\t\t\t\t\t\t\t<v-list-item-group>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVENEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_new\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVEPRINT)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_print\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item v-if=\"!isEdit\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVEDRAFT)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"save_draft\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\t\t\t\t\t</v-list-item-group>\n\t\t\t\t\t\t\t\t\t</v-list>\n\t\t\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tclass=\"float-right  text-capitalize white--text\"\n\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n\t\t\t\t\t\t\t\t\t>{{ $t(\"save_close\") }}\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t</v-form>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-col>\n\t\t\t</v-row>\n\t\t\t<LoadingMe\n\t\t\t\t:isLoading=\"showLoading\"\n\t\t\t\t:fullPage=\"false\"\n\t\t\t\t:myLoading=\"true\"\n\t\t\t\t:alertMessage=\"loadingAlert\"\n\t\t\t\t:color=\"loadingColorAlert\"\n\t\t\t\t:alertText=\"loadingTextAlert\"\n\t\t\t/>\n\t\t</v-container>\n\t</v-app>\n</template>\n\n<script>\n// import kendo from \"@progress/kendo-ui\";\nimport JQuery from \"jquery\";\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\nimport {\n\tAdvanceSettlementModel,\n\tJournalModel,\n\tJournalEntryModel,\n\tAccountModel,\n\tEmployeeModel,\n\tCashAdvanceModel,\n\tCurrencyModel,\n\tContactModel,\n} from \"@/scripts/model/AppModels\";\nimport AccountSecondaryEditor from \"@/scripts/kendo_editor/AccountSecondary\";\n\n/* Store */\nimport store from \"@/store\";\nconst institute = store.state.institute.institute;\n\nconst {\n\tadvanceSettlementHandler,\n\tcashAdvanceHandler,\n} = require(\"@/scripts/AppHandlers\");\nconst clearingTransactionHandler = require(\"@/scripts/handler/workingcapital/clearingTransactionHandler.js\");\n\nconst {\n\tAccountTypeCode,\n\tSaveOption,\n\tEntityType,\n} = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n\tname: \"AdvanceSettlement\",\n\tcomponents: {\n\t\tLoadingMe: () => import(\"@/components/Loading\"),\n\t\t\"app-datepicker\": () =>\n\t\t\timport(\"@/components/custom_templates/DatePickerComponent\"),\n\t\t\"app-employee-dropdownlist\": () =>\n\t\t\timport(\"@/components/dropdownlist/Employee\"),\n\t\t\"app-cash-account-dropdownlist\": () =>\n\t\t\timport(\"@/components/dropdownlist/CashAccount\"),\n\t\t\"app-secondary-account-dropdownlist\": () => import('@/components/dropdownlist/AccountSecondary'),\n\t},\n\tprops: {\n\t\tinitAdvanceSettlement: {\n\t\t\ttype: AdvanceSettlementModel,\n\t\t},\n\t\tinitCashAdvance: {\n\t\t\ttype: CashAdvanceModel,\n\t\t},\n\t\tinitClearingTransactions: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\tdata: () => ({\n\t\t// Obj\n\t\tadvanceSettlement: new AdvanceSettlementModel(),\n\t\tjournal: new JournalModel(),\n\t\tjournalEntries: [],\n\t\temployee: new EmployeeModel(),\n\t\tclearingTransactionGrouping: [],\n\t\tclearingTransactions: [],\n\t\tcashAdvance: new CashAdvanceModel(),\n\t\tcashAdvances: [],\n\t\tsecondaryAccount: new AccountModel(),\n\t\t// Other\n\t\tadvancedAmount: 0,\n\t\tadvancedExchangeAmount: 0,\n\t\tsettledAmount: 0,\n\t\tshowExchangeAmount: false,\n\t\tshowCashAccount: true,\n\t\tfiles: [],\n\t\ttemplates: [],\n\t\tuser: Helper.getUser(),\n\t\t/* Editors */\n\t\tAccountSecondaryEditor : AccountSecondaryEditor,\n\t\t// Form validation\n\t\tvalid: true,\n\t\tisEdit: false,\n\t\talert: false,\n\t\terrorMessage: \"\",\n\t\tsaveMode: \"\",\n\t\tSaveOption: SaveOption,\n\t\t// LoadingMe\n\t\tshowLoading: false,\n\t\tloadingAlert: false,\n\t\tloadingColorAlert: \"\",\n\t\tloadingTextAlert: \"\",\n\t}),\n\tmethods: {\n\t\t// Initial Data\n\t\tinitialData() {\n\t\t\tif (this.initAdvanceSettlement) {\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.advanceSettlement = Object.assign({}, this.initAdvanceSettlement);\n\n\t\t\t\tthis.bindData();\n\t\t\t} else {\n\t\t\t\t// Brand New Mode\n\t\t\t\tthis.setDefaultData();\n\t\t\t}\n\t\t},\n\t\t// Set default data\n\t\tsetDefaultData() {\n\t\t\t// Brand New Mode\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.advanceSettlement = new AdvanceSettlementModel({\n\t\t\t\tsettlement_date: new Date().toISOString().substr(0, 10),\n\t\t\t});\n\n\t\t\t// Generate Number\n\t\t\tthis.generateNumber();\n\t\t},\n\t\t// Bind data from prop for edit mode\n\t\tasync bindData() {\n\t\t\t// Edit Mode\n\t\t\tthis.isEdit = true;\n\n\t\t\t// Employee\n\t\t\tthis.employee = new EmployeeModel(this.advanceSettlement.settled_by);\n\n\t\t\t// Cash Advance\n\t\t\tthis.cashAdvance = new CashAdvanceModel(this.initCashAdvance);\n\n\t\t\t// Show/Hide exchange amount\n\t\t\tlet baseCurrency = new CurrencyModel(institute.baseCurrency);\n\t\t\tthis.showExchangeAmount = Boolean(\n\t\t\t\tthis.cashAdvance.currency.code !== baseCurrency.code\n\t\t\t);\n\n\t\t\t// Clearing Transactions\n\t\t\tthis.clearingTransactions = this.initClearingTransactions;\n\t\t\tthis.clearingTransactionGrouping = Helper.groupExpenseByCashAdvance(\n\t\t\t\tthis.clearingTransactions\n\t\t\t);\n\t\t\tthis.autoCalculate();\n\n\t\t\t//Journal\n\t\t\tthis.journal = this.advanceSettlement.journal;\n\t\t\tthis.journalEntries = this.advanceSettlement.journal_entries;\n\t\t},\n\t\t// Number\n\t\tasync generateNumber() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\tlet num = await Helper.generateAccountingNumber(\n\t\t\t\t\tEntityType.ADVANCE_SETTLEMENT,\n\t\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t\t);\n\n\t\t\t\tthis.advanceSettlement.number = num.number;\n\t\t\t\tthis.advanceSettlement.prefix_format = num.prefix_format;\n\t\t\t}\n\t\t},\n\t\t// Row Number Template\n\t\trowNumberTmpl(dataItem) {\n\t\t\tlet ds = this.$refs.clearingTransactionDS.kendoWidget(),\n\t\t\t\tindex = ds.indexOf(dataItem);\n\n\t\t\treturn index + 1;\n\t\t},\n\t\t// Load Cash Advance\n\t\tloadCashAdvance() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\tthis.cashAdvance = new CashAdvanceModel();\n\t\t\t\tthis.cashAdvances = [];\n\n\t\t\t\tif (this.employee.id !== \"\") {\n\t\t\t\t\tlet cashAdvanceList = [];\n\n\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\tcashAdvanceHandler\n\t\t\t\t\t\t.getByEmployeeId(this.employee.id)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (!JQuery.isEmptyObject(res.data)) {\n\t\t\t\t\t\t\t\tres.data.forEach((value) => {\n\t\t\t\t\t\t\t\t\tcashAdvanceList.push(new CashAdvanceModel(value));\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tthis.cashAdvances = cashAdvanceList;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// On Cash Advance Changes\n\t\tonCashAdvanceChanges() {\n\t\t\tthis.clearingTransactionGrouping = [];\n\t\t\tthis.clearingTransactions = [];\n\t\t\tthis.autoCalculate();\n\n\t\t\tif (this.cashAdvance.uuid !== \"\") {\n\t\t\t\t// Show/Hide exchange amount\n\t\t\t\tlet baseCurrency = new CurrencyModel(institute.baseCurrency);\n\t\t\t\tthis.showExchangeAmount = Boolean(\n\t\t\t\t\tthis.cashAdvance.currency.code !== baseCurrency.code\n\t\t\t\t);\n\n\t\t\t\t// Load Related Expenses\n\t\t\t\tthis.showLoading = true;\n\t\t\t\tclearingTransactionHandler\n\t\t\t\t\t.getByCashAdvanceId(this.cashAdvance.uuid)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (typeof res.data === \"object\") {\n\t\t\t\t\t\t\tthis.clearingTransactions = res.data;\n\t\t\t\t\t\t\tthis.clearingTransactionGrouping = Helper.groupExpenseByCashAdvance(\n\t\t\t\t\t\t\t\tres.data\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.autoCalculate();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// Auto Calculate\n\t\tautoCalculate() {\n\t\t\t// Cash Advance Amount\n\t\t\tthis.advancedAmount = 0;\n\t\t\tthis.advancedExchangeAmount = 0;\n\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\tif (value.amount > 0) {\n\t\t\t\t\tthis.advancedAmount += value.amount;\n\t\t\t\t\tthis.advancedExchangeAmount += value.exchanged_amount;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Transaction Amount\n\t\t\tthis.settledAmount = 0;\n\t\t\tthis.clearingTransactionGrouping.forEach((value) => {\n\t\t\t\tthis.settledAmount += value.exchanged_amount;\n\t\t\t});\n\n\t\t\tthis.showCashAccount = Boolean(\n\t\t\t\tthis.advancedExchangeAmount - this.settledAmount !== 0\n\t\t\t);\n\t\t},\n\t\t// Shrink Data\n\t\tshrinkData() {\n\t\t\t// Settlement Date\n\t\t\tthis.advanceSettlement.settlement_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\n\t\t\t// Employee\n\t\t\tthis.advanceSettlement.settled_by = new ContactModel(this.employee);\n\n\t\t\t// Cash Advance\n\t\t\tthis.advanceSettlement.cash_advance_uuid = this.cashAdvance.uuid;\n\n\t\t\t// Cash Amount\n\t\t\tthis.advanceSettlement.cash_amount = this.remaining;\n\n\t\t\t// Update Cash Advance\n\t\t\tthis.cashAdvance.is_settled = 1;\n\t\t\tthis.cashAdvance.settled_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\n\t\t\t// User\n\t\t\tif (this.isEdit) {\n\t\t\t\tthis.advanceSettlement.modified_by = this.user;\n\t\t\t} else {\n\t\t\t\tthis.advanceSettlement.created_by = this.user;\n\t\t\t}\n\t\t},\n\t\t// Add Journal\n\t\taddJournal() {\n\t\t\tif (!this.isEdit) {\n\t\t\t\t// New Mode\n\t\t\t\tlet entries = [];\n\n\t\t\t\t// Advance Settlement Clearing Account (From Expense) on Dr\n\t\t\t\tthis.clearingTransactions.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue.account.number ===\n\t\t\t\t\t\tAccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE\n\t\t\t\t\t) {\n\t\t\t\t\t\tentries.push(\n\t\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\t\taccount: new AccountModel(value.account),\n\t\t\t\t\t\t\t\taccount_uuid: value.account.uuid,\n\t\t\t\t\t\t\t\tsecondary_acc_uuid: value.secondary_acc_uuid,\n\t\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\t\tamount: value.exchanged_amount * -1,\n\t\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Cash Account\n\t\t\t\tif (this.remaining !== 0) {\n\t\t\t\t\tentries.push(\n\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\taccount: new AccountModel(this.advanceSettlement.cash_account),\n\t\t\t\t\t\t\taccount_uuid: this.advanceSettlement.cash_account.uuid,\n\t\t\t\t\t\t\tsecondary_acc_uuid: this.secondaryAccount.uuid,\n\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\tamount: this.remaining,\n\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Cash Advance on Cr\n\t\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue.account.account_type.code === AccountTypeCode.CASH_ADVANCE\n\t\t\t\t\t) {\n\t\t\t\t\t\tentries.push(\n\t\t\t\t\t\t\tnew JournalEntryModel({\n\t\t\t\t\t\t\t\taccount: new AccountModel(value.account),\n\t\t\t\t\t\t\t\taccount_uuid: value.account.uuid,\n\t\t\t\t\t\t\t\tsecondary_acc_uuid: value.secondary_acc_uuid,\n\t\t\t\t\t\t\t\tprimary_contact: new ContactModel(this.employee),\n\t\t\t\t\t\t\t\tdescription: this.advanceSettlement.description,\n\t\t\t\t\t\t\t\tcurrency: institute.baseCurrency,\n\t\t\t\t\t\t\t\tamount: value.exchanged_amount * -1, // Cr side is negative\n\t\t\t\t\t\t\t\texchange_rate: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Journal Entries\n\t\t\t\tthis.journalEntries = entries;\n\t\t\t} else {\n\t\t\t\t// Edit Mode\n\t\t\t\tthis.journalEntries.forEach((value) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t~AccountTypeCode.CASH_ACCOUNTS.indexOf(\n\t\t\t\t\t\t\tvalue.account.account_type.code\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tvalue.account = new AccountModel(\n\t\t\t\t\t\t\tthis.advanceSettlement.cash_account\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Journal\n\t\t\tthis.journal.number = this.advanceSettlement.number;\n\t\t\tthis.journal.description = this.advanceSettlement.description;\n\t\t\tthis.journal.journal_date = Helper.toISODate(\n\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t);\n\t\t\tthis.journal.journal_type = EntityType.AUTO_JOURNAL;\n\t\t\tthis.journal.transaction_type = EntityType.ADVANCE_SETTLEMENT;\n\t\t\tthis.journal.prefix_format = this.advanceSettlement.prefix_format;\n\t\t\tthis.journal.project_uuid = this.cashAdvance.project_uuid;\n\t\t\tthis.journal.segment_uuid = this.cashAdvance.segment_uuid;\n\t\t\tthis.journal.is_draft = this.advanceSettlement.is_draft;\n\t\t\tthis.journal.created_by = this.advanceSettlement.created_by;\n\t\t\tthis.journal.modified_by = this.advanceSettlement.modified_by;\n\t\t},\n\t\t// Validating\n\t\tvalidateForm() {\n\t\t\tlet result = true,\n\t\t\t\tmsg = \"\";\n\n\t\t\t// Employee\n\t\t\tif (this.employee.id === \"\") {\n\t\t\t\tmsg += `<p>${i18n.t(\"employee_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Cash Advance\n\t\t\tif (this.cashAdvance.uuid === \"\") {\n\t\t\t\tmsg += `<p>${i18n.t(\"please_select_cash_advance\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Cash Account\n\t\t\tif (\n\t\t\t\tthis.remaining !== 0 &&\n\t\t\t\tthis.advanceSettlement.cash_account.name === \"\"\n\t\t\t) {\n\t\t\t\tmsg += `<p>${i18n.t(\"please_select_cash_account\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t/* Secondary Account */\n\t\t\tlet secondaryAccountAmount = 0;\n\t\t\t// Advance Settlement Clearing Account (From Expense) on Dr\n\t\t\tthis.clearingTransactions.forEach((value) => {\n\t\t\t\tif (value.account.number === AccountTypeCode.ADVANCE_SETTLEMENT_CLEARING_CODE && value.secondary_acc_uuid !== \"\") {\n\t\t\t\t\tsecondaryAccountAmount += value.exchanged_amount * -1;\n\t\t\t\t}\n\t\t\t});\n\t\t\t// Cash Account on Dr/Cr\n\t\t\tif (this.remaining !== 0) {\n\t\t\t\tif(this.secondaryAccount.uuid !== \"\"){\n\t\t\t\t\tsecondaryAccountAmount += this.remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Cash Advance on Cr\n\t\t\tthis.cashAdvance.details.forEach((value) => {\n\t\t\t\tif(value.account.account_type.code === AccountTypeCode.CASH_ADVANCE && value.secondary_acc_uuid !== \"\"){\n\t\t\t\t\tsecondaryAccountAmount += value.exchanged_amount * -1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* Secondary Account Balance */\n\t\t\tif(secondaryAccountAmount !== 0){\n\t\t\t\tmsg += `<p>${i18n.t(\"secondary_account_unbalance\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Show Alert\n\t\t\tthis.errorMessage = msg;\n\t\t\tthis.alert = false;\n\t\t\tif (result === false) {\n\t\t\t\tthis.alert = true;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\t// All Saves\n\t\tasync onSaveOptionClick(mode) {\n\t\t\tif (this.$refs.form.validate() && this.validateForm()) {\n\t\t\t\tlet isValidClosingDate = await Helper.validateClosingDate(\n\t\t\t\t\tthis.advanceSettlement.settlement_date\n\t\t\t\t);\n\t\t\t\tif (isValidClosingDate) {\n\t\t\t\t\tthis.saveMode = mode;\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcancel() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t(\"msg_title_warning\"),\n\t\t\t\ttext: i18n.t(\"msg_discard\"),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcancelButtonText: i18n.t(\"cancel\"),\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: i18n.t(\"discard\"),\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tclear() {\n\t\t\tthis.isEdit = false;\n\t\t\tthis.saveMode = \"\";\n\n\t\t\tthis.advancedAmount = 0;\n\t\t\tthis.advancedExchangeAmount = 0;\n\t\t\tthis.settledAmount = 0;\n\t\t\tthis.showExchangeAmount = false;\n\t\t\tthis.showCashAccount = true;\n\n\t\t\tthis.advanceSettlement = new AdvanceSettlementModel();\n\t\t\tthis.journal = new JournalModel();\n\t\t\tthis.journalEntries = [];\n\t\t\tthis.employee = new EmployeeModel();\n\t\t\tthis.cashAdvance = new CashAdvanceModel();\n\t\t\tthis.cashAdvances = [];\n\t\t\tthis.clearingTransactions = [];\n\n\t\t\t// Datasoure\n\t\t\tlet ds = this.$refs.clearingTransactionDS.kendoWidget();\n\t\t\tds.data([]);\n\n\t\t\tthis.setDefaultData();\n\t\t},\n\t\tconfirmDelete() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t(\"are_you_sure_you_want_to_delete_it\"),\n\t\t\t\ttext: i18n.t(\"you_wont_be_able_to_revert_this\"),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: \"Yes\",\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.saveMode = SaveOption.DELETE;\n\n\t\t\t\t\t/* Mark as deleted */\n\t\t\t\t\tthis.advanceSettlement.is_deleted = 1;\n\n\t\t\t\t\t/* Update Account */\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsave() {\n\t\t\tlet self = this;\n\n\t\t\t// Draft Mode\n\t\t\tif (this.saveMode === SaveOption.SAVEDRAFT) {\n\t\t\t\tthis.advanceSettlement.is_draft = 1;\n\t\t\t} else {\n\t\t\t\tthis.advanceSettlement.is_draft = 0;\n\t\t\t}\n\n\t\t\t// Shrink Data\n\t\t\tthis.shrinkData();\n\n\t\t\t// Add Journal\n\t\t\tthis.addJournal();\n\n\t\t\t// Sync Data\n\t\t\tthis.showLoading = true;\n\t\t\tadvanceSettlementHandler\n\t\t\t\t.save({\n\t\t\t\t\tadvance_settlement: new AdvanceSettlementModel(\n\t\t\t\t\t\tthis.advanceSettlement\n\t\t\t\t\t),\n\t\t\t\t\tcash_advance: new CashAdvanceModel(this.cashAdvance),\n\t\t\t\t\texpense: this.clearingTransactions,\n\t\t\t\t\tjournal: new JournalModel(this.journal),\n\t\t\t\t\tjournal_entries: this.journalEntries,\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tself.responseStatus(response);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\tHelper.alertErrorMsg(error);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tself.showLoading = false;\n\t\t\t\t});\n\t\t},\n\t\t// Response Status\n\t\tresponseStatus(response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\tif (\n\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t) {\n\t\t\t\t\t/* Save Close or Delete */\n\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.goBackToViewPage();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.clear();\n\n\t\t\t\t/* Alert Success */\n\t\t\t\tthis.$snotify.success(i18n.t(\"successful\"));\n\t\t\t} else {\n\t\t\t\t/* Alert Error */\n\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t}\n\t\t},\n\t\t// Go back to view page after edit mode\n\t\tgoBackToViewPage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: \"Advance Settlement View\",\n\t\t\t\tparams: { initAdvanceSettlement: Object.assign({}, this.advanceSettlement) },\n\t\t\t});\n\t\t},\n\t},\n\tcomputed: {\n\t\tremaining() {\n\t\t\treturn this.advancedExchangeAmount - this.settledAmount;\n\t\t},\n\t},\n\twatch: {\n\t\tinitAdvanceSettlement() {\n\t\t\tthis.initialData();\n\t\t},\n\t},\n\tmounted() {\n\t\t// Initial Data\n\t\tthis.initialData();\n\t},\n};\n</script>\n\n<style scoped>\n.function_content {\n\tpadding: 0 25px 25px;\n\tborder-bottom: 0;\n}\n\n.cash-balance.theme--light.v-data-table {\n\tbackground-color: transparent !important;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr\n\t> td {\n\tpadding: 5px 10px !important;\n\theight: 50px;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr\n\t> td:not(.v-data-table__mobile-row) {\n\tborder-top: thin solid rgba(0, 0, 0, 0.12);\n\tborder-bottom: 0 !important;\n}\n\n.cash-balance.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr:last-child\n\ttd {\n\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n\n.k-link {\n\tcolor: aqua !important;\n}\n\n@media (min-width: 1264px) {\n\t.container {\n\t\t/* max-width: 1185px; */\n\t\tmax-width: 1080px !important;\n\t}\n}\n\n@media (max-width: 576px) {\n\t.mb-6 {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n.theme--light.v-data-table\n\t> .v-data-table__wrapper\n\t> table\n\t> tbody\n\t> tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n\tbackground-color: transparent !important;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/settings/Leave.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/settings/Leave.vue","mtime":1638499443263},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IHBheXJvbGxIYW5kbGVyID0gcmVxdWlyZSgiLi4vLi4vLi4vc2NyaXB0cy9wYXlyb2xsSGFuZGxlciIpCmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6IHt9LAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBkaWFsb2dtMTogJycsCiAgICAgICAgZGlhbG9nbTI6IGZhbHNlLAogICAgICAgIHZhbGlkOiB0cnVlLAogICAgICAgIGxlYXZlczogW10sCiAgICAgICAgc2VsZWN0TGVhdmU6IHt9LAogICAgICAgIGFwcHJvdmVBbW91bnQ6ICcnLAogICAgICAgIG9wdGlvbjogMSwKICAgICAgICBsZWF2ZUxpc3Q6WwogICAgICAgICAgICB7aWQ6ICd1bnBhaWRfbGVhdmUnLCAgICBuYW1lOiAnVW5wYWlkIExlYXZlJ30sCiAgICAgICAgICAgIHtpZDogJ2FubnVhbF9sZWF2ZScsICAgIG5hbWU6ICdBbm51YWwgTGVhdmUnfSwKICAgICAgICAgICAge2lkOiAnY29ucGVuc2F0X2xlYXZlJywgbmFtZTogJ0NvbnBlbnNhdCBMZWF2ZSd9LAogICAgICAgICAgICB7aWQ6ICdzaWNrX2xlYXZlJywgICAgICBuYW1lOiAnU2ljayBMZWF2ZSd9LAogICAgICAgICAgICB7aWQ6ICdtYXRlcm5pdHlfbGVhdmUnLCBuYW1lOiAnTWF0ZXJuaXR5IExlYXZlJ30sCiAgICAgICAgICAgIHtpZDogJ3BhdGVybml0eV9sZWF2ZScsIG5hbWU6ICdQYXRlcm5pdHkgTGVhdmUnfSwKICAgICAgICAgICAge2lkOiAnc3R1ZHlfbGVhdmUnLCAgICAgbmFtZTogJ1N0dWR5IExlYXZlJ30sCiAgICAgICAgXQogICAgfSksCiAgICBwcm9wczoge30sCiAgICBjb21wdXRlZDoge30sCiAgICB3YXRjaDogewogICAgICAgIGRpYWxvZ20yKHZhbCkgewogICAgICAgICAgICB2YWwgfHwgdGhpcy5jbG9zZSgpCiAgICAgICAgfSwKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBvbkVkaXRDbGljayh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLmlkICAgICAgICAgICAgID0gdmFsdWUuaWQKICAgICAgICAgICAgdGhpcy5zZWxlY3RMZWF2ZSAgICA9IHZhbHVlLmxlYXZlCiAgICAgICAgICAgIHRoaXMuYXBwcm92ZUFtb3VudCAgPSB2YWx1ZS5hcHByb3ZlQW1vdW50CiAgICAgICAgICAgIHRoaXMuZGlhbG9nbTIgICAgICAgPSB0cnVlCiAgICAgICAgfSwKICAgICAgICBvbk5ld0NsaWNrKCkgewogICAgICAgICAgICB0aGlzLm9wdGlvbiA9IDEKICAgICAgICAgICAgdGhpcy5jbGVhcigpCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblNhdmVDbG9zZSgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPyB0aGlzLmlkIDogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZlOiB0aGlzLnNlbGVjdExlYXZlLAogICAgICAgICAgICAgICAgICAgICAgICBhcHByb3ZlQW1vdW50OiB0aGlzLmFwcHJvdmVBbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZlTmFtZTogICB0aGlzLnNlbGVjdExlYXZlLm5hbWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKDEsZGF0YSkKICAgICAgICAgICAgICAgICAgICBwYXlyb2xsSGFuZGxlci5jcmVhdGVMZWF2ZShkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubGVhdmVzLmZpbmRJbmRleChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJlcy5kYXRhLmlkID09PSBpdGVtLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxlYXZlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRMZWF2ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWF2ZXMucHVzaChyZXMuZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXZlcy5zcGxpY2UoaW5kZXgsIDEsIHJlcy5kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuc3VjY2VzcygnU3VjY2VzcycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNub3RpZnkuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZExlYXZlKCl7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBwYXlyb2xsSGFuZGxlci5nZXRMZWF2ZSgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLnN0YXR1c0NvZGUgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXZlcyA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGNsb3NlKCkgewogICAgICAgICAgICB0aGlzLmRpYWxvZ20yID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIGNsZWFyKCkgeyAgCiAgICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudFNlbGVjdGVkICAgPSAnJwogICAgICAgICAgICB0aGlzLm5zc2YgPSB7fQogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZDogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMubG9hZExlYXZlKCkKICAgIH0KfTsK"},{"version":3,"sources":["Leave.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Leave.vue","sourceRoot":"src/views/payroll/settings","sourcesContent":["<template>\n    <v-row class=\"\">\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <h2 class=\"mb-0 font_20\">{{$t('leave')}}</h2>\n            <v-dialog v-model=\"dialogm2\" max-width=\"380px\">\n                <!-- <template v-slot:activator=\"{ on }\">\n                    <v-btn color=\"primary\" class=\" text-capitalize white--text float-right\" v-on=\"on\" @click=\"onNewClick\">\n                        {{$t('create_new')}}\n                    </v-btn>\n                </template> -->\n                <v-card>\n                   <div class=\"modal_header\">\n                        <v-card-title>{{$t('leave')}}</v-card-title>\n                        <v-icon class=\"btn_close\" @click=\"dialogm2 = false\">close</v-icon>\n                    </div>\n                    <v-card-text class=\"modal_text_content\">\n                        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                            <v-row>\n                                <v-col sm=\"12\" cols=\"12\" class=\"\">\n                                    <label class=\"label\">{{$t('leave_name')}}</label>\n                                    <v-select class=\"mt-1\"\n                                        id=\"acc_type_selector\"\n                                        :items=\"leaveList\"\n                                        :rules=\"[v => !!v || $t('leave_name_require')]\"\n                                        item-text=\"name\"\n                                        item-value=\"id\"\n                                        v-model=\"selectLeave\"\n                                        outlined\n                                        return-object/>\n\n                                    <label class=\"label\">{{$t('approv_amount')}}</label>\n                                    <v-text-field class=\"mt-1\"\n                                        outlined\n                                        tage=\"approveAmount\"\n                                        v-model=\"approveAmount\"\n                                        :rules=\"[v => !!v || $t('approv_amount_is_required')]\"\n                                        placeholder=\"\"/>\n                                </v-col>\n                            </v-row>\n                        </v-form>\n                    </v-card-text>\n                    <v-divider/>\n                    <v-card-actions class=\"modal_footer\">\n                        <v-row>\n                            <v-col sm=\"6\" cols=\"6\" class=\"py-0 text-left\">\n                                <v-btn small color=\"primary\" outlined class=\" text-capitalize  black--text float-left\" @click=\"dialogm2 = false\">{{$t('cancel')}}</v-btn>\n                            </v-col>\n                            <v-col  sm=\"6\" cols=\"6\" class=\"py-0 text-right\">\n                                <v-btn small color=\"primary\" class=\" white--text text-capitalize\" @click=\"onSaveClose\">{{$t('save_close')}}\n                                </v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-card-actions>\n\n                </v-card>\n            </v-dialog>\n            <p class=\"mb-0\">{{$t('leav_desc')}} </p>\n        </v-col>\n\n        <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n            <template>\n                <kendo-datasource ref=\"leaveDS\" :data=\"leaves\" />\n                <kendo-grid\n                    id=\"gridLeave\"\n                    class=\"grid-function\"\n                    :data-source-ref=\"'leaveDS'\"\n                    :editable=\"false\"\n                    :scrollable-virtual=\"true\"\n                    :column-menu=\"false\">\n                    <kendo-grid-column\n                        :field=\"'leaveName'\"\n                        :title=\"$t('name')\"\n                        :template=\"'<span>#=leaveName#</span>'\"\n                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                    <kendo-grid-column\n                        :field=\"'approveAmount'\"\n                        :title=\"$t('approved_amount')\"\n                        :template=\"'<span>#= approveAmount || 0#</span>'\"\n                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                </kendo-grid>\n            </template>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\n    const payrollHandler = require(\"../../../scripts/payrollHandler\")\n    export default {\n        components: {},\n        data: () => ({\n            dialogm1: '',\n            dialogm2: false,\n            valid: true,\n            leaves: [],\n            selectLeave: {},\n            approveAmount: '',\n            option: 1,\n            leaveList:[\n                {id: 'unpaid_leave',    name: 'Unpaid Leave'},\n                {id: 'annual_leave',    name: 'Annual Leave'},\n                {id: 'conpensat_leave', name: 'Conpensat Leave'},\n                {id: 'sick_leave',      name: 'Sick Leave'},\n                {id: 'maternity_leave', name: 'Maternity Leave'},\n                {id: 'paternity_leave', name: 'Paternity Leave'},\n                {id: 'study_leave',     name: 'Study Leave'},\n            ]\n        }),\n        props: {},\n        computed: {},\n        watch: {\n            dialogm2(val) {\n                val || this.close()\n            },\n        },\n        created() {\n        },\n        methods: {\n            async onEditClick(value) {\n                this.id             = value.id\n                this.selectLeave    = value.leave\n                this.approveAmount  = value.approveAmount\n                this.dialogm2       = true\n            },\n            onNewClick() {\n                this.option = 1\n                this.clear()\n            },\n            async onSaveClose() {\n                if (!this.$refs.form.validate()) {\n                    this.$refs.form.validate()\n                    return\n                }\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        let data = {\n                            id: this.id ? this.id : '',\n                            leave: this.selectLeave,\n                            approveAmount: this.approveAmount,\n                            leaveName:   this.selectLeave.name\n                        }\n                        window.console.log(1,data)\n                        payrollHandler.createLeave(data).then(response => {\n                            if (response.data.statusCode === 201) {\n                                const res = response.data\n                                const index = this.leaves.findIndex(item => {\n                                    return (res.data.id === item.id)\n                                })\n                                if (this.leaves.length === 0) {\n                                    this.loadLeave()\n                                } else {\n                                    if (index < 0) {\n                                        this.leaves.push(res.data)\n                                    } else {\n                                        this.leaves.splice(index, 1, res.data)\n                                    }\n                                }\n                                this.$snotify.success('Success')\n                                this.clear()\n                                this.close()\n                            }\n                        }).catch(e => {\n                            this.$snotify.error('Something went wrong')\n                            this.errors.push(e)\n                        })\n                    }, 300);\n                })\n            },\n            async loadLeave(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        payrollHandler.getLeave().then(res => {\n                            if(res.statusCode === 200){\n                                this.leaves = res.data\n                            }\n                        })\n                    }, 300);\n                })\n            },\n            close() {\n                this.dialogm2 = false\n            },\n            clear() {  \n                this.departmentSelected   = ''\n                this.nssf = {}\n            },\n        },\n        mounted: async function () {\n            this.loadLeave()\n        }\n    };\n</script>\n<style scoped>\n    .acc_group header {\n        height: 10px !important;\n    }\n\n    table.acc_group tr td {\n        border-bottom: 1px solid #ccc;\n        padding: 8px;\n        vertical-align: middle;\n    }\n\n    table.acc_group tr td:first-child {\n        font-weight: 700;\n    }\n\n    table.acc_group tr td:last-child {\n        text-align: center;\n    }\n\n    .v-card__actions .v-btn.v-btn {\n        padding: 0 16px;\n    }\n\n    .exchange-table.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\n        font-family: 'Niradei-Bold', serif;\n        color: #000 !important;\n        border-top: 1px solid #000 !important;\n        border-bottom: 1px solid #000 !important;\n        font-size: 15px !important;\n    }\n\n    .exchange-table.theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > td {\n        color: #000 !important;\n        padding: 5px !important;\n    }\n\n    .exchange-table.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:last-child td {\n        border-bottom: 1px solid #000 !important;\n    }\n\n    .function_footer {\n        padding: 15px;\n        display: inline-block;\n    }\n\n    @media (max-width: 576px) {\n\n    }\n</style>"]}]}
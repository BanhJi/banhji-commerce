{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/BankReconciliationBankFeeds.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/BankReconciliationBankFeeds.vue","mtime":1638499443117},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQga2VuZG8gZnJvbSAiQHByb2dyZXNzL2tlbmRvLXVpIgogICAgaW1wb3J0IERhdGVQaWNrZXJDb21wb25lbnQgZnJvbSAiQC9jb21wb25lbnRzL2N1c3RvbV90ZW1wbGF0ZXMvRGF0ZVBpY2tlckNvbXBvbmVudCIKICAgIGltcG9ydCBoZWxwZXIgZnJvbSAiQC9oZWxwZXIuanMiCiAgICBpbXBvcnQgeyBSZWNvbmNpbGVNb2RlbCwgSm91cm5hbE1vZGVsLCBKb3VybmFsRW50cnlNb2RlbCB9IGZyb20gIkAvc2NyaXB0cy9tb2RlbC9BcHBNb2RlbHMiCiAgICBpbXBvcnQgewogICAgICAgIGFjY291bnRIYW5kbGVyLAogICAgICAgIGpvdXJuYWxIYW5kbGVyLAogICAgICAgIGJhbmtIYW5kbGVyLAogICAgICAgIGJhbmtBY2NvdW50SGFuZGxlciwKICAgICAgICByZWNvbmNpbGVIYW5kbGVyLAogICAgfSBmcm9tICJAL3NjcmlwdHMvQXBwSGFuZGxlcnMiCgogICAgLyogU3RvcmUgKi8KICAgIGltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIgogICAgY29uc3QgaW5zdGl0dXRlID0gc3RvcmUuc3RhdGUuaW5zdGl0dXRlLmluc3RpdHV0ZQoKICAgIGNvbnN0IGluc3RpdHV0ZUlkID0gaW5zdGl0dXRlLmlkCiAgICBjb25zdCBDcnlwdG9KUyA9IHJlcXVpcmUoImNyeXB0by1qcyIpCgogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIG5hbWU6ICJCYW5rUmVjb25jaWxsaWF0aW9uQmFua0ZlZWRzIiwKICAgICAgICBjb21wb25lbnRzOiB7CiAgICAgICAgICAgICJhcHAtZGF0ZXBpY2tlciI6IERhdGVQaWNrZXJDb21wb25lbnQsCiAgICAgICAgfSwKICAgICAgICBkYXRhOiAoKSA9PiAoewogICAgICAgICAgICByZWNvbmNpbGUgICAgICAgOiBbXSwKICAgICAgICAgICAgam91cm5hbCAgICAgICAgIDogW10sCiAgICAgICAgICAgIGpvdXJuYWxfZW50cmllcyA6IFtdLAogICAgICAgICAgICAvLyBMb2FkaW5nTWUKICAgICAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBsb2FkaW5nQWxlcnQ6IGZhbHNlLAogICAgICAgICAgICBsb2FkaW5nQ29sb3JBbGVydDogIiIsCiAgICAgICAgICAgIGxvYWRpbmdUZXh0QWxlcnQ6ICIiLAogICAgICAgICAgICAvLyBGb3JtIHZhbGlkYXRpb24KICAgICAgICAgICAgdmFsaWQ6IHRydWUsCiAgICAgICAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgICAgICAgIHNhdmVNb2RlOiAiIiwKICAgICAgICAgICAgYWxlcnQ6IGZhbHNlLAogICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICIiLAogICAgICAgICAgICByZXBvcnRpbmdFbmRpbmdCYWxhbmNlICA6IDAsCiAgICAgICAgICAgIGJhbmsgICAgICAgICAgICAgICAgOiBudWxsLAogICAgICAgICAgICBiYW5rcyAgICAgICAgICAgICAgIDogW10sCiAgICAgICAgICAgIGJhbmtBY2NvdW50ICAgICAgICAgOiBudWxsLAogICAgICAgICAgICBiYW5rQWNjb3VudHMgICAgICAgIDogW10sCiAgICAgICAgICAgIGJhbmtBY2NvdW50TGlzdCAgICAgOiBbXSwKICAgICAgICAgICAgYWRqdXN0bWVudEFjY291bnQgICA6IG51bGwsCiAgICAgICAgICAgIGFkanVzdG1lbnRBY2NvdW50cyAgOiBbXSwKICAgICAgICAgICAgdGVtcGxhdGVzICAgICAgICAgICA6IFtdLAogICAgICAgICAgICBzZWFyY2hCYW5rVHhuVmFsdWUgIDogJycsCiAgICAgICAgICAgIHNlYXJjaEJhbmhqaVR4blZhbHVlOiAnJywKICAgICAgICAgICAgYmFua1J1bGVzICAgICAgICAgICA6IFtdLAogICAgICAgICAgICBiYW5rVHJhbnNhY3Rpb25zICAgIDogW10sCiAgICAgICAgICAgIGJhbmhqaVRyYW5zYWN0aW9ucyAgOiBbXSwKICAgICAgICB9KSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIC8vIFNldCBkZWZhdWx0IGRhdGEKICAgICAgICAgICAgc2V0RGVmYXVsdERhdGEoKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlY29uY2lsZSA9IG5ldyBSZWNvbmNpbGVNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRfZGF0ZSAgOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSwKICAgICAgICAgICAgICAgICAgICBlbmRfZGF0ZSAgICA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApLCAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLnJlY29uY2lsZS5hYmJyID0gJ0JGJwoKICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIE51bWJlcgogICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU51bWJlcigpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBMb2FkIGpvdXJuYWwgYWNjb3JkaW5nIHRvIHF1ZXJ5IHN0cmluZyB7aWR9CiAgICAgICAgICAgIGxvYWRPYmooKSB7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICAgICAgLy8gQWNjZXNzIFF1ZXJ5IFN0cmluZwogICAgICAgICAgICAgICAgbGV0IHEgPSB0aGlzLiRyb3V0ZS5wYXJhbXM7CiAgICAgICAgICAgICAgICBpZiAocS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IEVkaXQgTW9kZQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgam91cm5hbEhhbmRsZXIKICAgICAgICAgICAgICAgICAgICAgICAgLmdldE9uZShxLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCaW5kIE9iagogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqID0gbmV3IEpvdXJuYWxNb2RlbChyZXMpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE51bWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBudW1iZXJTcGxpdGVkID0gai5udW1iZXIuc3BsaXQoIi0iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1iZXJTcGxpdGVkLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgai5hYmJyID0gbnVtYmVyU3BsaXRlZFswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLm51bWJlciA9IG51bWJlclNwbGl0ZWRbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgU2V0dGxlbWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuam91cm5hbCA9IGoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyogS2VuZG8gKi8KICAgICAgICAgICAgLy8gUm93IE51bWJlciBUZW1wbGF0ZQogICAgICAgICAgICByb3dOdW1iZXJUbXBsKGRhdGFJdGVtKSB7CiAgICAgICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2Uua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGRzLmluZGV4T2YoZGF0YUl0ZW0pCgogICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgMQogICAgICAgICAgICB9LAogICAgICAgICAgICBiYW5rVHJhbnNhY3Rpb25UbXBsKGRhdGFJdGVtKSB7CiAgICAgICAgICAgICAgICBsZXQgdG1wbCA9IGA8dGFibGU+PHRyPjx0ZD4keyBkYXRhSXRlbS50cmFuc2FjdGlvbl9kYXRlIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeyBkYXRhSXRlbS5jb2RlIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeyBkYXRhSXRlbS5uYW1lIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+PC90cj48L3RhYmxlPmAKCiAgICAgICAgICAgICAgICByZXR1cm4gdG1wbAogICAgICAgICAgICB9LAogICAgICAgICAgICBiYW5oSmlUcmFuc2FjdGlvblRtcGwoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgICAgIGxldCB0bXBsID0gYDx0YWJsZT48dHI+PHRkPiR7IGRhdGFJdGVtLnRyYW5zYWN0aW9uX2RhdGUgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7IGRhdGFJdGVtLmNvZGUgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7IGRhdGFJdGVtLm5hbWUgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD48L3RyPjwvdGFibGU+YAoKICAgICAgICAgICAgICAgIHJldHVybiB0bXBsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJhbmtMaXN0Qm94VG1wbCAoZSkgewogICAgICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0ga2VuZG8udGVtcGxhdGUoYCM9c2sjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICM9dHJhbnNhY3Rpb25UeXBlIwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjPWFtb3VudCMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIz1jdXJyZW5jeSMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKQogICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGUpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJhbmhqaUxpc3RCb3hUbXBsIChlKSB7CiAgICAgICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBrZW5kby50ZW1wbGF0ZShgIz1qb3VybmFsX2RhdGUjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICM9am91cm5hbF9udW1iZXIjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICM9am91cm5hbF90eXBlIwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjPWFtb3VudCMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKQogICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGUpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFNlYXJjaAogICAgICAgICAgICBzZWFyY2hCYW5rVHhuICgpIHsKICAgICAgICAgICAgICAgIGxldCBsaXN0Qm94ID0gdGhpcy4kcmVmcy5iYW5rVHhuTGlzdEJveC5rZW5kb1dpZGdldCgpCgogICAgICAgICAgICAgICAgbGlzdEJveC5kYXRhU291cmNlLmZpbHRlcih7IGZpZWxkOiAidHJhbnNhY3Rpb25UeXBlIiwgb3BlcmF0b3I6ICJjb250YWlucyIsIHZhbHVlOiB0aGlzLnNlYXJjaEJhbmtUeG5WYWx1ZSB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZWFyY2hCYW5oamlUeG4gKCkgewogICAgICAgICAgICAgICAgbGV0IGxpc3RCb3ggPSB0aGlzLiRyZWZzLmJhbmhqaVR4bkxpc3RCb3gua2VuZG9XaWRnZXQoKQoKICAgICAgICAgICAgICAgIGxpc3RCb3guZGF0YVNvdXJjZS5maWx0ZXIoeyBmaWVsZDogImpvdXJuYWxfdHlwZSIsIG9wZXJhdG9yOiAiY29udGFpbnMiLCB2YWx1ZTogdGhpcy5zZWFyY2hCYW5oamlUeG5WYWx1ZSB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBNYXRjaGluZwogICAgICAgICAgICBtYXRjaGluZyAoKSB7CiAgICAgICAgICAgICAgICBsZXQgcnVsZSA9IHRoaXMuYmFua1J1bGVzLAogICAgICAgICAgICAgICAgICAgIGJhbmtUeG5zID0gdGhpcy5iYW5rVHJhbnNhY3Rpb25zCiAgICAgICAgICAgICAgICAgICAgLy8gYmFuaGppVHhucyA9IHRoaXMuYmFua1RyYW5zYWN0aW9ucwoKICAgICAgICAgICAgICAgIGxldCBkYXRhU291cmNlID0gbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7CiAgICAgICAgICAgICAgICAgICAgZGF0YTogYmFua1R4bnMsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlYXZlIGRhdGEgaXRlbXMgd2hpY2ggYXJlICJGb29kIiBvciAiVGVhIgogICAgICAgICAgICAgICAgICAgICAgICBsb2dpYzogcnVsZS5jb25kaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZmllbGQ6ICJjYXRlZ29yeSIsIG9wZXJhdG9yOiAiZXEiLCB2YWx1ZTogIkZvb2QiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGZpZWxkOiAibmFtZSIsIG9wZXJhdG9yOiAiZXEiLCB2YWx1ZTogIlRlYSIgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UuZmV0Y2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBsZXQgdmlldyA9IGRhdGFTb3VyY2UudmlldygpCiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHZpZXcubGVuZ3RoKTsgLy8gZGlzcGxheXMgIjIiCiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHZpZXdbMF0uYW1vdW50KTsgLy8gZGlzcGxheXMgIlRlYSIKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2codmlld1sxXS5hbW91bnQpOyAvLyBkaXNwbGF5cyAiSGFtIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIE9uIEJhbmsgQ2hhbmdlCiAgICAgICAgICAgIG9uQmFua0NoYW5nZXMgKCkgewogICAgICAgICAgICAgICAgbGV0IGJhbmtJZCA9IHRoaXMuYmFuawoKICAgICAgICAgICAgICAgIHRoaXMuYmFua0FjY291bnRzID0gW10KICAgICAgICAgICAgICAgIGlmKGJhbmtJZCAhPT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5rQWNjb3VudHMgPSB0aGlzLmJhbmtBY2NvdW50TGlzdC5maWx0ZXIodmFsdWUgPT4gdmFsdWUuYmFuay51dWlkID09PSBiYW5rSWQpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIE51bWJlcgogICAgICAgICAgICBnZW5lcmF0ZU51bWJlciAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlY29uY2lsZS5udW1iZXIgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBHZXQgRGF0YQogICAgICAgICAgICBnZXREYXRhICgpIHsKICAgICAgICAgICAgICAgIGxldCBiYSA9IHRoaXMuYmFua0FjY291bnQsCiAgICAgICAgICAgICAgICAgICAgcmMgPSB0aGlzLnJlY29uY2lsZSwKICAgICAgICAgICAgICAgICAgICBzZGF0ZSA9IHJjLnN0YXJ0X2RhdGUsCiAgICAgICAgICAgICAgICAgICAgZWRhdGUgPSByYy5lbmRfZGF0ZQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHNkYXRlICYmIGVkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgc2RhdGUgPSBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShzZGF0ZSksICd5eXl5LU1NLWRkJykgKyAnVDAwOjAwOjAwLjAwMFonCgogICAgICAgICAgICAgICAgICAgIGVkYXRlID0gbmV3IERhdGUoZWRhdGUpCiAgICAgICAgICAgICAgICAgICAgZWRhdGUgPSBrZW5kby50b1N0cmluZyhlZGF0ZSwgJ3l5eXktTU0tZGQnKSArICdUMjM6NTk6NTkuOTk5WicKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2RhdGUgPSAwCiAgICAgICAgICAgICAgICAgICAgZWRhdGUgPSAwCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVjb25jaWxlSGFuZGxlci5nZXRCYW5rRmVlZChiYS5hY2NvdW50LnV1aWQsIHsKICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfZGF0ZSAJOiBzZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGUgCTogZWRhdGUsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5rVHJhbnNhY3Rpb25zID0gcmVzLmJhbmtUeG5zCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5rUnVsZXMgPSByZXMuYmFua1J1bGVzCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYW5oamlUcmFuc2FjdGlvbnMgPSByZXMuYmFuaGppVHhucy5lbnRyaWVzX2RldGFpbAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gQWRkIEpvdXJuYWwKICAgICAgICAgICAgYWRkSm91cm5hbCgpIHsKICAgICAgICAgICAgICAgIGxldCBqID0gdGhpcy5qb3VybmFsLAogICAgICAgICAgICAgICAgICAgIGplID0gW10KCiAgICAgICAgICAgICAgICAvLyBTZXR0bGVtZW50IG9uIERyCiAgICAgICAgICAgICAgICBqZS5wdXNoKAogICAgICAgICAgICAgICAgICAgIG5ldyBKb3VybmFsRW50cnlNb2RlbCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgICAgICAgICAgICAgOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeV9jb250YWN0ICAgICA6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRhcnlfY29udGFjdCAgIDoge30sCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uICAgICAgICAgOiBqLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICByZWZfbnVtYmVyICAgICAgICAgIDogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudCAgICAgICAgICAgICAgOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeSAgICAgICAgICAgIDoge30sCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlX3JhdGUgICAgICAgOiAxLAogICAgICAgICAgICAgICAgICAgICAgICBleGNoYW5nZWRfYW1vdW50ICAgIDogMCwKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIGouam91cm5hbF9lbnRyaWVzID0gamUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gU2hyaW5rIERhdGEKICAgICAgICAgICAgc2hyaW5rRGF0YSgpIHsKICAgICAgICAgICAgICAgIGxldCBqID0gdGhpcy5qb3VybmFsOwoKICAgICAgICAgICAgICAgIC8vIE51bWJlciBjb21iaW5lIGFiYnIgKyBudW1iZXIKICAgICAgICAgICAgICAgIGoubnVtYmVyID0gai5hYmJyICsgIi0iICsgai5udW1iZXI7CgogICAgICAgICAgICAgICAgLy8gSm91cm5hbCBEYXRlCiAgICAgICAgICAgICAgICBqLmpvdXJuYWxfZGF0ZSA9IGhlbHBlci50b0lTT0RhdGUoai5qb3VybmFsX2RhdGUpOwoKICAgICAgICAgICAgICAgIC8vIEZpbHRlciBjYXNoX2FkdmFuY2VfdXVpZAogICAgICAgICAgICAgICAgai5jYXNoX2FkdmFuY2UgPSBqLmNhc2hfYWR2YW5jZS51dWlkOwoKICAgICAgICAgICAgICAgIC8vIFVzZXIKICAgICAgICAgICAgICAgIGxldCB1c2VyID0gewogICAgICAgICAgICAgICAgICAgIHV1aWQ6IGluc3RpdHV0ZS5jcmVhdG9yLAogICAgICAgICAgICAgICAgICAgIHVzZXJfbmFtZTogaW5zdGl0dXRlLmxlZ2FsTmFtZSwgLy9jaGFuZ2UgbGF0ZXIgKGZ1bGxuYW1lKQogICAgICAgICAgICAgICAgICAgIGNvZ25pdG9JZDogaW5zdGl0dXRlLnNrLAogICAgICAgICAgICAgICAgICAgIGVtYWlsOiBpbnN0aXR1dGUuZW1haWwsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgai5tb2RpZmllZF9ieSA9IHVzZXI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGouY3JlYXRlZF9ieSA9IHVzZXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFZhbGlkYXRpbmcKICAgICAgICAgICAgdmFsaWRhdGVGb3JtKCkgewogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbXNnID0gIiI7CgogICAgICAgICAgICAgICAgLy8gQ2FzaCBBY2NvdW50CiAgICAgICAgICAgICAgICBpZiAoa2VuZG8ucGFyc2VGbG9hdCh0aGlzLnJlY2VpdmVkX2Ftb3VudCkgPiAwIHx8IHRoaXMucmVtYWluaW5nIDwgMCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhc2hBY2NvdW50ID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyArPSAiPHA+UGxlYXNlIHNlbGVjdCBjYXNoIGFjY291bnQ8L3A+IjsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFNob3cgQWxlcnQKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gbXNnOwogICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBWYWxpZGF0ZSBDbG9zaW5nIERhdGUKICAgICAgICAgICAgdmFsaWRhdGVDbG9zaW5nRGF0ZSgpIHsKICAgICAgICAgICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBsZXQgb2JqRGF0ZSA9IG5ldyBEYXRlKHRoaXMuam91cm5hbC5qb3VybmFsX2RhdGUpCiAgICAgICAgICAgICAgICAgICAgLnRvSVNPU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAuc3Vic3RyKDAsIDEwKTsKCiAgICAgICAgICAgICAgICAvLyBBcHByb3ZlZCBSZXBvcnRpbmcgRGF0ZQogICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKG9iakRhdGUpIDwgbmV3IERhdGUoaW5zdGl0dXRlLmZpc2hTY2FsZURhdGUpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZGF5IDw9IG5ldyBEYXRlKGluc3RpdHV0ZS5hZnRlckNsb3NpbmdEYXRlUGVyaW9kKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29ycnksIHlvdSBjYW4gbm90IHNhdmUgdGhpcyB0cmFuc2FjdGlvbi4gUGxlYXNlIGNvbnRhY3QgeW91ciBBZG1pbi4iCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBDbG9zaW5nIERhdGUKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKG9iakRhdGUpIDw9IG5ldyBEYXRlKGluc3RpdHV0ZS5jbG9zaW5nRGF0ZSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGl0dXRlLmNsb3NpbmdTdGF0dXMgPT09IDEKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlBsZWFzZSBFbnRlciBQYXNzd29yZCEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6ICJwYXNzd29yZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFBsYWNlaG9sZGVyOiAiUGFzc3dvcmQuLi4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRBdHRyaWJ1dGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2NhcGl0YWxpemU6ICJvZmYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9jb3JyZWN0OiAib2ZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJTdWJtaXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRlck9uQ29uZmlybTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZUNvbmZpcm06IChwYXNzd29yZCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY3J5cHQgKFBhc3N3b3JkLCBLZXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBzd0luQnl0ZXMgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGl0dXRlLmNsb3NpbmdEYXRlUGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RpdHV0ZUlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JpZ2luYWxQc3cgPSBwc3dJbkJ5dGVzLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSBQYXNzd29yZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXNzd29yZCA9PT0gb3JpZ2luYWxQc3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3dhbC5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoIlBhc3N3b3JkIERvZXMgTm90IE1hY3RoISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogKCkgPT4gIXRoaXMuJHN3YWwuaXNMb2FkaW5nKCksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gQWxsIFNhdmVzCiAgICAgICAgICAgIG9uU2F2ZU9wdGlvbkNsaWNrKG1vZGUpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSAmJiB0aGlzLnZhbGlkYXRlRm9ybSgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlTW9kZSA9IG1vZGU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUNsb3NpbmdEYXRlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRFcnJvcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBjYW5jZWwoKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgICAgICAgICAgIHRleHQ6ICJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyEiLAogICAgICAgICAgICAgICAgICAgIGljb246ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiM0ZDQ4NDgiLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI0VEMUEzQSIsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRpc2NhcmQgaXQhIiwKICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGVhcigpIHsKICAgICAgICAgICAgICAgIC8vIFJlc2V0IEZvcm0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwoKICAgICAgICAgICAgICAgIHRoaXMuZW1wbG95ZWUgPSBudWxsOwoKICAgICAgICAgICAgICAgIC8vIERhdGFzb3VyZQogICAgICAgICAgICAgICAgbGV0IGRzID0gdGhpcy4kcmVmcy5kYXRhU291cmNlLmtlbmRvV2lkZ2V0KCk7CiAgICAgICAgICAgICAgICBkcy5kYXRhKFtdKTsKCiAgICAgICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCBkYXRhCiAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHREYXRhKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNhdmUoKSB7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgaiA9IHRoaXMuam91cm5hbDsKCiAgICAgICAgICAgICAgICAvLyBBZGQgSm91cm5hbAogICAgICAgICAgICAgICAgdGhpcy5hZGRKb3VybmFsKCk7CgogICAgICAgICAgICAgICAgLy8gRHJhZnQgTW9kZQogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2F2ZU1vZGUgPT09ICJzYXZlRHJhZnQiKSB7CiAgICAgICAgICAgICAgICAgICAgai5pc19kcmFmdCA9IDE7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGouaXNfZHJhZnQgPSAwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFNocmluayBEYXRhCiAgICAgICAgICAgICAgICB0aGlzLnNocmlua0RhdGEoKTsKCiAgICAgICAgICAgICAgICAvLyBTeW5jIERhdGEKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgam91cm5hbEhhbmRsZXIKICAgICAgICAgICAgICAgICAgICAuc2F2ZSh0aGlzLmpvdXJuYWwpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXNwb25zZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGVydEVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGVydEVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gUmVzcG9uc2UgU3RhdHVzCiAgICAgICAgICAgIHJlc3BvbnNlU3RhdHVzKHN0YXR1cykgewogICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMDogLy8gT2sKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRvIGRlZmF1bHQgZGF0YQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMTogLy8gRHVwbGljYXRlCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRFcnJvcigiRHVwbGljYXRlIGVudHJ5ISIpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gU3dlZXRhbGVydDIKICAgICAgICAgICAgY2hhbmdlQWxlcnRTdGF0dXMoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdBbGVydCA9IHRydWU7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdBbGVydCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSwgNjIwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNob3dBbGVydCgpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQWxlcnRTdGF0dXMoKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ1RleHRBbGVydCA9ICJBZGRlZCBTdWNjZXNzZnVsIjsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0NvbG9yQWxlcnQgPSAiIzNEQTcyRSI7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2F2ZU1vZGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJzYXZlQ2xvc2UiOiAvLyBTYXZlIENsb3NlCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgICAgICAgICAgICAvLyAJcG9zaXRpb246ICdwcm9kdWN0cycsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIAlpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIAl0aXRsZTogJ1lvdXIgd29yayBoYXMgYmVlbiBzYXZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIAlzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIAlpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIAkJd2luZG93Lmhpc3RvcnkuZ28oLTEpCgogICAgICAgICAgICAgICAgICAgICAgICAvLyAJCXJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAvLyAJfQogICAgICAgICAgICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIE5ldwogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gCXBvc2l0aW9uOiAncHJvZHVjdHMnLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAJaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAJdGl0bGU6ICdZb3VyIHdvcmsgaGFzIGJlZW4gc2F2ZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAJc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAJdGltZXI6IDE1MDAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnNhdmVNb2RlID0gIiI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFsZXJ0RXJyb3IobXNnKSB7CiAgICAgICAgICAgICAgICBpZiAobXNnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJPb3BzLi4uISIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG1zZywKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdUZXh0QWxlcnQgPSAiRmFpbGVkISI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQ29sb3JBbGVydCA9ICIjZWI4MzM0IjsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUFsZXJ0U3RhdHVzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB3YXRjaDogewogICAgICAgICAgICAvLyBjYWxsIGFnYWluIHRoZSBtZXRob2QgaWYgdGhlIHJvdXRlIGNoYW5nZXMKICAgICAgICAgICAgJHJvdXRlOiAibG9hZE9iaiIsCiAgICAgICAgfSwKICAgICAgICBjcmVhdGVkKCkgewogICAgICAgICAgICAvLyBmZXRjaCB0aGUgZGF0YSB3aGVuIHRoZSB2aWV3IGlzIGNyZWF0ZWQgYW5kIHRoZSBkYXRhIGlzCiAgICAgICAgICAgIC8vIGFscmVhZHkgYmVpbmcgb2JzZXJ2ZWQKICAgICAgICAgICAgdGhpcy5sb2FkT2JqKCkKICAgICAgICB9LAogICAgICAgIG1vdW50ZWQoKSB7CiAgICAgICAgICAgIC8vIFNldCBkZWZhdWx0IGRhdGEKICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0RGF0YSgpCgogICAgICAgICAgICAvLyBDYWxsIEJhbmsgTGlzdAogICAgICAgICAgICBiYW5rSGFuZGxlci5nZXRBbGwoKQoJCQkudGhlbihyZXMgPT4gewoJCQkJaWYocmVzKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbmtzID0gcmVzLmRhdGEKCQkJCX0KICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIC8vIENhbGwgQmFuayBBY2NvdW50IExpc3QKICAgICAgICAgICAgYmFua0FjY291bnRIYW5kbGVyLmdldEFsbCgpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXMpewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFua0FjY291bnRMaXN0ID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIC8vIENhbGwgQWNjb3VudCBMaXN0CiAgICAgICAgICAgIGFjY291bnRIYW5kbGVyLmdldEFsbCgpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RtZW50QWNjb3VudHMgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICB9Owo="},{"version":3,"sources":["BankReconciliationBankFeeds.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BankReconciliationBankFeeds.vue","sourceRoot":"src/views/banking","sourcesContent":["<template>\n    <v-app>\n        <v-container>\n            <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                    <v-card outlined dense class=\"pa-4 no_border rounded-sm\" color=\"white\">\n                        <v-card outlined dense class=\"no_border\">\n                            <h2 class=\"mb-0\">{{ $t(\"bank_reconciliation_bank_feeds\") }}</h2>\n                            <v-icon\n                                    onclick=\"window.history.go(-1); return false;\"\n                                    style=\"cursor: pointer; color: #333; font-size: 40px;\"\n                                    class=\"float-right\"\n                            >close\n                            </v-icon>\n                        </v-card>\n\n                        <v-row>\n                            <v-col sm=\"4\" cols=\"12\" class=\"pb-0\">\n                                <v-card outlined dense class=\"px-4 py-3 no_border mb-3\" height=\"365\" color=\"grayBg\">\n                                    <label class=\"label\">{{$t('financial_institution')}}</label>\n                                    <v-select class=\" mb-3\"\n                                        @change=\"onBankChanges\"\n                                        v-model=\"bank\"\n                                        :items=\"banks\"\n                                        item-value=\"uuid\"\n                                        item-text=\"name\"\n                                        placeholder=\"Select Financial Institution\"\n                                        outlined />\n\n                                    <label class=\"label\">{{$t('bank_account')}}</label>\n                                    <v-select class=\" mb-3\"\n                                        :disabled=\"bank === null\"\n                                        :items=\"bankAccounts\"\n                                        item-value=\"uuid\"\n                                        item-text=\"number\"\n                                        v-model=\"bankAccount\"\n                                        placeholder=\"Select Bank Account\"\n                                        return-object\n                                        outlined\n                                        required >\n                                        <template slot='selection' slot-scope='{ item }'>\n                                            {{ item.number }} ({{ item.currency.code }})\n                                        </template>\n                                        <template slot='item' slot-scope='{ item }'>\n                                            {{ item.number }} ({{ item.currency.code }})\n                                        </template>\n                                    </v-select>\n\n                                    <label class=\"label\">{{ $t(\"reconcile_date\") }}</label>\n                                    <v-row>\n                                        <v-col sm=\"3\" cols=\"12\" class=\"pb-0\">\n                                            <h3 class=\"mt-2\">{{ $t(\"from\") }}</h3>\n                                        </v-col>\n                                        <v-col sm=\"9\" cols=\"12\" class=\"py-0\">\n                                            <app-datepicker\n                                                :initialDate=\"reconcile.start_date\"\n                                                @emitDate=\"reconcile.start_date = $event\"\n                                            />\n                                        </v-col>\n                                    </v-row>\n                                    <v-row class=\"\">\n                                        <v-col sm=\"3\" cols=\"12\" class=\"py-0 pt-n3\">\n                                            <h3 class=\"mt-5\">{{ $t(\"to\") }}</h3>\n                                        </v-col>\n                                        <v-col sm=\"9\" cols=\"12\" class=\"py-0 pt-n3\">\n                                            <app-datepicker\n                                                :initialDate=\"reconcile.end_date\"\n                                                @emitDate=\"reconcile.end_date = $event\"\n                                            />\n                                        </v-col>\n                                    </v-row>\n                                    <v-col sm=\"12\" cols=\"12\" class=\"text-center py-0\">\n                                        <v-btn \n                                            :disabled=\"bankAccount === null\"\n                                            outlined width=\"150\" \n                                            class=\"primary white--text text-capitalize \" \n                                            @click=\"getData\">{{$t('get_data')}}\n                                        </v-btn>\n                                    </v-col>\n                                </v-card>\n                            </v-col>\n                            <v-col sm=\"8\" cols=\"12\" class=\"pb-0\">\n                                <v-card outlined dense class=\"px-4 no_border pb-4\" height=\"365\" color=\"grayBg\">\n                                    <v-row>\n                                        <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                            <label class=\"label\">{{ $t(\"reconcile_date\") }}</label>\n                                            <app-datepicker\n                                                    :initialDate=\"reconcile.ending_balance_date\"\n                                                    @emitDate=\"reconcile.ending_balance_date = $event\"\n                                            />\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"12\" class=\"pb-0\">\n                                            <label class=\"label\">{{ $t(\"number\") }}</label>\n                                            <v-row>\n                                                <v-col sm=\"2\" cols=\"3\" class=\"pl-0 pr-0\">\n                                                    <div class=\"code_text\" v-text=\"reconcile.abbr\"></div>\n                                                </v-col>\n                                                <v-col sm=\"8\" cols=\"7\" class=\"pl-0\">\n                                                    <v-text-field class=\" custom-border\"\n                                                                  v-model=\"reconcile.number\"\n                                                                  outlined\n                                                                  :rules=\"[v => !!v || 'Number is required']\"\n                                                                  required/>\n                                                </v-col>\n                                                <v-col sm=\"2\" cols=\"2\" class=\"pl-0\">\n                                                    <v-icon color=\"black\" size=\"30\" class=\"border_qrcode\"\n                                                            @click=\"generateNumber\">mdi-qrcode\n                                                    </v-icon>\n                                                </v-col>\n                                            </v-row>\n                                        </v-col>\n                                    </v-row>\n                                    <v-row >\n                                        <v-col sm=\"6\" cols=\"12\" class=\"pt-0\">\n                                            <v-card outlined dense class=\"pa-4 no_border text-center primary--text\" color=\"white\">\n                                                <h3 style=\"font-size: 25px\"  class=\"mb-3\">{{ Number(reconcile.opening_balance).toLocaleString() }}</h3>\n                                                <p class=\"mb-0 text-uppercase\">{{$t('bank_ending_balance')}}</p>\n                                            </v-card>\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"12\" class=\"pt-0\">\n                                            <v-card outlined dense class=\"pa-4 text-center no_border white--text\" color=\"primary\">\n                                                <h3 style=\"font-size: 25px\" class=\"mb-3\">{{ Number(reportingEndingBalance).toLocaleString() }}</h3>\n                                                <p class=\"mb-0 text-uppercase\">{{$t('reported_ending_balance')}}</p>\n                                            </v-card>\n                                        </v-col>\n                                    </v-row>\n                                    <v-row>\n                                        <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                            <label class=\"label text-uppercase\">{{ $t(\"variant\") }}</label>\n                                            <v-text-field class=\"mt-1\"\n                                                v-model=\"reconcile.variance_amount\"\n                                                outlined\n                                                required />\n                                        </v-col>\n                                        <v-col sm=\"6\" cols=\"12\" class=\"py-0\">\n                                            <label class=\"label\">{{ $t(\"adjustment_account\") }}</label>\n                                            <v-select class=\" mb-3 mt-3\"\n                                                    :disabled=\"reconcile.variance_amount === 0\"\n                                                    v-model=\"adjustmentAccount\"\n                                                    :items=\"adjustmentAccounts\"\n                                                    item-value=\"number\"\n                                                    item-text=\"name\"                                                    \n                                                    no-data-text=\"No data found.\"\n                                                    placeholder=\"Select Adjustment Account\"\n                                                    return-object\n                                                    outlined\n                                                >\n                                                    <!-- <template slot='selection' slot-scope='{ item }'>\n                                                        {{ item.number }} - {{ item.name }}\n                                                    </template> -->\n                                                    <template slot='item' slot-scope='{ item }'>\n                                                        {{ item.number }} - {{ item.name }}\n                                                    </template>\n                                                </v-select>\n                                        </v-col>\n                                    </v-row>\n                                </v-card>\n                            </v-col>\n                        </v-row>\n\n                        <br>\n\n                        <v-row>\n                            <v-col sm=\"12\" cols=\"12\" class=\"\">\n                                <table>\n                                    <thead>\n                                        <tr>\n                                            <th>From Bank</th>\n                                            <th colspan=\"2\">Matched</th>\n                                            <th>From BanhJi</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr>\n                                            <td>\n                                                <v-text-field class=\" custom-border\"\n                                                    v-model=\"searchBankTxnValue\"\n                                                    @change=\"searchBankTxn\"\n                                                    placeholder='search...'\n                                                    outlined />\n                                                <kendo-listbox id=\"bankTxnListBox\"\n                                                    ref=\"bankTxnListBox\"\n                                                    :data-source=\"bankTransactions\"\n                                                    :data-text-field=\"'transactionType'\"\n                                                    :data-value-field=\"'uuid'\"\n                                                    :template=\"bankListBoxTmpl\"\n                                                    :connect-with=\"'bankReconciledListBox'\"\n                                                    :drop-sources=\"['bankReconciledListBox']\"\n                                                    :draggable=\"true\">\n                                                </kendo-listbox>\n                                            </td>\n                                            <td>\n                                                <kendo-listbox id=\"bankReconciledListBox\"\n                                                    ref=\"bankReconciledListBox\"\n                                                    :connect-with=\"'bankTxnListBox'\"\n                                                    :drop-sources=\"['bankTxnListBox']\"\n                                                    :data-text-field=\"'transactionType'\"\n                                                    :data-value-field=\"'uuid'\"\n                                                    :template=\"bankListBoxTmpl\"\n                                                    :draggable=\"true\"\n                                                    style=\"height:280px;\">\n                                                </kendo-listbox>\n                                            </td>\n                                            <td>\n                                                <kendo-listbox id=\"banhjiReconciledListBox\"\n                                                    ref=\"banhjiReconciledListBox\"\n                                                    :connect-with=\"'banhjiTxnListBox'\"\n                                                    :drop-sources=\"['banhjiTxnListBox']\"\n                                                    :data-text-field=\"'journal_type'\"\n                                                    :data-value-field=\"'entry_uuid'\"\n                                                    :template=\"banhjiListBoxTmpl\"\n                                                    :draggable=\"true\"\n                                                    style=\"height:280px;\">\n                                                </kendo-listbox>\n                                            </td>\n                                            <td>\n                                                <v-text-field class=\" custom-border\"\n                                                    v-model=\"searchBanhjiTxnValue\"\n                                                    @change=\"searchBanhjiTxn\"\n                                                    placeholder='search...'\n                                                    outlined />\n                                                <kendo-listbox id=\"banhjiTxnListBox\"\n                                                    ref=\"banhjiTxnListBox\"\n                                                    :data-source=\"banhjiTransactions\"\n                                                    :data-text-field=\"'journal_type'\"\n                                                    :data-value-field=\"'entry_uuid'\"\n                                                    :template=\"banhjiListBoxTmpl\"\n                                                    :connect-with=\"'banhjiReconciledListBox'\"\n                                                    :drop-sources=\"['banhjiReconciledListBox']\"\n                                                    :draggable=\"true\">\n                                                </kendo-listbox>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </v-col>\n                        </v-row>\n\n                        <v-divider/>\n\n                        <v-card outlined dense class=\"no_border function_footer\">\n                            <v-alert type=\"warning\"\n                                     v-model=\"alert\"\n                                     dismissible>\n                                <span v-html=\"errorMessage\"/>\n                            </v-alert>\n                            <v-menu>\n                                <template v-slot:activator=\"{ on }\">\n                                    <v-btn color=\"black\" outlined\n                                           class=\"mr-2 text-capitalize  black--text float-left\" v-on=\"on\">\n                                        {{$t('select_template')}}\n                                        <v-icon size=\"\" class=\"ma-1\">expand_more</v-icon>\n                                    </v-btn>\n                                </template>\n                                <v-list>\n                                    <v-list-item v-for=\"(item, index) in templates\" :key=\"index\">\n                                        <v-list-item-title>{{ item.title }}</v-list-item-title>\n                                    </v-list-item>\n                                </v-list>\n                            </v-menu>\n                            <v-btn color=\"black\" outlined class=\"text-capitalize  black--text float-left\"\n                                   @click=\"cancel\">{{$t('cancel')}}\n                            </v-btn>\n                            <v-btn color=\"primary\" class=\"ml-2 float-right text-capitalize  white--text\">\n                                {{$t('reconcile')}}\n                            </v-btn>\n                            <v-btn color=\"primary\" class=\" float-right text-capitalize  white--text\">\n                                {{$t('save_for_later')}}\n                            </v-btn>\n                        </v-card>\n                    </v-card>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\n    import kendo from \"@progress/kendo-ui\"\n    import DatePickerComponent from \"@/components/custom_templates/DatePickerComponent\"\n    import helper from \"@/helper.js\"\n    import { ReconcileModel, JournalModel, JournalEntryModel } from \"@/scripts/model/AppModels\"\n    import {\n        accountHandler,\n        journalHandler,\n        bankHandler,\n        bankAccountHandler,\n        reconcileHandler,\n    } from \"@/scripts/AppHandlers\"\n\n    /* Store */\n    import store from \"@/store\"\n    const institute = store.state.institute.institute\n\n    const instituteId = institute.id\n    const CryptoJS = require(\"crypto-js\")\n\n    export default {\n        name: \"BankReconcilliationBankFeeds\",\n        components: {\n            \"app-datepicker\": DatePickerComponent,\n        },\n        data: () => ({\n            reconcile       : [],\n            journal         : [],\n            journal_entries : [],\n            // LoadingMe\n            showLoading: false,\n            loadingAlert: false,\n            loadingColorAlert: \"\",\n            loadingTextAlert: \"\",\n            // Form validation\n            valid: true,\n            isEdit: false,\n            saveMode: \"\",\n            alert: false,\n            errorMessage: \"\",\n            reportingEndingBalance  : 0,\n            bank                : null,\n            banks               : [],\n            bankAccount         : null,\n            bankAccounts        : [],\n            bankAccountList     : [],\n            adjustmentAccount   : null,\n            adjustmentAccounts  : [],\n            templates           : [],\n            searchBankTxnValue  : '',\n            searchBanhjiTxnValue: '',\n            bankRules           : [],\n            bankTransactions    : [],\n            banhjiTransactions  : [],\n        }),\n        methods: {\n            // Set default data\n            setDefaultData() {\n                this.reconcile = new ReconcileModel({\n                    start_date  : new Date().toISOString().substr(0, 10),\n                    end_date    : new Date().toISOString().substr(0, 10), \n                })\n                this.reconcile.abbr = 'BF'\n\n                // Generate Number\n                this.generateNumber();\n            },\n            // Load journal according to query string {id}\n            loadObj() {\n                let self = this;\n\n                // Access Query String\n                let q = this.$route.params;\n                if (q.id !== undefined) {\n                    // Set Edit Mode\n                    this.isEdit = true;\n\n                    this.showLoading = true;\n                    journalHandler\n                        .getOne(q.id)\n                        .then((res) => {\n                            // Bind Obj\n                            if (res) {\n                                let j = new JournalModel(res)\n\n                                // Number\n                                let numberSplited = j.number.split(\"-\")\n                                if (numberSplited.length > 0) {\n                                    j.abbr = numberSplited[0]\n                                    j.number = numberSplited[1]\n                                }\n\n                                // Advance Settlement\n                                this.journal = j\n                            }\n                        })\n                        .finally(() => {\n                            self.showLoading = false;\n                        });\n                } else {\n                    this.isEdit = false;\n                }\n            },\n            /* Kendo */\n            // Row Number Template\n            rowNumberTmpl(dataItem) {\n                let ds = this.$refs.dataSource.kendoWidget(),\n                    index = ds.indexOf(dataItem)\n\n                return index + 1\n            },\n            bankTransactionTmpl(dataItem) {\n                let tmpl = `<table><tr><td>${ dataItem.transaction_date }\n                                            ${ dataItem.code }\n                                            ${ dataItem.name }\n                            </td></tr></table>`\n\n                return tmpl\n            },\n            banhJiTransactionTmpl(dataItem) {\n                let tmpl = `<table><tr><td>${ dataItem.transaction_date }\n                                            ${ dataItem.code }\n                                            ${ dataItem.name }\n                            </td></tr></table>`\n\n                return tmpl\n            },\n            bankListBoxTmpl (e) {\n                let template = kendo.template(`#=sk#\n                                                #=transactionType#\n                                                #=amount#\n                                                #=currency#\n                                            `)\n                return template(e)\n            },\n            banhjiListBoxTmpl (e) {\n                let template = kendo.template(`#=journal_date#\n                                                #=journal_number#\n                                                #=journal_type#\n                                                #=amount#\n                                            `)\n                return template(e)\n            },\n            // Search\n            searchBankTxn () {\n                let listBox = this.$refs.bankTxnListBox.kendoWidget()\n\n                listBox.dataSource.filter({ field: \"transactionType\", operator: \"contains\", value: this.searchBankTxnValue })\n            },\n            searchBanhjiTxn () {\n                let listBox = this.$refs.banhjiTxnListBox.kendoWidget()\n\n                listBox.dataSource.filter({ field: \"journal_type\", operator: \"contains\", value: this.searchBanhjiTxnValue })\n            },\n            // Matching\n            matching () {\n                let rule = this.bankRules,\n                    bankTxns = this.bankTransactions\n                    // banhjiTxns = this.bankTransactions\n\n                let dataSource = new kendo.data.DataSource({\n                    data: bankTxns,\n                    filter: {\n                        // leave data items which are \"Food\" or \"Tea\"\n                        logic: rule.condition,\n                        filters: [\n                            { field: \"category\", operator: \"eq\", value: \"Food\" },\n                            { field: \"name\", operator: \"eq\", value: \"Tea\" }\n                        ]\n                    }\n                })\n                dataSource.fetch(function(){\n                    let view = dataSource.view()\n                    window.console.log(view.length); // displays \"2\"\n                    window.console.log(view[0].amount); // displays \"Tea\"\n                    window.console.log(view[1].amount); // displays \"Ham\"\n                });\n            },\n            // On Bank Change\n            onBankChanges () {\n                let bankId = this.bank\n\n                this.bankAccounts = []\n                if(bankId !== null){\n                    this.bankAccounts = this.bankAccountList.filter(value => value.bank.uuid === bankId)\n                }\n            },\n            // Number\n            generateNumber () {\n                this.reconcile.number = new Date().getTime()\n            },\n            // Get Data\n            getData () {\n                let ba = this.bankAccount,\n                    rc = this.reconcile,\n                    sdate = rc.start_date,\n                    edate = rc.end_date\n                    \n                if (sdate && edate) {\n                    sdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z'\n\n                    edate = new Date(edate)\n                    edate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z'\n                } else {\n                    sdate = 0\n                    edate = 0\n                }\n\n                reconcileHandler.getBankFeed(ba.account.uuid, {\n                    params: {\n                        start_date \t: sdate,\n                        end_date \t: edate,\n                    }\n                })\n                .then(res => {\n                    this.bankTransactions = res.bankTxns\n                    this.bankRules = res.bankRules\n                    this.banhjiTransactions = res.banhjiTxns.entries_detail\n                })\n            },\n            // Add Journal\n            addJournal() {\n                let j = this.journal,\n                    je = []\n\n                // Settlement on Dr\n                je.push(\n                    new JournalEntryModel({\n                        account             : [],\n                        primary_contact     : {},\n                        secondary_contact   : {},\n                        description         : j.description,\n                        ref_number          : \"\",\n                        amount              : 0,\n                        currency            : {},\n                        exchange_rate       : 1,\n                        exchanged_amount    : 0,\n                    })\n                )\n\n                j.journal_entries = je\n            },\n            // Shrink Data\n            shrinkData() {\n                let j = this.journal;\n\n                // Number combine abbr + number\n                j.number = j.abbr + \"-\" + j.number;\n\n                // Journal Date\n                j.journal_date = helper.toISODate(j.journal_date);\n\n                // Filter cash_advance_uuid\n                j.cash_advance = j.cash_advance.uuid;\n\n                // User\n                let user = {\n                    uuid: institute.creator,\n                    user_name: institute.legalName, //change later (fullname)\n                    cognitoId: institute.sk,\n                    email: institute.email,\n                };\n                if (this.isEdit) {\n                    j.modified_by = user;\n                } else {\n                    j.created_by = user;\n                }\n            },\n            // Validating\n            validateForm() {\n                let result = true,\n                    msg = \"\";\n\n                // Cash Account\n                if (kendo.parseFloat(this.received_amount) > 0 || this.remaining < 0) {\n                    if (this.cashAccount === null) {\n                        msg += \"<p>Please select cash account</p>\";\n                        result = false;\n                    }\n                }\n\n                // Show Alert\n                this.errorMessage = msg;\n                if (result === false) {\n                    this.alert = true;\n                }\n\n                return result;\n            },\n            // Validate Closing Date\n            validateClosingDate() {\n                let today = new Date();\n                let objDate = new Date(this.journal.journal_date)\n                    .toISOString()\n                    .substr(0, 10);\n\n                // Approved Reporting Date\n                if (new Date(objDate) < new Date(institute.fishScaleDate)) {\n                    if (today <= new Date(institute.afterClosingDatePeriod)) {\n                        this.save();\n                    } else {\n                        this.alertError(\n                            \"Sorry, you can not save this transaction. Please contact your Admin.\"\n                        );\n                    }\n                } else {\n                    // Closing Date\n                    if (\n                        new Date(objDate) <= new Date(institute.closingDate) &&\n                        institute.closingStatus === 1\n                    ) {\n                        this.$swal({\n                            title: \"Please Enter Password!\",\n                            icon: \"warning\",\n                            input: \"password\",\n                            inputPlaceholder: \"Password...\",\n                            inputAttributes: {\n                                autocapitalize: \"off\",\n                                autocorrect: \"off\",\n                            },\n                            showCancelButton: true,\n                            confirmButtonText: \"Submit\",\n                            showLoaderOnConfirm: true,\n                            preConfirm: (password) => {\n                                // Decrypt (Password, Key)\n                                let pswInBytes = CryptoJS.AES.decrypt(\n                                    institute.closingDatePassword,\n                                    instituteId\n                                );\n                                let originalPsw = pswInBytes.toString(CryptoJS.enc.Utf8);\n\n                                // Compare Password\n                                if (password === originalPsw) {\n                                    this.save();\n                                } else {\n                                    this.$swal.showValidationMessage(\"Password Does Not Macth!\");\n                                }\n                            },\n                            allowOutsideClick: () => !this.$swal.isLoading(),\n                        });\n                    } else {\n                        this.save();\n                    }\n                }\n            },\n            // All Saves\n            onSaveOptionClick(mode) {\n                if (this.$refs.form.validate() && this.validateForm()) {\n                    this.saveMode = mode;\n                    this.validateClosingDate();\n                } else {\n                    this.alertError();\n                }\n            },\n            cancel() {\n                this.$swal({\n                    title: \"Are you sure?\",\n                    text: \"You won't be able to revert this!\",\n                    icon: \"warning\",\n                    showCancelButton: true,\n                    confirmButtonColor: \"#4d4848\",\n                    cancelButtonColor: \"#ED1A3A\",\n                    confirmButtonText: \"Yes, discard it!\",\n                }).then((result) => {\n                    if (result.value) {\n                        this.clear();\n                        this.$router.go(-1);\n                    }\n                });\n            },\n            clear() {\n                // Reset Form\n                this.$refs.form.reset();\n\n                this.employee = null;\n\n                // Datasoure\n                let ds = this.$refs.dataSource.kendoWidget();\n                ds.data([]);\n\n                // Set default data\n                this.setDefaultData();\n            },\n            save() {\n                let self = this,\n                    j = this.journal;\n\n                // Add Journal\n                this.addJournal();\n\n                // Draft Mode\n                if (this.saveMode === \"saveDraft\") {\n                    j.is_draft = 1;\n                } else {\n                    j.is_draft = 0;\n                }\n\n                // Shrink Data\n                this.shrinkData();\n\n                // Sync Data\n                this.showLoading = true;\n                journalHandler\n                    .save(this.journal)\n                    .then((response) => {\n                        if (response) {\n                            self.responseStatus(response.status);\n                        } else {\n                            self.alertError();\n                        }\n                    })\n                    .catch((error) => {\n                        self.alertError(error);\n                    });\n            },\n            // Response Status\n            responseStatus(status) {\n                switch (status) {\n                    case 200: // Ok\n                        this.showAlert();\n\n                        // Reset to default data\n                        this.clear();\n\n                        break;\n                    case 201: // Duplicate\n                        this.alertError(\"Duplicate entry!\");\n                        break;\n                    default:\n                        break;\n                }\n            },\n            // Sweetalert2\n            changeAlertStatus() {\n                this.loadingAlert = true;\n                setTimeout(() => {\n                    this.loadingAlert = false;\n                }, 6200);\n            },\n            showAlert() {\n                this.showLoading = false;\n                this.changeAlertStatus();\n                this.loadingTextAlert = \"Added Successful\";\n                this.loadingColorAlert = \"#3DA72E\";\n                switch (this.saveMode) {\n                    case \"saveClose\": // Save Close\n                        // this.$swal({\n                        // \tposition: 'products',\n                        // \ticon: 'success',\n                        // \ttitle: 'Your work has been saved',\n                        // \tshowConfirmButton: true,\n                        // }).then((result) => {\n                        // \tif (result.value) {\n                        // \t\twindow.history.go(-1)\n\n                        // \t\treturn false\n                        // \t}\n                        // })\n                        this.$router.go(-1);\n                        break;\n                    default:\n                        // Save New\n                        // this.$swal({\n                        // \tposition: 'products',\n                        // \ticon: 'success',\n                        // \ttitle: 'Your work has been saved',\n                        // \tshowConfirmButton: false,\n                        // \ttimer: 1500\n                        // })\n                        break;\n                }\n                this.saveMode = \"\";\n            },\n            alertError(msg) {\n                if (msg) {\n                    this.$swal({\n                        position: \"center\",\n                        icon: \"error\",\n                        title: \"Oops...!\",\n                        text: msg,\n                        showConfirmButton: true,\n                    });\n                } else {\n                    this.showLoading = false;\n                    this.loadingTextAlert = \"Failed!\";\n                    this.loadingColorAlert = \"#eb8334\";\n                    this.changeAlertStatus();\n                }\n            },\n        },\n        watch: {\n            // call again the method if the route changes\n            $route: \"loadObj\",\n        },\n        created() {\n            // fetch the data when the view is created and the data is\n            // already being observed\n            this.loadObj()\n        },\n        mounted() {\n            // Set default data\n            this.setDefaultData()\n\n            // Call Bank List\n            bankHandler.getAll()\n\t\t\t.then(res => {\n\t\t\t\tif(res){\n                    this.banks = res.data\n\t\t\t\t}\n            })\n\n            // Call Bank Account List\n            bankAccountHandler.getAll()\n            .then(res => {\n                if(res){\n                    this.bankAccountList = res.data\n                }\n            })\n\n            // Call Account List\n            accountHandler.getAll()\n            .then(res => {\n                if (res) {\n                    this.adjustmentAccounts = res.data\n                }\n            })\n        },\n    };\n</script>\n\n<style scoped>\n\n\n\n    @media (min-width: 1264px) {\n        .container {\n            max-width: 1080px !important;\n        }\n    }\n\n    table{\n        border-collapse: collapse;\n    }\n    table thead tr th{\n        border-top: 1px solid #000000;\n        border-bottom: 1px solid #000000;\n        border-left: 1px solid #000000;\n        border-right: 1px solid #000000;\n    }\n</style>\n"]}]}
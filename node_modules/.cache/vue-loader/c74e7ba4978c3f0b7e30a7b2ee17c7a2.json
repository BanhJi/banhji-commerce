{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/accounting/reports/statement_profit_lost/StatementOfProfitOrLossByProjects.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/accounting/reports/statement_profit_lost/StatementOfProfitOrLossByProjects.vue","mtime":1638843525743},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwppbXBvcnQgeyBpMThuIH0gZnJvbSAiQC9pMThuIjsKaW1wb3J0IEhlbHBlciBmcm9tICJAL2hlbHBlci5qcyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7Cgpjb25zdCB7IGluY29tZVN0YXRlbWVudEhhbmRsZXIgfSA9IHJlcXVpcmUoIkAvc2NyaXB0cy9BcHBIYW5kbGVycyIpOwpjb25zdCBPcmRlck51bWJlclBMID0gcmVxdWlyZSgiQC9zY3JpcHRzL2RlZmF1bHRfc2V0dXAvT3JkZXJOdW1iZXJQTC5qcyIpOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvTG9hZGluZyIpLAogICAgImFwcC1zZWFyY2hkYXRlIjogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvY3VzdG9tX3RlbXBsYXRlcy9TZWFyY2hEYXRlIiksCiAgICAiYXBwLXJlcG9ydGluZy1sYW5ndWFnZSI6ICgpID0+CiAgICAgIGltcG9ydCgiQC9jb21wb25lbnRzL2tlbmRvX3RlbXBsYXRlcy9SZXBvcnRpbmdMYW5ndWFnZURyb3BEb3duTGlzdCIpLAogICAgImFwcC1wcm9qZWN0LWxpc3QtaXRlbS1ncm91cCI6ICgpID0+CiAgICAgIGltcG9ydCgiQC9jb21wb25lbnRzL2Ryb3Bkb3dubGlzdC9Qcm9qZWN0TGlzdEl0ZW1Hcm91cCIpLAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIC8vIE9iagogICAgc3RhcnREYXRlOiAiIiwKICAgIGVuZERhdGU6ICIiLAogICAgc3RhdGVtZW50UExMaXN0OiBbXSwKICAgIHNlbGVjdGVkUHJvamVjdElkczogW10sCiAgICBIZWxwZXI6IEhlbHBlciwKICAgIC8vIFJlcG9ydGluZyBMYW5ndWFnZQogICAgcmVwb3J0aW5nTGFuZ3VhZ2U6ICJlbmdsaXNoIiwKICAgIGZpZWxkTmFtZTogIm5hbWUiLAogICAgZmllbGRUeXBlOiAidHlwZSIsCiAgICAvLyBMb2RpbmdNZQogICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgLyogS0VORE8gKi8KICAgIGNvbHVtbnM6IFtdLAogICAgc29ydERlZmluaXRpb246IHsgZmllbGQ6ICJudW1iZXIiLCBkaXI6ICJhc2MiIH0sCiAgICBncm91cERlZmluaXRpb246IFtdLAogICAgYWdncmVnYXRlRGVmaW5pdGlvbjogW10sCiAgICBzY2hlbWFEZWZpbml0aW9uOiB7CiAgICAgIG1vZGVsOiB7IGlkOiAiYWNjb3VudFVVSUQiIH0sCiAgICB9LAogIH0pLAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvYWREYXRhKCkgewogICAgICAvLyBDYWxsIExpc3QKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInByb2plY3RzL2dldExpc3QiKTsKICAgIH0sCiAgICAvKiBLRU5ETyAqLwogICAgLyogT24gZ3JpZCBjaGFuZ2VzID0+IGxpbmsgdG8gR0wgKi8KICAgIG9uR3JpZENoYW5nZXMoKSB7CiAgICAgIGxldCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZFNQTCIpLmRhdGEoImtlbmRvR3JpZCIpOwogICAgICBsZXQgc2VsZWN0ZWRQcm9qZWN0SWRzID0gZ3JpZC5kYXRhSXRlbShncmlkLnNlbGVjdCgpKTsKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiZ2VuZXJhbF9sZWRnZXIiLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBhY2NvdW50X2lkOiBzZWxlY3RlZFByb2plY3RJZHMuYWNjb3VudFVVSUQsCiAgICAgICAgICBzdGFydF9kYXRlOiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgIGVuZF9kYXRlOiB0aGlzLmVuZERhdGUsCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgLy8gU2VhcmNoIGpvdXJuYWxzCiAgICBzZWFyY2goKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkUHJvamVjdElkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IHNkYXRlID0gdGhpcy5zdGFydERhdGUsCiAgICAgICAgICBlZGF0ZSA9IHRoaXMuZW5kRGF0ZTsKCiAgICAgICAgaWYgKHNkYXRlICYmIGVkYXRlKSB7CiAgICAgICAgICBzZGF0ZSA9CiAgICAgICAgICAgIGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHNkYXRlKSwgInl5eXktTU0tZGQiKSArICJUMDA6MDA6MDAuMDAwWiI7CgogICAgICAgICAgZWRhdGUgPSBuZXcgRGF0ZShlZGF0ZSk7CiAgICAgICAgICBlZGF0ZSA9IGtlbmRvLnRvU3RyaW5nKGVkYXRlLCAieXl5eS1NTS1kZCIpICsgIlQyMzo1OTo1OS45OTlaIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2RhdGUgPSAwOwogICAgICAgICAgZWRhdGUgPSAwOwogICAgICAgIH0KCiAgICAgICAgLy8gRW1wdHkgZGF0YVNvdXJjZQogICAgICAgIGxldCBkcyA9IHRoaXMuJHJlZnMuc3RhdGVtZW50UExEUy5rZW5kb1dpZGdldCgpOwogICAgICAgIGRzLmRhdGEoW10pOwoKICAgICAgICAvLyBRdWVyeQogICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICAgIGluY29tZVN0YXRlbWVudEhhbmRsZXIKICAgICAgICAgIC5nZXRCeVByb2plY3RzKHNkYXRlLCBlZGF0ZSwgdGhpcy5zZWxlY3RlZFByb2plY3RJZHMpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5zdGF0ZW1lbnRzID0gcmVzcG9uc2U7CiAgICAgICAgICAgIHRoaXMuYmluZERhdGEoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIEhlbHBlci5hbGVydEVycm9yTXNnKCJQbGVhc2Ugc2VsZWN0IHByb2plY3QiKTsKICAgICAgfQogICAgfSwKICAgIC8qIEJpbmQgRGF0YSAqLwogICAgYXN5bmMgYmluZERhdGEoKSB7CiAgICAgIGxldCBlbnRyaWVzID0ge307CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VsZWN0ZWRQcm9qZWN0SWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5zdGF0ZW1lbnRzW2ldLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgICBsZXQgZW50cnkgPSB2YWx1ZTsKCiAgICAgICAgICAvLyBPcmRlcgogICAgICAgICAgaWYgKHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXIgPT0gT3JkZXJOdW1iZXJQTC5Hcm9zc1Byb2ZpdC5udW1iZXIpIHsKICAgICAgICAgICAgLy8gR3Jvc3MgUHJvZml0CiAgICAgICAgICAgIGVudHJ5Lm9yZGVyID0gT3JkZXJOdW1iZXJQTC5Hcm9zc1Byb2ZpdC5vcmRlcjsKICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXIgPT0gT3JkZXJOdW1iZXJQTC5PdGhlclJldmVudWUubnVtYmVyCiAgICAgICAgICApIHsKICAgICAgICAgICAgLy8gT3RoZXIgUmV2ZW51ZQogICAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuT3RoZXJSZXZlbnVlLm9yZGVyOwogICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgdmFsdWUuYWNjb3VudF90eXBlX251bWJlciA9PSBPcmRlck51bWJlclBMLk9wZXJhdGluZ0V4cGVuc2UubnVtYmVyCiAgICAgICAgICApIHsKICAgICAgICAgICAgLy8gT3BlcmF0aW5nIEV4cGVuc2UKICAgICAgICAgICAgZW50cnkub3JkZXIgPSBPcmRlck51bWJlclBMLk9wZXJhdGluZ0V4cGVuc2Uub3JkZXI7CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyID09CiAgICAgICAgICAgIE9yZGVyTnVtYmVyUEwuT3BlcmF0aW5nSW5jb21lRUJJVERBLm51bWJlcgogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIE9wZXJhdGluZyBJbmNvbWUgKEVCSVREQSkKICAgICAgICAgICAgZW50cnkub3JkZXIgPSBPcmRlck51bWJlclBMLk9wZXJhdGluZ0luY29tZUVCSVREQS5vcmRlcjsKICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIHZhbHVlLmFjY291bnRfdHlwZV9udW1iZXIgPT0KICAgICAgICAgICAgT3JkZXJOdW1iZXJQTC5FYXJuaW5nQmVmb3JlSW50ZXJlc3RBbmRUYXhFQklULm51bWJlcgogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIEVhcm5pbmcgQmVmb3JlIEludGVyZXN0IEFuZCBUYXgoRUJJVCkKICAgICAgICAgICAgZW50cnkub3JkZXIgPSBPcmRlck51bWJlclBMLkVhcm5pbmdCZWZvcmVJbnRlcmVzdEFuZFRheEVCSVQub3JkZXI7CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyID09IE9yZGVyTnVtYmVyUEwuUHJvZml0QmVmb3JlVGF4Lm51bWJlcgogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIFByb2ZpdCBCZWZvcmUgVGF4CiAgICAgICAgICAgIGVudHJ5Lm9yZGVyID0gT3JkZXJOdW1iZXJQTC5Qcm9maXRCZWZvcmVUYXgub3JkZXI7CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyID09IE9yZGVyTnVtYmVyUEwuUHJvZml0Rm9yVGhlUGVyaW9kLm51bWJlcgogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIFByb2ZpdCBGb3IgVGhlIFBlcmlvZAogICAgICAgICAgICBlbnRyeS5vcmRlciA9IE9yZGVyTnVtYmVyUEwuUHJvZml0Rm9yVGhlUGVyaW9kLm9yZGVyOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW50cnkub3JkZXIgPSB2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyOwogICAgICAgICAgfQoKICAgICAgICAgIC8qIEdyb3VwaW5nICovCiAgICAgICAgICBsZXQgZ3JvdXBOYW1lID0KICAgICAgICAgICAgU3RyaW5nKHZhbHVlLmFjY291bnRVVUlEKSArIFN0cmluZyh2YWx1ZS5hY2NvdW50X3R5cGVfbnVtYmVyKTsKICAgICAgICAgIGlmIChlbnRyaWVzW2dyb3VwTmFtZV0pIHsKICAgICAgICAgICAgZW50cmllc1tncm91cE5hbWVdWyJzIiArIGldID0gdmFsdWUuYmFsYW5jZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVudHJpZXNbZ3JvdXBOYW1lXSA9IGVudHJ5OwoKICAgICAgICAgICAgLyogQWRkIGFsbCBzZWdtZW50cyB0byBjb2x1bW5zICovCiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zZWxlY3RlZFByb2plY3RJZHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBlbnRyaWVzW2dyb3VwTmFtZV1bInMiICsgal0gPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBlbnRyaWVzW2dyb3VwTmFtZV1bInMiICsgaV0gPSB2YWx1ZS5iYWxhbmNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLnN0YXRlbWVudFBMTGlzdCA9IE9iamVjdC52YWx1ZXMoZW50cmllcyk7CiAgICAgIHRoaXMuZ2VuZXJhdGVDb2x1bW4oKTsKICAgIH0sCiAgICAvLyBSb3cgVGVtcGxhdGUKICAgIGFjY291bnRUbXBsKGRhdGFJdGVtKSB7CiAgICAgIGxldCBuYW1lID0gZGF0YUl0ZW0ubnVtYmVyOwoKICAgICAgaWYgKHRoaXMucmVwb3J0aW5nTGFuZ3VhZ2UgPT09ICJsb2NhbCIpIHsKICAgICAgICBuYW1lICs9ICIgLSAiICsgZGF0YUl0ZW0ubG9jYWxfbmFtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuYW1lICs9ICIgLSAiICsgZGF0YUl0ZW0ubmFtZTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5hbWU7CiAgICB9LAogICAgdHlwZUdyb3VwSGVhZGVyVG1wbChkYXRhSXRlbSkgewogICAgICBsZXQgbmFtZSA9IGRhdGFJdGVtLml0ZW1zWzBdLnR5cGU7CgogICAgICBpZiAodGhpcy5yZXBvcnRpbmdMYW5ndWFnZSA9PT0gImxvY2FsIikgewogICAgICAgIG5hbWUgPSBkYXRhSXRlbS5pdGVtc1swXS50eXBlX2xvY2FsX25hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lOwogICAgfSwKICAgIC8qIERhdGFib3VuZCAqLwogICAgZGF0YUJvdW5kKGUpIHsKICAgICAgbGV0IGdyaWQgPSBlLnNlbmRlcjsKCiAgICAgIGdyaWQuZGF0YVNvdXJjZS5kYXRhKCkuZm9yRWFjaCgodmFsdWUpID0+IHsKICAgICAgICBpZiAodmFsdWUuYWNjb3VudF90eXBlX251bWJlciA+PSAxMDApIHsKICAgICAgICAgIGxldCByb3cgPSBncmlkLnRib2R5CiAgICAgICAgICAgIC5maW5kKCJ0cltkYXRhLXVpZD0nIiArIHZhbHVlLnVpZCArICInXSIpCiAgICAgICAgICAgIC5wcmV2KCIuay1ncm91cGluZy1yb3ciKTsKICAgICAgICAgIGdyaWQuY29sbGFwc2VHcm91cChyb3cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gR2VuZXJhdGUgQ29sdW1ucwogICAgZ2VuZXJhdGVDb2x1bW4oKSB7CiAgICAgIGxldCBjb2x1bW5zID0gWwogICAgICAgIHsKICAgICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkTmFtZSwKICAgICAgICAgIHRpdGxlOiBpMThuLnQoImFjY291bnQiKSwKICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLmFjY291bnRUbXBsLAogICAgICAgICAgbG9ja2VkOiB0cnVlLAogICAgICAgICAgd2lkdGg6IDMwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkVHlwZSwKICAgICAgICAgIHRpdGxlOiAiVFlQRSIsCiAgICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgICBncm91cEhlYWRlclRlbXBsYXRlOiB0aGlzLnR5cGVHcm91cEhlYWRlclRtcGwsCiAgICAgICAgICB3aWR0aDogMzAwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgZmllbGQ6ICJzdGF0ZW1lbnRHcm91cCIsCiAgICAgICAgICB0aXRsZTogIlNUQVRFTUVOVCBHUk9VUCIsCiAgICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgICBncm91cEhlYWRlclRlbXBsYXRlOgogICAgICAgICAgICAiPHNwYW4gY2xhc3M9J3RleHQtYm9sZCB0ZXh0LWJsYWNrJz4jPXZhbHVlIzwvc3Bhbj4iLAogICAgICAgICAgd2lkdGg6IDMwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZpZWxkOiAiZ3JvdXBOYXR1cmUiLAogICAgICAgICAgdGl0bGU6ICJOQVRVUkUiLAogICAgICAgICAgaGlkZGVuOiB0cnVlLAogICAgICAgICAgZ3JvdXBIZWFkZXJUZW1wbGF0ZToKICAgICAgICAgICAgIjxzcGFuIGNsYXNzPSd0ZXh0LWJvbGQgdGV4dC1ibGFjayc+Iz12YWx1ZSM8L3NwYW4+IiwKICAgICAgICAgIHdpZHRoOiAzMDAsCiAgICAgICAgfSwKICAgICAgXTsKCiAgICAgIGxldCBoZWFkZXJBdHRyaWJ1dGVzID0gewogICAgICAgICAgY2xhc3M6ICJ0YWJsZS1oZWFkZXItY2VsbCIsCiAgICAgICAgICBzdHlsZTogInRleHQtYWxpZ246IHJpZ2h0O3BhZGRpbmctcmlnaHQ6IDM1cHg7IGZvbnQtc2l6ZTogMTRweCIsCiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzID0gewogICAgICAgICAgY2xhc3M6ICJ0YWJsZS1jZWxsIiwKICAgICAgICAgIHN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMTRweCIsCiAgICAgICAgfTsKCiAgICAgIC8qIFNldCBDb2x1bW4gU2VnbWVudHMgKi8KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGVkUHJvamVjdElkcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8qIFByb2plY3QgKi8KICAgICAgICBsZXQgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZCgKICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmlkID09PSB0aGlzLnNlbGVjdGVkUHJvamVjdElkc1tpXQogICAgICAgICk7CgogICAgICAgIC8qIENvbHVtbiBQcm9qZWN0ICovCiAgICAgICAgY29sdW1ucy5wdXNoKHsKICAgICAgICAgIGZpZWxkOiAicyIgKyBpLAogICAgICAgICAgdGl0bGU6IHByb2plY3QubmFtZSwKICAgICAgICAgIGZvcm1hdDogInswOm59IiwKICAgICAgICAgIHdpZHRoOiAyMDAsCiAgICAgICAgICBhZ2dyZWdhdGVzOiAiWydzdW0nXSIsCiAgICAgICAgICBncm91cEhlYWRlckNvbHVtblRlbXBsYXRlOgogICAgICAgICAgICAiPGRpdiBjbGFzcz0ndGV4dC1yaWdodCB0ZXh0LWJvbGQgdGV4dC1ibGFjayc+Iz1rZW5kby50b1N0cmluZyhzdW0sICduJykjPC9kaXY+IiwKICAgICAgICAgIGhlYWRlckF0dHJpYnV0ZXM6IGhlYWRlckF0dHJpYnV0ZXMsCiAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zOwogICAgfSwKICAgIC8vIE9uIFJlcG9yaW50IExhbmd1YWdlIENoYW5nZXMKICAgIG9uUmVwb3J0aW5nTGFuZ3VhZ2VDaGFuZ2VzKCkgewogICAgICB0aGlzLmZpZWxkTmFtZSA9ICJuYW1lIjsKICAgICAgdGhpcy5maWVsZFR5cGUgPSAidHlwZSI7CiAgICAgIGlmICh0aGlzLnJlcG9ydGluZ0xhbmd1YWdlID09PSAibG9jYWwiKSB7CiAgICAgICAgdGhpcy5maWVsZE5hbWUgPSAibG9jYWxfbmFtZSI7CiAgICAgICAgdGhpcy5maWVsZFR5cGUgPSAidHlwZV9sb2NhbF9uYW1lIjsKICAgICAgfQoKICAgICAgLy8gR2VuZXJhdGUgR3JvdXAgQnkKICAgICAgdGhpcy5nZW5lcmF0ZUdyb3VwQnkoKTsKCiAgICAgIC8vIEdlbmVyYXRlIGNvbHVtbiB3aXRoIG5ldyBsYW5ndWFnZQogICAgICB0aGlzLmdlbmVyYXRlQ29sdW1uKCk7CiAgICB9LAogICAgLy8gR2VuZXJhdGUgR3JvdXAgQnkKICAgIGdlbmVyYXRlR3JvdXBCeSgpIHsKICAgICAgLyogQWdncmVnYXRlIERlZmludGlvbiAqLwogICAgICBsZXQgYWdncmVnYXRlRGVmaW5pdGlvbiA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHsKICAgICAgICBhZ2dyZWdhdGVEZWZpbml0aW9uLnB1c2goeyBmaWVsZDogInMiICsgaSwgYWdncmVnYXRlOiAic3VtIiB9KTsKICAgICAgfQogICAgICB0aGlzLmFnZ3JlZ2F0ZURlZmluaXRpb24gPSBhZ2dyZWdhdGVEZWZpbml0aW9uOwoKICAgICAgdGhpcy5ncm91cERlZmluaXRpb24gPSB7CiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGRUeXBlLAogICAgICAgIGFnZ3JlZ2F0ZXM6IGFnZ3JlZ2F0ZURlZmluaXRpb24sCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24oYSwgYikgewogICAgICAgICAgaWYgKGEuaXRlbXNbMF0ub3JkZXIgPT09IGIuaXRlbXNbMF0ub3JkZXIpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9IGVsc2UgaWYgKGEuaXRlbXNbMF0ub3JkZXIgPiBiLml0ZW1zWzBdLm9yZGVyKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH07CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHJlcG9ydGluZ0xhbmd1YWdlKCkgewogICAgICB0aGlzLm9uUmVwb3J0aW5nTGFuZ3VhZ2VDaGFuZ2VzKCk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IG1hcFN0YXRlKHsKICAgIHByb2plY3RzOiAoc3RhdGUpID0+IHN0YXRlLnByb2plY3RzLmxpc3QsCiAgfSksCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZERhdGEoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyBHZW5lcmF0ZSBHcm91cCBCeQogICAgdGhpcy5nZW5lcmF0ZUdyb3VwQnkoKTsKCiAgICAvLyBJbml0aWFsIEdyaWQgQ29sdW1ucwogICAgdGhpcy5nZW5lcmF0ZUNvbHVtbigpOwogIH0sCn07Cg=="},{"version":3,"sources":["StatementOfProfitOrLossByProjects.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"StatementOfProfitOrLossByProjects.vue","sourceRoot":"src/views/accounting/reports/statement_profit_lost","sourcesContent":["<template>\n  <v-row>\n    <v-col sm=\"12\" cols=\"12\" class=\"grayBg px-6\">\n      <v-card color=\"white\" class=\"pa-3 no_border\" elevation=\"0\">\n        <v-row class=\"mt-0\">\n            <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n            <app-searchdate\n                :initStartDate=\"startDate\"\n                @emitStartDate=\"startDate = $event\"\n                :initEndDate=\"endDate\"\n                @emitEndDate=\"endDate = $event\"\n            />\n            </v-col>\n        </v-row>\n        <v-row class=\"mt-0\">\n            <v-col class=\"py-0\" sm=\"4\" cols=\"4\">\n            <label class=\"label\">{{\n                $t(\"project\")\n            }}</label>\n            <app-project-list-item-group\n                :initProject=\"selectedProjectIds\"\n                @emitProject=\"selectedProjectIds = $event\"\n            />\n            </v-col>\n            <v-col sm=\"4\" cols=\"4\" class=\"py-0\">\n            <div class=\"report_expor\">\n                <label class=\"mb-1\"\n                >{{ $t(\"reporting_language\") }}:</label\n                >\n                <app-reporting-language\n                :initLanguage=\"reportingLanguage\"\n                @emitLanguage=\"reportingLanguage = $event\"\n                />\n            </div>\n            </v-col>\n            <v-col class=\"py-0\" sm=\"4\" cols=\"4\">\n            <v-btn\n                class=\"white--text dv_mt\"\n                color=\"primary\"\n                @click=\"search\"\n            >\n                {{ $t(\"run_report\") }}\n            </v-btn>\n            </v-col>\n        </v-row>\n        <v-row class=\"mt-0\">\n            <v-col sm=\"12\" cols=\"12\" class=\"custom_expansion\">\n            <kendo-datasource\n                ref=\"statementPLDS\"\n                :data=\"statementPLList\"\n                :schema=\"schemaDefinition\"\n                :sort=\"sortDefinition\"\n                :group=\"groupDefinition\"\n                :aggregate=\"aggregateDefinition\"\n            />\n\n            <kendo-grid\n                id=\"gridSPL\"\n                class=\"custom_grid\"\n                :data-source-ref=\"'statementPLDS'\"\n                :dataBound=\"dataBound\"\n                :change=\"onGridChanges\"\n                :selectable=\"true\"\n                :persistSelection=\"true\"\n                :sortable=\"true\"\n                :column-menu=\"true\"\n                :reorderable=\"true\"\n                :resizable=\"true\"\n                :noRecords=\"true\"\n                :toolbar=\"['excel']\"\n                :excel-file-name=\"'incomeStatement.xlsx'\"\n                :excel-filterable=\"true\"\n                :columns=\"columns\"\n            />\n            </v-col>\n        </v-row>\n\n        <LoadingMe\n        :isLoading=\"showLoading\"\n        :fullPage=\"false\"\n        :myLoading=\"true\"\n        />\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport kendo from \"@progress/kendo-ui\";\nimport { i18n } from \"@/i18n\";\nimport Helper from \"@/helper.js\";\nimport { mapState } from \"vuex\";\n\nconst { incomeStatementHandler } = require(\"@/scripts/AppHandlers\");\nconst OrderNumberPL = require(\"@/scripts/default_setup/OrderNumberPL.js\");\n\nexport default {\n  components: {\n    LoadingMe: () => import(\"@/components/Loading\"),\n    \"app-searchdate\": () => import(\"@/components/custom_templates/SearchDate\"),\n    \"app-reporting-language\": () =>\n      import(\"@/components/kendo_templates/ReportingLanguageDropDownList\"),\n    \"app-project-list-item-group\": () =>\n      import(\"@/components/dropdownlist/ProjectListItemGroup\"),\n  },\n  data: () => ({\n    // Obj\n    startDate: \"\",\n    endDate: \"\",\n    statementPLList: [],\n    selectedProjectIds: [],\n    Helper: Helper,\n    // Reporting Language\n    reportingLanguage: \"english\",\n    fieldName: \"name\",\n    fieldType: \"type\",\n    // LodingMe\n    showLoading: false,\n    /* KENDO */\n    columns: [],\n    sortDefinition: { field: \"number\", dir: \"asc\" },\n    groupDefinition: [],\n    aggregateDefinition: [],\n    schemaDefinition: {\n      model: { id: \"accountUUID\" },\n    },\n  }),\n  methods: {\n    async loadData() {\n      // Call List\n      await this.$store.dispatch(\"projects/getList\");\n    },\n    /* KENDO */\n    /* On grid changes => link to GL */\n    onGridChanges() {\n      let grid = kendo.jQuery(\"#gridSPL\").data(\"kendoGrid\");\n      let selectedProjectIds = grid.dataItem(grid.select());\n\n      this.$router.push({\n        path: \"general_ledger\",\n        query: {\n          account_id: selectedProjectIds.accountUUID,\n          start_date: this.startDate,\n          end_date: this.endDate,\n        },\n      });\n    },\n    // Search journals\n    search() {\n      if (this.selectedProjectIds.length > 0) {\n        let sdate = this.startDate,\n          edate = this.endDate;\n\n        if (sdate && edate) {\n          sdate =\n            kendo.toString(new Date(sdate), \"yyyy-MM-dd\") + \"T00:00:00.000Z\";\n\n          edate = new Date(edate);\n          edate = kendo.toString(edate, \"yyyy-MM-dd\") + \"T23:59:59.999Z\";\n        } else {\n          sdate = 0;\n          edate = 0;\n        }\n\n        // Empty dataSource\n        let ds = this.$refs.statementPLDS.kendoWidget();\n        ds.data([]);\n\n        // Query\n        this.showLoading = true;\n        incomeStatementHandler\n          .getByProjects(sdate, edate, this.selectedProjectIds)\n          .then((response) => {\n            this.statements = response;\n            this.bindData();\n          })\n          .finally(() => {\n            this.showLoading = false;\n          });\n      } else {\n        Helper.alertErrorMsg(\"Please select project\");\n      }\n    },\n    /* Bind Data */\n    async bindData() {\n      let entries = {};\n\n      for (let i = 0; i < this.selectedProjectIds.length; i++) {\n        this.statements[i].forEach((value) => {\n          let entry = value;\n\n          // Order\n          if (value.account_type_number == OrderNumberPL.GrossProfit.number) {\n            // Gross Profit\n            entry.order = OrderNumberPL.GrossProfit.order;\n          } else if (\n            value.account_type_number == OrderNumberPL.OtherRevenue.number\n          ) {\n            // Other Revenue\n            entry.order = OrderNumberPL.OtherRevenue.order;\n          } else if (\n            value.account_type_number == OrderNumberPL.OperatingExpense.number\n          ) {\n            // Operating Expense\n            entry.order = OrderNumberPL.OperatingExpense.order;\n          } else if (\n            value.account_type_number ==\n            OrderNumberPL.OperatingIncomeEBITDA.number\n          ) {\n            // Operating Income (EBITDA)\n            entry.order = OrderNumberPL.OperatingIncomeEBITDA.order;\n          } else if (\n            value.account_type_number ==\n            OrderNumberPL.EarningBeforeInterestAndTaxEBIT.number\n          ) {\n            // Earning Before Interest And Tax(EBIT)\n            entry.order = OrderNumberPL.EarningBeforeInterestAndTaxEBIT.order;\n          } else if (\n            value.account_type_number == OrderNumberPL.ProfitBeforeTax.number\n          ) {\n            // Profit Before Tax\n            entry.order = OrderNumberPL.ProfitBeforeTax.order;\n          } else if (\n            value.account_type_number == OrderNumberPL.ProfitForThePeriod.number\n          ) {\n            // Profit For The Period\n            entry.order = OrderNumberPL.ProfitForThePeriod.order;\n          } else {\n            entry.order = value.account_type_number;\n          }\n\n          /* Grouping */\n          let groupName =\n            String(value.accountUUID) + String(value.account_type_number);\n          if (entries[groupName]) {\n            entries[groupName][\"s\" + i] = value.balance;\n          } else {\n            entries[groupName] = entry;\n\n            /* Add all segments to columns */\n            for (let j = 0; j < this.selectedProjectIds.length; j++) {\n              entries[groupName][\"s\" + j] = 0;\n            }\n\n            entries[groupName][\"s\" + i] = value.balance;\n          }\n        });\n      }\n\n      this.statementPLList = Object.values(entries);\n      this.generateColumn();\n    },\n    // Row Template\n    accountTmpl(dataItem) {\n      let name = dataItem.number;\n\n      if (this.reportingLanguage === \"local\") {\n        name += \" - \" + dataItem.local_name;\n      } else {\n        name += \" - \" + dataItem.name;\n      }\n\n      return name;\n    },\n    typeGroupHeaderTmpl(dataItem) {\n      let name = dataItem.items[0].type;\n\n      if (this.reportingLanguage === \"local\") {\n        name = dataItem.items[0].type_local_name;\n      }\n\n      return name;\n    },\n    /* Databound */\n    dataBound(e) {\n      let grid = e.sender;\n\n      grid.dataSource.data().forEach((value) => {\n        if (value.account_type_number >= 100) {\n          let row = grid.tbody\n            .find(\"tr[data-uid='\" + value.uid + \"']\")\n            .prev(\".k-grouping-row\");\n          grid.collapseGroup(row);\n        }\n      });\n    },\n    // Generate Columns\n    generateColumn() {\n      let columns = [\n        {\n          field: this.fieldName,\n          title: i18n.t(\"account\"),\n          template: this.accountTmpl,\n          locked: true,\n          width: 300,\n        },\n        {\n          field: this.fieldType,\n          title: \"TYPE\",\n          hidden: true,\n          groupHeaderTemplate: this.typeGroupHeaderTmpl,\n          width: 300,\n        },\n        {\n          field: \"statementGroup\",\n          title: \"STATEMENT GROUP\",\n          hidden: true,\n          groupHeaderTemplate:\n            \"<span class='text-bold text-black'>#=value#</span>\",\n          width: 300,\n        },\n        {\n          field: \"groupNature\",\n          title: \"NATURE\",\n          hidden: true,\n          groupHeaderTemplate:\n            \"<span class='text-bold text-black'>#=value#</span>\",\n          width: 300,\n        },\n      ];\n\n      let headerAttributes = {\n          class: \"table-header-cell\",\n          style: \"text-align: right;padding-right: 35px; font-size: 14px\",\n        },\n        attributes = {\n          class: \"table-cell\",\n          style: \"text-align: right; font-size: 14px\",\n        };\n\n      /* Set Column Segments */\n      for (let i = 0; i < this.selectedProjectIds.length; i++) {\n        /* Project */\n        let project = this.projects.find(\n          (item) => item.id === this.selectedProjectIds[i]\n        );\n\n        /* Column Project */\n        columns.push({\n          field: \"s\" + i,\n          title: project.name,\n          format: \"{0:n}\",\n          width: 200,\n          aggregates: \"['sum']\",\n          groupHeaderColumnTemplate:\n            \"<div class='text-right text-bold text-black'>#=kendo.toString(sum, 'n')#</div>\",\n          headerAttributes: headerAttributes,\n          attributes: attributes,\n        });\n      }\n\n      this.columns = columns;\n    },\n    // On Reporint Language Changes\n    onReportingLanguageChanges() {\n      this.fieldName = \"name\";\n      this.fieldType = \"type\";\n      if (this.reportingLanguage === \"local\") {\n        this.fieldName = \"local_name\";\n        this.fieldType = \"type_local_name\";\n      }\n\n      // Generate Group By\n      this.generateGroupBy();\n\n      // Generate column with new language\n      this.generateColumn();\n    },\n    // Generate Group By\n    generateGroupBy() {\n      /* Aggregate Defintion */\n      let aggregateDefinition = [];\n      for (let i = 0; i < 50; i++) {\n        aggregateDefinition.push({ field: \"s\" + i, aggregate: \"sum\" });\n      }\n      this.aggregateDefinition = aggregateDefinition;\n\n      this.groupDefinition = {\n        field: this.fieldType,\n        aggregates: aggregateDefinition,\n        compare: function(a, b) {\n          if (a.items[0].order === b.items[0].order) {\n            return 0;\n          } else if (a.items[0].order > b.items[0].order) {\n            return 1;\n          } else {\n            return -1;\n          }\n        },\n      };\n    },\n  },\n  watch: {\n    reportingLanguage() {\n      this.onReportingLanguageChanges();\n    },\n  },\n  computed: mapState({\n    projects: (state) => state.projects.list,\n  }),\n  created() {\n    this.loadData();\n  },\n  mounted() {\n    // Generate Group By\n    this.generateGroupBy();\n\n    // Initial Grid Columns\n    this.generateColumn();\n  },\n};\n</script>\n\n<style scoped>\n.reports_list {\n  width: 100%;\n  background-color: #fff;\n  padding: 20px 20px 5px;\n}\n.report_filter {\n  background-color: #f8f8f9;\n  padding: 0 20px 5px 20px;\n  position: relative;\n}\n.dv_mt {\n  margin-top: 24px;\n}\n.report_export {\n  position: absolute;\n  top: 15px;\n}\n.report_total {\n  padding: 12.5px;\n  text-align: right;\n  text-transform: uppercase;\n  font-weight: 700;\n  border-top: 1px solid #333;\n  border-bottom: 1px solid #333;\n}\n.custom_expansion\n  .v-expansion-panel-header\n  .v-expansion-panel-header__icon\n  .v-icon {\n  display: none !important;\n}\n.v-expansion-panel {\n  border-bottom: 1px solid #cccccc;\n  border-radius: 0;\n}\n.v-expansion-panel::before {\n  box-shadow: none;\n}\n.v-expansion-panel-header {\n  padding: 15px;\n}\n.v-expansion-panel-content__wrap {\n  padding: 0 35px 10px;\n}\n@media (max-width: 576px) {\n  .dv_mt,\n  .dv_mt8 {\n    margin-top: 0;\n  }\n  .reports_list {\n    margin-top: 0;\n  }\n}\n</style>\n"]}]}
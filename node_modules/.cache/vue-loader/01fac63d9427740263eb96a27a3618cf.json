{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/sales/sale_reports_analysis/ByCustomer.vue?vue&type=style&index=0&id=2f70cd47&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/sales/sale_reports_analysis/ByCustomer.vue","mtime":1638760538978},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5rLXBkZi1leHBvcnQgLmstZ3JpZCB7CiAgICBmb250LWZhbWlseTogIkRlamFWdSBTYW5zIiwgIkFyaWFsIiwgc2Fucy1zZXJpZjsKfQoKLyogSGlkZSB0aGUgR3JpZCBoZWFkZXIgYW5kIHBhZ2VyIGR1cmluZyBleHBvcnQgKi8KLmstcGRmLWV4cG9ydCAuay1ncmlkLXRvb2xiYXIsCi5rLXBkZi1leHBvcnQgLmstcGFnZXItd3JhcCB7CiAgICBkaXNwbGF5OiBub25lOwp9Cgo="},{"version":3,"sources":["ByCustomer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAonBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ByCustomer.vue","sourceRoot":"src/views/customers/sales/sale_reports_analysis","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"grayBg px-6\">\n            <v-card color=\"white\" class=\"pa-3 no_border\" elevation=\"0\">\n                <LoadingMe\n                    :isLoading=\"showLoading\"\n                    :fullPage=\"false\"\n                    type=\"loading\"\n                    :myLoading=\"true\">\n\n                </LoadingMe>\n                <v-row>\n                    <v-col sm=\"4\" cols=\"12\" class=\"py-0\">\n                        <v-select class=\"mt-1\"\n                                  :items=\"dateSorters\"\n                                  v-model=\"mDateSorter\"\n                                  @change=\"onSorterChanges\"\n                                  clearable\n                                  outlined\n                                  placeholder=\"ALL\"\n                        />\n                    </v-col>\n\n                    <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n                        <app-datepicker :initialDate=\"startDate\" @emitDate=\"startDate = $event\"/>\n                    </v-col>\n\n                    <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n                        <app-datepicker :initialDate=\"endDate\" @emitDate=\"endDate = $event\"/>\n                    </v-col>\n\n                    <v-col sm=\"1\" cols=\"1\" class=\"pt-1\">\n                        <v-btn color=\"primary white--text\" @click=\"searchTransaction('')\">\n                            <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n                        </v-btn>\n                    </v-col>\n                </v-row>\n                <v-row class=\"mt-0\">\n                    <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense class=\"pa-3 no_border rounded-4 white--text\" color=\"third\"\n                                height=\"60px\"\n                                @click=\"searchTransaction('Invoice')\">\n                            <h3 class=\"text-left flex-1 font_12 text-uppercase\">{{ $t('total_revenue') }}</h3>\n                            <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">{{ numberFormat(totalRevenue) }}</h3>\n                        </v-card>\n                    </v-col>\n                    <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense color=\"third\" class=\"pa-3 rounded-4 no_border white--text\" height=\"60px\"\n                                @click=\"searchTransaction('Sale Lead')\">\n                            <h3 class=\"text-left flex-1 font_12 text-uppercase\">{{ $t('open_lead') }}</h3>\n                            <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">{{\n                                    numberFormat(totalSaleLead)\n                                }}</h3>\n                        </v-card>\n                    </v-col>\n                    <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense color=\"third\" class=\"pa-3  rounded-4 no_border white--text\" height=\"60px\"\n                                @click=\"searchTransaction('Sale Quote')\">\n                            <h3 class=\"text-left flex-1 font_12 text-uppercase\">{{ $t('open_sale_quote') }}</h3>\n                            <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">{{\n                                    numberFormat(totalSaleQuote)\n                                }}</h3>\n                        </v-card>\n                    </v-col>\n                    <v-col sm=\"3\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense class=\"pa-3 rounded-4 no_border white--text\" color=\"third\" height=\"60px\"\n                                @click=\"searchTransaction('Sale Order')\">\n                            <h3 class=\"text-left flex-1 font_12 text-uppercase\">{{ $t('open_sale_order') }}</h3>\n                            <h3 class=\"font_20 mt-0 flex-1 text-right white--text\">{{\n                                    numberFormat(totalSaleOrder)\n                                }}</h3>\n                        </v-card>\n                    </v-col>\n\n                </v-row>\n\n                <v-row>\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                        <template>\n                            <kendo-datasource ref=\"gridTransactionDS\"\n                                              :type=\"'JSON'\"\n                                              :data=\"transactions\"\n                                              :group=\"group\"\n                                              :server-paging=\"false\"/>\n                            <kendo-grid id=\"gridTransaction\" class=\"grid-function\"\n                                        :data-source-ref=\"'gridTransactionDS'\"\n                                        :editable=\"false\"\n                                        :groupable=\"true\"\n                                        :sortable=\"true\"\n                                        :column-menu=\"true\"\n                                        :filterable=\"true\"\n                                        :noRecords=\"true\"\n                                        :resizable=\"true\"\n                                        @pagechange=\"pageChangeHandler\"\n                                        :toolbar=\"['excel']\"\n\n                                        :excel-file-name=\"'SaleAnalysisByCustomer.xlsx'\"\n                                        :excel-filterable=\"true\"\n                                        :excel-all-pages=\"true\"\n                                        :scrollable-virtual=\"true\">\n                                <!--                <kendo-grid-column-->\n                                <!--                    :field=\"'no'\"-->\n                                <!--                    :title=\"$t('no')\"-->\n                                <!--                    :template=\"rowNumberTmpl\"-->\n                                <!--                    :width=\"90\"-->\n                                <!--                    :column-menu=\"false\"-->\n                                <!--                    :headerAttributes=\"{ style: 'background-color: #EDF1F5;', class: 'text-center'\t}\"-->\n                                <!--                    :attributes=\"{style: 'text-align: center'}\"/>-->\n                                <kendo-grid-column\n                                    :field=\"'transactionDate'\"\n                                    :title=\"$t('date')\"\n                                    :width=\"120\"\n                                    :sortable=\"false\"\n                                    :group-footer-template=\"$t('total')\"\n                                    :template=\"dateFormat\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'name'\"\n                                    :attributes=\"{class:'tb_name_td'}\"\n                                    :title=\"$t('name')\"\n                                    :width=\"200\"\n                                    :sortable=\"false\"\n                                    :filterable-multi=\"true\"\n                                    :filterable-search=\"true\"\n                                    :template=\"'<span>#=name#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'transactionType'\"\n                                    :title=\"$t('type')\"\n                                    :width=\"120\"\n                                    :sortable=\"false\"\n                                    :template=\"'<span>#=transactionType#</span>'\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'referenceNo'\"\n                                    :title=\"$t('num')\"\n                                    :width=\"150\"\n                                    :sortable=\"false\"\n                                    :template=\"referenceTemplate\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>\n                                <!--                                <kendo-grid-column-->\n                                <!--                                    :field=\"'referenceNo'\"-->\n                                <!--                                    :title=\"$t('ref_from')\"-->\n                                <!--                                    :width=\"180\"-->\n                                <!--                                    :template=\"referenceTemplate\"-->\n                                <!--                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>-->\n                                <!--                                <kendo-grid-column-->\n                                <!--                                    :field=\"'referenceNo'\"-->\n                                <!--                                    :title=\"$t('ref_to')\"-->\n                                <!--                                    :width=\"180\"-->\n                                <!--                                    :template=\"referenceTemplate\"-->\n                                <!--                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5, color: green !important' }\"/>-->\n                                <kendo-grid-column\n                                    :field=\"'exchangeSubTotal'\"\n                                    :title=\"$t('sub_total')\"\n                                    :width=\"200\"\n                                    :group-footer-template=\"'#= kendo.toString(sum, `n2`)#'\"\n                                    :aggregates=\"['sum']\"\n                                    :footerAttributes=\"{ style: 'text-align: right;'}\"\n                                    :attributes=\"{style: 'text-align: right; '}\"\n                                    :template=\"'<span>#=kendo.toString(exchangeSubTotal, decimalFormat)#</span>'\"\n                                    :headerAttributes=\"{ style: 'text-align: right;background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'exchangeDiscountTotal'\"\n                                    :title=\"$t('discount')\"\n                                    :width=\"150\"\n                                    :group-footer-template=\"'#= kendo.toString(sum, `n2`)#'\"\n                                    :aggregates=\"['sum']\"\n                                    :footerAttributes=\"{ style: 'text-align: right;'}\"\n                                    :attributes=\"{style: 'text-align: right; '}\"\n                                    :template=\"'<span>#=kendo.toString(exchangeDiscountTotal, decimalFormat)#</span>'\"\n                                    :headerAttributes=\"{ style: 'text-align: right;background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'exchangeAmount'\"\n                                    :title=\"$t('amount')\"\n                                    :width=\"200\"\n                                    :group-footer-template=\"'#= kendo.toString(sum, `n2`)#'\"\n                                    :aggregates=\"['sum']\"\n                                    :footerAttributes=\"{ style: 'text-align: right;'}\"\n                                    :attributes=\"{style: 'text-align: right; '}\"\n                                    :template=\"'<span>#=kendo.toString(exchangeAmount, decimalFormat)#</span>'\"\n                                    :headerAttributes=\"{ style: 'text-align: right;background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'segment.name'\"\n                                    :title=\"$t('segment')\"\n                                    :width=\"200\"\n                                    :sortable=\"false\"\n                                    :filterable-multi=\"true\"\n                                    :filterable-search=\"true\"\n                                    :attributes=\"{style: 'text-align: left; '}\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'location.name'\"\n                                    :title=\"$t('location')\"\n                                    :width=\"200\"\n                                    :sortable=\"false\"\n                                    :filterable-multi=\"true\"\n                                    :filterable-search=\"true\"\n                                    :attributes=\"{style: 'text-align: left; '}\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <kendo-grid-column\n                                    :field=\"'project.name'\"\n                                    :title=\"$t('project')\"\n                                    :width=\"200\"\n                                    :sortable=\"false\"\n                                    :filterable-multi=\"true\"\n                                    :filterable-search=\"true\"\n                                    :attributes=\"{style: 'text-align: left; '}\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n\n                                <!--                <kendo-grid-column-->\n                                <!--                    :field=\"'status'\"-->\n                                <!--                    :title=\"$t('progressing_status')\"-->\n                                <!--                    :width=\"180\"-->\n                                <!--                    :template=\"status\"-->\n                                <!--                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>-->\n                                <kendo-grid-column\n                                    :field=\"'status'\"\n                                    :title=\"$t('status')\"\n                                    :width=\"180\"\n                                    :sortable=\"false\"\n                                    :template=\"status\"\n                                    :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                                <!--                <kendo-grid-column-->\n                                <!--                    :field=\"''\"-->\n                                <!--                    :title=\"$t('action')\"-->\n                                <!--                    :width=\"100\"-->\n                                <!--                    :command=\"[{  text: 'Convert', click: goToConvert }]\"-->\n                                <!--                    :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>-->\n                            </kendo-grid>\n                        </template>\n                    </v-col>\n                </v-row>\n            </v-card>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\nimport InvoiceModel from \"@/scripts/invoice/model/Invoice\";\nimport kendo from \"@progress/kendo-ui\";\nimport LinkTemplate from \"@/components/kendo_templates/LinkTemplate\";\n\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\")\nconst invoiceModel = new InvoiceModel({})\n\nimport JSZip from \"jszip\";\n\nwindow.JSZip = JSZip;\nexport default {\n    name: \"SaleTransaction\",\n    components: {\n        LoadingMe: () => import(`@/components/Loading`),\n        'app-datepicker': () => import(`@/components/custom_templates/DatePickerComponent`)\n    },\n    data: () => ({\n        startDate: new Date().toISOString().substr(0, 10),\n        endDate: new Date().toISOString().substr(0, 10),\n        dateSorters: ['Today', 'This Week', 'This Month', 'This Year'],\n        mDateSorter: 'Today',\n        showLoading: false,\n        transactions: [],\n        tranDS: [],\n        saleFormContent: {},\n        isLoaded: false,\n        invoice: invoiceModel,\n        totalRevenue: 0,\n        totalSaleLead: 0,\n        totalSaleQuote: 0,\n        totalSaleOrder: 0,\n        group: {field: 'name'},\n        aggregateDefinition:\n            [{field: 'exchangeAmount', aggregate: 'sum'},\n                {field: 'exchangeSubTotal', aggregate: 'sum'},\n                {field: 'exchangeDiscountTotal', aggregate: 'sum'},],\n    }),\n    methods: {\n        pdfExport: function (e) {\n            // const pivot = this.$refs.gridTransactionDS.kendoWidget()\n            // pivot.saveAsPDF()\n            window.console.log('pdfExport')\n            window.console.log(e.data);\n        },\n        pageChangeHandler: function (event) {\n            alert(\"change\", event);\n        },\n        onSorterChanges(val) {\n            let today = new Date()\n            switch (val) {\n                case \"Today\":\n                    this.startDate = kendo.toString(today, 'yyyy-MM-dd')\n                    this.endDate = kendo.toString(today, 'yyyy-MM-dd')\n\n                    break\n                case \"This Week\":\n                    var first = today.getDate() - today.getDay(),\n                        last = first + 6\n\n                    this.startDate = kendo.toString(new Date(today.setDate(first)), 'yyyy-MM-dd')\n                    today = new Date()\n                    this.endDate = kendo.toString(new Date(today.setDate(last)), 'yyyy-MM-dd')\n\n                    break\n                case \"This Month\":\n                    this.startDate = kendo.toString(new Date(today.getFullYear(), today.getMonth(), 1), 'yyyy-MM-dd')\n                    this.endDate = kendo.toString(new Date(today.getFullYear(), today.getMonth(), 31), 'yyyy-MM-dd')\n\n                    break\n                case \"This Year\":\n                    this.startDate = kendo.toString(new Date(today.getFullYear(), 0, 1), 'yyyy-MM-dd')\n                    this.endDate = kendo.toString(new Date(today.getFullYear(), 11, 31), 'yyyy-MM-dd')\n\n                    break\n                default:\n                    this.startDate = \"\"\n                    this.endDate = \"\"\n            }\n        },\n        numberFormat(value) {\n            return kendo.toString(value, `n${this.saleFormContent.decimal}`)\n        },\n        referenceTemplate(data) {\n            let url = ''\n            if (data.type === 'Invoice') {\n                url = `invoice_view/${data.id}`\n            } else if (data.type === 'Sale Deposit') {\n                url = `sale_deposit_view/${data.id}`\n            } else if (data.type === 'Purchase') {\n                url = `credit_purchase_view/${data.id}`\n            } else if (data.type === 'Sale Quote') {\n                url = `sale_quote_view/${data.id}`\n            } else if (data.type === 'Cash Receipt') {\n                url = `cash_receipt_view/${data.id}`\n            } else if (data.type === 'Sale Order') {\n                url = `sale_order_view/${data.id}`\n            } else if (data.type === 'Purchase Deposit') {\n                url = `purchase_deposit_view/${data.id}`\n            } else if (data.type === 'Credit Memo') {\n                url = `sale_return_view/${data.id}`\n            } else if (data.type === 'Debit Memo') {\n                url = `purchase_return_view/${data.id}`\n            } else if (data.type === 'Cash Payment') {\n                url = `cash_payment_view/${data.id}`\n            } else if (data.type === 'Sale Lead') {\n                url = `lead/${data.id}`\n            }\n            const refFrom = data.refFrom || []\n            const refTo = data.refTo || []\n            let args = {\n                text: data.referenceNo,\n                related: (!!refFrom.length > 0 || !!refTo.length > 0),\n                url: url,\n                data: data,\n            }\n            window.console.log('related', refFrom, !!refFrom.length > 0)\n            return {\n                template: LinkTemplate,\n                templateArgs: args\n            }\n        },\n        goToConvert(e) {\n            this.newClick = false\n            e.preventDefault()\n            // let grid = kendo.jQuery(\"#gridAddress\").data(\"kendoGrid\")\n            // let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"))\n            // this.address = dataItem\n            // this.mCountry = dataItem.country\n            // this.dialogM2 = true\n        },\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.gridTransactionDS.kendoWidget(),\n                index = ds.indexOf(dataItem)\n            return index + 1\n        },\n        async loadTransactions() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    this.showLoading = true\n                    billingHandler.list().then(res => {\n                        if (res.data.statusCode === 200) {\n                            window.console.log(res)\n                            this.transactions = res.data.data\n                            const result = res.data.result\n                            this.totalRevenue = kendo.toString(result.Revenue, result.decimalFormat)\n                            this.totalSaleLead = kendo.toString(result.SaleLead, result.decimalFormat)\n                            this.totalSaleOrder = kendo.toString(result.SaleOrder, result.decimalFormat)\n                            this.totalSaleQuote = kendo.toString(result.SaleQuote, result.decimalFormat)\n                        }\n                        this.showLoading = false\n                    })\n                }, 10);\n            })\n        },\n\n        async searchTransaction(type) {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    this.showLoading = true\n                    const startDate = this.startDate\n                    const endDate = this.endDate\n                    let strFilter = ''\n                    if (type !== '') {\n                        strFilter = '?start=' + startDate + '&end=' + endDate + '&type=' + type\n                    } else {\n                        strFilter = '?start=' + startDate + '&end=' + endDate\n                    }\n\n                    billingHandler.list(strFilter).then(res => {\n                        if (res.data.statusCode === 200) {\n\n                            window.console.log('im search', res)\n                            this.transactions = res.data.data\n                            const result = res.data.result\n                            this.totalRevenue = kendo.toString(result.Revenue, result.decimalFormat)\n                            this.totalSaleLead = kendo.toString(result.SaleLead, result.decimalFormat)\n                            this.totalSaleOrder = kendo.toString(result.SaleOrder, result.decimalFormat)\n                            this.totalSaleQuote = kendo.toString(result.SaleQuote, result.decimalFormat)\n                        }\n                        this.showLoading = false\n                    })\n                }, 10);\n            })\n        },\n        async searchData() {\n            const type = ''\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    // this.showLoading = true\n                    const startDate = this.startDate\n                    const endDate = this.endDate\n                    let strFilter = ''\n                    if (type !== '') {\n                        strFilter = '?start=' + startDate + '&end=' + endDate + '&type=' + type\n                    } else {\n                        strFilter = '?start=' + startDate + '&end=' + endDate\n                    }\n                    let vue = this\n                    this.tranDS = new kendo.data.DataSource({\n                        serverFiltering: true,\n                        transport: {\n                            read: {\n                                url: 'https://dev-apis.banhji.com/invoice-billings/invoice/institute/institute-0ab24220-808d-11ea-9131-1d2fe2a803b1/list/' + strFilter,\n                                type: 'GET',\n                                // beforeSend: function (req) {\n                                //     // req.setRequestHeader('Authorization', auth);\n                                // }\n                            },\n                            parameterMap: function (data, type) {\n                                window.console.log(data, type, 'TypeParameter')\n                                // if type is \"read\", then data is { foo: 1 }, we also want to add { \"bar\": 2 }\n                                // return kendo.stringify($.extend({\"bar\": 2}, data));\n                            },\n                            dataType: \"json\",\n                        },\n                        change: function () {\n                            // log(this.data());\n                        },\n                        schema: {\n                            model: {\n                                id: \"id\"\n                            },\n                            data: function (response) {\n                                return response.data\n                            },\n                            total: function (response) {\n                                window.console.log(response.total)\n                                return response.total\n                            }\n                        },\n                        pageable: true,\n                        pageSize: 20,\n                        serverPaging: true,\n                        page: 1,\n                        requestStart: function () {\n                            vue.loading = true\n                        },\n                        requestEnd: function () {\n                            vue.loading = false\n                        }\n                    })\n                }, 10);\n            })\n        },\n        dateFormat(dataItem) {\n            return kendo.toString(new Date(dataItem.transactionDate), `${this.invoice.dateFormat}`)\n        },\n        // linkTo(dataItem) {\n        //     window.console.log(dataItem)\n        //     this.$router.push({\n        //         path: 'invoice' + `/${dataItem.id}`,\n        //         params: {id: dataItem.id},\n        //         query: {type: 'edit'}\n        //     })\n        // },\n        status(dataItem) {\n            let status = '', type = dataItem.type || ''\n            switch (dataItem.status) {\n                case 1:\n                    status = 'Open'\n                    break\n                case 2:\n                    if (type === 'Sale Lead') {\n                        status = 'Applied'\n                    } else {\n                        status = 'Partially Paid'\n                    }\n                    break\n                case 3:\n                    status = 'Paid'\n                    break\n                case 4:\n                    status = 'Void'\n                    break\n            }\n            return status\n        },\n        callback() {\n            if (this.$route.params !== null && this.$route.params.hasOwnProperty('data')) {\n                const data = this.$route.params.data\n                if (data.transactionType === 'delete') {\n                    this.loadTransactions()\n                }\n            }\n            window.console.log('im changed', this.$route.params)\n        },\n        // tranDS: function () {\n        //     let vue = this\n        //     const startDate = this.startDate\n        //     const endDate = this.endDate\n        //     let strFilter = ''\n        //     strFilter = '?start=' + startDate + '&end=' + endDate\n        //     return new kendo.data.DataSource({\n        //         transport: {\n        //             read: {\n        //                 url: 'https://dev-apis.banhji.com/invoice-billings/invoice/institute/institute-0ab24220-808d-11ea-9131-1d2fe2a803b1/list/' + strFilter,\n        //                 type: 'GET',\n        //                 dataType: 'json'\n        //             }\n        //         },\n        //         schema: {\n        //             total: function (response) {\n        //                 return response.total\n        //             },\n        //             data: function (response) {\n        //                 return response.data\n        //             },\n        //             // total: function (response) {\n        //             //     return response.total\n        //             // }\n        //         },\n        //         pageable: true,\n        //         pageSize: 20,\n        //         serverPaging: true,\n        //         // testing the change event handler\n        //         change: function (e) {\n        //             let data = this.data()\n        //             window.console.log(data, e)\n        //         },\n        //         requestStart: function () {\n        //             vue.loading = true\n        //         },\n        //         requestEnd: function () {\n        //             vue.loading = false\n        //         }\n        //     })\n        // },\n    },\n    async mounted() {\n        this.group = [\n            {\n                field: \"name\",\n                aggregates: this.aggregateDefinition,\n            }\n        ]\n        await this.searchTransaction('')\n    },\n    computed: {\n        // tranDS: function () {\n        //     let vue = this\n        //     const startDate = this.startDate\n        //     const endDate = this.endDate\n        //     let strFilter = ''\n        //     strFilter = '?start=' + startDate + '&end=' + endDate\n        //     return new kendo.data.DataSource({\n        //         transport: {\n        //             read: {\n        //                 url: 'https://dev-apis.banhji.com/invoice-billings/invoice/institute/institute-0ab24220-808d-11ea-9131-1d2fe2a803b1/list/' + strFilter,\n        //                 type: 'GET',\n        //                 dataType: 'json'\n        //             }\n        //         },\n        //         schema: {\n        //             total: function (response) {\n        //                 return response.total\n        //             },\n        //             data: function (response) {\n        //                 return response.data\n        //             },\n        //             // total: function (response) {\n        //             //     return response.total\n        //             // }\n        //         },\n        //         pageable: true,\n        //         pageSize: 20,\n        //         serverPaging: true,\n        //         // testing the change event handler\n        //         change: function (e) {\n        //             let data = this.data()\n        //             window.console.log(data, e)\n        //         },\n        //         requestStart: function () {\n        //             vue.loading = true\n        //         },\n        //         requestEnd: function () {\n        //             vue.loading = false\n        //         }\n        //     })\n        // },\n    },\n    watch: {\n        '$route': 'callback'\n    }\n};\n</script>\n<style scoped>\n.k-pdf-export .k-grid {\n    font-family: \"DejaVu Sans\", \"Arial\", sans-serif;\n}\n\n/* Hide the Grid header and pager during export */\n.k-pdf-export .k-grid-toolbar,\n.k-pdf-export .k-pager-wrap {\n    display: none;\n}\n\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/InsightNpo.vue?vue&type=style&index=0&id=e4abd42e&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/customers/InsightNpo.vue","mtime":1638499443187},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Cgoudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHsKICBoZWlnaHQ6IDM4cHggIWltcG9ydGFudDsKICBib3JkZXItYm90dG9tOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMik7Cn0KCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlCiAgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyCiAgPiB0YWJsZQogID4gdGJvZHkKICA+IHRyOmhvdmVyOm5vdCgudi1kYXRhLXRhYmxlX19leHBhbmRlZF9fY29udGVudCk6bm90KC52LWRhdGEtdGFibGVfX2VtcHR5LXdyYXBwZXIpIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9CgovKi5oX2tjaGFydC5rLWNoYXJ0eyovCi8qICAgIGhlaWdodDogMjUwcHggIWltcG9ydGFudDsqLwovKn0qLwouay1jaGFydCB7CiAgaGVpZ2h0OiAxNjBweDsKICBmb250LWZhbWlseTogIk5pcmFkZWktTWVkaXVtIiwgc2VyaWYgIWltcG9ydGFudDsKfQoKLmRhcmtfZ3JleSB7CiAgY29sb3I6ICM3ZTdhN2E7Cn0KCi5saW5lXzE2IHsKICBsaW5lLWhlaWdodDogMjBweDsKfQoKQG1lZGlhIChtYXgtd2lkdGg6IDU3NnB4KSB7Cn0K"},{"version":3,"sources":["InsightNpo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmuBA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"InsightNpo.vue","sourceRoot":"src/views/customers","sourcesContent":["<template>\n  <v-row class=\"\">\n    <v-col class=\"pb-0 pt-4\" sm=\"12\" cols=\"12\">\n      <v-row>\n        <v-col class=\"py-md-0 px-md-2\" sm=\"12\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            color=\"white\"\n            class=\"pa-4 pb-0 no_border\"\n            min-height=\"360px\"\n          >\n            <v-row>\n              <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                <h3\n                  class=\"font_20\"\n                  :class=\"{ line_28: this.$i18n.locale == 'kh' }\"\n                >\n                  {{ $t(\"fund_receipt\") }}\n                </h3>\n                <p class=\"mb-2\">\n                  {{ $t(\"for_current_year\") }}\n                </p>\n              </v-col>\n            </v-row>\n            <LoadingMe\n              :isLoading=\"showLoadingGraph\"\n              :fullPage=\"false\"\n              :myLoading=\"true\"\n              :type=\"'loading'\"\n            />\n            <chart\n              ref=\"chart\"\n              :legend-position=\"'bottom'\"\n              :legend-visible=\"false\"\n              :tooltip=\"tooltip\"\n              :series=\"seriesLine\"\n              :chartArea=\"chartArea\"\n              :category-axis-categories=\"categories_line\"\n              :value-axis=\"valueAxis_line\"\n              :theme=\"'sass'\"\n            />\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-row class=\"mt-0\">\n        <v-col class=\"py-0 pr-md-2\" sm=\"4\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 mt-4 no_border\"\n            min-height=\"267px\"\n            color=\"grayBg\"\n          >\n            <h3 class=\"font_20\" :class=\"{ line_34: this.$i18n.locale == 'kh' }\">\n              {{ $t(\"fund_receipts\") }}\n            </h3>\n            <p class=\"mb-0\">\n              {{ $t(\"by_types\") }}\n            </p>\n\n            <LoadingMe\n              :isLoading=\"showLoadingSaleAnalysis\"\n              :fullPage=\"false\"\n              :myLoading=\"true\"\n              :type=\"'loading'\"\n            >\n            </LoadingMe>\n\n            <chart\n              ref=\"chart\"\n              :legend-visible=\"false\"\n              :series-defaults-labels-visible=\"false\"\n              :series=\"saleChannelChart\"\n              :tooltip-template=\"tooltipTemplate\"\n              :chartArea=\"chartAreaChart\"\n              :tooltip-visible=\"true\"\n              :theme=\"'sass'\"\n            />\n          </v-card>\n        </v-col>\n        <v-col class=\"py-0 px-md-2\" sm=\"4\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 mt-4 no_border\"\n            min-height=\"300px\"\n            color=\"grayBg\"\n          >\n            <v-row>\n              <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                <h3\n                  class=\"font_20\"\n                  :class=\"{ line_34: this.$i18n.locale == 'kh' }\"\n                >\n                  {{ $t(\"fund_receipts\") }}\n                </h3>\n                <p class=\"mb-3\">\n                  {{ $t(\"by_donors\") }}\n                </p>\n                <LoadingMe\n                  :isLoading=\"showLoadingSaleFunel\"\n                  :fullPage=\"false\"\n                  :myLoading=\"true\"\n                  :type=\"'loading'\"\n                >\n                </LoadingMe>\n                <v-simple-table class=\"add_bg\">\n                  <template>\n                    <tbody>\n                      <tr>\n                        <td class=\"text-left\" style=\"width: 50%\">\n                          <span class=\"niradei_medium font_14 grey--text\">\n                            {{ $t(\"total_contracts\") }}\n                          </span>\n                        </td>\n                        <td class=\"text-right\">\n                          <span class=\"niradei_heavy font_18 dark_grey\">\n                            50,000\n                          </span>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td class=\"text-left\" style=\"width: 50%\">\n                          <span class=\"niradei_medium font_14 grey--text\">\n                            {{ $t(\"total_receipts\") }}\n                          </span>\n                        </td>\n                        <td class=\"text-right\">\n                          <span class=\"niradei_heavy font_18 dark_grey\">\n                            25,000\n                          </span>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td class=\"text-left\" style=\"width: 50%\">\n                          <span class=\"niradei_medium font_14 grey--text\">\n                            {{ $t(\"receipts\") }}\n                          </span>\n                        </td>\n                        <td class=\"text-right\">\n                          <span class=\"niradei_heavy font_18 dark_grey\">\n                            50%\n                          </span>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td class=\"text-left\" style=\"width: 50%\">\n                          <span class=\"niradei_medium font_14 grey--text\">\n                            {{ $t(\"remaining\") }}\n                          </span>\n                        </td>\n                        <td class=\"text-right\">\n                          <span class=\"niradei_heavy font_18 grey--text\">\n                            25,000\n                          </span>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </template>\n                </v-simple-table>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n        <v-col class=\"py-0 pl-md-2\" sm=\"4\" cols=\"12\">\n          <v-card\n            outlined\n            dense\n            class=\"pa-4 mt-4 no_border\"\n            min-height=\"300\"\n            color=\"grayBg\"\n          >\n            <h3 class=\"font_20\">{{ $t(\"project_ratio\") }}</h3>\n            <p class=\"mb-3\">\n              {{ $t(\"for_current_year\") }}\n            </p>\n             <v-simple-table class=\"add_bg\">\n                <LoadingMe\n                  :isLoading=\"showLoadingServiceProjectRatio\"\n                  :fullPage=\"false\"\n                  :myLoading=\"true\"\n                  :type=\"'loading'\"\n                />\n                <template>\n                  <tbody>\n                    <tr>\n                      <td class=\"text-leftpy-1\" style=\"width: 50%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"total_active_projects\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          000\n                        </span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td class=\"text-left\" style=\"width: 50%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"average_fund_per_project\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          20,0000\n                        </span>\n                      </td>\n                    </tr>     \n                    <tr>\n                      <td class=\"text-left\" style=\"width: 50%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"total_fund\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          10,000\n                        </span>\n                      </td>\n                    </tr>\n                    <!-- <tr>\n                      <td class=\"text-left pl-0 py-1\" style=\"width: 50%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"average_revenue_per_customer\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          {{\n                            numberFormat(avgRevenuePerProject, decimalFormat)\n                          }}\n                        </span>\n                      </td>\n                    </tr> -->\n                 \n                    <tr>\n                      <td class=\"text-left py-1\" style=\"width: 50%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"project_delivery\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right\">\n                        <span class=\"niradei_heavy font_18 grey--text\">\n                          {{ delivered }} %\n                        </span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td class=\"text-left  py-1\" style=\"width: 50%\">\n                        <span class=\"niradei_medium font_14 grey--text\">\n                          {{ $t(\"project_overrun\") }}\n                        </span>\n                      </td>\n                      <td class=\"text-right\">\n                        <span class=\"niradei_heavy font_18 dark_grey\">\n                          {{ overrun }} %\n                        </span>\n                      </td>\n                    </tr>\n                  </tbody>\n                </template>\n              </v-simple-table>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { i18n } from \"@/i18n\";\nimport { Chart } from \"@progress/kendo-charts-vue-wrapper\";\nimport kendo from \"@progress/kendo-ui\";\n\nconst billingHandler = require(\"@/scripts/invoice/handler/billingHandler\");\nconst dashboardHandler = require(\"@/scripts/dashboard/customer/handler/dashboardHandler\");\nexport default {\n  components: {\n    chart: Chart,\n    LoadingMe: () => import(`@/components/Loading`),\n  },\n  data: () => ({\n    //funnel chart\n    showLoadingServiceProjectRatio: false,\n    bidToWinRatio: 0,\n    openProject: 0,\n    avgRevenuePerProject: 0,\n    overrun: 0,\n    delivered: 0,\n    openProjects: 0,\n\n\n    funnel: [\n      {\n        field: \"value\",\n        colorField: \"chartColor\",\n        name: \"Total\",\n        data: [\n          { value: \"100\", chartColor: \"#c80000\" },\n          { value: \"70\", chartColor: \"#f44336\" },\n          { value: \"50\", chartColor: \"#ED1A3A\" },\n          { value: \"50\", chartColor: \"#ED1A3A\" },\n        ],\n        //     '100', '70', '50'],\n        // color: ['#00b050','#92d050','#212a35'],\n        border: {\n          width: 0,\n        },\n      },\n    ],\n\n    tooltip: {\n      visible: true,\n      template: \"#= series.name #: #= kendo.toString(value, `n2`) #\",\n    },\n    // line chart\n    seriesLine: [\n      {\n        type: \"line\",\n        name: \"Sale\",\n        data: [4, 2, 6, 8, 2, 8, 4, 2, 6, 8, 2, 8],\n        color: \"#4d4848\",\n      },\n      {\n        type: \"line\",\n        name: \"Purchase\",\n        data: [1, 6, 9, 5, 4, 5, 4, 2, 6, 8, 2, 8],\n        color: \"#c80000\",\n      },\n    ],\n    categories_line: [\n      i18n.t(\"jan\"),\n      i18n.t(\"feb\"),\n      i18n.t(\"mar\"),\n      i18n.t(\"apr\"),\n      i18n.t(\"may\"),\n      i18n.t(\"jun\"),\n      i18n.t(\"jul\"),\n      i18n.t(\"aug\"),\n      i18n.t(\"sep\"),\n      i18n.t(\"oct\"),\n      i18n.t(\"nov\"),\n      i18n.t(\"dec\"),\n    ],\n    chartArea: {\n      background: \"transparent\",\n      height: 280,\n    },\n    valueAxis_line: [\n      {\n        max: 1000,\n        // visible: false,\n        labels: {\n          format: \"{0}\",\n        },\n      },\n    ],\n    // pie chart\n    labelTemplate: \"#= category # #= value #%\",\n    tooltipTemplate: \"#= category # : #= value #%\",\n    chartAreaChart: {\n      background: \"transparent\",\n      height: 224,\n    },\n    saleChannelChart: [\n      {\n        type: \"pie\",\n        startAngle: 180,\n        data: [\n          {\n            category: i18n.t(\"credit_card\"),\n            value: 22,\n            color: \"#c80000\",\n          },\n          {\n            category: i18n.t(\"working_capital\"),\n            value: 45,\n            color: \"#f44336\",\n          },\n          {\n            category: i18n.t(\"investment\"),\n            value: 11,\n            color: \"#d85604\",\n          },\n          {\n            category: i18n.t(\"overdraft\"),\n            value: 22,\n            color: \"#e88d14\",\n          },\n        ],\n      },\n    ],\n    asOf: new Date().toISOString().substr(0, 10),\n    expectedBalance: 0,\n    decimalFormat: \"n2\",\n    lastUpdated: \"\",\n    expectedDue: [],\n    customerAsOfCount: 0,\n    overDueThisWeeks: 0,\n    inActive: 0,\n    newCustomer: 0,\n\n    showLoadingExpectedDue: false,\n    showLoadingRevenue: false,\n    showLoadingCustomer: false,\n    showLoadingGraph: false,\n    showLoadingSaleAnalysis: false,\n    showLoadingSaleFunel: false,\n    revenueBalance: 0,\n    revenueCustomers: 0,\n    revenueInvoices: 0,\n    revenueValuePerInvoice: 0,\n    baseCurrency: \"\",\n\n    mostTermUsed: \"\",\n    avgRevenuePerCustomer: \"\",\n    saleOrderInvoiceToRatio: \"\",\n\n    dueThisWeekPExpense: 0,\n    dueThisWeekInvoice: 0,\n    overCreditLimit: 0,\n  }),\n  mounted: async function() {\n    await this.loadExpectedDue();\n    await this.dashboardReceivableOverviewCustomer();\n    await this.dashboardRevenue();\n    await this.dashboardSaleFunel();\n    await this.dashboardSaleAnalysis();\n    await this.dashboardSalePaymentGraph();\n    await this.dashboardReceivableOverview();\n    await this.dashboardSaleOverCreditLimit();\n    await this.dashboardServiceProjectRatio();\n  },\n  methods: {\n    async reloadData() {\n      await this.loadExpectedDue();\n      await this.dashboardReceivableOverviewCustomer();\n      await this.dashboardRevenue();\n      await this.dashboardSaleFunel();\n      await this.dashboardSaleAnalysis();\n      await this.dashboardSalePaymentGraph();\n      await this.dashboardReceivableOverview();\n      await this.dashboardSaleOverCreditLimit();\n      await this.dashboardServiceProjectRatio()\n    },\n    numberFormat(value, format) {\n      return kendo.toString(value, format);\n    },\n    numberFormatNoCurrency(value, format) {\n      return kendo.toString(value, format);\n    },\n    async loadExpectedDue() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf + \"&type=expected_due\";\n          this.showLoadingExpectedDue = true;\n          billingHandler.wcpReceivableOverviewList(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              const response = res.data.data[0];\n              this.expectedDue = response.lines;\n              this.decimalFormat = response.decimalFormat;\n              this.lastUpdated = response.lastUpdatedAt;\n              const paymentTerm = response.paymentTermUsed;\n              this.mostPaymentTermUsed = paymentTerm.name;\n              this.expectedBalance = this.numberFormat(\n                response.openBalance,\n                response.decimalFormat\n              );\n              this.showLoadingExpectedDue = false;\n            }\n          });\n        }, 10);\n      });\n    },\n    async dashboardReceivableOverviewCustomer() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingCustomer = true;\n          billingHandler\n            .dashboardReceivableOverviewCustomer(strFilter)\n            .then((res) => {\n              if (res.data.statusCode === 200) {\n                this.showLoadingCustomer = false;\n                const response = res.data.data;\n                this.customerAsOfCount = response.customerAsOfCount;\n                this.overDueThisWeeks = response.overDueThisWeeks;\n                this.newCustomer = response.newCustomer;\n              }\n            });\n        }, 10);\n      });\n    },\n    async dashboardRevenue() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingRevenue = true;\n          dashboardHandler.customerRevenue(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoadingRevenue = false;\n              const response = res.data.data;\n              this.revenueBalance = response.exchangeSubtotal || 0;\n              this.revenueCustomers = response.customers || 0;\n              this.revenueInvoices = response.invoices || 0;\n              this.revenueValuePerInvoice = response.valuePerInvoice || 0;\n              this.decimalFormat = response.decimalFormat;\n              this.baseCurrency = response.baseCurrency || \"\";\n              // window.console.log('response', response)\n            }\n          });\n        }, 10);\n      });\n    },\n    async dashboardSaleFunel() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingSaleFunel = true;\n          dashboardHandler.customerSaleFunel(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoadingSaleFunel = false;\n              const response = res.data.data;\n              const maxAxe = response.maxValue || 0;\n              const axeLength = parseInt(maxAxe).toString().length - 1;\n              const axeIncre = parseInt(\n                \"1\" + String(1).padStart(axeLength, \"0\")\n              );\n              this.funnel = [\n                {\n                  field: \"value\",\n                  colorField: \"chartColor\",\n                  name: \"Total\",\n                  data: response.series || [],\n                  border: {\n                    width: 0,\n                  },\n                },\n              ];\n              this.valueAxisFunnel = [\n                {\n                  max: (response.maxValue || 0) + axeIncre,\n                  line: {\n                    visible: false,\n                  },\n                  minorGridLines: {\n                    visible: false,\n                  },\n                  labels: {\n                    visible: true,\n                    font: \"10px\",\n                  },\n                },\n              ];\n            }\n          });\n        }, 10);\n      });\n    },\n    async dashboardSaleAnalysis() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingSaleAnalysis = true;\n          dashboardHandler.customerSaleAnalysis(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoadingSaleAnalysis = false;\n              const response = res.data.data;\n              const topTerm = response.topTermUsed || {};\n              this.mostTermUsed = topTerm.name || \"\";\n              this.avgRevenuePerCustomer = response.averageRevenue || 0;\n              this.saleOrderInvoiceToRatio = response.saleOrderRatio || 0;\n              const saleChannel = response.saleChannel || [];\n              let dataChart = [];\n              const colors = [\n                \"#c80000\",\n                \"#642828\",\n                \"#f44336\",\n                \"#522D2DFF\",\n                \"#d85604\",\n                \"#ED1A3A\",\n                \"#7a4141\",\n                \"#e88d14\",\n                \"#f1aa45\",\n              ];\n              let index = 0;\n              saleChannel.forEach((j) => {\n                dataChart.push({\n                  category: i18n.t(j.name),\n                  value: kendo.toString(\n                    j.saleChannelRatio,\n                    response.decimalFormat\n                  ),\n                  color: colors[index],\n                });\n                index += 1;\n                if (index > colors.length) {\n                  index = 0;\n                }\n              });\n              this.saleChannelChart = [\n                {\n                  type: \"pie\",\n                  startAngle: 180,\n                  data: dataChart,\n                },\n              ];\n            } else {\n              this.showLoadingSaleAnalysis = false;\n            }\n          });\n        }, 10);\n      });\n    },\n    async dashboardSalePaymentGraph() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingGraph = true;\n          dashboardHandler\n            .customerBalanceNPaymentGraph(strFilter)\n            .then((res) => {\n              if (res.data.statusCode === 200) {\n                this.showLoadingGraph = false;\n                const response = res.data.data;\n                const balance = response.balance || [];\n                const payment = response.payment || [];\n                const maxAxe = response.max || 0;\n                const axeLength = parseInt(maxAxe).toString().length - 1;\n                const axeIncre = parseInt(\n                  \"1\" + String(1).padStart(axeLength, \"0\")\n                );\n                this.seriesLine = [\n                  {\n                    type: \"line\",\n                    name: i18n.t(\"balance\"),\n                    data: balance,\n                    color: \"#4d4848\",\n                  },\n                  {\n                    type: \"line\",\n                    name: i18n.t(\"payment\"),\n                    data: payment,\n                    color: \"#c80000\",\n                  },\n                ];\n                this.valueAxis_line = [\n                  {\n                    max: maxAxe + axeIncre,\n                    labels: {\n                      format: \"{0}\",\n                    },\n                  },\n                ];\n              }\n            });\n        }, 10);\n      });\n    },\n\n    async dashboardReceivableOverview() {\n      this.showLoading2 = true;\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          billingHandler.dashboardReceivableOverview(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              const response = res.data.data;\n              this.dueThisWeekPExpense = response.dueThisWeekPExpense;\n              this.dueThisWeekInvoice = response.dueThisWeekInvoice;\n              this.showLoading2 = false;\n            }\n          });\n        }, 10);\n      });\n    },\n\n    async dashboardSaleOverCreditLimit() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingGraph = true;\n          dashboardHandler.customerOverCreditLimit(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoadingGraph = false;\n              const response = res.data.data;\n              this.overCreditLimit = response.overCreditLimit || 0;\n            }\n          });\n        }, 10);\n      });\n    },\n    async dashboardServiceProjectRatio() {\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(\"resolved\");\n          let strFilter = \"\";\n          strFilter = \"?asOf=\" + this.asOf;\n          this.showLoadingServiceProjectRatio = true;\n          dashboardHandler.serviceProjectRatio(strFilter).then((res) => {\n            if (res.data.statusCode === 200) {\n              this.showLoadingServiceProjectRatio = false;\n              const response = res.data.data;\n              this.bidToWinRatio = response.bidToWinRatio || 0;\n              this.openProject = response.bidToWinRatio || 0;\n              this.avgRevenuePerProject = response.avgRevenuePerProject || 0;\n              this.overrun = response.overrun || 0;\n              this.delivered = response.delivered || 0;\n              this.openProjects = response.openProject || 0;\n            } else {\n              this.showLoadingServiceProjectRatio = false;\n            }\n          });\n        }, 10);\n      });\n    },\n  },\n  computed: {},\n};\n</script>\n<style scoped>\n.theme--light.v-data-table {\n  background-color: transparent !important;\n}\n\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n  height: 38px !important;\n  border-bottom: thin solid rgba(0, 0, 0, 0.12);\n}\n\n.theme--light.v-data-table\n  > .v-data-table__wrapper\n  > table\n  > tbody\n  > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n  background-color: transparent !important;\n}\n\n/*.h_kchart.k-chart{*/\n/*    height: 250px !important;*/\n/*}*/\n.k-chart {\n  height: 160px;\n  font-family: \"Niradei-Medium\", serif !important;\n}\n\n.dark_grey {\n  color: #7e7a7a;\n}\n\n.line_16 {\n  line-height: 20px;\n}\n\n@media (max-width: 576px) {\n}\n</style>\n"]}]}
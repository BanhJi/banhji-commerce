{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/components/dropdownlist/VendorDropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/components/dropdownlist/VendorDropdown.vue","mtime":1638499442949},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RHJvcERvd25MaXN0fSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tZHJvcGRvd25zLXZ1ZS13cmFwcGVyJzsKaW1wb3J0IHtEYXRhU291cmNlfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tZGF0YXNvdXJjZS12dWUtd3JhcHBlcic7CmltcG9ydCBzdXBwbGllckhhbmRsZXIgZnJvbSAiQC9zY3JpcHRzL3N1cHBsaWVySGFuZGxlciI7CmltcG9ydCBTdXBwbGllck1vZGVsIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9TdXBwbGllciI7Ci8vIGltcG9ydCB7bWFwU3RhdGV9IGZyb20gInZ1ZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1ZlbmRvckRyb3Bkb3duTGlzdCcsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgJ2Ryb3Bkb3dubGlzdCc6IERyb3BEb3duTGlzdCwKICAgICAgICAnZGF0YXNvdXJjZSc6IERhdGFTb3VyY2UKICAgIH0sCiAgICBwcm9wczogewogICAgICAgIGluaXRWZW5kb3I6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgIH0sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2ZW5kb3I6IG51bGwsCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICB2ZW5kb3JzOiBbXSwKICAgICAgICAgICAgc3VwQmFzZVVybDogc3VwcGxpZXJIYW5kbGVyLnNlYXJjaCgpLAogICAgICAgIH0KICAgIH0sCiAgICAvLyBjb21wdXRlZDogbWFwU3RhdGUoewogICAgLy8gICAgIHNlZ21lbnRzOiBzdGF0ZSA9PiBzdGF0ZS5zZWdtZW50cy5hbGwKICAgIC8vIH0pLAogICAgbWV0aG9kczogewogICAgICAgIGFmdGVyRmV0Y2goanNvbikgewogICAgICAgICAgICB0aGlzLnZlbmRvcnMgPSBqc29uLmRhdGE7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuZHMua2VuZG9XaWRnZXQoKS5zZXREYXRhU291cmNlKHRoaXMudmVuZG9ycykKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uRmlsdGVyaW5nKGUpIHsKICAgICAgICAgICAgaWYgKGUuZmlsdGVyKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKGUuZmlsdGVyLnZhbHVlLCB0aGlzLnN1cEJhc2VVcmwpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKCcnLCB0aGlzLnN1cEJhc2VVcmwpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uQ2hhbmdlKGV2KSB7CiAgICAgICAgICAgIGlmIChldikgewogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IGV2LnNlbmRlci5zZWxlY3QoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IGV2LnNlbmRlci5kYXRhSXRlbShzZWxlY3RlZEluZGV4KS50b0pTT04oKTsKICAgICAgICAgICAgICAgIHRoaXMudmVuZG9yID0gbmV3IFN1cHBsaWVyTW9kZWwoc2VsZWN0ZWRJdGVtKQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnb25DaGFuZ2UnLCB0aGlzLnZlbmRvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGxvYWREYXRhKGZpbHRlciwgYmFzZVVybCkgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBjb25zdCB1cmwgPSBiYXNlVXJsICsgYD9maWx0ZXI9JHtmaWx0ZXJ9YDsKICAgICAgICAgICAgZmV0Y2godXJsKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHRoaXMuYWZ0ZXJGZXRjaCk7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sCiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBpbml0VmVuZG9yKCkgewogICAgICAgICAgICB0aGlzLnZlbmRvciA9IHRoaXMuaW5pdFZlbmRvcjsKICAgICAgICB9LAogICAgfSwKICAgIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5sb2FkRGF0YSgnJywgdGhpcy5zdXBCYXNlVXJsKTsKICAgIH0sCiAgICBhc3luYyBtb3VudGVkKCkgewogICAgICAgIC8qIEluaXRpYWwgb2JqICovCiAgICAgICAgdGhpcy52ZW5kb3IgPSB0aGlzLmluaXRWZW5kb3I7CiAgICAgICAgLy8gYXdhaXQgdGhpcy5sb2FkRGF0YSgnJywgdGhpcy5zdXBCYXNlVXJsKTsKICAgIH0KfQo="},{"version":3,"sources":["VendorDropdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VendorDropdown.vue","sourceRoot":"src/components/dropdownlist","sourcesContent":["<template>\n    <div class=\"mt-1\">\n        <dropdownlist\n            :auto-bind=\"true\"\n            :ref=\"'ds'\"\n            :data-source-ref=\"'datasource'\"\n            :data-text-field=\"'name'\"\n            :filter=\"'contains'\"\n            v-on:change=\"onChange\"\n            @filtering=\"onFiltering\"\n            :index=\"0\"\n            return-object\n            :data-value-field=\"'id'\"\n            :options-label=\"'Select a vendor...'\">\n        </dropdownlist>\n        <datasource ref=\"datasource\"\n                    :type=\"'json'\"\n                    :data=\"vendors\">\n        </datasource>\n    </div>\n</template>\n\n<script>\nimport {DropDownList} from '@progress/kendo-dropdowns-vue-wrapper';\nimport {DataSource} from '@progress/kendo-datasource-vue-wrapper';\nimport supplierHandler from \"@/scripts/supplierHandler\";\nimport SupplierModel from \"@/scripts/model/Supplier\";\n// import {mapState} from \"vuex\";\n\nexport default {\n    name: 'VendorDropdownList',\n    components: {\n        'dropdownlist': DropDownList,\n        'datasource': DataSource\n    },\n    props: {\n        initVendor: {\n            type: Object,\n        },\n    },\n    data() {\n        return {\n            vendor: null,\n            loading: false,\n            vendors: [],\n            supBaseUrl: supplierHandler.search(),\n        }\n    },\n    // computed: mapState({\n    //     segments: state => state.segments.all\n    // }),\n    methods: {\n        afterFetch(json) {\n            this.vendors = json.data;\n            this.$refs.ds.kendoWidget().setDataSource(this.vendors)\n        },\n        async onFiltering(e) {\n            if (e.filter) {\n                await this.loadData(e.filter.value, this.supBaseUrl)\n            } else {\n                await this.loadData('', this.supBaseUrl)\n            }\n        },\n        async onChange(ev) {\n            if (ev) {\n                const selectedIndex = ev.sender.select();\n                const selectedItem = ev.sender.dataItem(selectedIndex).toJSON();\n                this.vendor = new SupplierModel(selectedItem)\n                this.$emit('onChange', this.vendor);\n            }\n        },\n        loadData(filter, baseUrl) {\n            this.loading = true;\n            const url = baseUrl + `?filter=${filter}`;\n            fetch(url)\n                .then((response) => {\n                    if (response) {\n                        return response.json();\n                    }\n                })\n                .then(this.afterFetch);\n            this.loading = false;\n        },\n    },\n    watch: {\n        initVendor() {\n            this.vendor = this.initVendor;\n        },\n    },\n    async created() {\n        this.loadData('', this.supBaseUrl);\n    },\n    async mounted() {\n        /* Initial obj */\n        this.vendor = this.initVendor;\n        // await this.loadData('', this.supBaseUrl);\n    }\n}\n</script>"]}]}
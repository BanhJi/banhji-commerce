{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products/warehouses/Products.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/products/warehouses/Products.vue","mtime":1638499443291},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IHByb2R1Y3RIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3Byb2R1Y3RIYW5kbGVyIikKY29uc3QgY2F0ZWdvcnlIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL2NhdGVnb3J5SGFuZGxlciIpCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiV2FyZWhvdXNlIFByb2R1Y3QiLAogICAgY29tcG9uZW50czogewogICAgICAgIExvYWRpbmdNZTogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvTG9hZGluZycpLAogICAgICAgIC8vICdhcHAtZGF0ZXBpY2tlcic6IERhdGVQaWNrZXJDb21wb25lbnQsCiAgICB9LAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBzaG93TG9hZGluZzogZmFsc2UsCgogICAgICAgIGlzTG9hZGVkOiBmYWxzZSwKICAgICAgICAvLyBLZW5kbyBkYXRhU291cmNlCiAgICAgICAgc2NoZW1hRGVmaW5pdGlvbjogewogICAgICAgICAgICBtb2RlbDoge2lkOiAiaWQifQogICAgICAgIH0sCiAgICAgICAgLyogU29ydCBieSBhY2NvdW50IG51bWJlciAqLwogICAgICAgIHNvcnREZWZpbml0aW9uOiB7ZmllbGQ6ICJudW1iZXIifSwKICAgICAgICAvLyBHcm91cCBvcmRlciBieSBhY2NvdW50X3R5cGVfaWQgYXNjCiAgICAgICAgcHJvZHVjdHM6IFtdLAoKICAgICAgICBncmlkU2NoZW1hOiB7CiAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgICBpZDogImlkIgogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBncm91cERlZmluaXRpb246IHsKICAgICAgICAgICAgZmllbGQ6ICJwcm9kdWN0Lm5hbWUiLAogICAgICAgIH0sCiAgICAgICAgaW1nVVJMOiAnaHR0cHM6Ly9zMy1hcC1zb3V0aGVhc3QtMS5hbWF6b25hd3MuY29tL2ltYWdlcy5iYW5oamkvJywKICAgICAgICBjYXRlZ29yaWVzOiBbXSwKICAgICAgICBzZWFyY2g6ICcnLAogICAgICAgIG1DYXRlZ29yeTogJycsCiAgICB9KSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBsb2FkSW1hZ2UoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgaWYgKGRhdGFJdGVtLmhhc093blByb3BlcnR5KCdpbWFnZXMnKSkgewogICAgICAgICAgICAgICAgaWYgKGRhdGFJdGVtLmltYWdlcy5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5pbWdVUkwgKyBkYXRhSXRlbS5pbWFnZXMuZGVmYXVsdC50aHVtYgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiPGltZyB3aWR0aD0nNTAnIGhlaWdodD0nNTAnIHN0eWxlPSAnbWFyZ2luOiBhdXRvO2Rpc3BsYXk6IGJsb2NrOycgc3JjPSciICsgdXJsICsgIicgLz4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJycKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcm93TnVtYmVyVG1wbChkYXRhSXRlbSkgewogICAgICAgICAgICBsZXQgZHMgPSB0aGlzLiRyZWZzLmRhdGFTb3VyY2Uua2VuZG9XaWRnZXQoKSwKICAgICAgICAgICAgICAgIGluZGV4ID0gZHMuaW5kZXhPZihkYXRhSXRlbSk7CiAgICAgICAgICAgIHJldHVybiBpbmRleCArIDE7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbkNhdGVnb3J5Q2hhbmdlZCgpIHsKICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXNvbHZlZCcpOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1DYXRlZ29yeSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RIYW5kbGVyLmZpbHRlcih0aGlzLm1DYXRlZ29yeS5pZCwgdGhpcy5zZWFyY2gpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy52YXJpYW50cyA9IHJlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IHJlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBsb2FkQ2F0ZWdvcnkoKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeUhhbmRsZXIuZ2V0KCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gcmVzCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHRoaXMuY2F0ZWdvcmllcy5maWx0ZXIobSA9PiBtLnR5cGUubmFtZSA9PT0gJ1Byb2R1Y3QnKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXRlZ29yaWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubUNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaWVzWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2F0ZWdvcnlDaGFuZ2VkKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25sb2FkUHJvZHVjdCgpIHsKICAgICAgICAgICAgYXdhaXQgcHJvZHVjdEhhbmRsZXIuZ2V0KCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IHJlcwogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQ2F0ZWdvcnkoKQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICB9LAp9Owo="},{"version":3,"sources":["Products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Products.vue","sourceRoot":"src/views/products/warehouses","sourcesContent":["<template>\n    <v-row>\n        <v-col cols=\"12\" sm=\"12\">\n            <h2 class=\"mb-0\">{{ $t('products_list') }}</h2>\n\n            <!-- loading -->\n            <LoadingMe\n                :isLoading=\"showLoading\"\n                :fullPage=\"false\"\n                :myLoading=\"true\"/>\n\n            <v-row class=\"\">\n                <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n                    <v-text-field class=\"\"\n                                  outlined\n                                  :placeholder=\"$t('name')\"\n                                  append-icon=\"search\"\n                                  v-model=\"search\"\n                                  @change=\"onCategoryChanged\"\n                                  clearable/>\n                </v-col>\n                <v-col sm=\"3\" cols=\"12\" class=\"py-0\">\n                    <v-select class=\"\"\n                              tage=\"Product Category\"\n                              v-model=\"mCategory\"\n                              :items=\"categories\"\n                              item-value=\"id\"\n                              :item-text=\"item =>`${item.abbr} - ${item.name}`\"\n                              @change=\"onCategoryChanged\"\n                              return-object\n                              :placeholder=\"$t('category')\"\n                              clearable\n                              outlined/>\n                </v-col>\n\n            </v-row>\n\n            <div class=\"reports_table\">\n                <kendo-datasource ref=\"dataSource\"\n                                  :data=\"products\"\n                                  :schema=\"gridSchema\"\n                                  :server-paging=\"false\"\n                                  :group=\"groupDefinition\"/>\n                <kendo-grid id=\"grid\"\n                            class=\"grid-function\"\n                            :data-source-ref=\"'dataSource'\"\n                            :style=\"{width: '100%'}\"\n                            :noRecords=\"true\"\n                            :groupable=\"true\"\n                            :column-menu=\"true\"\n                            :pageable-numeric=\"false\"\n                            :pageable-previous-next=\"false\"\n                            :pageable-messages-display=\"'Showing {2} data items'\"\n                            :scrollable-virtual=\"true\">\n\n                    <kendo-grid-column\n                        :field=\"'name'\"\n                        :title=\"$t('name')\"\n                        :attributes=\"{class:'tb_name_td'}\"\n                        :width=\"150\"\n                        :template=\"'<span>#=name#</span>'\"\n                        :groupHeaderColumnTemplate=\"'#=value#'\"\n                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                    <kendo-grid-column\n                        :field=\"'images'\"\n                        :title=\"$t('image')\"\n                        :width=\"50\"\n                        :template=\"loadImage\"\n                        :headerAttributes=\"{ style: 'background-color: #EDF1F5' }\"/>\n                    <kendo-grid-column\n                        :field=\"'product.category.name'\"\n                        :title=\"$t('category')\"\n                        :template=\"'<span>#=product.category.name#</span>'\"\n                        :width=\"80\"\n                        :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :field=\"''\"\n                        :hidden=\"true\"\n                        :title=\"$t('warehouse')\"\n                        :width=\"80\"\n                        :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :field=\"''\"\n                        :hidden=\"true\"\n                        :title=\"$t('qty')\"\n                        :width=\"80\"\n                        :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :field=\"'sku'\"\n                        :title=\"$t('sku')\"\n                        :width=\"60\"\n                        :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :field=\"'uom.name'\"\n                        :title=\"$t('uom')\"\n                        :width=\"40\"\n                        :template=\"'<span>#=uom.name#</span>'\"\n                        :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                    <kendo-grid-column\n                        :field=\"'reOrderQty'\"\n                        :title=\"$t('recorder_point')\"\n                        :width=\"50\"\n                        :template=\"'<span>#=reOrderQty#</span>'\"\n                        :headerAttributes=\"{style: 'text-align: left; background-color: #EDF1F5'}\"/>\n                </kendo-grid>\n            </div>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\nconst productHandler = require(\"@/scripts/productHandler\")\nconst categoryHandler = require(\"@/scripts/categoryHandler\")\n\nexport default {\n    name: \"Warehouse Product\",\n    components: {\n        LoadingMe: () => import('@/components/Loading'),\n        // 'app-datepicker': DatePickerComponent,\n    },\n    data: () => ({\n        showLoading: false,\n\n        isLoaded: false,\n        // Kendo dataSource\n        schemaDefinition: {\n            model: {id: \"id\"}\n        },\n        /* Sort by account number */\n        sortDefinition: {field: \"number\"},\n        // Group order by account_type_id asc\n        products: [],\n\n        gridSchema: {\n            model: {\n                id: \"id\"\n            }\n        },\n        groupDefinition: {\n            field: \"product.name\",\n        },\n        imgURL: 'https://s3-ap-southeast-1.amazonaws.com/images.banhji/',\n        categories: [],\n        search: '',\n        mCategory: '',\n    }),\n    methods: {\n        loadImage(dataItem) {\n            if (dataItem.hasOwnProperty('images')) {\n                if (dataItem.images.hasOwnProperty('default')) {\n                    const url = this.imgURL + dataItem.images.default.thumb\n                    return \"<img width='50' height='50' style= 'margin: auto;display: block;' src='\" + url + \"' />\"\n                }\n            } else {\n                return ''\n            }\n        },\n        rowNumberTmpl(dataItem) {\n            let ds = this.$refs.dataSource.kendoWidget(),\n                index = ds.indexOf(dataItem);\n            return index + 1;\n        },\n        async onCategoryChanged() {\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    if (this.mCategory !== undefined) {\n                        this.isLoaded = true\n                        this.showLoading = true\n                        productHandler.filter(this.mCategory.id, this.search).then(res => {\n                            this.showLoading = false\n                            // this.variants = res\n                            this.products = res\n                            this.showLoading = false\n                            window.console.log(res)\n                        })\n                    }\n                }, 300);\n            })\n        },\n        async loadCategory() {\n            this.showLoading = true\n            new Promise(resolve => {\n                setTimeout(() => {\n                    resolve('resolved');\n                    categoryHandler.get().then(res => {\n                        this.showLoading = false\n                        this.categories = res\n                        this.categories = this.categories.filter(m => m.type.name === 'Product')\n                        if (this.categories.length > 0) {\n                            this.mCategory = this.categories[0]\n                            this.onCategoryChanged()\n                        }\n                    })\n                }, 300);\n            })\n        },\n        async onloadProduct() {\n            await productHandler.get().then(res => {\n                this.products = res\n                window.console.log(res)\n            })\n        },\n    },\n    async mounted() {\n        await this.loadCategory()\n    },\n    computed: {\n    },\n};\n</script>\n<style scoped>\n.purchases {\n    position: relative;\n    width: 100%;\n    background-color: #fff;\n    padding: 20px 20px 5px;\n}\n\n.report_filter {\n    background-color: #edf1f5;\n    padding: 0 20px 0px 20px;\n}\n\n.report_block .v-card.third {\n    background-color: #00b050;\n    border: none;\n    box-shadow: none;\n    color: #ffffff;\n    float: left;\n    width: 100%;\n}\n\n.report_block .v-card.third p.text {\n    text-align: left;\n    font-size: 17px;\n}\n\n.report_block .v-card.third p.number {\n    text-align: center;\n    font-size: 25px;\n    font-weight: 700;\n    margin-bottom: 0;\n}\n\n.dv_mt {\n    margin-top: 20px;\n}\n\n.report_block .left_card p:nth-child(2) {\n    width: 100%;\n    font-size: 19px;\n    font-family: \"Niradei-Bold\", serif;\n    padding: 7px 0 0 0;\n    text-align: right;\n}\n\n.attachment_table table tr th {\n    height: 55px !important;\n}\n\n@media (max-width: 576px) {\n    .dv_mt,\n    .dv_mt8 {\n        margin-top: 0;\n    }\n\n    .purchases {\n        margin-top: 0;\n    }\n}\n</style>\n"]}]}
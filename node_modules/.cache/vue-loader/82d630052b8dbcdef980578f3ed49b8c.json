{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/cash/CashMovement.vue?vue&type=style&index=0&id=0f0e19ab&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/src/views/banking/cash/CashMovement.vue","mtime":1638499443126},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-accounting-web-module/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouay1jaGFydCB7CiAgICBoZWlnaHQ6IDE4MHB4Owp9CgoudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Cgoudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHsKICAgIGhlaWdodDogMzJweCAhaW1wb3J0YW50OwogICAgYm9yZGVyLWJvdHRvbTogdGhpbiBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpICFpbXBvcnRhbnQ7Cn0KCi52LWRhdGEtdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyOmZpcnN0LWNoaWxkID4gdGQgewogICAgYm9yZGVyLXRvcDogdGhpbiBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpICFpbXBvcnRhbnQ7Cn0KCi50aGVtZS0tbGlnaHQudi1kYXRhLXRhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGJvZHkgPiB0cjpob3Zlcjpub3QoLnYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX2NvbnRlbnQpOm5vdCgudi1kYXRhLXRhYmxlX19lbXB0eS13cmFwcGVyKSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["CashMovement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiWA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"CashMovement.vue","sourceRoot":"src/views/banking/cash","sourcesContent":["<template>\n    <v-row>\n        <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n            <v-card color=\"white\" class=\" no_border\" elevation=\"0\">\n                <v-row>\n                    <v-col sm=\"12\" cols=\"12\" class=\"pt-0\">\n                        <h2 class=\"mb-1 font_20\">{{$t('cash_movement')}}</h2>\n                        <p class=\"mb-0\">{{$t('cash_movement_desc')}}</p>\n                    </v-col>\n                </v-row>\n\n                <v-row >\n                    <v-col sm=\"4\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense class=\"pa-3 rounded-4 no_border white--text\" color=\"secondary\" height=\"60px\">\n                            <h3 class=\"text-left text-uppercase font_12 flex-1\">{{$t('cash_in')}}</h3>\n                            <h3 class=\"text-right  font_20 flex-1 \">{{ Number(cashIn).toLocaleString() }}</h3>\n                        </v-card>\n                    </v-col>\n                    <v-col sm=\"4\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense class=\"pa-3 rounded-4  no_border white--text\" color=\"third\" height=\"60px\">\n                            <h3 class=\"text-left text-uppercase font_12 flex-1\">{{$t('cash_out')}}</h3>\n                            <h3 class=\"text-right font_20 flex-1 \">{{ Number(cashOut).toLocaleString() }}</h3>\n                        </v-card>\n                    </v-col>\n                    <v-col sm=\"4\" cols=\"12\" class=\"pt-0\">\n                        <v-card outlined dense class=\"pa-3 rounded-4  no_border black--text\" color=\"grayBg\" height=\"60px\">\n                            <h3 class=\"text-left text-uppercase font_12 flex-1\">{{$t('cash_balance')}}</h3>\n                            <h3 class=\"text-right font_20 flex-1\">{{ Number(cashBalance).toLocaleString() }}</h3>\n                        </v-card>\n                    </v-col>\n                </v-row>\n                <v-row>\n                    <v-col sm=\"9\" cols=\"12\" class=\"py-0\">\n                        <app-searchdate :initStartDate=\"startDate\" @emitStartDate=\"startDate = $event\"\n                                        :initEndDate=\"endDate\" @emitEndDate=\"endDate = $event\" />\n                    </v-col>\n                    <v-col sm=\"1\" cols=\"12\" class=\"py-1\">\n                        <v-btn class=\"btn_search\"  style=\"background-color: rgb(237, 241, 245)\" @click=\"search\">\n                            <i class=\"b-search\" style=\"font-size: 18px; color:#fff !important;\"/>\n                        </v-btn>\n                    </v-col>\n                </v-row>\n\n                <!-- loading -->\n                <LoadingMe \n                    :isLoading =\"showLoading\" \n                    :fullPage  =\"false\" \n                    type=\"loading\"\n                    :myLoading =\"true\"/>\n\n                <v-row >\n                    <v-col sm=\"12\" cols=\"12\" class=\"py-0\">\n                        <kendo-datasource ref=\"dataSource\"\n                            :data=\"generalLedgerList\"\n                            :group=\"groupDefinition\"\n                            :aggregate=\"aggregateDefinition\"\n                            :group-paging=\"true\"\n                            :page='1'\n                            :page-size='100'\n                            :total='0'>\n                        </kendo-datasource>\n\n                        <kendo-grid id=\"gridGL\" ref=\"gridGL\" class=\"custom_grid\" \n                            :data-source-ref=\"'dataSource'\"\n                            :groupable=\"true\"\n                            :sortable=\"true\"\n                            :column-menu=\"true\"\n                            :reorderable=\"true\"\n                            :resizable=\"true\"\n                            :noRecords=\"true\"\n                            :navigatable=\"true\"\n                            :pageable-always-visible=\"true\"\n                            :pageable-page-sizes=\"[20, 50, 100, 'all']\"\n                            :toolbar=\"['excel']\"\n                            :excel-file-name=\"'generalLedger.xlsx'\"\n                            :excel-filterable=\"true\">\n                            <kendo-grid-column \n                                :field=\"'transaction_type'\"\n                                :title=\"$t('type')\"\n                                :width=\"100\"\n                                :group-footer-template=\"'Total:'\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'journal_date'\"\n                                :title=\"$t('date')\"\n                                :width=\"100\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'journal_number'\" \n                                :title=\"$t('txn')\"\n                                :template=\"journalNumberTemplate\"\n                                :width=\"100\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'description'\"\n                                :title=\"$t('description')\"\n                                :width=\"150\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'primary_contact'\"\n                                :title=\"$t('name')\"\n                                :template=\"'<span>#=primary_contact.name#</span>'\"\n                                :width=\"140\"\n                                :hidden=\"true\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'account.number'\"\n                                :title=\"$t('acc_number')\"\n                                :width=\"140\"\n                                :hidden=\"true\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'account.name'\"\n                                :title=\"$t('acc_name')\"\n                                :width=\"140\"\n                                :hidden=\"true\"\n                                :group-header-template=\"'<span class=\\'text-bold text-black\\'>#=items[0].account.number# - #=items[0].account.name#</span>'\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'dr'\" \n                                :title=\"$t('cash_in')\"\n                                :format=\"'{0:#,##0.##;(#,##0.##)}'\"\n                                :width=\"110\"\n                                :aggregates=\"['sum']\"\n                                :group-footer-template=\"'<div class=\\'text-right\\'>#=kendo.toString(sum, `n`)#</div>'\"\n                                :headerAttributes=\"{\n                                    style: 'text-align: right;padding-right:35px;'\n                                }\"\n                                :attributes=\"{\n                                    style: 'text-align: right;'\n                                }\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'cr'\" \n                                :title=\"$t('cash_out')\"\n                                :format=\"'{0:#,##0.##;(#,##0.##)}'\"\n                                :width=\"110\"\n                                :aggregates=\"['sum']\"\n                                :group-footer-template=\"'<div class=\\'text-right\\'>#=kendo.toString(sum, `n`)#</div>'\"\n                                :headerAttributes=\"{\n                                    style: 'text-align: right;padding-right:35px;'\n                                }\"\n                                :attributes=\"{\n                                    style: 'text-align: right;'\n                                }\"\n                            />\n                            <kendo-grid-column \n                                :field=\"'balance'\"\n                                :title=\"$t('balance')\"\n                                :format=\"'{0:#,##0.##;(#,##0.##)}'\"\n                                :width=\"140\"\n                                :group-header-column-template=\"openBalanceTemplate\"\n                                :groupHeaderColumnAttributes=\"{\n                                    style: 'text-align: right; '\n                                }\"\n                                :headerAttributes=\"{\n                                    style: 'text-align: right;padding-right:35px; '\n                                }\"\n                                :attributes=\"{\n                                    style: 'text-align: right'\n                                }\"\n                            />\n                        </kendo-grid>\n                    </v-col>\n                </v-row>\n            </v-card>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\n    // import { i18n } from '@/i18n'\n    import kendo from '@progress/kendo-ui';\n\timport Helper from \"@/helper.js\";\n\timport { JournalEntryModel } from \"@/scripts/model/AppModels\";\n\n\t\n\tconst {\n\t\t// accountTypeHandler,\n\t\t// accountGroupHandler,\n\t\t// accountHandler,\n\t\tgeneralLedgerHandler,\n\t} = require(\"@/scripts/AppHandlers\");\n\n    export default {\n        components:{\n\t\t\t\"LoadingMe\": () => import('@/components/Loading'),\n\t\t\t'app-searchdate': () => import('@/components/custom_templates/SearchDate'),\n\t\t},\n        data: () => ({\n            startDate: \"\",\n\t\t\tendDate: \"\",\n            generalLedgerList: [],\n            cashIn: 0,\n            cashOut: 0,\n            cashBalance: 0,\n            // Kendo dataSource\n\t\t\tgroupDefinition: {\n                field: \"account.name\",\n                aggregates: [\n                    { field: \"dr\", aggregate: \"sum\" },\n\t\t\t\t\t{ field: \"cr\", aggregate: \"sum\" },\n                ],\n\t\t\t\tcompare: function(a, b) {\n\t\t\t\t\tif (a.items[0].account.number === b.items[0].account.number) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else if (a.items[0].account.number > b.items[0].account.number) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t}\n            },\n            aggregateDefinition: [\n                { field: \"dr\", aggregate: \"sum\" },\n\t\t\t\t{ field: \"cr\", aggregate: \"sum\" },\n\t\t\t\t{ field: \"balance\", aggregate: \"sum\" },\n\t\t\t],\n\t\t\t// LoadingMe\n\t\t\tshowLoading : false,\n        }),\n        methods: {\n            // Search\n\t\t\tsearch () {\n\t\t\t\tlet sdate = this.startDate,\n\t\t\t\t\tedate = this.endDate;\n\t\t\t\t\n\t\t\t\tif(sdate && edate){\n\t\t\t\t\tsdate = kendo.toString(new Date(sdate), 'yyyy-MM-dd') + 'T00:00:00.000Z';\n\n\t\t\t\t\tedate = new Date(edate);\n\t\t\t\t\tedate = kendo.toString(edate, 'yyyy-MM-dd') + 'T23:59:59.999Z';\n\t\t\t\t}else{\n\t\t\t\t\tsdate = 0;\n\t\t\t\t\tedate = 0;\n\t\t\t\t}\n\n\t\t\t\t// Empty dataSource\n\t\t\t\tlet ds = this.$refs.dataSource.kendoWidget();\n\t\t\t\tds.data([]);\n\n\t\t\t\tthis.showLoading = true;\n\t\t\t\tgeneralLedgerHandler.getGeneralLedgerReport({\n\t\t\t\t\tparams : {\n\t\t\t\t\t\tstart_date \t\t: sdate,\n\t\t\t\t\t\tend_date \t\t: edate,\n\t\t\t\t\t\t//account_type_code : 0,\n\t\t\t\t\t\t//account_group_uuid : 0,\n\t\t\t\t\t\t//account_uuid \t: 0, \n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.generalLedger = res.data;\n\t\t\t\t\tthis.bindData();\n\n\t\t\t\t\tif(this.hasQueryString){\n\t\t\t\t\t\t/* Set to default = false */\n\t\t\t\t\t\tthis.hasQueryString = false;\n\n\t\t\t\t\t\tthis.filterByAccount();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t// Bind Data\n\t\t\tbindData(){\n\t\t\t\tlet entries = [], sumDr = 0, sumCr = 0, cashBalance = 0;\n\t\t\t\t\n\t\t\t\tthis.generalLedger.forEach(element => {\n\t\t\t\t\tlet bal = element.openingBalance;\n\t\t\t\t\tif (element.account.account_type.nature.toLowerCase() === 'cr') {\n\t\t\t\t\t\tbal = bal * -1;\n\t\t\t\t\t}\n\n\t\t\t\t\telement.lines.forEach(value => {\n                        // Filter Cash Account Type Only\n                        if(value.account.account_type.code < 6){\n                            let je = new JournalEntryModel(value);\n\n                            // Balance\n                            if (value.account.account_type.nature.toLowerCase() === 'cr') {\n                                if (value.exchanged_amount > 0) {\n                                    bal = bal - value.exchanged_amount;\n                                } else {\n                                    bal = bal + (value.exchanged_amount * -1);\n                                }\n                            } else {\n                                bal = bal + value.exchanged_amount;\n                            }\n\n                            // Debit / Credit\n                            if (value.exchanged_amount > 0) {\n                                je.dr = value.exchanged_amount;\n                                je.cr = 0;\n                            } else {\n                                je.dr = 0;\n                                je.cr = value.exchanged_amount * -1;\n                            }\n                            \n                            // Sum dr/cr\n                            sumDr += je.dr;\n                            sumCr += je.cr;\n\n                            // Journal\n                        je.journal_uuid = value.journal.uuid;\n\t\t\t\t\t\tje.referral_transaction_uuid = value.journal.referral_transaction_uuid;\n\t\t\t\t\t\tje.journal_type = value.journal.journal_type;\n\t\t\t\t\t\tje.transaction_type = value.journal.transaction_type;\n\t\t\t\t\t\tje.journal_date = Helper.dateFormat(value.journal.journal_date);\n\t\t\t\t\t\tje.journal_number = value.journal.number;\n\t\t\t\t\t\tje.balance = bal;\n\t\t\t\t\t\tje.openBal = element.openingBalance;\n                            entries.push(je);\n                        }\n\t\t\t\t\t})\n\n                    cashBalance += bal;\n\t\t\t\t});\n\n                this.cashIn = sumDr;\n                this.cashOut = sumCr;\n                this.cashBalance = cashBalance;\n\n\t\t\t\t// Bind Entries\n\t\t\t\tthis.generalLedgerList = entries;\n                window.console.log(this.generalLedgerList)\n\t\t\t},\n            // Journal Number Template\n\t\t\tjournalNumberTemplate: (dataItem) => {\n\t\t\t\tif(dataItem.referral_transaction_uuid !== ''){\n\t\t\t\t\treturn Helper.linkTemplate(dataItem.journal_number, `${dataItem.transaction_type}/view/${dataItem.referral_transaction_uuid}`);\n\t\t\t\t}else if(dataItem.transaction_type == \"deposit\" || dataItem.transaction_type == \"withdrawal\" || dataItem.transaction_type == \"transfer\"  ){\n                    return Helper.linkTemplate(dataItem.journal_number, `cash_transactions/view/${dataItem.journal_uuid}`);\n                }\n                else{\n\t\t\t\t\treturn Helper.linkTemplate(dataItem.journal_number, `journal/view/${dataItem.journal_uuid}`);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Opening Balance Template\n\t\t\topenBalanceTemplate (data) {\n\t\t\t\tlet openBal = data.items[0].openBal;\n\t\t\t\tif (data.items[0].account.account_type.nature.toLowerCase() === 'cr') {\n\t\t\t\t\topenBal = openBal * -1;\n\t\t\t\t}\n\t\t\t\treturn '<div class=\"text-right text-bold text-black\">' + kendo.toString(openBal, '#,##0.##;(#,##0.##)') + '</div>'\n\t\t\t},\n        },\n    };\n</script>\n\n<style scoped>\n    .k-chart {\n        height: 180px;\n    }\n\n    .theme--light.v-data-table {\n        background-color: transparent !important;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr > td {\n        height: 32px !important;\n        border-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .v-data-table > .v-data-table__wrapper > table > tbody > tr:first-child > td {\n        border-top: thin solid rgba(0, 0, 0, 0.12) !important;\n    }\n\n    .theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n        background-color: transparent !important;\n    }\n</style>"]}]}
{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/RunPayroll.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/payroll/RunPayroll.vue","mtime":1638499443249},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYXlyb2xsUnVuIGZyb20gIkAvc2NyaXB0cy9tb2RlbC9QYXlyb2xsUnVuIjsKY29uc3QgcGF5cm9sbFJ1bk1vZGVsID0gbmV3IFBheXJvbGxSdW4oe30pCmNvbnN0IHBheXJvbGxIYW5kbGVyID0gcmVxdWlyZSgiQC9zY3JpcHRzL3BheXJvbGxIYW5kbGVyIikKY29uc3QgJCA9IHJlcXVpcmUoImpxdWVyeSIpCmNvbnN0IGNvb2tpZUpTID0gcmVxdWlyZSgiQC9jb29raWUuanMiKTsKY29uc3QgY29va2llID0gY29va2llSlMuZ2V0Q29va2llKCk7CmltcG9ydCBrZW5kbyBmcm9tICJAcHJvZ3Jlc3Mva2VuZG8tdWkiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiUnVuUGF5cm9sbCIsCiAgICBjb21wb25lbnRzOiB7CiAgICB9LAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBwYXlyb2xsUnVuOiBwYXlyb2xsUnVuTW9kZWwsCiAgICAgICAgcGF5cm9sbF9pZDogJycsCiAgICAgICAgcGF5cm9sbExpc3Q6IFtdLAogICAgICAgIGxvZ2dlZFVzZXI6IHsKICAgICAgICAgICAgaWQ6IGNvb2tpZS5jcmVhdG9yLAogICAgICAgICAgICBuYW1lOiBjb29raWUuZW1haWwKICAgICAgICB9LAogICAgfSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25TYXZlKCl7CiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVzb2x2ZWQnKTsKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBQYXlyb2xsUnVuKHsKICAgICAgICAgICAgICAgICAgICAiaWQiOiAgICAgICAgICAgICAgICAgICB0aGlzLnBheXJvbGxSdW4uaWQgPyB0aGlzLnBheXJvbGxSdW4uaWQgOiAnJywKICAgICAgICAgICAgICAgICAgICAibW9udGhPZiI6ICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAibnVtYmVyIjogICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAicmVmZXJlbmNlTnVtYmVyIjogICAgICAnJywKICAgICAgICAgICAgICAgICAgICAibGFzdE51bWJlciI6ICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAiYWJiciI6ICAgICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAicGF5TnVtYmVyIjogICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICAgICAgICAgICAgICAgICAncGF5cm9sbCcsCiAgICAgICAgICAgICAgICAgICAgInRvdGFsRW1wbG95ZWUiOiAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAidG90YWxHcm9zcyI6ICAgICAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICJ0b3RhbEJlbmVmaXRzIjogICAgICAgIDAsCiAgICAgICAgICAgICAgICAgICAgInRvdGFsRGVkdWN0aW9uIjogICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAidG90YWxUYXhQYXltZW50VVMiOiAgICAwLAogICAgICAgICAgICAgICAgICAgICJ0b3RhbFRheEJlbmVmaXQiOiAgICAgIDAsCiAgICAgICAgICAgICAgICAgICAgInRvdGFsTmV0U2FsYXJ5IjogICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAidG90YWxOZXRQYXkiOiAgICAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICJwYXlyb2xsTGlzdCI6ICAgICAgICAgIFtdLAogICAgICAgICAgICAgICAgICAgICJhZGp1c3RtZW50IjogICAgICAgICAgIFtdLAogICAgICAgICAgICAgICAgICAgICJzdGVwIjogICAgICAgICAgICAgICAgIDAsICAKICAgICAgICAgICAgICAgICAgICAiZmluYWwiOiAgICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAibG9nZ2VkVXNlciI6ICAgICAgICAgICB0aGlzLmxvZ2dlZFVzZXIgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHBheXJvbGxIYW5kbGVyLmNyZWF0ZVBheXJvbGwobmV3IFBheXJvbGxSdW4oZGF0YSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAyMDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cm9sbF9pZCA9IHJlc3VsdC5kYXRhLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdXRlclRvKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbm90aWZ5LmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZycpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHJvdXRlclRvKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6ICdwYXlyb2xsX3J1bicgKyBgLyR7dGhpcy5wYXlyb2xsX2lkfWAsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHtpZDogdGhpcy5wYXlyb2xsX2lkfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgbG9hZFBheXJvbGxzKCl7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7fQogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Jlc29sdmVkJykKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcGxveWVlID0gW10KICAgICAgICAgICAgICAgICAgICBwYXlyb2xsSGFuZGxlci5nZXRQYXlyb2xsTGlzdChwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXJvbGxMaXN0ID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMzAwKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZGF0YUJvdW5kOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zdCBncmlkID0ga2VuZG8ualF1ZXJ5KCIjZ3JpZCIpLmRhdGEoImtlbmRvR3JpZCIpCiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZS5zZW5kZXIuaXRlbXMoKQogICAgICAgICAgICBpdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxldCBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0odGhpcyk7CiAgICAgICAgICAgICAgICAkKCJ0cltkYXRhLXVpZD0nIiArIGRhdGFJdGVtLnVpZCArICInXSIpLmZpbmQoIi5pc1N0YXR1cyIpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhSXRlbS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdrLXN0YXRlLWRpc2FibGVkJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZ29FZGl0KGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBsZXQgZ3JpZCA9IGtlbmRvLmpRdWVyeSgiI2dyaWRQYXlyb2xsUnVuIikuZGF0YSgia2VuZG9HcmlkIik7CiAgICAgICAgICAgIGxldCBkYXRhSXRlbSA9IGdyaWQuZGF0YUl0ZW0oJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoInRyIikpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBwYXRoOiAncGF5cm9sbF9ydW4nICsgYC8ke2RhdGFJdGVtLmlkfWAsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHtpZDogZGF0YUl0ZW0uaWR9LAogICAgICAgICAgICAgICAgcXVlcnk6IHt0eXBlOiAnZWRpdCd9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMubG9hZFBheXJvbGxzKCkKICAgIH0sCiAgICBjb21wdXRlZDogeyAKICAgIH0sCiAgICB3YXRjaDogewogICAgICAgICckcm91dGUnOiAnbG9hZFBheXJvbGxzJwogICAgfSwKfTsK"},{"version":3,"sources":["RunPayroll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RunPayroll.vue","sourceRoot":"src/views/payroll","sourcesContent":["<template>\n    <v-row>\n        <v-col cols=\"12\" sm=\"12\">\n            <h2>{{$t('run_payroll')}}</h2>\n                <v-btn width=\"120\" color=\"primary\" @click=\"onSave\"\n                    class=\" white--text float-right text-capitalize ml-5\">\n                    {{ $t('create_new') }}\n                </v-btn>\n            <div class=\"reports_table\">\n                <kendo-datasource ref=\"dataSource\"\n                :data=\"payrollList\"/>\n                <kendo-grid id=\"gridPayrollRun\" class=\"grid-function\"\n                    :data-source-ref=\"'dataSource'\"\n                    v-on:databound=\"dataBound\"\n                    :editable=\"true\"\n                    :scrollable-virtual=\"true\">\n                <kendo-grid-column\n                    :width=\"200\"\n                    :field=\"'referenceNumber'\"\n                    :title=\"$t('reference_number')\"\n                    :template=\"'<span>#= referenceNumber#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: center'}\"/>\n                <kendo-grid-column\n                    :width=\"120\"\n                    :field=\"'monthOf'\"\n                    :title=\"$t('month_of')\"\n                    :template=\"'<span>#= monthOf#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"/>\n                <kendo-grid-column\n                    :width=\"150\"\n                    :field=\"'totalEmployee'\"\n                    :title=\"$t('total_employee')\"\n                    :template=\"'<span>#= totalEmployee#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: center'}\"/>\n                <kendo-grid-column\n                    :width=\"150\"\n                    :field=\"'totalGross'\"\n                    :title=\"$t('gross_salary')\"\n                    :template=\"'<span>#= kendo.toString(totalGross,`n2`)#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: right'}\"/>\n                <kendo-grid-column\n                     :width=\"100\"\n                    :field=\"'totalBenefits'\"\n                    :title=\"$t('benefits')\"\n                    :template=\"'<span>#= kendo.toString(totalBenefits,`n2`)#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: right'}\"/>\n                <kendo-grid-column\n                     :width=\"100\"\n                    :field=\"'totalTaxPaymentUS'\"\n                    :title=\"$t('tax')\"\n                    :template=\"'<span>#= kendo.toString(totalTaxPaymentUS,`n2`)#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: right'}\"/>\n                <kendo-grid-column\n                    :width=\"120\"\n                    :field=\"'totalNetSalary'\"\n                    :title=\"$t('net_salary')\"\n                    :template=\"'<span>#= kendo.toString(totalNetSalary,`n2`)#</span>'\"\n                    :headerAttributes=\"{style: 'background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: right'}\"/>\n                <kendo-grid-column\n                    :field=\"''\"\n                    :title=\"$t('action')\"\n                    :width=\"120\"\n                    :visible=\"true\"\n                    :command=\"[{className: 'k-state-disabled isStatus', iconClass: 'k-icon k-i-edit', text: 'Edit', click: goEdit }]\"\n                    :headerAttributes=\"{style: 'text-align: right; background-color: #EDF1F5'}\"\n                    :attributes=\"{ style: 'text-align: right'}\"/> \n            </kendo-grid>\n            </div>\n        </v-col>\n    </v-row>\n</template>\n\n<script>\n    import PayrollRun from \"@/scripts/model/PayrollRun\";\n    const payrollRunModel = new PayrollRun({})\n    const payrollHandler = require(\"@/scripts/payrollHandler\")\n    const $ = require(\"jquery\")\n    const cookieJS = require(\"@/cookie.js\");\n    const cookie = cookieJS.getCookie();\n    import kendo from \"@progress/kendo-ui\";\n    export default {\n        name: \"RunPayroll\",\n        components: {\n        },\n        data: () => ({\n            payrollRun: payrollRunModel,\n            payroll_id: '',\n            payrollList: [],\n            loggedUser: {\n                id: cookie.creator,\n                name: cookie.email\n            },\n        }),\n        methods: {\n            onSave(){\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved');\n                        let data = new PayrollRun({\n                        \"id\":                   this.payrollRun.id ? this.payrollRun.id : '',\n                        \"monthOf\":              '',\n                        \"number\":               '',\n                        \"referenceNumber\":      '',\n                        \"lastNumber\":           '',\n                        \"abbr\":                 '',\n                        \"payNumber\":            '',\n                        \"type\":                 'payroll',\n                        \"totalEmployee\":        0,\n                        \"totalGross\":           0,\n                        \"totalBenefits\":        0,\n                        \"totalDeduction\":       0,\n                        \"totalTaxPaymentUS\":    0,\n                        \"totalTaxBenefit\":      0,\n                        \"totalNetSalary\":       0,\n                        \"totalNetPay\":          0,\n                        \"payrollList\":          [],\n                        \"adjustment\":           [],\n                        \"step\":                 0,  \n                        \"final\":                '',\n                        \"loggedUser\":           this.loggedUser        \n                        });\n                        payrollHandler.createPayroll(new PayrollRun(data)).then(response => {\n                            if (response.data.statusCode === 201) {\n                                const result = response.data\n                                this.payroll_id = result.data.id\n                                this.routerTo()\n                            }\n                        }).catch(e => {\n                            this.$snotify.error('Something went wrong')\n                            this.errors.push(e)\n                        })\n                    }, 300);\n                })\n            },\n            routerTo(){\n                this.$router.push({\n                    path: 'payroll_run' + `/${this.payroll_id}`,\n                    params: {id: this.payroll_id}\n                })\n            },\n            loadPayrolls(){\n                let params = {}\n                new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve('resolved')\n                        this.employee = []\n                        payrollHandler.getPayrollList(params).then(res => {\n                            this.showLoading = true\n                            if (res.data.statusCode === 200) {\n                                this.showLoading = false\n                                this.payrollList = res.data.data\n                            }\n                        }).catch()\n                        {\n                            this.showLoading = false\n                        }\n                    }, 300)\n                })\n            },\n            dataBound: function (e) {\n                const grid = kendo.jQuery(\"#grid\").data(\"kendoGrid\")\n                const items = e.sender.items()\n                items.each(function () {\n                    let dataItem = grid.dataItem(this);\n                    $(\"tr[data-uid='\" + dataItem.uid + \"']\").find(\".isStatus\").each(function () {\n                        if (dataItem.status == 0) {\n                            $(this).removeClass('k-state-disabled')\n                        }\n                    })\n                })\n            },\n            goEdit(e) {\n                e.preventDefault();\n                let grid = kendo.jQuery(\"#gridPayrollRun\").data(\"kendoGrid\");\n                let dataItem = grid.dataItem($(e.currentTarget).closest(\"tr\"));\n                this.$router.push({\n                    path: 'payroll_run' + `/${dataItem.id}`,\n                    params: {id: dataItem.id},\n                    query: {type: 'edit'}\n                })\n            },\n        },\n        mounted() {\n            this.loadPayrolls()\n        },\n        computed: { \n        },\n        watch: {\n            '$route': 'loadPayrolls'\n        },\n    };\n</script>\n<style scoped>\n</style>"]}]}
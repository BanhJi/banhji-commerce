{"remainingRequest":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/project_budget/ProjectBudget.vue?vue&type=style&index=0&id=5dc202a6&scoped=true&lang=css&","dependencies":[{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/src/views/budgeting/project_budget/ProjectBudget.vue","mtime":1642390528855},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macos/Desktop/banhji-0.2/banhji-commerce/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5mdW5jdGlvbl9jb250ZW50IHsKCQlwYWRkaW5nOiAwIDI1cHggMjVweDsKCQlib3JkZXItYm90dG9tOiAwOwoJCWJhY2tncm91bmQtY29sb3I6ICNmZmYgIWltcG9ydGFudDsKfQoKQG1lZGlhIChtaW4td2lkdGg6IDEyNjRweCkgewoJCS5jb250YWluZXIgewoJCQkJbWF4LXdpZHRoOiAxMTg1cHg7CgkJCQkvKiBtYXgtd2lkdGg6IDEwODBweCAhaW1wb3J0YW50OyAqLwoJCX0KfQoKLmdyYXlCZyB7CgkJYmFja2dyb3VuZC1jb2xvcjogI0Y4RjhGOTsKfQoKQG1lZGlhIChtYXgtd2lkdGg6IDU3NnB4KSB7CgkJLm1iLTYgewoJCQkJbWFyZ2luLWJvdHRvbTogMCAhaW1wb3J0YW50OwoJCX0KfQoKLnNlY3Rpb24yIHsKCQlib3JkZXI6IDFweCBzb2xpZCAjZDZkN2Q4Owp9CgouYm9yZGVyX2dyZXkgewoJCWJvcmRlcjogMXB4IHNvbGlkICNkNmQ3ZDg7Cn0KCi5hdHRhY2htZW50X3RhYmxlIHsKCQl3aWR0aDogMTAwJTsKfQoKLmdyZXlEYXJrIHsKCQliYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOwp9CgoudXBsb2FkX2J0biB7CgkJd2lkdGg6IDU0JTsKCQltYXJnaW46IGF1dG87CgkJcGFkZGluZzogMTBweCA2cHg7CgkJdGV4dC1hbGlnbjogY2VudGVyOwoJCWNvbG9yOiAjZmZmZjsKCQlib3JkZXItcmFkaXVzOiAyMnB4OwoJCWJhY2tncm91bmQ6ICM5MmQwNTA7Cn0KCi5teV9ib3hfbWluX2hlaWhndCB7CgkJaGVpZ2h0OiAyOTVweDsKfQoKLndpZHRoXzEwMCB7CgkJd2lkdGg6IDEwMHB4Owp9Ci52LWRhdGEtdGFibGUuc2ltcGxlX3RhYmxlLnRoZW1lLS1saWdodHsKCQlib3JkZXItdG9wOiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoudi1kYXRhLXRhYmxlLnNpbXBsZV90YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCB7CgkJaGVpZ2h0OiAzMnB4ICFpbXBvcnRhbnQ7CgkJYm9yZGVyLWJvdHRvbTogdGhpbiBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpICFpbXBvcnRhbnQ7CgkJYm9yZGVyLXJpZ2h0OiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZS5zaW1wbGVfdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0aGVhZCA+IHRyID4gdGh7CgkJYm9yZGVyLWJvdHRvbTogdGhpbiBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpICFpbXBvcnRhbnQ7Cn0KLnRoZW1lLS1saWdodC52LWRhdGEtdGFibGUuc2ltcGxlX3RhYmxlID4gLnYtZGF0YS10YWJsZV9fd3JhcHBlciA+IHRhYmxlID4gdGhlYWQgPiB0cjpsYXN0LWNoaWxkID4gdGh7CgkJYm9yZGVyLXJpZ2h0OiB0aGluIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMikgIWltcG9ydGFudDsKfQoudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZS5zaW1wbGVfdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0aGVhZCA+IHRyID4gdGg6bGFzdC1jaGlsZCwKLnYtZGF0YS10YWJsZS5zaW1wbGVfdGFibGUgPiAudi1kYXRhLXRhYmxlX193cmFwcGVyID4gdGFibGUgPiB0Ym9keSA+IHRyID4gdGQ6bGFzdC1jaGlsZHsKCQlib3JkZXItcmlnaHQ6IG5vbmUgIWltcG9ydGFudDsKfQoudGhlbWUtLWxpZ2h0LnYtZGF0YS10YWJsZSA+IC52LWRhdGEtdGFibGVfX3dyYXBwZXIgPiB0YWJsZSA+IHRib2R5ID4gdHI6aG92ZXI6bm90KC52LWRhdGEtdGFibGVfX2V4cGFuZGVkX19jb250ZW50KTpub3QoLnYtZGF0YS10YWJsZV9fZW1wdHktd3JhcHBlcikgewoJCWJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi5wcmltYXJ5LS10ZXh0LnRleHQtbGVmdC52LWJ0bjpob3ZlciwKLnRoZW1lLS1saWdodC52LWJ0bjpob3Zlcjo6YmVmb3JlewoJCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["ProjectBudget.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAm0BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ProjectBudget.vue","sourceRoot":"src/views/budgeting/project_budget","sourcesContent":["<template>\n\t<v-app>\n\t\t<v-container>\n\t\t\t<v-row>\n\t\t\t\t\t<v-col cols=\"12\" sm=\"12\">\n\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\tclass=\"pa-4 no_border rounded-sm\"\n\t\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n\t\t\t\t\t\t\t\t\t\t\t<v-card elevation=\"0\" class=\"pt-2 mb-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h2 class=\"mb-0\">{{ $t(\"project_budget\") }}</h2>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"window.history.go(-1); return false;\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer; color: #333; font-size: 40px;\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"float-right\"\n\t\t\t\t\t\t\t\t\t\t\t\t>close\n\t\t\t\t\t\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<!-- Search -->\n\t\t\t\t\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-4 no_border pt-4 pb-3\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"grayBg\"\n\t\t\t\t\t\t\t\t\t\t\t\tmin-height=\"98px\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-col md=\"6\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"name\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"budget.name\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$t('name')\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-col md=\"6\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-reporting-language\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initLanguage=\"reportingLanguage\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitLanguage=\"reportingLanguage = $event\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@onChanged=\"onReportingLanguageChanges\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"fiscal_year\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-fiscal-date-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initFiscalDate=\"budget.fiscal_year\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitFiscalDate=\"budget.fiscal_year = $event\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"py-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"label\">{{ $t(\"project\") }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<app-project-dropdownlist\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:initProject=\"project\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@emitProject=\"project = $event\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-col md=\"3\" sm=\"4\" cols=\"12\" class=\"pl-9 py-6\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"confirmReload\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"load_account\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<!-- Dialog -->\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-dialog\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-title class=\"text-h5 grey lighten-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ selectedRow.account.number }} - {{ selectedRow.account.name }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-title>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-7\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"crossAmount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-text>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-divider></v-divider>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"dialog = false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"applyAcrossAmount\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEnter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-dialog>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<!-- Tree List -->\n\t\t\t\t\t\t\t\t\t\t\t<v-card\n\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"rounded-0 mt-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin-height=\"98px\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-col sm=\"12\" cols=\"12\" class=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Tree List -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"budgetLineTreeList\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-row>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<LoadingMe\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"loading\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:isLoading=\"showLoading\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:myLoading=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:fullPage=\"true\" />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-alert\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"alert\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdismissible\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"errorMessage\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-alert>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-capitalize  white--text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ $t(\"cancel\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-spacer />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-capitalize white--text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"onSaveOptionClick(SaveOption.SAVECLOSE)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"save_close\") }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</v-card-actions>\n\t\t\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t\t</v-form>\n\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t</v-col>\n\t\t\t</v-row>\n\t\t</v-container>\n\t</v-app>\n</template>\n\n<script>\nimport {i18n} from '@/i18n'\nimport kendo from \"@progress/kendo-ui\";\nimport Helper from \"@/helper.js\";\nimport BudgetModel from \"@/scripts/model/Budget.js\";\nimport BudgetLineModel from \"@/scripts/model/BudgetLine.js\";\nimport BudgetLineExtendedModel from \"@/scripts/model/BudgetLineExtended.js\";\nimport AccountModel from \"@/scripts/model/accounting/Account.js\";\nimport ProjectModel from \"@/scripts/model/Project.js\";\n\n/* Editor */\nimport NumberInputBoxEditor from \"@/scripts/kendo_editor/NumberInputBox\";\nimport AccountSecondaryEditor from \"@/scripts/kendo_editor/AccountSecondary\";\n\n/* Store */\nimport store from \"@/store\"\nconst institute = store.state.institute.institute\nimport { mapState } from 'vuex';\n\nconst budgetHandler = require(\"@/scripts/handler/workingcapital/budgetHandler.js\");\nconst { SaveOption } = require(\"@/scripts/default_setup/Collections\");\n\nexport default {\n\tname: \"ProjectBudget\",\n\tprops: {\n\t\tinitBudget: {\n\t\t\ttype: BudgetModel,\n\t\t},\n\t},\n\tcomponents: {\n\t\t\"LoadingMe\": () => import('@/components/Loading'),\n\t\t\"app-project-dropdownlist\": () => import('@/components/dropdownlist/Project'),\n\t\t\"app-fiscal-date-dropdownlist\": () => import('@/components/kendo_templates/FiscalDateDropDownList'),\n\t\t\"app-reporting-language\": () => import(\"@/components/kendo_templates/ReportingLanguageDropDownList\"),\n\t},\n\tdata: () => ({\n\t\t// Obj\n\t\tbudget: new BudgetModel(),\n\t\tbudgetLines: [],\n\t\tproject: new ProjectModel(),\n\t\tuser: Helper.getUser(),\n\t\t// Form validation\n\t\tvalid: true,\n\t\tisEdit: false,\n\t\talert: false,\n\t\terrorMessage: \"\",\n\t\tsaveMode: \"\",\n\t\tSaveOption: SaveOption,\n\t\t// Reporting Language\n\t\treportingLanguage: \"english\",\n\t\tfieldName : 'account.name',\n\t\t// LoadingMe\n\t\tshowLoading: false,\n\t\t/* Dialog */\n\t\tdialog: false,\n\t\tselectedRow: new BudgetLineExtendedModel(),\n\t\tcrossAmount: 0,\n\t\t/* Kendo */\n\t\tcolumns: [],\n\t\tbudgetLineDS : new kendo.data.TreeListDataSource({\n\t\t\t\tsort: [\n\t\t\t\t\t\t{ field: \"account.type_code\", dir: \"asc\" },\n\t\t\t\t\t\t{ field: \"number\", dir: \"asc\" },\n\t\t\t\t],\n\t\t\t\tschema: {\n\t\t\t\t\t\tmodel: {\n\t\t\t\t\t\t\t\tid: \"uuid\",\n\t\t\t\t\t\t\t\texpanded: true\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}),\n\t}),\n\tmethods: {\n\t\t// Initial Data\n\t\tinitialData() {\n\t\t\t\tif(this.initBudget){ // Edit Mode\n\t\t\t\t\t\tthis.isEdit = true;\n\t\t\t\t\t\tthis.budget = this.initBudget;\n\t\t\t\t\t\tthis.bindData();\n\t\t\t\t}else{ // Brand New\n\t\t\t\t\t\tthis.isEdit = false;\n\t\t\t\t\t\tthis.setDefaultData();\n\t\t\t\t}\n\t\t},\n\t\t/* Initial Tree List */\n\t\tinitialTreeList(){\n\t\t\t\tkendo.jQuery(\"#budgetLineTreeList\").kendoTreeList({\n\t\t\t\t\t\tdataSource: new kendo.data.TreeListDataSource(),\n\t\t\t\t\t\tdataBound: this.onDataBound,\n\t\t\t\t\t\teditable: \"incell\",\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tcolumnMenu: true,\n\t\t\t\t\t\tcolumns: this.columns,\n\t\t\t\t});\n\t\t},\n\t\t// Set default data\n\t\tsetDefaultData() {\n\t\t\t\tthis.budget = new BudgetModel({\n\t\t\t\t\t\tfiscal_year: institute.fiscalDate[0],\n\t\t\t\t});\n\t\t\t\t// this.setDefaultBudgetLine();\n\t\t},\n\t\t// Bind data for edit mode\n\t\tasync bindData() {\n\t\t\t/* Project */\n\t\t\tawait this.$store.dispatch('projects/getList');\n\t\t\tthis.project = new ProjectModel(this.projects.find(i => i.id === this.budget.project_uuid));\n\t\t\t\n\t\t\tthis.setDefaultBudgetLine();\n\t\t},\n\t\t/* Confirm Reload Accounts */\n\t\tconfirmReload() {\n\t\t\t\tif(this.budgetLineDS.total() === 0){\n\t\t\t\t\t\tthis.setDefaultBudgetLine();\n\t\t\t\t}else{\n\t\t\t\t\t\tthis.$swal({\n\t\t\t\t\t\t\t\ttitle: i18n.t('reload_data_?'),\n\t\t\t\t\t\t\t\ttext: i18n.t('this_will_reset_all_amount_to_zero'),\n\t\t\t\t\t\t\t\ticon: \"warning\",\n\t\t\t\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\t\t\t\tcancelButtonText: i18n.t('cancel'),\n\t\t\t\t\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\t\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\t\t\t\t\tconfirmButtonText: i18n.t('reload'),\n\t\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\t\t\tif (result.value) {\n\t\t\t\t\t\t\t\t\t\tthis.setDefaultBudgetLine();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t},\n\t\t// Set Budget Lines\n\t\tasync setDefaultBudgetLine (){\n\t\t\t\tthis.showLoading = true;\n\n\t\t\t\t// Account\n\t\t\t\tawait this.$store.dispatch('accounting/getAccounts');\n\t\t\t\t\n\t\t\t\tlet g = {};\n\t\t\t\tthis.accounts.forEach(value => {\n\t\t\t\t\t\tif(value.account_type.number >= 32 && value.account_type.number <= 43){//Filter PL accounts 32 to 43\n\t\t\t\t\t\t\t\tlet account = value;\n\n\t\t\t\t\t\t\t\t/* GROUPING */\n\t\t\t\t\t\t\t\t/* Top Level Account Type */\n\t\t\t\t\t\t\t\tif(!g[account.type_code]){\n\t\t\t\t\t\t\t\t\t\tg[account.type_code] = new BudgetLineExtendedModel({\n\t\t\t\t\t\t\t\t\t\t\t\tuuid : account.type_code,\n\t\t\t\t\t\t\t\t\t\t\t\tnumber : account.type_code,\n\t\t\t\t\t\t\t\t\t\t\t\taccount_uuid : account.uuid,\n\t\t\t\t\t\t\t\t\t\t\t\taccount : account.account_type,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Parent Level */\n\t\t\t\t\t\t\t\tlet thisAccountParentId = \"\";\n\t\t\t\t\t\t\t\tif(account.hasOwnProperty(\"parent_account\")){\n\t\t\t\t\t\t\t\t\t\tlet currentParentAccount = new AccountModel(account.parent_account), counter = 0;\n\t\t\t\t\t\t\t\t\t\twhile (currentParentAccount.number !== \"\") {\n\t\t\t\t\t\t\t\t\t\t\t\t/* Get account by uuid or banhji_account_number */\n\t\t\t\t\t\t\t\t\t\t\t\tlet accountParent = new AccountModel();\n\t\t\t\t\t\t\t\t\t\t\t\tif(currentParentAccount.uuid !== \"\"){/* Get by uuid */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taccountParent = new AccountModel(this.accounts.find((item) => item.uuid === currentParentAccount.uuid));\n\t\t\t\t\t\t\t\t\t\t\t\t}else{/* Get by banhji_account_number because default data has no uuid */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(currentParentAccount.banhji_account_number !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taccountParent = new AccountModel(this.accounts.find((item) => item.banhji_account_number === currentParentAccount.banhji_account_number));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t/* Set This Account Parent Id */\n\t\t\t\t\t\t\t\t\t\t\t\tif(counter === 0){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthisAccountParentId = accountParent.uuid;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t/* Find Next Parent */\n\t\t\t\t\t\t\t\t\t\t\t\tlet nextParent = new AccountModel();\n\t\t\t\t\t\t\t\t\t\t\t\tif(accountParent.hasOwnProperty(\"parent_account\")){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet parentOfAccountParent = new AccountModel(accountParent.parent_account);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(parentOfAccountParent.number !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(parentOfAccountParent.uuid !== \"\"){/* Get by uuid */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextParent = this.accounts.find((item) => item.uuid === parentOfAccountParent.uuid);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{/* Get by banhji_account_number because default data has no uuid */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(parentOfAccountParent.banhji_account_number !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextParent = this.accounts.find((item) => item.banhji_account_number === parentOfAccountParent.banhji_account_number);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t/* Set Parent Id */\n\t\t\t\t\t\t\t\t\t\t\t\tlet parentId = accountParent.type_code;\n\t\t\t\t\t\t\t\t\t\t\t\tnextParent = new AccountModel(nextParent);\n\t\t\t\t\t\t\t\t\t\t\t\tif(nextParent.number !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentId = nextParent.uuid;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Set next parent account */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.assign(currentParentAccount, nextParent);\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Set loop to end */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentParentAccount.number = \"\";\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t/* Add Parent Level */\n\t\t\t\t\t\t\t\t\t\t\t\tif(!g[accountParent.uuid]){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tg[accountParent.uuid] = new BudgetLineExtendedModel({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuuid : accountParent.uuid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taccount_uuid : accountParent.uuid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnumber : accountParent.number,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentId : parentId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taccount : accountParent,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t/* Increase Counter By 1 */\n\t\t\t\t\t\t\t\t\t\t\t\tcounter++;\n\t\t\t\t\t\t\t\t\t\t}/* End While Loop */\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Child Level */\n\t\t\t\t\t\t\t\tif(!g[account.uuid]){\n\t\t\t\t\t\t\t\t\t\tg[account.uuid] = new BudgetLineExtendedModel({\n\t\t\t\t\t\t\t\t\t\t\t\tuuid : account.uuid,\n\t\t\t\t\t\t\t\t\t\t\t\taccount_uuid : account.uuid,\n\t\t\t\t\t\t\t\t\t\t\t\tnumber : account.number,\n\t\t\t\t\t\t\t\t\t\t\t\taccount : account,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Set Parent Id Or Self Parent */\n\t\t\t\t\t\t\t\tif(thisAccountParentId !== \"\"){/* Child Level */\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].parentId = thisAccountParentId;\n\t\t\t\t\t\t\t\t}else{/* Child As Parent */\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].parentId = account.type_code; /* Self As Parent */\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 12 months with amount\n\t\t\t\t\t\t\t\tfor (let i = 0; i < 12; i++) {\n\t\t\t\t\t\t\t\t\t\t// Set Month Of\n\t\t\t\t\t\t\t\t\t\tlet sdate = new Date(this.budget.fiscal_year.start_date);\n\t\t\t\t\t\t\t\t\t\tsdate.setMonth(sdate.getMonth() + i);\n\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].monthly_amount.push({\n\t\t\t\t\t\t\t\t\t\t\t\tmonth_of : sdate.toISOString().substr(0, 7),\n\t\t\t\t\t\t\t\t\t\t\t\tamount : 0,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Matching Account */\n\t\t\t\t\t\t\t\tif(this.isEdit){\n\t\t\t\t\t\t\t\t\tlet bline = this.budget.lines.find((item) => item.account_uuid === value.uuid);\n\t\t\t\t\t\t\t\t\tif(bline){\n\t\t\t\t\t\t\t\t\t\t/* Reverse Nature */\n\t\t\t\t\t\t\t\t\t\tlet nature = 1; /* Default Naure is Dr = 1 */\n\t\t\t\t\t\t\t\t\t\tif(account.account_type.nature.toLowerCase() === \"cr\"){\n\t\t\t\t\t\t\t\t\t\t\tnature = -1;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].secondary_account = new AccountModel(this.secondaryAccounts.find((item) => item.uuid === bline.secondary_account_uuid));\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].note = bline.note;\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].amount = bline.amount * nature;\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].monthly_amount = bline.monthly_amount;\n\t\t\t\t\t\t\t\t\t\tg[account.uuid].monthly_amount.forEach(ma => {\n\t\t\t\t\t\t\t\t\t\t\tma.amount = ma.amount * nature;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t/* Bind Budget Line */\n\t\t\t\tthis.budgetLineDS.data(Object.values(g));\n\n\t\t\t\t/* Set New Datasource */\n\t\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\t\ttreeList.setDataSource(this.budgetLineDS);\n\n\t\t\t\tthis.showLoading = false;\n\t\t},\n\t\t// Row Template\n\t\tnameTmpl(dataItem){\n\t\t\t\t/* Name in language */\n\t\t\t\tlet name = dataItem.account.name;\n\t\t\t\tif(this.reportingLanguage === \"local\"){\n\t\t\t\t\t\tname = dataItem.account.local_name;\n\t\t\t\t}\n\n\t\t\t\t/* Define result */\n\t\t\t\tlet result = `<span>${dataItem.number} - ${name}</span>`;\n\n\t\t\t\t// /* Top Level */\n\t\t\t\tif(dataItem.parentId === null){\n\t\t\t\t\t\tresult = `<span style='font-weight: bolder;'>${name}</span>`;\n\t\t\t\t}\n\n\t\t\t\t/* Parent Level */\n\t\t\t\tif(dataItem.hasChildren && dataItem.number.length > 3){\n\t\t\t\t\t\tresult = `<span style='font-weight: bolder;'>${dataItem.number} - ${name}</span>`;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t},\n\t\tsecondaryAccountTmpl(dataItem) {\n\t\t\t\tlet result = \"\";\n\t\t\t\tif(dataItem.secondary_account.uuid !== ''){\n\t\t\t\t\t\tresult = `<span>${dataItem.secondary_account.number} - ${dataItem.secondary_account.name}</span>`;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t},\n\t\tcopyAcross(e){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\t\tthis.selectedRow = treeList.dataItem(kendo.jQuery(e.target).closest(\"tr\"));\n\n\t\t\t\tthis.dialog = true;\n\t\t},\n\t\tapplyAcrossAmount(){\n\t\t\t\tthis.dialog = false;\n\n\t\t\t\tthis.selectedRow.monthly_amount.forEach(value => {\n\t\t\t\t\t\tvalue.amount = kendo.parseFloat(this.crossAmount);\n\t\t\t\t});\n\t\t\t\tthis.selectedRow.amount = kendo.parseFloat(this.crossAmount) * 12;\n\n\t\t\t\t/* Refresh */\n\t\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\t\ttreeList.refresh();\n\n\t\t\t\tthis.crossAmount = 0;\n\t\t},\n\t\tgenerateColumn() {\n\t\t\t\tlet headerAttributes = {\n\t\t\t\t\t\tclass: \"table-header-cell\",\n\t\t\t\t\t\tstyle: \"font-weight: bold;text-align: center;padding-right: 35px; font-size: 14px\",\n\t\t\t\t},\n\t\t\t\tattributes = {\n\t\t\t\t\t\tclass: \"table-cell\",\n\t\t\t\t\t\tstyle: \"text-align: right; font-size: 14px\",\n\t\t\t\t};\n\n\t\t\t\tlet columns = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: this.fieldName,\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"account\"),\n\t\t\t\t\t\t\t\ttemplate: this.nameTmpl,\n\t\t\t\t\t\t\t\teditable: ()=>{ return false },\n\t\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t\t\theaderAttributes: headerAttributes,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: \"secondary_account\",\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"secondary_account\"),\n\t\t\t\t\t\t\t\ttemplate: this.secondaryAccountTmpl,\n\t\t\t\t\t\t\t\teditor: AccountSecondaryEditor,\n\t\t\t\t\t\t\t\thidden: !this.$store.state.accounting.secondaryAccount,\n\t\t\t\t\t\t\t\teditable: (dataItem)=>{\n\t\t\t\t\t\t\t\t\t\treturn !dataItem.hasChildren;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: \"note\",\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"note\"),\n\t\t\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: i18n.t(\"action\"),\n\t\t\t\t\t\t\t\tcommand: [{\n\t\t\t\t\t\t\t\t\t\tname: \"copycross\",\n\t\t\t\t\t\t\t\t\t\ttext: \"copy cross\",\n\t\t\t\t\t\t\t\t\t\tclick: this.copyAcross,\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\t/* 12 Months */\n\t\t\t\tfor (let i = 0; i < 12; i++) {\n\t\t\t\t\t\tcolumns.push({\n\t\t\t\t\t\t\t\tfield: `monthly_amount[${i}].amount`,\n\t\t\t\t\t\t\t\tformat: \"{0:n}\",\n\t\t\t\t\t\t\t\teditor: NumberInputBoxEditor,\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\tattributes: attributes,\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/* Total */\n\t\t\t\tcolumns.push({\n\t\t\t\t\t\tfield: \"amount\",\n\t\t\t\t\t\ttitle: i18n.t(\"total\"),\n\t\t\t\t\t\tformat: \"{0:n}\",\n\t\t\t\t\t\teditable: ()=>{return false},\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tattributes: attributes,\n\t\t\t\t});\n\n\t\t\t\t/* Set All Columns */\n\t\t\t\tthis.columns = columns;\n\t\t},\n\t\t/* On databound */\n\t\tonDataBound (e) {\n\t\t\t/* Titles */\n\t\t\tlet treeList = kendo.jQuery(\"#budgetLineTreeList\").data(\"kendoTreeList\");\n\t\t\tif(this.budget.fiscal_year){\n\t\t\t\tlet fiscalMonths = Helper.generateFiscalMonths(this.budget.fiscal_year.start_date, this.budget.fiscal_year.end_date, \"12\");\n\t\t\t\tfor (let k = 0; k < 12; k++) {\n\t\t\t\t\tconst element = fiscalMonths[k];\n\t\t\t\t\ttreeList.thead.find(`[data-field~='monthly_amount[${k}].amount']`).html(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Headers */\n\t\t\tvar headers = e.sender.thead.children();\n\t\t\tfor (var i = 0; i < headers.length; i++) {\n\t\t\t\tvar th = kendo.jQuery(headers[i]);\n\t\t\t\tth.css(\"font-weight\", \"bold\");\n\t\t\t\tth.css(\"text-align\", \"center\");\n\t\t\t}\n\n\t\t\t/* Items */\n\t\t\tvar items = e.sender.items();\n\t\t\tfor (var j = 0; j < items.length; j++) {\n\t\t\t\tvar dataItem = e.sender.dataItem(items[j]);\n\t\t\t\tvar row = kendo.jQuery(items[j]);\n\n\t\t\t\t/* Parent in bold */\n\t\t\t\tif(dataItem.get(\"hasChildren\") || dataItem.get(\"parentId\") === null){\n\t\t\t\t\trow.find(\"[data-command='copycross']\").hide();\n\t\t\t\t\trow.css(\"font-weight\", \"bold\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// DataSource Changes\n\t\tonDataSourceChanges(e) {\n\t\t\tif (e.field) {\n\t\t\t\tlet dataRow = e.items[0];\n\n\t\t\t\tif (e.field === \"secondary_account\") {\n\t\t\t\t\t\tif (dataRow.secondary_account !== null) {\n\t\t\t\t\t\t\t\tdataRow.set(\"secondary_account_uuid\", dataRow.secondary_account.uuid);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Set default when deselect\n\t\t\t\t\t\t\t\tdataRow.set(\"secondary_account_uuid\", \"\");\n\t\t\t\t\t\t\t\tdataRow.set(\"secondary_account\", new AccountModel());\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\tthis.dataSourceAutoCalculate();\n\t\t},\n\t\t// Auto Calculate In DataSource\n\t\tdataSourceAutoCalculate() {\n\t\t\t\t// Sum Amount\n\t\t\t\tthis.budgetLineDS.data().forEach(value => {\n\t\t\t\t\t\tlet sumAmt = 0;\n\t\t\t\t\t\tvalue.monthly_amount.forEach(ele => {\n\t\t\t\t\t\t\t\tsumAmt += ele.amount;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvalue.set(\"amount\", sumAmt);\n\t\t\t\t});\n\t\t},\n\t\t// Shrink Data\n\t\tshrinkData() {\n\t\t\t\t// Project\n\t\t\t\tthis.budget.project_uuid = this.project.id;\n\n\t\t\t\t// Lines\n\t\t\t\tlet lines = [];\n\t\t\t\tthis.budgetLineDS.data().forEach(value => {\n\t\t\t\t\t\t// Add account line with amount not 0\n\t\t\t\t\t\tif(value.amount !== 0){\n\t\t\t\t\t\t\t\t/* Apply Nature */\n\t\t\t\t\t\t\t\tif(value.account.account_type.nature.toLowerCase() === \"cr\"){\n\t\t\t\t\t\t\t\t\t\t/* Amount */\n\t\t\t\t\t\t\t\t\t\tvalue.amount = value.amount * -1;\n\n\t\t\t\t\t\t\t\t\t\t/* Monthly Amount */\n\t\t\t\t\t\t\t\t\t\tvalue.monthly_amount.forEach(ele => {\n\t\t\t\t\t\t\t\t\t\t\t\tele.amount = ele.amount * -1;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlines.push(new BudgetLineModel(value));\n\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.budget.lines = lines;\n\n\t\t\t\t// User\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.budget.modified_by = this.user;\n\t\t\t\t} else {\n\t\t\t\t\t\tthis.budget.created_by = this.user;\n\t\t\t\t}\n\t\t},\n\t\t// Validating\n\t\tvalidateForm() {\n\t\t\tlet result = true,\n\t\t\t\tmsg = \"\";\n\n\t\t\t// Name\n\t\t\tif(this.budget.name === ''){\n\t\t\t\tmsg += `<p>${i18n.t(\"name_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Project\n\t\t\tif(this.project.id === ''){\n\t\t\t\tmsg += `<p>${i18n.t(\"project_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Fiscal Date\n\t\t\tif(this.budget.fiscal_year.id === ''){\n\t\t\t\tmsg += `<p>${i18n.t(\"fiscal_date_is_required\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Amount\n\t\t\tlet hasZeroAmount = true;\n\t\t\tthis.budgetLineDS.data().forEach(value => {\n\t\t\t\tif(value.amount !== 0 ){\n\t\t\t\t\thasZeroAmount = false;\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(hasZeroAmount){\n\t\t\t\tmsg += `<p>${i18n.t(\"please_enter_amount\")}</p>`;\n\t\t\t\tresult = false;\n\t\t\t}\n\n\t\t\t// Show Alert\n\t\t\tthis.errorMessage = msg;\n\t\t\tthis.alert = false;\n\t\t\tif (result === false) {\n\t\t\t\tthis.alert = true;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\t// All Saves\n\t\tasync onSaveOptionClick(mode) {\n\t\t\t\tif (this.$refs.form.validate() && this.validateForm()) {\n\t\t\t\t\t\tthis.saveMode = mode;\n\t\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t},\n\t\tcancel() {\n\t\t\tthis.$swal({\n\t\t\t\ttitle: i18n.t('msg_title_warning'),\n\t\t\t\ttext: i18n.t('msg_discard'),\n\t\t\t\ticon: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcancelButtonText: i18n.t('cancel'),\n\t\t\t\tconfirmButtonColor: \"#4d4848\",\n\t\t\t\tcancelButtonColor: \"#ED1A3A\",\n\t\t\t\tconfirmButtonText: i18n.t('discard'),\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.value) {\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tclear() {\n\t\t\tthis.isEdit = false;\n\t\t\tthis.saveMode = '';\n\n\t\t\tthis.budget = new BudgetModel();\n\t\t\tthis.project = new ProjectModel(),\n\n\t\t\t// Datasoure\n\t\t\tthis.budgetLineDS.data([]);\n\n\t\t\tthis.setDefaultData();\n\t\t},\n\t\tsave() {\n\t\t\t\tlet self = this;\n\n\t\t\t\t// Shrink Data\n\t\t\t\tthis.shrinkData();\n\n\t\t\t\t// Sync Data\n\t\t\t\tthis.showLoading = true;\n\t\t\t\tbudgetHandler.save(this.budget)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (response) {\n\t\t\t\t\t\t\t/* Update Vuex Data */\n\t\t\t\t\t\t\tthis.$store.dispatch('budgets/saveBudget', response.data);\n\n\t\t\t\t\t\t\tself.responseStatus(response);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\t\tthis.$snotify.error(error);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(()=>{\n\t\t\t\t\t\tself.showLoading = false;\n\t\t\t\t\t});\n\t\t},\n\t\t// Response Status\n\t\tresponseStatus(response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\t/* Save Close or Delete Action */\n\t\t\t\tif (\n\t\t\t\t\tthis.saveMode === SaveOption.SAVECLOSE ||\n\t\t\t\t\tthis.saveMode === SaveOption.DELETE\n\t\t\t\t) {\n\t\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* Reset Data */\n\t\t\t\tthis.clear();\n\n\t\t\t\t/* Alert Success */\n\t\t\t\tthis.$snotify.success(i18n.t(\"successful\"));\n\t\t\t} else {\n\t\t\t\t/* Alert Error */\n\t\t\t\tthis.$snotify.error(i18n.t(\"error_something_wrong\"));\n\t\t\t}\n\t\t},\n\t\t// On Reporint Language Changes\n\t\tonReportingLanguageChanges() {\n\t\t\t\tthis.fieldName = \"account.name\";\n\t\t\t\tif(this.reportingLanguage === \"local\"){\n\t\t\t\t\t\tthis.fieldName = \"account.local_name\";\n\t\t\t\t}\n\n\t\t\t\tthis.generateColumn();\n\t\t},\n\t},\n\twatch: {\n\t\tinitBudget: \"initialData\"\n\t},\n\tcomputed: mapState({\n\t\taccounts: state => state.accounting.accounts,\n\t\tsecondaryAccounts: state => state.accounting.secondaryAccounts,\n\t\tprojects: state => state.projects.list,\n\t}),\n\tmounted () {\n\t\t// Initial Data\n\t\tthis.initialData();\n\t\tthis.generateColumn();\n\t\tthis.initialTreeList();\n\n\t\t/* Datasource bind functions */\n\t\tthis.budgetLineDS.bind(\"change\", this.onDataSourceChanges);\n\t},\n};\n</script>\n\n<style scoped>\n.function_content {\n\t\tpadding: 0 25px 25px;\n\t\tborder-bottom: 0;\n\t\tbackground-color: #fff !important;\n}\n\n@media (min-width: 1264px) {\n\t\t.container {\n\t\t\t\tmax-width: 1185px;\n\t\t\t\t/* max-width: 1080px !important; */\n\t\t}\n}\n\n.grayBg {\n\t\tbackground-color: #F8F8F9;\n}\n\n@media (max-width: 576px) {\n\t\t.mb-6 {\n\t\t\t\tmargin-bottom: 0 !important;\n\t\t}\n}\n\n.section2 {\n\t\tborder: 1px solid #d6d7d8;\n}\n\n.border_grey {\n\t\tborder: 1px solid #d6d7d8;\n}\n\n.attachment_table {\n\t\twidth: 100%;\n}\n\n.greyDark {\n\t\tbackground-color: #f2f2f2;\n}\n\n.upload_btn {\n\t\twidth: 54%;\n\t\tmargin: auto;\n\t\tpadding: 10px 6px;\n\t\ttext-align: center;\n\t\tcolor: #ffff;\n\t\tborder-radius: 22px;\n\t\tbackground: #92d050;\n}\n\n.my_box_min_heihgt {\n\t\theight: 295px;\n}\n\n.width_100 {\n\t\twidth: 100px;\n}\n.v-data-table.simple_table.theme--light{\n\t\tborder-top: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.v-data-table.simple_table > .v-data-table__wrapper > table > tbody > tr > td {\n\t\theight: 32px !important;\n\t\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n\t\tborder-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr > th{\n\t\tborder-bottom: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr:last-child > th{\n\t\tborder-right: thin solid rgba(0, 0, 0, 0.12) !important;\n}\n.theme--light.v-data-table.simple_table > .v-data-table__wrapper > table > thead > tr > th:last-child,\n.v-data-table.simple_table > .v-data-table__wrapper > table > tbody > tr > td:last-child{\n\t\tborder-right: none !important;\n}\n.theme--light.v-data-table > .v-data-table__wrapper > table > tbody > tr:hover:not(.v-data-table__expanded__content):not(.v-data-table__empty-wrapper) {\n\t\tbackground-color: transparent !important;\n}\n\n.primary--text.text-left.v-btn:hover,\n.theme--light.v-btn:hover::before{\n\t\tbackground: none !important;\n}\n</style>\n"]}]}